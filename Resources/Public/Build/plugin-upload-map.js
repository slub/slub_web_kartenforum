var vk2=(()=>{var uSe=Object.create;var Qv=Object.defineProperty,cSe=Object.defineProperties,hSe=Object.getOwnPropertyDescriptor,dSe=Object.getOwnPropertyDescriptors,fSe=Object.getOwnPropertyNames,Hx=Object.getOwnPropertySymbols,pSe=Object.getPrototypeOf,Gq=Object.prototype.hasOwnProperty,Xj=Object.prototype.propertyIsEnumerable;var Xx=Math.pow,Hj=(e,t,i)=>t in e?Qv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,lt=(e,t)=>{for(var i in t||(t={}))Gq.call(t,i)&&Hj(e,i,t[i]);if(Hx)for(var i of Hx(t))Xj.call(t,i)&&Hj(e,i,t[i]);return e},qn=(e,t)=>cSe(e,dSe(t));var Df=(e,t)=>{var i={};for(var o in e)Gq.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&Hx)for(var o of Hx(e))t.indexOf(o)<0&&Xj.call(e,o)&&(i[o]=e[o]);return i};var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),mSe=(e,t)=>{for(var i in t)Qv(e,i,{get:t[i],enumerable:!0})},Jj=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of fSe(t))!Gq.call(e,c)&&c!==i&&Qv(e,c,{get:()=>t[c],enumerable:!(o=hSe(t,c))||o.enumerable});return e};var yt=(e,t,i)=>(i=e!=null?uSe(pSe(e)):{},Jj(t||!e||!e.__esModule?Qv(i,"default",{value:e,enumerable:!0}):i,e)),vSe=e=>Jj(Qv({},"__esModule",{value:!0}),e);var Ci=(e,t,i)=>new Promise((o,c)=>{var a=E=>{try{x(i.next(E))}catch(P){c(P)}},g=E=>{try{x(i.throw(E))}catch(P){c(P)}},x=E=>E.done?o(E.value):Promise.resolve(E.value).then(a,g);x((i=i.apply(e,t)).next())});var Zq=S((d2t,Qj)=>{"use strict";var Yj=Object.getOwnPropertySymbols,gSe=Object.prototype.hasOwnProperty,ySe=Object.prototype.propertyIsEnumerable;function _Se(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function xSe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var o=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(o.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}Qj.exports=xSe()?Object.assign:function(e,t){for(var i,o=_Se(e),c,a=1;a<arguments.length;a++){i=Object(arguments[a]);for(var g in i)gSe.call(i,g)&&(o[g]=i[g]);if(Yj){c=Yj(i);for(var x=0;x<c.length;x++)ySe.call(i,c[x])&&(o[c[x]]=i[c[x]])}}return o}});var m5=S(vr=>{"use strict";var Hq=Zq(),Lf=60103,r5=60106;vr.Fragment=60107;vr.StrictMode=60108;vr.Profiler=60114;var i5=60109,n5=60110,a5=60112;vr.Suspense=60113;var o5=60115,s5=60116;typeof Symbol=="function"&&Symbol.for&&(wo=Symbol.for,Lf=wo("react.element"),r5=wo("react.portal"),vr.Fragment=wo("react.fragment"),vr.StrictMode=wo("react.strict_mode"),vr.Profiler=wo("react.profiler"),i5=wo("react.provider"),n5=wo("react.context"),a5=wo("react.forward_ref"),vr.Suspense=wo("react.suspense"),o5=wo("react.memo"),s5=wo("react.lazy"));var wo,e5=typeof Symbol=="function"&&Symbol.iterator;function bSe(e){return e===null||typeof e!="object"?null:(e=e5&&e[e5]||e["@@iterator"],typeof e=="function"?e:null)}function eg(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u5={};function Ff(e,t,i){this.props=e,this.context=t,this.refs=u5,this.updater=i||l5}Ff.prototype.isReactComponent={};Ff.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(eg(85));this.updater.enqueueSetState(this,e,t,"setState")};Ff.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function c5(){}c5.prototype=Ff.prototype;function Xq(e,t,i){this.props=e,this.context=t,this.refs=u5,this.updater=i||l5}var Jq=Xq.prototype=new c5;Jq.constructor=Xq;Hq(Jq,Ff.prototype);Jq.isPureReactComponent=!0;var Yq={current:null},h5=Object.prototype.hasOwnProperty,d5={key:!0,ref:!0,__self:!0,__source:!0};function f5(e,t,i){var o,c={},a=null,g=null;if(t!=null)for(o in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(a=""+t.key),t)h5.call(t,o)&&!d5.hasOwnProperty(o)&&(c[o]=t[o]);var x=arguments.length-2;if(x===1)c.children=i;else if(1<x){for(var E=Array(x),P=0;P<x;P++)E[P]=arguments[P+2];c.children=E}if(e&&e.defaultProps)for(o in x=e.defaultProps,x)c[o]===void 0&&(c[o]=x[o]);return{$$typeof:Lf,type:e,key:a,ref:g,props:c,_owner:Yq.current}}function wSe(e,t){return{$$typeof:Lf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qq(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lf}function SSe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var t5=/\/+/g;function Kq(e,t){return typeof e=="object"&&e!==null&&e.key!=null?SSe(""+e.key):t.toString(36)}function Yx(e,t,i,o,c){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(a){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case Lf:case r5:g=!0}}if(g)return g=e,c=c(g),e=o===""?"."+Kq(g,0):o,Array.isArray(c)?(i="",e!=null&&(i=e.replace(t5,"$&/")+"/"),Yx(c,t,i,"",function(P){return P})):c!=null&&(Qq(c)&&(c=wSe(c,i+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(t5,"$&/")+"/")+e)),t.push(c)),1;if(g=0,o=o===""?".":o+":",Array.isArray(e))for(var x=0;x<e.length;x++){a=e[x];var E=o+Kq(a,x);g+=Yx(a,t,i,E,c)}else if(E=bSe(e),typeof E=="function")for(e=E.call(e),x=0;!(a=e.next()).done;)a=a.value,E=o+Kq(a,x++),g+=Yx(a,t,i,E,c);else if(a==="object")throw t=""+e,Error(eg(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return g}function Jx(e,t,i){if(e==null)return e;var o=[],c=0;return Yx(e,o,"","",function(a){return t.call(i,a,c++)}),o}function TSe(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(i){e._status===0&&(i=i.default,e._status=1,e._result=i)},function(i){e._status===0&&(e._status=2,e._result=i)})}if(e._status===1)return e._result;throw e._result}var p5={current:null};function Dl(){var e=p5.current;if(e===null)throw Error(eg(321));return e}var ESe={ReactCurrentDispatcher:p5,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Yq,IsSomeRendererActing:{current:!1},assign:Hq};vr.Children={map:Jx,forEach:function(e,t,i){Jx(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Jx(e,function(){t++}),t},toArray:function(e){return Jx(e,function(t){return t})||[]},only:function(e){if(!Qq(e))throw Error(eg(143));return e}};vr.Component=Ff;vr.PureComponent=Xq;vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ESe;vr.cloneElement=function(e,t,i){if(e==null)throw Error(eg(267,e));var o=Hq({},e.props),c=e.key,a=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,g=Yq.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var x=e.type.defaultProps;for(E in t)h5.call(t,E)&&!d5.hasOwnProperty(E)&&(o[E]=t[E]===void 0&&x!==void 0?x[E]:t[E])}var E=arguments.length-2;if(E===1)o.children=i;else if(1<E){x=Array(E);for(var P=0;P<E;P++)x[P]=arguments[P+2];o.children=x}return{$$typeof:Lf,type:e.type,key:c,ref:a,props:o,_owner:g}};vr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:n5,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:i5,_context:e},e.Consumer=e};vr.createElement=f5;vr.createFactory=function(e){var t=f5.bind(null,e);return t.type=e,t};vr.createRef=function(){return{current:null}};vr.forwardRef=function(e){return{$$typeof:a5,render:e}};vr.isValidElement=Qq;vr.lazy=function(e){return{$$typeof:s5,_payload:{_status:-1,_result:e},_init:TSe}};vr.memo=function(e,t){return{$$typeof:o5,type:e,compare:t===void 0?null:t}};vr.useCallback=function(e,t){return Dl().useCallback(e,t)};vr.useContext=function(e,t){return Dl().useContext(e,t)};vr.useDebugValue=function(){};vr.useEffect=function(e,t){return Dl().useEffect(e,t)};vr.useImperativeHandle=function(e,t,i){return Dl().useImperativeHandle(e,t,i)};vr.useLayoutEffect=function(e,t){return Dl().useLayoutEffect(e,t)};vr.useMemo=function(e,t){return Dl().useMemo(e,t)};vr.useReducer=function(e,t,i){return Dl().useReducer(e,t,i)};vr.useRef=function(e){return Dl().useRef(e)};vr.useState=function(e){return Dl().useState(e)};vr.version="17.0.2"});var Ar=S((p2t,v5)=>{"use strict";v5.exports=m5()});var w5=S(Tr=>{"use strict";var Nf,ig,rb,oI;typeof performance=="object"&&typeof performance.now=="function"?(g5=performance,Tr.unstable_now=function(){return g5.now()}):(eI=Date,y5=eI.now(),Tr.unstable_now=function(){return eI.now()-y5});var g5,eI,y5;typeof window=="undefined"||typeof MessageChannel!="function"?(zf=null,tI=null,rI=function(){if(zf!==null)try{var e=Tr.unstable_now();zf(!0,e),zf=null}catch(t){throw setTimeout(rI,0),t}},Nf=function(e){zf!==null?setTimeout(Nf,0,e):(zf=e,setTimeout(rI,0))},ig=function(e,t){tI=setTimeout(e,t)},rb=function(){clearTimeout(tI)},Tr.unstable_shouldYield=function(){return!1},oI=Tr.unstable_forceFrameRate=function(){}):(_5=window.setTimeout,x5=window.clearTimeout,typeof console!="undefined"&&(b5=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof b5!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),tg=!1,rg=null,Qx=-1,iI=5,nI=0,Tr.unstable_shouldYield=function(){return Tr.unstable_now()>=nI},oI=function(){},Tr.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):iI=0<e?Math.floor(1e3/e):5},aI=new MessageChannel,eb=aI.port2,aI.port1.onmessage=function(){if(rg!==null){var e=Tr.unstable_now();nI=e+iI;try{rg(!0,e)?eb.postMessage(null):(tg=!1,rg=null)}catch(t){throw eb.postMessage(null),t}}else tg=!1},Nf=function(e){rg=e,tg||(tg=!0,eb.postMessage(null))},ig=function(e,t){Qx=_5(function(){e(Tr.unstable_now())},t)},rb=function(){x5(Qx),Qx=-1});var zf,tI,rI,_5,x5,b5,tg,rg,Qx,iI,nI,aI,eb;function sI(e,t){var i=e.length;e.push(t);e:for(;;){var o=i-1>>>1,c=e[o];if(c!==void 0&&0<tb(c,t))e[o]=t,e[i]=c,i=o;else break e}}function rs(e){return e=e[0],e===void 0?null:e}function ib(e){var t=e[0];if(t!==void 0){var i=e.pop();if(i!==t){e[0]=i;e:for(var o=0,c=e.length;o<c;){var a=2*(o+1)-1,g=e[a],x=a+1,E=e[x];if(g!==void 0&&0>tb(g,i))E!==void 0&&0>tb(E,g)?(e[o]=E,e[x]=i,o=x):(e[o]=g,e[a]=i,o=a);else if(E!==void 0&&0>tb(E,i))e[o]=E,e[x]=i,o=x;else break e}}return t}return null}function tb(e,t){var i=e.sortIndex-t.sortIndex;return i!==0?i:e.id-t.id}var zs=[],Nu=[],ASe=1,So=null,Zn=3,nb=!1,Dh=!1,ng=!1;function lI(e){for(var t=rs(Nu);t!==null;){if(t.callback===null)ib(Nu);else if(t.startTime<=e)ib(Nu),t.sortIndex=t.expirationTime,sI(zs,t);else break;t=rs(Nu)}}function uI(e){if(ng=!1,lI(e),!Dh)if(rs(zs)!==null)Dh=!0,Nf(cI);else{var t=rs(Nu);t!==null&&ig(uI,t.startTime-e)}}function cI(e,t){Dh=!1,ng&&(ng=!1,rb()),nb=!0;var i=Zn;try{for(lI(t),So=rs(zs);So!==null&&(!(So.expirationTime>t)||e&&!Tr.unstable_shouldYield());){var o=So.callback;if(typeof o=="function"){So.callback=null,Zn=So.priorityLevel;var c=o(So.expirationTime<=t);t=Tr.unstable_now(),typeof c=="function"?So.callback=c:So===rs(zs)&&ib(zs),lI(t)}else ib(zs);So=rs(zs)}if(So!==null)var a=!0;else{var g=rs(Nu);g!==null&&ig(uI,g.startTime-t),a=!1}return a}finally{So=null,Zn=i,nb=!1}}var qSe=oI;Tr.unstable_IdlePriority=5;Tr.unstable_ImmediatePriority=1;Tr.unstable_LowPriority=4;Tr.unstable_NormalPriority=3;Tr.unstable_Profiling=null;Tr.unstable_UserBlockingPriority=2;Tr.unstable_cancelCallback=function(e){e.callback=null};Tr.unstable_continueExecution=function(){Dh||nb||(Dh=!0,Nf(cI))};Tr.unstable_getCurrentPriorityLevel=function(){return Zn};Tr.unstable_getFirstCallbackNode=function(){return rs(zs)};Tr.unstable_next=function(e){switch(Zn){case 1:case 2:case 3:var t=3;break;default:t=Zn}var i=Zn;Zn=t;try{return e()}finally{Zn=i}};Tr.unstable_pauseExecution=function(){};Tr.unstable_requestPaint=qSe;Tr.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=Zn;Zn=e;try{return t()}finally{Zn=i}};Tr.unstable_scheduleCallback=function(e,t,i){var o=Tr.unstable_now();switch(typeof i=="object"&&i!==null?(i=i.delay,i=typeof i=="number"&&0<i?o+i:o):i=o,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return c=i+c,e={id:ASe++,callback:t,priorityLevel:e,startTime:i,expirationTime:c,sortIndex:-1},i>o?(e.sortIndex=i,sI(Nu,e),rs(zs)===null&&e===rs(Nu)&&(ng?rb():ng=!0,ig(uI,i-o))):(e.sortIndex=c,sI(zs,e),Dh||nb||(Dh=!0,Nf(cI))),e};Tr.unstable_wrapCallback=function(e){var t=Zn;return function(){var i=Zn;Zn=t;try{return e.apply(this,arguments)}finally{Zn=i}}}});var T5=S((v2t,S5)=>{"use strict";S5.exports=w5()});var c6=S(Po=>{"use strict";var Jb=Ar(),ai=Zq(),dn=T5();function it(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Jb)throw Error(it(227));var FU=new Set,kg={};function Gh(e,t){op(e,t),op(e+"Capture",t)}function op(e,t){for(kg[e]=t,e=0;e<t.length;e++)FU.add(t[e])}var jl=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ISe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E5=Object.prototype.hasOwnProperty,A5={},q5={};function PSe(e){return E5.call(q5,e)?!0:E5.call(A5,e)?!1:ISe.test(e)?q5[e]=!0:(A5[e]=!0,!1)}function CSe(e,t,i,o){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function MSe(e,t,i,o){if(t===null||typeof t=="undefined"||CSe(e,t,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fa(e,t,i,o,c,a,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=g}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Cn[e]=new fa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Cn[t]=new fa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Cn[e]=new fa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Cn[e]=new fa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Cn[e]=new fa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Cn[e]=new fa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Cn[e]=new fa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Cn[e]=new fa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Cn[e]=new fa(e,5,!1,e.toLowerCase(),null,!1,!1)});var _P=/[\-:]([a-z])/g;function xP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_P,xP);Cn[t]=new fa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_P,xP);Cn[t]=new fa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_P,xP);Cn[t]=new fa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Cn[e]=new fa(e,1,!1,e.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new fa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Cn[e]=new fa(e,1,!1,e.toLowerCase(),null,!0,!0)});function bP(e,t,i,o){var c=Cn.hasOwnProperty(t)?Cn[t]:null,a=c!==null?c.type===0:o?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(MSe(t,i,c,o)&&(i=null),o||c===null?PSe(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,o=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,o?e.setAttributeNS(o,t,i):e.setAttribute(t,i))))}var Zh=Jb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gg=60103,Fh=60106,ju=60107,wP=60108,wg=60114,SP=60109,TP=60110,Yb=60112,Sg=60113,Ib=60120,Qb=60115,EP=60116,AP=60121,qP=60128,zU=60129,IP=60130,OI=60131;typeof Symbol=="function"&&Symbol.for&&(Yi=Symbol.for,gg=Yi("react.element"),Fh=Yi("react.portal"),ju=Yi("react.fragment"),wP=Yi("react.strict_mode"),wg=Yi("react.profiler"),SP=Yi("react.provider"),TP=Yi("react.context"),Yb=Yi("react.forward_ref"),Sg=Yi("react.suspense"),Ib=Yi("react.suspense_list"),Qb=Yi("react.memo"),EP=Yi("react.lazy"),AP=Yi("react.block"),Yi("react.scope"),qP=Yi("react.opaque.id"),zU=Yi("react.debug_trace_mode"),IP=Yi("react.offscreen"),OI=Yi("react.legacy_hidden"));var Yi,I5=typeof Symbol=="function"&&Symbol.iterator;function ag(e){return e===null||typeof e!="object"?null:(e=I5&&e[I5]||e["@@iterator"],typeof e=="function"?e:null)}var hI;function yg(e){if(hI===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);hI=t&&t[1]||""}return`
`+hI+e}var dI=!1;function ab(e,t){if(!e||dI)return"";dI=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var o=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){o=E}e.call(t.prototype)}}else{try{throw Error()}catch(E){o=E}e()}}catch(E){if(E&&o&&typeof E.stack=="string"){for(var c=E.stack.split(`
`),a=o.stack.split(`
`),g=c.length-1,x=a.length-1;1<=g&&0<=x&&c[g]!==a[x];)x--;for(;1<=g&&0<=x;g--,x--)if(c[g]!==a[x]){if(g!==1||x!==1)do if(g--,x--,0>x||c[g]!==a[x])return`
`+c[g].replace(" at new "," at ");while(1<=g&&0<=x);break}}}finally{dI=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?yg(e):""}function RSe(e){switch(e.tag){case 5:return yg(e.type);case 16:return yg("Lazy");case 13:return yg("Suspense");case 19:return yg("SuspenseList");case 0:case 2:case 15:return e=ab(e.type,!1),e;case 11:return e=ab(e.type.render,!1),e;case 22:return e=ab(e.type._render,!1),e;case 1:return e=ab(e.type,!0),e;default:return""}}function Xf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ju:return"Fragment";case Fh:return"Portal";case wg:return"Profiler";case wP:return"StrictMode";case Sg:return"Suspense";case Ib:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case TP:return(e.displayName||"Context")+".Consumer";case SP:return(e._context.displayName||"Context")+".Provider";case Yb:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Qb:return Xf(e.type);case AP:return Xf(e._render);case EP:t=e._payload,e=e._init;try{return Xf(e(t))}catch(i){}}return null}function Qu(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function NU(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function OSe(e){var t=NU(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,a=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){o=""+g,a.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ob(e){e._valueTracker||(e._valueTracker=OSe(e))}function BU(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=NU(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Pb(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function kI(e,t){var i=t.checked;return ai({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function P5(e,t){var i=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;i=Qu(t.value!=null?t.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jU(e,t){t=t.checked,t!=null&&bP(e,"checked",t,!1)}function DI(e,t){jU(e,t);var i=Qu(t.value),o=t.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?LI(e,t.type,i):t.hasOwnProperty("defaultValue")&&LI(e,t.type,Qu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function C5(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function LI(e,t,i){(t!=="number"||Pb(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function kSe(e){var t="";return Jb.Children.forEach(e,function(i){i!=null&&(t+=i)}),t}function FI(e,t){return e=ai({children:void 0},t),(t=kSe(t.children))&&(e.children=t),e}function Jf(e,t,i,o){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Qu(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function zI(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(it(91));return ai({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function M5(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(it(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(it(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Qu(i)}}function UU(e,t){var i=Qu(t.value),o=Qu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function R5(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var NI={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function VU(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function BI(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?VU(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sb,$U=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,i,o,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,o,c)})}:e}(function(e,t){if(e.namespaceURI!==NI.svg||"innerHTML"in e)e.innerHTML=t;else{for(sb=sb||document.createElement("div"),sb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Dg(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Tg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DSe=["Webkit","ms","Moz","O"];Object.keys(Tg).forEach(function(e){DSe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tg[t]=Tg[e]})});function WU(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Tg.hasOwnProperty(e)&&Tg[e]?(""+t).trim():t+"px"}function GU(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=i.indexOf("--")===0,c=WU(i,t[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,c):e[i]=c}}var LSe=ai({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jI(e,t){if(t){if(LSe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(it(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(it(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(it(61))}if(t.style!=null&&typeof t.style!="object")throw Error(it(62))}}function UI(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function PP(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var VI=null,Yf=null,Qf=null;function O5(e){if(e=Hg(e)){if(typeof VI!="function")throw Error(it(280));var t=e.stateNode;t&&(t=a1(t),VI(e.stateNode,e.type,t))}}function ZU(e){Yf?Qf?Qf.push(e):Qf=[e]:Yf=e}function KU(){if(Yf){var e=Yf,t=Qf;if(Qf=Yf=null,O5(e),t)for(e=0;e<t.length;e++)O5(t[e])}}function CP(e,t){return e(t)}function HU(e,t,i,o,c){return e(t,i,o,c)}function MP(){}var XU=CP,zh=!1,fI=!1;function RP(){(Yf!==null||Qf!==null)&&(MP(),KU())}function FSe(e,t,i){if(fI)return e(t,i);fI=!0;try{return XU(e,t,i)}finally{fI=!1,RP()}}function Lg(e,t){var i=e.stateNode;if(i===null)return null;var o=a1(i);if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(it(231,t,typeof i));return i}var $I=!1;if(jl)try{Bf={},Object.defineProperty(Bf,"passive",{get:function(){$I=!0}}),window.addEventListener("test",Bf,Bf),window.removeEventListener("test",Bf,Bf)}catch(e){$I=!1}var Bf;function zSe(e,t,i,o,c,a,g,x,E){var P=Array.prototype.slice.call(arguments,3);try{t.apply(i,P)}catch(M){this.onError(M)}}var Eg=!1,Cb=null,Mb=!1,WI=null,NSe={onError:function(e){Eg=!0,Cb=e}};function BSe(e,t,i,o,c,a,g,x,E){Eg=!1,Cb=null,zSe.apply(NSe,arguments)}function jSe(e,t,i,o,c,a,g,x,E){if(BSe.apply(this,arguments),Eg){if(Eg){var P=Cb;Eg=!1,Cb=null}else throw Error(it(198));Mb||(Mb=!0,WI=P)}}function Kh(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function JU(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function k5(e){if(Kh(e)!==e)throw Error(it(188))}function USe(e){var t=e.alternate;if(!t){if(t=Kh(e),t===null)throw Error(it(188));return t!==e?null:e}for(var i=e,o=t;;){var c=i.return;if(c===null)break;var a=c.alternate;if(a===null){if(o=c.return,o!==null){i=o;continue}break}if(c.child===a.child){for(a=c.child;a;){if(a===i)return k5(c),e;if(a===o)return k5(c),t;a=a.sibling}throw Error(it(188))}if(i.return!==o.return)i=c,o=a;else{for(var g=!1,x=c.child;x;){if(x===i){g=!0,i=c,o=a;break}if(x===o){g=!0,o=c,i=a;break}x=x.sibling}if(!g){for(x=a.child;x;){if(x===i){g=!0,i=a,o=c;break}if(x===o){g=!0,o=a,i=c;break}x=x.sibling}if(!g)throw Error(it(189))}}if(i.alternate!==o)throw Error(it(190))}if(i.tag!==3)throw Error(it(188));return i.stateNode.current===i?e:t}function YU(e){if(e=USe(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function D5(e,t){for(var i=e.alternate;t!==null;){if(t===e||t===i)return!0;t=t.return}return!1}var QU,OP,e4,t4,GI=!1,Ns=[],Wu=null,Gu=null,Zu=null,Fg=new Map,zg=new Map,og=[],L5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZI(e,t,i,o,c){return{blockedOn:e,domEventName:t,eventSystemFlags:i|16,nativeEvent:c,targetContainers:[o]}}function F5(e,t){switch(e){case"focusin":case"focusout":Wu=null;break;case"dragenter":case"dragleave":Gu=null;break;case"mouseover":case"mouseout":Zu=null;break;case"pointerover":case"pointerout":Fg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zg.delete(t.pointerId)}}function sg(e,t,i,o,c,a){return e===null||e.nativeEvent!==a?(e=ZI(t,i,o,c,a),t!==null&&(t=Hg(t),t!==null&&OP(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function VSe(e,t,i,o,c){switch(t){case"focusin":return Wu=sg(Wu,e,t,i,o,c),!0;case"dragenter":return Gu=sg(Gu,e,t,i,o,c),!0;case"mouseover":return Zu=sg(Zu,e,t,i,o,c),!0;case"pointerover":var a=c.pointerId;return Fg.set(a,sg(Fg.get(a)||null,e,t,i,o,c)),!0;case"gotpointercapture":return a=c.pointerId,zg.set(a,sg(zg.get(a)||null,e,t,i,o,c)),!0}return!1}function $Se(e){var t=Nh(e.target);if(t!==null){var i=Kh(t);if(i!==null){if(t=i.tag,t===13){if(t=JU(i),t!==null){e.blockedOn=t,t4(e.lanePriority,function(){dn.unstable_runWithPriority(e.priority,function(){e4(i)})});return}}else if(t===3&&i.stateNode.hydrate){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yb(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=FP(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i!==null)return t=Hg(i),t!==null&&OP(t),e.blockedOn=i,!1;t.shift()}return!0}function z5(e,t,i){yb(e)&&i.delete(t)}function WSe(){for(GI=!1;0<Ns.length;){var e=Ns[0];if(e.blockedOn!==null){e=Hg(e.blockedOn),e!==null&&QU(e);break}for(var t=e.targetContainers;0<t.length;){var i=FP(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i!==null){e.blockedOn=i;break}t.shift()}e.blockedOn===null&&Ns.shift()}Wu!==null&&yb(Wu)&&(Wu=null),Gu!==null&&yb(Gu)&&(Gu=null),Zu!==null&&yb(Zu)&&(Zu=null),Fg.forEach(z5),zg.forEach(z5)}function lg(e,t){e.blockedOn===t&&(e.blockedOn=null,GI||(GI=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,WSe)))}function r4(e){function t(c){return lg(c,e)}if(0<Ns.length){lg(Ns[0],e);for(var i=1;i<Ns.length;i++){var o=Ns[i];o.blockedOn===e&&(o.blockedOn=null)}}for(Wu!==null&&lg(Wu,e),Gu!==null&&lg(Gu,e),Zu!==null&&lg(Zu,e),Fg.forEach(t),zg.forEach(t),i=0;i<og.length;i++)o=og[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<og.length&&(i=og[0],i.blockedOn===null);)$Se(i),i.blockedOn===null&&og.shift()}function lb(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var $f={animationend:lb("Animation","AnimationEnd"),animationiteration:lb("Animation","AnimationIteration"),animationstart:lb("Animation","AnimationStart"),transitionend:lb("Transition","TransitionEnd")},pI={},i4={};jl&&(i4=document.createElement("div").style,"AnimationEvent"in window||(delete $f.animationend.animation,delete $f.animationiteration.animation,delete $f.animationstart.animation),"TransitionEvent"in window||delete $f.transitionend.transition);function e1(e){if(pI[e])return pI[e];if(!$f[e])return e;var t=$f[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in i4)return pI[e]=t[i];return e}var n4=e1("animationend"),a4=e1("animationiteration"),o4=e1("animationstart"),s4=e1("transitionend"),l4=new Map,kP=new Map,GSe=["abort","abort",n4,"animationEnd",a4,"animationIteration",o4,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",s4,"transitionEnd","waiting","waiting"];function DP(e,t){for(var i=0;i<e.length;i+=2){var o=e[i],c=e[i+1];c="on"+(c[0].toUpperCase()+c.slice(1)),kP.set(o,t),l4.set(o,c),Gh(c,[o])}}var ZSe=dn.unstable_now;ZSe();var $r=8;function Uf(e){if((1&e)!==0)return $r=15,1;if((2&e)!==0)return $r=14,2;if((4&e)!==0)return $r=13,4;var t=24&e;return t!==0?($r=12,t):(e&32)!==0?($r=11,32):(t=192&e,t!==0?($r=10,t):(e&256)!==0?($r=9,256):(t=3584&e,t!==0?($r=8,t):(e&4096)!==0?($r=7,4096):(t=4186112&e,t!==0?($r=6,t):(t=62914560&e,t!==0?($r=5,t):e&67108864?($r=4,67108864):(e&134217728)!==0?($r=3,134217728):(t=805306368&e,t!==0?($r=2,t):(1073741824&e)!==0?($r=1,1073741824):($r=8,e))))))}function KSe(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function HSe(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(it(358,e))}}function Ng(e,t){var i=e.pendingLanes;if(i===0)return $r=0;var o=0,c=0,a=e.expiredLanes,g=e.suspendedLanes,x=e.pingedLanes;if(a!==0)o=a,c=$r=15;else if(a=i&134217727,a!==0){var E=a&~g;E!==0?(o=Uf(E),c=$r):(x&=a,x!==0&&(o=Uf(x),c=$r))}else a=i&~g,a!==0?(o=Uf(a),c=$r):x!==0&&(o=Uf(x),c=$r);if(o===0)return 0;if(o=31-ec(o),o=i&((0>o?0:1<<o)<<1)-1,t!==0&&t!==o&&(t&g)===0){if(Uf(t),c<=$r)return t;$r=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)i=31-ec(t),c=1<<i,o|=e[i],t&=~c;return o}function u4(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rb(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Vf(24&~t),e===0?Rb(10,t):e;case 10:return e=Vf(192&~t),e===0?Rb(8,t):e;case 8:return e=Vf(3584&~t),e===0&&(e=Vf(4186112&~t),e===0&&(e=512)),e;case 2:return t=Vf(805306368&~t),t===0&&(t=268435456),t}throw Error(it(358,e))}function Vf(e){return e&-e}function mI(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function t1(e,t,i){e.pendingLanes|=t;var o=t-1;e.suspendedLanes&=o,e.pingedLanes&=o,e=e.eventTimes,t=31-ec(t),e[t]=i}var ec=Math.clz32?Math.clz32:YSe,XSe=Math.log,JSe=Math.LN2;function YSe(e){return e===0?32:31-(XSe(e)/JSe|0)|0}var QSe=dn.unstable_UserBlockingPriority,eTe=dn.unstable_runWithPriority,_b=!0;function tTe(e,t,i,o){zh||MP();var c=LP,a=zh;zh=!0;try{HU(c,e,t,i,o)}finally{(zh=a)||RP()}}function rTe(e,t,i,o){eTe(QSe,LP.bind(null,e,t,i,o))}function LP(e,t,i,o){if(_b){var c;if((c=(t&4)===0)&&0<Ns.length&&-1<L5.indexOf(e))e=ZI(null,e,t,i,o),Ns.push(e);else{var a=FP(e,t,i,o);if(a===null)c&&F5(e,o);else{if(c){if(-1<L5.indexOf(e)){e=ZI(a,e,t,i,o),Ns.push(e);return}if(VSe(a,e,t,i,o))return;F5(e,o)}w4(e,t,o,null,i)}}}}function FP(e,t,i,o){var c=PP(o);if(c=Nh(c),c!==null){var a=Kh(c);if(a===null)c=null;else{var g=a.tag;if(g===13){if(c=JU(a),c!==null)return c;c=null}else if(g===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;c=null}else a!==c&&(c=null)}}return w4(e,t,o,c,i),null}var Uu=null,zP=null,xb=null;function c4(){if(xb)return xb;var e,t=zP,i=t.length,o,c="value"in Uu?Uu.value:Uu.textContent,a=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(o=1;o<=g&&t[i-o]===c[a-o];o++);return xb=c.slice(e,1<o?1-o:void 0)}function bb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ub(){return!0}function N5(){return!1}function no(e){function t(i,o,c,a,g){this._reactName=i,this._targetInst=c,this.type=o,this.nativeEvent=a,this.target=g,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(i=e[x],this[x]=i?i(a):a[x]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ub:N5,this.isPropagationStopped=N5,this}return ai(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ub)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ub)},persist:function(){},isPersistent:ub}),t}var cp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NP=no(cp),Kg=ai({},cp,{view:0,detail:0}),iTe=no(Kg),vI,gI,ug,r1=ai({},Kg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BP,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ug&&(ug&&e.type==="mousemove"?(vI=e.screenX-ug.screenX,gI=e.screenY-ug.screenY):gI=vI=0,ug=e),vI)},movementY:function(e){return"movementY"in e?e.movementY:gI}}),B5=no(r1),nTe=ai({},r1,{dataTransfer:0}),aTe=no(nTe),oTe=ai({},Kg,{relatedTarget:0}),yI=no(oTe),sTe=ai({},cp,{animationName:0,elapsedTime:0,pseudoElement:0}),lTe=no(sTe),uTe=ai({},cp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cTe=no(uTe),hTe=ai({},cp,{data:0}),j5=no(hTe),dTe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fTe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pTe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mTe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pTe[e])?!!t[e]:!1}function BP(){return mTe}var vTe=ai({},Kg,{key:function(e){if(e.key){var t=dTe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fTe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BP,charCode:function(e){return e.type==="keypress"?bb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gTe=no(vTe),yTe=ai({},r1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U5=no(yTe),_Te=ai({},Kg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BP}),xTe=no(_Te),bTe=ai({},cp,{propertyName:0,elapsedTime:0,pseudoElement:0}),wTe=no(bTe),STe=ai({},r1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),TTe=no(STe),ETe=[9,13,27,32],jP=jl&&"CompositionEvent"in window,Ag=null;jl&&"documentMode"in document&&(Ag=document.documentMode);var ATe=jl&&"TextEvent"in window&&!Ag,h4=jl&&(!jP||Ag&&8<Ag&&11>=Ag),V5=" ",$5=!1;function d4(e,t){switch(e){case"keyup":return ETe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wf=!1;function qTe(e,t){switch(e){case"compositionend":return f4(t);case"keypress":return t.which!==32?null:($5=!0,V5);case"textInput":return e=t.data,e===V5&&$5?null:e;default:return null}}function ITe(e,t){if(Wf)return e==="compositionend"||!jP&&d4(e,t)?(e=c4(),xb=zP=Uu=null,Wf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return h4&&t.locale!=="ko"?null:t.data;default:return null}}var PTe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!PTe[e.type]:t==="textarea"}function p4(e,t,i,o){ZU(o),t=Ob(t,"onChange"),0<t.length&&(i=new NP("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var qg=null,Bg=null;function CTe(e){_4(e,0)}function i1(e){var t=Zf(e);if(BU(t))return e}function MTe(e,t){if(e==="change")return t}var m4=!1;jl&&(jl?(hb="oninput"in document,hb||(_I=document.createElement("div"),_I.setAttribute("oninput","return;"),hb=typeof _I.oninput=="function"),cb=hb):cb=!1,m4=cb&&(!document.documentMode||9<document.documentMode));var cb,hb,_I;function G5(){qg&&(qg.detachEvent("onpropertychange",v4),Bg=qg=null)}function v4(e){if(e.propertyName==="value"&&i1(Bg)){var t=[];if(p4(t,Bg,e,PP(e)),e=CTe,zh)e(t);else{zh=!0;try{CP(e,t)}finally{zh=!1,RP()}}}}function RTe(e,t,i){e==="focusin"?(G5(),qg=t,Bg=i,qg.attachEvent("onpropertychange",v4)):e==="focusout"&&G5()}function OTe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return i1(Bg)}function kTe(e,t){if(e==="click")return i1(t)}function DTe(e,t){if(e==="input"||e==="change")return i1(t)}function LTe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var To=typeof Object.is=="function"?Object.is:LTe,FTe=Object.prototype.hasOwnProperty;function jg(e,t){if(To(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++)if(!FTe.call(t,i[o])||!To(e[i[o]],t[i[o]]))return!1;return!0}function Z5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function K5(e,t){var i=Z5(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Z5(i)}}function g4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function H5(){for(var e=window,t=Pb();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch(o){i=!1}if(i)e=t.contentWindow;else break;t=Pb(e.document)}return t}function KI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var zTe=jl&&"documentMode"in document&&11>=document.documentMode,Gf=null,HI=null,Ig=null,XI=!1;function X5(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;XI||Gf==null||Gf!==Pb(o)||(o=Gf,"selectionStart"in o&&KI(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ig&&jg(Ig,o)||(Ig=o,o=Ob(HI,"onSelect"),0<o.length&&(t=new NP("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=Gf)))}DP("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);DP("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);DP(GSe,2);for(xI="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),db=0;db<xI.length;db++)kP.set(xI[db],0);var xI,db;op("onMouseEnter",["mouseout","mouseover"]);op("onMouseLeave",["mouseout","mouseover"]);op("onPointerEnter",["pointerout","pointerover"]);op("onPointerLeave",["pointerout","pointerover"]);Gh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _g="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y4=new Set("cancel close invalid load scroll toggle".split(" ").concat(_g));function J5(e,t,i){var o=e.type||"unknown-event";e.currentTarget=i,jSe(o,t,void 0,e),e.currentTarget=null}function _4(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],c=o.event;o=o.listeners;e:{var a=void 0;if(t)for(var g=o.length-1;0<=g;g--){var x=o[g],E=x.instance,P=x.currentTarget;if(x=x.listener,E!==a&&c.isPropagationStopped())break e;J5(c,x,P),a=E}else for(g=0;g<o.length;g++){if(x=o[g],E=x.instance,P=x.currentTarget,x=x.listener,E!==a&&c.isPropagationStopped())break e;J5(c,x,P),a=E}}}if(Mb)throw e=WI,Mb=!1,WI=null,e}function ei(e,t){var i=T4(t),o=e+"__bubble";i.has(o)||(b4(t,e,2,!1),i.add(o))}var Y5="_reactListening"+Math.random().toString(36).slice(2);function x4(e){e[Y5]||(e[Y5]=!0,FU.forEach(function(t){y4.has(t)||Q5(t,!1,e,null),Q5(t,!0,e,null)}))}function Q5(e,t,i,o){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=i;if(e==="selectionchange"&&i.nodeType!==9&&(a=i.ownerDocument),o!==null&&!t&&y4.has(e)){if(e!=="scroll")return;c|=2,a=o}var g=T4(a),x=e+"__"+(t?"capture":"bubble");g.has(x)||(t&&(c|=4),b4(a,e,c,t),g.add(x))}function b4(e,t,i,o){var c=kP.get(t);switch(c===void 0?2:c){case 0:c=tTe;break;case 1:c=rTe;break;default:c=LP}i=c.bind(null,t,i,e),c=void 0,!$I||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function w4(e,t,i,o,c){var a=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var x=o.stateNode.containerInfo;if(x===c||x.nodeType===8&&x.parentNode===c)break;if(g===4)for(g=o.return;g!==null;){var E=g.tag;if((E===3||E===4)&&(E=g.stateNode.containerInfo,E===c||E.nodeType===8&&E.parentNode===c))return;g=g.return}for(;x!==null;){if(g=Nh(x),g===null)return;if(E=g.tag,E===5||E===6){o=a=g;continue e}x=x.parentNode}}o=o.return}FSe(function(){var P=a,M=PP(i),O=[];e:{var z=l4.get(e);if(z!==void 0){var oe=NP,we=e;switch(e){case"keypress":if(bb(i)===0)break e;case"keydown":case"keyup":oe=gTe;break;case"focusin":we="focus",oe=yI;break;case"focusout":we="blur",oe=yI;break;case"beforeblur":case"afterblur":oe=yI;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=B5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=aTe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=xTe;break;case n4:case a4:case o4:oe=lTe;break;case s4:oe=wTe;break;case"scroll":oe=iTe;break;case"wheel":oe=TTe;break;case"copy":case"cut":case"paste":oe=cTe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=U5}var ye=(t&4)!==0,te=!ye&&e==="scroll",Q=ye?z!==null?z+"Capture":null:z;ye=[];for(var ee=P,xe;ee!==null;){xe=ee;var Te=xe.stateNode;if(xe.tag===5&&Te!==null&&(xe=Te,Q!==null&&(Te=Lg(ee,Q),Te!=null&&ye.push(Ug(ee,Te,xe)))),te)break;ee=ee.return}0<ye.length&&(z=new oe(z,we,null,i,M),O.push({event:z,listeners:ye}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",oe=e==="mouseout"||e==="pointerout",z&&(t&16)===0&&(we=i.relatedTarget||i.fromElement)&&(Nh(we)||we[hp]))break e;if((oe||z)&&(z=M.window===M?M:(z=M.ownerDocument)?z.defaultView||z.parentWindow:window,oe?(we=i.relatedTarget||i.toElement,oe=P,we=we?Nh(we):null,we!==null&&(te=Kh(we),we!==te||we.tag!==5&&we.tag!==6)&&(we=null)):(oe=null,we=P),oe!==we)){if(ye=B5,Te="onMouseLeave",Q="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(ye=U5,Te="onPointerLeave",Q="onPointerEnter",ee="pointer"),te=oe==null?z:Zf(oe),xe=we==null?z:Zf(we),z=new ye(Te,ee+"leave",oe,i,M),z.target=te,z.relatedTarget=xe,Te=null,Nh(M)===P&&(ye=new ye(Q,ee+"enter",we,i,M),ye.target=xe,ye.relatedTarget=te,Te=ye),te=Te,oe&&we)t:{for(ye=oe,Q=we,ee=0,xe=ye;xe;xe=jf(xe))ee++;for(xe=0,Te=Q;Te;Te=jf(Te))xe++;for(;0<ee-xe;)ye=jf(ye),ee--;for(;0<xe-ee;)Q=jf(Q),xe--;for(;ee--;){if(ye===Q||Q!==null&&ye===Q.alternate)break t;ye=jf(ye),Q=jf(Q)}ye=null}else ye=null;oe!==null&&eU(O,z,oe,ye,!1),we!==null&&te!==null&&eU(O,te,we,ye,!0)}}e:{if(z=P?Zf(P):window,oe=z.nodeName&&z.nodeName.toLowerCase(),oe==="select"||oe==="input"&&z.type==="file")var Je=MTe;else if(W5(z)){if(m4)Je=DTe;else{Je=OTe;var Ne=RTe}}else(oe=z.nodeName)&&oe.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(Je=kTe);if(Je&&(Je=Je(e,P))){p4(O,Je,i,M);break e}Ne&&Ne(e,z,P),e==="focusout"&&(Ne=z._wrapperState)&&Ne.controlled&&z.type==="number"&&LI(z,"number",z.value)}switch(Ne=P?Zf(P):window,e){case"focusin":(W5(Ne)||Ne.contentEditable==="true")&&(Gf=Ne,HI=P,Ig=null);break;case"focusout":Ig=HI=Gf=null;break;case"mousedown":XI=!0;break;case"contextmenu":case"mouseup":case"dragend":XI=!1,X5(O,i,M);break;case"selectionchange":if(zTe)break;case"keydown":case"keyup":X5(O,i,M)}var ut;if(jP)e:{switch(e){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Wf?d4(e,i)&&(xt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(xt="onCompositionStart");xt&&(h4&&i.locale!=="ko"&&(Wf||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Wf&&(ut=c4()):(Uu=M,zP="value"in Uu?Uu.value:Uu.textContent,Wf=!0)),Ne=Ob(P,xt),0<Ne.length&&(xt=new j5(xt,e,null,i,M),O.push({event:xt,listeners:Ne}),ut?xt.data=ut:(ut=f4(i),ut!==null&&(xt.data=ut)))),(ut=ATe?qTe(e,i):ITe(e,i))&&(P=Ob(P,"onBeforeInput"),0<P.length&&(M=new j5("onBeforeInput","beforeinput",null,i,M),O.push({event:M,listeners:P}),M.data=ut))}_4(O,t)})}function Ug(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ob(e,t){for(var i=t+"Capture",o=[];e!==null;){var c=e,a=c.stateNode;c.tag===5&&a!==null&&(c=a,a=Lg(e,i),a!=null&&o.unshift(Ug(e,a,c)),a=Lg(e,t),a!=null&&o.push(Ug(e,a,c))),e=e.return}return o}function jf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function eU(e,t,i,o,c){for(var a=t._reactName,g=[];i!==null&&i!==o;){var x=i,E=x.alternate,P=x.stateNode;if(E!==null&&E===o)break;x.tag===5&&P!==null&&(x=P,c?(E=Lg(i,a),E!=null&&g.unshift(Ug(i,E,x))):c||(E=Lg(i,a),E!=null&&g.push(Ug(i,E,x)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}function kb(){}var bI=null,wI=null;function S4(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function JI(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tU=typeof setTimeout=="function"?setTimeout:void 0,NTe=typeof clearTimeout=="function"?clearTimeout:void 0;function UP(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function ep(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function rU(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var SI=0;function BTe(e){return{$$typeof:qP,toString:e,valueOf:e}}var n1=Math.random().toString(36).slice(2),Vu="__reactFiber$"+n1,Db="__reactProps$"+n1,hp="__reactContainer$"+n1,iU="__reactEvents$"+n1;function Nh(e){var t=e[Vu];if(t)return t;for(var i=e.parentNode;i;){if(t=i[hp]||i[Vu]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=rU(e);e!==null;){if(i=e[Vu])return i;e=rU(e)}return t}e=i,i=e.parentNode}return null}function Hg(e){return e=e[Vu]||e[hp],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(it(33))}function a1(e){return e[Db]||null}function T4(e){var t=e[iU];return t===void 0&&(t=e[iU]=new Set),t}var YI=[],Kf=-1;function nc(e){return{current:e}}function ti(e){0>Kf||(e.current=YI[Kf],YI[Kf]=null,Kf--)}function _i(e,t){Kf++,YI[Kf]=e.current,e.current=t}var tc={},Jn=nc(tc),Ra=nc(!1),Vh=tc;function sp(e,t){var i=e.type.contextTypes;if(!i)return tc;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var c={},a;for(a in i)c[a]=t[a];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Oa(e){return e=e.childContextTypes,e!=null}function Lb(){ti(Ra),ti(Jn)}function nU(e,t,i){if(Jn.current!==tc)throw Error(it(168));_i(Jn,t),_i(Ra,i)}function E4(e,t,i){var o=e.stateNode;if(e=t.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var c in o)if(!(c in e))throw Error(it(108,Xf(t)||"Unknown",c));return ai({},i,o)}function wb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tc,Vh=Jn.current,_i(Jn,e),_i(Ra,Ra.current),!0}function aU(e,t,i){var o=e.stateNode;if(!o)throw Error(it(169));i?(e=E4(e,t,Vh),o.__reactInternalMemoizedMergedChildContext=e,ti(Ra),ti(Jn),_i(Jn,e)):ti(Ra),_i(Ra,i)}var VP=null,Uh=null,jTe=dn.unstable_runWithPriority,$P=dn.unstable_scheduleCallback,QI=dn.unstable_cancelCallback,UTe=dn.unstable_shouldYield,oU=dn.unstable_requestPaint,eP=dn.unstable_now,VTe=dn.unstable_getCurrentPriorityLevel,o1=dn.unstable_ImmediatePriority,A4=dn.unstable_UserBlockingPriority,q4=dn.unstable_NormalPriority,I4=dn.unstable_LowPriority,P4=dn.unstable_IdlePriority,TI={},$Te=oU!==void 0?oU:function(){},Ll=null,Sb=null,EI=!1,sU=eP(),Hn=1e4>sU?eP:function(){return eP()-sU};function lp(){switch(VTe()){case o1:return 99;case A4:return 98;case q4:return 97;case I4:return 96;case P4:return 95;default:throw Error(it(332))}}function C4(e){switch(e){case 99:return o1;case 98:return A4;case 97:return q4;case 96:return I4;case 95:return P4;default:throw Error(it(332))}}function $h(e,t){return e=C4(e),jTe(e,t)}function Vg(e,t,i){return e=C4(e),$P(e,t,i)}function $s(){if(Sb!==null){var e=Sb;Sb=null,QI(e)}M4()}function M4(){if(!EI&&Ll!==null){EI=!0;var e=0;try{var t=Ll;$h(99,function(){for(;e<t.length;e++){var i=t[e];do i=i(!0);while(i!==null)}}),Ll=null}catch(i){throw Ll!==null&&(Ll=Ll.slice(e+1)),$P(o1,$s),i}finally{EI=!1}}}var WTe=Zh.ReactCurrentBatchConfig;function is(e,t){if(e&&e.defaultProps){t=ai({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Fb=nc(null),zb=null,Hf=null,Nb=null;function WP(){Nb=Hf=zb=null}function GP(e){var t=Fb.current;ti(Fb),e.type._context._currentValue=t}function R4(e,t){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)===t){if(i===null||(i.childLanes&t)===t)break;i.childLanes|=t}else e.childLanes|=t,i!==null&&(i.childLanes|=t);e=e.return}}function tp(e,t){zb=e,Nb=Hf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ns=!0),e.firstContext=null)}function qo(e,t){if(Nb!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Nb=e,t=1073741823),t={context:e,observedBits:t,next:null},Hf===null){if(zb===null)throw Error(it(308));Hf=t,zb.dependencies={lanes:0,firstContext:t,responders:null}}else Hf=Hf.next=t;return e._currentValue}var Bu=!1;function ZP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function O4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ku(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hu(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function lU(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var c=null,a=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};a===null?c=a=g:a=a.next=g,i=i.next}while(i!==null);a===null?c=a=t:a=a.next=t}else c=a=t;i={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:a,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function $g(e,t,i,o){var c=e.updateQueue;Bu=!1;var a=c.firstBaseUpdate,g=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var E=x,P=E.next;E.next=null,g===null?a=P:g.next=P,g=E;var M=e.alternate;if(M!==null){M=M.updateQueue;var O=M.lastBaseUpdate;O!==g&&(O===null?M.firstBaseUpdate=P:O.next=P,M.lastBaseUpdate=E)}}if(a!==null){O=c.baseState,g=0,M=P=E=null;do{x=a.lane;var z=a.eventTime;if((o&x)===x){M!==null&&(M=M.next={eventTime:z,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var oe=e,we=a;switch(x=t,z=i,we.tag){case 1:if(oe=we.payload,typeof oe=="function"){O=oe.call(z,O,x);break e}O=oe;break e;case 3:oe.flags=oe.flags&-4097|64;case 0:if(oe=we.payload,x=typeof oe=="function"?oe.call(z,O,x):oe,x==null)break e;O=ai({},O,x);break e;case 2:Bu=!0}}a.callback!==null&&(e.flags|=32,x=c.effects,x===null?c.effects=[a]:x.push(a))}else z={eventTime:z,lane:x,tag:a.tag,payload:a.payload,callback:a.callback,next:null},M===null?(P=M=z,E=O):M=M.next=z,g|=x;if(a=a.next,a===null){if(x=c.shared.pending,x===null)break;a=x.next,x.next=null,c.lastBaseUpdate=x,c.shared.pending=null}}while(!0);M===null&&(E=O),c.baseState=E,c.firstBaseUpdate=P,c.lastBaseUpdate=M,Jg|=g,e.lanes=g,e.memoizedState=O}}function uU(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],c=o.callback;if(c!==null){if(o.callback=null,o=i,typeof c!="function")throw Error(it(191,c));c.call(o)}}}var k4=new Jb.Component().refs;function Bb(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:ai({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var s1={isMounted:function(e){return(e=e._reactInternals)?Kh(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var o=io(),c=Xu(e),a=Ku(o,c);a.payload=t,i!=null&&(a.callback=i),Hu(e,a),Ju(e,c,o)},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=io(),c=Xu(e),a=Ku(o,c);a.tag=1,a.payload=t,i!=null&&(a.callback=i),Hu(e,a),Ju(e,c,o)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=io(),o=Xu(e),c=Ku(i,o);c.tag=2,t!=null&&(c.callback=t),Hu(e,c),Ju(e,o,i)}};function cU(e,t,i,o,c,a,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,a,g):t.prototype&&t.prototype.isPureReactComponent?!jg(i,o)||!jg(c,a):!0}function D4(e,t,i){var o=!1,c=tc,a=t.contextType;return typeof a=="object"&&a!==null?a=qo(a):(c=Oa(t)?Vh:Jn.current,o=t.contextTypes,a=(o=o!=null)?sp(e,c):tc),t=new t(i,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=s1,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=a),t}function hU(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&s1.enqueueReplaceState(t,t.state,null)}function tP(e,t,i,o){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=k4,ZP(e);var a=t.contextType;typeof a=="object"&&a!==null?c.context=qo(a):(a=Oa(t)?Vh:Jn.current,c.context=sp(e,a)),$g(e,i,c,o),c.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Bb(e,t,a,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&s1.enqueueReplaceState(c,c.state,null),$g(e,i,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var fb=Array.isArray;function cg(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(it(309));var o=i.stateNode}if(!o)throw Error(it(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(a){var g=o.refs;g===k4&&(g=o.refs={}),a===null?delete g[c]:g[c]=a},t._stringRef=c,t)}if(typeof e!="string")throw Error(it(284));if(!i._owner)throw Error(it(290,e))}return e}function pb(e,t){if(e.type!=="textarea")throw Error(it(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function L4(e){function t(te,Q){if(e){var ee=te.lastEffect;ee!==null?(ee.nextEffect=Q,te.lastEffect=Q):te.firstEffect=te.lastEffect=Q,Q.nextEffect=null,Q.flags=8}}function i(te,Q){if(!e)return null;for(;Q!==null;)t(te,Q),Q=Q.sibling;return null}function o(te,Q){for(te=new Map;Q!==null;)Q.key!==null?te.set(Q.key,Q):te.set(Q.index,Q),Q=Q.sibling;return te}function c(te,Q){return te=ic(te,Q),te.index=0,te.sibling=null,te}function a(te,Q,ee){return te.index=ee,e?(ee=te.alternate,ee!==null?(ee=ee.index,ee<Q?(te.flags=2,Q):ee):(te.flags=2,Q)):Q}function g(te){return e&&te.alternate===null&&(te.flags=2),te}function x(te,Q,ee,xe){return Q===null||Q.tag!==6?(Q=CI(ee,te.mode,xe),Q.return=te,Q):(Q=c(Q,ee),Q.return=te,Q)}function E(te,Q,ee,xe){return Q!==null&&Q.elementType===ee.type?(xe=c(Q,ee.props),xe.ref=cg(te,Q,ee),xe.return=te,xe):(xe=qb(ee.type,ee.key,ee.props,null,te.mode,xe),xe.ref=cg(te,Q,ee),xe.return=te,xe)}function P(te,Q,ee,xe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ee.containerInfo||Q.stateNode.implementation!==ee.implementation?(Q=MI(ee,te.mode,xe),Q.return=te,Q):(Q=c(Q,ee.children||[]),Q.return=te,Q)}function M(te,Q,ee,xe,Te){return Q===null||Q.tag!==7?(Q=ap(ee,te.mode,xe,Te),Q.return=te,Q):(Q=c(Q,ee),Q.return=te,Q)}function O(te,Q,ee){if(typeof Q=="string"||typeof Q=="number")return Q=CI(""+Q,te.mode,ee),Q.return=te,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case gg:return ee=qb(Q.type,Q.key,Q.props,null,te.mode,ee),ee.ref=cg(te,null,Q),ee.return=te,ee;case Fh:return Q=MI(Q,te.mode,ee),Q.return=te,Q}if(fb(Q)||ag(Q))return Q=ap(Q,te.mode,ee,null),Q.return=te,Q;pb(te,Q)}return null}function z(te,Q,ee,xe){var Te=Q!==null?Q.key:null;if(typeof ee=="string"||typeof ee=="number")return Te!==null?null:x(te,Q,""+ee,xe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case gg:return ee.key===Te?ee.type===ju?M(te,Q,ee.props.children,xe,Te):E(te,Q,ee,xe):null;case Fh:return ee.key===Te?P(te,Q,ee,xe):null}if(fb(ee)||ag(ee))return Te!==null?null:M(te,Q,ee,xe,null);pb(te,ee)}return null}function oe(te,Q,ee,xe,Te){if(typeof xe=="string"||typeof xe=="number")return te=te.get(ee)||null,x(Q,te,""+xe,Te);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case gg:return te=te.get(xe.key===null?ee:xe.key)||null,xe.type===ju?M(Q,te,xe.props.children,Te,xe.key):E(Q,te,xe,Te);case Fh:return te=te.get(xe.key===null?ee:xe.key)||null,P(Q,te,xe,Te)}if(fb(xe)||ag(xe))return te=te.get(ee)||null,M(Q,te,xe,Te,null);pb(Q,xe)}return null}function we(te,Q,ee,xe){for(var Te=null,Je=null,Ne=Q,ut=Q=0,xt=null;Ne!==null&&ut<ee.length;ut++){Ne.index>ut?(xt=Ne,Ne=null):xt=Ne.sibling;var mt=z(te,Ne,ee[ut],xe);if(mt===null){Ne===null&&(Ne=xt);break}e&&Ne&&mt.alternate===null&&t(te,Ne),Q=a(mt,Q,ut),Je===null?Te=mt:Je.sibling=mt,Je=mt,Ne=xt}if(ut===ee.length)return i(te,Ne),Te;if(Ne===null){for(;ut<ee.length;ut++)Ne=O(te,ee[ut],xe),Ne!==null&&(Q=a(Ne,Q,ut),Je===null?Te=Ne:Je.sibling=Ne,Je=Ne);return Te}for(Ne=o(te,Ne);ut<ee.length;ut++)xt=oe(Ne,te,ut,ee[ut],xe),xt!==null&&(e&&xt.alternate!==null&&Ne.delete(xt.key===null?ut:xt.key),Q=a(xt,Q,ut),Je===null?Te=xt:Je.sibling=xt,Je=xt);return e&&Ne.forEach(function(_r){return t(te,_r)}),Te}function ye(te,Q,ee,xe){var Te=ag(ee);if(typeof Te!="function")throw Error(it(150));if(ee=Te.call(ee),ee==null)throw Error(it(151));for(var Je=Te=null,Ne=Q,ut=Q=0,xt=null,mt=ee.next();Ne!==null&&!mt.done;ut++,mt=ee.next()){Ne.index>ut?(xt=Ne,Ne=null):xt=Ne.sibling;var _r=z(te,Ne,mt.value,xe);if(_r===null){Ne===null&&(Ne=xt);break}e&&Ne&&_r.alternate===null&&t(te,Ne),Q=a(_r,Q,ut),Je===null?Te=_r:Je.sibling=_r,Je=_r,Ne=xt}if(mt.done)return i(te,Ne),Te;if(Ne===null){for(;!mt.done;ut++,mt=ee.next())mt=O(te,mt.value,xe),mt!==null&&(Q=a(mt,Q,ut),Je===null?Te=mt:Je.sibling=mt,Je=mt);return Te}for(Ne=o(te,Ne);!mt.done;ut++,mt=ee.next())mt=oe(Ne,te,ut,mt.value,xe),mt!==null&&(e&&mt.alternate!==null&&Ne.delete(mt.key===null?ut:mt.key),Q=a(mt,Q,ut),Je===null?Te=mt:Je.sibling=mt,Je=mt);return e&&Ne.forEach(function(kr){return t(te,kr)}),Te}return function(te,Q,ee,xe){var Te=typeof ee=="object"&&ee!==null&&ee.type===ju&&ee.key===null;Te&&(ee=ee.props.children);var Je=typeof ee=="object"&&ee!==null;if(Je)switch(ee.$$typeof){case gg:e:{for(Je=ee.key,Te=Q;Te!==null;){if(Te.key===Je){switch(Te.tag){case 7:if(ee.type===ju){i(te,Te.sibling),Q=c(Te,ee.props.children),Q.return=te,te=Q;break e}break;default:if(Te.elementType===ee.type){i(te,Te.sibling),Q=c(Te,ee.props),Q.ref=cg(te,Te,ee),Q.return=te,te=Q;break e}}i(te,Te);break}else t(te,Te);Te=Te.sibling}ee.type===ju?(Q=ap(ee.props.children,te.mode,xe,ee.key),Q.return=te,te=Q):(xe=qb(ee.type,ee.key,ee.props,null,te.mode,xe),xe.ref=cg(te,Q,ee),xe.return=te,te=xe)}return g(te);case Fh:e:{for(Te=ee.key;Q!==null;){if(Q.key===Te){if(Q.tag===4&&Q.stateNode.containerInfo===ee.containerInfo&&Q.stateNode.implementation===ee.implementation){i(te,Q.sibling),Q=c(Q,ee.children||[]),Q.return=te,te=Q;break e}else{i(te,Q);break}}else t(te,Q);Q=Q.sibling}Q=MI(ee,te.mode,xe),Q.return=te,te=Q}return g(te)}if(typeof ee=="string"||typeof ee=="number")return ee=""+ee,Q!==null&&Q.tag===6?(i(te,Q.sibling),Q=c(Q,ee),Q.return=te,te=Q):(i(te,Q),Q=CI(ee,te.mode,xe),Q.return=te,te=Q),g(te);if(fb(ee))return we(te,Q,ee,xe);if(ag(ee))return ye(te,Q,ee,xe);if(Je&&pb(te,ee),typeof ee=="undefined"&&!Te)switch(te.tag){case 1:case 22:case 0:case 11:case 15:throw Error(it(152,Xf(te.type)||"Component"))}return i(te,Q)}}var jb=L4(!0),F4=L4(!1),Xg={},Us=nc(Xg),Wg=nc(Xg),Gg=nc(Xg);function Bh(e){if(e===Xg)throw Error(it(174));return e}function rP(e,t){switch(_i(Gg,t),_i(Wg,e),_i(Us,Xg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:BI(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=BI(t,e)}ti(Us),_i(Us,t)}function up(){ti(Us),ti(Wg),ti(Gg)}function dU(e){Bh(Gg.current);var t=Bh(Us.current),i=BI(t,e.type);t!==i&&(_i(Wg,e),_i(Us,i))}function KP(e){Wg.current===e&&(ti(Us),ti(Wg))}var yi=nc(0);function Ub(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zl=null,$u=null,Vs=!1;function z4(e,t){var i=Eo(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function fU(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function iP(e){if(Vs){var t=$u;if(t){var i=t;if(!fU(e,t)){if(t=ep(i.nextSibling),!t||!fU(e,t)){e.flags=e.flags&-1025|2,Vs=!1,zl=e;return}z4(zl,i)}zl=e,$u=ep(t.firstChild)}else e.flags=e.flags&-1025|2,Vs=!1,zl=e}}function pU(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zl=e}function mb(e){if(e!==zl)return!1;if(!Vs)return pU(e),Vs=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!JI(t,e.memoizedProps))for(t=$u;t;)z4(e,t),t=ep(t.nextSibling);if(pU(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(it(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){$u=ep(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}$u=null}}else $u=zl?ep(e.stateNode.nextSibling):null;return!0}function AI(){$u=zl=null,Vs=!1}var rp=[];function HP(){for(var e=0;e<rp.length;e++)rp[e]._workInProgressVersionPrimary=null;rp.length=0}var Pg=Zh.ReactCurrentDispatcher,Ao=Zh.ReactCurrentBatchConfig,Zg=0,Mi=null,Kn=null,In=null,Vb=!1,Cg=!1;function Ca(){throw Error(it(321))}function XP(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!To(e[i],t[i]))return!1;return!0}function JP(e,t,i,o,c,a){if(Zg=a,Mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pg.current=e===null||e.memoizedState===null?ZTe:KTe,e=i(o,c),Cg){a=0;do{if(Cg=!1,!(25>a))throw Error(it(301));a+=1,In=Kn=null,t.updateQueue=null,Pg.current=HTe,e=i(o,c)}while(Cg)}if(Pg.current=Zb,t=Kn!==null&&Kn.next!==null,Zg=0,In=Kn=Mi=null,Vb=!1,t)throw Error(it(300));return e}function jh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Mi.memoizedState=In=e:In=In.next=e,In}function Hh(){if(Kn===null){var e=Mi.alternate;e=e!==null?e.memoizedState:null}else e=Kn.next;var t=In===null?Mi.memoizedState:In.next;if(t!==null)In=t,Kn=e;else{if(e===null)throw Error(it(310));Kn=e,e={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},In===null?Mi.memoizedState=In=e:In=In.next=e}return In}function Bs(e,t){return typeof t=="function"?t(e):t}function hg(e){var t=Hh(),i=t.queue;if(i===null)throw Error(it(311));i.lastRenderedReducer=e;var o=Kn,c=o.baseQueue,a=i.pending;if(a!==null){if(c!==null){var g=c.next;c.next=a.next,a.next=g}o.baseQueue=c=a,i.pending=null}if(c!==null){c=c.next,o=o.baseState;var x=g=a=null,E=c;do{var P=E.lane;if((Zg&P)===P)x!==null&&(x=x.next={lane:0,action:E.action,eagerReducer:E.eagerReducer,eagerState:E.eagerState,next:null}),o=E.eagerReducer===e?E.eagerState:e(o,E.action);else{var M={lane:P,action:E.action,eagerReducer:E.eagerReducer,eagerState:E.eagerState,next:null};x===null?(g=x=M,a=o):x=x.next=M,Mi.lanes|=P,Jg|=P}E=E.next}while(E!==null&&E!==c);x===null?a=o:x.next=g,To(o,t.memoizedState)||(ns=!0),t.memoizedState=o,t.baseState=a,t.baseQueue=x,i.lastRenderedState=o}return[t.memoizedState,i.dispatch]}function dg(e){var t=Hh(),i=t.queue;if(i===null)throw Error(it(311));i.lastRenderedReducer=e;var o=i.dispatch,c=i.pending,a=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do a=e(a,g.action),g=g.next;while(g!==c);To(a,t.memoizedState)||(ns=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),i.lastRenderedState=a}return[a,o]}function mU(e,t,i){var o=t._getVersion;o=o(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===o:(e=e.mutableReadLanes,(e=(Zg&e)===e)&&(t._workInProgressVersionPrimary=o,rp.push(t))),e)return i(t._source);throw rp.push(t),Error(it(350))}function N4(e,t,i,o){var c=da;if(c===null)throw Error(it(349));var a=t._getVersion,g=a(t._source),x=Pg.current,E=x.useState(function(){return mU(c,t,i)}),P=E[1],M=E[0];E=In;var O=e.memoizedState,z=O.refs,oe=z.getSnapshot,we=O.source;O=O.subscribe;var ye=Mi;return e.memoizedState={refs:z,source:t,subscribe:o},x.useEffect(function(){z.getSnapshot=i,z.setSnapshot=P;var te=a(t._source);if(!To(g,te)){te=i(t._source),To(M,te)||(P(te),te=Xu(ye),c.mutableReadLanes|=te&c.pendingLanes),te=c.mutableReadLanes,c.entangledLanes|=te;for(var Q=c.entanglements,ee=te;0<ee;){var xe=31-ec(ee),Te=1<<xe;Q[xe]|=te,ee&=~Te}}},[i,t,o]),x.useEffect(function(){return o(t._source,function(){var te=z.getSnapshot,Q=z.setSnapshot;try{Q(te(t._source));var ee=Xu(ye);c.mutableReadLanes|=ee&c.pendingLanes}catch(xe){Q(function(){throw xe})}})},[t,o]),To(oe,i)&&To(we,t)&&To(O,o)||(e={pending:null,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:M},e.dispatch=P=e2.bind(null,Mi,e),E.queue=e,E.baseQueue=null,M=mU(c,t,i),E.memoizedState=E.baseState=M),M}function B4(e,t,i){var o=Hh();return N4(o,e,t,i)}function fg(e){var t=jh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:e},e=e.dispatch=e2.bind(null,Mi,e),[t.memoizedState,e]}function $b(e,t,i,o){return e={tag:e,create:t,destroy:i,deps:o,next:null},t=Mi.updateQueue,t===null?(t={lastEffect:null},Mi.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e)),e}function vU(e){var t=jh();return e={current:e},t.memoizedState=e}function Wb(){return Hh().memoizedState}function nP(e,t,i,o){var c=jh();Mi.flags|=e,c.memoizedState=$b(1|t,i,void 0,o===void 0?null:o)}function YP(e,t,i,o){var c=Hh();o=o===void 0?null:o;var a=void 0;if(Kn!==null){var g=Kn.memoizedState;if(a=g.destroy,o!==null&&XP(o,g.deps)){$b(t,i,a,o);return}}Mi.flags|=e,c.memoizedState=$b(1|t,i,a,o)}function gU(e,t){return nP(516,4,e,t)}function Gb(e,t){return YP(516,4,e,t)}function j4(e,t){return YP(4,2,e,t)}function U4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function V4(e,t,i){return i=i!=null?i.concat([e]):null,YP(4,2,U4.bind(null,t,e),i)}function QP(){}function $4(e,t){var i=Hh();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&XP(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function W4(e,t){var i=Hh();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&XP(t,o[1])?o[0]:(e=e(),i.memoizedState=[e,t],e)}function GTe(e,t){var i=lp();$h(98>i?98:i,function(){e(!0)}),$h(97<i?97:i,function(){var o=Ao.transition;Ao.transition=1;try{e(!1),t()}finally{Ao.transition=o}})}function e2(e,t,i){var o=io(),c=Xu(e),a={lane:c,action:i,eagerReducer:null,eagerState:null,next:null},g=t.pending;if(g===null?a.next=a:(a.next=g.next,g.next=a),t.pending=a,g=e.alternate,e===Mi||g!==null&&g===Mi)Cg=Vb=!0;else{if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var x=t.lastRenderedState,E=g(x,i);if(a.eagerReducer=g,a.eagerState=E,To(E,x))return}catch(P){}finally{}Ju(e,c,o)}}var Zb={readContext:qo,useCallback:Ca,useContext:Ca,useEffect:Ca,useImperativeHandle:Ca,useLayoutEffect:Ca,useMemo:Ca,useReducer:Ca,useRef:Ca,useState:Ca,useDebugValue:Ca,useDeferredValue:Ca,useTransition:Ca,useMutableSource:Ca,useOpaqueIdentifier:Ca,unstable_isNewReconciler:!1},ZTe={readContext:qo,useCallback:function(e,t){return jh().memoizedState=[e,t===void 0?null:t],e},useContext:qo,useEffect:gU,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,nP(4,2,U4.bind(null,t,e),i)},useLayoutEffect:function(e,t){return nP(4,2,e,t)},useMemo:function(e,t){var i=jh();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var o=jh();return t=i!==void 0?i(t):t,o.memoizedState=o.baseState=t,e=o.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=e2.bind(null,Mi,e),[o.memoizedState,e]},useRef:vU,useState:fg,useDebugValue:QP,useDeferredValue:function(e){var t=fg(e),i=t[0],o=t[1];return gU(function(){var c=Ao.transition;Ao.transition=1;try{o(e)}finally{Ao.transition=c}},[e]),i},useTransition:function(){var e=fg(!1),t=e[0];return e=GTe.bind(null,e[1]),vU(e),[e,t]},useMutableSource:function(e,t,i){var o=jh();return o.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:i},N4(o,e,t,i)},useOpaqueIdentifier:function(){if(Vs){var e=!1,t=BTe(function(){throw e||(e=!0,i("r:"+(SI++).toString(36))),Error(it(355))}),i=fg(t)[1];return(Mi.mode&2)===0&&(Mi.flags|=516,$b(5,function(){i("r:"+(SI++).toString(36))},void 0,null)),t}return t="r:"+(SI++).toString(36),fg(t),t},unstable_isNewReconciler:!1},KTe={readContext:qo,useCallback:$4,useContext:qo,useEffect:Gb,useImperativeHandle:V4,useLayoutEffect:j4,useMemo:W4,useReducer:hg,useRef:Wb,useState:function(){return hg(Bs)},useDebugValue:QP,useDeferredValue:function(e){var t=hg(Bs),i=t[0],o=t[1];return Gb(function(){var c=Ao.transition;Ao.transition=1;try{o(e)}finally{Ao.transition=c}},[e]),i},useTransition:function(){var e=hg(Bs)[0];return[Wb().current,e]},useMutableSource:B4,useOpaqueIdentifier:function(){return hg(Bs)[0]},unstable_isNewReconciler:!1},HTe={readContext:qo,useCallback:$4,useContext:qo,useEffect:Gb,useImperativeHandle:V4,useLayoutEffect:j4,useMemo:W4,useReducer:dg,useRef:Wb,useState:function(){return dg(Bs)},useDebugValue:QP,useDeferredValue:function(e){var t=dg(Bs),i=t[0],o=t[1];return Gb(function(){var c=Ao.transition;Ao.transition=1;try{o(e)}finally{Ao.transition=c}},[e]),i},useTransition:function(){var e=dg(Bs)[0];return[Wb().current,e]},useMutableSource:B4,useOpaqueIdentifier:function(){return dg(Bs)[0]},unstable_isNewReconciler:!1},XTe=Zh.ReactCurrentOwner,ns=!1;function Ma(e,t,i,o){t.child=e===null?F4(t,null,i,o):jb(t,e.child,i,o)}function yU(e,t,i,o,c){i=i.render;var a=t.ref;return tp(t,c),o=JP(e,t,i,o,a,c),e!==null&&!ns?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Nl(e,t,c)):(t.flags|=1,Ma(e,t,o,c),t.child)}function _U(e,t,i,o,c,a){if(e===null){var g=i.type;return typeof g=="function"&&!o2(g)&&g.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=g,G4(e,t,g,o,c,a)):(e=qb(i.type,null,o,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return g=e.child,(c&a)===0&&(c=g.memoizedProps,i=i.compare,i=i!==null?i:jg,i(c,o)&&e.ref===t.ref)?Nl(e,t,a):(t.flags|=1,e=ic(g,o),e.ref=t.ref,e.return=t,t.child=e)}function G4(e,t,i,o,c,a){if(e!==null&&jg(e.memoizedProps,o)&&e.ref===t.ref)if(ns=!1,(a&c)!==0)(e.flags&16384)!==0&&(ns=!0);else return t.lanes=e.lanes,Nl(e,t,a);return aP(e,t,i,o,a)}function qI(e,t,i){var o=t.pendingProps,c=o.children,a=e!==null?e.memoizedState:null;if(o.mode==="hidden"||o.mode==="unstable-defer-without-hiding"){if((t.mode&4)===0)t.memoizedState={baseLanes:0},gb(t,i);else if((i&1073741824)!==0)t.memoizedState={baseLanes:0},gb(t,a!==null?a.baseLanes:i);else return e=a!==null?a.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},gb(t,e),null;}else a!==null?(o=a.baseLanes|i,t.memoizedState=null):o=i,gb(t,o);return Ma(e,t,c,i),t.child}function Z4(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=128)}function aP(e,t,i,o,c){var a=Oa(i)?Vh:Jn.current;return a=sp(t,a),tp(t,c),i=JP(e,t,i,o,a,c),e!==null&&!ns?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Nl(e,t,c)):(t.flags|=1,Ma(e,t,i,c),t.child)}function xU(e,t,i,o,c){if(Oa(i)){var a=!0;wb(t)}else a=!1;if(tp(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),D4(t,i,o),tP(t,i,o,c),o=!0;else if(e===null){var g=t.stateNode,x=t.memoizedProps;g.props=x;var E=g.context,P=i.contextType;typeof P=="object"&&P!==null?P=qo(P):(P=Oa(i)?Vh:Jn.current,P=sp(t,P));var M=i.getDerivedStateFromProps,O=typeof M=="function"||typeof g.getSnapshotBeforeUpdate=="function";O||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==o||E!==P)&&hU(t,g,o,P),Bu=!1;var z=t.memoizedState;g.state=z,$g(t,o,g,c),E=t.memoizedState,x!==o||z!==E||Ra.current||Bu?(typeof M=="function"&&(Bb(t,i,M,o),E=t.memoizedState),(x=Bu||cU(t,i,x,o,z,E,P))?(O||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4)):(typeof g.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=o,t.memoizedState=E),g.props=o,g.state=E,g.context=P,o=x):(typeof g.componentDidMount=="function"&&(t.flags|=4),o=!1)}else{g=t.stateNode,O4(e,t),x=t.memoizedProps,P=t.type===t.elementType?x:is(t.type,x),g.props=P,O=t.pendingProps,z=g.context,E=i.contextType,typeof E=="object"&&E!==null?E=qo(E):(E=Oa(i)?Vh:Jn.current,E=sp(t,E));var oe=i.getDerivedStateFromProps;(M=typeof oe=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==O||z!==E)&&hU(t,g,o,E),Bu=!1,z=t.memoizedState,g.state=z,$g(t,o,g,c);var we=t.memoizedState;x!==O||z!==we||Ra.current||Bu?(typeof oe=="function"&&(Bb(t,i,oe,o),we=t.memoizedState),(P=Bu||cU(t,i,P,o,z,we,E))?(M||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,we,E),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,we,E)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&z===e.memoizedState||(t.flags|=256),t.memoizedProps=o,t.memoizedState=we),g.props=o,g.state=we,g.context=E,o=P):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&z===e.memoizedState||(t.flags|=256),o=!1)}return oP(e,t,i,o,a,c)}function oP(e,t,i,o,c,a){Z4(e,t);var g=(t.flags&64)!==0;if(!o&&!g)return c&&aU(t,i,!1),Nl(e,t,a);o=t.stateNode,XTe.current=t;var x=g&&typeof i.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&g?(t.child=jb(t,e.child,null,a),t.child=jb(t,null,x,a)):Ma(e,t,x,a),t.memoizedState=o.state,c&&aU(t,i,!0),t.child}function bU(e){var t=e.stateNode;t.pendingContext?nU(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nU(e,t.context,!1),rP(e,t.containerInfo)}var vb={dehydrated:null,retryLane:0};function wU(e,t,i){var o=t.pendingProps,c=yi.current,a=!1,g;return(g=(t.flags&64)!==0)||(g=e!==null&&e.memoizedState===null?!1:(c&2)!==0),g?(a=!0,t.flags&=-65):e!==null&&e.memoizedState===null||o.fallback===void 0||o.unstable_avoidThisFallback===!0||(c|=1),_i(yi,c&1),e===null?(o.fallback!==void 0&&iP(t),e=o.children,c=o.fallback,a?(e=SU(t,e,c,i),t.child.memoizedState={baseLanes:i},t.memoizedState=vb,e):typeof o.unstable_expectedLoadTime=="number"?(e=SU(t,e,c,i),t.child.memoizedState={baseLanes:i},t.memoizedState=vb,t.lanes=33554432,e):(i=s2({mode:"visible",children:e},t.mode,i,null),i.return=t,t.child=i)):e.memoizedState!==null?a?(o=EU(e,t,o.children,o.fallback,i),a=t.child,c=e.child.memoizedState,a.memoizedState=c===null?{baseLanes:i}:{baseLanes:c.baseLanes|i},a.childLanes=e.childLanes&~i,t.memoizedState=vb,o):(i=TU(e,t,o.children,i),t.memoizedState=null,i):a?(o=EU(e,t,o.children,o.fallback,i),a=t.child,c=e.child.memoizedState,a.memoizedState=c===null?{baseLanes:i}:{baseLanes:c.baseLanes|i},a.childLanes=e.childLanes&~i,t.memoizedState=vb,o):(i=TU(e,t,o.children,i),t.memoizedState=null,i)}function SU(e,t,i,o){var c=e.mode,a=e.child;return t={mode:"hidden",children:t},(c&2)===0&&a!==null?(a.childLanes=0,a.pendingProps=t):a=s2(t,c,0,null),i=ap(i,c,o,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i}function TU(e,t,i,o){var c=e.child;return e=c.sibling,i=ic(c,{mode:"visible",children:i}),(t.mode&2)===0&&(i.lanes=o),i.return=t,i.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=i}function EU(e,t,i,o,c){var a=t.mode,g=e.child;e=g.sibling;var x={mode:"hidden",children:i};return(a&2)===0&&t.child!==g?(i=t.child,i.childLanes=0,i.pendingProps=x,g=i.lastEffect,g!==null?(t.firstEffect=i.firstEffect,t.lastEffect=g,g.nextEffect=null):t.firstEffect=t.lastEffect=null):i=ic(g,x),e!==null?o=ic(e,o):(o=ap(o,a,c,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,o}function AU(e,t){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),R4(e.return,t)}function II(e,t,i,o,c,a){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:c,lastEffect:a}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=i,g.tailMode=c,g.lastEffect=a)}function qU(e,t,i){var o=t.pendingProps,c=o.revealOrder,a=o.tail;if(Ma(e,t,o.children,i),o=yi.current,(o&2)!==0)o=o&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&AU(e,i);else if(e.tag===19)AU(e,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(_i(yi,o),(t.mode&2)===0)t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Ub(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),II(t,!1,c,i,a,t.lastEffect);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Ub(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}II(t,!0,i,null,a,t.lastEffect);break;case"together":II(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Nl(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Jg|=t.lanes,(i&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(it(153));if(t.child!==null){for(e=t.child,i=ic(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=ic(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}return null}var K4,sP,H4,X4;K4=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};sP=function(){};H4=function(e,t,i,o){var c=e.memoizedProps;if(c!==o){e=t.stateNode,Bh(Us.current);var a=null;switch(i){case"input":c=kI(e,c),o=kI(e,o),a=[];break;case"option":c=FI(e,c),o=FI(e,o),a=[];break;case"select":c=ai({},c,{value:void 0}),o=ai({},o,{value:void 0}),a=[];break;case"textarea":c=zI(e,c),o=zI(e,o),a=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=kb)}jI(i,o);var g;i=null;for(P in c)if(!o.hasOwnProperty(P)&&c.hasOwnProperty(P)&&c[P]!=null)if(P==="style"){var x=c[P];for(g in x)x.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(kg.hasOwnProperty(P)?a||(a=[]):(a=a||[]).push(P,null));for(P in o){var E=o[P];if(x=c!=null?c[P]:void 0,o.hasOwnProperty(P)&&E!==x&&(E!=null||x!=null))if(P==="style"){if(x){for(g in x)!x.hasOwnProperty(g)||E&&E.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in E)E.hasOwnProperty(g)&&x[g]!==E[g]&&(i||(i={}),i[g]=E[g])}else i||(a||(a=[]),a.push(P,i)),i=E;}else P==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,x=x?x.__html:void 0,E!=null&&x!==E&&(a=a||[]).push(P,E)):P==="children"?typeof E!="string"&&typeof E!="number"||(a=a||[]).push(P,""+E):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(kg.hasOwnProperty(P)?(E!=null&&P==="onScroll"&&ei("scroll",e),a||x===E||(a=[])):typeof E=="object"&&E!==null&&E.$$typeof===qP?E.toString():(a=a||[]).push(P,E))}i&&(a=a||[]).push("style",i);var P=a;(t.updateQueue=P)&&(t.flags|=4)}};X4=function(e,t,i,o){i!==o&&(t.flags|=4)};function pg(e,t){if(!Vs)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function JTe(e,t,i){var o=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Oa(t.type)&&Lb(),null;case 3:return up(),ti(Ra),ti(Jn),HP(),o=t.stateNode,o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(mb(t)?t.flags|=4:o.hydrate||(t.flags|=256)),sP(t),null;case 5:KP(t);var c=Bh(Gg.current);if(i=t.type,e!==null&&t.stateNode!=null)H4(e,t,i,o,c),e.ref!==t.ref&&(t.flags|=128);else{if(!o){if(t.stateNode===null)throw Error(it(166));return null}if(e=Bh(Us.current),mb(t)){o=t.stateNode,i=t.type;var a=t.memoizedProps;switch(o[Vu]=t,o[Db]=a,i){case"dialog":ei("cancel",o),ei("close",o);break;case"iframe":case"object":case"embed":ei("load",o);break;case"video":case"audio":for(e=0;e<_g.length;e++)ei(_g[e],o);break;case"source":ei("error",o);break;case"img":case"image":case"link":ei("error",o),ei("load",o);break;case"details":ei("toggle",o);break;case"input":P5(o,a),ei("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},ei("invalid",o);break;case"textarea":M5(o,a),ei("invalid",o)}jI(i,a),e=null;for(var g in a)a.hasOwnProperty(g)&&(c=a[g],g==="children"?typeof c=="string"?o.textContent!==c&&(e=["children",c]):typeof c=="number"&&o.textContent!==""+c&&(e=["children",""+c]):kg.hasOwnProperty(g)&&c!=null&&g==="onScroll"&&ei("scroll",o));switch(i){case"input":ob(o),C5(o,a,!0);break;case"textarea":ob(o),R5(o);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(o.onclick=kb)}o=e,t.updateQueue=o,o!==null&&(t.flags|=4)}else{switch(g=c.nodeType===9?c:c.ownerDocument,e===NI.html&&(e=VU(i)),e===NI.html?i==="script"?(e=g.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=g.createElement(i,{is:o.is}):(e=g.createElement(i),i==="select"&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,i),e[Vu]=t,e[Db]=o,K4(e,t,!1,!1),t.stateNode=e,g=UI(i,o),i){case"dialog":ei("cancel",e),ei("close",e),c=o;break;case"iframe":case"object":case"embed":ei("load",e),c=o;break;case"video":case"audio":for(c=0;c<_g.length;c++)ei(_g[c],e);c=o;break;case"source":ei("error",e),c=o;break;case"img":case"image":case"link":ei("error",e),ei("load",e),c=o;break;case"details":ei("toggle",e),c=o;break;case"input":P5(e,o),c=kI(e,o),ei("invalid",e);break;case"option":c=FI(e,o);break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=ai({},o,{value:void 0}),ei("invalid",e);break;case"textarea":M5(e,o),c=zI(e,o),ei("invalid",e);break;default:c=o}jI(i,c);var x=c;for(a in x)if(x.hasOwnProperty(a)){var E=x[a];a==="style"?GU(e,E):a==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&$U(e,E)):a==="children"?typeof E=="string"?(i!=="textarea"||E!=="")&&Dg(e,E):typeof E=="number"&&Dg(e,""+E):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(kg.hasOwnProperty(a)?E!=null&&a==="onScroll"&&ei("scroll",e):E!=null&&bP(e,a,E,g))}switch(i){case"input":ob(e),C5(e,o,!1);break;case"textarea":ob(e),R5(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Qu(o.value));break;case"select":e.multiple=!!o.multiple,a=o.value,a!=null?Jf(e,!!o.multiple,a,!1):o.defaultValue!=null&&Jf(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=kb)}S4(i,o)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)X4(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(it(166));i=Bh(Gg.current),Bh(Us.current),mb(t)?(o=t.stateNode,i=t.memoizedProps,o[Vu]=t,o.nodeValue!==i&&(t.flags|=4)):(o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Vu]=t,t.stateNode=o)}return null;case 13:return ti(yi),o=t.memoizedState,(t.flags&64)!==0?(t.lanes=i,t):(o=o!==null,i=!1,e===null?t.memoizedProps.fallback!==void 0&&mb(t):i=e.memoizedState!==null,o&&!i&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(yi.current&1)!==0?Pn===0&&(Pn=3):((Pn===0||Pn===3)&&(Pn=4),da===null||(Jg&134217727)===0&&(fp&134217727)===0||ip(da,Xn))),(o||i)&&(t.flags|=4),null);case 4:return up(),sP(t),e===null&&x4(t.stateNode.containerInfo),null;case 10:return GP(t),null;case 17:return Oa(t.type)&&Lb(),null;case 19:if(ti(yi),o=t.memoizedState,o===null)return null;if(a=(t.flags&64)!==0,g=o.rendering,g===null){if(a)pg(o,!1);else{if(Pn!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(g=Ub(e),g!==null){for(t.flags|=64,pg(o,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),o.lastEffect===null&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=i,i=t.child;i!==null;)a=i,e=o,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,g=a.alternate,g===null?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=g.childLanes,a.lanes=g.lanes,a.child=g.child,a.memoizedProps=g.memoizedProps,a.memoizedState=g.memoizedState,a.updateQueue=g.updateQueue,a.type=g.type,e=g.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return _i(yi,yi.current&1|2),t.child}e=e.sibling}o.tail!==null&&Hn()>fP&&(t.flags|=64,a=!0,pg(o,!1),t.lanes=33554432)}}else{if(!a)if(e=Ub(g),e!==null){if(t.flags|=64,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),pg(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Vs)return t=t.lastEffect=o.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Hn()-o.renderingStartTime>fP&&i!==1073741824&&(t.flags|=64,a=!0,pg(o,!1),t.lanes=33554432);o.isBackwards?(g.sibling=t.child,t.child=g):(i=o.last,i!==null?i.sibling=g:t.child=g,o.last=g)}return o.tail!==null?(i=o.tail,o.rendering=i,o.tail=i.sibling,o.lastEffect=t.lastEffect,o.renderingStartTime=Hn(),i.sibling=null,t=yi.current,_i(yi,a?t&1|2:t&1),i):null;case 23:case 24:return a2(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&o.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(it(156,t.tag))}function YTe(e){switch(e.tag){case 1:Oa(e.type)&&Lb();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(up(),ti(Ra),ti(Jn),HP(),t=e.flags,(t&64)!==0)throw Error(it(285));return e.flags=t&-4097|64,e;case 5:return KP(e),null;case 13:return ti(yi),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return ti(yi),null;case 4:return up(),null;case 10:return GP(e),null;case 23:case 24:return a2(),null;default:return null}}function t2(e,t){try{var i="",o=t;do i+=RSe(o),o=o.return;while(o);var c=i}catch(a){c=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:c}}function lP(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var QTe=typeof WeakMap=="function"?WeakMap:Map;function J4(e,t,i){i=Ku(-1,i),i.tag=3,i.payload={element:null};var o=t.value;return i.callback=function(){Hb||(Hb=!0,pP=o),lP(e,t)},i}function Y4(e,t,i){i=Ku(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=t.value;i.payload=function(){return lP(e,t),o(c)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(i.callback=function(){typeof o!="function"&&(js===null?js=new Set([this]):js.add(this),lP(e,t));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}var eEe=typeof WeakSet=="function"?WeakSet:Set;function IU(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Yu(e,i)}else t.current=null}function tEe(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var i=e.memoizedProps,o=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?i:is(t.type,i),o),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&UP(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(it(163))}function rEe(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:if(t=i.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var o=e.create;e.destroy=o()}e=e.next}while(e!==t)}if(t=i.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;o=c.next,c=c.tag,(c&4)!==0&&(c&1)!==0&&(s6(i,e),cEe(i,e)),e=o}while(e!==t)}return;case 1:e=i.stateNode,i.flags&4&&(t===null?e.componentDidMount():(o=i.elementType===i.type?t.memoizedProps:is(i.type,t.memoizedProps),e.componentDidUpdate(o,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=i.updateQueue,t!==null&&uU(i,t,e);return;case 3:if(t=i.updateQueue,t!==null){if(e=null,i.child!==null)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}uU(i,t,e)}return;case 5:e=i.stateNode,t===null&&i.flags&4&&S4(i.type,i.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:i.memoizedState===null&&(i=i.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&r4(i))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(it(163))}function PU(e,t){for(var i=e;;){if(i.tag===5){var o=i.stateNode;if(t)o=o.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{o=i.stateNode;var c=i.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=WU("display",c)}}else if(i.tag===6)i.stateNode.nodeValue=t?"":i.memoizedProps;else if((i.tag!==23&&i.tag!==24||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function CU(e,t){if(Uh&&typeof Uh.onCommitFiberUnmount=="function")try{Uh.onCommitFiberUnmount(VP,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var i=e=e.next;do{var o=i,c=o.destroy;if(o=o.tag,c!==void 0)if((o&4)!==0)s6(t,i);else{o=t;try{c()}catch(a){Yu(o,a)}}i=i.next}while(i!==e)}break;case 1:if(IU(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Yu(t,a)}break;case 5:IU(t);break;case 4:Q4(e,t)}}function MU(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function RU(e){return e.tag===5||e.tag===3||e.tag===4}function OU(e){e:{for(var t=e.return;t!==null;){if(RU(t))break e;t=t.return}throw Error(it(160))}var i=t;switch(t=i.stateNode,i.tag){case 5:var o=!1;break;case 3:t=t.containerInfo,o=!0;break;case 4:t=t.containerInfo,o=!0;break;default:throw Error(it(161))}i.flags&16&&(Dg(t,""),i.flags&=-17);e:t:for(i=e;;){for(;i.sibling===null;){if(i.return===null||RU(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2)){i=i.stateNode;break e}}o?uP(e,i,t):cP(e,i,t)}function uP(e,t,i){var o=e.tag,c=o===5||o===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=kb));else if(o!==4&&(e=e.child,e!==null))for(uP(e,t,i),e=e.sibling;e!==null;)uP(e,t,i),e=e.sibling}function cP(e,t,i){var o=e.tag,c=o===5||o===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(cP(e,t,i),e=e.sibling;e!==null;)cP(e,t,i),e=e.sibling}function Q4(e,t){for(var i=t,o=!1,c,a;;){if(!o){o=i.return;e:for(;;){if(o===null)throw Error(it(160));switch(c=o.stateNode,o.tag){case 5:a=!1;break e;case 3:c=c.containerInfo,a=!0;break e;case 4:c=c.containerInfo,a=!0;break e}o=o.return}o=!0}if(i.tag===5||i.tag===6){e:for(var g=e,x=i,E=x;;)if(CU(g,E),E.child!==null&&E.tag!==4)E.child.return=E,E=E.child;else{if(E===x)break e;for(;E.sibling===null;){if(E.return===null||E.return===x)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}a?(g=c,x=i.stateNode,g.nodeType===8?g.parentNode.removeChild(x):g.removeChild(x)):c.removeChild(i.stateNode)}else if(i.tag===4){if(i.child!==null){c=i.stateNode.containerInfo,a=!0,i.child.return=i,i=i.child;continue}}else if(CU(e,i),i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return,i.tag===4&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function PI(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do(o.tag&3)===3&&(e=o.destroy,o.destroy=void 0,e!==void 0&&e()),o=o.next;while(o!==i)}return;case 1:return;case 5:if(i=t.stateNode,i!=null){o=t.memoizedProps;var c=e!==null?e.memoizedProps:o;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(i[Db]=o,e==="input"&&o.type==="radio"&&o.name!=null&&jU(i,o),UI(e,c),t=UI(e,o),c=0;c<a.length;c+=2){var g=a[c],x=a[c+1];g==="style"?GU(i,x):g==="dangerouslySetInnerHTML"?$U(i,x):g==="children"?Dg(i,x):bP(i,g,x,t)}switch(e){case"input":DI(i,o);break;case"textarea":UU(i,o);break;case"select":e=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!o.multiple,a=o.value,a!=null?Jf(i,!!o.multiple,a,!1):e!==!!o.multiple&&(o.defaultValue!=null?Jf(i,!!o.multiple,o.defaultValue,!0):Jf(i,!!o.multiple,o.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(it(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:i=t.stateNode,i.hydrate&&(i.hydrate=!1,r4(i.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(n2=Hn(),PU(t.child,!0)),kU(t);return;case 19:kU(t);return;case 17:return;case 23:case 24:PU(t,t.memoizedState!==null);return}throw Error(it(163))}function kU(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new eEe),t.forEach(function(o){var c=fEe.bind(null,e,o);i.has(o)||(i.add(o),o.then(c,c))})}}function iEe(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var nEe=Math.ceil,Kb=Zh.ReactCurrentDispatcher,r2=Zh.ReactCurrentOwner,Gt=0,da=null,Qi=null,Xn=0,Wh=0,hP=nc(0),Pn=0,l1=null,dp=0,Jg=0,fp=0,i2=0,dP=null,n2=0,fP=1/0;function pp(){fP=Hn()+500}var _t=null,Hb=!1,pP=null,js=null,rc=!1,Mg=null,xg=90,mP=[],vP=[],Bl=null,Rg=0,gP=null,Tb=-1,Fl=0,Eb=0,Og=null,Ab=!1;function io(){return(Gt&48)!==0?Hn():Tb!==-1?Tb:Tb=Hn()}function Xu(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return lp()===99?1:2;if(Fl===0&&(Fl=dp),WTe.transition!==0){Eb!==0&&(Eb=dP!==null?dP.pendingLanes:0),e=Fl;var t=4186112&~Eb;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=lp(),(Gt&4)!==0&&e===98?e=Rb(12,Fl):(e=KSe(e),e=Rb(e,Fl)),e}function Ju(e,t,i){if(50<Rg)throw Rg=0,gP=null,Error(it(185));if(e=u1(e,t),e===null)return null;t1(e,t,i),e===da&&(fp|=t,Pn===4&&ip(e,Xn));var o=lp();t===1?(Gt&8)!==0&&(Gt&48)===0?yP(e):(Io(e,i),Gt===0&&(pp(),$s())):((Gt&4)===0||o!==98&&o!==99||(Bl===null?Bl=new Set([e]):Bl.add(e)),Io(e,i)),dP=e}function u1(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}function Io(e,t){for(var i=e.callbackNode,o=e.suspendedLanes,c=e.pingedLanes,a=e.expirationTimes,g=e.pendingLanes;0<g;){var x=31-ec(g),E=1<<x,P=a[x];if(P===-1){if((E&o)===0||(E&c)!==0){P=t,Uf(E);var M=$r;a[x]=10<=M?P+250:6<=M?P+5e3:-1}}else P<=t&&(e.expiredLanes|=E);g&=~E}if(o=Ng(e,e===da?Xn:0),t=$r,o===0)i!==null&&(i!==TI&&QI(i),e.callbackNode=null,e.callbackPriority=0);else{if(i!==null){if(e.callbackPriority===t)return;i!==TI&&QI(i)}t===15?(i=yP.bind(null,e),Ll===null?(Ll=[i],Sb=$P(o1,M4)):Ll.push(i),i=TI):t===14?i=Vg(99,yP.bind(null,e)):(i=HSe(t),i=Vg(i,e6.bind(null,e))),e.callbackPriority=t,e.callbackNode=i}}function e6(e){if(Tb=-1,Eb=Fl=0,(Gt&48)!==0)throw Error(it(327));var t=e.callbackNode;if(ac()&&e.callbackNode!==t)return null;var i=Ng(e,e===da?Xn:0);if(i===0)return null;var o=i,c=Gt;Gt|=16;var a=n6();(da!==e||Xn!==o)&&(pp(),np(e,o));do try{sEe();break}catch(x){i6(e,x)}while(!0);if(WP(),Kb.current=a,Gt=c,Qi!==null?o=0:(da=null,Xn=0,o=Pn),(dp&fp)!==0)np(e,0);else if(o!==0){if(o===2&&(Gt|=64,e.hydrate&&(e.hydrate=!1,UP(e.containerInfo)),i=u4(e),i!==0&&(o=bg(e,i))),o===1)throw t=l1,np(e,0),ip(e,i),Io(e,Hn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=i,o){case 0:case 1:throw Error(it(345));case 2:Lh(e);break;case 3:if(ip(e,i),(i&62914560)===i&&(o=n2+500-Hn(),10<o)){if(Ng(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){io(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=tU(Lh.bind(null,e),o);break}Lh(e);break;case 4:if(ip(e,i),(i&4186112)===i)break;for(o=e.eventTimes,c=-1;0<i;){var g=31-ec(i);a=1<<g,g=o[g],g>c&&(c=g),i&=~a}if(i=c,i=Hn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*nEe(i/1960))-i,10<i){e.timeoutHandle=tU(Lh.bind(null,e),i);break}Lh(e);break;case 5:Lh(e);break;default:throw Error(it(329))}}return Io(e,Hn()),e.callbackNode===t?e6.bind(null,e):null}function ip(e,t){for(t&=~i2,t&=~fp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-ec(t),o=1<<i;e[i]=-1,t&=~o}}function yP(e){if((Gt&48)!==0)throw Error(it(327));if(ac(),e===da&&(e.expiredLanes&Xn)!==0){var t=Xn,i=bg(e,t);(dp&fp)!==0&&(t=Ng(e,t),i=bg(e,t))}else t=Ng(e,0),i=bg(e,t);if(e.tag!==0&&i===2&&(Gt|=64,e.hydrate&&(e.hydrate=!1,UP(e.containerInfo)),t=u4(e),t!==0&&(i=bg(e,t))),i===1)throw i=l1,np(e,0),ip(e,t),Io(e,Hn()),i;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lh(e),Io(e,Hn()),null}function aEe(){if(Bl!==null){var e=Bl;Bl=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Io(t,Hn())})}$s()}function t6(e,t){var i=Gt;Gt|=1;try{return e(t)}finally{Gt=i,Gt===0&&(pp(),$s())}}function r6(e,t){var i=Gt;Gt&=-2,Gt|=8;try{return e(t)}finally{Gt=i,Gt===0&&(pp(),$s())}}function gb(e,t){_i(hP,Wh),Wh|=t,dp|=t}function a2(){Wh=hP.current,ti(hP)}function np(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,NTe(i)),Qi!==null)for(i=Qi.return;i!==null;){var o=i;switch(o.tag){case 1:o=o.type.childContextTypes,o!=null&&Lb();break;case 3:up(),ti(Ra),ti(Jn),HP();break;case 5:KP(o);break;case 4:up();break;case 13:ti(yi);break;case 19:ti(yi);break;case 10:GP(o);break;case 23:case 24:a2()}i=i.return}da=e,Qi=ic(e.current,null),Xn=Wh=dp=t,Pn=0,l1=null,i2=fp=Jg=0}function i6(e,t){do{var i=Qi;try{if(WP(),Pg.current=Zb,Vb){for(var o=Mi.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Vb=!1}if(Zg=0,In=Kn=Mi=null,Cg=!1,r2.current=null,i===null||i.return===null){Pn=1,l1=t,Qi=null;break}e:{var a=e,g=i.return,x=i,E=t;if(t=Xn,x.flags|=2048,x.firstEffect=x.lastEffect=null,E!==null&&typeof E=="object"&&typeof E.then=="function"){var P=E;if((x.mode&2)===0){var M=x.alternate;M?(x.updateQueue=M.updateQueue,x.memoizedState=M.memoizedState,x.lanes=M.lanes):(x.updateQueue=null,x.memoizedState=null)}var O=(yi.current&1)!==0,z=g;do{var oe;if(oe=z.tag===13){var we=z.memoizedState;if(we!==null)oe=we.dehydrated!==null;else{var ye=z.memoizedProps;oe=ye.fallback===void 0?!1:ye.unstable_avoidThisFallback!==!0?!0:!O}}if(oe){var te=z.updateQueue;if(te===null){var Q=new Set;Q.add(P),z.updateQueue=Q}else te.add(P);if((z.mode&2)===0){if(z.flags|=64,x.flags|=16384,x.flags&=-2981,x.tag===1)if(x.alternate===null)x.tag=17;else{var ee=Ku(-1,1);ee.tag=2,Hu(x,ee)}x.lanes|=1;break e}E=void 0,x=t;var xe=a.pingCache;if(xe===null?(xe=a.pingCache=new QTe,E=new Set,xe.set(P,E)):(E=xe.get(P),E===void 0&&(E=new Set,xe.set(P,E))),!E.has(x)){E.add(x);var Te=dEe.bind(null,a,P,x);P.then(Te,Te)}z.flags|=4096,z.lanes=t;break e}z=z.return}while(z!==null);E=Error((Xf(x.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Pn!==5&&(Pn=2),E=t2(E,x),z=g;do{switch(z.tag){case 3:a=E,z.flags|=4096,t&=-t,z.lanes|=t;var Je=J4(z,a,t);lU(z,Je);break e;case 1:a=E;var Ne=z.type,ut=z.stateNode;if((z.flags&64)===0&&(typeof Ne.getDerivedStateFromError=="function"||ut!==null&&typeof ut.componentDidCatch=="function"&&(js===null||!js.has(ut)))){z.flags|=4096,t&=-t,z.lanes|=t;var xt=Y4(z,a,t);lU(z,xt);break e}}z=z.return}while(z!==null)}o6(i)}catch(mt){t=mt,Qi===i&&i!==null&&(Qi=i=i.return);continue}break}while(!0)}function n6(){var e=Kb.current;return Kb.current=Zb,e===null?Zb:e}function bg(e,t){var i=Gt;Gt|=16;var o=n6();da===e&&Xn===t||np(e,t);do try{oEe();break}catch(c){i6(e,c)}while(!0);if(WP(),Gt=i,Kb.current=o,Qi!==null)throw Error(it(261));return da=null,Xn=0,Pn}function oEe(){for(;Qi!==null;)a6(Qi)}function sEe(){for(;Qi!==null&&!UTe();)a6(Qi)}function a6(e){var t=l6(e.alternate,e,Wh);e.memoizedProps=e.pendingProps,t===null?o6(e):Qi=t,r2.current=null}function o6(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&2048)===0){if(i=JTe(i,t,Wh),i!==null){Qi=i;return}if(i=t,i.tag!==24&&i.tag!==23||i.memoizedState===null||(Wh&1073741824)!==0||(i.mode&4)===0){for(var o=0,c=i.child;c!==null;)o|=c.lanes|c.childLanes,c=c.sibling;i.childLanes=o}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(i=YTe(t),i!==null){i.flags&=2047,Qi=i;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Qi=t;return}Qi=t=e}while(t!==null);Pn===0&&(Pn=5)}function Lh(e){var t=lp();return $h(99,lEe.bind(null,e,t)),null}function lEe(e,t){do ac();while(Mg!==null);if((Gt&48)!==0)throw Error(it(327));var i=e.finishedWork;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(it(177));e.callbackNode=null;var o=i.lanes|i.childLanes,c=o,a=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var g=e.eventTimes,x=e.expirationTimes;0<a;){var E=31-ec(a),P=1<<E;c[E]=0,g[E]=-1,x[E]=-1,a&=~P}if(Bl!==null&&(o&24)===0&&Bl.has(e)&&Bl.delete(e),e===da&&(Qi=da=null,Xn=0),1<i.flags?i.lastEffect!==null?(i.lastEffect.nextEffect=i,o=i.firstEffect):o=i:o=i.firstEffect,o!==null){if(c=Gt,Gt|=32,r2.current=null,bI=_b,g=H5(),KI(g)){if("selectionStart"in g)x={start:g.selectionStart,end:g.selectionEnd};else e:if(x=(x=g.ownerDocument)&&x.defaultView||window,(P=x.getSelection&&x.getSelection())&&P.rangeCount!==0){x=P.anchorNode,a=P.anchorOffset,E=P.focusNode,P=P.focusOffset;try{x.nodeType,E.nodeType}catch(mt){x=null;break e}var M=0,O=-1,z=-1,oe=0,we=0,ye=g,te=null;t:for(;;){for(var Q;ye!==x||a!==0&&ye.nodeType!==3||(O=M+a),ye!==E||P!==0&&ye.nodeType!==3||(z=M+P),ye.nodeType===3&&(M+=ye.nodeValue.length),(Q=ye.firstChild)!==null;)te=ye,ye=Q;for(;;){if(ye===g)break t;if(te===x&&++oe===a&&(O=M),te===E&&++we===P&&(z=M),(Q=ye.nextSibling)!==null)break;ye=te,te=ye.parentNode}ye=Q}x=O===-1||z===-1?null:{start:O,end:z}}else x=null;x=x||{start:0,end:0}}else x=null;wI={focusedElem:g,selectionRange:x},_b=!1,Og=null,Ab=!1,_t=o;do try{uEe()}catch(mt){if(_t===null)throw Error(it(330));Yu(_t,mt),_t=_t.nextEffect}while(_t!==null);Og=null,_t=o;do try{for(g=e;_t!==null;){var ee=_t.flags;if(ee&16&&Dg(_t.stateNode,""),ee&128){var xe=_t.alternate;if(xe!==null){var Te=xe.ref;Te!==null&&(typeof Te=="function"?Te(null):Te.current=null)}}switch(ee&1038){case 2:OU(_t),_t.flags&=-3;break;case 6:OU(_t),_t.flags&=-3,PI(_t.alternate,_t);break;case 1024:_t.flags&=-1025;break;case 1028:_t.flags&=-1025,PI(_t.alternate,_t);break;case 4:PI(_t.alternate,_t);break;case 8:x=_t,Q4(g,x);var Je=x.alternate;MU(x),Je!==null&&MU(Je)}_t=_t.nextEffect}}catch(mt){if(_t===null)throw Error(it(330));Yu(_t,mt),_t=_t.nextEffect}while(_t!==null);if(Te=wI,xe=H5(),ee=Te.focusedElem,g=Te.selectionRange,xe!==ee&&ee&&ee.ownerDocument&&g4(ee.ownerDocument.documentElement,ee)){for(g!==null&&KI(ee)&&(xe=g.start,Te=g.end,Te===void 0&&(Te=xe),"selectionStart"in ee?(ee.selectionStart=xe,ee.selectionEnd=Math.min(Te,ee.value.length)):(Te=(xe=ee.ownerDocument||document)&&xe.defaultView||window,Te.getSelection&&(Te=Te.getSelection(),x=ee.textContent.length,Je=Math.min(g.start,x),g=g.end===void 0?Je:Math.min(g.end,x),!Te.extend&&Je>g&&(x=g,g=Je,Je=x),x=K5(ee,Je),a=K5(ee,g),x&&a&&(Te.rangeCount!==1||Te.anchorNode!==x.node||Te.anchorOffset!==x.offset||Te.focusNode!==a.node||Te.focusOffset!==a.offset)&&(xe=xe.createRange(),xe.setStart(x.node,x.offset),Te.removeAllRanges(),Je>g?(Te.addRange(xe),Te.extend(a.node,a.offset)):(xe.setEnd(a.node,a.offset),Te.addRange(xe)))))),xe=[],Te=ee;Te=Te.parentNode;)Te.nodeType===1&&xe.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<xe.length;ee++)Te=xe[ee],Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}_b=!!bI,wI=bI=null,e.current=i,_t=o;do try{for(ee=e;_t!==null;){var Ne=_t.flags;if(Ne&36&&rEe(ee,_t.alternate,_t),Ne&128){xe=void 0;var ut=_t.ref;if(ut!==null){var xt=_t.stateNode;switch(_t.tag){case 5:xe=xt;break;default:xe=xt}typeof ut=="function"?ut(xe):ut.current=xe}}_t=_t.nextEffect}}catch(mt){if(_t===null)throw Error(it(330));Yu(_t,mt),_t=_t.nextEffect}while(_t!==null);_t=null,$Te(),Gt=c}else e.current=i;if(rc)rc=!1,Mg=e,xg=t;else for(_t=o;_t!==null;)t=_t.nextEffect,_t.nextEffect=null,_t.flags&8&&(Ne=_t,Ne.sibling=null,Ne.stateNode=null),_t=t;if(o=e.pendingLanes,o===0&&(js=null),o===1?e===gP?Rg++:(Rg=0,gP=e):Rg=0,i=i.stateNode,Uh&&typeof Uh.onCommitFiberRoot=="function")try{Uh.onCommitFiberRoot(VP,i,void 0,(i.current.flags&64)===64)}catch(mt){}if(Io(e,Hn()),Hb)throw Hb=!1,e=pP,pP=null,e;return(Gt&8)!==0||$s(),null}function uEe(){for(;_t!==null;){var e=_t.alternate;Ab||Og===null||((_t.flags&8)!==0?D5(_t,Og)&&(Ab=!0):_t.tag===13&&iEe(e,_t)&&D5(_t,Og)&&(Ab=!0));var t=_t.flags;(t&256)!==0&&tEe(e,_t),(t&512)===0||rc||(rc=!0,Vg(97,function(){return ac(),null})),_t=_t.nextEffect}}function ac(){if(xg!==90){var e=97<xg?97:xg;return xg=90,$h(e,hEe)}return!1}function cEe(e,t){mP.push(t,e),rc||(rc=!0,Vg(97,function(){return ac(),null}))}function s6(e,t){vP.push(t,e),rc||(rc=!0,Vg(97,function(){return ac(),null}))}function hEe(){if(Mg===null)return!1;var e=Mg;if(Mg=null,(Gt&48)!==0)throw Error(it(331));var t=Gt;Gt|=32;var i=vP;vP=[];for(var o=0;o<i.length;o+=2){var c=i[o],a=i[o+1],g=c.destroy;if(c.destroy=void 0,typeof g=="function")try{g()}catch(E){if(a===null)throw Error(it(330));Yu(a,E)}}for(i=mP,mP=[],o=0;o<i.length;o+=2){c=i[o],a=i[o+1];try{var x=c.create;c.destroy=x()}catch(E){if(a===null)throw Error(it(330));Yu(a,E)}}for(x=e.current.firstEffect;x!==null;)e=x.nextEffect,x.nextEffect=null,x.flags&8&&(x.sibling=null,x.stateNode=null),x=e;return Gt=t,$s(),!0}function DU(e,t,i){t=t2(i,t),t=J4(e,t,1),Hu(e,t),t=io(),e=u1(e,1),e!==null&&(t1(e,1,t),Io(e,t))}function Yu(e,t){if(e.tag===3)DU(e,e,t);else for(var i=e.return;i!==null;){if(i.tag===3){DU(i,e,t);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(js===null||!js.has(o))){e=t2(t,e);var c=Y4(i,e,1);if(Hu(i,c),c=io(),i=u1(i,1),i!==null)t1(i,1,c),Io(i,c);else if(typeof o.componentDidCatch=="function"&&(js===null||!js.has(o)))try{o.componentDidCatch(t,e)}catch(a){}break}}i=i.return}}function dEe(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),t=io(),e.pingedLanes|=e.suspendedLanes&i,da===e&&(Xn&i)===i&&(Pn===4||Pn===3&&(Xn&62914560)===Xn&&500>Hn()-n2?np(e,0):i2|=i),Io(e,t)}function fEe(e,t){var i=e.stateNode;i!==null&&i.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=lp()===99?1:2:(Fl===0&&(Fl=dp),t=Vf(62914560&~Fl),t===0&&(t=4194304))),i=io(),e=u1(e,t),e!==null&&(t1(e,t,i),Io(e,i))}var l6;l6=function(e,t,i){var o=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||Ra.current)ns=!0;else if((i&o)!==0)ns=(e.flags&16384)!==0;else{switch(ns=!1,t.tag){case 3:bU(t),AI();break;case 5:dU(t);break;case 1:Oa(t.type)&&wb(t);break;case 4:rP(t,t.stateNode.containerInfo);break;case 10:o=t.memoizedProps.value;var c=t.type._context;_i(Fb,c._currentValue),c._currentValue=o;break;case 13:if(t.memoizedState!==null)return(i&t.child.childLanes)!==0?wU(e,t,i):(_i(yi,yi.current&1),t=Nl(e,t,i),t!==null?t.sibling:null);_i(yi,yi.current&1);break;case 19:if(o=(i&t.childLanes)!==0,(e.flags&64)!==0){if(o)return qU(e,t,i);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),_i(yi,yi.current),o)break;return null;case 23:case 24:return t.lanes=0,qI(e,t,i)}return Nl(e,t,i)}}else ns=!1;switch(t.lanes=0,t.tag){case 2:if(o=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=sp(t,Jn.current),tp(t,i),c=JP(null,t,o,e,c,i),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(o)){var a=!0;wb(t)}else a=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,ZP(t);var g=o.getDerivedStateFromProps;typeof g=="function"&&Bb(t,o,g,e),c.updater=s1,t.stateNode=c,c._reactInternals=t,tP(t,o,e,i),t=oP(null,t,o,!0,a,i)}else t.tag=0,Ma(null,t,c,i),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=c._init,c=a(c._payload),t.type=c,a=t.tag=mEe(c),e=is(c,e),a){case 0:t=aP(null,t,c,e,i);break e;case 1:t=xU(null,t,c,e,i);break e;case 11:t=yU(null,t,c,e,i);break e;case 14:t=_U(null,t,c,is(c.type,e),o,i);break e}throw Error(it(306,c,""))}return t;case 0:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:is(o,c),aP(e,t,o,c,i);case 1:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:is(o,c),xU(e,t,o,c,i);case 3:if(bU(t),o=t.updateQueue,e===null||o===null)throw Error(it(282));if(o=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,O4(e,t),$g(t,o,null,i),o=t.memoizedState.element,o===c)AI(),t=Nl(e,t,i);else{if(c=t.stateNode,(a=c.hydrate)&&($u=ep(t.stateNode.containerInfo.firstChild),zl=t,a=Vs=!0),a){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)a=e[c],a._workInProgressVersionPrimary=e[c+1],rp.push(a);for(i=F4(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|1024,i=i.sibling}else Ma(e,t,o,i),AI();t=t.child}return t;case 5:return dU(t),e===null&&iP(t),o=t.type,c=t.pendingProps,a=e!==null?e.memoizedProps:null,g=c.children,JI(o,c)?g=null:a!==null&&JI(o,a)&&(t.flags|=16),Z4(e,t),Ma(e,t,g,i),t.child;case 6:return e===null&&iP(t),null;case 13:return wU(e,t,i);case 4:return rP(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=jb(t,null,o,i):Ma(e,t,o,i),t.child;case 11:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:is(o,c),yU(e,t,o,c,i);case 7:return Ma(e,t,t.pendingProps,i),t.child;case 8:return Ma(e,t,t.pendingProps.children,i),t.child;case 12:return Ma(e,t,t.pendingProps.children,i),t.child;case 10:e:{o=t.type._context,c=t.pendingProps,g=t.memoizedProps,a=c.value;var x=t.type._context;if(_i(Fb,x._currentValue),x._currentValue=a,g!==null)if(x=g.value,a=To(x,a)?0:(typeof o._calculateChangedBits=="function"?o._calculateChangedBits(x,a):1073741823)|0,a===0){if(g.children===c.children&&!Ra.current){t=Nl(e,t,i);break e}}else for(x=t.child,x!==null&&(x.return=t);x!==null;){var E=x.dependencies;if(E!==null){g=x.child;for(var P=E.firstContext;P!==null;){if(P.context===o&&(P.observedBits&a)!==0){x.tag===1&&(P=Ku(-1,i&-i),P.tag=2,Hu(x,P)),x.lanes|=i,P=x.alternate,P!==null&&(P.lanes|=i),R4(x.return,i),E.lanes|=i;break}P=P.next}}else g=x.tag===10&&x.type===t.type?null:x.child;if(g!==null)g.return=x;else for(g=x;g!==null;){if(g===t){g=null;break}if(x=g.sibling,x!==null){x.return=g.return,g=x;break}g=g.return}x=g}Ma(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps,o=a.children,tp(t,i),c=qo(c,a.unstable_observedBits),o=o(c),t.flags|=1,Ma(e,t,o,i),t.child;case 14:return c=t.type,a=is(c,t.pendingProps),a=is(c.type,a),_U(e,t,c,a,o,i);case 15:return G4(e,t,t.type,t.pendingProps,o,i);case 17:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:is(o,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Oa(o)?(e=!0,wb(t)):e=!1,tp(t,i),D4(t,o,c),tP(t,o,c,i),oP(null,t,o,!0,e,i);case 19:return qU(e,t,i);case 23:return qI(e,t,i);case 24:return qI(e,t,i)}throw Error(it(156,t.tag))};function pEe(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Eo(e,t,i,o){return new pEe(e,t,i,o)}function o2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mEe(e){if(typeof e=="function")return o2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yb)return 11;if(e===Qb)return 14}return 2}function ic(e,t){var i=e.alternate;return i===null?(i=Eo(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function qb(e,t,i,o,c,a){var g=2;if(o=e,typeof e=="function")o2(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case ju:return ap(i.children,c,a,t);case zU:g=8,c|=16;break;case wP:g=8,c|=1;break;case wg:return e=Eo(12,i,t,c|8),e.elementType=wg,e.type=wg,e.lanes=a,e;case Sg:return e=Eo(13,i,t,c),e.type=Sg,e.elementType=Sg,e.lanes=a,e;case Ib:return e=Eo(19,i,t,c),e.elementType=Ib,e.lanes=a,e;case IP:return s2(i,c,a,t);case OI:return e=Eo(24,i,t,c),e.elementType=OI,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case SP:g=10;break e;case TP:g=9;break e;case Yb:g=11;break e;case Qb:g=14;break e;case EP:g=16,o=null;break e;case AP:g=22;break e}throw Error(it(130,e==null?e:typeof e,""))}return t=Eo(g,i,t,c),t.elementType=e,t.type=o,t.lanes=a,t}function ap(e,t,i,o){return e=Eo(7,e,o,t),e.lanes=i,e}function s2(e,t,i,o){return e=Eo(23,e,o,t),e.elementType=IP,e.lanes=i,e}function CI(e,t,i){return e=Eo(6,e,null,t),e.lanes=i,e}function MI(e,t,i){return t=Eo(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vEe(e,t,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=mI(0),this.expirationTimes=mI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mI(0),this.mutableSourceEagerHydrationData=null}function gEe(e,t,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fh,key:o==null?null:""+o,children:e,containerInfo:t,implementation:i}}function Xb(e,t,i,o){var c=t.current,a=io(),g=Xu(c);e:if(i){i=i._reactInternals;t:{if(Kh(i)!==i||i.tag!==1)throw Error(it(170));var x=i;do{switch(x.tag){case 3:x=x.stateNode.context;break t;case 1:if(Oa(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break t}}x=x.return}while(x!==null);throw Error(it(171))}if(i.tag===1){var E=i.type;if(Oa(E)){i=E4(i,E,x);break e}}i=x}else i=tc;return t.context===null?t.context=i:t.pendingContext=i,t=Ku(a,g),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),Hu(c,t),Ju(c,g,a),g}function RI(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function LU(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function l2(e,t){LU(e,t),(e=e.alternate)&&LU(e,t)}function yEe(){return null}function u2(e,t,i){var o=i!=null&&i.hydrationOptions!=null&&i.hydrationOptions.mutableSources||null;if(i=new vEe(e,t,i!=null&&i.hydrate===!0),t=Eo(3,null,null,t===2?7:t===1?3:0),i.current=t,t.stateNode=i,ZP(t),e[hp]=i.current,x4(e.nodeType===8?e.parentNode:e),o)for(e=0;e<o.length;e++){t=o[e];var c=t._getVersion;c=c(t._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[t,c]:i.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=i}u2.prototype.render=function(e){Xb(e,this._internalRoot,null,null)};u2.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Xb(null,e,null,function(){t[hp]=null})};function Yg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _Ee(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new u2(e,0,t?{hydrate:!0}:void 0)}function c1(e,t,i,o,c){var a=i._reactRootContainer;if(a){var g=a._internalRoot;if(typeof c=="function"){var x=c;c=function(){var P=RI(g);x.call(P)}}Xb(t,g,e,c)}else{if(a=i._reactRootContainer=_Ee(i,o),g=a._internalRoot,typeof c=="function"){var E=c;c=function(){var P=RI(g);E.call(P)}}r6(function(){Xb(t,g,e,c)})}return RI(g)}QU=function(e){if(e.tag===13){var t=io();Ju(e,4,t),l2(e,4)}};OP=function(e){if(e.tag===13){var t=io();Ju(e,67108864,t),l2(e,67108864)}};e4=function(e){if(e.tag===13){var t=io(),i=Xu(e);Ju(e,i,t),l2(e,i)}};t4=function(e,t){return t()};VI=function(e,t,i){switch(t){case"input":if(DI(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var c=a1(o);if(!c)throw Error(it(90));BU(o),DI(o,c)}}}break;case"textarea":UU(e,i);break;case"select":t=i.value,t!=null&&Jf(e,!!i.multiple,t,!1)}};CP=t6;HU=function(e,t,i,o,c){var a=Gt;Gt|=4;try{return $h(98,e.bind(null,t,i,o,c))}finally{Gt=a,Gt===0&&(pp(),$s())}};MP=function(){(Gt&49)===0&&(aEe(),ac())};XU=function(e,t){var i=Gt;Gt|=2;try{return e(t)}finally{Gt=i,Gt===0&&(pp(),$s())}};function u6(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yg(t))throw Error(it(200));return gEe(e,t,null,i)}var xEe={Events:[Hg,Zf,a1,ZU,KU,ac,{current:!1}]},mg={findFiberByHostInstance:Nh,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},bEe={bundleType:mg.bundleType,version:mg.version,rendererPackageName:mg.rendererPackageName,rendererConfig:mg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=YU(e),e===null?null:e.stateNode},findFiberByHostInstance:mg.findFiberByHostInstance||yEe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(vg=__REACT_DEVTOOLS_GLOBAL_HOOK__,!vg.isDisabled&&vg.supportsFiber))try{VP=vg.inject(bEe),Uh=vg}catch(e){}var vg;Po.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xEe;Po.createPortal=u6;Po.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(it(188)):Error(it(268,Object.keys(e)));return e=YU(t),e=e===null?null:e.stateNode,e};Po.flushSync=function(e,t){var i=Gt;if((i&48)!==0)return e(t);Gt|=1;try{if(e)return $h(99,e.bind(null,t))}finally{Gt=i,$s()}};Po.hydrate=function(e,t,i){if(!Yg(t))throw Error(it(200));return c1(null,e,t,!0,i)};Po.render=function(e,t,i){if(!Yg(t))throw Error(it(200));return c1(null,e,t,!1,i)};Po.unmountComponentAtNode=function(e){if(!Yg(e))throw Error(it(40));return e._reactRootContainer?(r6(function(){c1(null,null,e,!1,function(){e._reactRootContainer=null,e[hp]=null})}),!0):!1};Po.unstable_batchedUpdates=t6;Po.unstable_createPortal=function(e,t){return u6(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Po.unstable_renderSubtreeIntoContainer=function(e,t,i,o){if(!Yg(i))throw Error(it(200));if(e==null||e._reactInternals===void 0)throw Error(it(38));return c1(e,t,i,!1,o)};Po.version="17.0.2"});var Ul=S((y2t,d6)=>{"use strict";function h6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h6)}catch(e){console.error(e)}}h6(),d6.exports=c6()});var nt=S((c2,f6)=>{"use strict";var Qg=function(e){return e&&e.Math===Math&&e};f6.exports=Qg(typeof globalThis=="object"&&globalThis)||Qg(typeof window=="object"&&window)||Qg(typeof self=="object"&&self)||Qg(typeof global=="object"&&global)||Qg(typeof c2=="object"&&c2)||function(){return this}()||Function("return this")()});var Xe=S((_2t,p6)=>{"use strict";p6.exports=function(e){try{return!!e()}catch(t){return!0}}});var At=S((x2t,m6)=>{"use strict";var wEe=Xe();m6.exports=!wEe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var mp=S((b2t,v6)=>{"use strict";var SEe=Xe();v6.exports=!SEe(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var at=S((w2t,g6)=>{"use strict";var TEe=mp(),h1=Function.prototype.call;g6.exports=TEe?h1.bind(h1):function(){return h1.apply(h1,arguments)}});var ey=S(x6=>{"use strict";var y6={}.propertyIsEnumerable,_6=Object.getOwnPropertyDescriptor,EEe=_6&&!y6.call({1:2},1);x6.f=EEe?function(t){var i=_6(this,t);return!!i&&i.enumerable}:y6});var ka=S((T2t,b6)=>{"use strict";b6.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Ze=S((E2t,T6)=>{"use strict";var w6=mp(),S6=Function.prototype,h2=S6.call,AEe=w6&&S6.bind.bind(h2,h2);T6.exports=w6?AEe:function(e){return function(){return h2.apply(e,arguments)}}});var Mn=S((A2t,A6)=>{"use strict";var E6=Ze(),qEe=E6({}.toString),IEe=E6("".slice);A6.exports=function(e){return IEe(qEe(e),8,-1)}});var Vl=S((q2t,q6)=>{"use strict";var PEe=Ze(),CEe=Xe(),MEe=Mn(),d2=Object,REe=PEe("".split);q6.exports=CEe(function(){return!d2("z").propertyIsEnumerable(0)})?function(e){return MEe(e)==="String"?REe(e,""):d2(e)}:d2});var Da=S((I2t,I6)=>{"use strict";I6.exports=function(e){return e==null}});var Fr=S((P2t,P6)=>{"use strict";var OEe=Da(),kEe=TypeError;P6.exports=function(e){if(OEe(e))throw new kEe("Can't call method on "+e);return e}});var ji=S((C2t,C6)=>{"use strict";var DEe=Vl(),LEe=Fr();C6.exports=function(e){return DEe(LEe(e))}});var Zt=S((M2t,M6)=>{"use strict";var f2=typeof document=="object"&&document.all;M6.exports=typeof f2=="undefined"&&f2!==void 0?function(e){return typeof e=="function"||e===f2}:function(e){return typeof e=="function"}});var Pt=S((R2t,R6)=>{"use strict";var FEe=Zt();R6.exports=function(e){return typeof e=="object"?e!==null:FEe(e)}});var Ot=S((O2t,O6)=>{"use strict";var p2=nt(),zEe=Zt(),NEe=function(e){return zEe(e)?e:void 0};O6.exports=function(e,t){return arguments.length<2?NEe(p2[e]):p2[e]&&p2[e][t]}});var Rn=S((k2t,k6)=>{"use strict";var BEe=Ze();k6.exports=BEe({}.isPrototypeOf)});var as=S((D2t,F6)=>{"use strict";var jEe=nt(),D6=jEe.navigator,L6=D6&&D6.userAgent;F6.exports=L6?String(L6):""});var ss=S((L2t,V6)=>{"use strict";var U6=nt(),m2=as(),z6=U6.process,N6=U6.Deno,B6=z6&&z6.versions||N6&&N6.version,j6=B6&&B6.v8,os,d1;j6&&(os=j6.split("."),d1=os[0]>0&&os[0]<4?1:+(os[0]+os[1]));!d1&&m2&&(os=m2.match(/Edge\/(\d+)/),(!os||os[1]>=74)&&(os=m2.match(/Chrome\/(\d+)/),os&&(d1=+os[1])));V6.exports=d1});var oc=S((F2t,W6)=>{"use strict";var $6=ss(),UEe=Xe(),VEe=nt(),$Ee=VEe.String;W6.exports=!!Object.getOwnPropertySymbols&&!UEe(function(){var e=Symbol("symbol detection");return!$Ee(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&$6&&$6<41})});var v2=S((z2t,G6)=>{"use strict";var WEe=oc();G6.exports=WEe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var $l=S((N2t,Z6)=>{"use strict";var GEe=Ot(),ZEe=Zt(),KEe=Rn(),HEe=v2(),XEe=Object;Z6.exports=HEe?function(e){return typeof e=="symbol"}:function(e){var t=GEe("Symbol");return ZEe(t)&&KEe(t.prototype,XEe(e))}});var sc=S((B2t,K6)=>{"use strict";var JEe=String;K6.exports=function(e){try{return JEe(e)}catch(t){return"Object"}}});var kt=S((j2t,H6)=>{"use strict";var YEe=Zt(),QEe=sc(),eAe=TypeError;H6.exports=function(e){if(YEe(e))return e;throw new eAe(QEe(e)+" is not a function")}});var xi=S((U2t,X6)=>{"use strict";var tAe=kt(),rAe=Da();X6.exports=function(e,t){var i=e[t];return rAe(i)?void 0:tAe(i)}});var x2=S((V2t,J6)=>{"use strict";var g2=at(),y2=Zt(),_2=Pt(),iAe=TypeError;J6.exports=function(e,t){var i,o;if(t==="string"&&y2(i=e.toString)&&!_2(o=g2(i,e))||y2(i=e.valueOf)&&!_2(o=g2(i,e))||t!=="string"&&y2(i=e.toString)&&!_2(o=g2(i,e)))return o;throw new iAe("Can't convert object to primitive value")}});var fr=S(($2t,Y6)=>{"use strict";Y6.exports=!1});var f1=S((W2t,eV)=>{"use strict";var Q6=nt(),nAe=Object.defineProperty;eV.exports=function(e,t){try{nAe(Q6,e,{value:t,configurable:!0,writable:!0})}catch(i){Q6[e]=t}return t}});var ty=S((G2t,iV)=>{"use strict";var aAe=fr(),oAe=nt(),sAe=f1(),tV="__core-js_shared__",rV=iV.exports=oAe[tV]||sAe(tV,{});(rV.versions||(rV.versions=[])).push({version:"3.42.0",mode:aAe?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Wl=S((Z2t,aV)=>{"use strict";var nV=ty();aV.exports=function(e,t){return nV[e]||(nV[e]=t||{})}});var Qt=S((K2t,oV)=>{"use strict";var lAe=Fr(),uAe=Object;oV.exports=function(e){return uAe(lAe(e))}});var Ht=S((H2t,sV)=>{"use strict";var cAe=Ze(),hAe=Qt(),dAe=cAe({}.hasOwnProperty);sV.exports=Object.hasOwn||function(t,i){return dAe(hAe(t),i)}});var lc=S((X2t,lV)=>{"use strict";var fAe=Ze(),pAe=0,mAe=Math.random(),vAe=fAe(1 .toString);lV.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+vAe(++pAe+mAe,36)}});var Rt=S((J2t,cV)=>{"use strict";var gAe=nt(),yAe=Wl(),uV=Ht(),_Ae=lc(),xAe=oc(),bAe=v2(),vp=gAe.Symbol,b2=yAe("wks"),wAe=bAe?vp.for||vp:vp&&vp.withoutSetter||_Ae;cV.exports=function(e){return uV(b2,e)||(b2[e]=xAe&&uV(vp,e)?vp[e]:wAe("Symbol."+e)),b2[e]}});var ry=S((Y2t,fV)=>{"use strict";var SAe=at(),hV=Pt(),dV=$l(),TAe=xi(),EAe=x2(),AAe=Rt(),qAe=TypeError,IAe=AAe("toPrimitive");fV.exports=function(e,t){if(!hV(e)||dV(e))return e;var i=TAe(e,IAe),o;if(i){if(t===void 0&&(t="default"),o=SAe(i,e,t),!hV(o)||dV(o))return o;throw new qAe("Can't convert object to primitive value")}return t===void 0&&(t="number"),EAe(e,t)}});var Ws=S((Q2t,pV)=>{"use strict";var PAe=ry(),CAe=$l();pV.exports=function(e){var t=PAe(e,"string");return CAe(t)?t:t+""}});var iy=S((eCt,vV)=>{"use strict";var MAe=nt(),mV=Pt(),w2=MAe.document,RAe=mV(w2)&&mV(w2.createElement);vV.exports=function(e){return RAe?w2.createElement(e):{}}});var S2=S((tCt,gV)=>{"use strict";var OAe=At(),kAe=Xe(),DAe=iy();gV.exports=!OAe&&!kAe(function(){return Object.defineProperty(DAe("div"),"a",{get:function(){return 7}}).a!==7})});var fn=S(_V=>{"use strict";var LAe=At(),FAe=at(),zAe=ey(),NAe=ka(),BAe=ji(),jAe=Ws(),UAe=Ht(),VAe=S2(),yV=Object.getOwnPropertyDescriptor;_V.f=LAe?yV:function(t,i){if(t=BAe(t),i=jAe(i),VAe)try{return yV(t,i)}catch(o){}if(UAe(t,i))return NAe(!FAe(zAe.f,t,i),t[i])}});var T2=S((iCt,xV)=>{"use strict";var $Ae=At(),WAe=Xe();xV.exports=$Ae&&WAe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var ot=S((nCt,bV)=>{"use strict";var GAe=Pt(),ZAe=String,KAe=TypeError;bV.exports=function(e){if(GAe(e))return e;throw new KAe(ZAe(e)+" is not an object")}});var Or=S(SV=>{"use strict";var HAe=At(),XAe=S2(),JAe=T2(),p1=ot(),wV=Ws(),YAe=TypeError,E2=Object.defineProperty,QAe=Object.getOwnPropertyDescriptor,A2="enumerable",q2="configurable",I2="writable";SV.f=HAe?JAe?function(t,i,o){if(p1(t),i=wV(i),p1(o),typeof t=="function"&&i==="prototype"&&"value"in o&&I2 in o&&!o[I2]){var c=QAe(t,i);c&&c[I2]&&(t[i]=o.value,o={configurable:q2 in o?o[q2]:c[q2],enumerable:A2 in o?o[A2]:c[A2],writable:!1})}return E2(t,i,o)}:E2:function(t,i,o){if(p1(t),i=wV(i),p1(o),XAe)try{return E2(t,i,o)}catch(c){}if("get"in o||"set"in o)throw new YAe("Accessors not supported");return"value"in o&&(t[i]=o.value),t}});var Ui=S((oCt,TV)=>{"use strict";var eqe=At(),tqe=Or(),rqe=ka();TV.exports=eqe?function(e,t,i){return tqe.f(e,t,rqe(1,i))}:function(e,t,i){return e[t]=i,e}});var Xh=S((sCt,AV)=>{"use strict";var P2=At(),iqe=Ht(),EV=Function.prototype,nqe=P2&&Object.getOwnPropertyDescriptor,C2=iqe(EV,"name"),aqe=C2&&function(){}.name==="something",oqe=C2&&(!P2||P2&&nqe(EV,"name").configurable);AV.exports={EXISTS:C2,PROPER:aqe,CONFIGURABLE:oqe}});var ny=S((lCt,qV)=>{"use strict";var sqe=Ze(),lqe=Zt(),M2=ty(),uqe=sqe(Function.toString);lqe(M2.inspectSource)||(M2.inspectSource=function(e){return uqe(e)});qV.exports=M2.inspectSource});var R2=S((uCt,PV)=>{"use strict";var cqe=nt(),hqe=Zt(),IV=cqe.WeakMap;PV.exports=hqe(IV)&&/native code/.test(String(IV))});var ay=S((cCt,MV)=>{"use strict";var dqe=Wl(),fqe=lc(),CV=dqe("keys");MV.exports=function(e){return CV[e]||(CV[e]=fqe(e))}});var gp=S((hCt,RV)=>{"use strict";RV.exports={}});var yr=S((dCt,DV)=>{"use strict";var pqe=R2(),kV=nt(),mqe=Pt(),vqe=Ui(),O2=Ht(),k2=ty(),gqe=ay(),yqe=gp(),OV="Object already initialized",D2=kV.TypeError,_qe=kV.WeakMap,m1,oy,v1,xqe=function(e){return v1(e)?oy(e):m1(e,{})},bqe=function(e){return function(t){var i;if(!mqe(t)||(i=oy(t)).type!==e)throw new D2("Incompatible receiver, "+e+" required");return i}};pqe||k2.state?(ls=k2.state||(k2.state=new _qe),ls.get=ls.get,ls.has=ls.has,ls.set=ls.set,m1=function(e,t){if(ls.has(e))throw new D2(OV);return t.facade=e,ls.set(e,t),t},oy=function(e){return ls.get(e)||{}},v1=function(e){return ls.has(e)}):(Jh=gqe("state"),yqe[Jh]=!0,m1=function(e,t){if(O2(e,Jh))throw new D2(OV);return t.facade=e,vqe(e,Jh,t),t},oy=function(e){return O2(e,Jh)?e[Jh]:{}},v1=function(e){return O2(e,Jh)});var ls,Jh;DV.exports={set:m1,get:oy,has:v1,enforce:xqe,getterFor:bqe}});var sy=S((fCt,zV)=>{"use strict";var F2=Ze(),wqe=Xe(),Sqe=Zt(),g1=Ht(),L2=At(),Tqe=Xh().CONFIGURABLE,Eqe=ny(),FV=yr(),Aqe=FV.enforce,qqe=FV.get,LV=String,y1=Object.defineProperty,Iqe=F2("".slice),Pqe=F2("".replace),Cqe=F2([].join),Mqe=L2&&!wqe(function(){return y1(function(){},"length",{value:8}).length!==8}),Rqe=String(String).split("String"),Oqe=zV.exports=function(e,t,i){Iqe(LV(t),0,7)==="Symbol("&&(t="["+Pqe(LV(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!g1(e,"name")||Tqe&&e.name!==t)&&(L2?y1(e,"name",{value:t,configurable:!0}):e.name=t),Mqe&&i&&g1(i,"arity")&&e.length!==i.arity&&y1(e,"length",{value:i.arity});try{i&&g1(i,"constructor")&&i.constructor?L2&&y1(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(c){}var o=Aqe(e);return g1(o,"source")||(o.source=Cqe(Rqe,typeof t=="string"?t:"")),e};Function.prototype.toString=Oqe(function(){return Sqe(this)&&qqe(this).source||Eqe(this)},"toString")});var wr=S((pCt,NV)=>{"use strict";var kqe=Zt(),Dqe=Or(),Lqe=sy(),Fqe=f1();NV.exports=function(e,t,i,o){o||(o={});var c=o.enumerable,a=o.name!==void 0?o.name:t;if(kqe(i)&&Lqe(i,a,o),o.global)c?e[t]=i:Fqe(t,i);else{try{o.unsafe?e[t]&&(c=!0):delete e[t]}catch(g){}c?e[t]=i:Dqe.f(e,t,{value:i,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}});var z2=S((mCt,BV)=>{"use strict";var zqe=Math.ceil,Nqe=Math.floor;BV.exports=Math.trunc||function(t){var i=+t;return(i>0?Nqe:zqe)(i)}});var Wr=S((vCt,jV)=>{"use strict";var Bqe=z2();jV.exports=function(e){var t=+e;return t!==t||t===0?0:Bqe(t)}});var us=S((gCt,UV)=>{"use strict";var jqe=Wr(),Uqe=Math.max,Vqe=Math.min;UV.exports=function(e,t){var i=jqe(e);return i<0?Uqe(i+t,0):Vqe(i,t)}});var La=S((yCt,VV)=>{"use strict";var $qe=Wr(),Wqe=Math.min;VV.exports=function(e){var t=$qe(e);return t>0?Wqe(t,9007199254740991):0}});var sr=S((_Ct,$V)=>{"use strict";var Gqe=La();$V.exports=function(e){return Gqe(e.length)}});var yp=S((xCt,GV)=>{"use strict";var Zqe=ji(),Kqe=us(),Hqe=sr(),WV=function(e){return function(t,i,o){var c=Zqe(t),a=Hqe(c);if(a===0)return!e&&-1;var g=Kqe(o,a),x;if(e&&i!==i){for(;a>g;)if(x=c[g++],x!==x)return!0}else for(;a>g;g++)if((e||g in c)&&c[g]===i)return e||g||0;return!e&&-1}};GV.exports={includes:WV(!0),indexOf:WV(!1)}});var B2=S((bCt,KV)=>{"use strict";var Xqe=Ze(),N2=Ht(),Jqe=ji(),Yqe=yp().indexOf,Qqe=gp(),ZV=Xqe([].push);KV.exports=function(e,t){var i=Jqe(e),o=0,c=[],a;for(a in i)!N2(Qqe,a)&&N2(i,a)&&ZV(c,a);for(;t.length>o;)N2(i,a=t[o++])&&(~Yqe(c,a)||ZV(c,a));return c}});var _1=S((wCt,HV)=>{"use strict";HV.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var uc=S(XV=>{"use strict";var eIe=B2(),tIe=_1(),rIe=tIe.concat("length","prototype");XV.f=Object.getOwnPropertyNames||function(t){return eIe(t,rIe)}});var ly=S(JV=>{"use strict";JV.f=Object.getOwnPropertySymbols});var x1=S((ECt,YV)=>{"use strict";var iIe=Ot(),nIe=Ze(),aIe=uc(),oIe=ly(),sIe=ot(),lIe=nIe([].concat);YV.exports=iIe("Reflect","ownKeys")||function(t){var i=aIe.f(sIe(t)),o=oIe.f;return o?lIe(i,o(t)):i}});var Yh=S((ACt,e8)=>{"use strict";var QV=Ht(),uIe=x1(),cIe=fn(),hIe=Or();e8.exports=function(e,t,i){for(var o=uIe(t),c=hIe.f,a=cIe.f,g=0;g<o.length;g++){var x=o[g];!QV(e,x)&&!(i&&QV(i,x))&&c(e,x,a(t,x))}}});var _p=S((qCt,t8)=>{"use strict";var dIe=Xe(),fIe=Zt(),pIe=/#|\.prototype\./,uy=function(e,t){var i=vIe[mIe(e)];return i===yIe?!0:i===gIe?!1:fIe(t)?dIe(t):!!t},mIe=uy.normalize=function(e){return String(e).replace(pIe,".").toLowerCase()},vIe=uy.data={},gIe=uy.NATIVE="N",yIe=uy.POLYFILL="P";t8.exports=uy});var K=S((ICt,r8)=>{"use strict";var b1=nt(),_Ie=fn().f,xIe=Ui(),bIe=wr(),wIe=f1(),SIe=Yh(),TIe=_p();r8.exports=function(e,t){var i=e.target,o=e.global,c=e.stat,a,g,x,E,P,M;if(o?g=b1:c?g=b1[i]||wIe(i,{}):g=b1[i]&&b1[i].prototype,g)for(x in t){if(P=t[x],e.dontCallGetSet?(M=_Ie(g,x),E=M&&M.value):E=g[x],a=TIe(o?x:i+(c?".":"#")+x,e.forced),!a&&E!==void 0){if(typeof P==typeof E)continue;SIe(P,E)}(e.sham||E&&E.sham)&&xIe(P,"sham",!0),bIe(g,x,P,e)}}});var w1=S((PCt,n8)=>{"use strict";var EIe=Rt(),AIe=EIe("toStringTag"),i8={};i8[AIe]="z";n8.exports=String(i8)==="[object z]"});var pa=S((CCt,a8)=>{"use strict";var qIe=w1(),IIe=Zt(),S1=Mn(),PIe=Rt(),CIe=PIe("toStringTag"),MIe=Object,RIe=S1(function(){return arguments}())==="Arguments",OIe=function(e,t){try{return e[t]}catch(i){}};a8.exports=qIe?S1:function(e){var t,i,o;return e===void 0?"Undefined":e===null?"Null":typeof(i=OIe(t=MIe(e),CIe))=="string"?i:RIe?S1(t):(o=S1(t))==="Object"&&IIe(t.callee)?"Arguments":o}});var Nt=S((MCt,o8)=>{"use strict";var kIe=pa(),DIe=String;o8.exports=function(e){if(kIe(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return DIe(e)}});var Qh=S((RCt,s8)=>{"use strict";var LIe=B2(),FIe=_1();s8.exports=Object.keys||function(t){return LIe(t,FIe)}});var T1=S(l8=>{"use strict";var zIe=At(),NIe=T2(),BIe=Or(),jIe=ot(),UIe=ji(),VIe=Qh();l8.f=zIe&&!NIe?Object.defineProperties:function(t,i){jIe(t);for(var o=UIe(i),c=VIe(i),a=c.length,g=0,x;a>g;)BIe.f(t,x=c[g++],o[x]);return t}});var j2=S((kCt,u8)=>{"use strict";var $Ie=Ot();u8.exports=$Ie("document","documentElement")});var bi=S((DCt,v8)=>{"use strict";var WIe=ot(),GIe=T1(),c8=_1(),ZIe=gp(),KIe=j2(),HIe=iy(),XIe=ay(),h8=">",d8="<",V2="prototype",$2="script",p8=XIe("IE_PROTO"),U2=function(){},m8=function(e){return d8+$2+h8+e+d8+"/"+$2+h8},f8=function(e){e.write(m8("")),e.close();var t=e.parentWindow.Object;return e=null,t},JIe=function(){var e=HIe("iframe"),t="java"+$2+":",i;return e.style.display="none",KIe.appendChild(e),e.src=String(t),i=e.contentWindow.document,i.open(),i.write(m8("document.F=Object")),i.close(),i.F},E1,A1=function(){try{E1=new ActiveXObject("htmlfile")}catch(t){}A1=typeof document!="undefined"?document.domain&&E1?f8(E1):JIe():f8(E1);for(var e=c8.length;e--;)delete A1[V2][c8[e]];return A1()};ZIe[p8]=!0;v8.exports=Object.create||function(t,i){var o;return t!==null?(U2[V2]=WIe(t),o=new U2,U2[V2]=null,o[p8]=t):o=A1(),i===void 0?o:GIe.f(o,i)}});var Fa=S((LCt,g8)=>{"use strict";var YIe=Ze();g8.exports=YIe([].slice)});var q1=S((FCt,x8)=>{"use strict";var QIe=Mn(),ePe=ji(),y8=uc().f,tPe=Fa(),_8=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],rPe=function(e){try{return y8(e)}catch(t){return tPe(_8)}};x8.exports.f=function(t){return _8&&QIe(t)==="Window"?rPe(t):y8(ePe(t))}});var Gr=S((zCt,w8)=>{"use strict";var b8=sy(),iPe=Or();w8.exports=function(e,t,i){return i.get&&b8(i.get,t,{getter:!0}),i.set&&b8(i.set,t,{setter:!0}),iPe.f(e,t,i)}});var W2=S(S8=>{"use strict";var nPe=Rt();S8.f=nPe});var I1=S((BCt,T8)=>{"use strict";var aPe=nt();T8.exports=aPe});var oi=S((jCt,A8)=>{"use strict";var E8=I1(),oPe=Ht(),sPe=W2(),lPe=Or().f;A8.exports=function(e){var t=E8.Symbol||(E8.Symbol={});oPe(t,e)||lPe(t,e,{value:sPe.f(e)})}});var G2=S((UCt,q8)=>{"use strict";var uPe=at(),cPe=Ot(),hPe=Rt(),dPe=wr();q8.exports=function(){var e=cPe("Symbol"),t=e&&e.prototype,i=t&&t.valueOf,o=hPe("toPrimitive");t&&!t[o]&&dPe(t,o,function(c){return uPe(i,this)},{arity:1})}});var ma=S((VCt,P8)=>{"use strict";var fPe=Or().f,pPe=Ht(),mPe=Rt(),I8=mPe("toStringTag");P8.exports=function(e,t,i){e&&!i&&(e=e.prototype),e&&!pPe(e,I8)&&fPe(e,I8,{configurable:!0,value:t})}});var cc=S(($Ct,C8)=>{"use strict";var vPe=Mn(),gPe=Ze();C8.exports=function(e){if(vPe(e)==="Function")return gPe(e)}});var qr=S((WCt,R8)=>{"use strict";var M8=cc(),yPe=kt(),_Pe=mp(),xPe=M8(M8.bind);R8.exports=function(e,t){return yPe(e),t===void 0?e:_Pe?xPe(e,t):function(){return e.apply(t,arguments)}}});var cs=S((GCt,O8)=>{"use strict";var bPe=Mn();O8.exports=Array.isArray||function(t){return bPe(t)==="Array"}});var hs=S((ZCt,z8)=>{"use strict";var wPe=Ze(),SPe=Xe(),k8=Zt(),TPe=pa(),EPe=Ot(),APe=ny(),D8=function(){},L8=EPe("Reflect","construct"),Z2=/^\s*(?:class|function)\b/,qPe=wPe(Z2.exec),IPe=!Z2.test(D8),cy=function(t){if(!k8(t))return!1;try{return L8(D8,[],t),!0}catch(i){return!1}},F8=function(t){if(!k8(t))return!1;switch(TPe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return IPe||!!qPe(Z2,APe(t))}catch(i){return!0}};F8.sham=!0;z8.exports=!L8||SPe(function(){var e;return cy(cy.call)||!cy(Object)||!cy(function(){e=!0})||e})?F8:cy});var U8=S((KCt,j8)=>{"use strict";var N8=cs(),PPe=hs(),CPe=Pt(),MPe=Rt(),RPe=MPe("species"),B8=Array;j8.exports=function(e){var t;return N8(e)&&(t=e.constructor,PPe(t)&&(t===B8||N8(t.prototype))?t=void 0:CPe(t)&&(t=t[RPe],t===null&&(t=void 0))),t===void 0?B8:t}});var xp=S((HCt,V8)=>{"use strict";var OPe=U8();V8.exports=function(e,t){return new(OPe(e))(t===0?0:t)}});var wi=S((XCt,W8)=>{"use strict";var kPe=qr(),DPe=Ze(),LPe=Vl(),FPe=Qt(),zPe=sr(),NPe=xp(),$8=DPe([].push),hc=function(e){var t=e===1,i=e===2,o=e===3,c=e===4,a=e===6,g=e===7,x=e===5||a;return function(E,P,M,O){for(var z=FPe(E),oe=LPe(z),we=zPe(oe),ye=kPe(P,M),te=0,Q=O||NPe,ee=t?Q(E,we):i||g?Q(E,0):void 0,xe,Te;we>te;te++)if((x||te in oe)&&(xe=oe[te],Te=ye(xe,te,z),e))if(t)ee[te]=Te;else if(Te)switch(e){case 3:return!0;case 5:return xe;case 6:return te;case 2:$8(ee,xe)}else switch(e){case 4:return!1;case 7:$8(ee,xe)}return a?-1:o||c?c:ee}};W8.exports={forEach:hc(0),map:hc(1),filter:hc(2),some:hc(3),every:hc(4),find:hc(5),findIndex:hc(6),filterReject:hc(7)}});var l$=S(()=>{"use strict";var P1=K(),fy=nt(),rC=at(),BPe=Ze(),jPe=fr(),bp=At(),wp=oc(),UPe=Xe(),pn=Ht(),VPe=Rn(),J2=ot(),C1=ji(),iC=Ws(),$Pe=Nt(),Y2=ka(),Sp=bi(),K8=Qh(),WPe=uc(),H8=q1(),GPe=ly(),X8=fn(),J8=Or(),ZPe=T1(),Y8=ey(),K2=wr(),KPe=Gr(),nC=Wl(),HPe=ay(),Q8=gp(),G8=lc(),XPe=Rt(),JPe=W2(),YPe=oi(),QPe=G2(),e2e=ma(),e$=yr(),M1=wi().forEach,za=HPe("hidden"),R1="Symbol",dy="prototype",t2e=e$.set,Z8=e$.getterFor(R1),Co=Object[dy],ed=fy.Symbol,hy=ed&&ed[dy],r2e=fy.RangeError,i2e=fy.TypeError,H2=fy.QObject,t$=X8.f,td=J8.f,r$=H8.f,n2e=Y8.f,i$=BPe([].push),Gl=nC("symbols"),py=nC("op-symbols"),a2e=nC("wks"),Q2=!H2||!H2[dy]||!H2[dy].findChild,n$=function(e,t,i){var o=t$(Co,t);o&&delete Co[t],td(e,t,i),o&&e!==Co&&td(Co,t,o)},eC=bp&&UPe(function(){return Sp(td({},"a",{get:function(){return td(this,"a",{value:7}).a}})).a!==7})?n$:td,X2=function(e,t){var i=Gl[e]=Sp(hy);return t2e(i,{type:R1,tag:e,description:t}),bp||(i.description=t),i},O1=function(t,i,o){t===Co&&O1(py,i,o),J2(t);var c=iC(i);return J2(o),pn(Gl,c)?(o.enumerable?(pn(t,za)&&t[za][c]&&(t[za][c]=!1),o=Sp(o,{enumerable:Y2(0,!1)})):(pn(t,za)||td(t,za,Y2(1,Sp(null))),t[za][c]=!0),eC(t,c,o)):td(t,c,o)},aC=function(t,i){J2(t);var o=C1(i),c=K8(o).concat(s$(o));return M1(c,function(a){(!bp||rC(tC,o,a))&&O1(t,a,o[a])}),t},o2e=function(t,i){return i===void 0?Sp(t):aC(Sp(t),i)},tC=function(t){var i=iC(t),o=rC(n2e,this,i);return this===Co&&pn(Gl,i)&&!pn(py,i)?!1:o||!pn(this,i)||!pn(Gl,i)||pn(this,za)&&this[za][i]?o:!0},a$=function(t,i){var o=C1(t),c=iC(i);if(!(o===Co&&pn(Gl,c)&&!pn(py,c))){var a=t$(o,c);return a&&pn(Gl,c)&&!(pn(o,za)&&o[za][c])&&(a.enumerable=!0),a}},o$=function(t){var i=r$(C1(t)),o=[];return M1(i,function(c){!pn(Gl,c)&&!pn(Q8,c)&&i$(o,c)}),o},s$=function(e){var t=e===Co,i=r$(t?py:C1(e)),o=[];return M1(i,function(c){pn(Gl,c)&&(!t||pn(Co,c))&&i$(o,Gl[c])}),o};wp||(ed=function(){if(VPe(hy,this))throw new i2e("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:$Pe(arguments[0]),i=G8(t),o=function(c){var a=this===void 0?fy:this;a===Co&&rC(o,py,c),pn(a,za)&&pn(a[za],i)&&(a[za][i]=!1);var g=Y2(1,c);try{eC(a,i,g)}catch(x){if(!(x instanceof r2e))throw x;n$(a,i,g)}};return bp&&Q2&&eC(Co,i,{configurable:!0,set:o}),X2(i,t)},hy=ed[dy],K2(hy,"toString",function(){return Z8(this).tag}),K2(ed,"withoutSetter",function(e){return X2(G8(e),e)}),Y8.f=tC,J8.f=O1,ZPe.f=aC,X8.f=a$,WPe.f=H8.f=o$,GPe.f=s$,JPe.f=function(e){return X2(XPe(e),e)},bp&&(KPe(hy,"description",{configurable:!0,get:function(){return Z8(this).description}}),jPe||K2(Co,"propertyIsEnumerable",tC,{unsafe:!0})));P1({global:!0,constructor:!0,wrap:!0,forced:!wp,sham:!wp},{Symbol:ed});M1(K8(a2e),function(e){YPe(e)});P1({target:R1,stat:!0,forced:!wp},{useSetter:function(){Q2=!0},useSimple:function(){Q2=!1}});P1({target:"Object",stat:!0,forced:!wp,sham:!bp},{create:o2e,defineProperty:O1,defineProperties:aC,getOwnPropertyDescriptor:a$});P1({target:"Object",stat:!0,forced:!wp},{getOwnPropertyNames:o$});QPe();e2e(ed,R1);Q8[za]=!0});var oC=S((QCt,u$)=>{"use strict";var s2e=oc();u$.exports=s2e&&!!Symbol.for&&!!Symbol.keyFor});var h$=S(()=>{"use strict";var l2e=K(),u2e=Ot(),c2e=Ht(),h2e=Nt(),c$=Wl(),d2e=oC(),sC=c$("string-to-symbol-registry"),f2e=c$("symbol-to-string-registry");l2e({target:"Symbol",stat:!0,forced:!d2e},{for:function(e){var t=h2e(e);if(c2e(sC,t))return sC[t];var i=u2e("Symbol")(t);return sC[t]=i,f2e[i]=t,i}})});var f$=S(()=>{"use strict";var p2e=K(),m2e=Ht(),v2e=$l(),g2e=sc(),y2e=Wl(),_2e=oC(),d$=y2e("symbol-to-string-registry");p2e({target:"Symbol",stat:!0,forced:!_2e},{keyFor:function(t){if(!v2e(t))throw new TypeError(g2e(t)+" is not a symbol");if(m2e(d$,t))return d$[t]}})});var On=S((nMt,g$)=>{"use strict";var x2e=mp(),v$=Function.prototype,p$=v$.apply,m$=v$.call;g$.exports=typeof Reflect=="object"&&Reflect.apply||(x2e?m$.bind(p$):function(){return m$.apply(p$,arguments)})});var lC=S((aMt,b$)=>{"use strict";var b2e=Ze(),y$=cs(),w2e=Zt(),_$=Mn(),S2e=Nt(),x$=b2e([].push);b$.exports=function(e){if(w2e(e))return e;if(y$(e)){for(var t=e.length,i=[],o=0;o<t;o++){var c=e[o];typeof c=="string"?x$(i,c):(typeof c=="number"||_$(c)==="Number"||_$(c)==="String")&&x$(i,S2e(c))}var a=i.length,g=!0;return function(x,E){if(g)return g=!1,E;if(y$(this))return E;for(var P=0;P<a;P++)if(i[P]===x)return E}}}});var uC=S(()=>{"use strict";var T2e=K(),P$=Ot(),C$=On(),E2e=at(),my=Ze(),M$=Xe(),w$=Zt(),S$=$l(),R$=Fa(),A2e=lC(),q2e=oc(),I2e=String,dc=P$("JSON","stringify"),k1=my(/./.exec),T$=my("".charAt),P2e=my("".charCodeAt),C2e=my("".replace),M2e=my(1 .toString),R2e=/[\uD800-\uDFFF]/g,E$=/^[\uD800-\uDBFF]$/,A$=/^[\uDC00-\uDFFF]$/,q$=!q2e||M$(function(){var e=P$("Symbol")("stringify detection");return dc([e])!=="[null]"||dc({a:e})!=="{}"||dc(Object(e))!=="{}"}),I$=M$(function(){return dc("\uDF06\uD834")!=="\"\\udf06\\ud834\""||dc("\uDEAD")!=="\"\\udead\""}),O2e=function(e,t){var i=R$(arguments),o=A2e(t);if(!(!w$(o)&&(e===void 0||S$(e))))return i[1]=function(c,a){if(w$(o)&&(a=E2e(o,this,I2e(c),a)),!S$(a))return a},C$(dc,null,i)},k2e=function(e,t,i){var o=T$(i,t-1),c=T$(i,t+1);return k1(E$,e)&&!k1(A$,c)||k1(A$,e)&&!k1(E$,o)?"\\u"+M2e(P2e(e,0),16):e};dc&&T2e({target:"JSON",stat:!0,arity:3,forced:q$||I$},{stringify:function(t,i,o){var c=R$(arguments),a=C$(q$?O2e:dc,null,c);return I$&&typeof a=="string"?C2e(a,R2e,k2e):a}})});var k$=S(()=>{"use strict";var D2e=K(),L2e=oc(),F2e=Xe(),O$=ly(),z2e=Qt(),N2e=!L2e||F2e(function(){O$.f(1)});D2e({target:"Object",stat:!0,forced:N2e},{getOwnPropertySymbols:function(t){var i=O$.f;return i?i(z2e(t)):[]}})});var D$=S(()=>{"use strict";l$();h$();f$();uC();k$()});var U$=S(()=>{"use strict";var B2e=K(),j2e=At(),U2e=nt(),D1=Ze(),V2e=Ht(),$2e=Zt(),W2e=Rn(),G2e=Nt(),Z2e=Gr(),K2e=Yh(),Zl=U2e.Symbol,rd=Zl&&Zl.prototype;j2e&&$2e(Zl)&&(!("description"in rd)||Zl().description!==void 0)&&(cC={},vy=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:G2e(arguments[0]),i=W2e(rd,this)?new Zl(t):t===void 0?Zl():Zl(t);return t===""&&(cC[i]=!0),i},K2e(vy,Zl),vy.prototype=rd,rd.constructor=vy,L$=String(Zl("description detection"))==="Symbol(description detection)",F$=D1(rd.valueOf),z$=D1(rd.toString),N$=/^Symbol\((.*)\)[^)]+$/,B$=D1("".replace),j$=D1("".slice),Z2e(rd,"description",{configurable:!0,get:function(){var t=F$(this);if(V2e(cC,t))return"";var i=z$(t),o=L$?j$(i,7,-1):B$(i,N$,"$1");return o===""?void 0:o}}),B2e({global:!0,constructor:!0,forced:!0},{Symbol:vy}));var cC,vy,L$,F$,z$,N$,B$,j$});var V$=S(()=>{"use strict";var H2e=oi();H2e("asyncIterator")});var $$=S(()=>{"use strict";var X2e=oi();X2e("hasInstance")});var W$=S(()=>{"use strict";var J2e=oi();J2e("isConcatSpreadable")});var G$=S(()=>{"use strict";var Y2e=oi();Y2e("iterator")});var Z$=S(()=>{"use strict";var Q2e=oi();Q2e("match")});var K$=S(()=>{"use strict";var eCe=oi();eCe("matchAll")});var H$=S(()=>{"use strict";var tCe=oi();tCe("replace")});var X$=S(()=>{"use strict";var rCe=oi();rCe("search")});var J$=S(()=>{"use strict";var iCe=oi();iCe("species")});var Y$=S(()=>{"use strict";var nCe=oi();nCe("split")});var Q$=S(()=>{"use strict";var aCe=oi(),oCe=G2();aCe("toPrimitive");oCe()});var eW=S(()=>{"use strict";var sCe=Ot(),lCe=oi(),uCe=ma();lCe("toStringTag");uCe(sCe("Symbol"),"Symbol")});var tW=S(()=>{"use strict";var cCe=oi();cCe("unscopables")});var gy=S((BMt,rW)=>{"use strict";var hCe=Ze(),dCe=kt();rW.exports=function(e,t,i){try{return hCe(dCe(Object.getOwnPropertyDescriptor(e,t)[i]))}catch(o){}}});var hC=S((jMt,iW)=>{"use strict";var fCe=Pt();iW.exports=function(e){return fCe(e)||e===null}});var dC=S((UMt,nW)=>{"use strict";var pCe=hC(),mCe=String,vCe=TypeError;nW.exports=function(e){if(pCe(e))return e;throw new vCe("Can't set "+mCe(e)+" as a prototype")}});var Mo=S((VMt,aW)=>{"use strict";var gCe=gy(),yCe=Pt(),_Ce=Fr(),xCe=dC();aW.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},i;try{i=gCe(Object.prototype,"__proto__","set"),i(t,[]),e=t instanceof Array}catch(o){}return function(c,a){return _Ce(c),xCe(a),yCe(c)&&(e?i(c,a):c.__proto__=a),c}}():void 0)});var fC=S(($Mt,oW)=>{"use strict";var bCe=Or().f;oW.exports=function(e,t,i){i in e||bCe(e,i,{configurable:!0,get:function(){return t[i]},set:function(o){t[i]=o}})}});var fc=S((WMt,lW)=>{"use strict";var wCe=Zt(),SCe=Pt(),sW=Mo();lW.exports=function(e,t,i){var o,c;return sW&&wCe(o=t.constructor)&&o!==i&&SCe(c=o.prototype)&&c!==i.prototype&&sW(e,c),e}});var id=S((GMt,uW)=>{"use strict";var TCe=Nt();uW.exports=function(e,t){return e===void 0?arguments.length<2?"":t:TCe(e)}});var pC=S((ZMt,cW)=>{"use strict";var ECe=Pt(),ACe=Ui();cW.exports=function(e,t){ECe(t)&&"cause"in t&&ACe(e,"cause",t.cause)}});var L1=S((KMt,fW)=>{"use strict";var qCe=Ze(),hW=Error,ICe=qCe("".replace),PCe=function(e){return String(new hW(e).stack)}("zxcasd"),dW=/\n\s*at [^:]*:[^\n]*/,CCe=dW.test(PCe);fW.exports=function(e,t){if(CCe&&typeof e=="string"&&!hW.prepareStackTrace)for(;t--;)e=ICe(e,dW,"");return e}});var mC=S((HMt,pW)=>{"use strict";var MCe=Xe(),RCe=ka();pW.exports=!MCe(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",RCe(1,7)),e.stack!==7):!0})});var F1=S((XMt,vW)=>{"use strict";var OCe=Ui(),kCe=L1(),DCe=mC(),mW=Error.captureStackTrace;vW.exports=function(e,t,i,o){DCe&&(mW?mW(e,t):OCe(e,"stack",kCe(i,o)))}});var vC=S((JMt,SW)=>{"use strict";var gW=Ot(),LCe=Ht(),yW=Ui(),FCe=Rn(),_W=Mo(),xW=Yh(),bW=fC(),zCe=fc(),NCe=id(),BCe=pC(),jCe=F1(),UCe=At(),wW=fr();SW.exports=function(e,t,i,o){var c="stackTraceLimit",a=o?2:1,g=e.split("."),x=g[g.length-1],E=gW.apply(null,g);if(E){var P=E.prototype;if(!wW&&LCe(P,"cause")&&delete P.cause,!i)return E;var M=gW("Error"),O=t(function(z,oe){var we=NCe(o?oe:z,void 0),ye=o?new E(z):new E;return we!==void 0&&yW(ye,"message",we),jCe(ye,O,ye.stack,2),this&&FCe(P,this)&&zCe(ye,this,O),arguments.length>a&&BCe(ye,arguments[a]),ye});if(O.prototype=P,x!=="Error"?_W?_W(O,M):xW(O,M,{name:!0}):UCe&&c in E&&(bW(O,E,c),bW(O,E,"prepareStackTrace")),xW(O,E),!wW)try{P.name!==x&&yW(P,"name",x),P.constructor=O}catch(z){}return O}}});var qW=S(()=>{"use strict";var EW=K(),VCe=nt(),Gs=On(),AW=vC(),gC="WebAssembly",TW=VCe[gC],z1=new Error("e",{cause:7}).cause!==7,nd=function(e,t){var i={};i[e]=AW(e,t,z1),EW({global:!0,constructor:!0,arity:1,forced:z1},i)},yC=function(e,t){if(TW&&TW[e]){var i={};i[e]=AW(gC+"."+e,t,z1),EW({target:gC,stat:!0,constructor:!0,arity:1,forced:z1},i)}};nd("Error",function(e){return function(i){return Gs(e,this,arguments)}});nd("EvalError",function(e){return function(i){return Gs(e,this,arguments)}});nd("RangeError",function(e){return function(i){return Gs(e,this,arguments)}});nd("ReferenceError",function(e){return function(i){return Gs(e,this,arguments)}});nd("SyntaxError",function(e){return function(i){return Gs(e,this,arguments)}});nd("TypeError",function(e){return function(i){return Gs(e,this,arguments)}});nd("URIError",function(e){return function(i){return Gs(e,this,arguments)}});yC("CompileError",function(e){return function(i){return Gs(e,this,arguments)}});yC("LinkError",function(e){return function(i){return Gs(e,this,arguments)}});yC("RuntimeError",function(e){return function(i){return Gs(e,this,arguments)}})});var _C=S((eRt,PW)=>{"use strict";var $Ce=At(),WCe=Xe(),GCe=ot(),IW=id(),N1=Error.prototype.toString,ZCe=WCe(function(){if($Ce){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(N1.call(e)!=="true")return!0}return N1.call({message:1,name:2})!=="2: 1"||N1.call({})!=="Error"});PW.exports=ZCe?function(){var t=GCe(this),i=IW(t.name,"Error"),o=IW(t.message);return i?o?i+": "+o:i:o}:N1});var RW=S(()=>{"use strict";var KCe=wr(),CW=_C(),MW=Error.prototype;MW.toString!==CW&&KCe(MW,"toString",CW)});var B1=S((iRt,OW)=>{"use strict";var HCe=Xe();OW.exports=!HCe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var Vi=S((nRt,DW)=>{"use strict";var XCe=Ht(),JCe=Zt(),YCe=Qt(),QCe=ay(),eMe=B1(),kW=QCe("IE_PROTO"),xC=Object,tMe=xC.prototype;DW.exports=eMe?xC.getPrototypeOf:function(e){var t=YCe(e);if(XCe(t,kW))return t[kW];var i=t.constructor;return JCe(i)&&t instanceof i?i.prototype:t instanceof xC?tMe:null}});var ad=S((aRt,LW)=>{"use strict";LW.exports={}});var j1=S((oRt,FW)=>{"use strict";var rMe=Rt(),iMe=ad(),nMe=rMe("iterator"),aMe=Array.prototype;FW.exports=function(e){return e!==void 0&&(iMe.Array===e||aMe[nMe]===e)}});var Zs=S((sRt,NW)=>{"use strict";var oMe=pa(),zW=xi(),sMe=Da(),lMe=ad(),uMe=Rt(),cMe=uMe("iterator");NW.exports=function(e){if(!sMe(e))return zW(e,cMe)||zW(e,"@@iterator")||lMe[oMe(e)]}});var pc=S((lRt,BW)=>{"use strict";var hMe=at(),dMe=kt(),fMe=ot(),pMe=sc(),mMe=Zs(),vMe=TypeError;BW.exports=function(e,t){var i=arguments.length<2?mMe(e):t;if(dMe(i))return fMe(hMe(i,e));throw new vMe(pMe(e)+" is not iterable")}});var mn=S((uRt,UW)=>{"use strict";var gMe=at(),jW=ot(),yMe=xi();UW.exports=function(e,t,i){var o,c;jW(e);try{if(o=yMe(e,"return"),!o){if(t==="throw")throw i;return i}o=gMe(o,e)}catch(a){c=!0,o=a}if(t==="throw")throw i;if(c)throw o;return jW(o),i}});var si=S((cRt,GW)=>{"use strict";var _Me=qr(),xMe=at(),bMe=ot(),wMe=sc(),SMe=j1(),TMe=sr(),VW=Rn(),EMe=pc(),AMe=Zs(),$W=mn(),qMe=TypeError,U1=function(e,t){this.stopped=e,this.result=t},WW=U1.prototype;GW.exports=function(e,t,i){var o=i&&i.that,c=!!(i&&i.AS_ENTRIES),a=!!(i&&i.IS_RECORD),g=!!(i&&i.IS_ITERATOR),x=!!(i&&i.INTERRUPTED),E=_Me(t,o),P,M,O,z,oe,we,ye,te=function(ee){return P&&$W(P,"normal",ee),new U1(!0,ee)},Q=function(ee){return c?(bMe(ee),x?E(ee[0],ee[1],te):E(ee[0],ee[1])):x?E(ee,te):E(ee)};if(a)P=e.iterator;else if(g)P=e;else{if(M=AMe(e),!M)throw new qMe(wMe(e)+" is not iterable");if(SMe(M)){for(O=0,z=TMe(e);z>O;O++)if(oe=Q(e[O]),oe&&VW(WW,oe))return oe;return new U1(!1)}P=EMe(e,M)}for(we=a?e.next:P.next;!(ye=xMe(we,P)).done;){try{oe=Q(ye.value)}catch(ee){$W(P,"throw",ee)}if(typeof oe=="object"&&oe&&VW(WW,oe))return oe}return new U1(!1)}});var KW=S(()=>{"use strict";var IMe=K(),PMe=Rn(),CMe=Vi(),V1=Mo(),MMe=Yh(),ZW=bi(),bC=Ui(),wC=ka(),RMe=pC(),OMe=F1(),kMe=si(),DMe=id(),LMe=Rt(),FMe=LMe("toStringTag"),$1=Error,zMe=[].push,Tp=function(t,i){var o=PMe(SC,this),c;V1?c=V1(new $1,o?CMe(this):SC):(c=o?this:ZW(SC),bC(c,FMe,"Error")),i!==void 0&&bC(c,"message",DMe(i)),OMe(c,Tp,c.stack,1),arguments.length>2&&RMe(c,arguments[2]);var a=[];return kMe(t,zMe,{that:a}),bC(c,"errors",a),c};V1?V1(Tp,$1):MMe(Tp,$1,{name:!0});var SC=Tp.prototype=ZW($1.prototype,{constructor:wC(1,Tp),message:wC(1,""),name:wC(1,"AggregateError")});IMe({global:!0,constructor:!0,arity:2},{AggregateError:Tp})});var TC=S(()=>{"use strict";KW()});var YW=S(()=>{"use strict";var NMe=K(),BMe=Ot(),jMe=On(),HW=Xe(),UMe=vC(),EC="AggregateError",XW=BMe(EC),JW=!HW(function(){return XW([1]).errors[0]!==1})&&HW(function(){return XW([1],EC,{cause:7}).cause!==7});NMe({global:!0,constructor:!0,arity:2,forced:JW},{AggregateError:UMe(EC,function(e){return function(i,o){return jMe(e,this,arguments)}},JW,!0)})});var li=S((gRt,QW)=>{"use strict";var VMe=Rt(),$Me=bi(),WMe=Or().f,AC=VMe("unscopables"),qC=Array.prototype;qC[AC]===void 0&&WMe(qC,AC,{configurable:!0,value:$Me(null)});QW.exports=function(e){qC[AC][e]=!0}});var IC=S(()=>{"use strict";var GMe=K(),ZMe=Qt(),KMe=sr(),HMe=Wr(),XMe=li();GMe({target:"Array",proto:!0},{at:function(t){var i=ZMe(this),o=KMe(i),c=HMe(t),a=c>=0?c:o+c;return a<0||a>=o?void 0:i[a]}});XMe("at")});var mc=S((xRt,eG)=>{"use strict";var JMe=TypeError,YMe=9007199254740991;eG.exports=function(e){if(e>YMe)throw JMe("Maximum allowed index exceeded");return e}});var Ro=S((bRt,tG)=>{"use strict";var QMe=At(),eRe=Or(),tRe=ka();tG.exports=function(e,t,i){QMe?eRe.f(e,t,tRe(0,i)):e[t]=i}});var Ep=S((wRt,rG)=>{"use strict";var rRe=Xe(),iRe=Rt(),nRe=ss(),aRe=iRe("species");rG.exports=function(e){return nRe>=51||!rRe(function(){var t=[],i=t.constructor={};return i[aRe]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var oG=S(()=>{"use strict";var oRe=K(),sRe=Xe(),lRe=cs(),uRe=Pt(),cRe=Qt(),hRe=sr(),iG=mc(),nG=Ro(),dRe=xp(),fRe=Ep(),pRe=Rt(),mRe=ss(),aG=pRe("isConcatSpreadable"),vRe=mRe>=51||!sRe(function(){var e=[];return e[aG]=!1,e.concat()[0]!==e}),gRe=function(e){if(!uRe(e))return!1;var t=e[aG];return t!==void 0?!!t:lRe(e)},yRe=!vRe||!fRe("concat");oRe({target:"Array",proto:!0,arity:1,forced:yRe},{concat:function(t){var i=cRe(this),o=dRe(i,0),c=0,a,g,x,E,P;for(a=-1,x=arguments.length;a<x;a++)if(P=a===-1?i:arguments[a],gRe(P))for(E=hRe(P),iG(c+E),g=0;g<E;g++,c++)g in P&&nG(o,c,P[g]);else iG(c+1),nG(o,c++,P);return o.length=c,o}})});var yy=S((ERt,lG)=>{"use strict";var sG=sc(),_Re=TypeError;lG.exports=function(e,t){if(!delete e[t])throw new _Re("Cannot delete property "+sG(t)+" of "+sG(e))}});var CC=S((ARt,uG)=>{"use strict";var xRe=Qt(),PC=us(),bRe=sr(),wRe=yy(),SRe=Math.min;uG.exports=[].copyWithin||function(t,i){var o=xRe(this),c=bRe(o),a=PC(t,c),g=PC(i,c),x=arguments.length>2?arguments[2]:void 0,E=SRe((x===void 0?c:PC(x,c))-g,c-a),P=1;for(g<a&&a<g+E&&(P=-1,g+=E-1,a+=E-1);E-->0;)g in o?o[a]=o[g]:wRe(o,a),a+=P,g+=P;return o}});var cG=S(()=>{"use strict";var TRe=K(),ERe=CC(),ARe=li();TRe({target:"Array",proto:!0},{copyWithin:ERe});ARe("copyWithin")});var Oo=S((PRt,hG)=>{"use strict";var qRe=Xe();hG.exports=function(e,t){var i=[][e];return!!i&&qRe(function(){i.call(null,t||function(){return 1},1)})}});var dG=S(()=>{"use strict";var IRe=K(),PRe=wi().every,CRe=Oo(),MRe=CRe("every");IRe({target:"Array",proto:!0,forced:!MRe},{every:function(t){return PRe(this,t,arguments.length>1?arguments[1]:void 0)}})});var W1=S((RRt,pG)=>{"use strict";var RRe=Qt(),fG=us(),ORe=sr();pG.exports=function(t){for(var i=RRe(this),o=ORe(i),c=arguments.length,a=fG(c>1?arguments[1]:void 0,o),g=c>2?arguments[2]:void 0,x=g===void 0?o:fG(g,o);x>a;)i[a++]=t;return i}});var mG=S(()=>{"use strict";var kRe=K(),DRe=W1(),LRe=li();kRe({target:"Array",proto:!0},{fill:DRe});LRe("fill")});var vG=S(()=>{"use strict";var FRe=K(),zRe=wi().filter,NRe=Ep(),BRe=NRe("filter");FRe({target:"Array",proto:!0,forced:!BRe},{filter:function(t){return zRe(this,t,arguments.length>1?arguments[1]:void 0)}})});var yG=S(()=>{"use strict";var jRe=K(),URe=wi().find,VRe=li(),MC="find",gG=!0;MC in[]&&Array(1)[MC](function(){gG=!1});jRe({target:"Array",proto:!0,forced:gG},{find:function(t){return URe(this,t,arguments.length>1?arguments[1]:void 0)}});VRe(MC)});var xG=S(()=>{"use strict";var $Re=K(),WRe=wi().findIndex,GRe=li(),RC="findIndex",_G=!0;RC in[]&&Array(1)[RC](function(){_G=!1});$Re({target:"Array",proto:!0,forced:_G},{findIndex:function(t){return WRe(this,t,arguments.length>1?arguments[1]:void 0)}});GRe(RC)});var _y=S((jRt,wG)=>{"use strict";var ZRe=qr(),KRe=Vl(),HRe=Qt(),XRe=sr(),bG=function(e){var t=e===1;return function(i,o,c){for(var a=HRe(i),g=KRe(a),x=XRe(g),E=ZRe(o,c),P,M;x-->0;)if(P=g[x],M=E(P,x,a),M)switch(e){case 0:return P;case 1:return x}return t?-1:void 0}};wG.exports={findLast:bG(0),findLastIndex:bG(1)}});var OC=S(()=>{"use strict";var JRe=K(),YRe=_y().findLast,QRe=li();JRe({target:"Array",proto:!0},{findLast:function(t){return YRe(this,t,arguments.length>1?arguments[1]:void 0)}});QRe("findLast")});var kC=S(()=>{"use strict";var eOe=K(),tOe=_y().findLastIndex,rOe=li();eOe({target:"Array",proto:!0},{findLastIndex:function(t){return tOe(this,t,arguments.length>1?arguments[1]:void 0)}});rOe("findLastIndex")});var DC=S((GRt,TG)=>{"use strict";var iOe=cs(),nOe=sr(),aOe=mc(),oOe=qr(),SG=function(e,t,i,o,c,a,g,x){for(var E=c,P=0,M=g?oOe(g,x):!1,O,z;P<o;)P in i&&(O=M?M(i[P],P,t):i[P],a>0&&iOe(O)?(z=nOe(O),E=SG(e,t,O,z,E,a-1)-1):(aOe(E+1),e[E]=O),E++),P++;return E};TG.exports=SG});var EG=S(()=>{"use strict";var sOe=K(),lOe=DC(),uOe=Qt(),cOe=sr(),hOe=Wr(),dOe=xp();sOe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,i=uOe(this),o=cOe(i),c=dOe(i,0);return c.length=lOe(c,i,i,o,0,t===void 0?1:hOe(t)),c}})});var AG=S(()=>{"use strict";var fOe=K(),pOe=DC(),mOe=kt(),vOe=Qt(),gOe=sr(),yOe=xp();fOe({target:"Array",proto:!0},{flatMap:function(t){var i=vOe(this),o=gOe(i),c;return mOe(t),c=yOe(i,0),c.length=pOe(c,i,i,o,0,1,t,arguments.length>1?arguments[1]:void 0),c}})});var LC=S((JRt,qG)=>{"use strict";var _Oe=wi().forEach,xOe=Oo(),bOe=xOe("forEach");qG.exports=bOe?[].forEach:function(t){return _Oe(this,t,arguments.length>1?arguments[1]:void 0)}});var PG=S(()=>{"use strict";var wOe=K(),IG=LC();wOe({target:"Array",proto:!0,forced:[].forEach!==IG},{forEach:IG})});var G1=S((eOt,CG)=>{"use strict";var SOe=ot(),TOe=mn();CG.exports=function(e,t,i,o){try{return o?t(SOe(i)[0],i[1]):t(i)}catch(c){TOe(e,"throw",c)}}});var FC=S((tOt,OG)=>{"use strict";var EOe=qr(),AOe=at(),qOe=Qt(),IOe=G1(),POe=j1(),COe=hs(),MOe=sr(),MG=Ro(),ROe=pc(),OOe=Zs(),RG=Array;OG.exports=function(t){var i=qOe(t),o=COe(this),c=arguments.length,a=c>1?arguments[1]:void 0,g=a!==void 0;g&&(a=EOe(a,c>2?arguments[2]:void 0));var x=OOe(i),E=0,P,M,O,z,oe,we;if(x&&!(this===RG&&POe(x)))for(M=o?new this:[],z=ROe(i,x),oe=z.next;!(O=AOe(oe,z)).done;E++)we=g?IOe(z,a,[O.value,E],!0):O.value,MG(M,E,we);else for(P=MOe(i),M=o?new this(P):RG(P);P>E;E++)we=g?a(i[E],E):i[E],MG(M,E,we);return M.length=E,M}});var xy=S((rOt,FG)=>{"use strict";var kOe=Rt(),DG=kOe("iterator"),LG=!1;try{kG=0,zC={next:function(){return{done:!!kG++}},return:function(){LG=!0}},zC[DG]=function(){return this},Array.from(zC,function(){throw 2})}catch(e){}var kG,zC;FG.exports=function(e,t){try{if(!t&&!LG)return!1}catch(c){return!1}var i=!1;try{var o={};o[DG]=function(){return{next:function(){return{done:i=!0}}}},e(o)}catch(c){}return i}});var zG=S(()=>{"use strict";var DOe=K(),LOe=FC(),FOe=xy(),zOe=!FOe(function(e){Array.from(e)});DOe({target:"Array",stat:!0,forced:zOe},{from:LOe})});var NG=S(()=>{"use strict";var NOe=K(),BOe=yp().includes,jOe=Xe(),UOe=li(),VOe=jOe(function(){return!Array(1).includes()});NOe({target:"Array",proto:!0,forced:VOe},{includes:function(t){return BOe(this,t,arguments.length>1?arguments[1]:void 0)}});UOe("includes")});var jG=S(()=>{"use strict";var $Oe=K(),WOe=cc(),GOe=yp().indexOf,ZOe=Oo(),NC=WOe([].indexOf),BG=!!NC&&1/NC([1],1,-0)<0,KOe=BG||!ZOe("indexOf");$Oe({target:"Array",proto:!0,forced:KOe},{indexOf:function(t){var i=arguments.length>1?arguments[1]:void 0;return BG?NC(this,t,i)||0:GOe(this,t,i)}})});var UG=S(()=>{"use strict";var HOe=K(),XOe=cs();HOe({target:"Array",stat:!0},{isArray:XOe})});var vc=S((hOt,WG)=>{"use strict";var JOe=Xe(),YOe=Zt(),QOe=Pt(),eke=bi(),VG=Vi(),tke=wr(),rke=Rt(),ike=fr(),UC=rke("iterator"),$G=!1,Kl,BC,jC;[].keys&&(jC=[].keys(),"next"in jC?(BC=VG(VG(jC)),BC!==Object.prototype&&(Kl=BC)):$G=!0);var nke=!QOe(Kl)||JOe(function(){var e={};return Kl[UC].call(e)!==e});nke?Kl={}:ike&&(Kl=eke(Kl));YOe(Kl[UC])||tke(Kl,UC,function(){return this});WG.exports={IteratorPrototype:Kl,BUGGY_SAFARI_ITERATORS:$G}});var gc=S((dOt,GG)=>{"use strict";var ake=vc().IteratorPrototype,oke=bi(),ske=ka(),lke=ma(),uke=ad(),cke=function(){return this};GG.exports=function(e,t,i,o){var c=t+" Iterator";return e.prototype=oke(ake,{next:ske(+!o,i)}),lke(e,c,!1,!0),uke[c]=cke,e}});var H1=S((fOt,rZ)=>{"use strict";var hke=K(),dke=at(),Z1=fr(),eZ=Xh(),fke=Zt(),pke=gc(),ZG=Vi(),KG=Mo(),mke=ma(),vke=Ui(),VC=wr(),gke=Rt(),HG=ad(),tZ=vc(),yke=eZ.PROPER,_ke=eZ.CONFIGURABLE,XG=tZ.IteratorPrototype,K1=tZ.BUGGY_SAFARI_ITERATORS,by=gke("iterator"),JG="keys",wy="values",YG="entries",QG=function(){return this};rZ.exports=function(e,t,i,o,c,a,g){pke(i,t,o);var x=function(Q){if(Q===c&&z)return z;if(!K1&&Q&&Q in M)return M[Q];switch(Q){case JG:return function(){return new i(this,Q)};case wy:return function(){return new i(this,Q)};case YG:return function(){return new i(this,Q)}}return function(){return new i(this)}},E=t+" Iterator",P=!1,M=e.prototype,O=M[by]||M["@@iterator"]||c&&M[c],z=!K1&&O||x(c),oe=t==="Array"&&M.entries||O,we,ye,te;if(oe&&(we=ZG(oe.call(new e)),we!==Object.prototype&&we.next&&(!Z1&&ZG(we)!==XG&&(KG?KG(we,XG):fke(we[by])||VC(we,by,QG)),mke(we,E,!0,!0),Z1&&(HG[E]=QG))),yke&&c===wy&&O&&O.name!==wy&&(!Z1&&_ke?vke(M,"name",wy):(P=!0,z=function(){return dke(O,this)})),c)if(ye={values:x(wy),keys:a?z:x(JG),entries:x(YG)},g)for(te in ye)(K1||P||!(te in M))&&VC(M,te,ye[te]);else hke({target:t,proto:!0,forced:K1||P},ye);return(!Z1||g)&&M[by]!==z&&VC(M,by,z,{name:c}),HG[t]=z,ye}});var en=S((pOt,iZ)=>{"use strict";iZ.exports=function(e,t){return{value:e,done:t}}});var Sy=S((mOt,lZ)=>{"use strict";var xke=ji(),$C=li(),nZ=ad(),oZ=yr(),bke=Or().f,wke=H1(),X1=en(),Ske=fr(),Tke=At(),sZ="Array Iterator",Eke=oZ.set,Ake=oZ.getterFor(sZ);lZ.exports=wke(Array,"Array",function(e,t){Eke(this,{type:sZ,target:xke(e),index:0,kind:t})},function(){var e=Ake(this),t=e.target,i=e.index++;if(!t||i>=t.length)return e.target=null,X1(void 0,!0);switch(e.kind){case"keys":return X1(i,!1);case"values":return X1(t[i],!1)}return X1([i,t[i]],!1)},"values");var aZ=nZ.Arguments=nZ.Array;$C("keys");$C("values");$C("entries");if(!Ske&&Tke&&aZ.name!=="values")try{bke(aZ,"name",{value:"values"})}catch(e){}});var uZ=S(()=>{"use strict";var qke=K(),Ike=Ze(),Pke=Vl(),Cke=ji(),Mke=Oo(),Rke=Ike([].join),Oke=Pke!==Object,kke=Oke||!Mke("join",",");qke({target:"Array",proto:!0,forced:kke},{join:function(t){return Rke(Cke(this),t===void 0?",":t)}})});var GC=S((yOt,hZ)=>{"use strict";var Dke=On(),Lke=ji(),Fke=Wr(),zke=sr(),Nke=Oo(),Bke=Math.min,WC=[].lastIndexOf,cZ=!!WC&&1/[1].lastIndexOf(1,-0)<0,jke=Nke("lastIndexOf"),Uke=cZ||!jke;hZ.exports=Uke?function(t){if(cZ)return Dke(WC,this,arguments)||0;var i=Lke(this),o=zke(i);if(o===0)return-1;var c=o-1;for(arguments.length>1&&(c=Bke(c,Fke(arguments[1]))),c<0&&(c=o+c);c>=0;c--)if(c in i&&i[c]===t)return c||0;return-1}:WC});var fZ=S(()=>{"use strict";var Vke=K(),dZ=GC();Vke({target:"Array",proto:!0,forced:dZ!==[].lastIndexOf},{lastIndexOf:dZ})});var pZ=S(()=>{"use strict";var $ke=K(),Wke=wi().map,Gke=Ep(),Zke=Gke("map");$ke({target:"Array",proto:!0,forced:!Zke},{map:function(t){return Wke(this,t,arguments.length>1?arguments[1]:void 0)}})});var vZ=S(()=>{"use strict";var Kke=K(),Hke=Xe(),Xke=hs(),Jke=Ro(),mZ=Array,Yke=Hke(function(){function e(){}return!(mZ.of.call(e)instanceof e)});Kke({target:"Array",stat:!0,forced:Yke},{of:function(){for(var t=0,i=arguments.length,o=new(Xke(this)?this:mZ)(i);i>t;)Jke(o,t,arguments[t++]);return o.length=i,o}})});var J1=S((EOt,gZ)=>{"use strict";var Qke=At(),eDe=cs(),tDe=TypeError,rDe=Object.getOwnPropertyDescriptor,iDe=Qke&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();gZ.exports=iDe?function(e,t){if(eDe(e)&&!rDe(e,"length").writable)throw new tDe("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var yZ=S(()=>{"use strict";var nDe=K(),aDe=Qt(),oDe=sr(),sDe=J1(),lDe=mc(),uDe=Xe(),cDe=uDe(function(){return[].push.call({length:4294967296},1)!==4294967297}),hDe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},dDe=cDe||!hDe();nDe({target:"Array",proto:!0,arity:1,forced:dDe},{push:function(t){var i=aDe(this),o=oDe(i),c=arguments.length;lDe(o+c);for(var a=0;a<c;a++)i[o]=arguments[a],o++;return sDe(i,o),o}})});var Ty=S((IOt,wZ)=>{"use strict";var fDe=kt(),pDe=Qt(),mDe=Vl(),vDe=sr(),_Z=TypeError,xZ="Reduce of empty array with no initial value",bZ=function(e){return function(t,i,o,c){var a=pDe(t),g=mDe(a),x=vDe(a);if(fDe(i),x===0&&o<2)throw new _Z(xZ);var E=e?x-1:0,P=e?-1:1;if(o<2)for(;;){if(E in g){c=g[E],E+=P;break}if(E+=P,e?E<0:x<=E)throw new _Z(xZ)}for(;e?E>=0:x>E;E+=P)E in g&&(c=i(c,g[E],E,a));return c}};wZ.exports={left:bZ(!1),right:bZ(!0)}});var Ay=S((POt,SZ)=>{"use strict";var Ey=nt(),gDe=as(),yDe=Mn(),Y1=function(e){return gDe.slice(0,e.length)===e};SZ.exports=function(){return Y1("Bun/")?"BUN":Y1("Cloudflare-Workers")?"CLOUDFLARE":Y1("Deno/")?"DENO":Y1("Node.js/")?"NODE":Ey.Bun&&typeof Bun.version=="string"?"BUN":Ey.Deno&&typeof Deno.version=="object"?"DENO":yDe(Ey.process)==="process"?"NODE":Ey.window&&Ey.document?"BROWSER":"REST"}()});var od=S((COt,TZ)=>{"use strict";var _De=Ay();TZ.exports=_De==="NODE"});var AZ=S(()=>{"use strict";var xDe=K(),bDe=Ty().left,wDe=Oo(),EZ=ss(),SDe=od(),TDe=!SDe&&EZ>79&&EZ<83,EDe=TDe||!wDe("reduce");xDe({target:"Array",proto:!0,forced:EDe},{reduce:function(t){var i=arguments.length;return bDe(this,t,i,i>1?arguments[1]:void 0)}})});var IZ=S(()=>{"use strict";var ADe=K(),qDe=Ty().right,IDe=Oo(),qZ=ss(),PDe=od(),CDe=!PDe&&qZ>79&&qZ<83,MDe=CDe||!IDe("reduceRight");ADe({target:"Array",proto:!0,forced:MDe},{reduceRight:function(t){return qDe(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var CZ=S(()=>{"use strict";var RDe=K(),ODe=Ze(),kDe=cs(),DDe=ODe([].reverse),PZ=[1,2];RDe({target:"Array",proto:!0,forced:String(PZ)===String(PZ.reverse())},{reverse:function(){return kDe(this)&&(this.length=this.length),DDe(this)}})});var OZ=S(()=>{"use strict";var LDe=K(),MZ=cs(),FDe=hs(),zDe=Pt(),RZ=us(),NDe=sr(),BDe=ji(),jDe=Ro(),UDe=Rt(),VDe=Ep(),$De=Fa(),WDe=VDe("slice"),GDe=UDe("species"),ZC=Array,ZDe=Math.max;LDe({target:"Array",proto:!0,forced:!WDe},{slice:function(t,i){var o=BDe(this),c=NDe(o),a=RZ(t,c),g=RZ(i===void 0?c:i,c),x,E,P;if(MZ(o)&&(x=o.constructor,FDe(x)&&(x===ZC||MZ(x.prototype))?x=void 0:zDe(x)&&(x=x[GDe],x===null&&(x=void 0)),x===ZC||x===void 0))return $De(o,a,g);for(E=new(x===void 0?ZC:x)(ZDe(g-a,0)),P=0;a<g;a++,P++)a in o&&jDe(E,P,o[a]);return E.length=P,E}})});var kZ=S(()=>{"use strict";var KDe=K(),HDe=wi().some,XDe=Oo(),JDe=XDe("some");KDe({target:"Array",proto:!0,forced:!JDe},{some:function(t){return HDe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Q1=S((jOt,LZ)=>{"use strict";var DZ=Fa(),YDe=Math.floor,KC=function(e,t){var i=e.length;if(i<8)for(var o=1,c,a;o<i;){for(a=o,c=e[o];a&&t(e[a-1],c)>0;)e[a]=e[--a];a!==o++&&(e[a]=c)}else for(var g=YDe(i/2),x=KC(DZ(e,0,g),t),E=KC(DZ(e,g),t),P=x.length,M=E.length,O=0,z=0;O<P||z<M;)e[O+z]=O<P&&z<M?t(x[O],E[z])<=0?x[O++]:E[z++]:O<P?x[O++]:E[z++];return e};LZ.exports=KC});var HC=S((UOt,zZ)=>{"use strict";var QDe=as(),FZ=QDe.match(/firefox\/(\d+)/i);zZ.exports=!!FZ&&+FZ[1]});var XC=S((VOt,NZ)=>{"use strict";var eLe=as();NZ.exports=/MSIE|Trident/.test(eLe)});var ew=S(($Ot,jZ)=>{"use strict";var tLe=as(),BZ=tLe.match(/AppleWebKit\/(\d+)\./);jZ.exports=!!BZ&&+BZ[1]});var XZ=S(()=>{"use strict";var rLe=K(),KZ=Ze(),iLe=kt(),nLe=Qt(),UZ=sr(),aLe=yy(),VZ=Nt(),JC=Xe(),oLe=Q1(),sLe=Oo(),$Z=HC(),lLe=XC(),WZ=ss(),GZ=ew(),yc=[],ZZ=KZ(yc.sort),uLe=KZ(yc.push),cLe=JC(function(){yc.sort(void 0)}),hLe=JC(function(){yc.sort(null)}),dLe=sLe("sort"),HZ=!JC(function(){if(WZ)return WZ<70;if(!($Z&&$Z>3)){if(lLe)return!0;if(GZ)return GZ<603;var e="",t,i,o,c;for(t=65;t<76;t++){switch(i=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(c=0;c<47;c++)yc.push({k:i+c,v:o})}for(yc.sort(function(a,g){return g.v-a.v}),c=0;c<yc.length;c++)i=yc[c].k.charAt(0),e.charAt(e.length-1)!==i&&(e+=i);return e!=="DGBEFHACIJK"}}),fLe=cLe||!hLe||!dLe||!HZ,pLe=function(e){return function(t,i){return i===void 0?-1:t===void 0?1:e!==void 0?+e(t,i)||0:VZ(t)>VZ(i)?1:-1}};rLe({target:"Array",proto:!0,forced:fLe},{sort:function(t){t!==void 0&&iLe(t);var i=nLe(this);if(HZ)return t===void 0?ZZ(i):ZZ(i,t);var o=[],c=UZ(i),a,g;for(g=0;g<c;g++)g in i&&uLe(o,i[g]);for(oLe(o,pLe(t)),a=UZ(o),g=0;g<a;)i[g]=o[g++];for(;g<c;)aLe(i,g++);return i}})});var _c=S((ZOt,YZ)=>{"use strict";var mLe=Ot(),vLe=Gr(),gLe=Rt(),yLe=At(),JZ=gLe("species");YZ.exports=function(e){var t=mLe(e);yLe&&t&&!t[JZ]&&vLe(t,JZ,{configurable:!0,get:function(){return this}})}});var QZ=S(()=>{"use strict";var _Le=_c();_Le("Array")});var e7=S(()=>{"use strict";var xLe=K(),bLe=Qt(),wLe=us(),SLe=Wr(),TLe=sr(),ELe=J1(),ALe=mc(),qLe=xp(),ILe=Ro(),YC=yy(),PLe=Ep(),CLe=PLe("splice"),MLe=Math.max,RLe=Math.min;xLe({target:"Array",proto:!0,forced:!CLe},{splice:function(t,i){var o=bLe(this),c=TLe(o),a=wLe(t,c),g=arguments.length,x,E,P,M,O,z;for(g===0?x=E=0:g===1?(x=0,E=c-a):(x=g-2,E=RLe(MLe(SLe(i),0),c-a)),ALe(c+x-E),P=qLe(o,E),M=0;M<E;M++)O=a+M,O in o&&ILe(P,M,o[O]);if(P.length=E,x<E){for(M=a;M<c-E;M++)O=M+E,z=M+x,O in o?o[z]=o[O]:YC(o,z);for(M=c;M>c-E+x;M--)YC(o,M-1)}else if(x>E)for(M=c-E;M>a;M--)O=M+E-1,z=M+x-1,O in o?o[z]=o[O]:YC(o,z);for(M=0;M<x;M++)o[M+a]=arguments[M+2];return ELe(o,c-E+x),P}})});var QC=S((YOt,t7)=>{"use strict";var OLe=sr();t7.exports=function(e,t){for(var i=OLe(e),o=new t(i),c=0;c<i;c++)o[c]=e[i-c-1];return o}});var eM=S(()=>{"use strict";var kLe=K(),DLe=QC(),LLe=ji(),FLe=li(),zLe=Array;kLe({target:"Array",proto:!0},{toReversed:function(){return DLe(LLe(this),zLe)}});FLe("toReversed")});var Hl=S((tkt,r7)=>{"use strict";var NLe=sr();r7.exports=function(e,t,i){for(var o=0,c=arguments.length>2?i:NLe(t),a=new e(c);c>o;)a[o]=t[o++];return a}});var tM=S((rkt,i7)=>{"use strict";var BLe=nt();i7.exports=function(e,t){var i=BLe[e],o=i&&i.prototype;return o&&o[t]}});var rM=S(()=>{"use strict";var jLe=K(),ULe=Ze(),VLe=kt(),$Le=ji(),WLe=Hl(),GLe=tM(),ZLe=li(),KLe=Array,HLe=ULe(GLe("Array","sort"));jLe({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&VLe(t);var i=$Le(this),o=WLe(KLe,i);return HLe(o,t)}});ZLe("toSorted")});var iM=S(()=>{"use strict";var XLe=K(),JLe=li(),YLe=mc(),QLe=sr(),eFe=us(),tFe=ji(),rFe=Wr(),iFe=Array,nFe=Math.max,aFe=Math.min;XLe({target:"Array",proto:!0},{toSpliced:function(t,i){var o=tFe(this),c=QLe(o),a=eFe(t,c),g=arguments.length,x=0,E,P,M,O;for(g===0?E=P=0:g===1?(E=0,P=c-a):(E=g-2,P=aFe(nFe(rFe(i),0),c-a)),M=YLe(c+E-P),O=iFe(M);x<a;x++)O[x]=o[x];for(;x<a+E;x++)O[x]=arguments[x-a+2];for(;x<M;x++)O[x]=o[x+P-E];return O}});JLe("toSpliced")});var n7=S(()=>{"use strict";var oFe=li();oFe("flat")});var a7=S(()=>{"use strict";var sFe=li();sFe("flatMap")});var o7=S(()=>{"use strict";var lFe=K(),uFe=Qt(),cFe=sr(),hFe=J1(),dFe=yy(),fFe=mc(),pFe=[].unshift(0)!==1,mFe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},vFe=pFe||!mFe();lFe({target:"Array",proto:!0,arity:1,forced:vFe},{unshift:function(t){var i=uFe(this),o=cFe(i),c=arguments.length;if(c){fFe(o+c);for(var a=o;a--;){var g=a+c;a in i?i[g]=i[a]:dFe(i,g)}for(var x=0;x<c;x++)i[x]=arguments[x]}return hFe(i,o+c)}})});var nM=S((fkt,s7)=>{"use strict";var gFe=sr(),yFe=Wr(),_Fe=RangeError;s7.exports=function(e,t,i,o){var c=gFe(e),a=yFe(i),g=a<0?c+a:a;if(g>=c||g<0)throw new _Fe("Incorrect index");for(var x=new t(c),E=0;E<c;E++)x[E]=E===g?o:e[E];return x}});var aM=S(()=>{"use strict";var xFe=K(),bFe=nM(),wFe=ji(),SFe=Array;xFe({target:"Array",proto:!0},{with:function(e,t){return bFe(wFe(this),SFe,e,t)}})});var qy=S((vkt,l7)=>{"use strict";l7.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var ko=S((gkt,u7)=>{"use strict";var TFe=wr();u7.exports=function(e,t,i){for(var o in t)TFe(e,o,t[o],i);return e}});var Yn=S((ykt,c7)=>{"use strict";var EFe=Rn(),AFe=TypeError;c7.exports=function(e,t){if(EFe(t,e))return e;throw new AFe("Incorrect invocation")}});var Ap=S((_kt,h7)=>{"use strict";var qFe=Wr(),IFe=La(),PFe=RangeError;h7.exports=function(e){if(e===void 0)return 0;var t=qFe(e),i=IFe(t);if(t!==i)throw new PFe("Wrong length or index");return i}});var tw=S((xkt,d7)=>{"use strict";d7.exports=Math.sign||function(t){var i=+t;return i===0||i!==i?i:i<0?-1:1}});var oM=S((bkt,p7)=>{"use strict";var CFe=2220446049250313e-31,f7=1/CFe;p7.exports=function(e){return e+f7-f7}});var sM=S((wkt,m7)=>{"use strict";var MFe=tw(),RFe=oM(),OFe=Math.abs,kFe=2220446049250313e-31;m7.exports=function(e,t,i,o){var c=+e,a=OFe(c),g=MFe(c);if(a<o)return g*RFe(a/o/t)*o*t;var x=(1+t/kFe)*a,E=x-(x-a);return E>i||E!==E?g*(1/0):g*E}});var rw=S((Skt,v7)=>{"use strict";var DFe=sM(),LFe=1.1920928955078125e-7,FFe=34028234663852886e22,zFe=11754943508222875e-54;v7.exports=Math.fround||function(t){return DFe(t,LFe,FFe,zFe)}});var y7=S((Tkt,g7)=>{"use strict";var NFe=Array,BFe=Math.abs,Xl=Math.pow,jFe=Math.floor,UFe=Math.log,VFe=Math.LN2,$Fe=function(e,t,i){var o=NFe(i),c=i*8-t-1,a=(1<<c)-1,g=a>>1,x=t===23?Xl(2,-24)-Xl(2,-77):0,E=e<0||e===0&&1/e<0?1:0,P=0,M,O,z;for(e=BFe(e),e!==e||e===1/0?(O=e!==e?1:0,M=a):(M=jFe(UFe(e)/VFe),z=Xl(2,-M),e*z<1&&(M--,z*=2),M+g>=1?e+=x/z:e+=x*Xl(2,1-g),e*z>=2&&(M++,z/=2),M+g>=a?(O=0,M=a):M+g>=1?(O=(e*z-1)*Xl(2,t),M+=g):(O=e*Xl(2,g-1)*Xl(2,t),M=0));t>=8;)o[P++]=O&255,O/=256,t-=8;for(M=M<<t|O,c+=t;c>0;)o[P++]=M&255,M/=256,c-=8;return o[P-1]|=E*128,o},WFe=function(e,t){var i=e.length,o=i*8-t-1,c=(1<<o)-1,a=c>>1,g=o-7,x=i-1,E=e[x--],P=E&127,M;for(E>>=7;g>0;)P=P*256+e[x--],g-=8;for(M=P&(1<<-g)-1,P>>=-g,g+=t;g>0;)M=M*256+e[x--],g-=8;if(P===0)P=1-a;else{if(P===c)return M?NaN:E?-1/0:1/0;M+=Xl(2,t),P-=a}return(E?-1:1)*M*Xl(2,P-t)};g7.exports={pack:$Fe,unpack:WFe}});var Cy=S((Ekt,D7)=>{"use strict";var sw=nt(),dM=Ze(),lM=At(),GFe=qy(),C7=Xh(),ZFe=Ui(),KFe=Gr(),_7=ko(),uM=Xe(),iw=Yn(),HFe=Wr(),XFe=La(),aw=Ap(),JFe=rw(),M7=y7(),YFe=Vi(),x7=Mo(),QFe=W1(),eze=Fa(),tze=fc(),rze=Yh(),R7=ma(),fM=yr(),ize=C7.PROPER,b7=C7.CONFIGURABLE,Ip="ArrayBuffer",lw="DataView",Pp="prototype",nze="Wrong length",O7="Wrong index",w7=fM.getterFor(Ip),Py=fM.getterFor(lw),S7=fM.set,ds=sw[Ip],ao=ds,qp=ao&&ao[Pp],Ks=sw[lw],sd=Ks&&Ks[Pp],T7=Object.prototype,aze=sw.Array,ow=sw.RangeError,oze=dM(QFe),sze=dM([].reverse),k7=M7.pack,E7=M7.unpack,A7=function(e){return[e&255]},q7=function(e){return[e&255,e>>8&255]},I7=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},P7=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},lze=function(e){return k7(JFe(e),23,4)},uze=function(e){return k7(e,52,8)},nw=function(e,t,i){KFe(e[Pp],t,{configurable:!0,get:function(){return i(this)[t]}})},xc=function(e,t,i,o){var c=Py(e),a=aw(i),g=!!o;if(a+t>c.byteLength)throw new ow(O7);var x=c.bytes,E=a+c.byteOffset,P=eze(x,E,E+t);return g?P:sze(P)},bc=function(e,t,i,o,c,a){var g=Py(e),x=aw(i),E=o(+c),P=!!a;if(x+t>g.byteLength)throw new ow(O7);for(var M=g.bytes,O=x+g.byteOffset,z=0;z<t;z++)M[O+z]=E[P?z:t-z-1]};GFe?(cM=ize&&ds.name!==Ip,!uM(function(){ds(1)})||!uM(function(){new ds(-1)})||uM(function(){return new ds,new ds(1.5),new ds(NaN),ds.length!==1||cM&&!b7})?(ao=function(t){return iw(this,qp),tze(new ds(aw(t)),this,ao)},ao[Pp]=qp,qp.constructor=ao,rze(ao,ds)):cM&&b7&&ZFe(ds,"name",Ip),x7&&YFe(sd)!==T7&&x7(sd,T7),Iy=new Ks(new ao(2)),hM=dM(sd.setInt8),Iy.setInt8(0,2147483648),Iy.setInt8(1,2147483649),(Iy.getInt8(0)||!Iy.getInt8(1))&&_7(sd,{setInt8:function(t,i){hM(this,t,i<<24>>24)},setUint8:function(t,i){hM(this,t,i<<24>>24)}},{unsafe:!0})):(ao=function(t){iw(this,qp);var i=aw(t);S7(this,{type:Ip,bytes:oze(aze(i),0),byteLength:i}),lM||(this.byteLength=i,this.detached=!1)},qp=ao[Pp],Ks=function(t,i,o){iw(this,sd),iw(t,qp);var c=w7(t),a=c.byteLength,g=HFe(i);if(g<0||g>a)throw new ow("Wrong offset");if(o=o===void 0?a-g:XFe(o),g+o>a)throw new ow(nze);S7(this,{type:lw,buffer:t,byteLength:o,byteOffset:g,bytes:c.bytes}),lM||(this.buffer=t,this.byteLength=o,this.byteOffset=g)},sd=Ks[Pp],lM&&(nw(ao,"byteLength",w7),nw(Ks,"buffer",Py),nw(Ks,"byteLength",Py),nw(Ks,"byteOffset",Py)),_7(sd,{getInt8:function(t){return xc(this,1,t)[0]<<24>>24},getUint8:function(t){return xc(this,1,t)[0]},getInt16:function(t){var i=xc(this,2,t,arguments.length>1?arguments[1]:!1);return(i[1]<<8|i[0])<<16>>16},getUint16:function(t){var i=xc(this,2,t,arguments.length>1?arguments[1]:!1);return i[1]<<8|i[0]},getInt32:function(t){return P7(xc(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return P7(xc(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return E7(xc(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return E7(xc(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,i){bc(this,1,t,A7,i)},setUint8:function(t,i){bc(this,1,t,A7,i)},setInt16:function(t,i){bc(this,2,t,q7,i,arguments.length>2?arguments[2]:!1)},setUint16:function(t,i){bc(this,2,t,q7,i,arguments.length>2?arguments[2]:!1)},setInt32:function(t,i){bc(this,4,t,I7,i,arguments.length>2?arguments[2]:!1)},setUint32:function(t,i){bc(this,4,t,I7,i,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,i){bc(this,4,t,lze,i,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,i){bc(this,8,t,uze,i,arguments.length>2?arguments[2]:!1)}}));var cM,Iy,hM;R7(ao,Ip);R7(Ks,lw);D7.exports={ArrayBuffer:ao,DataView:Ks}});var F7=S(()=>{"use strict";var cze=K(),hze=nt(),dze=Cy(),fze=_c(),pM="ArrayBuffer",L7=dze[pM],pze=hze[pM];cze({global:!0,constructor:!0,forced:pze!==L7},{ArrayBuffer:L7});fze(pM)});var Xt=S((Ikt,Z7)=>{"use strict";var mze=qy(),yM=At(),va=nt(),j7=Zt(),hw=Pt(),Sc=Ht(),_M=pa(),vze=sc(),gze=Ui(),mM=wr(),yze=Gr(),_ze=Rn(),dw=Vi(),Mp=Mo(),xze=Rt(),bze=lc(),U7=yr(),V7=U7.enforce,wze=U7.get,uw=va.Int8Array,vM=uw&&uw.prototype,z7=va.Uint8ClampedArray,N7=z7&&z7.prototype,Hs=uw&&dw(uw),fs=vM&&dw(vM),Sze=Object.prototype,xM=va.TypeError,B7=xze("toStringTag"),gM=bze("TYPED_ARRAY_TAG"),cw="TypedArrayConstructor",Jl=mze&&!!Mp&&_M(va.opera)!=="Opera",$7=!1,Na,wc,Cp,Yl={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},bM={BigInt64Array:8,BigUint64Array:8},Tze=function(t){if(!hw(t))return!1;var i=_M(t);return i==="DataView"||Sc(Yl,i)||Sc(bM,i)},W7=function(e){var t=dw(e);if(hw(t)){var i=wze(t);return i&&Sc(i,cw)?i[cw]:W7(t)}},G7=function(e){if(!hw(e))return!1;var t=_M(e);return Sc(Yl,t)||Sc(bM,t)},Eze=function(e){if(G7(e))return e;throw new xM("Target is not a typed array")},Aze=function(e){if(j7(e)&&(!Mp||_ze(Hs,e)))return e;throw new xM(vze(e)+" is not a typed array constructor")},qze=function(e,t,i,o){if(yM){if(i)for(var c in Yl){var a=va[c];if(a&&Sc(a.prototype,e))try{delete a.prototype[e]}catch(g){try{a.prototype[e]=t}catch(x){}}}(!fs[e]||i)&&mM(fs,e,i?t:Jl&&vM[e]||t,o)}},Ize=function(e,t,i){var o,c;if(yM){if(Mp){if(i){for(o in Yl)if(c=va[o],c&&Sc(c,e))try{delete c[e]}catch(a){}}if(!Hs[e]||i)try{return mM(Hs,e,i?t:Jl&&Hs[e]||t)}catch(a){}else return}for(o in Yl)c=va[o],c&&(!c[e]||i)&&mM(c,e,t)}};for(Na in Yl)wc=va[Na],Cp=wc&&wc.prototype,Cp?V7(Cp)[cw]=wc:Jl=!1;for(Na in bM)wc=va[Na],Cp=wc&&wc.prototype,Cp&&(V7(Cp)[cw]=wc);if((!Jl||!j7(Hs)||Hs===Function.prototype)&&(Hs=function(){throw new xM("Incorrect invocation")},Jl))for(Na in Yl)va[Na]&&Mp(va[Na],Hs);if((!Jl||!fs||fs===Sze)&&(fs=Hs.prototype,Jl))for(Na in Yl)va[Na]&&Mp(va[Na].prototype,fs);Jl&&dw(N7)!==fs&&Mp(N7,fs);if(yM&&!Sc(fs,B7)){$7=!0,yze(fs,B7,{configurable:!0,get:function(){return hw(this)?this[gM]:void 0}});for(Na in Yl)va[Na]&&gze(va[Na],gM,Na)}Z7.exports={NATIVE_ARRAY_BUFFER_VIEWS:Jl,TYPED_ARRAY_TAG:$7&&gM,aTypedArray:Eze,aTypedArrayConstructor:Aze,exportTypedArrayMethod:qze,exportTypedArrayStaticMethod:Ize,getTypedArrayConstructor:W7,isView:Tze,isTypedArray:G7,TypedArray:Hs,TypedArrayPrototype:fs}});var H7=S(()=>{"use strict";var Pze=K(),K7=Xt(),Cze=K7.NATIVE_ARRAY_BUFFER_VIEWS;Pze({target:"ArrayBuffer",stat:!0,forced:!Cze},{isView:K7.isView})});var tK=S(()=>{"use strict";var Mze=K(),SM=cc(),Rze=Xe(),Q7=Cy(),X7=ot(),J7=us(),Oze=La(),TM=Q7.ArrayBuffer,wM=Q7.DataView,eK=wM.prototype,Y7=SM(TM.prototype.slice),kze=SM(eK.getUint8),Dze=SM(eK.setUint8),Lze=Rze(function(){return!new TM(2).slice(1,void 0).byteLength});Mze({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Lze},{slice:function(t,i){if(Y7&&i===void 0)return Y7(X7(this),t);for(var o=X7(this).byteLength,c=J7(t,o),a=J7(i===void 0?o:i,o),g=new TM(Oze(a-c)),x=new wM(this),E=new wM(g),P=0;c<a;)Dze(E,P++,kze(x,c++));return g}})});var rK=S(()=>{"use strict";var Fze=K(),zze=Cy(),Nze=qy();Fze({global:!0,constructor:!0,forced:!Nze},{DataView:zze.DataView})});var iK=S(()=>{"use strict";rK()});var EM=S(()=>{"use strict";var Bze=K(),jze=Ze(),sK=Math.pow,nK=31,Uze=1023,aK=sK(2,-24),oK=.0009765625,Vze=function(e){var t=e>>>15,i=e>>>10&nK,o=e&Uze;return i===nK?o===0?t===0?1/0:-1/0:NaN:i===0?o*(t===0?aK:-aK):sK(2,i-15)*(t===0?1+o*oK:-1-o*oK)},$ze=jze(DataView.prototype.getUint16);Bze({target:"DataView",proto:!0},{getFloat16:function(t){var i=$ze(this,t,arguments.length>1?arguments[1]:!1);return Vze(i)}})});var AM=S((Nkt,lK)=>{"use strict";var Wze=pa(),Gze=TypeError;lK.exports=function(e){if(Wze(e)==="DataView")return e;throw new Gze("Argument is not a DataView")}});var qM=S((Bkt,uK)=>{"use strict";var Zze=Math.log,Kze=Math.LN2;uK.exports=Math.log2||function(t){return Zze(t)/Kze}});var PM=S(()=>{"use strict";var Hze=K(),Xze=Ze(),Jze=AM(),Yze=Ap(),Qze=qM(),cK=oM(),eNe=Math.pow,tNe=65520,rNe=61005353927612305e-21,iNe=16777216,IM=1024,nNe=function(e){if(e!==e)return 32256;if(e===0)return(1/e===-1/0)<<15;var t=e<0;if(t&&(e=-e),e>=tNe)return t<<15|31744;if(e<rNe)return t<<15|cK(e*iNe);var i=Qze(e)|0;if(i===-15)return t<<15|IM;var o=cK((e*eNe(2,-i)-1)*IM);return o===IM?t<<15|i+16<<10:t<<15|i+15<<10|o},aNe=Xze(DataView.prototype.setUint16);Hze({target:"DataView",proto:!0},{setFloat16:function(t,i){Jze(this);var o=Yze(t),c=nNe(+i);return aNe(this,o,c,arguments.length>2?arguments[2]:!1)}})});var CM=S((Vkt,fK)=>{"use strict";var dK=nt(),oNe=gy(),sNe=Mn(),hK=dK.ArrayBuffer,lNe=dK.TypeError;fK.exports=hK&&oNe(hK.prototype,"byteLength","get")||function(e){if(sNe(e)!=="ArrayBuffer")throw new lNe("ArrayBuffer expected");return e.byteLength}});var MM=S(($kt,pK)=>{"use strict";var uNe=nt(),cNe=qy(),hNe=CM(),dNe=uNe.DataView;pK.exports=function(e){if(!cNe||hNe(e)!==0)return!1;try{return new dNe(e),!1}catch(t){return!0}}});var RM=S(()=>{"use strict";var fNe=At(),pNe=Gr(),mNe=MM(),mK=ArrayBuffer.prototype;fNe&&!("detached"in mK)&&pNe(mK,"detached",{configurable:!0,get:function(){return mNe(this)}})});var Rp=S((Zkt,vK)=>{"use strict";var vNe=MM(),gNe=TypeError;vK.exports=function(e){if(vNe(e))throw new gNe("ArrayBuffer is detached");return e}});var OM=S((Kkt,gK)=>{"use strict";var yNe=nt(),_Ne=od();gK.exports=function(e){if(_Ne){try{return yNe.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var fw=S((Hkt,_K)=>{"use strict";var xNe=nt(),bNe=Xe(),kM=ss(),DM=Ay(),yK=xNe.structuredClone;_K.exports=!!yK&&!bNe(function(){if(DM==="DENO"&&kM>92||DM==="NODE"&&kM>94||DM==="BROWSER"&&kM>97)return!1;var e=new ArrayBuffer(8),t=yK(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var BM=S((Xkt,wK)=>{"use strict";var NM=nt(),wNe=OM(),SNe=fw(),TNe=NM.structuredClone,xK=NM.ArrayBuffer,pw=NM.MessageChannel,zM=!1,LM,bK,mw,FM;if(SNe)zM=function(e){TNe(e,{transfer:[e]})};else if(xK)try{pw||(LM=wNe("worker_threads"),LM&&(pw=LM.MessageChannel)),pw&&(bK=new pw,mw=new xK(2),FM=function(e){bK.port1.postMessage(null,[e])},mw.byteLength===2&&(FM(mw),mw.byteLength===0&&(zM=FM)))}catch(e){}wK.exports=zM});var GM=S((Jkt,PK)=>{"use strict";var VM=nt(),$M=Ze(),AK=gy(),ENe=Ap(),ANe=Rp(),qNe=CM(),SK=BM(),jM=fw(),INe=VM.structuredClone,qK=VM.ArrayBuffer,UM=VM.DataView,PNe=Math.min,WM=qK.prototype,IK=UM.prototype,CNe=$M(WM.slice),TK=AK(WM,"resizable","get"),EK=AK(WM,"maxByteLength","get"),MNe=$M(IK.getInt8),RNe=$M(IK.setInt8);PK.exports=(jM||SK)&&function(e,t,i){var o=qNe(e),c=t===void 0?o:ENe(t),a=!TK||!TK(e),g;if(ANe(e),jM&&(e=INe(e,{transfer:[e]}),o===c&&(i||a)))return e;if(o>=c&&(!i||a))g=CNe(e,0,c);else{var x=i&&!a&&EK?{maxByteLength:EK(e)}:void 0;g=new qK(c,x);for(var E=new UM(e),P=new UM(g),M=PNe(c,o),O=0;O<M;O++)RNe(P,O,MNe(E,O))}return jM||SK(e),g}});var ZM=S(()=>{"use strict";var ONe=K(),CK=GM();CK&&ONe({target:"ArrayBuffer",proto:!0},{transfer:function(){return CK(this,arguments.length?arguments[0]:void 0,!0)}})});var KM=S(()=>{"use strict";var kNe=K(),MK=GM();MK&&kNe({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return MK(this,arguments.length?arguments[0]:void 0,!1)}})});var RK=S(()=>{"use strict";var DNe=K(),LNe=Ze(),FNe=Xe(),zNe=FNe(function(){return new Date(16e11).getYear()!==120}),NNe=LNe(Date.prototype.getFullYear);DNe({target:"Date",proto:!0,forced:zNe},{getYear:function(){return NNe(this)-1900}})});var kK=S(()=>{"use strict";var BNe=K(),jNe=Ze(),OK=Date,UNe=jNe(OK.prototype.getTime);BNe({target:"Date",stat:!0},{now:function(){return UNe(new OK)}})});var FK=S(()=>{"use strict";var VNe=K(),DK=Ze(),$Ne=Wr(),LK=Date.prototype,WNe=DK(LK.getTime),GNe=DK(LK.setFullYear);VNe({target:"Date",proto:!0},{setYear:function(t){WNe(this);var i=$Ne(t),o=i>=0&&i<=99?i+1900:i;return GNe(this,o)}})});var zK=S(()=>{"use strict";var ZNe=K();ZNe({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var My=S((cDt,NK)=>{"use strict";var KNe=Wr(),HNe=Nt(),XNe=Fr(),JNe=RangeError;NK.exports=function(t){var i=HNe(XNe(this)),o="",c=KNe(t);if(c<0||c===1/0)throw new JNe("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(i+=i))c&1&&(o+=i);return o}});var Ry=S((hDt,VK)=>{"use strict";var UK=Ze(),YNe=La(),BK=Nt(),QNe=My(),eBe=Fr(),tBe=UK(QNe),rBe=UK("".slice),iBe=Math.ceil,jK=function(e){return function(t,i,o){var c=BK(eBe(t)),a=YNe(i),g=c.length,x=o===void 0?" ":BK(o),E,P;return a<=g||x===""?c:(E=a-g,P=tBe(x,iBe(E/x.length)),P.length>E&&(P=rBe(P,0,E)),e?c+P:P+c)}};VK.exports={start:jK(!1),end:jK(!0)}});var GK=S((dDt,WK)=>{"use strict";var Tc=Ze(),$K=Xe(),ld=Ry().start,nBe=RangeError,aBe=isFinite,oBe=Math.abs,Ql=Date.prototype,HM=Ql.toISOString,sBe=Tc(Ql.getTime),lBe=Tc(Ql.getUTCDate),uBe=Tc(Ql.getUTCFullYear),cBe=Tc(Ql.getUTCHours),hBe=Tc(Ql.getUTCMilliseconds),dBe=Tc(Ql.getUTCMinutes),fBe=Tc(Ql.getUTCMonth),pBe=Tc(Ql.getUTCSeconds);WK.exports=$K(function(){return HM.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!$K(function(){HM.call(new Date(NaN))})?function(){if(!aBe(sBe(this)))throw new nBe("Invalid time value");var t=this,i=uBe(t),o=hBe(t),c=i<0?"-":i>9999?"+":"";return c+ld(oBe(i),c?6:4,0)+"-"+ld(fBe(t)+1,2,0)+"-"+ld(lBe(t),2,0)+"T"+ld(cBe(t),2,0)+":"+ld(dBe(t),2,0)+":"+ld(pBe(t),2,0)+"."+ld(o,3,0)+"Z"}:HM});var KK=S(()=>{"use strict";var mBe=K(),ZK=GK();mBe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==ZK},{toISOString:ZK})});var HK=S(()=>{"use strict";var vBe=K(),gBe=Xe(),yBe=Qt(),_Be=ry(),xBe=gBe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});vBe({target:"Date",proto:!0,arity:1,forced:xBe},{toJSON:function(t){var i=yBe(this),o=_Be(i,"number");return typeof o=="number"&&!isFinite(o)?null:i.toISOString()}})});var JK=S((gDt,XK)=>{"use strict";var bBe=ot(),wBe=x2(),SBe=TypeError;XK.exports=function(e){if(bBe(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new SBe("Incorrect hint");return wBe(this,e)}});var eH=S(()=>{"use strict";var TBe=Ht(),EBe=wr(),ABe=JK(),qBe=Rt(),YK=qBe("toPrimitive"),QK=Date.prototype;TBe(QK,YK)||EBe(QK,YK,ABe)});var nH=S(()=>{"use strict";var rH=Ze(),IBe=wr(),XM=Date.prototype,tH="Invalid Date",iH="toString",PBe=rH(XM[iH]),CBe=rH(XM.getTime);String(new Date(NaN))!==tH&&IBe(XM,iH,function(){var t=CBe(this);return t===t?PBe(this):tH})});var oH=S(()=>{"use strict";var MBe=K(),Oy=Ze(),RBe=Nt(),OBe=Oy("".charAt),kBe=Oy("".charCodeAt),DBe=Oy(/./.exec),LBe=Oy(1 .toString),FBe=Oy("".toUpperCase),zBe=/[\w*+\-./@]/,aH=function(e,t){for(var i=LBe(e,16);i.length<t;)i="0"+i;return i};MBe({global:!0},{escape:function(t){for(var i=RBe(t),o="",c=i.length,a=0,g,x;a<c;)g=OBe(i,a++),DBe(zBe,g)?o+=g:(x=kBe(g,0),x<256?o+="%"+aH(x,2):o+="%u"+FBe(aH(x,4)));return o}})});var YM=S((TDt,cH)=>{"use strict";var lH=Ze(),NBe=kt(),BBe=Pt(),jBe=Ht(),sH=Fa(),UBe=mp(),uH=Function,VBe=lH([].concat),$Be=lH([].join),JM={},WBe=function(e,t,i){if(!jBe(JM,t)){for(var o=[],c=0;c<t;c++)o[c]="a["+c+"]";JM[t]=uH("C,a","return new C("+$Be(o,",")+")")}return JM[t](e,i)};cH.exports=UBe?uH.bind:function(t){var i=NBe(this),o=i.prototype,c=sH(arguments,1),a=function(){var x=VBe(c,sH(arguments));return this instanceof a?WBe(i,x.length,x):i.apply(t,x)};return BBe(o)&&(a.prototype=o),a}});var dH=S(()=>{"use strict";var GBe=K(),hH=YM();GBe({target:"Function",proto:!0,forced:Function.bind!==hH},{bind:hH})});var mH=S(()=>{"use strict";var ZBe=Zt(),fH=Pt(),KBe=Or(),HBe=Rn(),XBe=Rt(),JBe=sy(),QM=XBe("hasInstance"),pH=Function.prototype;QM in pH||KBe.f(pH,QM,{value:JBe(function(e){if(!ZBe(this)||!fH(e))return!1;var t=this.prototype;return fH(t)?HBe(t,e):e instanceof this},QM)})});var _H=S(()=>{"use strict";var YBe=At(),QBe=Xh().EXISTS,vH=Ze(),e3e=Gr(),gH=Function.prototype,t3e=vH(gH.toString),yH=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,r3e=vH(yH.exec),i3e="name";YBe&&!QBe&&e3e(gH,i3e,{configurable:!0,get:function(){try{return r3e(yH,t3e(this))[1]}catch(e){return""}}})});var tR=S(()=>{"use strict";var n3e=K(),eR=nt();n3e({global:!0,forced:eR.globalThis!==eR},{globalThis:eR})});var oR=S(()=>{"use strict";var a3e=K(),o3e=nt(),s3e=Yn(),l3e=ot(),u3e=Zt(),c3e=Vi(),h3e=Gr(),d3e=Ro(),f3e=Xe(),nR=Ht(),p3e=Rt(),Xs=vc().IteratorPrototype,m3e=At(),v3e=fr(),rR="constructor",bH="Iterator",xH=p3e("toStringTag"),wH=TypeError,iR=o3e[bH],SH=v3e||!u3e(iR)||iR.prototype!==Xs||!f3e(function(){iR({})}),aR=function(){if(s3e(this,Xs),c3e(this)===Xs)throw new wH("Abstract class Iterator not directly constructable")},TH=function(e,t){m3e?h3e(Xs,e,{configurable:!0,get:function(){return t},set:function(i){if(l3e(this),this===Xs)throw new wH("You can't redefine this property");nR(this,e)?this[e]=i:d3e(this,e,i)}}):Xs[e]=t};nR(Xs,xH)||TH(xH,bH);(SH||!nR(Xs,rR)||Xs[rR]===Object)&&TH(rR,aR);aR.prototype=Xs;a3e({global:!0,constructor:!0,forced:SH},{Iterator:aR})});var ri=S((DDt,EH)=>{"use strict";EH.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var Op=S((LDt,AH)=>{"use strict";var g3e=RangeError;AH.exports=function(e){if(e===e)return e;throw new g3e("NaN is not allowed")}});var kp=S((FDt,qH)=>{"use strict";var y3e=Wr(),_3e=RangeError;qH.exports=function(e){var t=y3e(e);if(t<0)throw new _3e("The argument can't be less than 0");return t}});var Ec=S((zDt,OH)=>{"use strict";var x3e=at(),b3e=bi(),w3e=Ui(),S3e=ko(),T3e=Rt(),IH=yr(),E3e=xi(),A3e=vc().IteratorPrototype,vw=en(),sR=mn(),q3e=T3e("toStringTag"),PH="IteratorHelper",CH="WrapForValidIterator",I3e=IH.set,MH=function(e){var t=IH.getterFor(e?CH:PH);return S3e(b3e(A3e),{next:function(){var o=t(this);if(e)return o.nextHandler();if(o.done)return vw(void 0,!0);try{var c=o.nextHandler();return o.returnHandlerResult?c:vw(c,o.done)}catch(a){throw o.done=!0,a}},return:function(){var i=t(this),o=i.iterator;if(i.done=!0,e){var c=E3e(o,"return");return c?x3e(c,o):vw(void 0,!0)}if(i.inner)try{sR(i.inner.iterator,"normal")}catch(a){return sR(o,"throw",a)}return o&&sR(o,"normal"),vw(void 0,!0)}})},P3e=MH(!0),RH=MH(!1);w3e(RH,q3e,"Iterator Helper");OH.exports=function(e,t,i){var o=function(a,g){g?(g.iterator=a.iterator,g.next=a.next):g=a,g.type=t?CH:PH,g.returnHandlerResult=!!i,g.nextHandler=e,g.counter=0,g.done=!1,I3e(this,g)};return o.prototype=t?P3e:RH,o}});var ps=S((NDt,kH)=>{"use strict";var C3e=nt();kH.exports=function(e,t){var i=C3e.Iterator,o=i&&i.prototype,c=o&&o[e],a=!1;if(c)try{c.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(g){g instanceof t||(a=!1)}if(!a)return c}});var hR=S(()=>{"use strict";var M3e=K(),uR=at(),cR=ot(),R3e=ri(),O3e=Op(),k3e=kp(),D3e=mn(),L3e=Ec(),F3e=ps(),DH=fr(),lR=!DH&&F3e("drop",RangeError),z3e=L3e(function(){for(var e=this.iterator,t=this.next,i,o;this.remaining;)if(this.remaining--,i=cR(uR(t,e)),o=this.done=!!i.done,o)return;if(i=cR(uR(t,e)),o=this.done=!!i.done,!o)return i.value});M3e({target:"Iterator",proto:!0,real:!0,forced:DH||lR},{drop:function(t){cR(this);var i;try{i=k3e(O3e(+t))}catch(o){D3e(this,"throw",o)}return lR?uR(lR,this,i):new z3e(R3e(this),{remaining:i})}})});var fR=S(()=>{"use strict";var N3e=K(),B3e=at(),j3e=si(),U3e=kt(),V3e=ot(),$3e=ri(),W3e=mn(),G3e=ps(),dR=G3e("every",TypeError);N3e({target:"Iterator",proto:!0,real:!0,forced:dR},{every:function(t){V3e(this);try{U3e(t)}catch(c){W3e(this,"throw",c)}if(dR)return B3e(dR,this,t);var i=$3e(this),o=0;return!j3e(i,function(c,a){if(!t(c,o++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var mR=S(()=>{"use strict";var Z3e=K(),LH=at(),K3e=kt(),FH=ot(),H3e=ri(),X3e=Ec(),J3e=G1(),zH=fr(),Y3e=mn(),Q3e=ps(),pR=!zH&&Q3e("filter",TypeError),eje=X3e(function(){for(var e=this.iterator,t=this.predicate,i=this.next,o,c,a;;){if(o=FH(LH(i,e)),c=this.done=!!o.done,c)return;if(a=o.value,J3e(e,t,[a,this.counter++],!0))return a}});Z3e({target:"Iterator",proto:!0,real:!0,forced:zH||pR},{filter:function(t){FH(this);try{K3e(t)}catch(i){Y3e(this,"throw",i)}return pR?LH(pR,this,t):new eje(H3e(this),{predicate:t})}})});var gR=S(()=>{"use strict";var tje=K(),rje=at(),ije=si(),nje=kt(),aje=ot(),oje=ri(),sje=mn(),lje=ps(),vR=lje("find",TypeError);tje({target:"Iterator",proto:!0,real:!0,forced:vR},{find:function(t){aje(this);try{nje(t)}catch(c){sje(this,"throw",c)}if(vR)return rje(vR,this,t);var i=oje(this),o=0;return ije(i,function(c,a){if(t(c,o++))return a(c)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var yR=S((KDt,BH)=>{"use strict";var uje=at(),NH=ot(),cje=ri(),hje=Zs();BH.exports=function(e,t){(!t||typeof e!="string")&&NH(e);var i=hje(e);return cje(NH(i!==void 0?uje(i,e):e))}});var SR=S(()=>{"use strict";var dje=K(),xR=at(),fje=kt(),bR=ot(),pje=ri(),mje=yR(),vje=Ec(),wR=mn(),jH=fr(),gje=ps(),_R=!jH&&gje("flatMap",TypeError),yje=vje(function(){for(var e=this.iterator,t=this.mapper,i,o;;){if(o=this.inner)try{if(i=bR(xR(o.next,o.iterator)),!i.done)return i.value;this.inner=null}catch(c){wR(e,"throw",c)}if(i=bR(xR(this.next,e)),this.done=!!i.done)return;try{this.inner=mje(t(i.value,this.counter++),!1)}catch(c){wR(e,"throw",c)}}});dje({target:"Iterator",proto:!0,real:!0,forced:jH||_R},{flatMap:function(t){bR(this);try{fje(t)}catch(i){wR(this,"throw",i)}return _R?xR(_R,this,t):new yje(pje(this),{mapper:t,inner:null})}})});var ER=S(()=>{"use strict";var _je=K(),xje=at(),bje=si(),wje=kt(),Sje=ot(),Tje=ri(),Eje=mn(),Aje=ps(),TR=Aje("forEach",TypeError);_je({target:"Iterator",proto:!0,real:!0,forced:TR},{forEach:function(t){Sje(this);try{wje(t)}catch(c){Eje(this,"throw",c)}if(TR)return xje(TR,this,t);var i=Tje(this),o=0;bje(i,function(c){t(c,o++)},{IS_RECORD:!0})}})});var AR=S(()=>{"use strict";var qje=K(),Ije=at(),Pje=Qt(),Cje=Rn(),Mje=vc().IteratorPrototype,Rje=Ec(),Oje=yR(),kje=fr(),Dje=Rje(function(){return Ije(this.next,this.iterator)},!0);qje({target:"Iterator",stat:!0,forced:kje},{from:function(t){var i=Oje(typeof t=="string"?Pje(t):t,!0);return Cje(Mje,i.iterator)?i.iterator:new Dje(i)}})});var gw=S(()=>{"use strict";var Lje=K(),UH=at(),Fje=kt(),VH=ot(),zje=ri(),Nje=Ec(),Bje=G1(),jje=mn(),Uje=ps(),$H=fr(),qR=!$H&&Uje("map",TypeError),Vje=Nje(function(){var e=this.iterator,t=VH(UH(this.next,e)),i=this.done=!!t.done;if(!i)return Bje(e,this.mapper,[t.value,this.counter++],!0)});Lje({target:"Iterator",proto:!0,real:!0,forced:$H||qR},{map:function(t){VH(this);try{Fje(t)}catch(i){jje(this,"throw",i)}return qR?UH(qR,this,t):new Vje(zje(this),{mapper:t})}})});var PR=S(()=>{"use strict";var $je=K(),Wje=si(),Gje=kt(),Zje=ot(),Kje=ri(),Hje=mn(),Xje=ps(),Jje=On(),Yje=Xe(),WH=TypeError,GH=Yje(function(){[].keys().reduce(function(){},void 0)}),IR=!GH&&Xje("reduce",WH);$je({target:"Iterator",proto:!0,real:!0,forced:GH||IR},{reduce:function(t){Zje(this);try{Gje(t)}catch(g){Hje(this,"throw",g)}var i=arguments.length<2,o=i?void 0:arguments[1];if(IR)return Jje(IR,this,i?[t]:[t,o]);var c=Kje(this),a=0;if(Wje(c,function(g){i?(i=!1,o=g):o=t(o,g,a),a++},{IS_RECORD:!0}),i)throw new WH("Reduce of empty iterator with no initial value");return o}})});var MR=S(()=>{"use strict";var Qje=K(),e5e=at(),t5e=si(),r5e=kt(),i5e=ot(),n5e=ri(),a5e=mn(),o5e=ps(),CR=o5e("some",TypeError);Qje({target:"Iterator",proto:!0,real:!0,forced:CR},{some:function(t){i5e(this);try{r5e(t)}catch(c){a5e(this,"throw",c)}if(CR)return e5e(CR,this,t);var i=n5e(this),o=0;return t5e(i,function(c,a){if(t(c,o++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var OR=S(()=>{"use strict";var s5e=K(),ZH=at(),KH=ot(),l5e=ri(),u5e=Op(),c5e=kp(),h5e=Ec(),HH=mn(),d5e=ps(),XH=fr(),RR=!XH&&d5e("take",RangeError),f5e=h5e(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,HH(e,"normal",void 0);var t=KH(ZH(this.next,e)),i=this.done=!!t.done;if(!i)return t.value});s5e({target:"Iterator",proto:!0,real:!0,forced:XH||RR},{take:function(t){KH(this);var i;try{i=c5e(u5e(+t))}catch(o){HH(this,"throw",o)}return RR?ZH(RR,this,i):new f5e(l5e(this),{remaining:i})}})});var kR=S(()=>{"use strict";var p5e=K(),m5e=ot(),v5e=si(),g5e=ri(),y5e=[].push;p5e({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return v5e(g5e(m5e(this)),y5e,{that:t,IS_RECORD:!0}),t}})});var JH=S(()=>{"use strict";var _5e=nt(),x5e=ma();x5e(_5e.JSON,"JSON",!0)});var yw=S((fLt,YH)=>{"use strict";var b5e=Xe();YH.exports=b5e(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var xw=S((pLt,e9)=>{"use strict";var w5e=Xe(),S5e=Pt(),T5e=Mn(),QH=yw(),_w=Object.isExtensible,E5e=w5e(function(){_w(1)});e9.exports=E5e||QH?function(t){return!S5e(t)||QH&&T5e(t)==="ArrayBuffer"?!1:_w?_w(t):!0}:_w});var eu=S((mLt,t9)=>{"use strict";var A5e=Xe();t9.exports=!A5e(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Ac=S((vLt,n9)=>{"use strict";var q5e=K(),I5e=Ze(),P5e=gp(),C5e=Pt(),DR=Ht(),M5e=Or().f,r9=uc(),R5e=q1(),LR=xw(),O5e=lc(),k5e=eu(),i9=!1,tu=O5e("meta"),D5e=0,FR=function(e){M5e(e,tu,{value:{objectID:"O"+D5e++,weakData:{}}})},L5e=function(e,t){if(!C5e(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!DR(e,tu)){if(!LR(e))return"F";if(!t)return"E";FR(e)}return e[tu].objectID},F5e=function(e,t){if(!DR(e,tu)){if(!LR(e))return!0;if(!t)return!1;FR(e)}return e[tu].weakData},z5e=function(e){return k5e&&i9&&LR(e)&&!DR(e,tu)&&FR(e),e},N5e=function(){B5e.enable=function(){},i9=!0;var e=r9.f,t=I5e([].splice),i={};i[tu]=1,e(i).length&&(r9.f=function(o){for(var c=e(o),a=0,g=c.length;a<g;a++)if(c[a]===tu){t(c,a,1);break}return c},q5e({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:R5e.f}))},B5e=n9.exports={enable:N5e,fastKey:L5e,getWeakData:F5e,onFreeze:z5e};P5e[tu]=!0});var ky=S((gLt,o9)=>{"use strict";var j5e=K(),U5e=nt(),V5e=Ze(),a9=_p(),$5e=wr(),W5e=Ac(),G5e=si(),Z5e=Yn(),K5e=Zt(),H5e=Da(),zR=Pt(),NR=Xe(),X5e=xy(),J5e=ma(),Y5e=fc();o9.exports=function(e,t,i){var o=e.indexOf("Map")!==-1,c=e.indexOf("Weak")!==-1,a=o?"set":"add",g=U5e[e],x=g&&g.prototype,E=g,P={},M=function(Q){var ee=V5e(x[Q]);$5e(x,Q,Q==="add"?function(Te){return ee(this,Te===0?0:Te),this}:Q==="delete"?function(xe){return c&&!zR(xe)?!1:ee(this,xe===0?0:xe)}:Q==="get"?function(Te){return c&&!zR(Te)?void 0:ee(this,Te===0?0:Te)}:Q==="has"?function(Te){return c&&!zR(Te)?!1:ee(this,Te===0?0:Te)}:function(Te,Je){return ee(this,Te===0?0:Te,Je),this})},O=a9(e,!K5e(g)||!(c||x.forEach&&!NR(function(){new g().entries().next()})));if(O)E=i.getConstructor(t,e,o,a),W5e.enable();else if(a9(e,!0)){var z=new E,oe=z[a](c?{}:-0,1)!==z,we=NR(function(){z.has(1)}),ye=X5e(function(Q){new g(Q)}),te=!c&&NR(function(){for(var Q=new g,ee=5;ee--;)Q[a](ee,ee);return!Q.has(-0)});ye||(E=t(function(Q,ee){Z5e(Q,x);var xe=Y5e(new g,Q,E);return H5e(ee)||G5e(ee,xe[a],{that:xe,AS_ENTRIES:o}),xe}),E.prototype=x,x.constructor=E),(we||te)&&(M("delete"),M("has"),o&&M("get")),(te||oe)&&M(a),c&&x.clear&&delete x.clear}return P[e]=E,j5e({global:!0,constructor:!0,forced:E!==g},P),J5e(E,e),c||i.setStrong(E,e,o),E}});var jR=S((yLt,d9)=>{"use strict";var s9=bi(),Q5e=Gr(),l9=ko(),eUe=qr(),tUe=Yn(),rUe=Da(),iUe=si(),nUe=H1(),bw=en(),aUe=_c(),Dy=At(),u9=Ac().fastKey,h9=yr(),c9=h9.set,BR=h9.getterFor;d9.exports={getConstructor:function(e,t,i,o){var c=e(function(P,M){tUe(P,a),c9(P,{type:t,index:s9(null),first:null,last:null,size:0}),Dy||(P.size=0),rUe(M)||iUe(M,P[o],{that:P,AS_ENTRIES:i})}),a=c.prototype,g=BR(t),x=function(P,M,O){var z=g(P),oe=E(P,M),we,ye;return oe?oe.value=O:(z.last=oe={index:ye=u9(M,!0),key:M,value:O,previous:we=z.last,next:null,removed:!1},z.first||(z.first=oe),we&&(we.next=oe),Dy?z.size++:P.size++,ye!=="F"&&(z.index[ye]=oe)),P},E=function(P,M){var O=g(P),z=u9(M),oe;if(z!=="F")return O.index[z];for(oe=O.first;oe;oe=oe.next)if(oe.key===M)return oe};return l9(a,{clear:function(){for(var M=this,O=g(M),z=O.first;z;)z.removed=!0,z.previous&&(z.previous=z.previous.next=null),z=z.next;O.first=O.last=null,O.index=s9(null),Dy?O.size=0:M.size=0},delete:function(P){var M=this,O=g(M),z=E(M,P);if(z){var oe=z.next,we=z.previous;delete O.index[z.index],z.removed=!0,we&&(we.next=oe),oe&&(oe.previous=we),O.first===z&&(O.first=oe),O.last===z&&(O.last=we),Dy?O.size--:M.size--}return!!z},forEach:function(M){for(var O=g(this),z=eUe(M,arguments.length>1?arguments[1]:void 0),oe;oe=oe?oe.next:O.first;)for(z(oe.value,oe.key,this);oe&&oe.removed;)oe=oe.previous},has:function(M){return!!E(this,M)}}),l9(a,i?{get:function(M){var O=E(this,M);return O&&O.value},set:function(M,O){return x(this,M===0?0:M,O)}}:{add:function(M){return x(this,M=M===0?0:M,M)}}),Dy&&Q5e(a,"size",{configurable:!0,get:function(){return g(this).size}}),c},setStrong:function(e,t,i){var o=t+" Iterator",c=BR(t),a=BR(o);nUe(e,t,function(g,x){c9(this,{type:o,target:g,state:c(g),kind:x,last:null})},function(){for(var g=a(this),x=g.kind,E=g.last;E&&E.removed;)E=E.previous;return!g.target||!(g.last=E=E?E.next:g.state.first)?(g.target=null,bw(void 0,!0)):bw(x==="keys"?E.key:x==="values"?E.value:[E.key,E.value],!1)},i?"entries":"values",!i,!0),aUe(t)}}});var f9=S(()=>{"use strict";var oUe=ky(),sUe=jR();oUe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},sUe)});var ww=S(()=>{"use strict";f9()});var tn=S((SLt,p9)=>{"use strict";var Sw=Ze(),Ly=Map.prototype;p9.exports={Map,set:Sw(Ly.set),get:Sw(Ly.get),has:Sw(Ly.has),remove:Sw(Ly.delete),proto:Ly}});var UR=S(()=>{"use strict";var lUe=K(),uUe=Ze(),cUe=kt(),hUe=Fr(),dUe=si(),Tw=tn(),m9=fr(),fUe=Xe(),v9=Tw.Map,pUe=Tw.has,mUe=Tw.get,vUe=Tw.set,gUe=uUe([].push),yUe=m9||fUe(function(){return v9.groupBy("ab",function(e){return e}).get("a").length!==1});lUe({target:"Map",stat:!0,forced:m9||yUe},{groupBy:function(t,i){hUe(t),cUe(i);var o=new v9,c=0;return dUe(t,function(a){var g=i(a,c++);pUe(o,g)?gUe(mUe(o,g),a):vUe(o,g,[a])}),o}})});var VR=S((ALt,g9)=>{"use strict";var _Ue=Math.log;g9.exports=Math.log1p||function(t){var i=+t;return i>-1e-8&&i<1e-8?i-i*i/2:_Ue(1+i)}});var _9=S(()=>{"use strict";var xUe=K(),bUe=VR(),$R=Math.acosh,wUe=Math.log,y9=Math.sqrt,SUe=Math.LN2,TUe=!$R||Math.floor($R(Number.MAX_VALUE))!==710||$R(1/0)!==1/0;xUe({target:"Math",stat:!0,forced:TUe},{acosh:function(t){var i=+t;return i<1?NaN:i>94906265.62425156?wUe(i)+SUe:bUe(i-1+y9(i-1)*y9(i+1))}})});var w9=S(()=>{"use strict";var EUe=K(),x9=Math.asinh,AUe=Math.log,qUe=Math.sqrt;function b9(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-b9(-t):AUe(t+qUe(t*t+1))}var IUe=!(x9&&1/x9(0)>0);EUe({target:"Math",stat:!0,forced:IUe},{asinh:b9})});var T9=S(()=>{"use strict";var PUe=K(),S9=Math.atanh,CUe=Math.log,MUe=!(S9&&1/S9(-0)<0);PUe({target:"Math",stat:!0,forced:MUe},{atanh:function(t){var i=+t;return i===0?i:CUe((1+i)/(1-i))/2}})});var E9=S(()=>{"use strict";var RUe=K(),OUe=tw(),kUe=Math.abs,DUe=Math.pow;RUe({target:"Math",stat:!0},{cbrt:function(t){var i=+t;return OUe(i)*DUe(kUe(i),1/3)}})});var A9=S(()=>{"use strict";var LUe=K(),FUe=Math.floor,zUe=Math.log,NUe=Math.LOG2E;LUe({target:"Math",stat:!0},{clz32:function(t){var i=t>>>0;return i?31-FUe(zUe(i+.5)*NUe):32}})});var zy=S((FLt,q9)=>{"use strict";var Fy=Math.expm1,BUe=Math.exp;q9.exports=!Fy||Fy(10)>22025.465794806718||Fy(10)<22025.465794806718||Fy(-2e-17)!==-2e-17?function(t){var i=+t;return i===0?i:i>-1e-6&&i<1e-6?i+i*i/2:BUe(i)-1}:Fy});var P9=S(()=>{"use strict";var jUe=K(),UUe=zy(),I9=Math.cosh,VUe=Math.abs,WR=Math.E,$Ue=!I9||I9(710)===1/0;jUe({target:"Math",stat:!0,forced:$Ue},{cosh:function(t){var i=UUe(VUe(t)-1)+1;return(i+1/(i*WR*WR))*(WR/2)}})});var M9=S(()=>{"use strict";var WUe=K(),C9=zy();WUe({target:"Math",stat:!0,forced:C9!==Math.expm1},{expm1:C9})});var R9=S(()=>{"use strict";var GUe=K(),ZUe=rw();GUe({target:"Math",stat:!0},{fround:ZUe})});var GR=S(()=>{"use strict";var KUe=K(),HUe=sM(),XUe=.0009765625,JUe=65504,YUe=6103515625e-14;KUe({target:"Math",stat:!0},{f16round:function(t){return HUe(t,XUe,JUe,YUe)}})});var k9=S(()=>{"use strict";var QUe=K(),O9=Math.hypot,e4e=Math.abs,t4e=Math.sqrt,r4e=!!O9&&O9(1/0,NaN)!==1/0;QUe({target:"Math",stat:!0,arity:2,forced:r4e},{hypot:function(t,i){for(var o=0,c=0,a=arguments.length,g=0,x,E;c<a;)x=e4e(arguments[c++]),g<x?(E=g/x,o=o*E*E+1,g=x):x>0?(E=x/g,o+=E*E):o+=x;return g===1/0?1/0:g*t4e(o)}})});var L9=S(()=>{"use strict";var i4e=K(),n4e=Xe(),D9=Math.imul,a4e=n4e(function(){return D9(4294967295,5)!==-5||D9.length!==2});i4e({target:"Math",stat:!0,forced:a4e},{imul:function(t,i){var o=65535,c=+t,a=+i,g=o&c,x=o&a;return 0|g*x+((o&c>>>16)*x+g*(o&a>>>16)<<16>>>0)}})});var ZR=S((XLt,F9)=>{"use strict";var o4e=Math.log,s4e=Math.LOG10E;F9.exports=Math.log10||function(t){return o4e(t)*s4e}});var z9=S(()=>{"use strict";var l4e=K(),u4e=ZR();l4e({target:"Math",stat:!0},{log10:u4e})});var N9=S(()=>{"use strict";var c4e=K(),h4e=VR();c4e({target:"Math",stat:!0},{log1p:h4e})});var B9=S(()=>{"use strict";var d4e=K(),f4e=qM();d4e({target:"Math",stat:!0},{log2:f4e})});var j9=S(()=>{"use strict";var p4e=K(),m4e=tw();p4e({target:"Math",stat:!0},{sign:m4e})});var $9=S(()=>{"use strict";var v4e=K(),g4e=Xe(),U9=zy(),y4e=Math.abs,V9=Math.exp,_4e=Math.E,x4e=g4e(function(){return Math.sinh(-2e-17)!==-2e-17});v4e({target:"Math",stat:!0,forced:x4e},{sinh:function(t){var i=+t;return y4e(i)<1?(U9(i)-U9(-i))/2:(V9(i-1)-V9(-i-1))*(_4e/2)}})});var Z9=S(()=>{"use strict";var b4e=K(),W9=zy(),G9=Math.exp;b4e({target:"Math",stat:!0},{tanh:function(t){var i=+t,o=W9(i),c=W9(-i);return o===1/0?1:c===1/0?-1:(o-c)/(G9(i)+G9(-i))}})});var K9=S(()=>{"use strict";var w4e=ma();w4e(Math,"Math",!0)});var H9=S(()=>{"use strict";var S4e=K(),T4e=z2();S4e({target:"Math",stat:!0},{trunc:T4e})});var Ny=S((fFt,X9)=>{"use strict";var E4e=Ze();X9.exports=E4e(1 .valueOf)});var ud=S((pFt,J9)=>{"use strict";J9.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var cd=S((mFt,Q9)=>{"use strict";var A4e=Ze(),q4e=Fr(),I4e=Nt(),HR=ud(),Y9=A4e("".replace),P4e=RegExp("^["+HR+"]+"),C4e=RegExp("(^|[^"+HR+"])["+HR+"]+$"),KR=function(e){return function(t){var i=I4e(q4e(t));return e&1&&(i=Y9(i,P4e,"")),e&2&&(i=Y9(i,C4e,"$1")),i}};Q9.exports={start:KR(1),end:KR(2),trim:KR(3)}});var oX=S(()=>{"use strict";var M4e=K(),XR=fr(),R4e=At(),rX=nt(),JR=I1(),iX=Ze(),O4e=_p(),eX=Ht(),k4e=fc(),D4e=Rn(),L4e=$l(),nX=ry(),F4e=Xe(),z4e=uc().f,N4e=fn().f,B4e=Or().f,j4e=Ny(),U4e=cd().trim,By="Number",Dp=rX[By],tX=JR[By],YR=Dp.prototype,V4e=rX.TypeError,$4e=iX("".slice),Ew=iX("".charCodeAt),W4e=function(e){var t=nX(e,"number");return typeof t=="bigint"?t:G4e(t)},G4e=function(e){var t=nX(e,"number"),i,o,c,a,g,x,E,P;if(L4e(t))throw new V4e("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=U4e(t),i=Ew(t,0),i===43||i===45){if(o=Ew(t,2),o===88||o===120)return NaN}else if(i===48){switch(Ew(t,1)){case 66:case 98:c=2,a=49;break;case 79:case 111:c=8,a=55;break;default:return+t}for(g=$4e(t,2),x=g.length,E=0;E<x;E++)if(P=Ew(g,E),P<48||P>a)return NaN;return parseInt(g,c)}}return+t},QR=O4e(By,!Dp(" 0o1")||!Dp("0b1")||Dp("+0x1")),Z4e=function(e){return D4e(YR,e)&&F4e(function(){j4e(e)})},Aw=function(t){var i=arguments.length<1?0:Dp(W4e(t));return Z4e(this)?k4e(Object(i),this,Aw):i};Aw.prototype=YR;QR&&!XR&&(YR.constructor=Aw);M4e({global:!0,constructor:!0,wrap:!0,forced:QR},{Number:Aw});var aX=function(e,t){for(var i=R4e?z4e(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0,c;i.length>o;o++)eX(t,c=i[o])&&!eX(e,c)&&B4e(e,c,N4e(t,c))};XR&&tX&&aX(JR[By],tX);(QR||XR)&&aX(JR[By],Dp)});var sX=S(()=>{"use strict";var K4e=K();K4e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var eO=S((xFt,lX)=>{"use strict";var H4e=nt(),X4e=H4e.isFinite;lX.exports=Number.isFinite||function(t){return typeof t=="number"&&X4e(t)}});var uX=S(()=>{"use strict";var J4e=K(),Y4e=eO();J4e({target:"Number",stat:!0},{isFinite:Y4e})});var qw=S((SFt,cX)=>{"use strict";var Q4e=Pt(),e6e=Math.floor;cX.exports=Number.isInteger||function(t){return!Q4e(t)&&isFinite(t)&&e6e(t)===t}});var hX=S(()=>{"use strict";var t6e=K(),r6e=qw();t6e({target:"Number",stat:!0},{isInteger:r6e})});var dX=S(()=>{"use strict";var i6e=K();i6e({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var fX=S(()=>{"use strict";var n6e=K(),a6e=qw(),o6e=Math.abs;n6e({target:"Number",stat:!0},{isSafeInteger:function(t){return a6e(t)&&o6e(t)<=9007199254740991}})});var pX=S(()=>{"use strict";var s6e=K();s6e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var mX=S(()=>{"use strict";var l6e=K();l6e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var tO=S((kFt,_X)=>{"use strict";var yX=nt(),u6e=Xe(),c6e=Ze(),h6e=Nt(),d6e=cd().trim,f6e=ud(),p6e=c6e("".charAt),Iw=yX.parseFloat,vX=yX.Symbol,gX=vX&&vX.iterator,m6e=1/Iw(f6e+"-0")!==-1/0||gX&&!u6e(function(){Iw(Object(gX))});_X.exports=m6e?function(t){var i=d6e(h6e(t)),o=Iw(i);return o===0&&p6e(i,0)==="-"?-0:o}:Iw});var bX=S(()=>{"use strict";var v6e=K(),xX=tO();v6e({target:"Number",stat:!0,forced:Number.parseFloat!==xX},{parseFloat:xX})});var rO=S((FFt,qX)=>{"use strict";var EX=nt(),g6e=Xe(),y6e=Ze(),_6e=Nt(),x6e=cd().trim,wX=ud(),jy=EX.parseInt,SX=EX.Symbol,TX=SX&&SX.iterator,AX=/^[+-]?0x/i,b6e=y6e(AX.exec),w6e=jy(wX+"08")!==8||jy(wX+"0x16")!==22||TX&&!g6e(function(){jy(Object(TX))});qX.exports=w6e?function(t,i){var o=x6e(_6e(t));return jy(o,i>>>0||(b6e(AX,o)?16:10))}:jy});var PX=S(()=>{"use strict";var S6e=K(),IX=rO();S6e({target:"Number",stat:!0,forced:Number.parseInt!==IX},{parseInt:IX})});var kX=S(()=>{"use strict";var T6e=K(),nO=Ze(),E6e=Wr(),A6e=Ny(),q6e=My(),I6e=ZR(),iO=Xe(),P6e=RangeError,CX=String,C6e=isFinite,M6e=Math.abs,R6e=Math.floor,MX=Math.pow,O6e=Math.round,Js=nO(1 .toExponential),k6e=nO(q6e),RX=nO("".slice),OX=Js(-69e-12,4)==="-6.9000e-11"&&Js(1.255,2)==="1.25e+0"&&Js(12345,3)==="1.235e+4"&&Js(25,0)==="3e+1",D6e=function(){return iO(function(){Js(1,1/0)})&&iO(function(){Js(1,-1/0)})},L6e=function(){return!iO(function(){Js(1/0,1/0),Js(NaN,1/0)})},F6e=!OX||!D6e()||!L6e();T6e({target:"Number",proto:!0,forced:F6e},{toExponential:function(t){var i=A6e(this);if(t===void 0)return Js(i);var o=E6e(t);if(!C6e(i))return String(i);if(o<0||o>20)throw new P6e("Incorrect fraction digits");if(OX)return Js(i,o);var c="",a,g,x,E;if(i<0&&(c="-",i=-i),i===0)g=0,a=k6e("0",o+1);else{var P=I6e(i);g=R6e(P);var M=MX(10,g-o),O=O6e(i/M);2*i>=(2*O+1)*M&&(O+=1),O>=MX(10,o+1)&&(O/=10,g+=1),a=CX(O)}return o!==0&&(a=RX(a,0,1)+"."+RX(a,1)),g===0?(x="+",E="0"):(x=g>0?"+":"-",E=CX(M6e(g))),a+="e"+x+E,c+a}})});var BX=S(()=>{"use strict";var z6e=K(),sO=Ze(),N6e=Wr(),B6e=Ny(),j6e=My(),DX=Xe(),U6e=RangeError,zX=String,NX=Math.floor,oO=sO(j6e),LX=sO("".slice),Uy=sO(1 .toFixed),Fp=function(e,t,i){return t===0?i:t%2===1?Fp(e,t-1,i*e):Fp(e*e,t/2,i)},V6e=function(e){for(var t=0,i=e;i>=4096;)t+=12,i/=4096;for(;i>=2;)t+=1,i/=2;return t},Lp=function(e,t,i){for(var o=-1,c=i;++o<6;)c+=t*e[o],e[o]=c%1e7,c=NX(c/1e7)},aO=function(e,t){for(var i=6,o=0;--i>=0;)o+=e[i],e[i]=NX(o/t),o=o%t*1e7},FX=function(e){for(var t=6,i="";--t>=0;)if(i!==""||t===0||e[t]!==0){var o=zX(e[t]);i=i===""?o:i+oO("0",7-o.length)+o}return i},$6e=DX(function(){return Uy(8e-5,3)!=="0.000"||Uy(.9,0)!=="1"||Uy(1.255,2)!=="1.25"||Uy(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!DX(function(){Uy({})});z6e({target:"Number",proto:!0,forced:$6e},{toFixed:function(t){var i=B6e(this),o=N6e(t),c=[0,0,0,0,0,0],a="",g="0",x,E,P,M;if(o<0||o>20)throw new U6e("Incorrect fraction digits");if(i!==i)return"NaN";if(i<=-1e21||i>=1e21)return zX(i);if(i<0&&(a="-",i=-i),i>1e-21)if(x=V6e(i*Fp(2,69,1))-69,E=x<0?i*Fp(2,-x,1):i/Fp(2,x,1),E*=4503599627370496,x=52-x,x>0){for(Lp(c,0,E),P=o;P>=7;)Lp(c,1e7,0),P-=7;for(Lp(c,Fp(10,P,1),0),P=x-1;P>=23;)aO(c,1<<23),P-=23;aO(c,1<<P),Lp(c,1,1),aO(c,2),g=FX(c)}else Lp(c,0,E),Lp(c,1<<-x,0),g=FX(c)+oO("0",o);return o>0?(M=g.length,g=a+(M<=o?"0."+oO("0",o-M)+g:LX(g,0,M-o)+"."+LX(g,M-o))):g=a+g,g}})});var VX=S(()=>{"use strict";var W6e=K(),G6e=Ze(),jX=Xe(),UX=Ny(),Pw=G6e(1 .toPrecision),Z6e=jX(function(){return Pw(1,void 0)!=="1"})||!jX(function(){Pw({})});W6e({target:"Number",proto:!0,forced:Z6e},{toPrecision:function(t){return t===void 0?Pw(UX(this)):Pw(UX(this),t)}})});var uO=S((GFt,GX)=>{"use strict";var $X=At(),K6e=Ze(),H6e=at(),X6e=Xe(),lO=Qh(),J6e=ly(),Y6e=ey(),Q6e=Qt(),eVe=Vl(),zp=Object.assign,WX=Object.defineProperty,tVe=K6e([].concat);GX.exports=!zp||X6e(function(){if($X&&zp({b:1},zp(WX({},"a",{enumerable:!0,get:function(){WX(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},i=Symbol("assign detection"),o="abcdefghijklmnopqrst";return e[i]=7,o.split("").forEach(function(c){t[c]=c}),zp({},e)[i]!==7||lO(zp({},t)).join("")!==o})?function(t,i){for(var o=Q6e(t),c=arguments.length,a=1,g=J6e.f,x=Y6e.f;c>a;)for(var E=eVe(arguments[a++]),P=g?tVe(lO(E),g(E)):lO(E),M=P.length,O=0,z;M>O;)z=P[O++],(!$X||H6e(x,E,z))&&(o[z]=E[z]);return o}:zp});var KX=S(()=>{"use strict";var rVe=K(),ZX=uO();rVe({target:"Object",stat:!0,arity:2,forced:Object.assign!==ZX},{assign:ZX})});var HX=S(()=>{"use strict";var iVe=K(),nVe=At(),aVe=bi();iVe({target:"Object",stat:!0,sham:!nVe},{create:aVe})});var Vy=S((JFt,JX)=>{"use strict";var oVe=fr(),sVe=nt(),lVe=Xe(),XX=ew();JX.exports=oVe||!lVe(function(){if(!(XX&&XX<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete sVe[e]}})});var YX=S(()=>{"use strict";var uVe=K(),cVe=At(),hVe=Vy(),dVe=kt(),fVe=Qt(),pVe=Or();cVe&&uVe({target:"Object",proto:!0,forced:hVe},{__defineGetter__:function(t,i){pVe.f(fVe(this),t,{get:dVe(i),enumerable:!0,configurable:!0})}})});var eJ=S(()=>{"use strict";var mVe=K(),vVe=At(),QX=T1().f;mVe({target:"Object",stat:!0,forced:Object.defineProperties!==QX,sham:!vVe},{defineProperties:QX})});var rJ=S(()=>{"use strict";var gVe=K(),yVe=At(),tJ=Or().f;gVe({target:"Object",stat:!0,forced:Object.defineProperty!==tJ,sham:!yVe},{defineProperty:tJ})});var iJ=S(()=>{"use strict";var _Ve=K(),xVe=At(),bVe=Vy(),wVe=kt(),SVe=Qt(),TVe=Or();xVe&&_Ve({target:"Object",proto:!0,forced:bVe},{__defineSetter__:function(t,i){TVe.f(SVe(this),t,{set:wVe(i),enumerable:!0,configurable:!0})}})});var cO=S((ozt,lJ)=>{"use strict";var aJ=At(),EVe=Xe(),oJ=Ze(),AVe=Vi(),qVe=Qh(),IVe=ji(),PVe=ey().f,sJ=oJ(PVe),CVe=oJ([].push),MVe=aJ&&EVe(function(){var e=Object.create(null);return e[2]=2,!sJ(e,2)}),nJ=function(e){return function(t){for(var i=IVe(t),o=qVe(i),c=MVe&&AVe(i)===null,a=o.length,g=0,x=[],E;a>g;)E=o[g++],(!aJ||(c?E in i:sJ(i,E)))&&CVe(x,e?[E,i[E]]:i[E]);return x}};lJ.exports={entries:nJ(!0),values:nJ(!1)}});var uJ=S(()=>{"use strict";var RVe=K(),OVe=cO().entries;RVe({target:"Object",stat:!0},{entries:function(t){return OVe(t)}})});var cJ=S(()=>{"use strict";var kVe=K(),DVe=eu(),LVe=Xe(),FVe=Pt(),zVe=Ac().onFreeze,hO=Object.freeze,NVe=LVe(function(){hO(1)});kVe({target:"Object",stat:!0,forced:NVe,sham:!DVe},{freeze:function(t){return hO&&FVe(t)?hO(zVe(t)):t}})});var hJ=S(()=>{"use strict";var BVe=K(),jVe=si(),UVe=Ro();BVe({target:"Object",stat:!0},{fromEntries:function(t){var i={};return jVe(t,function(o,c){UVe(i,o,c)},{AS_ENTRIES:!0}),i}})});var pJ=S(()=>{"use strict";var VVe=K(),$Ve=Xe(),WVe=ji(),dJ=fn().f,fJ=At(),GVe=!fJ||$Ve(function(){dJ(1)});VVe({target:"Object",stat:!0,forced:GVe,sham:!fJ},{getOwnPropertyDescriptor:function(t,i){return dJ(WVe(t),i)}})});var mJ=S(()=>{"use strict";var ZVe=K(),KVe=At(),HVe=x1(),XVe=ji(),JVe=fn(),YVe=Ro();ZVe({target:"Object",stat:!0,sham:!KVe},{getOwnPropertyDescriptors:function(t){for(var i=XVe(t),o=JVe.f,c=HVe(i),a={},g=0,x,E;c.length>g;)E=o(i,x=c[g++]),E!==void 0&&YVe(a,x,E);return a}})});var vJ=S(()=>{"use strict";var QVe=K(),e8e=Xe(),t8e=q1().f,r8e=e8e(function(){return!Object.getOwnPropertyNames(1)});QVe({target:"Object",stat:!0,forced:r8e},{getOwnPropertyNames:t8e})});var yJ=S(()=>{"use strict";var i8e=K(),n8e=Xe(),a8e=Qt(),gJ=Vi(),o8e=B1(),s8e=n8e(function(){gJ(1)});i8e({target:"Object",stat:!0,forced:s8e,sham:!o8e},{getPrototypeOf:function(t){return gJ(a8e(t))}})});var dO=S(()=>{"use strict";var l8e=K(),u8e=Ot(),c8e=Ze(),h8e=kt(),d8e=Fr(),f8e=Ws(),p8e=si(),m8e=Xe(),_J=Object.groupBy,v8e=u8e("Object","create"),g8e=c8e([].push),y8e=!_J||m8e(function(){return _J("ab",function(e){return e}).a.length!==1});l8e({target:"Object",stat:!0,forced:y8e},{groupBy:function(t,i){d8e(t),h8e(i);var o=v8e(null),c=0;return p8e(t,function(a){var g=f8e(i(a,c++));g in o?g8e(o[g],a):o[g]=[a]}),o}})});var fO=S(()=>{"use strict";var _8e=K(),x8e=Ht();_8e({target:"Object",stat:!0},{hasOwn:x8e})});var Cw=S((Ezt,xJ)=>{"use strict";xJ.exports=Object.is||function(t,i){return t===i?t!==0||1/t===1/i:t!==t&&i!==i}});var bJ=S(()=>{"use strict";var b8e=K(),w8e=Cw();b8e({target:"Object",stat:!0},{is:w8e})});var SJ=S(()=>{"use strict";var S8e=K(),wJ=xw();S8e({target:"Object",stat:!0,forced:Object.isExtensible!==wJ},{isExtensible:wJ})});var EJ=S(()=>{"use strict";var T8e=K(),E8e=Xe(),A8e=Pt(),q8e=Mn(),TJ=yw(),pO=Object.isFrozen,I8e=TJ||E8e(function(){pO(1)});T8e({target:"Object",stat:!0,forced:I8e},{isFrozen:function(t){return!A8e(t)||TJ&&q8e(t)==="ArrayBuffer"?!0:pO?pO(t):!1}})});var qJ=S(()=>{"use strict";var P8e=K(),C8e=Xe(),M8e=Pt(),R8e=Mn(),AJ=yw(),mO=Object.isSealed,O8e=AJ||C8e(function(){mO(1)});P8e({target:"Object",stat:!0,forced:O8e},{isSealed:function(t){return!M8e(t)||AJ&&R8e(t)==="ArrayBuffer"?!0:mO?mO(t):!1}})});var PJ=S(()=>{"use strict";var k8e=K(),D8e=Qt(),IJ=Qh(),L8e=Xe(),F8e=L8e(function(){IJ(1)});k8e({target:"Object",stat:!0,forced:F8e},{keys:function(t){return IJ(D8e(t))}})});var CJ=S(()=>{"use strict";var z8e=K(),N8e=At(),B8e=Vy(),j8e=Qt(),U8e=Ws(),V8e=Vi(),$8e=fn().f;N8e&&z8e({target:"Object",proto:!0,forced:B8e},{__lookupGetter__:function(t){var i=j8e(this),o=U8e(t),c;do if(c=$8e(i,o))return c.get;while(i=V8e(i))}})});var MJ=S(()=>{"use strict";var W8e=K(),G8e=At(),Z8e=Vy(),K8e=Qt(),H8e=Ws(),X8e=Vi(),J8e=fn().f;G8e&&W8e({target:"Object",proto:!0,forced:Z8e},{__lookupSetter__:function(t){var i=K8e(this),o=H8e(t),c;do if(c=J8e(i,o))return c.set;while(i=X8e(i))}})});var RJ=S(()=>{"use strict";var Y8e=K(),Q8e=Pt(),e$e=Ac().onFreeze,t$e=eu(),r$e=Xe(),vO=Object.preventExtensions,i$e=r$e(function(){vO(1)});Y8e({target:"Object",stat:!0,forced:i$e,sham:!t$e},{preventExtensions:function(t){return vO&&Q8e(t)?vO(e$e(t)):t}})});var FJ=S(()=>{"use strict";var n$e=At(),a$e=Gr(),o$e=Pt(),s$e=hC(),l$e=Qt(),u$e=Fr(),OJ=Object.getPrototypeOf,kJ=Object.setPrototypeOf,DJ=Object.prototype,LJ="__proto__";if(n$e&&OJ&&kJ&&!(LJ in DJ))try{a$e(DJ,LJ,{configurable:!0,get:function(){return OJ(l$e(this))},set:function(t){var i=u$e(this);s$e(t)&&o$e(i)&&kJ(i,t)}})}catch(e){}});var zJ=S(()=>{"use strict";var c$e=K(),h$e=Pt(),d$e=Ac().onFreeze,f$e=eu(),p$e=Xe(),gO=Object.seal,m$e=p$e(function(){gO(1)});c$e({target:"Object",stat:!0,forced:m$e,sham:!f$e},{seal:function(t){return gO&&h$e(t)?gO(d$e(t)):t}})});var NJ=S(()=>{"use strict";var v$e=K(),g$e=Mo();v$e({target:"Object",stat:!0},{setPrototypeOf:g$e})});var jJ=S((Kzt,BJ)=>{"use strict";var y$e=w1(),_$e=pa();BJ.exports=y$e?{}.toString:function(){return"[object "+_$e(this)+"]"}});var UJ=S(()=>{"use strict";var x$e=w1(),b$e=wr(),w$e=jJ();x$e||b$e(Object.prototype,"toString",w$e,{unsafe:!0})});var VJ=S(()=>{"use strict";var S$e=K(),T$e=cO().values;S$e({target:"Object",stat:!0},{values:function(t){return T$e(t)}})});var WJ=S(()=>{"use strict";var E$e=K(),$J=tO();E$e({global:!0,forced:parseFloat!==$J},{parseFloat:$J})});var ZJ=S(()=>{"use strict";var A$e=K(),GJ=rO();A$e({global:!0,forced:parseInt!==GJ},{parseInt:GJ})});var $y=S((iNt,KJ)=>{"use strict";var q$e=hs(),I$e=sc(),P$e=TypeError;KJ.exports=function(e){if(q$e(e))return e;throw new P$e(I$e(e)+" is not a constructor")}});var Wy=S((nNt,XJ)=>{"use strict";var HJ=ot(),C$e=$y(),M$e=Da(),R$e=Rt(),O$e=R$e("species");XJ.exports=function(e,t){var i=HJ(e).constructor,o;return i===void 0||M$e(o=HJ(i)[O$e])?t:C$e(o)}});var oo=S((aNt,JJ)=>{"use strict";var k$e=TypeError;JJ.exports=function(e,t){if(e<t)throw new k$e("Not enough arguments");return e}});var yO=S((oNt,YJ)=>{"use strict";var D$e=as();YJ.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(D$e)});var Ky=S((sNt,sY)=>{"use strict";var so=nt(),L$e=On(),F$e=qr(),QJ=Zt(),z$e=Ht(),oY=Xe(),eY=j2(),N$e=Fa(),tY=iy(),B$e=oo(),j$e=yO(),U$e=od(),TO=so.setImmediate,EO=so.clearImmediate,V$e=so.process,_O=so.Dispatch,$$e=so.Function,rY=so.MessageChannel,W$e=so.String,xO=0,Gy={},iY="onreadystatechange",Zy,hd,bO,wO;oY(function(){Zy=so.location});var AO=function(e){if(z$e(Gy,e)){var t=Gy[e];delete Gy[e],t()}},SO=function(e){return function(){AO(e)}},nY=function(e){AO(e.data)},aY=function(e){so.postMessage(W$e(e),Zy.protocol+"//"+Zy.host)};(!TO||!EO)&&(TO=function(t){B$e(arguments.length,1);var i=QJ(t)?t:$$e(t),o=N$e(arguments,1);return Gy[++xO]=function(){L$e(i,void 0,o)},hd(xO),xO},EO=function(t){delete Gy[t]},U$e?hd=function(e){V$e.nextTick(SO(e))}:_O&&_O.now?hd=function(e){_O.now(SO(e))}:rY&&!j$e?(bO=new rY,wO=bO.port2,bO.port1.onmessage=nY,hd=F$e(wO.postMessage,wO)):so.addEventListener&&QJ(so.postMessage)&&!so.importScripts&&Zy&&Zy.protocol!=="file:"&&!oY(aY)?(hd=aY,so.addEventListener("message",nY,!1)):iY in tY("script")?hd=function(e){eY.appendChild(tY("script"))[iY]=function(){eY.removeChild(this),AO(e)}}:hd=function(e){setTimeout(SO(e),0)});sY.exports={set:TO,clear:EO}});var qO=S((lNt,uY)=>{"use strict";var lY=nt(),G$e=At(),Z$e=Object.getOwnPropertyDescriptor;uY.exports=function(e){if(!G$e)return lY[e];var t=Z$e(lY,e);return t&&t.value}});var IO=S((uNt,hY)=>{"use strict";var cY=function(){this.head=null,this.tail=null};cY.prototype={add:function(e){var t={item:e,next:null},i=this.tail;i?i.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};hY.exports=cY});var fY=S((cNt,dY)=>{"use strict";var K$e=as();dY.exports=/ipad|iphone|ipod/i.test(K$e)&&typeof Pebble!="undefined"});var mY=S((hNt,pY)=>{"use strict";var H$e=as();pY.exports=/web0s(?!.*chrome)/i.test(H$e)});var kO=S((dNt,bY)=>{"use strict";var Bp=nt(),X$e=qO(),vY=qr(),PO=Ky().set,J$e=IO(),Y$e=yO(),Q$e=fY(),eWe=mY(),CO=od(),gY=Bp.MutationObserver||Bp.WebKitMutationObserver,yY=Bp.document,_Y=Bp.process,Mw=Bp.Promise,OO=X$e("queueMicrotask"),Np,MO,RO,Rw,xY;OO||(Hy=new J$e,Xy=function(){var e,t;for(CO&&(e=_Y.domain)&&e.exit();t=Hy.get();)try{t()}catch(i){throw Hy.head&&Np(),i}e&&e.enter()},!Y$e&&!CO&&!eWe&&gY&&yY?(MO=!0,RO=yY.createTextNode(""),new gY(Xy).observe(RO,{characterData:!0}),Np=function(){RO.data=MO=!MO}):!Q$e&&Mw&&Mw.resolve?(Rw=Mw.resolve(void 0),Rw.constructor=Mw,xY=vY(Rw.then,Rw),Np=function(){xY(Xy)}):CO?Np=function(){_Y.nextTick(Xy)}:(PO=vY(PO,Bp),Np=function(){PO(Xy)}),OO=function(e){Hy.head||Np(),Hy.add(e)});var Hy,Xy;bY.exports=OO});var DO=S((fNt,wY)=>{"use strict";wY.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(i){}}});var qc=S((pNt,SY)=>{"use strict";SY.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var dd=S((mNt,TY)=>{"use strict";var tWe=nt();TY.exports=tWe.Promise});var jp=S((vNt,IY)=>{"use strict";var rWe=nt(),Jy=dd(),iWe=Zt(),nWe=_p(),aWe=ny(),oWe=Rt(),EY=Ay(),sWe=fr(),LO=ss(),AY=Jy&&Jy.prototype,lWe=oWe("species"),FO=!1,qY=iWe(rWe.PromiseRejectionEvent),uWe=nWe("Promise",function(){var e=aWe(Jy),t=e!==String(Jy);if(!t&&LO===66||sWe&&!(AY.catch&&AY.finally))return!0;if(!LO||LO<51||!/native code/.test(e)){var i=new Jy(function(a){a(1)}),o=function(a){a(function(){},function(){})},c=i.constructor={};if(c[lWe]=o,FO=i.then(function(){})instanceof o,!FO)return!0}return!t&&(EY==="BROWSER"||EY==="DENO")&&!qY});IY.exports={CONSTRUCTOR:uWe,REJECTION_EVENT:qY,SUBCLASSING:FO}});var Ys=S((gNt,CY)=>{"use strict";var PY=kt(),cWe=TypeError,hWe=function(e){var t,i;this.promise=new e(function(o,c){if(t!==void 0||i!==void 0)throw new cWe("Bad Promise constructor");t=o,i=c}),this.resolve=PY(t),this.reject=PY(i)};CY.exports.f=function(e){return new hWe(e)}});var HY=S(()=>{"use strict";var dWe=K(),fWe=fr(),Lw=od(),Ic=nt(),Wp=at(),MY=wr(),RY=Mo(),pWe=ma(),mWe=_c(),vWe=kt(),Dw=Zt(),gWe=Pt(),yWe=Yn(),_We=Wy(),FY=Ky().set,UO=kO(),xWe=DO(),bWe=qc(),wWe=IO(),zY=yr(),Fw=dd(),VO=jp(),NY=Ys(),zw="Promise",BY=VO.CONSTRUCTOR,SWe=VO.REJECTION_EVENT,TWe=VO.SUBCLASSING,zO=zY.getterFor(zw),EWe=zY.set,Up=Fw&&Fw.prototype,fd=Fw,Ow=Up,jY=Ic.TypeError,NO=Ic.document,$O=Ic.process,BO=NY.f,AWe=BO,qWe=!!(NO&&NO.createEvent&&Ic.dispatchEvent),UY="unhandledrejection",IWe="rejectionhandled",OY=0,VY=1,PWe=2,WO=1,$Y=2,kw,kY,CWe,DY,WY=function(e){var t;return gWe(e)&&Dw(t=e.then)?t:!1},GY=function(e,t){var i=t.value,o=t.state===VY,c=o?e.ok:e.fail,a=e.resolve,g=e.reject,x=e.domain,E,P,M;try{c?(o||(t.rejection===$Y&&RWe(t),t.rejection=WO),c===!0?E=i:(x&&x.enter(),E=c(i),x&&(x.exit(),M=!0)),E===e.promise?g(new jY("Promise-chain cycle")):(P=WY(E))?Wp(P,E,a,g):a(E)):g(i)}catch(O){x&&!M&&x.exit(),g(O)}},ZY=function(e,t){e.notified||(e.notified=!0,UO(function(){for(var i=e.reactions,o;o=i.get();)GY(o,e);e.notified=!1,t&&!e.rejection&&MWe(e)}))},KY=function(e,t,i){var o,c;qWe?(o=NO.createEvent("Event"),o.promise=t,o.reason=i,o.initEvent(e,!1,!0),Ic.dispatchEvent(o)):o={promise:t,reason:i},!SWe&&(c=Ic["on"+e])?c(o):e===UY&&xWe("Unhandled promise rejection",i)},MWe=function(e){Wp(FY,Ic,function(){var t=e.facade,i=e.value,o=LY(e),c;if(o&&(c=bWe(function(){Lw?$O.emit("unhandledRejection",i,t):KY(UY,t,i)}),e.rejection=Lw||LY(e)?$Y:WO,c.error))throw c.value})},LY=function(e){return e.rejection!==WO&&!e.parent},RWe=function(e){Wp(FY,Ic,function(){var t=e.facade;Lw?$O.emit("rejectionHandled",t):KY(IWe,t,e.value)})},Vp=function(e,t,i){return function(o){e(t,o,i)}},$p=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=PWe,ZY(e,!0))},jO=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw new jY("Promise can't be resolved itself");var o=WY(t);o?UO(function(){var c={done:!1};try{Wp(o,t,Vp(jO,c,e),Vp($p,c,e))}catch(a){$p(c,a,e)}}):(e.value=t,e.state=VY,ZY(e,!1))}catch(c){$p({done:!1},c,e)}}};if(BY&&(fd=function(t){yWe(this,Ow),vWe(t),Wp(kw,this);var i=zO(this);try{t(Vp(jO,i),Vp($p,i))}catch(o){$p(i,o)}},Ow=fd.prototype,kw=function(t){EWe(this,{type:zw,done:!1,notified:!1,parent:!1,reactions:new wWe,rejection:!1,state:OY,value:null})},kw.prototype=MY(Ow,"then",function(t,i){var o=zO(this),c=BO(_We(this,fd));return o.parent=!0,c.ok=Dw(t)?t:!0,c.fail=Dw(i)&&i,c.domain=Lw?$O.domain:void 0,o.state===OY?o.reactions.add(c):UO(function(){GY(c,o)}),c.promise}),kY=function(){var e=new kw,t=zO(e);this.promise=e,this.resolve=Vp(jO,t),this.reject=Vp($p,t)},NY.f=BO=function(e){return e===fd||e===CWe?new kY(e):AWe(e)},!fWe&&Dw(Fw)&&Up!==Object.prototype)){DY=Up.then,TWe||MY(Up,"then",function(t,i){var o=this;return new fd(function(c,a){Wp(DY,o,c,a)}).then(t,i)},{unsafe:!0});try{delete Up.constructor}catch(e){}RY&&RY(Up,Ow)}dWe({global:!0,constructor:!0,wrap:!0,forced:BY},{Promise:fd});pWe(fd,zw,!1,!0);mWe(zw)});var Yy=S((xNt,XY)=>{"use strict";var OWe=dd(),kWe=xy(),DWe=jp().CONSTRUCTOR;XY.exports=DWe||!kWe(function(e){OWe.all(e).then(void 0,function(){})})});var JY=S(()=>{"use strict";var LWe=K(),FWe=at(),zWe=kt(),NWe=Ys(),BWe=qc(),jWe=si(),UWe=Yy();LWe({target:"Promise",stat:!0,forced:UWe},{all:function(t){var i=this,o=NWe.f(i),c=o.resolve,a=o.reject,g=BWe(function(){var x=zWe(i.resolve),E=[],P=0,M=1;jWe(t,function(O){var z=P++,oe=!1;M++,FWe(x,i,O).then(function(we){oe||(oe=!0,E[z]=we,--M||c(E))},a)}),--M||c(E)});return g.error&&a(g.value),o.promise}})});var QY=S(()=>{"use strict";var VWe=K(),$We=fr(),WWe=jp().CONSTRUCTOR,ZO=dd(),GWe=Ot(),ZWe=Zt(),KWe=wr(),YY=ZO&&ZO.prototype;VWe({target:"Promise",proto:!0,forced:WWe,real:!0},{catch:function(e){return this.then(void 0,e)}});!$We&&ZWe(ZO)&&(GO=GWe("Promise").prototype.catch,YY.catch!==GO&&KWe(YY,"catch",GO,{unsafe:!0}));var GO});var eQ=S(()=>{"use strict";var HWe=K(),XWe=at(),JWe=kt(),YWe=Ys(),QWe=qc(),eGe=si(),tGe=Yy();HWe({target:"Promise",stat:!0,forced:tGe},{race:function(t){var i=this,o=YWe.f(i),c=o.reject,a=QWe(function(){var g=JWe(i.resolve);eGe(t,function(x){XWe(g,i,x).then(o.resolve,c)})});return a.error&&c(a.value),o.promise}})});var tQ=S(()=>{"use strict";var rGe=K(),iGe=Ys(),nGe=jp().CONSTRUCTOR;rGe({target:"Promise",stat:!0,forced:nGe},{reject:function(t){var i=iGe.f(this),o=i.reject;return o(t),i.promise}})});var KO=S((PNt,rQ)=>{"use strict";var aGe=ot(),oGe=Pt(),sGe=Ys();rQ.exports=function(e,t){if(aGe(e),oGe(t)&&t.constructor===e)return t;var i=sGe.f(e),o=i.resolve;return o(t),i.promise}});var aQ=S(()=>{"use strict";var lGe=K(),uGe=Ot(),iQ=fr(),cGe=dd(),nQ=jp().CONSTRUCTOR,hGe=KO(),dGe=uGe("Promise"),fGe=iQ&&!nQ;lGe({target:"Promise",stat:!0,forced:iQ||nQ},{resolve:function(t){return hGe(fGe&&this===dGe?cGe:this,t)}})});var oQ=S(()=>{"use strict";HY();JY();QY();eQ();tQ();aQ()});var HO=S(()=>{"use strict";var pGe=K(),mGe=at(),vGe=kt(),gGe=Ys(),yGe=qc(),_Ge=si(),xGe=Yy();pGe({target:"Promise",stat:!0,forced:xGe},{allSettled:function(t){var i=this,o=gGe.f(i),c=o.resolve,a=o.reject,g=yGe(function(){var x=vGe(i.resolve),E=[],P=0,M=1;_Ge(t,function(O){var z=P++,oe=!1;M++,mGe(x,i,O).then(function(we){oe||(oe=!0,E[z]={status:"fulfilled",value:we},--M||c(E))},function(we){oe||(oe=!0,E[z]={status:"rejected",reason:we},--M||c(E))})}),--M||c(E)});return g.error&&a(g.value),o.promise}})});var XO=S(()=>{"use strict";var bGe=K(),wGe=at(),SGe=kt(),TGe=Ot(),EGe=Ys(),AGe=qc(),qGe=si(),IGe=Yy(),sQ="No one promise resolved";bGe({target:"Promise",stat:!0,forced:IGe},{any:function(t){var i=this,o=TGe("AggregateError"),c=EGe.f(i),a=c.resolve,g=c.reject,x=AGe(function(){var E=SGe(i.resolve),P=[],M=0,O=1,z=!1;qGe(t,function(oe){var we=M++,ye=!1;O++,wGe(E,i,oe).then(function(te){ye||z||(z=!0,a(te))},function(te){ye||z||(ye=!0,P[we]=te,--O||g(new o(P,sQ)))})}),--O||g(new o(P,sQ))});return x.error&&g(x.value),c.promise}})});var hQ=S(()=>{"use strict";var PGe=K(),CGe=fr(),Nw=dd(),MGe=Xe(),uQ=Ot(),cQ=Zt(),RGe=Wy(),lQ=KO(),OGe=wr(),YO=Nw&&Nw.prototype,kGe=!!Nw&&MGe(function(){YO.finally.call({then:function(){}},function(){})});PGe({target:"Promise",proto:!0,real:!0,forced:kGe},{finally:function(e){var t=RGe(this,uQ("Promise")),i=cQ(e);return this.then(i?function(o){return lQ(t,e()).then(function(){return o})}:e,i?function(o){return lQ(t,e()).then(function(){throw o})}:e)}});!CGe&&cQ(Nw)&&(JO=uQ("Promise").prototype.finally,YO.finally!==JO&&OGe(YO,"finally",JO,{unsafe:!0}));var JO});var ek=S(()=>{"use strict";var DGe=K(),LGe=nt(),FGe=On(),zGe=Fa(),NGe=Ys(),BGe=kt(),fQ=qc(),QO=LGe.Promise,dQ=!1,jGe=!QO||!QO.try||fQ(function(){QO.try(function(e){dQ=e===8},8)}).error||!dQ;DGe({target:"Promise",stat:!0,forced:jGe},{try:function(e){var t=arguments.length>1?zGe(arguments,1):[],i=NGe.f(this),o=fQ(function(){return FGe(BGe(e),void 0,t)});return(o.error?i.reject:i.resolve)(o.value),i.promise}})});var tk=S(()=>{"use strict";var UGe=K(),VGe=Ys();UGe({target:"Promise",stat:!0},{withResolvers:function(){var t=VGe.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var pQ=S(()=>{"use strict";var $Ge=K(),WGe=On(),GGe=kt(),ZGe=ot(),KGe=Xe(),HGe=!KGe(function(){Reflect.apply(function(){})});$Ge({target:"Reflect",stat:!0,forced:HGe},{apply:function(t,i,o){return WGe(GGe(t),i,ZGe(o))}})});var bQ=S(()=>{"use strict";var XGe=K(),JGe=Ot(),rk=On(),YGe=YM(),mQ=$y(),QGe=ot(),vQ=Pt(),eZe=bi(),yQ=Xe(),ik=JGe("Reflect","construct"),tZe=Object.prototype,rZe=[].push,_Q=yQ(function(){function e(){}return!(ik(function(){},[],e)instanceof e)}),xQ=!yQ(function(){ik(function(){})}),gQ=_Q||xQ;XGe({target:"Reflect",stat:!0,forced:gQ,sham:gQ},{construct:function(t,i){mQ(t),QGe(i);var o=arguments.length<3?t:mQ(arguments[2]);if(xQ&&!_Q)return ik(t,i,o);if(t===o){switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3])}var c=[null];return rk(rZe,c,i),new(rk(YGe,t,c))}var a=o.prototype,g=eZe(vQ(a)?a:tZe),x=rk(t,g,i);return vQ(x)?x:g}})});var TQ=S(()=>{"use strict";var iZe=K(),nZe=At(),wQ=ot(),aZe=Ws(),SQ=Or(),oZe=Xe(),sZe=oZe(function(){Reflect.defineProperty(SQ.f({},1,{value:1}),1,{value:2})});iZe({target:"Reflect",stat:!0,forced:sZe,sham:!nZe},{defineProperty:function(t,i,o){wQ(t);var c=aZe(i);wQ(o);try{return SQ.f(t,c,o),!0}catch(a){return!1}}})});var EQ=S(()=>{"use strict";var lZe=K(),uZe=ot(),cZe=fn().f;lZe({target:"Reflect",stat:!0},{deleteProperty:function(t,i){var o=cZe(uZe(t),i);return o&&!o.configurable?!1:delete t[i]}})});var nk=S((YNt,qQ)=>{"use strict";var AQ=Ht();qQ.exports=function(e){return e!==void 0&&(AQ(e,"value")||AQ(e,"writable"))}});var PQ=S(()=>{"use strict";var hZe=K(),dZe=at(),fZe=Pt(),pZe=ot(),mZe=nk(),vZe=fn(),gZe=Vi();function IQ(e,t){var i=arguments.length<3?e:arguments[2],o,c;if(pZe(e)===i)return e[t];if(o=vZe.f(e,t),o)return mZe(o)?o.value:o.get===void 0?void 0:dZe(o.get,i);if(fZe(c=gZe(e)))return IQ(c,t,i)}hZe({target:"Reflect",stat:!0},{get:IQ})});var CQ=S(()=>{"use strict";var yZe=K(),_Ze=At(),xZe=ot(),bZe=fn();yZe({target:"Reflect",stat:!0,sham:!_Ze},{getOwnPropertyDescriptor:function(t,i){return bZe.f(xZe(t),i)}})});var MQ=S(()=>{"use strict";var wZe=K(),SZe=ot(),TZe=Vi(),EZe=B1();wZe({target:"Reflect",stat:!0,sham:!EZe},{getPrototypeOf:function(t){return TZe(SZe(t))}})});var RQ=S(()=>{"use strict";var AZe=K();AZe({target:"Reflect",stat:!0},{has:function(t,i){return i in t}})});var OQ=S(()=>{"use strict";var qZe=K(),IZe=ot(),PZe=xw();qZe({target:"Reflect",stat:!0},{isExtensible:function(t){return IZe(t),PZe(t)}})});var kQ=S(()=>{"use strict";var CZe=K(),MZe=x1();CZe({target:"Reflect",stat:!0},{ownKeys:MZe})});var DQ=S(()=>{"use strict";var RZe=K(),OZe=Ot(),kZe=ot(),DZe=eu();RZe({target:"Reflect",stat:!0,sham:!DZe},{preventExtensions:function(t){kZe(t);try{var i=OZe("Object","preventExtensions");return i&&i(t),!0}catch(o){return!1}}})});var BQ=S(()=>{"use strict";var LZe=K(),FZe=at(),zZe=ot(),LQ=Pt(),NZe=nk(),BZe=Xe(),ak=Or(),FQ=fn(),jZe=Vi(),zQ=ka();function NQ(e,t,i){var o=arguments.length<4?e:arguments[3],c=FQ.f(zZe(e),t),a,g,x;if(!c){if(LQ(g=jZe(e)))return NQ(g,t,i,o);c=zQ(0)}if(NZe(c)){if(c.writable===!1||!LQ(o))return!1;if(a=FQ.f(o,t)){if(a.get||a.set||a.writable===!1)return!1;a.value=i,ak.f(o,t,a)}else ak.f(o,t,zQ(0,i))}else{if(x=c.set,x===void 0)return!1;FZe(x,o,i)}return!0}var UZe=BZe(function(){var e=function(){},t=ak.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});LZe({target:"Reflect",stat:!0,forced:UZe},{set:NQ})});var UQ=S(()=>{"use strict";var VZe=K(),$Ze=ot(),WZe=dC(),jQ=Mo();jQ&&VZe({target:"Reflect",stat:!0},{setPrototypeOf:function(t,i){$Ze(t),WZe(i);try{return jQ(t,i),!0}catch(o){return!1}}})});var VQ=S(()=>{"use strict";var GZe=K(),ZZe=nt(),KZe=ma();GZe({global:!0},{Reflect:{}});KZe(ZZe.Reflect,"Reflect",!0)});var Qy=S((_Bt,$Q)=>{"use strict";var HZe=Pt(),XZe=Mn(),JZe=Rt(),YZe=JZe("match");$Q.exports=function(e){var t;return HZe(e)&&((t=e[YZe])!==void 0?!!t:XZe(e)==="RegExp")}});var Bw=S((xBt,WQ)=>{"use strict";var QZe=ot();WQ.exports=function(){var e=QZe(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var Gp=S((bBt,ZQ)=>{"use strict";var e7e=at(),t7e=Ht(),r7e=Rn(),i7e=Bw(),GQ=RegExp.prototype;ZQ.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in GQ)&&!t7e(e,"flags")&&r7e(GQ,e)?e7e(i7e,e):t}});var e_=S((wBt,KQ)=>{"use strict";var ok=Xe(),n7e=nt(),sk=n7e.RegExp,lk=ok(function(){var e=sk("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),a7e=lk||ok(function(){return!sk("a","y").sticky}),o7e=lk||ok(function(){var e=sk("^r","gy");return e.lastIndex=2,e.exec("str")!==null});KQ.exports={BROKEN_CARET:o7e,MISSED_STICKY:a7e,UNSUPPORTED_Y:lk}});var jw=S((SBt,HQ)=>{"use strict";var s7e=Xe(),l7e=nt(),u7e=l7e.RegExp;HQ.exports=s7e(function(){var e=u7e(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var uk=S((TBt,XQ)=>{"use strict";var c7e=Xe(),h7e=nt(),d7e=h7e.RegExp;XQ.exports=c7e(function(){var e=d7e("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var oee=S(()=>{"use strict";var f7e=At(),fk=nt(),t_=Ze(),p7e=_p(),m7e=fc(),v7e=Ui(),g7e=bi(),y7e=uc().f,JQ=Rn(),_7e=Qy(),YQ=Nt(),x7e=Gp(),ree=e_(),b7e=fC(),w7e=wr(),S7e=Xe(),T7e=Ht(),E7e=yr().enforce,A7e=_c(),q7e=Rt(),iee=jw(),nee=uk(),I7e=q7e("match"),Cc=fk.RegExp,Zp=Cc.prototype,P7e=fk.SyntaxError,C7e=t_(Zp.exec),Uw=t_("".charAt),QQ=t_("".replace),eee=t_("".indexOf),tee=t_("".slice),M7e=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,pd=/a/g,ck=/a/g,R7e=new Cc(pd)!==pd,aee=ree.MISSED_STICKY,O7e=ree.UNSUPPORTED_Y,k7e=f7e&&(!R7e||aee||iee||nee||S7e(function(){return ck[I7e]=!1,Cc(pd)!==pd||Cc(ck)===ck||String(Cc(pd,"i"))!=="/a/i"})),D7e=function(e){for(var t=e.length,i=0,o="",c=!1,a;i<=t;i++){if(a=Uw(e,i),a==="\\"){o+=a+Uw(e,++i);continue}!c&&a==="."?o+="[\\s\\S]":(a==="["?c=!0:a==="]"&&(c=!1),o+=a)}return o},L7e=function(e){for(var t=e.length,i=0,o="",c=[],a=g7e(null),g=!1,x=!1,E=0,P="",M;i<=t;i++){if(M=Uw(e,i),M==="\\")M+=Uw(e,++i);else if(M==="]")g=!1;else if(!g)switch(!0){case M==="[":g=!0;break;case M==="(":if(o+=M,tee(e,i+1,i+3)==="?:")continue;C7e(M7e,tee(e,i+1))&&(i+=2,x=!0),E++;continue;case M===">"&&x:if(P===""||T7e(a,P))throw new P7e("Invalid capture group name");a[P]=!0,c[c.length]=[P,E],x=!1,P="";continue}x?P+=M:o+=M}return[o,c]};if(p7e("RegExp",k7e)){for(Pc=function(t,i){var o=JQ(Zp,this),c=_7e(t),a=i===void 0,g=[],x=t,E,P,M,O,z,oe;if(!o&&c&&a&&t.constructor===Pc)return t;if((c||JQ(Zp,t))&&(t=t.source,a&&(i=x7e(x))),t=t===void 0?"":YQ(t),i=i===void 0?"":YQ(i),x=t,iee&&"dotAll"in pd&&(P=!!i&&eee(i,"s")>-1,P&&(i=QQ(i,/s/g,""))),E=i,aee&&"sticky"in pd&&(M=!!i&&eee(i,"y")>-1,M&&O7e&&(i=QQ(i,/y/g,""))),nee&&(O=L7e(t),t=O[0],g=O[1]),z=m7e(Cc(t,i),o?this:Zp,Pc),(P||M||g.length)&&(oe=E7e(z),P&&(oe.dotAll=!0,oe.raw=Pc(D7e(t),E)),M&&(oe.sticky=!0),g.length&&(oe.groups=g)),t!==x)try{v7e(z,"source",x===""?"(?:)":x)}catch(we){}return z},hk=y7e(Cc),dk=0;hk.length>dk;)b7e(Pc,Cc,hk[dk++]);Zp.constructor=Pc,Pc.prototype=Zp,w7e(fk,"RegExp",Pc,{constructor:!0})}var Pc,hk,dk;A7e("RegExp")});var r_=S((qBt,see)=>{"use strict";var F7e=TypeError;see.exports=function(e){if(typeof e=="string")return e;throw new F7e("Argument is not a string")}});var gk=S(()=>{"use strict";var z7e=K(),i_=Ze(),N7e=r_(),B7e=Ht(),lee=Ry().start,j7e=ud(),U7e=Array,uee=RegExp.escape,cee=i_("".charAt),vk=i_("".charCodeAt),V7e=i_(1.1.toString),$7e=i_([].join),dee=/^[0-9a-z]/i,W7e=/^[$()*+./?[\\\]^{|}]/,G7e=RegExp("^[!\"#%&',\\-:;<=>@`~"+j7e+"]"),pk=i_(dee.exec),hee={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},mk=function(e){var t=V7e(vk(e,0),16);return t.length<3?"\\x"+lee(t,2,"0"):"\\u"+lee(t,4,"0")},Z7e=!uee||uee("ab")!=="\\x61b";z7e({target:"RegExp",stat:!0,forced:Z7e},{escape:function(t){N7e(t);for(var i=t.length,o=U7e(i),c=0;c<i;c++){var a=cee(t,c);if(c===0&&pk(dee,a))o[c]=mk(a);else if(B7e(hee,a))o[c]="\\"+hee[a];else if(pk(W7e,a))o[c]="\\"+a;else if(pk(G7e,a))o[c]=mk(a);else{var g=vk(a,0);(g&63488)!==55296?o[c]=a:g>=56320||c+1>=i||(vk(t,c+1)&64512)!==56320?o[c]=mk(a):(o[c]=a,o[++c]=cee(t,c))}}return $7e(o,"")}})});var pee=S(()=>{"use strict";var K7e=At(),H7e=jw(),X7e=Mn(),J7e=Gr(),Y7e=yr().get,fee=RegExp.prototype,Q7e=TypeError;K7e&&H7e&&J7e(fee,"dotAll",{configurable:!0,get:function(){if(this!==fee){if(X7e(this)==="RegExp")return!!Y7e(this).dotAll;throw new Q7e("Incompatible receiver, RegExp required")}}})});var Ww=S((RBt,vee)=>{"use strict";var Kp=at(),$w=Ze(),eKe=Nt(),tKe=Bw(),rKe=e_(),iKe=Wl(),nKe=bi(),aKe=yr().get,oKe=jw(),sKe=uk(),lKe=iKe("native-string-replace",String.prototype.replace),Vw=RegExp.prototype.exec,_k=Vw,uKe=$w("".charAt),cKe=$w("".indexOf),hKe=$w("".replace),yk=$w("".slice),xk=function(){var e=/a/,t=/b*/g;return Kp(Vw,e,"a"),Kp(Vw,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),mee=rKe.BROKEN_CARET,bk=/()??/.exec("")[1]!==void 0,dKe=xk||bk||mee||oKe||sKe;dKe&&(_k=function(t){var i=this,o=aKe(i),c=eKe(t),a=o.raw,g,x,E,P,M,O,z;if(a)return a.lastIndex=i.lastIndex,g=Kp(_k,a,c),i.lastIndex=a.lastIndex,g;var oe=o.groups,we=mee&&i.sticky,ye=Kp(tKe,i),te=i.source,Q=0,ee=c;if(we&&(ye=hKe(ye,"y",""),cKe(ye,"g")===-1&&(ye+="g"),ee=yk(c,i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&uKe(c,i.lastIndex-1)!==`
`)&&(te="(?: "+te+")",ee=" "+ee,Q++),x=new RegExp("^(?:"+te+")",ye)),bk&&(x=new RegExp("^"+te+"$(?!\\s)",ye)),xk&&(E=i.lastIndex),P=Kp(Vw,we?x:i,ee),we?P?(P.input=yk(P.input,Q),P[0]=yk(P[0],Q),P.index=i.lastIndex,i.lastIndex+=P[0].length):i.lastIndex=0:xk&&P&&(i.lastIndex=i.global?P.index+P[0].length:E),bk&&P&&P.length>1&&Kp(lKe,P[0],x,function(){for(M=1;M<arguments.length-2;M++)arguments[M]===void 0&&(P[M]=void 0)}),P&&oe)for(P.groups=O=nKe(null),M=0;M<oe.length;M++)z=oe[M],O[z[0]]=P[z[1]];return P});vee.exports=_k});var Gw=S(()=>{"use strict";var fKe=K(),gee=Ww();fKe({target:"RegExp",proto:!0,forced:/./.exec!==gee},{exec:gee})});var xee=S(()=>{"use strict";var pKe=nt(),mKe=At(),vKe=Gr(),gKe=Bw(),yKe=Xe(),yee=pKe.RegExp,_ee=yee.prototype,_Ke=mKe&&yKe(function(){var e=!0;try{yee(".","d")}catch(E){e=!1}var t={},i="",o=e?"dgimsy":"gimsy",c=function(E,P){Object.defineProperty(t,E,{get:function(){return i+=P,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(a.hasIndices="d");for(var g in a)c(g,a[g]);var x=Object.getOwnPropertyDescriptor(_ee,"flags").get.call(t);return x!==o||i!==o});_Ke&&vKe(_ee,"flags",{configurable:!0,get:gKe})});var wee=S(()=>{"use strict";var xKe=At(),bKe=e_().MISSED_STICKY,wKe=Mn(),SKe=Gr(),TKe=yr().get,bee=RegExp.prototype,EKe=TypeError;xKe&&bKe&&SKe(bee,"sticky",{configurable:!0,get:function(){if(this!==bee){if(wKe(this)==="RegExp")return!!TKe(this).sticky;throw new EKe("Incompatible receiver, RegExp required")}}})});var Eee=S(()=>{"use strict";Gw();var AKe=K(),See=at(),qKe=Zt(),Tee=ot(),IKe=Nt(),PKe=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),CKe=/./.test;AKe({target:"RegExp",proto:!0,forced:!PKe},{test:function(e){var t=Tee(this),i=IKe(e),o=t.exec;if(!qKe(o))return See(CKe,t,i);var c=See(o,t,i);return c===null?!1:(Tee(c),!0)}})});var Pee=S(()=>{"use strict";var MKe=Xh().PROPER,RKe=wr(),OKe=ot(),Aee=Nt(),kKe=Xe(),DKe=Gp(),wk="toString",qee=RegExp.prototype,Iee=qee[wk],LKe=kKe(function(){return Iee.call({source:"a",flags:"b"})!=="/a/b"}),FKe=MKe&&Iee.name!==wk;(LKe||FKe)&&RKe(qee,wk,function(){var t=OKe(this),i=Aee(t.source),o=Aee(DKe(t));return"/"+i+"/"+o},{unsafe:!0})});var Cee=S(()=>{"use strict";var zKe=ky(),NKe=jR();zKe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},NKe)});var Mee=S(()=>{"use strict";Cee()});var vn=S((ZBt,Ree)=>{"use strict";var Sk=Ze(),Zw=Set.prototype;Ree.exports={Set,add:Sk(Zw.add),has:Sk(Zw.has),remove:Sk(Zw.delete),proto:Zw}});var kn=S((KBt,Oee)=>{"use strict";var BKe=vn().has;Oee.exports=function(e){return BKe(e),e}});var ru=S((HBt,kee)=>{"use strict";var jKe=at();kee.exports=function(e,t,i){for(var o=i?e:e.iterator,c=e.next,a,g;!(a=jKe(c,o)).done;)if(g=t(a.value),g!==void 0)return g}});var Ba=S((XBt,Nee)=>{"use strict";var Dee=Ze(),UKe=ru(),Lee=vn(),VKe=Lee.Set,Fee=Lee.proto,$Ke=Dee(Fee.forEach),zee=Dee(Fee.keys),WKe=zee(new VKe).next;Nee.exports=function(e,t,i){return i?UKe({iterator:zee(e),next:WKe},t):$Ke(e,t)}});var Kw=S((JBt,jee)=>{"use strict";var Bee=vn(),GKe=Ba(),ZKe=Bee.Set,KKe=Bee.add;jee.exports=function(e){var t=new ZKe;return GKe(e,function(i){KKe(t,i)}),t}});var Hp=S((YBt,Uee)=>{"use strict";var HKe=gy(),XKe=vn();Uee.exports=HKe(XKe.proto,"size","get")||function(e){return e.size}});var Mc=S((QBt,Kee)=>{"use strict";var Vee=kt(),Gee=ot(),$ee=at(),JKe=Wr(),YKe=ri(),Wee="Invalid size",QKe=RangeError,eHe=TypeError,tHe=Math.max,Zee=function(e,t){this.set=e,this.size=tHe(t,0),this.has=Vee(e.has),this.keys=Vee(e.keys)};Zee.prototype={getIterator:function(){return YKe(Gee($ee(this.keys,this.set)))},includes:function(e){return $ee(this.has,this.set,e)}};Kee.exports=function(e){Gee(e);var t=+e.size;if(t!==t)throw new eHe(Wee);var i=JKe(t);if(i<0)throw new QKe(Wee);return new Zee(e,i)}});var Tk=S((e3t,Jee)=>{"use strict";var rHe=kn(),Xee=vn(),iHe=Kw(),nHe=Hp(),aHe=Mc(),oHe=Ba(),sHe=ru(),lHe=Xee.has,Hee=Xee.remove;Jee.exports=function(t){var i=rHe(this),o=aHe(t),c=iHe(i);return nHe(i)<=o.size?oHe(i,function(a){o.includes(a)&&Hee(c,a)}):sHe(o.getIterator(),function(a){lHe(i,a)&&Hee(c,a)}),c}});var Rc=S((t3t,ete)=>{"use strict";var uHe=Ot(),Yee=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},Qee=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};ete.exports=function(e,t){var i=uHe("Set");try{new i()[e](Yee(0));try{return new i()[e](Yee(-1)),!1}catch(c){if(!t)return!0;try{return new i()[e](Qee(-1/0)),!1}catch(a){var o=new i;return o.add(1),o.add(2),t(o[e](Qee(1/0)))}}}catch(c){return!1}}});var Ek=S(()=>{"use strict";var cHe=K(),hHe=Tk(),dHe=Rc(),fHe=!dHe("difference",function(e){return e.size===0});cHe({target:"Set",proto:!0,real:!0,forced:fHe},{difference:hHe})});var qk=S((n3t,rte)=>{"use strict";var pHe=kn(),Ak=vn(),mHe=Hp(),vHe=Mc(),gHe=Ba(),yHe=ru(),_He=Ak.Set,tte=Ak.add,xHe=Ak.has;rte.exports=function(t){var i=pHe(this),o=vHe(t),c=new _He;return mHe(i)>o.size?yHe(o.getIterator(),function(a){xHe(i,a)&&tte(c,a)}):gHe(i,function(a){o.includes(a)&&tte(c,a)}),c}});var Ik=S(()=>{"use strict";var bHe=K(),wHe=Xe(),SHe=qk(),THe=Rc(),EHe=!THe("intersection",function(e){return e.size===2&&e.has(1)&&e.has(2)})||wHe(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});bHe({target:"Set",proto:!0,real:!0,forced:EHe},{intersection:SHe})});var Pk=S((s3t,ite)=>{"use strict";var AHe=kn(),qHe=vn().has,IHe=Hp(),PHe=Mc(),CHe=Ba(),MHe=ru(),RHe=mn();ite.exports=function(t){var i=AHe(this),o=PHe(t);if(IHe(i)<=o.size)return CHe(i,function(a){if(o.includes(a))return!1},!0)!==!1;var c=o.getIterator();return MHe(c,function(a){if(qHe(i,a))return RHe(c,"normal",!1)})!==!1}});var Ck=S(()=>{"use strict";var OHe=K(),kHe=Pk(),DHe=Rc(),LHe=!DHe("isDisjointFrom",function(e){return!e});OHe({target:"Set",proto:!0,real:!0,forced:LHe},{isDisjointFrom:kHe})});var Mk=S((c3t,nte)=>{"use strict";var FHe=kn(),zHe=Hp(),NHe=Ba(),BHe=Mc();nte.exports=function(t){var i=FHe(this),o=BHe(t);return zHe(i)>o.size?!1:NHe(i,function(c){if(!o.includes(c))return!1},!0)!==!1}});var Rk=S(()=>{"use strict";var jHe=K(),UHe=Mk(),VHe=Rc(),$He=!VHe("isSubsetOf",function(e){return e});jHe({target:"Set",proto:!0,real:!0,forced:$He},{isSubsetOf:UHe})});var Ok=S((f3t,ate)=>{"use strict";var WHe=kn(),GHe=vn().has,ZHe=Hp(),KHe=Mc(),HHe=ru(),XHe=mn();ate.exports=function(t){var i=WHe(this),o=KHe(t);if(ZHe(i)<o.size)return!1;var c=o.getIterator();return HHe(c,function(a){if(!GHe(i,a))return XHe(c,"normal",!1)})!==!1}});var kk=S(()=>{"use strict";var JHe=K(),YHe=Ok(),QHe=Rc(),e9e=!QHe("isSupersetOf",function(e){return!e});JHe({target:"Set",proto:!0,real:!0,forced:e9e},{isSupersetOf:YHe})});var Lk=S((v3t,ote)=>{"use strict";var t9e=kn(),Dk=vn(),r9e=Kw(),i9e=Mc(),n9e=ru(),a9e=Dk.add,o9e=Dk.has,s9e=Dk.remove;ote.exports=function(t){var i=t9e(this),o=i9e(t).getIterator(),c=r9e(i);return n9e(o,function(a){o9e(i,a)?s9e(c,a):a9e(c,a)}),c}});var Fk=S(()=>{"use strict";var l9e=K(),u9e=Lk(),c9e=Rc();l9e({target:"Set",proto:!0,real:!0,forced:!c9e("symmetricDifference")},{symmetricDifference:u9e})});var zk=S((_3t,ste)=>{"use strict";var h9e=kn(),d9e=vn().add,f9e=Kw(),p9e=Mc(),m9e=ru();ste.exports=function(t){var i=h9e(this),o=p9e(t).getIterator(),c=f9e(i);return m9e(o,function(a){d9e(c,a)}),c}});var Nk=S(()=>{"use strict";var v9e=K(),g9e=zk(),y9e=Rc();v9e({target:"Set",proto:!0,real:!0,forced:!y9e("union")},{union:g9e})});var lte=S(()=>{"use strict";var _9e=K(),x9e=Ze(),b9e=Fr(),w9e=Wr(),S9e=Nt(),T9e=Xe(),E9e=x9e("".charAt),A9e=T9e(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});_9e({target:"String",proto:!0,forced:A9e},{at:function(t){var i=S9e(b9e(this)),o=i.length,c=w9e(t),a=c>=0?c:o+c;return a<0||a>=o?void 0:E9e(i,a)}})});var md=S((T3t,hte)=>{"use strict";var Bk=Ze(),q9e=Wr(),I9e=Nt(),P9e=Fr(),C9e=Bk("".charAt),ute=Bk("".charCodeAt),M9e=Bk("".slice),cte=function(e){return function(t,i){var o=I9e(P9e(t)),c=q9e(i),a=o.length,g,x;return c<0||c>=a?e?"":void 0:(g=ute(o,c),g<55296||g>56319||c+1===a||(x=ute(o,c+1))<56320||x>57343?e?C9e(o,c):g:e?M9e(o,c,c+2):(g-55296<<10)+(x-56320)+65536)}};hte.exports={codeAt:cte(!1),charAt:cte(!0)}});var dte=S(()=>{"use strict";var R9e=K(),O9e=md().codeAt;R9e({target:"String",proto:!0},{codePointAt:function(t){return O9e(this,t)}})});var Hw=S((q3t,fte)=>{"use strict";var k9e=Qy(),D9e=TypeError;fte.exports=function(e){if(k9e(e))throw new D9e("The method doesn't accept regular expressions");return e}});var Xw=S((I3t,pte)=>{"use strict";var L9e=Rt(),F9e=L9e("match");pte.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[F9e]=!1,"/./"[e](t)}catch(o){}}return!1}});var gte=S(()=>{"use strict";var z9e=K(),N9e=cc(),B9e=fn().f,j9e=La(),mte=Nt(),U9e=Hw(),V9e=Fr(),$9e=Xw(),W9e=fr(),G9e=N9e("".slice),Z9e=Math.min,vte=$9e("endsWith"),K9e=!W9e&&!vte&&!!function(){var e=B9e(String.prototype,"endsWith");return e&&!e.writable}();z9e({target:"String",proto:!0,forced:!K9e&&!vte},{endsWith:function(t){var i=mte(V9e(this));U9e(t);var o=arguments.length>1?arguments[1]:void 0,c=i.length,a=o===void 0?c:Z9e(j9e(o),c),g=mte(t);return G9e(i,a-g.length,a)===g}})});var jk=S(()=>{"use strict";var H9e=K(),X9e=Ze(),J9e=us(),Y9e=RangeError,yte=String.fromCharCode,_te=String.fromCodePoint,Q9e=X9e([].join),eXe=!!_te&&_te.length!==1;H9e({target:"String",stat:!0,arity:1,forced:eXe},{fromCodePoint:function(t){for(var i=[],o=arguments.length,c=0,a;o>c;){if(a=+arguments[c++],J9e(a,1114111)!==a)throw new Y9e(a+" is not a valid code point");i[c]=a<65536?yte(a):yte(((a-=65536)>>10)+55296,a%1024+56320)}return Q9e(i,"")}})});var bte=S(()=>{"use strict";var tXe=K(),rXe=Ze(),iXe=Hw(),nXe=Fr(),xte=Nt(),aXe=Xw(),oXe=rXe("".indexOf);tXe({target:"String",proto:!0,forced:!aXe("includes")},{includes:function(t){return!!~oXe(xte(nXe(this)),xte(iXe(t)),arguments.length>1?arguments[1]:void 0)}})});var Uk=S(()=>{"use strict";var sXe=K(),lXe=Ze(),uXe=Fr(),cXe=Nt(),wte=lXe("".charCodeAt);sXe({target:"String",proto:!0},{isWellFormed:function(){for(var t=cXe(uXe(this)),i=t.length,o=0;o<i;o++){var c=wte(t,o);if((c&63488)===55296&&(c>=56320||++o>=i||(wte(t,o)&64512)!==56320))return!1}return!0}})});var Vk=S(()=>{"use strict";var hXe=md().charAt,dXe=Nt(),Tte=yr(),fXe=H1(),Ste=en(),Ete="String Iterator",pXe=Tte.set,mXe=Tte.getterFor(Ete);fXe(String,"String",function(e){pXe(this,{type:Ete,string:dXe(e),index:0})},function(){var t=mXe(this),i=t.string,o=t.index,c;return o>=i.length?Ste(void 0,!0):(c=hXe(i,o),t.index+=c.length,Ste(c,!1))})});var n_=S((N3t,Cte)=>{"use strict";Gw();var Ate=at(),qte=wr(),vXe=Ww(),Ite=Xe(),Pte=Rt(),gXe=Ui(),yXe=Pte("species"),$k=RegExp.prototype;Cte.exports=function(e,t,i,o){var c=Pte(e),a=!Ite(function(){var P={};return P[c]=function(){return 7},""[e](P)!==7}),g=a&&!Ite(function(){var P=!1,M=/a/;return e==="split"&&(M={},M.constructor={},M.constructor[yXe]=function(){return M},M.flags="",M[c]=/./[c]),M.exec=function(){return P=!0,null},M[c](""),!P});if(!a||!g||i){var x=/./[c],E=t(c,""[e],function(P,M,O,z,oe){var we=M.exec;return we===vXe||we===$k.exec?a&&!oe?{done:!0,value:Ate(x,M,O,z)}:{done:!0,value:Ate(P,O,M,z)}:{done:!1}});qte(String.prototype,e,E[0]),qte($k,c,E[1])}o&&gXe($k[c],"sham",!0)}});var a_=S((B3t,Mte)=>{"use strict";var _Xe=md().charAt;Mte.exports=function(e,t,i){return t+(i?_Xe(e,t).length:1)}});var Xp=S((j3t,Ote)=>{"use strict";var Rte=at(),xXe=ot(),bXe=Zt(),wXe=Mn(),SXe=Ww(),TXe=TypeError;Ote.exports=function(e,t){var i=e.exec;if(bXe(i)){var o=Rte(i,e,t);return o!==null&&xXe(o),o}if(wXe(e)==="RegExp")return Rte(SXe,e,t);throw new TXe("RegExp#exec called on incompatible receiver")}});var Dte=S(()=>{"use strict";var EXe=at(),AXe=n_(),qXe=ot(),IXe=Pt(),PXe=La(),Wk=Nt(),CXe=Fr(),MXe=xi(),RXe=a_(),kte=Xp();AXe("match",function(e,t,i){return[function(c){var a=CXe(this),g=IXe(c)?MXe(c,e):void 0;return g?EXe(g,c,a):new RegExp(c)[e](Wk(a))},function(o){var c=qXe(this),a=Wk(o),g=i(t,c,a);if(g.done)return g.value;if(!c.global)return kte(c,a);var x=c.unicode;c.lastIndex=0;for(var E=[],P=0,M;(M=kte(c,a))!==null;){var O=Wk(M[0]);E[P]=O,O===""&&(c.lastIndex=RXe(a,PXe(c.lastIndex),x)),P++}return P===0?null:E}]})});var Xk=S(()=>{"use strict";var OXe=K(),Lte=at(),Nte=cc(),kXe=gc(),Jw=en(),Fte=Fr(),Bte=La(),o_=Nt(),DXe=ot(),LXe=Pt(),FXe=Mn(),zXe=Qy(),jte=Gp(),NXe=xi(),BXe=wr(),jXe=Xe(),UXe=Rt(),VXe=Wy(),$Xe=a_(),WXe=Xp(),Ute=yr(),Zk=fr(),Yw=UXe("matchAll"),Vte="RegExp String",$te=Vte+" Iterator",GXe=Ute.set,ZXe=Ute.getterFor($te),zte=RegExp.prototype,KXe=TypeError,Kk=Nte("".indexOf),Qw=Nte("".matchAll),Gk=!!Qw&&!jXe(function(){Qw("a",/./)}),HXe=kXe(function(t,i,o,c){GXe(this,{type:$te,regexp:t,string:i,global:o,unicode:c,done:!1})},Vte,function(){var t=ZXe(this);if(t.done)return Jw(void 0,!0);var i=t.regexp,o=t.string,c=WXe(i,o);return c===null?(t.done=!0,Jw(void 0,!0)):t.global?(o_(c[0])===""&&(i.lastIndex=$Xe(o,Bte(i.lastIndex),t.unicode)),Jw(c,!1)):(t.done=!0,Jw(c,!1))}),Hk=function(e){var t=DXe(this),i=o_(e),o=VXe(t,RegExp),c=o_(jte(t)),a,g,x;return a=new o(o===RegExp?t.source:t,c),g=!!~Kk(c,"g"),x=!!~Kk(c,"u"),a.lastIndex=Bte(t.lastIndex),new HXe(a,i,g,x)};OXe({target:"String",proto:!0,forced:Gk},{matchAll:function(t){var i=Fte(this),o,c,a,g;if(LXe(t)){if(zXe(t)&&(o=o_(Fte(jte(t))),!~Kk(o,"g")))throw new KXe("`.matchAll` does not allow non-global regexes");if(Gk)return Qw(i,t);if(a=NXe(t,Yw),a===void 0&&Zk&&FXe(t)==="RegExp"&&(a=Hk),a)return Lte(a,t,i)}else if(Gk)return Qw(i,t);return c=o_(i),g=new RegExp(t,"g"),Zk?Lte(Hk,g,c):g[Yw](c)}});Zk||Yw in zte||BXe(zte,Yw,Hk)});var Jk=S((G3t,Wte)=>{"use strict";var XXe=as();Wte.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(XXe)});var Gte=S(()=>{"use strict";var JXe=K(),YXe=Ry().end,QXe=Jk();JXe({target:"String",proto:!0,forced:QXe},{padEnd:function(t){return YXe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Zte=S(()=>{"use strict";var eJe=K(),tJe=Ry().start,rJe=Jk();eJe({target:"String",proto:!0,forced:rJe},{padStart:function(t){return tJe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Jte=S(()=>{"use strict";var iJe=K(),Xte=Ze(),nJe=ji(),aJe=Qt(),Kte=Nt(),oJe=sr(),Hte=Xte([].push),sJe=Xte([].join);iJe({target:"String",stat:!0},{raw:function(t){var i=nJe(aJe(t).raw),o=oJe(i);if(!o)return"";for(var c=arguments.length,a=[],g=0;;){if(Hte(a,Kte(i[g++])),g===o)return sJe(a,"");g<c&&Hte(a,Kte(arguments[g]))}}})});var Yte=S(()=>{"use strict";var lJe=K(),uJe=My();lJe({target:"String",proto:!0},{repeat:uJe})});var tD=S((tjt,Qte)=>{"use strict";var eD=Ze(),cJe=Qt(),hJe=Math.floor,Yk=eD("".charAt),dJe=eD("".replace),Qk=eD("".slice),fJe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,pJe=/\$([$&'`]|\d{1,2})/g;Qte.exports=function(e,t,i,o,c,a){var g=i+e.length,x=o.length,E=pJe;return c!==void 0&&(c=cJe(c),E=fJe),dJe(a,E,function(P,M){var O;switch(Yk(M,0)){case"$":return"$";case"&":return e;case"`":return Qk(t,0,i);case"'":return Qk(t,g);case"<":O=c[Qk(M,1,-1)];break;default:var z=+M;if(z===0)return P;if(z>x){var oe=hJe(z/10);return oe===0?P:oe<=x?o[oe-1]===void 0?Yk(M,1):o[oe-1]+Yk(M,1):P}O=o[z-1]}return O===void 0?"":O})}});var nre=S(()=>{"use strict";var mJe=On(),ere=at(),eS=Ze(),vJe=n_(),gJe=Xe(),yJe=ot(),_Je=Zt(),xJe=Pt(),bJe=Wr(),wJe=La(),Jp=Nt(),SJe=Fr(),TJe=a_(),EJe=xi(),AJe=tD(),qJe=Xp(),IJe=Rt(),iD=IJe("replace"),PJe=Math.max,CJe=Math.min,MJe=eS([].concat),rD=eS([].push),tre=eS("".indexOf),rre=eS("".slice),RJe=function(e){return e===void 0?e:String(e)},OJe=function(){return"a".replace(/./,"$0")==="$0"}(),ire=function(){return /./[iD]?/./[iD]("a","$0")==="":!1}(),kJe=!gJe(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});vJe("replace",function(e,t,i){var o=ire?"$":"$0";return[function(a,g){var x=SJe(this),E=xJe(a)?EJe(a,iD):void 0;return E?ere(E,a,x,g):ere(t,Jp(x),a,g)},function(c,a){var g=yJe(this),x=Jp(c);if(typeof a=="string"&&tre(a,o)===-1&&tre(a,"$<")===-1){var E=i(t,g,x,a);if(E.done)return E.value}var P=_Je(a);P||(a=Jp(a));var M=g.global,O;M&&(O=g.unicode,g.lastIndex=0);for(var z=[],oe;oe=qJe(g,x),!(oe===null||(rD(z,oe),!M));){var we=Jp(oe[0]);we===""&&(g.lastIndex=TJe(x,wJe(g.lastIndex),O))}for(var ye="",te=0,Q=0;Q<z.length;Q++){oe=z[Q];for(var ee=Jp(oe[0]),xe=PJe(CJe(bJe(oe.index),x.length),0),Te=[],Je,Ne=1;Ne<oe.length;Ne++)rD(Te,RJe(oe[Ne]));var ut=oe.groups;if(P){var xt=MJe([ee],Te,xe,x);ut!==void 0&&rD(xt,ut),Je=Jp(mJe(a,void 0,xt))}else Je=AJe(ee,x,xe,Te,ut,a);xe>=te&&(ye+=rre(x,te,xe)+Je,te=xe+ee.length)}return ye+rre(x,te)}]},!kJe||!OJe||ire)});var oD=S(()=>{"use strict";var DJe=K(),LJe=at(),aD=Ze(),are=Fr(),FJe=Zt(),zJe=Pt(),NJe=Qy(),Yp=Nt(),BJe=xi(),jJe=Gp(),UJe=tD(),VJe=Rt(),$Je=fr(),WJe=VJe("replace"),GJe=TypeError,nD=aD("".indexOf),ZJe=aD("".replace),ore=aD("".slice),KJe=Math.max;DJe({target:"String",proto:!0},{replaceAll:function(t,i){var o=are(this),c,a,g,x,E,P,M,O,z,oe,we=0,ye="";if(zJe(t)){if(c=NJe(t),c&&(a=Yp(are(jJe(t))),!~nD(a,"g")))throw new GJe("`.replaceAll` does not allow non-global regexes");if(g=BJe(t,WJe),g)return LJe(g,t,o,i);if($Je&&c)return ZJe(Yp(o),t,i)}for(x=Yp(o),E=Yp(t),P=FJe(i),P||(i=Yp(i)),M=E.length,O=KJe(1,M),z=nD(x,E);z!==-1;)oe=P?Yp(i(E,z,x)):UJe(E,x,z,[],void 0,i),ye+=ore(x,we,z)+oe,we=z+M,z=z+O>x.length?-1:nD(x,E,z+O);return we<x.length&&(ye+=ore(x,we)),ye}})});var ure=S(()=>{"use strict";var HJe=at(),XJe=n_(),JJe=ot(),YJe=Pt(),QJe=Fr(),sre=Cw(),lre=Nt(),eYe=xi(),tYe=Xp();XJe("search",function(e,t,i){return[function(c){var a=QJe(this),g=YJe(c)?eYe(c,e):void 0;return g?HJe(g,c,a):new RegExp(c)[e](lre(a))},function(o){var c=JJe(this),a=lre(o),g=i(t,c,a);if(g.done)return g.value;var x=c.lastIndex;sre(x,0)||(c.lastIndex=0);var E=tYe(c,a);return sre(c.lastIndex,x)||(c.lastIndex=x),E===null?-1:E.index}]})});var pre=S(()=>{"use strict";var sD=at(),fre=Ze(),rYe=n_(),iYe=ot(),nYe=Pt(),aYe=Fr(),oYe=Wy(),sYe=a_(),lYe=La(),cre=Nt(),uYe=xi(),hre=Xp(),cYe=e_(),hYe=Xe(),Qp=cYe.UNSUPPORTED_Y,dYe=4294967295,fYe=Math.min,lD=fre([].push),uD=fre("".slice),pYe=!hYe(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return i.length!==2||i[0]!=="a"||i[1]!=="b"}),dre="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;rYe("split",function(e,t,i){var o="0".split(void 0,0).length?function(c,a){return c===void 0&&a===0?[]:sD(t,this,c,a)}:t;return[function(a,g){var x=aYe(this),E=nYe(a)?uYe(a,e):void 0;return E?sD(E,a,x,g):sD(o,cre(x),a,g)},function(c,a){var g=iYe(this),x=cre(c);if(!dre){var E=i(o,g,x,a,o!==t);if(E.done)return E.value}var P=oYe(g,RegExp),M=g.unicode,O=(g.ignoreCase?"i":"")+(g.multiline?"m":"")+(g.unicode?"u":"")+(Qp?"g":"y"),z=new P(Qp?"^(?:"+g.source+")":g,O),oe=a===void 0?dYe:a>>>0;if(oe===0)return[];if(x.length===0)return hre(z,x)===null?[x]:[];for(var we=0,ye=0,te=[];ye<x.length;){z.lastIndex=Qp?0:ye;var Q=hre(z,Qp?uD(x,ye):x),ee;if(Q===null||(ee=fYe(lYe(z.lastIndex+(Qp?ye:0)),x.length))===we)ye=sYe(x,ye,M);else{if(lD(te,uD(x,we,ye)),te.length===oe)return te;for(var xe=1;xe<=Q.length-1;xe++)if(lD(te,Q[xe]),te.length===oe)return te;ye=we=ee}}return lD(te,uD(x,we)),te}]},dre||!pYe,Qp)});var gre=S(()=>{"use strict";var mYe=K(),vYe=cc(),gYe=fn().f,yYe=La(),mre=Nt(),_Ye=Hw(),xYe=Fr(),bYe=Xw(),wYe=fr(),SYe=vYe("".slice),TYe=Math.min,vre=bYe("startsWith"),EYe=!wYe&&!vre&&!!function(){var e=gYe(String.prototype,"startsWith");return e&&!e.writable}();mYe({target:"String",proto:!0,forced:!EYe&&!vre},{startsWith:function(t){var i=mre(xYe(this));_Ye(t);var o=yYe(TYe(arguments.length>1?arguments[1]:void 0,i.length)),c=mre(t);return SYe(i,o,o+c.length)===c}})});var _re=S(()=>{"use strict";var AYe=K(),qYe=Ze(),IYe=Fr(),yre=Wr(),PYe=Nt(),CYe=qYe("".slice),MYe=Math.max,RYe=Math.min,OYe=!"".substr||"ab".substr(-1)!=="b";AYe({target:"String",proto:!0,forced:OYe},{substr:function(t,i){var o=PYe(IYe(this)),c=o.length,a=yre(t),g,x;return a===1/0&&(a=0),a<0&&(a=MYe(c+a,0)),g=i===void 0?c:yre(i),g<=0||g===1/0?"":(x=RYe(a+g,c),a>=x?"":CYe(o,a,x))}})});var fD=S(()=>{"use strict";var kYe=K(),wre=at(),dD=Ze(),DYe=Fr(),LYe=Nt(),FYe=Xe(),zYe=Array,cD=dD("".charAt),xre=dD("".charCodeAt),NYe=dD([].join),hD="".toWellFormed,BYe="\uFFFD",bre=hD&&FYe(function(){return wre(hD,1)!=="1"});kYe({target:"String",proto:!0,forced:bre},{toWellFormed:function(){var t=LYe(DYe(this));if(bre)return wre(hD,t);for(var i=t.length,o=zYe(i),c=0;c<i;c++){var a=xre(t,c);(a&63488)!==55296?o[c]=cD(t,c):a>=56320||c+1>=i||(xre(t,c+1)&64512)!==56320?o[c]=BYe:(o[c]=cD(t,c),o[++c]=cD(t,c))}return NYe(o,"")}})});var tS=S((vjt,Ere)=>{"use strict";var jYe=Xh().PROPER,UYe=Xe(),Sre=ud(),Tre="\u200B\x85\u180E";Ere.exports=function(e){return UYe(function(){return!!Sre[e]()||Tre[e]()!==Tre||jYe&&Sre[e].name!==e})}});var Are=S(()=>{"use strict";var VYe=K(),$Ye=cd().trim,WYe=tS();VYe({target:"String",proto:!0,forced:WYe("trim")},{trim:function(){return $Ye(this)}})});var pD=S((_jt,qre)=>{"use strict";var GYe=cd().end,ZYe=tS();qre.exports=ZYe("trimEnd")?function(){return GYe(this)}:"".trimEnd});var Pre=S(()=>{"use strict";var KYe=K(),Ire=pD();KYe({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==Ire},{trimRight:Ire})});var Mre=S(()=>{"use strict";Pre();var HYe=K(),Cre=pD();HYe({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==Cre},{trimEnd:Cre})});var mD=S((Tjt,Rre)=>{"use strict";var XYe=cd().start,JYe=tS();Rre.exports=JYe("trimStart")?function(){return XYe(this)}:"".trimStart});var kre=S(()=>{"use strict";var YYe=K(),Ore=mD();YYe({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==Ore},{trimLeft:Ore})});var Lre=S(()=>{"use strict";kre();var QYe=K(),Dre=mD();QYe({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==Dre},{trimStart:Dre})});var ja=S((Pjt,zre)=>{"use strict";var eQe=Ze(),tQe=Fr(),Fre=Nt(),rQe=/"/g,iQe=eQe("".replace);zre.exports=function(e,t,i,o){var c=Fre(tQe(e)),a="<"+t;return i!==""&&(a+=" "+i+"=\""+iQe(Fre(o),rQe,"&quot;")+"\""),a+">"+c+"</"+t+">"}});var Ua=S((Cjt,Nre)=>{"use strict";var nQe=Xe();Nre.exports=function(e){return nQe(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var Bre=S(()=>{"use strict";var aQe=K(),oQe=ja(),sQe=Ua();aQe({target:"String",proto:!0,forced:sQe("anchor")},{anchor:function(t){return oQe(this,"a","name",t)}})});var jre=S(()=>{"use strict";var lQe=K(),uQe=ja(),cQe=Ua();lQe({target:"String",proto:!0,forced:cQe("big")},{big:function(){return uQe(this,"big","","")}})});var Ure=S(()=>{"use strict";var hQe=K(),dQe=ja(),fQe=Ua();hQe({target:"String",proto:!0,forced:fQe("blink")},{blink:function(){return dQe(this,"blink","","")}})});var Vre=S(()=>{"use strict";var pQe=K(),mQe=ja(),vQe=Ua();pQe({target:"String",proto:!0,forced:vQe("bold")},{bold:function(){return mQe(this,"b","","")}})});var $re=S(()=>{"use strict";var gQe=K(),yQe=ja(),_Qe=Ua();gQe({target:"String",proto:!0,forced:_Qe("fixed")},{fixed:function(){return yQe(this,"tt","","")}})});var Wre=S(()=>{"use strict";var xQe=K(),bQe=ja(),wQe=Ua();xQe({target:"String",proto:!0,forced:wQe("fontcolor")},{fontcolor:function(t){return bQe(this,"font","color",t)}})});var Gre=S(()=>{"use strict";var SQe=K(),TQe=ja(),EQe=Ua();SQe({target:"String",proto:!0,forced:EQe("fontsize")},{fontsize:function(t){return TQe(this,"font","size",t)}})});var Zre=S(()=>{"use strict";var AQe=K(),qQe=ja(),IQe=Ua();AQe({target:"String",proto:!0,forced:IQe("italics")},{italics:function(){return qQe(this,"i","","")}})});var Kre=S(()=>{"use strict";var PQe=K(),CQe=ja(),MQe=Ua();PQe({target:"String",proto:!0,forced:MQe("link")},{link:function(t){return CQe(this,"a","href",t)}})});var Hre=S(()=>{"use strict";var RQe=K(),OQe=ja(),kQe=Ua();RQe({target:"String",proto:!0,forced:kQe("small")},{small:function(){return OQe(this,"small","","")}})});var Xre=S(()=>{"use strict";var DQe=K(),LQe=ja(),FQe=Ua();DQe({target:"String",proto:!0,forced:FQe("strike")},{strike:function(){return LQe(this,"strike","","")}})});var Jre=S(()=>{"use strict";var zQe=K(),NQe=ja(),BQe=Ua();zQe({target:"String",proto:!0,forced:BQe("sub")},{sub:function(){return NQe(this,"sub","","")}})});var Yre=S(()=>{"use strict";var jQe=K(),UQe=ja(),VQe=Ua();jQe({target:"String",proto:!0,forced:VQe("sup")},{sup:function(){return UQe(this,"sup","","")}})});var rS=S((i5t,eie)=>{"use strict";var Qre=nt(),vD=Xe(),$Qe=xy(),WQe=Xt().NATIVE_ARRAY_BUFFER_VIEWS,GQe=Qre.ArrayBuffer,vd=Qre.Int8Array;eie.exports=!WQe||!vD(function(){vd(1)})||!vD(function(){new vd(-1)})||!$Qe(function(e){new vd,new vd(null),new vd(1.5),new vd(e)},!0)||vD(function(){return new vd(new GQe(2),1,void 0).length!==1})});var gD=S((n5t,tie)=>{"use strict";var ZQe=kp(),KQe=RangeError;tie.exports=function(e,t){var i=ZQe(e);if(i%t)throw new KQe("Wrong offset");return i}});var yD=S((a5t,rie)=>{"use strict";var HQe=Math.round;rie.exports=function(e){var t=HQe(e);return t<0?0:t>255?255:t&255}});var iS=S((o5t,iie)=>{"use strict";var XQe=pa();iie.exports=function(e){var t=XQe(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var s_=S((s5t,nie)=>{"use strict";var JQe=ry(),YQe=TypeError;nie.exports=function(e){var t=JQe(e,"number");if(typeof t=="number")throw new YQe("Can't convert number to bigint");return BigInt(t)}});var _D=S((l5t,aie)=>{"use strict";var QQe=qr(),eet=at(),tet=$y(),ret=Qt(),iet=sr(),net=pc(),aet=Zs(),oet=j1(),set=iS(),uet=Xt().aTypedArrayConstructor,cet=s_();aie.exports=function(t){var i=tet(this),o=ret(t),c=arguments.length,a=c>1?arguments[1]:void 0,g=a!==void 0,x=aet(o),E,P,M,O,z,oe,we,ye;if(x&&!oet(x))for(we=net(o,x),ye=we.next,o=[];!(oe=eet(ye,we)).done;)o.push(oe.value);for(g&&c>2&&(a=QQe(a,arguments[2])),P=iet(o),M=new(uet(i))(P),O=set(M),E=0;P>E;E++)z=g?a(o[E],E):o[E],M[E]=O?cet(z):+z;return M}});var Qs=S((u5t,AD)=>{"use strict";var oie=K(),gie=nt(),sie=at(),het=At(),det=rS(),h_=Xt(),yie=Cy(),lie=Yn(),fet=ka(),l_=Ui(),pet=qw(),met=La(),uie=Ap(),xD=gD(),vet=yD(),_ie=Ws(),u_=Ht(),get=pa(),SD=Pt(),yet=$l(),_et=bi(),xet=Rn(),nS=Mo(),bet=uc().f,cie=_D(),wet=wi().forEach,Tet=_c(),Eet=Gr(),xie=Or(),bie=fn(),hie=Hl(),qD=yr(),Aet=fc(),TD=qD.get,qet=qD.set,Iet=qD.enforce,wie=xie.f,Pet=bie.f,bD=gie.RangeError,Sie=yie.ArrayBuffer,Cet=Sie.prototype,Met=yie.DataView,aS=h_.NATIVE_ARRAY_BUFFER_VIEWS,die=h_.TYPED_ARRAY_TAG,fie=h_.TypedArray,c_=h_.TypedArrayPrototype,ED=h_.isTypedArray,oS="BYTES_PER_ELEMENT",wD="Wrong length",sS=function(e,t){Eet(e,t,{configurable:!0,get:function(){return TD(this)[t]}})},pie=function(e){var t;return xet(Cet,e)||(t=get(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},Tie=function(e,t){return ED(e)&&!yet(t)&&t in e&&pet(+t)&&t>=0},mie=function(t,i){return i=_ie(i),Tie(t,i)?fet(2,t[i]):Pet(t,i)},vie=function(t,i,o){return i=_ie(i),Tie(t,i)&&SD(o)&&u_(o,"value")&&!u_(o,"get")&&!u_(o,"set")&&!o.configurable&&(!u_(o,"writable")||o.writable)&&(!u_(o,"enumerable")||o.enumerable)?(t[i]=o.value,t):wie(t,i,o)};het?(aS||(bie.f=mie,xie.f=vie,sS(c_,"buffer"),sS(c_,"byteOffset"),sS(c_,"byteLength"),sS(c_,"length")),oie({target:"Object",stat:!0,forced:!aS},{getOwnPropertyDescriptor:mie,defineProperty:vie}),AD.exports=function(e,t,i){var o=e.match(/\d+/)[0]/8,c=e+(i?"Clamped":"")+"Array",a="get"+e,g="set"+e,x=gie[c],E=x,P=E&&E.prototype,M={},O=function(ye,te){var Q=TD(ye);return Q.view[a](te*o+Q.byteOffset,!0)},z=function(ye,te,Q){var ee=TD(ye);ee.view[g](te*o+ee.byteOffset,i?vet(Q):Q,!0)},oe=function(ye,te){wie(ye,te,{get:function(){return O(this,te)},set:function(Q){return z(this,te,Q)},enumerable:!0})};aS?det&&(E=t(function(ye,te,Q,ee){return lie(ye,P),Aet(function(){return SD(te)?pie(te)?ee!==void 0?new x(te,xD(Q,o),ee):Q!==void 0?new x(te,xD(Q,o)):new x(te):ED(te)?hie(E,te):sie(cie,E,te):new x(uie(te))}(),ye,E)}),nS&&nS(E,fie),wet(bet(x),function(ye){ye in E||l_(E,ye,x[ye])}),E.prototype=P):(E=t(function(ye,te,Q,ee){lie(ye,P);var xe=0,Te=0,Je,Ne,ut;if(!SD(te))ut=uie(te),Ne=ut*o,Je=new Sie(Ne);else if(pie(te)){Je=te,Te=xD(Q,o);var xt=te.byteLength;if(ee===void 0){if(xt%o)throw new bD(wD);if(Ne=xt-Te,Ne<0)throw new bD(wD)}else if(Ne=met(ee)*o,Ne+Te>xt)throw new bD(wD);ut=Ne/o}else return ED(te)?hie(E,te):sie(cie,E,te);for(qet(ye,{buffer:Je,byteOffset:Te,byteLength:Ne,length:ut,view:new Met(Je)});xe<ut;)oe(ye,xe++)}),nS&&nS(E,fie),P=E.prototype=_et(c_)),P.constructor!==E&&l_(P,"constructor",E),Iet(P).TypedArrayConstructor=E,die&&l_(P,die,c);var we=E!==x;M[c]=E,oie({global:!0,constructor:!0,forced:we,sham:!aS},M),oS in E||l_(E,oS,o),oS in P||l_(P,oS,o),Tet(c)}):AD.exports=function(){}});var Eie=S(()=>{"use strict";var Ret=Qs();Ret("Float32",function(e){return function(i,o,c){return e(this,i,o,c)}})});var Aie=S(()=>{"use strict";var Oet=Qs();Oet("Float64",function(e){return function(i,o,c){return e(this,i,o,c)}})});var qie=S(()=>{"use strict";var ket=Qs();ket("Int8",function(e){return function(i,o,c){return e(this,i,o,c)}})});var Iie=S(()=>{"use strict";var Det=Qs();Det("Int16",function(e){return function(i,o,c){return e(this,i,o,c)}})});var Pie=S(()=>{"use strict";var Let=Qs();Let("Int32",function(e){return function(i,o,c){return e(this,i,o,c)}})});var Cie=S(()=>{"use strict";var Fet=Qs();Fet("Uint8",function(e){return function(i,o,c){return e(this,i,o,c)}})});var Mie=S(()=>{"use strict";var zet=Qs();zet("Uint8",function(e){return function(i,o,c){return e(this,i,o,c)}},!0)});var Rie=S(()=>{"use strict";var Net=Qs();Net("Uint16",function(e){return function(i,o,c){return e(this,i,o,c)}})});var Oie=S(()=>{"use strict";var Bet=Qs();Bet("Uint32",function(e){return function(i,o,c){return e(this,i,o,c)}})});var ID=S(()=>{"use strict";var kie=Xt(),jet=sr(),Uet=Wr(),Vet=kie.aTypedArray,$et=kie.exportTypedArrayMethod;$et("at",function(t){var i=Vet(this),o=jet(i),c=Uet(t),a=c>=0?c:o+c;return a<0||a>=o?void 0:i[a]})});var Lie=S(()=>{"use strict";var Wet=Ze(),Die=Xt(),Get=CC(),Zet=Wet(Get),Ket=Die.aTypedArray,Het=Die.exportTypedArrayMethod;Het("copyWithin",function(t,i){return Zet(Ket(this),t,i,arguments.length>2?arguments[2]:void 0)})});var zie=S(()=>{"use strict";var Fie=Xt(),Xet=wi().every,Jet=Fie.aTypedArray,Yet=Fie.exportTypedArrayMethod;Yet("every",function(t){return Xet(Jet(this),t,arguments.length>1?arguments[1]:void 0)})});var Bie=S(()=>{"use strict";var Nie=Xt(),Qet=W1(),ett=s_(),ttt=pa(),rtt=at(),itt=Ze(),ntt=Xe(),att=Nie.aTypedArray,ott=Nie.exportTypedArrayMethod,stt=itt("".slice),ltt=ntt(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});ott("fill",function(t){var i=arguments.length;att(this);var o=stt(ttt(this),0,3)==="Big"?ett(t):+t;return rtt(Qet,this,o,i>1?arguments[1]:void 0,i>2?arguments[2]:void 0)},ltt)});var lS=S((L5t,jie)=>{"use strict";var utt=Hl(),ctt=Xt().getTypedArrayConstructor;jie.exports=function(e,t){return utt(ctt(e),t)}});var Vie=S(()=>{"use strict";var Uie=Xt(),htt=wi().filter,dtt=lS(),ftt=Uie.aTypedArray,ptt=Uie.exportTypedArrayMethod;ptt("filter",function(t){var i=htt(ftt(this),t,arguments.length>1?arguments[1]:void 0);return dtt(this,i)})});var Wie=S(()=>{"use strict";var $ie=Xt(),mtt=wi().find,vtt=$ie.aTypedArray,gtt=$ie.exportTypedArrayMethod;gtt("find",function(t){return mtt(vtt(this),t,arguments.length>1?arguments[1]:void 0)})});var Zie=S(()=>{"use strict";var Gie=Xt(),ytt=wi().findIndex,_tt=Gie.aTypedArray,xtt=Gie.exportTypedArrayMethod;xtt("findIndex",function(t){return ytt(_tt(this),t,arguments.length>1?arguments[1]:void 0)})});var PD=S(()=>{"use strict";var Kie=Xt(),btt=_y().findLast,wtt=Kie.aTypedArray,Stt=Kie.exportTypedArrayMethod;Stt("findLast",function(t){return btt(wtt(this),t,arguments.length>1?arguments[1]:void 0)})});var CD=S(()=>{"use strict";var Hie=Xt(),Ttt=_y().findLastIndex,Ett=Hie.aTypedArray,Att=Hie.exportTypedArrayMethod;Att("findLastIndex",function(t){return Ttt(Ett(this),t,arguments.length>1?arguments[1]:void 0)})});var Jie=S(()=>{"use strict";var Xie=Xt(),qtt=wi().forEach,Itt=Xie.aTypedArray,Ptt=Xie.exportTypedArrayMethod;Ptt("forEach",function(t){qtt(Itt(this),t,arguments.length>1?arguments[1]:void 0)})});var Yie=S(()=>{"use strict";var Ctt=rS(),Mtt=Xt().exportTypedArrayStaticMethod,Rtt=_D();Mtt("from",Rtt,Ctt)});var ene=S(()=>{"use strict";var Qie=Xt(),Ott=yp().includes,ktt=Qie.aTypedArray,Dtt=Qie.exportTypedArrayMethod;Dtt("includes",function(t){return Ott(ktt(this),t,arguments.length>1?arguments[1]:void 0)})});var rne=S(()=>{"use strict";var tne=Xt(),Ltt=yp().indexOf,Ftt=tne.aTypedArray,ztt=tne.exportTypedArrayMethod;ztt("indexOf",function(t){return Ltt(Ftt(this),t,arguments.length>1?arguments[1]:void 0)})});var sne=S(()=>{"use strict";var Ntt=nt(),Btt=Xe(),MD=Ze(),nne=Xt(),RD=Sy(),jtt=Rt(),OD=jtt("iterator"),ine=Ntt.Uint8Array,Utt=MD(RD.values),Vtt=MD(RD.keys),$tt=MD(RD.entries),kD=nne.aTypedArray,uS=nne.exportTypedArrayMethod,em=ine&&ine.prototype,cS=!Btt(function(){em[OD].call([1])}),ane=!!em&&em.values&&em[OD]===em.values&&em.values.name==="values",one=function(){return Utt(kD(this))};uS("entries",function(){return $tt(kD(this))},cS);uS("keys",function(){return Vtt(kD(this))},cS);uS("values",one,cS||!ane,{name:"values"});uS(OD,one,cS||!ane,{name:"values"})});var une=S(()=>{"use strict";var lne=Xt(),Wtt=Ze(),Gtt=lne.aTypedArray,Ztt=lne.exportTypedArrayMethod,Ktt=Wtt([].join);Ztt("join",function(t){return Ktt(Gtt(this),t)})});var hne=S(()=>{"use strict";var cne=Xt(),Htt=On(),Xtt=GC(),Jtt=cne.aTypedArray,Ytt=cne.exportTypedArrayMethod;Ytt("lastIndexOf",function(t){var i=arguments.length;return Htt(Xtt,Jtt(this),i>1?[t,arguments[1]]:[t])})});var dne=S(()=>{"use strict";var DD=Xt(),Qtt=wi().map,ert=DD.aTypedArray,trt=DD.getTypedArrayConstructor,rrt=DD.exportTypedArrayMethod;rrt("map",function(t){return Qtt(ert(this),t,arguments.length>1?arguments[1]:void 0,function(i,o){return new(trt(i))(o)})})});var pne=S(()=>{"use strict";var fne=Xt(),irt=rS(),nrt=fne.aTypedArrayConstructor,art=fne.exportTypedArrayStaticMethod;art("of",function(){for(var t=0,i=arguments.length,o=new(nrt(this))(i);i>t;)o[t]=arguments[t++];return o},irt)});var vne=S(()=>{"use strict";var mne=Xt(),ort=Ty().left,srt=mne.aTypedArray,lrt=mne.exportTypedArrayMethod;lrt("reduce",function(t){var i=arguments.length;return ort(srt(this),t,i,i>1?arguments[1]:void 0)})});var yne=S(()=>{"use strict";var gne=Xt(),urt=Ty().right,crt=gne.aTypedArray,hrt=gne.exportTypedArrayMethod;hrt("reduceRight",function(t){var i=arguments.length;return urt(crt(this),t,i,i>1?arguments[1]:void 0)})});var xne=S(()=>{"use strict";var _ne=Xt(),drt=_ne.aTypedArray,frt=_ne.exportTypedArrayMethod,prt=Math.floor;frt("reverse",function(){for(var t=this,i=drt(t).length,o=prt(i/2),c=0,a;c<o;)a=t[c],t[c++]=t[--i],t[i]=a;return t})});var Ane=S(()=>{"use strict";var wne=nt(),Sne=at(),zD=Xt(),mrt=sr(),vrt=gD(),grt=Qt(),Tne=Xe(),yrt=wne.RangeError,LD=wne.Int8Array,bne=LD&&LD.prototype,Ene=bne&&bne.set,_rt=zD.aTypedArray,xrt=zD.exportTypedArrayMethod,FD=!Tne(function(){var e=new Uint8ClampedArray(2);return Sne(Ene,e,{length:1,0:3},1),e[1]!==3}),brt=FD&&zD.NATIVE_ARRAY_BUFFER_VIEWS&&Tne(function(){var e=new LD(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});xrt("set",function(t){_rt(this);var i=vrt(arguments.length>1?arguments[1]:void 0,1),o=grt(t);if(FD)return Sne(Ene,this,o,i);var c=this.length,a=mrt(o),g=0;if(a+i>c)throw new yrt("Wrong length");for(;g<a;)this[i+g]=o[g++]},!FD||brt)});var qne=S(()=>{"use strict";var ND=Xt(),wrt=Xe(),Srt=Fa(),Trt=ND.aTypedArray,Ert=ND.getTypedArrayConstructor,Art=ND.exportTypedArrayMethod,qrt=wrt(function(){new Int8Array(1).slice()});Art("slice",function(t,i){for(var o=Srt(Trt(this),t,i),c=Ert(this),a=0,g=o.length,x=new c(g);g>a;)x[a]=o[a++];return x},qrt)});var Pne=S(()=>{"use strict";var Ine=Xt(),Irt=wi().some,Prt=Ine.aTypedArray,Crt=Ine.exportTypedArrayMethod;Crt("some",function(t){return Irt(Prt(this),t,arguments.length>1?arguments[1]:void 0)})});var Dne=S(()=>{"use strict";var Mrt=nt(),Rrt=cc(),BD=Xe(),Ort=kt(),krt=Q1(),kne=Xt(),Cne=HC(),Drt=XC(),Mne=ss(),Rne=ew(),Lrt=kne.aTypedArray,Frt=kne.exportTypedArrayMethod,d_=Mrt.Uint16Array,tm=d_&&Rrt(d_.prototype.sort),zrt=!!tm&&!(BD(function(){tm(new d_(2),null)})&&BD(function(){tm(new d_(2),{})})),One=!!tm&&!BD(function(){if(Mne)return Mne<74;if(Cne)return Cne<67;if(Drt)return!0;if(Rne)return Rne<602;var e=new d_(516),t=Array(516),i,o;for(i=0;i<516;i++)o=i%4,e[i]=515-i,t[i]=i-2*o+3;for(tm(e,function(c,a){return(c/4|0)-(a/4|0)}),i=0;i<516;i++)if(e[i]!==t[i])return!0}),Nrt=function(e){return function(t,i){return e!==void 0?+e(t,i)||0:i!==i?-1:t!==t?1:t===0&&i===0?1/t>0&&1/i<0?1:-1:t>i}};Frt("sort",function(t){return t!==void 0&&Ort(t),One?tm(this,t):krt(Lrt(this),Nrt(t))},!One||zrt)});var Fne=S(()=>{"use strict";var jD=Xt(),Brt=La(),Lne=us(),jrt=jD.aTypedArray,Urt=jD.getTypedArrayConstructor,Vrt=jD.exportTypedArrayMethod;Vrt("subarray",function(t,i){var o=jrt(this),c=o.length,a=Lne(t,c),g=Urt(o);return new g(o.buffer,o.byteOffset+a*o.BYTES_PER_ELEMENT,Brt((i===void 0?c:Lne(i,c))-a))})});var Une=S(()=>{"use strict";var $rt=nt(),Wrt=On(),Bne=Xt(),UD=Xe(),zne=Fa(),hS=$rt.Int8Array,Nne=Bne.aTypedArray,Grt=Bne.exportTypedArrayMethod,jne=[].toLocaleString,Zrt=!!hS&&UD(function(){jne.call(new hS(1))}),Krt=UD(function(){return[1,2].toLocaleString()!==new hS([1,2]).toLocaleString()})||!UD(function(){hS.prototype.toLocaleString.call([1,2])});Grt("toLocaleString",function(){return Wrt(jne,Zrt?zne(Nne(this)):Nne(this),zne(arguments))},Krt)});var $D=S(()=>{"use strict";var Hrt=QC(),VD=Xt(),Xrt=VD.aTypedArray,Jrt=VD.exportTypedArrayMethod,Yrt=VD.getTypedArrayConstructor;Jrt("toReversed",function(){return Hrt(Xrt(this),Yrt(this))})});var WD=S(()=>{"use strict";var dS=Xt(),Qrt=Ze(),eit=kt(),tit=Hl(),rit=dS.aTypedArray,iit=dS.getTypedArrayConstructor,nit=dS.exportTypedArrayMethod,ait=Qrt(dS.TypedArrayPrototype.sort);nit("toSorted",function(t){t!==void 0&&eit(t);var i=rit(this),o=tit(iit(i),i);return ait(o,t)})});var $ne=S(()=>{"use strict";var oit=Xt().exportTypedArrayMethod,sit=Xe(),lit=nt(),uit=Ze(),Vne=lit.Uint8Array,cit=Vne&&Vne.prototype||{},fS=[].toString,hit=uit([].join);sit(function(){fS.call({})})&&(fS=function(){return hit(this)});var dit=cit.toString!==fS;oit("toString",fS,dit)});var ZD=S(()=>{"use strict";var fit=nM(),GD=Xt(),pit=iS(),mit=Wr(),vit=s_(),git=GD.aTypedArray,yit=GD.getTypedArrayConstructor,_it=GD.exportTypedArrayMethod,xit=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();_it("with",function(e,t){var i=git(this),o=mit(e),c=pit(i)?vit(t):+t;return fit(i,yit(i),o,c)},!xit)});var Hne=S(()=>{"use strict";var bit=K(),KD=Ze(),wit=Nt(),Wne=String.fromCharCode,Gne=KD("".charAt),Zne=KD(/./.exec),Kne=KD("".slice),Sit=/^[\da-f]{2}$/i,Tit=/^[\da-f]{4}$/i;bit({global:!0},{unescape:function(t){for(var i=wit(t),o="",c=i.length,a=0,g,x;a<c;){if(g=Gne(i,a++),g==="%"){if(Gne(i,a)==="u"){if(x=Kne(i,a+1,a+5),Zne(Tit,x)){o+=Wne(parseInt(x,16)),a+=5;continue}}else if(x=Kne(i,a,a+2),Zne(Sit,x)){o+=Wne(parseInt(x,16)),a+=2;continue}}o+=g}return o}})});var JD=S((NUt,tae)=>{"use strict";var Eit=Ze(),Xne=ko(),pS=Ac().getWeakData,Ait=Yn(),qit=ot(),Iit=Da(),HD=Pt(),Pit=si(),Yne=wi(),Jne=Ht(),Qne=yr(),Cit=Qne.set,Mit=Qne.getterFor,Rit=Yne.find,Oit=Yne.findIndex,kit=Eit([].splice),Dit=0,mS=function(e){return e.frozen||(e.frozen=new eae)},eae=function(){this.entries=[]},XD=function(e,t){return Rit(e.entries,function(i){return i[0]===t})};eae.prototype={get:function(e){var t=XD(this,e);if(t)return t[1]},has:function(e){return!!XD(this,e)},set:function(e,t){var i=XD(this,e);i?i[1]=t:this.entries.push([e,t])},delete:function(e){var t=Oit(this.entries,function(i){return i[0]===e});return~t&&kit(this.entries,t,1),!!~t}};tae.exports={getConstructor:function(e,t,i,o){var c=e(function(E,P){Ait(E,a),Cit(E,{type:t,id:Dit++,frozen:null}),Iit(P)||Pit(P,E[o],{that:E,AS_ENTRIES:i})}),a=c.prototype,g=Mit(t),x=function(E,P,M){var O=g(E),z=pS(qit(P),!0);return z===!0?mS(O).set(P,M):z[O.id]=M,E};return Xne(a,{delete:function(E){var P=g(this);if(!HD(E))return!1;var M=pS(E);return M===!0?mS(P).delete(E):M&&Jne(M,P.id)&&delete M[P.id]},has:function(P){var M=g(this);if(!HD(P))return!1;var O=pS(P);return O===!0?mS(M).has(P):O&&Jne(O,M.id)}}),Xne(a,i?{get:function(P){var M=g(this);if(HD(P)){var O=pS(P);if(O===!0)return mS(M).get(P);if(O)return O[M.id]}},set:function(P,M){return x(this,P,M)}}:{add:function(P){return x(this,P,!0)}}),c}}});var uae=S(()=>{"use strict";var Lit=eu(),rae=nt(),_S=Ze(),iae=ko(),Fit=Ac(),zit=ky(),nae=JD(),vS=Pt(),gS=yr().enforce,Nit=Xe(),Bit=R2(),m_=Object,jit=Array.isArray,yS=m_.isExtensible,aae=m_.isFrozen,Uit=m_.isSealed,oae=m_.freeze,Vit=m_.seal,$it=!rae.ActiveXObject&&"ActiveXObject"in rae,f_,sae=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},lae=zit("WeakMap",sae,nae),rm=lae.prototype,xS=_S(rm.set),Wit=function(){return Lit&&Nit(function(){var e=oae([]);return xS(new lae,e,1),!aae(e)})};Bit&&($it?(f_=nae.getConstructor(sae,"WeakMap",!0),Fit.enable(),YD=_S(rm.delete),p_=_S(rm.has),QD=_S(rm.get),iae(rm,{delete:function(e){if(vS(e)&&!yS(e)){var t=gS(this);return t.frozen||(t.frozen=new f_),YD(this,e)||t.frozen.delete(e)}return YD(this,e)},has:function(t){if(vS(t)&&!yS(t)){var i=gS(this);return i.frozen||(i.frozen=new f_),p_(this,t)||i.frozen.has(t)}return p_(this,t)},get:function(t){if(vS(t)&&!yS(t)){var i=gS(this);return i.frozen||(i.frozen=new f_),p_(this,t)?QD(this,t):i.frozen.get(t)}return QD(this,t)},set:function(t,i){if(vS(t)&&!yS(t)){var o=gS(this);o.frozen||(o.frozen=new f_),p_(this,t)?xS(this,t,i):o.frozen.set(t,i)}else xS(this,t,i);return this}})):Wit()&&iae(rm,{set:function(t,i){var o;return jit(t)&&(aae(t)?o=oae:Uit(t)&&(o=Vit)),xS(this,t,i),o&&o(t),this}}));var YD,p_,QD});var bS=S(()=>{"use strict";uae()});var cae=S(()=>{"use strict";var Git=ky(),Zit=JD();Git("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Zit)});var hae=S(()=>{"use strict";cae()});var dae=S(()=>{"use strict";TC()});var mae=S(()=>{"use strict";var Kit=K(),Hit=nt(),Xit=Rn(),fae=Vi(),SS=Mo(),Jit=Yh(),pae=bi(),wS=Ui(),eL=ka(),Yit=F1(),Qit=id(),ent=Rt(),tnt=Xe(),rnt=fr(),im=Hit.SuppressedError,int=ent("toStringTag"),TS=Error,nnt=!!im&&im.length!==3,ant=!!im&&tnt(function(){return new im(1,2,3,{cause:4}).cause===4}),ES=nnt||ant,gd=function(t,i,o){var c=Xit(v_,this),a;return SS?a=ES&&(!c||fae(this)===v_)?new im:SS(new TS,c?fae(this):v_):(a=c?this:pae(v_),wS(a,int,"Error")),o!==void 0&&wS(a,"message",Qit(o)),Yit(a,gd,a.stack,1),wS(a,"error",t),wS(a,"suppressed",i),a};SS?SS(gd,TS):Jit(gd,TS,{name:!0});var v_=gd.prototype=ES?im.prototype:pae(TS.prototype,{constructor:eL(1,gd),message:eL(1,""),name:eL(1,"SuppressedError")});ES&&!rnt&&(v_.constructor=gd);Kit({global:!0,constructor:!0,arity:3,forced:ES},{SuppressedError:gd})});var nm=S((YUt,Sae)=>{"use strict";var xae=nt(),bae=ty(),wae=Zt(),ont=bi(),AS=Vi(),snt=wr(),lnt=Rt(),unt=fr(),vae="USE_FUNCTION_CONSTRUCTOR",gae=lnt("asyncIterator"),yae=xae.AsyncIterator,_ae=bae.AsyncIteratorPrototype,el,tL;if(_ae)el=_ae;else if(wae(yae))el=yae.prototype;else if(bae[vae]||xae[vae])try{tL=AS(AS(AS(Function("return async function*(){}()")()))),AS(tL)===Object.prototype&&(el=tL)}catch(e){}el?unt&&(el=ont(el)):el={};wae(el[gae])||snt(el,gae,function(){return this});Sae.exports=el});var g_=S((QUt,Rae)=>{"use strict";var Tae=at(),Eae=ot(),cnt=bi(),hnt=xi(),dnt=ko(),Iae=yr(),fnt=mn(),pnt=Ot(),mnt=nm(),Pae=en(),rL=pnt("Promise"),Cae="AsyncFromSyncIterator",vnt=Iae.set,Aae=Iae.getterFor(Cae),qae=function(e,t,i,o,c){var a=e.done;rL.resolve(e.value).then(function(g){t(Pae(g,a))},function(g){if(!a&&c)try{fnt(o,"throw",g)}catch(x){g=x}i(g)})},Mae=function(t){t.type=Cae,vnt(this,t)};Mae.prototype=dnt(cnt(mnt),{next:function(){var t=Aae(this);return new rL(function(i,o){var c=Eae(Tae(t.next,t.iterator));qae(c,i,o,t.iterator,!0)})},return:function(){var e=Aae(this).iterator;return new rL(function(t,i){var o=hnt(e,"return");if(o===void 0)return t(Pae(void 0,!0));var c=Eae(Tae(o,e));qae(c,t,i,e)})}});Rae.exports=Mae});var kae=S((e4t,Oae)=>{"use strict";var gnt=at(),ynt=g_(),_nt=ot(),xnt=pc(),bnt=ri(),wnt=xi(),Snt=Rt(),Tnt=Snt("asyncIterator");Oae.exports=function(e,t){var i=arguments.length<2?wnt(e,Tnt):t;return i?_nt(gnt(i,e)):new ynt(bnt(xnt(e)))}});var am=S((t4t,Dae)=>{"use strict";var Ent=at(),Ant=Ot(),qnt=xi();Dae.exports=function(e,t,i,o){try{var c=qnt(e,"return");if(c)return Ant("Promise").resolve(Ent(c,e)).then(function(){t(i)},function(a){o(a)})}catch(a){return o(a)}t(i)}});var yd=S((r4t,Lae)=>{"use strict";var Int=at(),Pnt=kt(),iL=ot(),Cnt=Pt(),Mnt=mc(),Rnt=Ot(),Ont=ri(),nL=am(),y_=function(e){var t=e===0,i=e===1,o=e===2,c=e===3;return function(a,g,x){iL(a);var E=g!==void 0;(E||!t)&&Pnt(g);var P=Ont(a),M=Rnt("Promise"),O=P.iterator,z=P.next,oe=0;return new M(function(we,ye){var te=function(ee){nL(O,ye,ee,ye)},Q=function(){try{if(E)try{Mnt(oe)}catch(ee){te(ee)}M.resolve(iL(Int(z,O))).then(function(ee){try{if(iL(ee).done)t?(x.length=oe,we(x)):we(c?!1:o||void 0);else{var xe=ee.value;try{if(E){var Te=g(xe,oe),Je=function(Ne){if(i)Q();else if(o)Ne?Q():nL(O,we,!1,ye);else if(t)try{x[oe++]=Ne,Q()}catch(ut){te(ut)}else Ne?nL(O,we,c||xe,ye):Q()};Cnt(Te)?M.resolve(Te).then(Je,te):Je(Te)}else x[oe++]=xe,Q()}catch(Ne){te(Ne)}}}catch(Ne){ye(Ne)}},ye)}catch(ee){ye(ee)}};Q()})}};Lae.exports={toArray:y_(0),forEach:y_(1),every:y_(2),some:y_(3),find:y_(4)}});var aL=S((i4t,Bae)=>{"use strict";var knt=qr(),Fae=Ze(),Dnt=Qt(),Lnt=hs(),Fnt=kae(),znt=pc(),Nnt=ri(),Bnt=Zs(),jnt=xi(),Unt=Ot(),Vnt=tM(),$nt=Rt(),Wnt=g_(),Gnt=yd().toArray,Znt=$nt("asyncIterator"),zae=Fae(Vnt("Array","values")),Knt=Fae(zae([]).next),Hnt=function(){return new Nae(this)},Nae=function(e){this.iterator=zae(e)};Nae.prototype.next=function(){return Knt(this.iterator)};Bae.exports=function(t){var i=this,o=arguments.length,c=o>1?arguments[1]:void 0,a=o>2?arguments[2]:void 0;return new(Unt("Promise"))(function(g){var x=Dnt(t);c!==void 0&&(c=knt(c,a));var E=jnt(x,Znt),P=E?void 0:Bnt(x)||Hnt,M=Lnt(i)?new i:[],O=E?Fnt(x,E):new Wnt(Nnt(znt(x,P)));g(Gnt(O,c,M))})}});var Uae=S(()=>{"use strict";var Xnt=K(),Jnt=aL(),Ynt=Xe(),jae=Array.fromAsync,Qnt=!jae||Ynt(function(){var e=0;return jae.call(function(){return e++,[]},{length:0}),e!==1});Xnt({target:"Array",stat:!0,forced:Qnt},{fromAsync:Jnt})});var Vae=S(()=>{"use strict";IC()});var $ae=S(()=>{"use strict";var eat=K(),tat=wi().filterReject,rat=li();eat({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return tat(this,t,arguments.length>1?arguments[1]:void 0)}});rat("filterOut")});var Wae=S(()=>{"use strict";var iat=K(),nat=wi().filterReject,aat=li();iat({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return nat(this,t,arguments.length>1?arguments[1]:void 0)}});aat("filterReject")});var Gae=S(()=>{"use strict";OC()});var Zae=S(()=>{"use strict";kC()});var qS=S((v4t,Kae)=>{"use strict";var oat=qr(),sat=Ze(),lat=Vl(),uat=Qt(),cat=Ws(),hat=sr(),dat=bi(),fat=Hl(),pat=Array,mat=sat([].push);Kae.exports=function(e,t,i,o){for(var c=uat(e),a=lat(c),g=oat(t,i),x=dat(null),E=hat(a),P=0,M,O,z;E>P;P++)z=a[P],O=cat(g(z,P,c)),O in x?mat(x[O],z):x[O]=[z];if(o&&(M=o(c),M!==pat))for(O in x)x[O]=fat(M,x[O]);return x}});var Hae=S(()=>{"use strict";var vat=K(),gat=qS(),yat=li();vat({target:"Array",proto:!0},{group:function(t){var i=arguments.length>1?arguments[1]:void 0;return gat(this,t,i)}});yat("group")});var Xae=S(()=>{"use strict";var _at=K(),xat=qS(),bat=Oo(),wat=li();_at({target:"Array",proto:!0,forced:!bat("groupBy")},{groupBy:function(t){var i=arguments.length>1?arguments[1]:void 0;return xat(this,t,i)}});wat("groupBy")});var oL=S((b4t,Jae)=>{"use strict";var Sat=qr(),Tat=Ze(),Eat=Vl(),Aat=Qt(),qat=sr(),IS=tn(),Iat=IS.Map,Pat=IS.get,Cat=IS.has,Mat=IS.set,Rat=Tat([].push);Jae.exports=function(t){for(var i=Aat(this),o=Eat(i),c=Sat(t,arguments.length>1?arguments[1]:void 0),a=new Iat,g=qat(o),x=0,E,P;g>x;x++)P=o[x],E=c(P,x,i),Cat(a,E)?Rat(Pat(a,E),P):Mat(a,E,[P]);return a}});var Yae=S(()=>{"use strict";var Oat=K(),kat=Oo(),Dat=li(),Lat=oL(),Fat=fr();Oat({target:"Array",proto:!0,name:"groupToMap",forced:Fat||!kat("groupByToMap")},{groupByToMap:Lat});Dat("groupByToMap")});var Qae=S(()=>{"use strict";var zat=K(),Nat=li(),Bat=oL(),jat=fr();zat({target:"Array",proto:!0,forced:jat},{groupToMap:Bat});Nat("groupToMap")});var roe=S(()=>{"use strict";var Uat=K(),Vat=cs(),eoe=Object.isFrozen,toe=function(e,t){if(!eoe||!Vat(e)||!eoe(e))return!1;for(var i=0,o=e.length,c;i<o;)if(c=e[i++],!(typeof c=="string"||t&&c===void 0))return!1;return o!==0};Uat({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!toe(t,!0))return!1;var i=t.raw;return i.length===t.length&&toe(i,!1)}})});var ioe=S(()=>{"use strict";var $at=At(),Wat=li(),Gat=Qt(),Zat=sr(),Kat=Gr();$at&&(Kat(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=Gat(this),i=Zat(t);return i===0?0:i-1}}),Wat("lastIndex"))});var ooe=S(()=>{"use strict";var Hat=At(),Xat=li(),noe=Qt(),aoe=sr(),Jat=Gr();Hat&&(Jat(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=noe(this),i=aoe(t);return i===0?void 0:t[i-1]},set:function(t){var i=noe(this),o=aoe(i);return i[o===0?0:o-1]=t}}),Xat("lastItem"))});var soe=S(()=>{"use strict";eM()});var loe=S(()=>{"use strict";rM()});var uoe=S(()=>{"use strict";iM()});var Do=S((z4t,poe)=>{"use strict";var coe=Ze(),Yat=ru(),hoe=tn(),Qat=hoe.Map,doe=hoe.proto,eot=coe(doe.forEach),foe=coe(doe.entries),tot=foe(new Qat).next;poe.exports=function(e,t,i){return i?Yat({iterator:foe(e),next:tot},function(o){return t(o[1],o[0])}):eot(e,t)}});var PS=S((N4t,moe)=>{"use strict";var rot=Ze(),iot=kt(),not=Da(),aot=sr(),oot=Qt(),sL=tn(),sot=Do(),lot=sL.Map,uot=sL.has,cot=sL.set,hot=rot([].push);moe.exports=function(t){var i=oot(this),o=aot(i),c=[],a=new lot,g=not(t)?function(M){return M}:iot(t),x,E,P;for(x=0;x<o;x++)E=i[x],P=g(E),uot(a,P)||cot(a,P,E);return sot(a,function(M){hot(c,M)}),c}});var voe=S(()=>{"use strict";var dot=K(),fot=li(),pot=PS();dot({target:"Array",proto:!0,forced:!0},{uniqueBy:pot});fot("uniqueBy")});var goe=S(()=>{"use strict";aM()});var yoe=S(()=>{"use strict";RM()});var _oe=S(()=>{"use strict";ZM()});var xoe=S(()=>{"use strict";KM()});var uL=S((X4t,Eoe)=>{"use strict";var mot=Ot(),vot=at(),got=Ze(),yot=qr(),_ot=ot(),xot=kt(),Soe=Da(),lL=xi(),Toe=Rt(),bot=Toe("asyncDispose"),boe=Toe("dispose"),wot=got([].push),Sot=function(e,t){if(t==="async-dispose"){var i=lL(e,bot);return i!==void 0||(i=lL(e,boe),i===void 0)?i:function(){var o=this,c=mot("Promise");return new c(function(a){vot(i,o),a(void 0)})}}return lL(e,boe)},woe=function(e,t,i){return arguments.length<3&&!Soe(e)&&(i=xot(Sot(_ot(e),t))),i===void 0?function(){}:yot(i,e)};Eoe.exports=function(e,t,i,o){var c;if(arguments.length<4){if(Soe(t)&&i==="sync-dispose")return;c=woe(t,i)}else c=woe(void 0,i,o);wot(e.stack,c)}});var Ooe=S(()=>{"use strict";var Tot=K(),MS=At(),Poe=Ot(),Aoe=kt(),Eot=Yn(),Coe=wr(),Aot=ko(),qot=Gr(),Moe=Rt(),Roe=yr(),cL=uL(),qoe=ss(),Ioe=Poe("Promise"),Iot=Poe("SuppressedError"),Pot=ReferenceError,Cot=Moe("asyncDispose"),Mot=Moe("toStringTag"),OS="AsyncDisposableStack",Rot=Roe.set,RS=Roe.getterFor(OS),hL="async-dispose",__="disposed",Oot="pending",CS=function(e){var t=RS(e);if(t.state===__)throw new Pot(OS+" already disposed");return t},dL=function(){Rot(Eot(this,om),{type:OS,state:Oot,stack:[]}),MS||(this.disposed=!1)},om=dL.prototype;Aot(om,{disposeAsync:function(){var t=this;return new Ioe(function(i,o){var c=RS(t);if(c.state===__)return i(void 0);c.state=__,MS||(t.disposed=!0);var a=c.stack,g=a.length,x=!1,E,P=function(O){x?E=new Iot(O,E):(x=!0,E=O),M()},M=function(){if(g){var O=a[--g];a[g]=null;try{Ioe.resolve(O()).then(M,P)}catch(z){P(z)}}else c.stack=null,x?o(E):i(void 0)};M()})},use:function(t){return cL(CS(this),t,hL),t},adopt:function(t,i){var o=CS(this);return Aoe(i),cL(o,void 0,hL,function(){return i(t)}),t},defer:function(t){var i=CS(this);Aoe(t),cL(i,void 0,hL,t)},move:function(){var t=CS(this),i=new dL;return RS(i).stack=t.stack,t.stack=[],t.state=__,MS||(this.disposed=!0),i}});MS&&qot(om,"disposed",{configurable:!0,get:function(){return RS(this).state===__}});Coe(om,Cot,om.disposeAsync,{name:"disposeAsync"});Coe(om,Mot,OS,{nonWritable:!0});var kot=qoe&&qoe<136;Tot({global:!0,constructor:!0,forced:kot},{AsyncDisposableStack:dL})});var zoe=S(()=>{"use strict";var Dot=K(),Lot=Yn(),Fot=Vi(),Doe=Ui(),Loe=Ht(),zot=Rt(),Oc=nm(),Foe=fr(),koe=zot("toStringTag"),Not=TypeError,fL=function(){if(Lot(this,Oc),Fot(this)===Oc)throw new Not("Abstract class AsyncIterator not directly constructable")};fL.prototype=Oc;Loe(Oc,koe)||Doe(Oc,koe,"AsyncIterator");(Foe||!Loe(Oc,"constructor")||Oc.constructor===Object)&&Doe(Oc,"constructor",fL);Dot({global:!0,constructor:!0,forced:Foe},{AsyncIterator:fL})});var _d=S((t6t,Goe)=>{"use strict";var Bot=at(),kS=qc(),Noe=ot(),jot=bi(),Uot=Ui(),Vot=ko(),$ot=Rt(),joe=yr(),Wot=Ot(),Got=xi(),Zot=nm(),pL=en(),Boe=mn(),tl=Wot("Promise"),Kot=$ot("toStringTag"),Uoe="AsyncIteratorHelper",Voe="WrapForValidAsyncIterator",Hot=joe.set,$oe=function(e){var t=!e,i=joe.getterFor(e?Voe:Uoe),o=function(c){var a=kS(function(){return i(c)}),g=a.error,x=a.value;return g||t&&x.done?{exit:!0,value:g?tl.reject(x):tl.resolve(pL(void 0,!0))}:{exit:!1,value:x}};return Vot(jot(Zot),{next:function(){var a=o(this),g=a.value;if(a.exit)return g;var x=kS(function(){return Noe(g.nextHandler(tl))}),E=x.error,P=x.value;return E&&(g.done=!0),E?tl.reject(P):tl.resolve(P)},return:function(){var c=o(this),a=c.value;if(c.exit)return a;a.done=!0;var g=a.iterator,x,E,P=kS(function(){if(a.inner)try{Boe(a.inner.iterator,"normal")}catch(M){return Boe(g,"throw",M)}return Got(g,"return")});return x=E=P.value,P.error?tl.reject(E):x===void 0?tl.resolve(pL(void 0,!0)):(P=kS(function(){return Bot(x,g)}),E=P.value,P.error?tl.reject(E):e?tl.resolve(E):tl.resolve(E).then(function(M){return Noe(M),pL(void 0,!0)}))}})},Xot=$oe(!0),Woe=$oe(!1);Uot(Woe,Kot,"Async Iterator Helper");Goe.exports=function(e,t){var i=function(c,a){a?(a.iterator=c.iterator,a.next=c.next):a=c,a.type=t?Voe:Uoe,a.nextHandler=e,a.counter=0,a.done=!1,Hot(this,a)};return i.prototype=t?Xot:Woe,i}});var vL=S((r6t,Koe)=>{"use strict";var Jot=at(),Yot=kt(),mL=ot(),Qot=Pt(),est=ri(),tst=_d(),Zoe=en(),rst=am(),ist=tst(function(e){var t=this,i=t.iterator,o=t.mapper;return new e(function(c,a){var g=function(E){t.done=!0,a(E)},x=function(E){rst(i,g,E,g)};e.resolve(mL(Jot(t.next,i))).then(function(E){try{if(mL(E).done)t.done=!0,c(Zoe(void 0,!0));else{var P=E.value;try{var M=o(P,t.counter++),O=function(z){c(Zoe(z,!1))};Qot(M)?e.resolve(M).then(O,x):O(M)}catch(z){x(z)}}}catch(z){g(z)}},g)})});Koe.exports=function(t){return mL(this),Yot(t),new ist(est(this),{mapper:t})}});var gL=S((i6t,Hoe)=>{"use strict";var nst=at(),ast=vL(),ost=function(e,t){return[t,e]};Hoe.exports=function(){return nst(ast,this,ost)}});var Xoe=S(()=>{"use strict";var sst=K(),lst=gL();sst({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:lst})});var ese=S(()=>{"use strict";var ust=at(),cst=wr(),hst=Ot(),dst=xi(),fst=Ht(),pst=Rt(),Joe=nm(),Yoe=pst("asyncDispose"),Qoe=hst("Promise");fst(Joe,Yoe)||cst(Joe,Yoe,function(){var e=this;return new Qoe(function(t,i){var o=dst(e,"return");o?Qoe.resolve(ust(o,e)).then(function(){t(void 0)},i):t(void 0)})})});var rse=S(()=>{"use strict";var mst=K(),vst=at(),yL=ot(),gst=ri(),yst=Op(),_st=kp(),xst=_d(),tse=en(),bst=xst(function(e){var t=this;return new e(function(i,o){var c=function(g){t.done=!0,o(g)},a=function(){try{e.resolve(yL(vst(t.next,t.iterator))).then(function(g){try{yL(g).done?(t.done=!0,i(tse(void 0,!0))):t.remaining?(t.remaining--,a()):i(tse(g.value,!1))}catch(x){c(x)}},c)}catch(g){c(g)}};a()})});mst({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(t){yL(this);var i=_st(yst(+t));return new bst(gst(this),{remaining:i})}})});var ise=S(()=>{"use strict";var wst=K(),Sst=yd().every;wst({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(t){return Sst(this,t)}})});var ase=S(()=>{"use strict";var Tst=K(),Est=at(),Ast=kt(),_L=ot(),qst=Pt(),Ist=ri(),Pst=_d(),nse=en(),Cst=am(),Mst=Pst(function(e){var t=this,i=t.iterator,o=t.predicate;return new e(function(c,a){var g=function(P){t.done=!0,a(P)},x=function(P){Cst(i,g,P,g)},E=function(){try{e.resolve(_L(Est(t.next,i))).then(function(P){try{if(_L(P).done)t.done=!0,c(nse(void 0,!0));else{var M=P.value;try{var O=o(M,t.counter++),z=function(oe){oe?c(nse(M,!1)):E()};qst(O)?e.resolve(O).then(z,x):z(O)}catch(oe){x(oe)}}}catch(oe){g(oe)}},g)}catch(P){g(P)}};E()})});Tst({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(t){return _L(this),Ast(t),new Mst(Ist(this),{predicate:t})}})});var ose=S(()=>{"use strict";var Rst=K(),Ost=yd().find;Rst({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(t){return Ost(this,t)}})});var xL=S((v6t,use)=>{"use strict";var kst=at(),Dst=Zt(),sse=ot(),lse=ri(),Lst=Zs(),Fst=xi(),zst=Rt(),Nst=g_(),Bst=zst("asyncIterator");use.exports=function(e){var t=sse(e),i=!0,o=Fst(t,Bst),c;return Dst(o)||(o=Lst(t),i=!1),o!==void 0?c=kst(o,t):(c=t,i=!0),sse(c),lse(i?c:new Nst(lse(c)))}});var dse=S(()=>{"use strict";var jst=K(),cse=at(),Ust=kt(),x_=ot(),Vst=Pt(),$st=ri(),Wst=_d(),hse=en(),Gst=xL(),Zst=am(),Kst=Wst(function(e){var t=this,i=t.iterator,o=t.mapper;return new e(function(c,a){var g=function(M){t.done=!0,a(M)},x=function(M){Zst(i,g,M,g)},E=function(){try{e.resolve(x_(cse(t.next,i))).then(function(M){try{if(x_(M).done)t.done=!0,c(hse(void 0,!0));else{var O=M.value;try{var z=o(O,t.counter++),oe=function(we){try{t.inner=Gst(we),P()}catch(ye){x(ye)}};Vst(z)?e.resolve(z).then(oe,x):oe(z)}catch(we){x(we)}}}catch(we){g(we)}},g)}catch(M){g(M)}},P=function(){var M=t.inner;if(M)try{e.resolve(x_(cse(M.next,M.iterator))).then(function(O){try{x_(O).done?(t.inner=null,E()):c(hse(O.value,!1))}catch(z){x(z)}},x)}catch(O){x(O)}else E()};P()})});jst({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(t){return x_(this),Ust(t),new Kst($st(this),{mapper:t,inner:null})}})});var fse=S(()=>{"use strict";var Hst=K(),Xst=yd().forEach;Hst({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(t){return Xst(this,t)}})});var bL=S((b6t,pse)=>{"use strict";var Jst=at(),Yst=_d();pse.exports=Yst(function(){return Jst(this.next,this.iterator)},!0)});var mse=S(()=>{"use strict";var Qst=K(),elt=Qt(),tlt=Rn(),rlt=xL(),ilt=nm(),nlt=bL();Qst({target:"AsyncIterator",stat:!0,forced:!0},{from:function(t){var i=rlt(typeof t=="string"?elt(t):t);return tlt(ilt,i.iterator)?i.iterator:new nlt(i)}})});var vse=S(()=>{"use strict";var alt=K(),olt=gL();alt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:olt})});var gse=S(()=>{"use strict";var slt=K(),llt=vL();slt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:llt})});var yse=S(()=>{"use strict";var ult=K(),clt=at(),hlt=kt(),wL=ot(),dlt=Pt(),flt=Ot(),plt=ri(),mlt=am(),SL=flt("Promise"),vlt=TypeError;ult({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(t){wL(this),hlt(t);var i=plt(this),o=i.iterator,c=i.next,a=arguments.length<2,g=a?void 0:arguments[1],x=0;return new SL(function(E,P){var M=function(z){mlt(o,P,z,P)},O=function(){try{SL.resolve(wL(clt(c,o))).then(function(z){try{if(wL(z).done)a?P(new vlt("Reduce of empty iterator with no initial value")):E(g);else{var oe=z.value;if(a)a=!1,g=oe,O();else try{var we=t(g,oe,x),ye=function(te){g=te,O()};dlt(we)?SL.resolve(we).then(ye,M):ye(we)}catch(te){M(te)}}x++}catch(te){P(te)}},P)}catch(z){P(z)}};O()})}})});var _se=S(()=>{"use strict";var glt=K(),ylt=yd().some;glt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(t){return ylt(this,t)}})});var wse=S(()=>{"use strict";var _lt=K(),xse=at(),bse=ot(),xlt=ri(),blt=Op(),wlt=kp(),Slt=_d(),TL=en(),Tlt=Slt(function(e){var t=this,i=t.iterator,o;if(!t.remaining--){var c=TL(void 0,!0);return t.done=!0,o=i.return,o!==void 0?e.resolve(xse(o,i,void 0)).then(function(){return c}):c}return e.resolve(xse(t.next,i)).then(function(a){return bse(a).done?(t.done=!0,TL(void 0,!0)):TL(a.value,!1)}).then(null,function(a){throw t.done=!0,a})});_lt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(t){bse(this);var i=wlt(blt(+t));return new Tlt(xlt(this),{remaining:i})}})});var Sse=S(()=>{"use strict";var Elt=K(),Alt=yd().toArray;Elt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return Alt(this,void 0,[])}})});var LS=S((L6t,Pse)=>{"use strict";var Ese=yr(),qlt=gc(),EL=en(),Ilt=Da(),Plt=Pt(),Clt=Gr(),Ase=At(),b_="Incorrect Iterator.range arguments",qL="NumericRangeIterator",Mlt=Ese.set,qse=Ese.getterFor(qL),Tse=RangeError,AL=TypeError,Ise=qlt(function(t,i,o,c,a,g){if(typeof t!=c||i!==1/0&&i!==-1/0&&typeof i!=c)throw new AL(b_);if(t===1/0||t===-1/0)throw new Tse(b_);var x=i>t,E=!1,P;if(o===void 0)P=void 0;else if(Plt(o))P=o.step,E=!!o.inclusive;else if(typeof o==c)P=o;else throw new AL(b_);if(Ilt(P)&&(P=x?g:-g),typeof P!=c)throw new AL(b_);if(P===1/0||P===-1/0||P===a&&t!==i)throw new Tse(b_);var M=t!==t||i!==i||P!==P||i>t!=P>a;Mlt(this,{type:qL,start:t,end:i,step:P,inclusive:E,hitsEnd:M,currentCount:a,zero:a}),Ase||(this.start=t,this.end=i,this.step=P,this.inclusive=E)},qL,function(){var t=qse(this);if(t.hitsEnd)return EL(void 0,!0);var i=t.start,o=t.end,c=t.step,a=i+c*t.currentCount++;a===o&&(t.hitsEnd=!0);var g=t.inclusive,x;return o>i?x=g?a>o:a>=o:x=g?o>a:o>=a,x?(t.hitsEnd=!0,EL(void 0,!0)):EL(a,!1)}),DS=function(e){Clt(Ise.prototype,e,{get:function(){return qse(this)[e]},set:function(){},configurable:!0,enumerable:!1})};Ase&&(DS("start"),DS("end"),DS("inclusive"),DS("step"));Pse.exports=Ise});var Cse=S(()=>{"use strict";var Rlt=K(),Olt=LS();typeof BigInt=="function"&&Rlt({target:"BigInt",stat:!0,forced:!0},{range:function(t,i,o){return new Olt(t,i,o,"bigint",BigInt(0),BigInt(1))}})});var IL=S((N6t,kse)=>{"use strict";ww();bS();var Ose=Ot(),klt=bi(),Mse=Pt(),Dlt=Object,Llt=TypeError,Flt=Ose("Map"),zlt=Ose("WeakMap"),FS=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=klt(null)};FS.prototype.get=function(e,t){return this[e]||(this[e]=t())};FS.prototype.next=function(e,t,i){var o=i?this.objectsByIndex[e]||(this.objectsByIndex[e]=new zlt):this.primitives||(this.primitives=new Flt),c=o.get(t);return c||o.set(t,c=new FS),c};var Rse=new FS;kse.exports=function(){var e=Rse,t=arguments.length,i,o;for(i=0;i<t;i++)Mse(o=arguments[i])&&(e=e.next(i,o,!0));if(this===Dlt&&e===Rse)throw new Llt("Composite keys must contain a non-primitive component");for(i=0;i<t;i++)Mse(o=arguments[i])||(e=e.next(i,o,!1));return e}});var Lse=S(()=>{"use strict";var Nlt=K(),Blt=On(),jlt=IL(),Ult=Ot(),Dse=bi(),Vlt=Object,$lt=function(){var e=Ult("Object","freeze");return e?e(Dse(null)):Dse(null)};Nlt({global:!0,forced:!0},{compositeKey:function(){return Blt(jlt,Vlt,arguments).get("object",$lt)}})});var zse=S(()=>{"use strict";var Wlt=K(),Glt=IL(),Fse=Ot(),Zlt=On();Wlt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?Fse("Symbol").for(arguments[0]):Zlt(Glt,null,arguments).get("symbol",Fse("Symbol"))}})});var Nse=S(()=>{"use strict";EM()});var Bse=S(()=>{"use strict";var Klt=K(),Hlt=Ze(),Xlt=Hlt(DataView.prototype.getUint8);Klt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return Xlt(this,t)}})});var jse=S(()=>{"use strict";PM()});var Use=S(()=>{"use strict";var Jlt=K(),Ylt=Ze(),Qlt=AM(),eut=Ap(),tut=yD(),rut=Ylt(DataView.prototype.setUint8);Jlt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,i){Qlt(this);var o=eut(t);return rut(this,o,tut(i))}})});var Zse=S(()=>{"use strict";var iut=K(),NS=At(),nut=Ot(),Vse=kt(),aut=Yn(),$se=wr(),out=ko(),sut=Gr(),Wse=Rt(),Gse=yr(),PL=uL(),lut=nut("SuppressedError"),uut=ReferenceError,cut=Wse("dispose"),hut=Wse("toStringTag"),jS="DisposableStack",dut=Gse.set,BS=Gse.getterFor(jS),CL="sync-dispose",w_="disposed",fut="pending",zS=function(e){var t=BS(e);if(t.state===w_)throw new uut(jS+" already disposed");return t},ML=function(){dut(aut(this,sm),{type:jS,state:fut,stack:[]}),NS||(this.disposed=!1)},sm=ML.prototype;out(sm,{dispose:function(){var t=BS(this);if(t.state!==w_){t.state=w_,NS||(this.disposed=!0);for(var i=t.stack,o=i.length,c=!1,a;o;){var g=i[--o];i[o]=null;try{g()}catch(x){c?a=new lut(x,a):(c=!0,a=x)}}if(t.stack=null,c)throw a}},use:function(t){return PL(zS(this),t,CL),t},adopt:function(t,i){var o=zS(this);return Vse(i),PL(o,void 0,CL,function(){i(t)}),t},defer:function(t){var i=zS(this);Vse(t),PL(i,void 0,CL,t)},move:function(){var t=zS(this),i=new ML;return BS(i).stack=t.stack,t.stack=[],t.state=w_,NS||(this.disposed=!0),i}});NS&&sut(sm,"disposed",{configurable:!0,get:function(){return BS(this).state===w_}});$se(sm,cut,sm.dispose,{name:"dispose"});$se(sm,hut,jS,{nonWritable:!0});iut({global:!0,constructor:!0},{DisposableStack:ML})});var Jse=S(()=>{"use strict";var put=K(),Hse=Ot(),mut=Pt(),vut=pa(),gut=Xe(),Xse="Error",OL="DOMException",yut=Object.setPrototypeOf||{}.__proto__,Kse=Hse(OL),RL=Error,US=RL.isError,_ut=!US||!yut||gut(function(){return Kse&&!US(new Kse(OL))||!US(new RL(Xse,{cause:function(){}}))||US(Hse("Object","create")(RL.prototype))});put({target:"Error",stat:!0,sham:!0,forced:_ut},{isError:function(t){if(!mut(t))return!1;var i=vut(t);return i===Xse||i===OL}})});var kL=S((rVt,Yse)=>{"use strict";var xut=Ze(),but=kt();Yse.exports=function(){return xut(but(this))}});var Qse=S(()=>{"use strict";var wut=K(),Sut=kL();wut({target:"Function",proto:!0,forced:!0},{demethodize:Sut})});var tle=S(()=>{"use strict";var Tut=K(),Eut=Ze(),Aut=Zt(),qut=ny(),Iut=Ht(),Put=At(),Cut=Object.getOwnPropertyDescriptor,ele=/^\s*class\b/,Mut=Eut(ele.exec),Rut=function(e){try{if(!Put||!Mut(ele,qut(e)))return!1}catch(i){}var t=Cut(e,"prototype");return!!t&&Iut(t,"writable")&&!t.writable};Tut({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return Aut(t)&&!Rut(t)}})});var rle=S(()=>{"use strict";var Out=K(),kut=hs();Out({target:"Function",stat:!0,forced:!0},{isConstructor:kut})});var ale=S(()=>{"use strict";var Dut=Rt(),Lut=Or().f,ile=Dut("metadata"),nle=Function.prototype;nle[ile]===void 0&&Lut(nle,ile,{value:null})});var ole=S(()=>{"use strict";var Fut=K(),zut=kL();Fut({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:zut})});var sle=S(()=>{"use strict";tR()});var lle=S(()=>{"use strict";oR()});var DL=S((gVt,ule)=>{"use strict";gw();var Nut=at(),But=vc().IteratorPrototype.map,jut=function(e,t){return[t,e]};ule.exports=function(){return Nut(But,this,jut)}});var cle=S(()=>{"use strict";var Uut=K(),Vut=DL();Uut({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:Vut})});var fle=S(()=>{"use strict";var $ut=K(),hle=at(),Wut=kt(),dle=ot(),Gut=Zs(),Zut=Ec(),Kut=en(),Hut=Array,Xut=Zut(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,i=this.iterables;if(t>=i.length)return this.done=!0,Kut(void 0,!0);var o=i[t];this.iterables[t]=null,e=this.iterator=hle(o.method,o.iterable),this.next=e.next}var c=dle(hle(this.next,e));if(c.done){this.iterator=null,this.next=null;continue}return c}},!1,!0);$ut({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,i=Hut(t),o=0;o<t;o++){var c=dle(arguments[o]);i[o]={iterable:c,method:Wut(Gut(c))}}return new Xut({iterables:i,nextIterableIndex:0,iterator:null,next:null})}})});var vle=S(()=>{"use strict";var Jut=at(),Yut=wr(),Qut=xi(),ect=Ht(),tct=Rt(),ple=vc().IteratorPrototype,mle=tct("dispose");ect(ple,mle)||Yut(ple,mle,function(){var e=Qut(this,"return");e&&Jut(e,this)})});var gle=S(()=>{"use strict";hR()});var yle=S(()=>{"use strict";fR()});var _le=S(()=>{"use strict";mR()});var xle=S(()=>{"use strict";gR()});var ble=S(()=>{"use strict";SR()});var wle=S(()=>{"use strict";ER()});var Sle=S(()=>{"use strict";AR()});var Tle=S(()=>{"use strict";var rct=K(),ict=DL();rct({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:ict})});var Ele=S(()=>{"use strict";gw()});var qle=S(()=>{"use strict";var nct=K(),Ale=LS(),act=TypeError;nct({target:"Iterator",stat:!0,forced:!0},{range:function(t,i,o){if(typeof t=="number")return new Ale(t,i,o,"number",0,1);if(typeof t=="bigint")return new Ale(t,i,o,"bigint",BigInt(0),BigInt(1));throw new act("Incorrect Iterator.range arguments")}})});var Ile=S(()=>{"use strict";PR()});var Ple=S(()=>{"use strict";MR()});var Cle=S(()=>{"use strict";OR()});var Mle=S(()=>{"use strict";kR()});var Ole=S(()=>{"use strict";var oct=K(),sct=ot(),lct=g_(),uct=bL(),Rle=ri();oct({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new uct(Rle(new lct(Rle(sct(this)))))}})});var LL=S((e8t,kle)=>{"use strict";var cct=Xe();kle.exports=!cct(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var FL=S((t8t,Dle)=>{"use strict";var hct=Pt(),dct=yr().get;Dle.exports=function(t){if(!hct(t))return!1;var i=dct(t);return!!i&&i.type==="RawJSON"}});var Lle=S(()=>{"use strict";var fct=K(),pct=LL(),mct=FL();fct({target:"JSON",stat:!0,forced:!pct},{isRawJSON:mct})});var NL=S((n8t,Ble)=>{"use strict";var zL=Ze(),vct=Ht(),VS=SyntaxError,gct=parseInt,yct=String.fromCharCode,_ct=zL("".charAt),Fle=zL("".slice),zle=zL(/./.exec),Nle={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},xct=/^[\da-f]{4}$/i,bct=/^[\u0000-\u001F]$/;Ble.exports=function(e,t){for(var i=!0,o="";t<e.length;){var c=_ct(e,t);if(c==="\\"){var a=Fle(e,t,t+2);if(vct(Nle,a))o+=Nle[a],t+=2;else if(a==="\\u"){t+=2;var g=Fle(e,t,t+4);if(!zle(xct,g))throw new VS("Bad Unicode escape at: "+t);o+=yct(gct(g,16)),t+=4}else throw new VS("Unknown escape sequence: \""+a+"\"")}else if(c==="\""){i=!1,t++;break}else{if(zle(bct,c))throw new VS("Bad control character in string literal at: "+t);o+=c,t++}}if(i)throw new VS("Unterminated string at: "+t);return{value:o,end:t}}});var Kle=S(()=>{"use strict";var wct=K(),Sct=At(),ZL=nt(),Tct=Ot(),$S=Ze(),Ect=at(),Gle=Zt(),Act=Pt(),qct=cs(),Ict=Ht(),Pct=Nt(),jle=sr(),$L=Ro(),Zle=Xe(),Cct=NL(),Mct=oc(),Ule=ZL.JSON,Rct=ZL.Number,lm=ZL.SyntaxError,KL=Ule&&Ule.parse,Oct=Tct("Object","keys"),kct=Object.getOwnPropertyDescriptor,Dn=$S("".charAt),BL=$S("".slice),jL=$S(/./.exec),Vle=$S([].push),UL=/^\d$/,Dct=/^[1-9]$/,Lct=/^[\d-]$/,S_=/^[\t\n\r ]$/,VL=0,$le=1,Fct=function(e,t){e=Pct(e);var i=new GL(e,0,""),o=i.parse(),c=o.value,a=i.skip(S_,o.end);if(a<e.length)throw new lm("Unexpected extra character: \""+Dn(e,a)+"\" after the parsed data at: "+a);return Gle(t)?WL({"":c},"",t,o):c},WL=function(e,t,i,o){var c=e[t],a=o&&c===o.value,g=a&&typeof o.source=="string"?{source:o.source}:{},x,E,P,M,O;if(Act(c)){var z=qct(c),oe=a?o.nodes:z?[]:{};if(z)for(x=oe.length,P=jle(c),M=0;M<P;M++)Wle(c,M,WL(c,""+M,i,M<x?oe[M]:void 0));else for(E=Oct(c),P=jle(E),M=0;M<P;M++)O=E[M],Wle(c,O,WL(c,O,i,Ict(oe,O)?oe[O]:void 0))}return Ect(i,e,t,c,g)},Wle=function(e,t,i){if(Sct){var o=kct(e,t);if(o&&!o.configurable)return}i===void 0?delete e[t]:$L(e,t,i)},zct=function(e,t,i,o){this.value=e,this.end=t,this.source=i,this.nodes=o},GL=function(e,t){this.source=e,this.index=t};GL.prototype={fork:function(e){return new GL(this.source,e)},parse:function(){var e=this.source,t=this.skip(S_,this.index),i=this.fork(t),o=Dn(e,t);if(jL(Lct,o))return i.number();switch(o){case"{":return i.object();case"[":return i.array();case"\"":return i.string();case"t":return i.keyword(!0);case"f":return i.keyword(!1);case"n":return i.keyword(null)}throw new lm("Unexpected character: \""+o+"\" at: "+t)},node:function(e,t,i,o,c){return new zct(t,o,e?null:BL(this.source,i,o),c)},object:function(){for(var e=this.source,t=this.index+1,i=!1,o={},c={};t<e.length;){if(t=this.until(["\"","}"],t),Dn(e,t)==="}"&&!i){t++;break}var a=this.fork(t).string(),g=a.value;t=a.end,t=this.until([":"],t)+1,t=this.skip(S_,t),a=this.fork(t).parse(),$L(c,g,a),$L(o,g,a.value),t=this.until([",","}"],a.end);var x=Dn(e,t);if(x===",")i=!0,t++;else if(x==="}"){t++;break}}return this.node($le,o,this.index,t,c)},array:function(){for(var e=this.source,t=this.index+1,i=!1,o=[],c=[];t<e.length;){if(t=this.skip(S_,t),Dn(e,t)==="]"&&!i){t++;break}var a=this.fork(t).parse();if(Vle(c,a),Vle(o,a.value),t=this.until([",","]"],a.end),Dn(e,t)===",")i=!0,t++;else if(Dn(e,t)==="]"){t++;break}}return this.node($le,o,this.index,t,c)},string:function(){var e=this.index,t=Cct(this.source,this.index+1);return this.node(VL,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,i=t;if(Dn(e,i)==="-"&&i++,Dn(e,i)==="0")i++;else if(jL(Dct,Dn(e,i)))i=this.skip(UL,i+1);else throw new lm("Failed to parse number at: "+i);if(Dn(e,i)==="."&&(i=this.skip(UL,i+1)),Dn(e,i)==="e"||Dn(e,i)==="E"){i++,(Dn(e,i)==="+"||Dn(e,i)==="-")&&i++;var o=i;if(i=this.skip(UL,i),o===i)throw new lm("Failed to parse number's exponent value at: "+i)}return this.node(VL,Rct(BL(e,t,i)),t,i)},keyword:function(e){var t=""+e,i=this.index,o=i+t.length;if(BL(this.source,i,o)!==t)throw new lm("Failed to parse value at: "+i);return this.node(VL,e,i,o)},skip:function(e,t){for(var i=this.source;t<i.length&&jL(e,Dn(i,t));t++);return t},until:function(e,t){t=this.skip(S_,t);for(var i=Dn(this.source,t),o=0;o<e.length;o++)if(e[o]===i)return t;throw new lm("Unexpected character: \""+i+"\" at: "+t)}};var Nct=Zle(function(){var e="9007199254740993",t;return KL(e,function(i,o,c){t=c.source}),t!==e}),Bct=Mct&&!Zle(function(){return 1/KL("-0 \t")!==-1/0});wct({target:"JSON",stat:!0,forced:Nct},{parse:function(t,i){return Bct&&!Gle(i)?KL(t):Fct(t,i)}})});var rue=S(()=>{"use strict";var eue=K(),jct=eu(),tue=LL(),WS=Ot(),Uct=at(),YL=Ze(),Vct=Zt(),$ct=FL(),Wct=Nt(),Gct=Ro(),Zct=NL(),Kct=lC(),Hct=lc(),Xct=yr().set,Jct=String,Hle=SyntaxError,Yct=WS("JSON","parse"),Xle=WS("JSON","stringify"),Qct=WS("Object","create"),eht=WS("Object","freeze"),XL=YL("".charAt),HL=YL("".slice),tht=YL([].push),JL=Hct(),Jle=JL.length,Yle="Unacceptable as raw JSON",Qle=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};eue({target:"JSON",stat:!0,forced:!tue},{rawJSON:function(t){var i=Wct(t);if(i===""||Qle(XL(i,0))||Qle(XL(i,i.length-1)))throw new Hle(Yle);var o=Yct(i);if(typeof o=="object"&&o!==null)throw new Hle(Yle);var c=Qct(null);return Xct(c,{type:"RawJSON"}),Gct(c,"rawJSON",i),jct?eht(c):c}});Xle&&eue({target:"JSON",stat:!0,arity:3,forced:!tue},{stringify:function(t,i,o){var c=Kct(i),a=[],g=Xle(t,function(oe,we){var ye=Vct(c)?Uct(c,this,Jct(oe),we):we;return $ct(ye)?JL+(tht(a,ye.rawJSON)-1):ye},o);if(typeof g!="string")return g;for(var x="",E=g.length,P=0;P<E;P++){var M=XL(g,P);if(M==="\""){var O=Zct(g,++P).end-1,z=HL(g,P,O);x+=HL(z,0,Jle)===JL?a[HL(z,Jle)]:"\""+z+"\"",P=O}else x+=M}return x}})});var Ln=S((u8t,iue)=>{"use strict";var rht=tn().has;iue.exports=function(e){return rht(e),e}});var nue=S(()=>{"use strict";var iht=K(),nht=Ln(),aht=tn().remove;iht({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=nht(this),i=!0,o,c=0,a=arguments.length;c<a;c++)o=aht(t,arguments[c]),i=i&&o;return!!i}})});var oue=S(()=>{"use strict";var oht=K(),sht=Ln(),QL=tn(),lht=QL.get,uht=QL.has,aue=QL.set;oht({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,i){var o=sht(this),c,a;return uht(o,t)?(c=lht(o,t),"update"in i&&(c=i.update(c,t,o),aue(o,t,c)),c):(a=i.insert(t,o),aue(o,t,a),a)}})});var sue=S(()=>{"use strict";var cht=K(),hht=qr(),dht=Ln(),fht=Do();cht({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var i=dht(this),o=hht(t,arguments.length>1?arguments[1]:void 0);return fht(i,function(c,a){if(!o(c,a,i))return!1},!0)!==!1}})});var uue=S(()=>{"use strict";var pht=K(),mht=qr(),vht=Ln(),lue=tn(),ght=Do(),yht=lue.Map,_ht=lue.set;pht({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var i=vht(this),o=mht(t,arguments.length>1?arguments[1]:void 0),c=new yht;return ght(i,function(a,g){o(a,g,i)&&_ht(c,g,a)}),c}})});var cue=S(()=>{"use strict";var xht=K(),bht=qr(),wht=Ln(),Sht=Do();xht({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var i=wht(this),o=bht(t,arguments.length>1?arguments[1]:void 0),c=Sht(i,function(a,g){if(o(a,g,i))return{value:a}},!0);return c&&c.value}})});var hue=S(()=>{"use strict";var Tht=K(),Eht=qr(),Aht=Ln(),qht=Do();Tht({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var i=Aht(this),o=Eht(t,arguments.length>1?arguments[1]:void 0),c=qht(i,function(a,g){if(o(a,g,i))return{key:g}},!0);return c&&c.key}})});var T_=S((w8t,due)=>{"use strict";var Iht=qr(),Pht=ot(),Cht=Qt(),Mht=si();due.exports=function(e,t,i){return function(c){var a=Cht(c),g=arguments.length,x=g>1?arguments[1]:void 0,E=x!==void 0,P=E?Iht(x,g>2?arguments[2]:void 0):void 0,M=new e,O=0;return Mht(a,function(z){var oe=E?P(z,O++):z;i?t(M,Pht(oe)[0],oe[1]):t(M,oe)}),M}}});var pue=S(()=>{"use strict";var Rht=K(),fue=tn(),Oht=T_();Rht({target:"Map",stat:!0,forced:!0},{from:Oht(fue.Map,fue.set,!0)})});var mue=S(()=>{"use strict";var kht=K(),Dht=Ln(),eF=tn(),Lht=eF.get,Fht=eF.has,zht=eF.set;kht({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,i){return Fht(Dht(this),t)?Lht(this,t):(zht(this,t,i),i)}})});var vue=S(()=>{"use strict";var Nht=K(),Bht=kt(),jht=Ln(),tF=tn(),Uht=tF.get,Vht=tF.has,$ht=tF.set;Nht({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,i){if(jht(this),Bht(i),Vht(this,t))return Uht(this,t);t===0&&1/t===-1/0&&(t=0);var o=i(t);return $ht(this,t,o),o}})});var gue=S(()=>{"use strict";UR()});var _ue=S((M8t,yue)=>{"use strict";yue.exports=function(e,t){return e===t||e!==e&&t!==t}});var xue=S(()=>{"use strict";var Wht=K(),Ght=_ue(),Zht=Ln(),Kht=Do();Wht({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return Kht(Zht(this),function(i){if(Ght(i,t))return!0},!0)===!0}})});var wue=S(()=>{"use strict";var Hht=K(),Xht=at(),Jht=si(),Yht=Zt(),bue=kt(),Qht=tn().Map;Hht({target:"Map",stat:!0,forced:!0},{keyBy:function(t,i){var o=Yht(this)?this:Qht,c=new o;bue(i);var a=bue(c.set);return Jht(t,function(g){Xht(a,c,i(g),g)}),c}})});var Sue=S(()=>{"use strict";var edt=K(),tdt=Ln(),rdt=Do();edt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var i=rdt(tdt(this),function(o,c){if(o===t)return{key:c}},!0);return i&&i.key}})});var Eue=S(()=>{"use strict";var idt=K(),ndt=qr(),adt=Ln(),Tue=tn(),odt=Do(),sdt=Tue.Map,ldt=Tue.set;idt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var i=adt(this),o=ndt(t,arguments.length>1?arguments[1]:void 0),c=new sdt;return odt(i,function(a,g){ldt(c,o(a,g,i),a)}),c}})});var que=S(()=>{"use strict";var udt=K(),cdt=qr(),hdt=Ln(),Aue=tn(),ddt=Do(),fdt=Aue.Map,pdt=Aue.set;udt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var i=hdt(this),o=cdt(t,arguments.length>1?arguments[1]:void 0),c=new fdt;return ddt(i,function(a,g){pdt(c,g,o(a,g,i))}),c}})});var Iue=S(()=>{"use strict";var mdt=K(),vdt=Ln(),gdt=si(),ydt=tn().set;mdt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var i=vdt(this),o=arguments.length,c=0;c<o;)gdt(arguments[c++],function(a,g){ydt(i,a,g)},{AS_ENTRIES:!0});return i}})});var E_=S(($8t,Pue)=>{"use strict";var _dt=ot();Pue.exports=function(e,t,i){return function(){for(var c=new e,a=arguments.length,g=0;g<a;g++){var x=arguments[g];i?t(c,_dt(x)[0],x[1]):t(c,x)}return c}}});var Mue=S(()=>{"use strict";var xdt=K(),Cue=tn(),bdt=E_();xdt({target:"Map",stat:!0,forced:!0},{of:bdt(Cue.Map,Cue.set,!0)})});var Rue=S(()=>{"use strict";var wdt=K(),Sdt=kt(),Tdt=Ln(),Edt=Do(),Adt=TypeError;wdt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var i=Tdt(this),o=arguments.length<2,c=o?void 0:arguments[1];if(Sdt(t),Edt(i,function(a,g){o?(o=!1,c=a):c=t(c,a,g,i)}),o)throw new Adt("Reduce of empty map with no initial value");return c}})});var Oue=S(()=>{"use strict";var qdt=K(),Idt=qr(),Pdt=Ln(),Cdt=Do();qdt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var i=Pdt(this),o=Idt(t,arguments.length>1?arguments[1]:void 0);return Cdt(i,function(c,a){if(o(c,a,i))return!0},!0)===!0}})});var Due=S(()=>{"use strict";var Mdt=K(),kue=kt(),Rdt=Ln(),rF=tn(),Odt=TypeError,kdt=rF.get,Ddt=rF.has,Ldt=rF.set;Mdt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,i){var o=Rdt(this),c=arguments.length;kue(i);var a=Ddt(o,t);if(!a&&c<3)throw new Odt("Updating absent value");var g=a?kdt(o,t):kue(c>2?arguments[2]:void 0)(t,o);return Ldt(o,t,i(g,t,o)),o}})});var KS=S((Q8t,Lue)=>{"use strict";var GS=at(),iF=kt(),ZS=Zt(),Fdt=ot(),zdt=TypeError;Lue.exports=function(t,i){var o=Fdt(this),c=iF(o.get),a=iF(o.has),g=iF(o.set),x=arguments.length>2?arguments[2]:void 0,E;if(!ZS(i)&&!ZS(x))throw new zdt("At least one callback required");return GS(a,o,t)?(E=GS(c,o,t),ZS(i)&&(E=i(E),GS(g,o,t,E))):ZS(x)&&(E=x(),GS(g,o,t,E)),E}});var Fue=S(()=>{"use strict";var Ndt=K(),Bdt=KS();Ndt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Bdt})});var zue=S(()=>{"use strict";var jdt=K(),Udt=KS();jdt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Udt})});var Bue=S((n$t,Nue)=>{"use strict";var Vdt=TypeError;Nue.exports=function(e){if(typeof e=="number")return e;throw new Vdt("Argument is not a number")}});var Vue=S(()=>{"use strict";var $dt=K(),nF=Bue(),jue=Op(),Uue=Cw(),Wdt=RangeError,Gdt=Math.min,Zdt=Math.max;$dt({target:"Math",stat:!0,forced:!0},{clamp:function(t,i,o){if(nF(t),jue(nF(i)),jue(nF(o)),Uue(i,0)&&Uue(o,-0)||i>o)throw new Wdt("`min` should be smaller than `max`");return Gdt(o,Zdt(i,t))}})});var $ue=S(()=>{"use strict";var Kdt=K();Kdt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var Wue=S(()=>{"use strict";var Hdt=K(),Xdt=180/Math.PI;Hdt({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*Xdt}})});var aF=S((h$t,Gue)=>{"use strict";Gue.exports=function(t,i,o,c,a){var g=+t,x=+i,E=+o,P=+c,M=+a;return g!==g||x!==x||E!==E||P!==P||M!==M?NaN:g===1/0||g===-1/0?g:(g-x)*(M-P)/(E-x)+P}});var Zue=S(()=>{"use strict";var Jdt=K(),Ydt=aF(),Qdt=rw();Jdt({target:"Math",stat:!0,forced:!0},{fscale:function(t,i,o,c,a){return Qdt(Ydt(t,i,o,c,a))}})});var Kue=S(()=>{"use strict";GR()});var Hue=S(()=>{"use strict";var eft=K();eft({target:"Math",stat:!0,forced:!0},{iaddh:function(t,i,o,c){var a=t>>>0,g=i>>>0,x=o>>>0;return g+(c>>>0)+((a&x|(a|x)&~(a+x>>>0))>>>31)|0}})});var Xue=S(()=>{"use strict";var tft=K();tft({target:"Math",stat:!0,forced:!0},{imulh:function(t,i){var o=65535,c=+t,a=+i,g=c&o,x=a&o,E=c>>16,P=a>>16,M=(E*x>>>0)+(g*x>>>16);return E*P+(M>>16)+((g*P>>>0)+(M&o)>>16)}})});var Jue=S(()=>{"use strict";var rft=K();rft({target:"Math",stat:!0,forced:!0},{isubh:function(t,i,o,c){var a=t>>>0,g=i>>>0,x=o>>>0;return g-(c>>>0)-((~a&x|~(a^x)&a-x>>>0)>>>31)|0}})});var Yue=S(()=>{"use strict";var ift=K();ift({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var Que=S(()=>{"use strict";var nft=K(),aft=Math.PI/180;nft({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*aft}})});var ece=S(()=>{"use strict";var oft=K(),sft=aF();oft({target:"Math",stat:!0,forced:!0},{scale:sft})});var nce=S(()=>{"use strict";var lft=K(),uft=ot(),cft=eO(),hft=gc(),dft=en(),tce=yr(),rce="Seeded Random",ice=rce+" Generator",fft="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",pft=tce.set,mft=tce.getterFor(ice),vft=TypeError,gft=hft(function(t){pft(this,{type:ice,seed:t%2147483647})},rce,function(){var t=mft(this),i=t.seed=(t.seed*1103515245+12345)%2147483647;return dft((i&1073741823)/1073741823,!1)});lft({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var i=uft(t).seed;if(!cft(i))throw new vft(fft);return new gft(i)}})});var ace=S(()=>{"use strict";var yft=K();yft({target:"Math",stat:!0,forced:!0},{signbit:function(t){var i=+t;return i===i&&i===0?1/i===-1/0:i<0}})});var cce=S(()=>{"use strict";var _ft=K(),xft=Ze(),bft=si(),wft=RangeError,Sft=TypeError,Lo=1/0,Tft=NaN,xd=Math.abs,uF=Math.pow,oce=xft([].push),A_=uF(2,1023),Eft=uF(2,53)-1,sce=Number.MAX_VALUE,lce=uF(2,971),q_={},oF={},sF={},lF={},uce={},HS=function(e,t){var i=e+t,o=t-(i-e);return{hi:i,lo:o}};_ft({target:"Math",stat:!0},{sumPrecise:function(t){var i=[],o=0,c=lF;switch(bft(t,function(xe){if(++o>=Eft)throw new wft("Maximum allowed index exceeded");if(typeof xe!="number")throw new Sft("Value is not a number");c!==q_&&(xe!==xe?c=q_:xe===Lo?c=c===oF?q_:sF:xe===-Lo?c=c===sF?q_:oF:(xe!==0||1/xe===Lo)&&(c===lF||c===uce)&&(c=uce,oce(i,xe)))}),c){case q_:return Tft;case oF:return-Lo;case sF:return Lo;case lF:return-0}for(var a=[],g=0,x,E,P,M,O,z,oe=0;oe<i.length;oe++){x=i[oe];for(var we=0,ye=0;ye<a.length;ye++){if(E=a[ye],xd(x)<xd(E)&&(z=x,x=E,E=z),P=HS(x,E),M=P.hi,O=P.lo,xd(M)===Lo){var te=M===Lo?1:-1;g+=te,x=x-te*A_-te*A_,xd(x)<xd(E)&&(z=x,x=E,E=z),P=HS(x,E),M=P.hi,O=P.lo}O!==0&&(a[we++]=O),x=M}a.length=we,x!==0&&oce(a,x)}var Q=a.length-1;if(M=0,O=0,g!==0){var ee=Q>=0?a[Q]:0;if(Q--,xd(g)>1||g>0&&ee>0||g<0&&ee<0)return g>0?Lo:-Lo;if(P=HS(g*A_,ee/2),M=P.hi,O=P.lo,O*=2,xd(2*M)===Lo)return M>0?M===A_&&O===-(lce/2)&&Q>=0&&a[Q]<0?sce:Lo:M===-A_&&O===lce/2&&Q>=0&&a[Q]>0?-sce:-Lo;O!==0&&(a[++Q]=O,O=0),M*=2}for(;Q>=0&&(P=HS(M,a[Q--]),M=P.hi,O=P.lo,O===0););return Q>=0&&(O<0&&a[Q]<0||O>0&&a[Q]>0)&&(E=O*2,x=M+E,E===x-M&&(M=x)),M}})});var hce=S(()=>{"use strict";var Aft=K();Aft({target:"Math",stat:!0,forced:!0},{umulh:function(t,i){var o=65535,c=+t,a=+i,g=c&o,x=a&o,E=c>>>16,P=a>>>16,M=(E*x>>>0)+(g*x>>>16);return E*P+(M>>>16)+((g*P>>>0)+(M&o)>>>16)}})});var pce=S(()=>{"use strict";var qft=K(),P_=Ze(),Ift=Wr(),I_="Invalid number representation",Pft="Invalid radix",Cft=RangeError,XS=SyntaxError,Mft=TypeError,dce=parseInt,Rft=Math.pow,fce=/^[\d.a-z]+$/,Oft=P_("".charAt),kft=P_(fce.exec),Dft=P_(1 .toString),Lft=P_("".slice),Fft=P_("".split);qft({target:"Number",stat:!0,forced:!0},{fromString:function(t,i){var o=1;if(typeof t!="string")throw new Mft(I_);if(!t.length)throw new XS(I_);if(Oft(t,0)==="-"&&(o=-1,t=Lft(t,1),!t.length))throw new XS(I_);var c=i===void 0?10:Ift(i);if(c<2||c>36)throw new Cft(Pft);if(!kft(fce,t))throw new XS(I_);var a=Fft(t,"."),g=dce(a[0],c);if(a.length>1&&(g+=dce(a[1],c)/Rft(c,a[1].length)),c===10&&Dft(g,c)!==t)throw new XS(I_);return o*g}})});var mce=S(()=>{"use strict";var zft=K(),Nft=LS();zft({target:"Number",stat:!0,forced:!0},{range:function(t,i,o){return new Nft(t,i,o,"number",0,1)}})});var vce=S(()=>{"use strict";fO()});var YS=S((U$t,_ce)=>{"use strict";var gce=yr(),Bft=gc(),JS=en(),jft=Ht(),Uft=Qh(),Vft=Qt(),yce="Object Iterator",$ft=gce.set,Wft=gce.getterFor(yce);_ce.exports=Bft(function(t,i){var o=Vft(t);$ft(this,{type:yce,mode:i,object:o,keys:Uft(o),index:0})},"Object",function(){for(var t=Wft(this),i=t.keys;;){if(i===null||t.index>=i.length)return t.object=t.keys=null,JS(void 0,!0);var o=i[t.index++],c=t.object;if(jft(c,o)){switch(t.mode){case"keys":return JS(o,!1);case"values":return JS(c[o],!1)}return JS([o,c[o]],!1)}}})});var xce=S(()=>{"use strict";var Gft=K(),Zft=YS();Gft({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new Zft(t,"entries")}})});var bce=S(()=>{"use strict";var Kft=K(),Hft=YS();Kft({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new Hft(t,"keys")}})});var wce=S(()=>{"use strict";var Xft=K(),Jft=YS();Xft({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new Jft(t,"values")}})});var Sce=S(()=>{"use strict";dO()});var Oce=S(()=>{"use strict";var Yft=K(),QS=at(),C_=At(),Qft=_c(),Tce=kt(),ept=ot(),tpt=Yn(),Ece=Zt(),rpt=Da(),ipt=Pt(),eT=xi(),npt=wr(),cF=ko(),Ace=Gr(),um=DO(),apt=Rt(),qce=yr(),opt=apt("observable"),hF="Observable",Ice="Subscription",Pce="SubscriptionObserver",dF=qce.getterFor,fF=qce.set,spt=dF(hF),Cce=dF(Ice),tT=dF(Pce),Mce=function(e){this.observer=ept(e),this.cleanup=null,this.subscriptionObserver=null};Mce.prototype={type:Ice,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){um(t)}}},close:function(){if(!C_){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var pF=function(e,t){var i=fF(this,new Mce(e)),o;C_||(this.closed=!1);try{(o=eT(e,"start"))&&QS(o,e,this)}catch(x){um(x)}if(!i.isClosed()){var c=i.subscriptionObserver=new mF(i);try{var a=t(c),g=a;rpt(a)||(i.cleanup=Ece(a.unsubscribe)?function(){g.unsubscribe()}:Tce(a))}catch(x){c.error(x);return}i.isClosed()&&i.clean()}};pF.prototype=cF({},{unsubscribe:function(){var t=Cce(this);t.isClosed()||(t.close(),t.clean())}});C_&&Ace(pF.prototype,"closed",{configurable:!0,get:function(){return Cce(this).isClosed()}});var mF=function(e){fF(this,{type:Pce,subscriptionState:e}),C_||(this.closed=!1)};mF.prototype=cF({},{next:function(t){var i=tT(this).subscriptionState;if(!i.isClosed()){var o=i.observer;try{var c=eT(o,"next");c&&QS(c,o,t)}catch(a){um(a)}}},error:function(t){var i=tT(this).subscriptionState;if(!i.isClosed()){var o=i.observer;i.close();try{var c=eT(o,"error");c?QS(c,o,t):um(t)}catch(a){um(a)}i.clean()}},complete:function(){var t=tT(this).subscriptionState;if(!t.isClosed()){var i=t.observer;t.close();try{var o=eT(i,"complete");o&&QS(o,i)}catch(c){um(c)}t.clean()}}});C_&&Ace(mF.prototype,"closed",{configurable:!0,get:function(){return tT(this).subscriptionState.isClosed()}});var Rce=function(t){tpt(this,vF),fF(this,{type:hF,subscriber:Tce(t)})},vF=Rce.prototype;cF(vF,{subscribe:function(t){var i=arguments.length;return new pF(Ece(t)?{next:t,error:i>1?arguments[1]:void 0,complete:i>2?arguments[2]:void 0}:ipt(t)?t:{},spt(this).subscriber)}});npt(vF,opt,function(){return this});Yft({global:!0,constructor:!0,forced:!0},{Observable:Rce});Qft(hF)});var Dce=S(()=>{"use strict";var lpt=K(),upt=Ot(),cpt=at(),kce=ot(),hpt=hs(),dpt=pc(),fpt=xi(),ppt=si(),mpt=Rt(),vpt=mpt("observable");lpt({target:"Observable",stat:!0,forced:!0},{from:function(t){var i=hpt(this)?this:upt("Observable"),o=fpt(kce(t),vpt);if(o){var c=kce(cpt(o,t));return c.constructor===i?c:new i(function(g){return c.subscribe(g)})}var a=dpt(t);return new i(function(g){ppt(a,function(x,E){if(g.next(x),g.closed)return E()},{IS_ITERATOR:!0,INTERRUPTED:!0}),g.complete()})}})});var Fce=S(()=>{"use strict";var gpt=K(),Lce=Ot(),ypt=hs(),_pt=Lce("Array");gpt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=ypt(this)?this:Lce("Observable"),i=arguments.length,o=_pt(i),c=0;c<i;)o[c]=arguments[c++];return new t(function(a){for(var g=0;g<i;g++)if(a.next(o[g]),a.closed)return;a.complete()})}})});var zce=S(()=>{"use strict";Oce();Dce();Fce()});var Nce=S(()=>{"use strict";HO()});var Bce=S(()=>{"use strict";XO()});var jce=S(()=>{"use strict";ek()});var Uce=S(()=>{"use strict";tk()});var rl=S((fWt,Gce)=>{"use strict";ww();bS();var Wce=Ot(),xpt=Ze(),bpt=Wl(),Vce=Wce("Map"),wpt=Wce("WeakMap"),Spt=xpt([].push),$ce=bpt("metadata"),gF=$ce.store||($ce.store=new wpt),M_=function(e,t,i){var o=gF.get(e);if(!o){if(!i)return;gF.set(e,o=new Vce)}var c=o.get(t);if(!c){if(!i)return;o.set(t,c=new Vce)}return c},Tpt=function(e,t,i){var o=M_(t,i,!1);return o===void 0?!1:o.has(e)},Ept=function(e,t,i){var o=M_(t,i,!1);return o===void 0?void 0:o.get(e)},Apt=function(e,t,i,o){M_(i,o,!0).set(e,t)},qpt=function(e,t){var i=M_(e,t,!1),o=[];return i&&i.forEach(function(c,a){Spt(o,a)}),o},Ipt=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};Gce.exports={store:gF,getMap:M_,has:Tpt,get:Ept,set:Apt,keys:qpt,toKey:Ipt}});var Kce=S(()=>{"use strict";var Ppt=K(),Zce=rl(),Cpt=ot(),Mpt=Zce.toKey,Rpt=Zce.set;Ppt({target:"Reflect",stat:!0},{defineMetadata:function(t,i,o){var c=arguments.length<4?void 0:Mpt(arguments[3]);Rpt(t,i,Cpt(o),c)}})});var Xce=S(()=>{"use strict";var Opt=K(),yF=rl(),kpt=ot(),Dpt=yF.toKey,Lpt=yF.getMap,Hce=yF.store;Opt({target:"Reflect",stat:!0},{deleteMetadata:function(t,i){var o=arguments.length<3?void 0:Dpt(arguments[2]),c=Lpt(kpt(i),o,!1);if(c===void 0||!c.delete(t))return!1;if(c.size)return!0;var a=Hce.get(i);return a.delete(o),!!a.size||Hce.delete(i)}})});var Yce=S(()=>{"use strict";var Fpt=K(),_F=rl(),zpt=ot(),Npt=Vi(),Bpt=_F.has,jpt=_F.get,Upt=_F.toKey,Jce=function(e,t,i){var o=Bpt(e,t,i);if(o)return jpt(e,t,i);var c=Npt(t);return c!==null?Jce(e,c,i):void 0};Fpt({target:"Reflect",stat:!0},{getMetadata:function(t,i){var o=arguments.length<3?void 0:Upt(arguments[2]);return Jce(t,zpt(i),o)}})});var rhe=S(()=>{"use strict";var Vpt=K(),Qce=Ze(),ehe=rl(),$pt=ot(),Wpt=Vi(),Gpt=PS(),Zpt=Qce(Gpt),Kpt=Qce([].concat),Hpt=ehe.keys,Xpt=ehe.toKey,the=function(e,t){var i=Hpt(e,t),o=Wpt(e);if(o===null)return i;var c=the(o,t);return c.length?i.length?Zpt(Kpt(i,c)):c:i};Vpt({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var i=arguments.length<2?void 0:Xpt(arguments[1]);return the($pt(t),i)}})});var nhe=S(()=>{"use strict";var Jpt=K(),ihe=rl(),Ypt=ot(),Qpt=ihe.get,emt=ihe.toKey;Jpt({target:"Reflect",stat:!0},{getOwnMetadata:function(t,i){var o=arguments.length<3?void 0:emt(arguments[2]);return Qpt(t,Ypt(i),o)}})});var ohe=S(()=>{"use strict";var tmt=K(),ahe=rl(),rmt=ot(),imt=ahe.keys,nmt=ahe.toKey;tmt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var i=arguments.length<2?void 0:nmt(arguments[1]);return imt(rmt(t),i)}})});var uhe=S(()=>{"use strict";var amt=K(),she=rl(),omt=ot(),smt=Vi(),lmt=she.has,umt=she.toKey,lhe=function(e,t,i){var o=lmt(e,t,i);if(o)return!0;var c=smt(t);return c!==null?lhe(e,c,i):!1};amt({target:"Reflect",stat:!0},{hasMetadata:function(t,i){var o=arguments.length<3?void 0:umt(arguments[2]);return lhe(t,omt(i),o)}})});var hhe=S(()=>{"use strict";var cmt=K(),che=rl(),hmt=ot(),dmt=che.has,fmt=che.toKey;cmt({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,i){var o=arguments.length<3?void 0:fmt(arguments[2]);return dmt(t,hmt(i),o)}})});var fhe=S(()=>{"use strict";var pmt=K(),dhe=rl(),mmt=ot(),vmt=dhe.toKey,gmt=dhe.set;pmt({target:"Reflect",stat:!0},{metadata:function(t,i){return function(c,a){gmt(t,i,mmt(c),vmt(a))}}})});var phe=S(()=>{"use strict";gk()});var mhe=S(()=>{"use strict";var ymt=K(),_mt=kn(),xmt=vn().add;ymt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=_mt(this),i=0,o=arguments.length;i<o;i++)xmt(t,arguments[i]);return t}})});var vhe=S(()=>{"use strict";var bmt=K(),wmt=kn(),Smt=vn().remove;bmt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=wmt(this),i=!0,o,c=0,a=arguments.length;c<a;c++)o=Smt(t,arguments[c]),i=i&&o;return!!i}})});var ghe=S(()=>{"use strict";Ek()});var _he=S((BWt,yhe)=>{"use strict";var Tmt=pa(),Emt=Ht(),Amt=Da(),qmt=Rt(),Imt=ad(),Pmt=qmt("iterator"),Cmt=Object;yhe.exports=function(e){if(Amt(e))return!1;var t=Cmt(e);return t[Pmt]!==void 0||"@@iterator"in t||Emt(Imt,Tmt(t))}});var kc=S((jWt,bhe)=>{"use strict";var Mmt=Ot(),xhe=Zt(),Rmt=_he(),Omt=Pt(),kmt=Mmt("Set"),Dmt=function(e){return Omt(e)&&typeof e.size=="number"&&xhe(e.has)&&xhe(e.keys)};bhe.exports=function(e){return Dmt(e)?e:Rmt(e)?new kmt(e):e}});var whe=S(()=>{"use strict";var Lmt=K(),Fmt=at(),zmt=kc(),Nmt=Tk();Lmt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return Fmt(Nmt,this,zmt(t))}})});var She=S(()=>{"use strict";var Bmt=K(),jmt=qr(),Umt=kn(),Vmt=Ba();Bmt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var i=Umt(this),o=jmt(t,arguments.length>1?arguments[1]:void 0);return Vmt(i,function(c){if(!o(c,c,i))return!1},!0)!==!1}})});var Ehe=S(()=>{"use strict";var $mt=K(),Wmt=qr(),Gmt=kn(),The=vn(),Zmt=Ba(),Kmt=The.Set,Hmt=The.add;$mt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var i=Gmt(this),o=Wmt(t,arguments.length>1?arguments[1]:void 0),c=new Kmt;return Zmt(i,function(a){o(a,a,i)&&Hmt(c,a)}),c}})});var Ahe=S(()=>{"use strict";var Xmt=K(),Jmt=qr(),Ymt=kn(),Qmt=Ba();Xmt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var i=Ymt(this),o=Jmt(t,arguments.length>1?arguments[1]:void 0),c=Qmt(i,function(a){if(o(a,a,i))return{value:a}},!0);return c&&c.value}})});var Ihe=S(()=>{"use strict";var evt=K(),qhe=vn(),tvt=T_();evt({target:"Set",stat:!0,forced:!0},{from:tvt(qhe.Set,qhe.add,!1)})});var Phe=S(()=>{"use strict";Ik()});var Che=S(()=>{"use strict";var rvt=K(),ivt=at(),nvt=kc(),avt=qk();rvt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return ivt(avt,this,nvt(t))}})});var Mhe=S(()=>{"use strict";Ck()});var Rhe=S(()=>{"use strict";var ovt=K(),svt=at(),lvt=kc(),uvt=Pk();ovt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return svt(uvt,this,lvt(t))}})});var Ohe=S(()=>{"use strict";Rk()});var khe=S(()=>{"use strict";var cvt=K(),hvt=at(),dvt=kc(),fvt=Mk();cvt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return hvt(fvt,this,dvt(t))}})});var Dhe=S(()=>{"use strict";kk()});var Lhe=S(()=>{"use strict";var pvt=K(),mvt=at(),vvt=kc(),gvt=Ok();pvt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return mvt(gvt,this,vvt(t))}})});var zhe=S(()=>{"use strict";var yvt=K(),Fhe=Ze(),_vt=kn(),xvt=Ba(),bvt=Nt(),wvt=Fhe([].join),Svt=Fhe([].push);yvt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var i=_vt(this),o=t===void 0?",":bvt(t),c=[];return xvt(i,function(a){Svt(c,a)}),wvt(c,o)}})});var Bhe=S(()=>{"use strict";var Tvt=K(),Evt=qr(),Avt=kn(),Nhe=vn(),qvt=Ba(),Ivt=Nhe.Set,Pvt=Nhe.add;Tvt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var i=Avt(this),o=Evt(t,arguments.length>1?arguments[1]:void 0),c=new Ivt;return qvt(i,function(a){Pvt(c,o(a,a,i))}),c}})});var Uhe=S(()=>{"use strict";var Cvt=K(),jhe=vn(),Mvt=E_();Cvt({target:"Set",stat:!0,forced:!0},{of:Mvt(jhe.Set,jhe.add,!1)})});var Vhe=S(()=>{"use strict";var Rvt=K(),Ovt=kt(),kvt=kn(),Dvt=Ba(),Lvt=TypeError;Rvt({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var i=kvt(this),o=arguments.length<2,c=o?void 0:arguments[1];if(Ovt(t),Dvt(i,function(a){o?(o=!1,c=a):c=t(c,a,a,i)}),o)throw new Lvt("Reduce of empty set with no initial value");return c}})});var $he=S(()=>{"use strict";var Fvt=K(),zvt=qr(),Nvt=kn(),Bvt=Ba();Fvt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var i=Nvt(this),o=zvt(t,arguments.length>1?arguments[1]:void 0);return Bvt(i,function(c){if(o(c,c,i))return!0},!0)===!0}})});var Whe=S(()=>{"use strict";Fk()});var Ghe=S(()=>{"use strict";var jvt=K(),Uvt=at(),Vvt=kc(),$vt=Lk();jvt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return Uvt($vt,this,Vvt(t))}})});var Zhe=S(()=>{"use strict";Nk()});var Khe=S(()=>{"use strict";var Wvt=K(),Gvt=at(),Zvt=kc(),Kvt=zk();Wvt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return Gvt(Kvt,this,Zvt(t))}})});var Hhe=S(()=>{"use strict";var Hvt=K(),Xvt=md().charAt,Jvt=Fr(),Yvt=Wr(),Qvt=Nt();Hvt({target:"String",proto:!0,forced:!0},{at:function(t){var i=Qvt(Jvt(this)),o=i.length,c=Yvt(t),a=c>=0?c:o+c;return a<0||a>=o?void 0:Xvt(i,a)}})});var xF=S((kGt,Qhe)=>{"use strict";var Yhe=Ze(),egt=ji(),Xhe=Nt(),tgt=sr(),rgt=TypeError,Jhe=Yhe([].push),igt=Yhe([].join);Qhe.exports=function(t){var i=egt(t),o=tgt(i);if(!o)return"";for(var c=arguments.length,a=[],g=0;;){var x=i[g++];if(x===void 0)throw new rgt("Incorrect template");if(Jhe(a,Xhe(x)),g===o)return igt(a,"");g<c&&Jhe(a,Xhe(arguments[g]))}}});var ede=S(()=>{"use strict";var ngt=K(),agt=xF();ngt({target:"String",stat:!0,forced:!0},{cooked:agt})});var ade=S(()=>{"use strict";var ogt=K(),sgt=gc(),tde=en(),lgt=Fr(),ugt=Nt(),rde=yr(),ide=md(),cgt=ide.codeAt,hgt=ide.charAt,nde="String Iterator",dgt=rde.set,fgt=rde.getterFor(nde),pgt=sgt(function(t){dgt(this,{type:nde,string:t,index:0})},"String",function(){var t=fgt(this),i=t.string,o=t.index,c;return o>=i.length?tde(void 0,!0):(c=hgt(i,o),t.index+=c.length,tde({codePoint:cgt(c,0),position:o},!1))});ogt({target:"String",proto:!0,forced:!0},{codePoints:function(){return new pgt(ugt(lgt(this)))}})});var il=S((NGt,ode)=>{"use strict";var rT=Ze(),iT=WeakMap.prototype;ode.exports={WeakMap,set:rT(iT.set),get:rT(iT.get),has:rT(iT.has),remove:rT(iT.delete)}});var mde=S((BGt,pde)=>{"use strict";var mgt=Ot(),nT=Ze(),vgt=String.fromCharCode,ggt=mgt("String","fromCodePoint"),bF=nT("".charAt),dde=nT("".charCodeAt),sde=nT("".indexOf),lde=nT("".slice),SF=48,fde=57,ude=97,ygt=102,cde=65,_gt=70,hde=function(e,t){var i=dde(e,t);return i>=SF&&i<=fde},wF=function(e,t,i){if(i>=e.length)return-1;for(var o=0;t<i;t++){var c=xgt(dde(e,t));if(c===-1)return-1;o=o*16+c}return o},xgt=function(e){return e>=SF&&e<=fde?e-SF:e>=ude&&e<=ygt?e-ude+10:e>=cde&&e<=_gt?e-cde+10:-1};pde.exports=function(e){for(var t="",i=0,o=0,c;(o=sde(e,"\\",o))>-1;){if(t+=lde(e,i,o),++o===e.length)return;var a=bF(e,o++);switch(a){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":o<e.length&&bF(e,o)===`
`&&++o;case`
`:case"\u2028":case"\u2029":break;case"0":if(hde(e,o))return;t+="\0";break;case"x":if(c=wF(e,o,o+2),c===-1)return;o+=2,t+=vgt(c);break;case"u":if(o<e.length&&bF(e,o)==="{"){var g=sde(e,"}",++o);if(g===-1)return;c=wF(e,o,g),o=g+1}else c=wF(e,o,o+4),o+=4;if(c===-1||c>1114111)return;t+=ggt(c);break;default:if(hde(a,0))return;t+=a}i=o}return t+lde(e,i)}});var Ede=S(()=>{"use strict";var bgt=eu(),wgt=K(),Sgt=sy(),aT=Ze(),xde=On(),bde=ot(),Tgt=Qt(),Egt=Zt(),Agt=sr(),qgt=Or().f,Igt=Fa(),oT=il(),Pgt=xF(),Cgt=mde(),wde=ud(),TF=new oT.WeakMap,Mgt=oT.get,Rgt=oT.has,Ogt=oT.set,EF=Array,R_=TypeError,vde=Object.freeze||Object,kgt=Object.isFrozen,Dgt=Math.min,gde=aT("".charAt),Sde=aT("".slice),Lgt=aT("".split),yde=aT(/./.exec),Fgt=/([\n\u2028\u2029]|\r\n?)/g,zgt=RegExp("^["+wde+"]*"),Ngt=RegExp("[^"+wde+"]"),_de="Invalid tag",Bgt="Invalid opening line",jgt="Invalid closing line",Ugt=function(e){var t=e.raw;if(bgt&&!kgt(t))throw new R_("Raw template should be frozen");if(Rgt(TF,t))return Mgt(TF,t);var i=Vgt(t),o=Wgt(i);return qgt(o,"raw",{value:vde(i)}),vde(o),Ogt(TF,t,o),o},Vgt=function(e){var t=Tgt(e),i=Agt(t),o=EF(i),c=EF(i),a=0,g,x,E,P;if(!i)throw new R_(_de);for(;a<i;a++){var M=t[a];if(typeof M=="string")o[a]=Lgt(M,Fgt);else throw new R_(_de)}for(a=0;a<i;a++){var O=a+1===i;if(g=o[a],a===0){if(g.length===1||g[0].length>0)throw new R_(Bgt);g[1]=""}if(O){if(g.length===1||yde(Ngt,g[g.length-1]))throw new R_(jgt);g[g.length-2]="",g[g.length-1]=""}for(var z=2;z<g.length;z+=2){var oe=g[z],we=z+1===g.length&&!O,ye=yde(zgt,oe)[0];if(!we&&ye.length===oe.length){g[z]="";continue}x=$gt(ye,x)}}var te=x?x.length:0;for(a=0;a<i;a++){for(g=o[a],E=g[0],P=1;P<g.length;P+=2)E+=g[P]+Sde(g[P+1],te);c[a]=E}return c},$gt=function(e,t){if(t===void 0||e===t)return e;for(var i=0,o=Dgt(e.length,t.length);i<o&&gde(e,i)===gde(t,i);i++);return Sde(e,0,i)},Wgt=function(e){for(var t=0,i=e.length,o=EF(i);t<i;t++)o[t]=Cgt(e[t]);return o},Tde=function(e){return Sgt(function(t){var i=Igt(arguments);return i[0]=Ugt(bde(t)),xde(e,this,i)},"")},Ggt=Tde(Pgt);wgt({target:"String",stat:!0,forced:!0},{dedent:function(t){return bde(t),Egt(t)?Tde(t):xde(Ggt,this,arguments)}})});var Ade=S(()=>{"use strict";Uk()});var qde=S(()=>{"use strict";Xk()});var Ide=S(()=>{"use strict";oD()});var Pde=S(()=>{"use strict";fD()});var Cde=S(()=>{"use strict";var Zgt=nt(),Kgt=oi(),Hgt=Or().f,Xgt=fn().f,AF=Zgt.Symbol;Kgt("asyncDispose");AF&&(O_=Xgt(AF,"asyncDispose"),O_.enumerable&&O_.configurable&&O_.writable&&Hgt(AF,"asyncDispose",{value:O_.value,enumerable:!1,configurable:!1,writable:!1}));var O_});var Mde=S(()=>{"use strict";var Jgt=oi();Jgt("customMatcher")});var Rde=S(()=>{"use strict";var Ygt=nt(),Qgt=oi(),eyt=Or().f,tyt=fn().f,qF=Ygt.Symbol;Qgt("dispose");qF&&(k_=tyt(qF,"dispose"),k_.enumerable&&k_.configurable&&k_.writable&&eyt(qF,"dispose",{value:k_.value,enumerable:!1,configurable:!1,writable:!1}));var k_});var PF=S((iZt,Ode)=>{"use strict";var ryt=Ot(),iyt=Ze(),IF=ryt("Symbol"),nyt=IF.keyFor,ayt=iyt(IF.prototype.valueOf);Ode.exports=IF.isRegisteredSymbol||function(t){try{return nyt(ayt(t))!==void 0}catch(i){return!1}}});var kde=S(()=>{"use strict";var oyt=K(),syt=PF();oyt({target:"Symbol",stat:!0},{isRegisteredSymbol:syt})});var Dde=S(()=>{"use strict";var lyt=K(),uyt=PF();lyt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:uyt})});var RF=S((lZt,jde)=>{"use strict";var cyt=Wl(),Nde=Ot(),hyt=Ze(),dyt=$l(),fyt=Rt(),lT=Nde("Symbol"),Lde=lT.isWellKnownSymbol,Bde=Nde("Object","getOwnPropertyNames"),pyt=hyt(lT.prototype.valueOf),Fde=cyt("wks");for(sT=0,CF=Bde(lT),zde=CF.length;sT<zde;sT++)try{MF=CF[sT],dyt(lT[MF])&&fyt(MF)}catch(e){}var MF,sT,CF,zde;jde.exports=function(t){if(Lde&&Lde(t))return!0;try{for(var i=pyt(t),o=0,c=Bde(Fde),a=c.length;o<a;o++)if(Fde[c[o]]==i)return!0}catch(g){}return!1}});var Ude=S(()=>{"use strict";var myt=K(),vyt=RF();myt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:vyt})});var Vde=S(()=>{"use strict";var gyt=K(),yyt=RF();gyt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:yyt})});var $de=S(()=>{"use strict";var _yt=oi();_yt("matcher")});var Wde=S(()=>{"use strict";var xyt=oi();xyt("metadata")});var Gde=S(()=>{"use strict";var byt=oi();byt("metadataKey")});var Zde=S(()=>{"use strict";var wyt=oi();wyt("observable")});var Kde=S(()=>{"use strict";var Syt=oi();Syt("patternMatch")});var Hde=S(()=>{"use strict";var Tyt=oi();Tyt("replaceAll")});var Jde=S(()=>{"use strict";var Eyt=Ot(),Ayt=$y(),qyt=aL(),Xde=Xt(),Iyt=Hl(),Pyt=Xde.aTypedArrayConstructor,Cyt=Xde.exportTypedArrayStaticMethod;Cyt("fromAsync",function(t){var i=this,o=arguments.length,c=o>1?arguments[1]:void 0,a=o>2?arguments[2]:void 0;return new(Eyt("Promise"))(function(g){Ayt(i),g(qyt(t,c,a))}).then(function(g){return Iyt(Pyt(i),g)})},!0)});var Yde=S(()=>{"use strict";ID()});var efe=S(()=>{"use strict";var Qde=Xt(),Myt=wi().filterReject,Ryt=lS(),Oyt=Qde.aTypedArray,kyt=Qde.exportTypedArrayMethod;kyt("filterOut",function(t){var i=Myt(Oyt(this),t,arguments.length>1?arguments[1]:void 0);return Ryt(this,i)},!0)});var rfe=S(()=>{"use strict";var tfe=Xt(),Dyt=wi().filterReject,Lyt=lS(),Fyt=tfe.aTypedArray,zyt=tfe.exportTypedArrayMethod;zyt("filterReject",function(t){var i=Dyt(Fyt(this),t,arguments.length>1?arguments[1]:void 0);return Lyt(this,i)},!0)});var ife=S(()=>{"use strict";PD()});var nfe=S(()=>{"use strict";CD()});var afe=S(()=>{"use strict";var OF=Xt(),Nyt=qS(),Byt=OF.aTypedArray,jyt=OF.getTypedArrayConstructor,Uyt=OF.exportTypedArrayMethod;Uyt("groupBy",function(t){var i=arguments.length>1?arguments[1]:void 0;return Nyt(Byt(this),t,i,jyt)},!0)});var ofe=S(()=>{"use strict";$D()});var sfe=S(()=>{"use strict";WD()});var lfe=S(()=>{"use strict";var kF=Xt(),Vyt=sr(),$yt=iS(),Wyt=us(),Gyt=s_(),Zyt=Wr(),Kyt=kF.aTypedArray,Hyt=kF.getTypedArrayConstructor,Xyt=kF.exportTypedArrayMethod,Jyt=Math.max,Yyt=Math.min;Xyt("toSpliced",function(t,i){var o=Kyt(this),c=Hyt(o),a=Vyt(o),g=Wyt(t,a),x=arguments.length,E=0,P,M,O,z,oe,we,ye;if(x===0)P=M=0;else if(x===1)P=0,M=a-g;else if(M=Yyt(Jyt(Zyt(i),0),a-g),P=x-2,P){z=new c(P),O=$yt(z);for(var te=2;te<x;te++)oe=arguments[te],z[te-2]=O?Gyt(oe):+oe}for(we=a+P-M,ye=new c(we);E<g;E++)ye[E]=o[E];for(;E<g+P;E++)ye[E]=z[E-g];for(;E<we;E++)ye[E]=o[E+M-P];return ye},!0)});var ufe=S(()=>{"use strict";var Qyt=Ze(),DF=Xt(),e_t=Hl(),t_t=PS(),r_t=DF.aTypedArray,i_t=DF.getTypedArrayConstructor,n_t=DF.exportTypedArrayMethod,a_t=Qyt(t_t);n_t("uniqueBy",function(t){return r_t(this),e_t(i_t(this),a_t(this,t))},!0)});var cfe=S(()=>{"use strict";ZD()});var LF=S((HZt,hfe)=>{"use strict";var o_t=Pt(),s_t=String,l_t=TypeError;hfe.exports=function(e){if(e===void 0||o_t(e))return e;throw new l_t(s_t(e)+" is not an object or undefined")}});var D_=S((XZt,vfe)=>{"use strict";var mfe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",dfe=mfe+"+/",ffe=mfe+"-_",pfe=function(e){for(var t={},i=0;i<64;i++)t[e.charAt(i)]=i;return t};vfe.exports={i2c:dfe,c2i:pfe(dfe),i2cUrl:ffe,c2iUrl:pfe(ffe)}});var FF=S((JZt,gfe)=>{"use strict";var u_t=TypeError;gfe.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new u_t("Incorrect `alphabet` option")}});var jF=S((YZt,xfe)=>{"use strict";var yfe=nt(),c_t=Ze(),h_t=LF(),d_t=r_(),f_t=Ht(),_fe=D_(),p_t=FF(),m_t=Rp(),v_t=_fe.c2i,g_t=_fe.c2iUrl,Dc=yfe.SyntaxError,y_t=yfe.TypeError,bd=c_t("".charAt),zF=function(e,t){for(var i=e.length;t<i;t++){var o=bd(e,t);if(o!==" "&&o!=="\t"&&o!==`
`&&o!=="\f"&&o!=="\r")break}return t},NF=function(e,t,i){var o=e.length;o<4&&(e+=o===2?"AA":"A");var c=(t[bd(e,0)]<<18)+(t[bd(e,1)]<<12)+(t[bd(e,2)]<<6)+t[bd(e,3)],a=[c>>16&255,c>>8&255,c&255];if(o===2){if(i&&a[1]!==0)throw new Dc("Extra bits");return[a[0]]}if(o===3){if(i&&a[2]!==0)throw new Dc("Extra bits");return[a[0],a[1]]}return a},BF=function(e,t,i){for(var o=t.length,c=0;c<o;c++)e[i+c]=t[c];return i+o};xfe.exports=function(e,t,i,o){d_t(e),h_t(t);var c=p_t(t)==="base64"?v_t:g_t,a=t?t.lastChunkHandling:void 0;if(a===void 0&&(a="loose"),a!=="loose"&&a!=="strict"&&a!=="stop-before-partial")throw new y_t("Incorrect `lastChunkHandling` option");i&&m_t(i.buffer);var g=i||[],x=0,E=0,P="",M=0;if(o)for(;;){if(M=zF(e,M),M===e.length){if(P.length>0){if(a==="stop-before-partial")break;if(a==="loose"){if(P.length===1)throw new Dc("Malformed padding: exactly one additional character");x=BF(g,NF(P,c,!1),x)}else throw new Dc("Missing padding")}E=e.length;break}var O=bd(e,M);if(++M,O==="="){if(P.length<2)throw new Dc("Padding is too early");if(M=zF(e,M),P.length===2){if(M===e.length){if(a==="stop-before-partial")break;throw new Dc("Malformed padding: only one =")}bd(e,M)==="="&&(++M,M=zF(e,M))}if(M<e.length)throw new Dc("Unexpected character after padding");x=BF(g,NF(P,c,a==="strict"),x),E=e.length;break}if(!f_t(c,O))throw new Dc("Unexpected character");var z=o-x;if(z===1&&P.length===2||z===2&&P.length===3||(P+=O,P.length===4&&(x=BF(g,NF(P,c,!1),x),P="",E=M,x===o)))break}return{bytes:g,read:E,written:x}}});var wfe=S(()=>{"use strict";var __t=K(),x_t=nt(),b_t=Hl(),w_t=jF(),bfe=x_t.Uint8Array;bfe&&__t({target:"Uint8Array",stat:!0},{fromBase64:function(t){var i=w_t(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return b_t(bfe,i.bytes)}})});var VF=S((t7t,Afe)=>{"use strict";var UF=nt(),Tfe=Ze(),S_t=UF.Uint8Array,Sfe=UF.SyntaxError,T_t=UF.parseInt,E_t=Math.min,Efe=/[^\da-f]/i,A_t=Tfe(Efe.exec),q_t=Tfe("".slice);Afe.exports=function(e,t){var i=e.length;if(i%2!==0)throw new Sfe("String should be an even number of characters");for(var o=t?E_t(t.length,i/2):i/2,c=t||new S_t(o),a=0,g=0;g<o;){var x=q_t(e,a,a+=2);if(A_t(Efe,x))throw new Sfe("String should only contain hex characters");c[g++]=T_t(x,16)}return{bytes:c,read:a}}});var qfe=S(()=>{"use strict";var I_t=K(),P_t=nt(),C_t=r_(),M_t=VF();P_t.Uint8Array&&I_t({target:"Uint8Array",stat:!0},{fromHex:function(t){return M_t(C_t(t)).bytes}})});var L_=S((n7t,Ife)=>{"use strict";var R_t=pa(),O_t=TypeError;Ife.exports=function(e){if(R_t(e)==="Uint8Array")return e;throw new O_t("Argument is not an Uint8Array")}});var Pfe=S(()=>{"use strict";var k_t=K(),D_t=nt(),L_t=jF(),F_t=L_(),uT=D_t.Uint8Array,z_t=!uT||!uT.prototype.setFromBase64||!function(){var e=new uT([255,255,255,255,255]);try{e.setFromBase64("MjYyZg===")}catch(t){return e[0]===50&&e[1]===54&&e[2]===50&&e[3]===255&&e[4]===255}}();uT&&k_t({target:"Uint8Array",proto:!0,forced:z_t},{setFromBase64:function(t){F_t(this);var i=L_t(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:i.read,written:i.written}}})});var Cfe=S(()=>{"use strict";var N_t=K(),B_t=nt(),j_t=r_(),U_t=L_(),V_t=Rp(),$_t=VF();B_t.Uint8Array&&N_t({target:"Uint8Array",proto:!0},{setFromHex:function(t){U_t(this),j_t(t),V_t(this.buffer);var i=$_t(t,this).read;return{read:i,written:i/2}}})});var Rfe=S(()=>{"use strict";var W_t=K(),G_t=nt(),Z_t=Ze(),K_t=LF(),H_t=L_(),X_t=Rp(),Mfe=D_(),J_t=FF(),Y_t=Mfe.i2c,Q_t=Mfe.i2cUrl,e0t=Z_t("".charAt);G_t.Uint8Array&&W_t({target:"Uint8Array",proto:!0},{toBase64:function(){var t=H_t(this),i=arguments.length?K_t(arguments[0]):void 0,o=J_t(i)==="base64"?Y_t:Q_t,c=!!i&&!!i.omitPadding;X_t(this.buffer);for(var a="",g=0,x=t.length,E,P=function(M){return e0t(o,E>>6*M&63)};g+2<x;g+=3)E=(t[g]<<16)+(t[g+1]<<8)+t[g+2],a+=P(3)+P(2)+P(1)+P(0);return g+2===x?(E=(t[g]<<16)+(t[g+1]<<8),a+=P(3)+P(2)+P(1)+(c?"":"=")):g+1===x&&(E=t[g]<<16,a+=P(3)+P(2)+(c?"":"==")),a}})});var Ofe=S(()=>{"use strict";var t0t=K(),r0t=nt(),i0t=Ze(),n0t=L_(),a0t=Rp(),o0t=i0t(1 .toString);r0t.Uint8Array&&t0t({target:"Uint8Array",proto:!0},{toHex:function(){n0t(this),a0t(this.buffer);for(var t="",i=0,o=this.length;i<o;i++){var c=o0t(this[i],16);t+=c.length===1?"0"+c:c}return t}})});var F_=S((f7t,kfe)=>{"use strict";var s0t=il().has;kfe.exports=function(e){return s0t(e),e}});var Dfe=S(()=>{"use strict";var l0t=K(),u0t=F_(),c0t=il().remove;l0t({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=u0t(this),i=!0,o,c=0,a=arguments.length;c<a;c++)o=c0t(t,arguments[c]),i=i&&o;return!!i}})});var Ffe=S(()=>{"use strict";var h0t=K(),Lfe=il(),d0t=T_();h0t({target:"WeakMap",stat:!0,forced:!0},{from:d0t(Lfe.WeakMap,Lfe.set,!0)})});var Nfe=S(()=>{"use strict";var f0t=K(),zfe=il(),p0t=E_();f0t({target:"WeakMap",stat:!0,forced:!0},{of:p0t(zfe.WeakMap,zfe.set,!0)})});var jfe=S(()=>{"use strict";var m0t=K(),v0t=F_(),$F=il(),g0t=$F.get,y0t=$F.has,Bfe=$F.set;m0t({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,i){var o=v0t(this),c,a;return y0t(o,t)?(c=g0t(o,t),"update"in i&&(c=i.update(c,t,o),Bfe(o,t,c)),c):(a=i.insert(t,o),Bfe(o,t,a),a)}})});var Ufe=S(()=>{"use strict";var _0t=K(),x0t=F_(),WF=il(),b0t=WF.get,w0t=WF.has,S0t=WF.set;_0t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,i){return w0t(x0t(this),t)?b0t(this,t):(S0t(this,t,i),i)}})});var Wfe=S((T7t,$fe)=>{"use strict";var GF=il(),Vfe=new GF.WeakMap,T0t=GF.set,E0t=GF.remove;$fe.exports=function(e){return T0t(Vfe,e,1),E0t(Vfe,e),e}});var Gfe=S(()=>{"use strict";var A0t=K(),q0t=kt(),I0t=F_(),P0t=Wfe(),ZF=il(),C0t=ZF.get,M0t=ZF.has,R0t=ZF.set;A0t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,i){if(I0t(this),P0t(t),q0t(i),M0t(this,t))return C0t(this,t);var o=i(t);return R0t(this,t,o),o}})});var Zfe=S(()=>{"use strict";var O0t=K(),k0t=KS();O0t({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:k0t})});var cm=S((P7t,Kfe)=>{"use strict";var KF=Ze(),HF=WeakSet.prototype;Kfe.exports={WeakSet,add:KF(HF.add),has:KF(HF.has),remove:KF(HF.delete)}});var XF=S((C7t,Hfe)=>{"use strict";var D0t=cm().has;Hfe.exports=function(e){return D0t(e),e}});var Xfe=S(()=>{"use strict";var L0t=K(),F0t=XF(),z0t=cm().add;L0t({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=F0t(this),i=0,o=arguments.length;i<o;i++)z0t(t,arguments[i]);return t}})});var Jfe=S(()=>{"use strict";var N0t=K(),B0t=XF(),j0t=cm().remove;N0t({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=B0t(this),i=!0,o,c=0,a=arguments.length;c<a;c++)o=j0t(t,arguments[c]),i=i&&o;return!!i}})});var Qfe=S(()=>{"use strict";var U0t=K(),Yfe=cm(),V0t=T_();U0t({target:"WeakSet",stat:!0,forced:!0},{from:V0t(Yfe.WeakSet,Yfe.add,!1)})});var tpe=S(()=>{"use strict";var $0t=K(),epe=cm(),W0t=E_();$0t({target:"WeakSet",stat:!0,forced:!0},{of:W0t(epe.WeakSet,epe.add,!1)})});var lpe=S(()=>{"use strict";var G0t=K(),Z0t=nt(),npe=Ot(),JF=Ze(),K0t=at(),cT=Xe(),H0t=Nt(),X0t=oo(),rpe=D_().c2i,ape=/[^\d+/a-z]/i,J0t=/[\t\n\f\r ]+/g,Y0t=/[=]{1,2}$/,wd=npe("atob"),Q0t=String.fromCharCode,ext=JF("".charAt),ipe=JF("".replace),txt=JF(ape.exec),hm=!!wd&&!cT(function(){return wd("aGk=")!=="hi"}),ope=hm&&cT(function(){return wd(" ")!==""}),spe=hm&&!cT(function(){wd("a")}),rxt=hm&&!cT(function(){wd()}),ixt=hm&&wd.length!==1,nxt=!hm||ope||spe||rxt||ixt;G0t({global:!0,bind:!0,enumerable:!0,forced:nxt},{atob:function(t){if(X0t(arguments.length,1),hm&&!ope&&!spe)return K0t(wd,Z0t,t);var i=ipe(H0t(t),J0t,""),o="",c=0,a=0,g,x,E;if(i.length%4===0&&(i=ipe(i,Y0t,"")),g=i.length,g%4===1||txt(ape,i))throw new(npe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;c<g;)x=ext(i,c++),E=a%4?E*64+rpe[x]:rpe[x],a++%4&&(o+=Q0t(255&E>>(-2*a&6)));return o}})});var fpe=S(()=>{"use strict";var axt=K(),oxt=nt(),hpe=Ot(),dpe=Ze(),sxt=at(),YF=Xe(),upe=Nt(),lxt=oo(),uxt=D_().i2c,dm=hpe("btoa"),cpe=dpe("".charAt),cxt=dpe("".charCodeAt),z_=!!dm&&!YF(function(){return dm("hi")!=="aGk="}),hxt=z_&&!YF(function(){dm()}),dxt=z_&&YF(function(){return dm(null)!=="bnVsbA=="}),fxt=z_&&dm.length!==1;axt({global:!0,bind:!0,enumerable:!0,forced:!z_||hxt||dxt||fxt},{btoa:function(t){if(lxt(arguments.length,1),z_)return sxt(dm,oxt,upe(t));for(var i=upe(t),o="",c=0,a=uxt,g,x;cpe(i,c)||(a="=",c%1);){if(x=cxt(i,c+=3/4),x>255)throw new(hpe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");g=g<<8|x,o+=cpe(a,63&g>>8-c%1*8)}return o}})});var QF=S((V7t,ppe)=>{"use strict";ppe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var tz=S(($7t,vpe)=>{"use strict";var pxt=iy(),ez=pxt("span").classList,mpe=ez&&ez.constructor&&ez.constructor.prototype;vpe.exports=mpe===Object.prototype?void 0:mpe});var xpe=S(()=>{"use strict";var gpe=nt(),ype=QF(),mxt=tz(),rz=LC(),vxt=Ui(),_pe=function(e){if(e&&e.forEach!==rz)try{vxt(e,"forEach",rz)}catch(t){e.forEach=rz}};for(hT in ype)ype[hT]&&_pe(gpe[hT]&&gpe[hT].prototype);var hT;_pe(mxt)});var Epe=S(()=>{"use strict";var bpe=nt(),Spe=QF(),gxt=tz(),N_=Sy(),wpe=Ui(),yxt=ma(),_xt=Rt(),iz=_xt("iterator"),nz=N_.values,Tpe=function(e,t){if(e){if(e[iz]!==nz)try{wpe(e,iz,nz)}catch(o){e[iz]=nz}if(yxt(e,t,!0),Spe[t]){for(var i in N_)if(e[i]!==N_[i])try{wpe(e,i,N_[i])}catch(o){e[i]=N_[i]}}}};for(dT in Spe)Tpe(bpe[dT]&&bpe[dT].prototype,dT);var dT;Tpe(gxt,"DOMTokenList")});var az=S((H7t,Ape)=>{"use strict";Ape.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var Fpe=S(()=>{"use strict";var xxt=K(),mT=Ot(),bxt=OM(),hz=Xe(),wxt=bi(),dz=ka(),vT=Or().f,Sxt=wr(),fT=Gr(),pT=Ht(),Txt=Yn(),Ext=ot(),Ppe=_C(),qpe=id(),fm=az(),Axt=L1(),Cpe=yr(),fz=At(),Mpe=fr(),pm="DOMException",cz="DATA_CLONE_ERR",yT=mT("Error"),iu=mT(pm)||function(){try{var e=mT("MessageChannel")||bxt("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===cz&&t.code===25)return t.constructor}}(),qxt=iu&&iu.prototype,Rpe=yT.prototype,Ixt=Cpe.set,Pxt=Cpe.getterFor(pm),Cxt="stack"in new yT(pm),Ope=function(e){return pT(fm,e)&&fm[e].m?fm[e].c:0},pz=function(){Txt(this,j_);var t=arguments.length,i=qpe(t<1?void 0:arguments[0]),o=qpe(t<2?void 0:arguments[1],"Error"),c=Ope(o);if(Ixt(this,{type:pm,name:o,message:i,code:c}),fz||(this.name=o,this.message=i,this.code=c),Cxt){var a=new yT(i);a.name=pm,vT(this,"stack",dz(1,Axt(a.stack,1)))}},j_=pz.prototype=wxt(Rpe),kpe=function(e){return{enumerable:!0,configurable:!0,get:e}},oz=function(e){return kpe(function(){return Pxt(this)[e]})};fz&&(fT(j_,"code",oz("code")),fT(j_,"message",oz("message")),fT(j_,"name",oz("name")));vT(j_,"constructor",dz(1,pz));var _T=hz(function(){return!(new iu instanceof yT)}),Dpe=_T||hz(function(){return Rpe.toString!==Ppe||String(new iu(1,2))!=="2: 1"}),Lpe=_T||hz(function(){return new iu(1,"DataCloneError").code!==25}),Mxt=_T||iu[cz]!==25||qxt[cz]!==25,Ipe=Mpe?Dpe||Lpe||Mxt:_T;xxt({global:!0,constructor:!0,forced:Ipe},{DOMException:Ipe?pz:iu});var U_=mT(pm),gT=U_.prototype;Dpe&&(Mpe||iu===U_)&&Sxt(gT,"toString",Ppe);Lpe&&fz&&iu===U_&&fT(gT,"code",kpe(function(){return Ope(Ext(this).name)}));for(sz in fm)pT(fm,sz)&&(lz=fm[sz],B_=lz.s,uz=dz(6,lz.c),pT(U_,B_)||vT(U_,B_,uz),pT(gT,B_)||vT(gT,B_,uz));var lz,B_,uz,sz});var $pe=S(()=>{"use strict";var Rxt=K(),Oxt=nt(),wz=Ot(),xz=ka(),bz=Or().f,zpe=Ht(),kxt=Yn(),Dxt=fc(),Npe=id(),mz=az(),Lxt=L1(),Fxt=At(),Upe=fr(),$_="DOMException",Vpe=wz("Error"),W_=wz($_),Sz=function(){kxt(this,zxt);var t=arguments.length,i=Npe(t<1?void 0:arguments[0]),o=Npe(t<2?void 0:arguments[1],"Error"),c=new W_(i,o),a=new Vpe(i);return a.name=$_,bz(c,"stack",xz(1,Lxt(a.stack,1))),Dxt(c,this,Sz),c},zxt=Sz.prototype=W_.prototype,Nxt="stack"in new Vpe($_),Bxt="stack"in new W_(1,2),vz=W_&&Fxt&&Object.getOwnPropertyDescriptor(Oxt,$_),jxt=!!vz&&!(vz.writable&&vz.configurable),Bpe=Nxt&&!jxt&&!Bxt;Rxt({global:!0,constructor:!0,forced:Upe||Bpe},{DOMException:Bpe?Sz:W_});var V_=wz($_),jpe=V_.prototype;if(jpe.constructor!==V_){Upe||bz(jpe,"constructor",xz(1,V_));for(gz in mz)zpe(mz,gz)&&(yz=mz[gz],_z=yz.s,zpe(V_,_z)||bz(V_,_z,xz(6,yz.c)))}var yz,_z,gz});var Gpe=S(()=>{"use strict";var Uxt=Ot(),Vxt=ma(),Wpe="DOMException";Vxt(Uxt(Wpe),Wpe)});var Kpe=S(()=>{"use strict";var $xt=K(),Wxt=nt(),Zpe=Ky().clear;$xt({global:!0,bind:!0,enumerable:!0,forced:Wxt.clearImmediate!==Zpe},{clearImmediate:Zpe})});var xT=S((nKt,Xpe)=>{"use strict";var Hpe=nt(),Gxt=On(),Zxt=Zt(),Kxt=Ay(),Hxt=as(),Xxt=Fa(),Jxt=oo(),Yxt=Hpe.Function,Qxt=/MSIE .\./.test(Hxt)||Kxt==="BUN"&&function(){var e=Hpe.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();Xpe.exports=function(e,t){var i=t?2:1;return Qxt?function(o,c){var a=Jxt(arguments.length,1)>i,g=Zxt(o)?o:Yxt(o),x=a?Xxt(arguments,i):[],E=a?function(){Gxt(g,this,x)}:g;return t?e(E,c):e(E)}:e}});var eme=S(()=>{"use strict";var ebt=K(),Qpe=nt(),Jpe=Ky().set,tbt=xT(),Ype=Qpe.setImmediate?tbt(Jpe,!1):Jpe;ebt({global:!0,bind:!0,enumerable:!0,forced:Qpe.setImmediate!==Ype},{setImmediate:Ype})});var tme=S(()=>{"use strict";Kpe();eme()});var rme=S(()=>{"use strict";var rbt=K(),ibt=nt(),nbt=kO(),abt=kt(),obt=oo(),sbt=Xe(),lbt=At(),ubt=sbt(function(){return lbt&&Object.getOwnPropertyDescriptor(ibt,"queueMicrotask").value.length!==1});rbt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:ubt},{queueMicrotask:function(t){obt(arguments.length,1),nbt(abt(t))}})});var nme=S(()=>{"use strict";var cbt=K(),Lc=nt(),hbt=Gr(),dbt=At(),fbt=TypeError,pbt=Object.defineProperty,ime=Lc.self!==Lc;try{dbt?(bT=Object.getOwnPropertyDescriptor(Lc,"self"),(ime||!bT||!bT.get||!bT.enumerable)&&hbt(Lc,"self",{get:function(){return Lc},set:function(t){if(this!==Lc)throw new fbt("Illegal invocation");pbt(Lc,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):cbt({global:!0,simple:!0,forced:ime},{self:Lc})}catch(e){}var bT});var mme=S(()=>{"use strict";var mbt=fr(),vbt=K(),zn=nt(),Z_=Ot(),H_=Ze(),Pz=Xe(),gbt=lc(),vm=Zt(),ybt=hs(),_bt=Da(),AT=Pt(),xbt=$l(),bbt=si(),sme=ot(),TT=pa(),wbt=Ht(),Sbt=Ro(),Tz=Ui(),wT=sr(),Tbt=oo(),Ebt=Gp(),qT=tn(),Cz=vn(),Abt=Ba(),ame=BM(),qbt=mC(),Mz=fw(),G_=zn.Object,Ibt=zn.Array,lme=zn.Date,ume=zn.Error,Pbt=zn.TypeError,Cbt=zn.PerformanceMark,Sd=Z_("DOMException"),qz=qT.Map,Rz=qT.has,cme=qT.get,ET=qT.set,hme=Cz.Set,dme=Cz.add,Mbt=Cz.has,Rbt=Z_("Object","keys"),Obt=H_([].push),kbt=H_((!0).valueOf),Dbt=H_(1 .valueOf),Lbt=H_("".valueOf),Fbt=H_(lme.prototype.getTime),Iz=gbt("structuredClone"),K_="DataCloneError",ST="Transferring",fme=function(e){return!Pz(function(){var t=new zn.Set([7]),i=e(t),o=e(G_(7));return i===t||!i.has(7)||!AT(o)||+o!=7})&&e},ome=function(e,t){return!Pz(function(){var i=new t,o=e({a:i,b:i});return!(o&&o.a===o.b&&o.a instanceof t&&o.a.stack===i.stack)})},zbt=function(e){return!Pz(function(){var t=e(new zn.AggregateError([1],Iz,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==Iz||t.cause!==3})},mm=zn.structuredClone,Nbt=mbt||!ome(mm,ume)||!ome(mm,Sd)||!zbt(mm),Bbt=!mm&&fme(function(e){return new Cbt(Iz,{detail:e}).detail}),nu=fme(mm)||Bbt,Ez=function(e){throw new Sd("Uncloneable type: "+e,K_)},Va=function(e,t){throw new Sd((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",K_)},Az=function(e,t){return nu||Va(t),nu(e)},jbt=function(){var e;try{e=new zn.DataTransfer}catch(t){try{e=new zn.ClipboardEvent("").clipboardData}catch(i){}}return e&&e.items&&e.files?e:null},pme=function(e,t,i){if(Rz(t,e))return cme(t,e);var o=i||TT(e),c,a,g,x,E,P;if(o==="SharedArrayBuffer")nu?c=nu(e):c=e;else{var M=zn.DataView;!M&&!vm(e.slice)&&Va("ArrayBuffer");try{if(vm(e.slice)&&!e.resizable)c=e.slice(0);else for(a=e.byteLength,g=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,c=new ArrayBuffer(a,g),x=new M(e),E=new M(c),P=0;P<a;P++)E.setUint8(P,x.getUint8(P))}catch(O){throw new Sd("ArrayBuffer is detached",K_)}}return ET(t,e,c),c},Ubt=function(e,t,i,o,c){var a=zn[t];return AT(a)||Va(t),new a(pme(e.buffer,c),i,o)},Fn=function(e,t){if(xbt(e)&&Ez("Symbol"),!AT(e))return e;if(t){if(Rz(t,e))return cme(t,e)}else t=new qz;var i=TT(e),o,c,a,g,x,E,P,M;switch(i){case"Array":a=Ibt(wT(e));break;case"Object":a={};break;case"Map":a=new qz;break;case"Set":a=new hme;break;case"RegExp":a=new RegExp(e.source,Ebt(e));break;case"Error":switch(c=e.name,c){case"AggregateError":a=new(Z_(c))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":a=new(Z_(c));break;case"CompileError":case"LinkError":case"RuntimeError":a=new(Z_("WebAssembly",c));break;default:a=new ume}break;case"DOMException":a=new Sd(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":a=pme(e,t,i);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":E=i==="DataView"?e.byteLength:e.length,a=Ubt(e,i,e.byteOffset,E,t);break;case"DOMQuad":try{a=new DOMQuad(Fn(e.p1,t),Fn(e.p2,t),Fn(e.p3,t),Fn(e.p4,t))}catch(O){a=Az(e,i)}break;case"File":if(nu)try{a=nu(e),TT(a)!==i&&(a=void 0)}catch(O){}if(!a)try{a=new File([e],e.name,e)}catch(O){}a||Va(i);break;case"FileList":if(g=jbt(),g){for(x=0,E=wT(e);x<E;x++)g.items.add(Fn(e[x],t));a=g.files}else a=Az(e,i);break;case"ImageData":try{a=new ImageData(Fn(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(O){a=Az(e,i)}break;default:if(nu)a=nu(e);else switch(i){case"BigInt":a=G_(e.valueOf());break;case"Boolean":a=G_(kbt(e));break;case"Number":a=G_(Dbt(e));break;case"String":a=G_(Lbt(e));break;case"Date":a=new lme(Fbt(e));break;case"Blob":try{a=e.slice(0,e.size,e.type)}catch(O){Va(i)}break;case"DOMPoint":case"DOMPointReadOnly":o=zn[i];try{a=o.fromPoint?o.fromPoint(e):new o(e.x,e.y,e.z,e.w)}catch(O){Va(i)}break;case"DOMRect":case"DOMRectReadOnly":o=zn[i];try{a=o.fromRect?o.fromRect(e):new o(e.x,e.y,e.width,e.height)}catch(O){Va(i)}break;case"DOMMatrix":case"DOMMatrixReadOnly":o=zn[i];try{a=o.fromMatrix?o.fromMatrix(e):new o(e)}catch(O){Va(i)}break;case"AudioData":case"VideoFrame":vm(e.clone)||Va(i);try{a=e.clone()}catch(O){Ez(i)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Va(i);default:Ez(i)}}switch(ET(t,e,a),i){case"Array":case"Object":for(P=Rbt(e),x=0,E=wT(P);x<E;x++)M=P[x],Sbt(a,M,Fn(e[M],t));break;case"Map":e.forEach(function(O,z){ET(a,Fn(z,t),Fn(O,t))});break;case"Set":e.forEach(function(O){dme(a,Fn(O,t))});break;case"Error":Tz(a,"message",Fn(e.message,t)),wbt(e,"cause")&&Tz(a,"cause",Fn(e.cause,t)),c==="AggregateError"?a.errors=Fn(e.errors,t):c==="SuppressedError"&&(a.error=Fn(e.error,t),a.suppressed=Fn(e.suppressed,t));case"DOMException":qbt&&Tz(a,"stack",Fn(e.stack,t))}return a},Vbt=function(e,t){if(!AT(e))throw new Pbt("Transfer option cannot be converted to a sequence");var i=[];bbt(e,function(z){Obt(i,sme(z))});for(var o=0,c=wT(i),a=new hme,g,x,E,P,M,O;o<c;){if(g=i[o++],x=TT(g),x==="ArrayBuffer"?Mbt(a,g):Rz(t,g))throw new Sd("Duplicate transferable",K_);if(x==="ArrayBuffer"){dme(a,g);continue}if(Mz)P=mm(g,{transfer:[g]});else switch(x){case"ImageBitmap":E=zn.OffscreenCanvas,ybt(E)||Va(x,ST);try{M=new E(g.width,g.height),O=M.getContext("bitmaprenderer"),O.transferFromImageBitmap(g),P=M.transferToImageBitmap()}catch(z){}break;case"AudioData":case"VideoFrame":(!vm(g.clone)||!vm(g.close))&&Va(x,ST);try{P=g.clone(),g.close()}catch(z){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":Va(x,ST)}if(P===void 0)throw new Sd("This object cannot be transferred: "+x,K_);ET(t,g,P)}return a},$bt=function(e){Abt(e,function(t){Mz?nu(t,{transfer:[t]}):vm(t.transfer)?t.transfer():ame?ame(t):Va("ArrayBuffer",ST)})};vbt({global:!0,enumerable:!0,sham:!Mz,forced:Nbt},{structuredClone:function(t){var i=Tbt(arguments.length,1)>1&&!_bt(arguments[1])?sme(arguments[1]):void 0,o=i?i.transfer:void 0,c,a;o!==void 0&&(c=new qz,a=Vbt(o,c));var g=Fn(t,c);return a&&$bt(a),g}})});var yme=S(()=>{"use strict";var Wbt=K(),gme=nt(),Gbt=xT(),vme=Gbt(gme.setInterval,!0);Wbt({global:!0,bind:!0,forced:gme.setInterval!==vme},{setInterval:vme})});var bme=S(()=>{"use strict";var Zbt=K(),xme=nt(),Kbt=xT(),_me=Kbt(xme.setTimeout,!0);Zbt({global:!0,bind:!0,forced:xme.setTimeout!==_me},{setTimeout:_me})});var wme=S(()=>{"use strict";yme();bme()});var X_=S((bKt,Tme)=>{"use strict";var Hbt=Xe(),Xbt=Rt(),Jbt=At(),Sme=fr(),Ybt=Xbt("iterator");Tme.exports=!Hbt(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,i=new URLSearchParams("a=1&a=2&b=3"),o="";return e.pathname="c%20d",t.forEach(function(c,a){t.delete("b"),o+=a+c}),i.delete("a",2),i.delete("b",void 0),Sme&&(!e.toJSON||!i.has("a",1)||i.has("a",2)||!i.has("a",void 0)||i.has("b"))||!t.size&&(Sme||!Jbt)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[Ybt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||o!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var Ome=S((wKt,Rme)=>{"use strict";var Td=Ze(),Oz=2147483647,J_=36,Pme=1,Lz=26,Qbt=38,e1t=700,t1t=72,r1t=128,i1t="-",n1t=/[^\0-\u007E]/,Cme=/[.\u3002\uFF0E\uFF61]/g,Eme="Overflow: input needs wider integers to process",kz=J_-Pme,Ame=RangeError,a1t=Td(Cme.exec),gm=Math.floor,Dz=String.fromCharCode,qme=Td("".charCodeAt),Mme=Td([].join),Fc=Td([].push),o1t=Td("".replace),s1t=Td("".split),l1t=Td("".toLowerCase),u1t=function(e){for(var t=[],i=0,o=e.length;i<o;){var c=qme(e,i++);if(c>=55296&&c<=56319&&i<o){var a=qme(e,i++);(a&64512)===56320?Fc(t,((c&1023)<<10)+(a&1023)+65536):(Fc(t,c),i--)}else Fc(t,c)}return t},Ime=function(e){return e+22+75*(e<26)},c1t=function(e,t,i){var o=0;for(e=i?gm(e/e1t):e>>1,e+=gm(e/t);e>kz*Lz>>1;)e=gm(e/kz),o+=J_;return gm(o+(kz+1)*e/(e+Qbt))},h1t=function(e){var t=[];e=u1t(e);var i=e.length,o=r1t,c=0,a=t1t,g,x;for(g=0;g<e.length;g++)x=e[g],x<128&&Fc(t,Dz(x));var E=t.length,P=E;for(E&&Fc(t,i1t);P<i;){var M=Oz;for(g=0;g<e.length;g++)x=e[g],x>=o&&x<M&&(M=x);var O=P+1;if(M-o>gm((Oz-c)/O))throw new Ame(Eme);for(c+=(M-o)*O,o=M,g=0;g<e.length;g++){if(x=e[g],x<o&&++c>Oz)throw new Ame(Eme);if(x===o){for(var z=c,oe=J_;;){var we=oe<=a?Pme:oe>=a+Lz?Lz:oe-a;if(z<we)break;var ye=z-we,te=J_-we;Fc(t,Dz(Ime(we+ye%te))),z=gm(ye/te),oe+=J_}Fc(t,Dz(Ime(z))),a=c1t(c,O,P===E),c=0,P++}}c++,o++}return Mme(t,"")};Rme.exports=function(e){var t=[],i=s1t(o1t(l1t(e),Cme,"."),"."),o,c;for(o=0;o<i.length;o++)c=i[o],Fc(t,a1t(n1t,c)?"xn--"+h1t(c):c);return Mme(t,".")}});var Wz=S((SKt,rve)=>{"use strict";Sy();jk();var Uz=K(),Gme=nt(),Vz=qO(),d1t=Ot(),IT=at(),ms=Ze(),Y_=At(),Zme=X_(),Kme=wr(),f1t=Gr(),p1t=ko(),m1t=ma(),v1t=gc(),$z=yr(),Hme=Yn(),Fz=Zt(),g1t=Ht(),y1t=qr(),_1t=pa(),x1t=ot(),Xme=Pt(),ga=Nt(),b1t=bi(),kme=ka(),Dme=pc(),w1t=Zs(),PT=en(),ym=oo(),S1t=Rt(),T1t=Q1(),E1t=S1t("iterator"),xm="URLSearchParams",Jme=xm+"Iterator",Yme=$z.set,Fo=$z.getterFor(xm),A1t=$z.getterFor(Jme),Lme=Vz("fetch"),RT=Vz("Request"),Q_=Vz("Headers"),zz=RT&&RT.prototype,Fme=Q_&&Q_.prototype,q1t=Gme.TypeError,I1t=Gme.encodeURIComponent,P1t=String.fromCharCode,C1t=d1t("String","fromCodePoint"),M1t=parseInt,MT=ms("".charAt),zme=ms([].join),zc=ms([].push),Qme=ms("".replace),R1t=ms([].shift),Nme=ms([].splice),Bme=ms("".split),eve=ms("".slice),O1t=ms(/./.exec),k1t=/\+/g,Nz="\uFFFD",D1t=/^[0-9a-f]+$/i,jme=function(e,t){var i=eve(e,t,t+2);return O1t(D1t,i)?M1t(i,16):NaN},L1t=function(e){for(var t=0,i=128;i>0&&(e&i)!==0;i>>=1)t++;return t},F1t=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break}return t>1114111?null:t},Ume=function(e){e=Qme(e,k1t," ");for(var t=e.length,i="",o=0;o<t;){var c=MT(e,o);if(c==="%"){if(MT(e,o+1)==="%"||o+3>t){i+="%",o++;continue}var a=jme(e,o+1);if(a!==a){i+=c,o++;continue}o+=2;var g=L1t(a);if(g===0)c=P1t(a);else{if(g===1||g>4){i+=Nz,o++;continue}for(var x=[a],E=1;E<g&&(o++,!(o+3>t||MT(e,o)!=="%"));){var P=jme(e,o+1);if(P!==P){o+=3;break}if(P>191||P<128)break;zc(x,P),o+=2,E++}if(x.length!==g){i+=Nz;continue}var M=F1t(x);M===null?i+=Nz:c=C1t(M)}}i+=c,o++}return i},z1t=/[!'()~]|%20/g,N1t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},B1t=function(e){return N1t[e]},Vme=function(e){return Qme(I1t(e),z1t,B1t)},Bz=v1t(function(t,i){Yme(this,{type:Jme,target:Fo(t).entries,index:0,kind:i})},xm,function(){var t=A1t(this),i=t.target,o=t.index++;if(!i||o>=i.length)return t.target=null,PT(void 0,!0);var c=i[o];switch(t.kind){case"keys":return PT(c.key,!1);case"values":return PT(c.value,!1)}return PT([c.key,c.value],!1)},!0),tve=function(e){this.entries=[],this.url=null,e!==void 0&&(Xme(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?MT(e,0)==="?"?eve(e,1):e:ga(e)))};tve.prototype={type:xm,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,i=w1t(e),o,c,a,g,x,E,P;if(i)for(o=Dme(e,i),c=o.next;!(a=IT(c,o)).done;){if(g=Dme(x1t(a.value)),x=g.next,(E=IT(x,g)).done||(P=IT(x,g)).done||!IT(x,g).done)throw new q1t("Expected sequence with length 2");zc(t,{key:ga(E.value),value:ga(P.value)})}else for(var M in e)g1t(e,M)&&zc(t,{key:M,value:ga(e[M])})},parseQuery:function(e){if(e)for(var t=this.entries,i=Bme(e,"&"),o=0,c,a;o<i.length;)c=i[o++],c.length&&(a=Bme(c,"="),zc(t,{key:Ume(R1t(a)),value:Ume(zme(a,"="))}))},serialize:function(){for(var e=this.entries,t=[],i=0,o;i<e.length;)o=e[i++],zc(t,Vme(o.key)+"="+Vme(o.value));return zme(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var OT=function(){Hme(this,_m);var t=arguments.length>0?arguments[0]:void 0,i=Yme(this,new tve(t));Y_||(this.size=i.entries.length)},_m=OT.prototype;p1t(_m,{append:function(t,i){var o=Fo(this);ym(arguments.length,2),zc(o.entries,{key:ga(t),value:ga(i)}),Y_||this.length++,o.updateURL()},delete:function(e){for(var t=Fo(this),i=ym(arguments.length,1),o=t.entries,c=ga(e),a=i<2?void 0:arguments[1],g=a===void 0?a:ga(a),x=0;x<o.length;){var E=o[x];if(E.key===c&&(g===void 0||E.value===g)){if(Nme(o,x,1),g!==void 0)break}else x++}Y_||(this.size=o.length),t.updateURL()},get:function(t){var i=Fo(this).entries;ym(arguments.length,1);for(var o=ga(t),c=0;c<i.length;c++)if(i[c].key===o)return i[c].value;return null},getAll:function(t){var i=Fo(this).entries;ym(arguments.length,1);for(var o=ga(t),c=[],a=0;a<i.length;a++)i[a].key===o&&zc(c,i[a].value);return c},has:function(t){for(var i=Fo(this).entries,o=ym(arguments.length,1),c=ga(t),a=o<2?void 0:arguments[1],g=a===void 0?a:ga(a),x=0;x<i.length;){var E=i[x++];if(E.key===c&&(g===void 0||E.value===g))return!0}return!1},set:function(t,i){var o=Fo(this);ym(arguments.length,1);for(var c=o.entries,a=!1,g=ga(t),x=ga(i),E=0,P;E<c.length;E++)P=c[E],P.key===g&&(a?Nme(c,E--,1):(a=!0,P.value=x));a||zc(c,{key:g,value:x}),Y_||(this.size=c.length),o.updateURL()},sort:function(){var t=Fo(this);T1t(t.entries,function(i,o){return i.key>o.key?1:-1}),t.updateURL()},forEach:function(t){for(var i=Fo(this).entries,o=y1t(t,arguments.length>1?arguments[1]:void 0),c=0,a;c<i.length;)a=i[c++],o(a.value,a.key,this)},keys:function(){return new Bz(this,"keys")},values:function(){return new Bz(this,"values")},entries:function(){return new Bz(this,"entries")}},{enumerable:!0});Kme(_m,E1t,_m.entries,{name:"entries"});Kme(_m,"toString",function(){return Fo(this).serialize()},{enumerable:!0});Y_&&f1t(_m,"size",{get:function(){return Fo(this).entries.length},configurable:!0,enumerable:!0});m1t(OT,xm);Uz({global:!0,constructor:!0,forced:!Zme},{URLSearchParams:OT});!Zme&&Fz(Q_)&&($me=ms(Fme.has),Wme=ms(Fme.set),jz=function(e){if(Xme(e)){var t=e.body,i;if(_1t(t)===xm)return i=e.headers?new Q_(e.headers):new Q_,$me(i,"content-type")||Wme(i,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),b1t(e,{body:kme(0,ga(t)),headers:kme(0,i)})}return e},Fz(Lme)&&Uz({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return Lme(t,arguments.length>1?jz(arguments[1]):{})}}),Fz(RT)&&(CT=function(t){return Hme(this,zz),new RT(t,arguments.length>1?jz(arguments[1]):{})},zz.constructor=CT,CT.prototype=zz,Uz({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:CT})));var $me,Wme,jz,CT;rve.exports={URLSearchParams:OT,getState:Fo}});var xve=S(()=>{"use strict";Vk();var j1t=K(),lN=At(),U1t=X_(),uN=nt(),ive=qr(),Uo=Ze(),zT=wr(),zo=Gr(),V1t=Yn(),aN=Ht(),cN=uO(),bm=FC(),vs=Fa(),$1t=md().codeAt,W1t=Ome(),ou=Nt(),G1t=ma(),Z1t=oo(),pve=Wz(),mve=yr(),K1t=mve.set,NT=mve.getterFor("URL"),H1t=pve.URLSearchParams,X1t=pve.getState,e0=uN.URL,oN=uN.TypeError,BT=uN.parseInt,J1t=Math.floor,nve=Math.pow,jo=Uo("".charAt),gs=Uo(/./.exec),r0=Uo([].join),Y1t=Uo(1 .toString),Q1t=Uo([].pop),Sm=Uo([].push),Gz=Uo("".replace),ewt=Uo([].shift),twt=Uo("".split),n0=Uo("".slice),jT=Uo("".toLowerCase),rwt=Uo([].unshift),iwt="Invalid authority",Zz="Invalid scheme",Ed="Invalid host",ave="Invalid port",vve=/[a-z]/i,nwt=/[\d+-.a-z]/i,sN=/\d/,awt=/^0x/i,owt=/^[0-7]+$/,swt=/^\d+$/,gve=/^[\da-f]+$/i,lwt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,uwt=/[\0\t\n\r #/:<>?@[\\\]^|]/,cwt=/^[\u0000-\u0020]+/,hwt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,dwt=/[\t\n\r]/g,No,fwt=function(e){var t=twt(e,"."),i,o,c,a,g,x,E;if(t.length&&t[t.length-1]===""&&t.length--,i=t.length,i>4)return e;for(o=[],c=0;c<i;c++){if(a=t[c],a==="")return e;if(g=10,a.length>1&&jo(a,0)==="0"&&(g=gs(awt,a)?16:8,a=n0(a,g===8?1:2)),a==="")x=0;else{if(!gs(g===10?swt:g===8?owt:gve,a))return e;x=BT(a,g)}Sm(o,x)}for(c=0;c<i;c++)if(x=o[c],c===i-1){if(x>=nve(256,5-i))return null}else if(x>255)return null;for(E=Q1t(o),c=0;c<o.length;c++)E+=o[c]*nve(256,3-c);return E},pwt=function(e){var t=[0,0,0,0,0,0,0,0],i=0,o=null,c=0,a,g,x,E,P,M,O,z=function(){return jo(e,c)};if(z()===":"){if(jo(e,1)!==":")return;c+=2,i++,o=i}for(;z();){if(i===8)return;if(z()===":"){if(o!==null)return;c++,i++,o=i;continue}for(a=g=0;g<4&&gs(gve,z());)a=a*16+BT(z(),16),c++,g++;if(z()==="."){if(g===0||(c-=g,i>6))return;for(x=0;z();){if(E=null,x>0)if(z()==="."&&x<4)c++;else return;if(!gs(sN,z()))return;for(;gs(sN,z());){if(P=BT(z(),10),E===null)E=P;else{if(E===0)return;E=E*10+P}if(E>255)return;c++}t[i]=t[i]*256+E,x++,(x===2||x===4)&&i++}if(x!==4)return;break}else if(z()===":"){if(c++,!z())return}else if(z())return;t[i++]=a}if(o!==null)for(M=i-o,i=7;i!==0&&M>0;)O=t[i],t[i--]=t[o+M-1],t[o+--M]=O;else if(i!==8)return;return t},mwt=function(e){for(var t=null,i=1,o=null,c=0,a=0;a<8;a++)e[a]!==0?(c>i&&(t=o,i=c),o=null,c=0):(o===null&&(o=a),++c);return c>i?o:t},t0=function(e){var t,i,o,c;if(typeof e=="number"){for(t=[],i=0;i<4;i++)rwt(t,e%256),e=J1t(e/256);return r0(t,".")}if(typeof e=="object"){for(t="",o=mwt(e),i=0;i<8;i++)c&&e[i]===0||(c&&(c=!1),o===i?(t+=i?":":"::",c=!0):(t+=Y1t(e[i],16),i<7&&(t+=":")));return"["+t+"]"}return e},FT={},yve=cN({},FT,{" ":1,"\"":1,"<":1,">":1,"`":1}),_ve=cN({},yve,{"#":1,"?":1,"{":1,"}":1}),Kz=cN({},_ve,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Nc=function(e,t){var i=$1t(e,0);return i>32&&i<127&&!aN(t,e)?e:encodeURIComponent(e)},kT={ftp:21,file:null,http:80,https:443,ws:80,wss:443},i0=function(e,t){var i;return e.length===2&&gs(vve,jo(e,0))&&((i=jo(e,1))===":"||!t&&i==="|")},ove=function(e){var t;return e.length>1&&i0(n0(e,0,2))&&(e.length===2||(t=jo(e,2))==="/"||t==="\\"||t==="?"||t==="#")},vwt=function(e){return e==="."||jT(e)==="%2e"},gwt=function(e){return e=jT(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},Hz={},sve={},Xz={},lve={},uve={},Jz={},cve={},hve={},DT={},LT={},Yz={},Qz={},eN={},tN={},dve={},rN={},wm={},nl={},fve={},Ad={},au={},hN=function(e,t,i){var o=ou(e),c,a,g;if(t){if(a=this.parse(o),a)throw new oN(a);this.searchParams=null}else{if(i!==void 0&&(c=new hN(i,!0)),a=this.parse(o,null,c),a)throw new oN(a);g=X1t(new H1t),g.bindURL(this),this.searchParams=g}};hN.prototype={type:"URL",parse:function(e,t,i){var o=this,c=t||Hz,a=0,g="",x=!1,E=!1,P=!1,M,O,z,oe;for(e=ou(e),t||(o.scheme="",o.username="",o.password="",o.host=null,o.port=null,o.path=[],o.query=null,o.fragment=null,o.cannotBeABaseURL=!1,e=Gz(e,cwt,""),e=Gz(e,hwt,"$1")),e=Gz(e,dwt,""),M=bm(e);a<=M.length;){switch(O=M[a],c){case Hz:if(O&&gs(vve,O))g+=jT(O),c=sve;else{if(t)return Zz;c=Xz;continue}break;case sve:if(O&&(gs(nwt,O)||O==="+"||O==="-"||O==="."))g+=jT(O);else if(O===":"){if(t&&(o.isSpecial()!==aN(kT,g)||g==="file"&&(o.includesCredentials()||o.port!==null)||o.scheme==="file"&&!o.host))return;if(o.scheme=g,t){o.isSpecial()&&kT[o.scheme]===o.port&&(o.port=null);return}g="",o.scheme==="file"?c=tN:o.isSpecial()&&i&&i.scheme===o.scheme?c=lve:o.isSpecial()?c=hve:M[a+1]==="/"?(c=uve,a++):(o.cannotBeABaseURL=!0,Sm(o.path,""),c=fve)}else{if(t)return Zz;g="",c=Xz,a=0;continue}break;case Xz:if(!i||i.cannotBeABaseURL&&O!=="#")return Zz;if(i.cannotBeABaseURL&&O==="#"){o.scheme=i.scheme,o.path=vs(i.path),o.query=i.query,o.fragment="",o.cannotBeABaseURL=!0,c=au;break}c=i.scheme==="file"?tN:Jz;continue;case lve:if(O==="/"&&M[a+1]==="/")c=DT,a++;else{c=Jz;continue}break;case uve:if(O==="/"){c=LT;break}else{c=nl;continue}case Jz:if(o.scheme=i.scheme,O===No)o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=vs(i.path),o.query=i.query;else if(O==="/"||O==="\\"&&o.isSpecial())c=cve;else if(O==="?")o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=vs(i.path),o.query="",c=Ad;else if(O==="#")o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=vs(i.path),o.query=i.query,o.fragment="",c=au;else{o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=vs(i.path),o.path.length--,c=nl;continue}break;case cve:if(o.isSpecial()&&(O==="/"||O==="\\"))c=DT;else if(O==="/")c=LT;else{o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,c=nl;continue}break;case hve:if(c=DT,O!=="/"||jo(g,a+1)!=="/")continue;a++;break;case DT:if(O!=="/"&&O!=="\\"){c=LT;continue}break;case LT:if(O==="@"){x&&(g="%40"+g),x=!0,z=bm(g);for(var we=0;we<z.length;we++){var ye=z[we];if(ye===":"&&!P){P=!0;continue}var te=Nc(ye,Kz);P?o.password+=te:o.username+=te}g=""}else if(O===No||O==="/"||O==="?"||O==="#"||O==="\\"&&o.isSpecial()){if(x&&g==="")return iwt;a-=bm(g).length+1,g="",c=Yz}else g+=O;break;case Yz:case Qz:if(t&&o.scheme==="file"){c=rN;continue}else if(O===":"&&!E){if(g==="")return Ed;if(oe=o.parseHost(g),oe)return oe;if(g="",c=eN,t===Qz)return}else if(O===No||O==="/"||O==="?"||O==="#"||O==="\\"&&o.isSpecial()){if(o.isSpecial()&&g==="")return Ed;if(t&&g===""&&(o.includesCredentials()||o.port!==null))return;if(oe=o.parseHost(g),oe)return oe;if(g="",c=wm,t)return;continue}else O==="["?E=!0:O==="]"&&(E=!1),g+=O;break;case eN:if(gs(sN,O))g+=O;else if(O===No||O==="/"||O==="?"||O==="#"||O==="\\"&&o.isSpecial()||t){if(g!==""){var Q=BT(g,10);if(Q>65535)return ave;o.port=o.isSpecial()&&Q===kT[o.scheme]?null:Q,g=""}if(t)return;c=wm;continue}else return ave;break;case tN:if(o.scheme="file",O==="/"||O==="\\")c=dve;else if(i&&i.scheme==="file")switch(O){case No:o.host=i.host,o.path=vs(i.path),o.query=i.query;break;case"?":o.host=i.host,o.path=vs(i.path),o.query="",c=Ad;break;case"#":o.host=i.host,o.path=vs(i.path),o.query=i.query,o.fragment="",c=au;break;default:ove(r0(vs(M,a),""))||(o.host=i.host,o.path=vs(i.path),o.shortenPath()),c=nl;continue}else{c=nl;continue}break;case dve:if(O==="/"||O==="\\"){c=rN;break}i&&i.scheme==="file"&&!ove(r0(vs(M,a),""))&&(i0(i.path[0],!0)?Sm(o.path,i.path[0]):o.host=i.host),c=nl;continue;case rN:if(O===No||O==="/"||O==="\\"||O==="?"||O==="#"){if(!t&&i0(g))c=nl;else if(g===""){if(o.host="",t)return;c=wm}else{if(oe=o.parseHost(g),oe)return oe;if(o.host==="localhost"&&(o.host=""),t)return;g="",c=wm}continue}else g+=O;break;case wm:if(o.isSpecial()){if(c=nl,O!=="/"&&O!=="\\")continue}else if(!t&&O==="?")o.query="",c=Ad;else if(!t&&O==="#")o.fragment="",c=au;else if(O!==No&&(c=nl,O!=="/"))continue;break;case nl:if(O===No||O==="/"||O==="\\"&&o.isSpecial()||!t&&(O==="?"||O==="#")){if(gwt(g)?(o.shortenPath(),O!=="/"&&!(O==="\\"&&o.isSpecial())&&Sm(o.path,"")):vwt(g)?O!=="/"&&!(O==="\\"&&o.isSpecial())&&Sm(o.path,""):(o.scheme==="file"&&!o.path.length&&i0(g)&&(o.host&&(o.host=""),g=jo(g,0)+":"),Sm(o.path,g)),g="",o.scheme==="file"&&(O===No||O==="?"||O==="#"))for(;o.path.length>1&&o.path[0]==="";)ewt(o.path);O==="?"?(o.query="",c=Ad):O==="#"&&(o.fragment="",c=au)}else g+=Nc(O,_ve);break;case fve:O==="?"?(o.query="",c=Ad):O==="#"?(o.fragment="",c=au):O!==No&&(o.path[0]+=Nc(O,FT));break;case Ad:!t&&O==="#"?(o.fragment="",c=au):O!==No&&(O==="'"&&o.isSpecial()?o.query+="%27":O==="#"?o.query+="%23":o.query+=Nc(O,FT));break;case au:O!==No&&(o.fragment+=Nc(O,yve));break}a++}},parseHost:function(e){var t,i,o;if(jo(e,0)==="["){if(jo(e,e.length-1)!=="]"||(t=pwt(n0(e,1,-1)),!t))return Ed;this.host=t}else if(this.isSpecial()){if(e=W1t(e),gs(lwt,e)||(t=fwt(e),t===null))return Ed;this.host=t}else{if(gs(uwt,e))return Ed;for(t="",i=bm(e),o=0;o<i.length;o++)t+=Nc(i[o],FT);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return aN(kT,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!i0(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,i=e.username,o=e.password,c=e.host,a=e.port,g=e.path,x=e.query,E=e.fragment,P=t+":";return c!==null?(P+="//",e.includesCredentials()&&(P+=i+(o?":"+o:"")+"@"),P+=t0(c),a!==null&&(P+=":"+a)):t==="file"&&(P+="//"),P+=e.cannotBeABaseURL?g[0]:g.length?"/"+r0(g,"/"):"",x!==null&&(P+="?"+x),E!==null&&(P+="#"+E),P},setHref:function(e){var t=this.parse(e);if(t)throw new oN(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Tm(e.path[0]).origin}catch(i){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+t0(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(ou(e)+":",Hz)},getUsername:function(){return this.username},setUsername:function(e){var t=bm(ou(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<t.length;i++)this.username+=Nc(t[i],Kz)}},getPassword:function(){return this.password},setPassword:function(e){var t=bm(ou(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<t.length;i++)this.password+=Nc(t[i],Kz)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?t0(e):t0(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Yz)},getHostname:function(){var e=this.host;return e===null?"":t0(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Qz)},getPort:function(){var e=this.port;return e===null?"":ou(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=ou(e),e===""?this.port=null:this.parse(e,eN))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+r0(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,wm))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=ou(e),e===""?this.query=null:(jo(e,0)==="?"&&(e=n0(e,1)),this.query="",this.parse(e,Ad)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=ou(e),e===""){this.fragment=null;return}jo(e,0)==="#"&&(e=n0(e,1)),this.fragment="",this.parse(e,au)},update:function(){this.query=this.searchParams.serialize()||null}};var Tm=function(t){var i=V1t(this,ya),o=Z1t(arguments.length,1)>1?arguments[1]:void 0,c=K1t(i,new hN(t,!1,o));lN||(i.href=c.serialize(),i.origin=c.getOrigin(),i.protocol=c.getProtocol(),i.username=c.getUsername(),i.password=c.getPassword(),i.host=c.getHost(),i.hostname=c.getHostname(),i.port=c.getPort(),i.pathname=c.getPathname(),i.search=c.getSearch(),i.searchParams=c.getSearchParams(),i.hash=c.getHash())},ya=Tm.prototype,Bo=function(e,t){return{get:function(){return NT(this)[e]()},set:t&&function(i){return NT(this)[t](i)},configurable:!0,enumerable:!0}};lN&&(zo(ya,"href",Bo("serialize","setHref")),zo(ya,"origin",Bo("getOrigin")),zo(ya,"protocol",Bo("getProtocol","setProtocol")),zo(ya,"username",Bo("getUsername","setUsername")),zo(ya,"password",Bo("getPassword","setPassword")),zo(ya,"host",Bo("getHost","setHost")),zo(ya,"hostname",Bo("getHostname","setHostname")),zo(ya,"port",Bo("getPort","setPort")),zo(ya,"pathname",Bo("getPathname","setPathname")),zo(ya,"search",Bo("getSearch","setSearch")),zo(ya,"searchParams",Bo("getSearchParams")),zo(ya,"hash",Bo("getHash","setHash")));zT(ya,"toJSON",function(){return NT(this).serialize()},{enumerable:!0});zT(ya,"toString",function(){return NT(this).serialize()},{enumerable:!0});e0&&(iN=e0.createObjectURL,nN=e0.revokeObjectURL,iN&&zT(Tm,"createObjectURL",ive(iN,e0)),nN&&zT(Tm,"revokeObjectURL",ive(nN,e0)));var iN,nN;G1t(Tm,"URL");j1t({global:!0,constructor:!0,forced:!U1t,sham:!lN},{URL:Tm})});var bve=S(()=>{"use strict";xve()});var Tve=S(()=>{"use strict";var ywt=K(),_wt=Ot(),Sve=Xe(),xwt=oo(),wve=Nt(),bwt=X_(),dN=_wt("URL"),wwt=bwt&&Sve(function(){dN.canParse()}),Swt=Sve(function(){return dN.canParse.length!==1});ywt({target:"URL",stat:!0,forced:!wwt||Swt},{canParse:function(t){var i=xwt(arguments.length,1),o=wve(t),c=i<2||arguments[1]===void 0?void 0:wve(arguments[1]);try{return!!new dN(o,c)}catch(a){return!1}}})});var Ave=S(()=>{"use strict";var Twt=K(),Ewt=Ot(),Awt=oo(),Eve=Nt(),qwt=X_(),Iwt=Ewt("URL");Twt({target:"URL",stat:!0,forced:!qwt},{parse:function(t){var i=Awt(arguments.length,1),o=Eve(t),c=i<2||arguments[1]===void 0?void 0:Eve(arguments[1]);try{return new Iwt(o,c)}catch(a){return null}}})});var qve=S(()=>{"use strict";var Pwt=K(),Cwt=at();Pwt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Cwt(URL.prototype.toString,this)}})});var Ive=S(()=>{"use strict";Wz()});var Rve=S(()=>{"use strict";var Mwt=wr(),UT=Ze(),Pve=Nt(),Rwt=oo(),Mve=URLSearchParams,VT=Mve.prototype,Owt=UT(VT.append),Cve=UT(VT.delete),kwt=UT(VT.forEach),Dwt=UT([].push),fN=new Mve("a=1&a=2&b=3");fN.delete("a",1);fN.delete("b",void 0);fN+""!="a=2"&&Mwt(VT,"delete",function(e){var t=arguments.length,i=t<2?void 0:arguments[1];if(t&&i===void 0)return Cve(this,e);var o=[];kwt(this,function(O,z){Dwt(o,{key:z,value:O})}),Rwt(t,1);for(var c=Pve(e),a=Pve(i),g=0,x=0,E=!1,P=o.length,M;g<P;)M=o[g++],E||M.key===c?(E=!0,Cve(this,M.key)):x++;for(;x<P;)M=o[x++],M.key===c&&M.value===a||Owt(this,M.key,M.value)},{enumerable:!0,unsafe:!0})});var Lve=S(()=>{"use strict";var Lwt=wr(),kve=Ze(),Fwt=Nt(),zwt=oo(),Dve=URLSearchParams,pN=Dve.prototype,Nwt=kve(pN.getAll),Bwt=kve(pN.has),Ove=new Dve("a=1");(Ove.has("a",2)||!Ove.has("a",void 0))&&Lwt(pN,"has",function(t){var i=arguments.length,o=i<2?void 0:arguments[1];if(i&&o===void 0)return Bwt(this,t);var c=Nwt(this,t);zwt(i,1);for(var a=Fwt(o),g=0;g<c.length;)if(c[g++]===a)return!0;return!1},{enumerable:!0,unsafe:!0})});var Fve=S(()=>{"use strict";var jwt=At(),Uwt=Ze(),Vwt=Gr(),mN=URLSearchParams.prototype,$wt=Uwt(mN.forEach);jwt&&!("size"in mN)&&Vwt(mN,"size",{get:function(){var t=0;return $wt(this,function(){t++}),t},configurable:!0,enumerable:!0})});var Nve=S((UKt,zve)=>{"use strict";D$();U$();V$();$$();W$();G$();Z$();K$();H$();X$();J$();Y$();Q$();eW();tW();qW();RW();TC();YW();IC();oG();cG();dG();mG();vG();yG();xG();OC();kC();EG();AG();PG();zG();NG();jG();UG();Sy();uZ();fZ();pZ();vZ();yZ();AZ();IZ();CZ();OZ();kZ();XZ();QZ();e7();eM();rM();iM();n7();a7();o7();aM();F7();H7();tK();iK();EM();PM();RM();ZM();KM();RK();kK();FK();zK();KK();HK();eH();nH();oH();dH();mH();_H();tR();oR();hR();fR();mR();gR();SR();ER();AR();gw();PR();MR();OR();kR();uC();JH();ww();UR();_9();w9();T9();E9();A9();P9();M9();R9();GR();k9();L9();z9();N9();B9();j9();$9();Z9();K9();H9();oX();sX();uX();hX();dX();fX();pX();mX();bX();PX();kX();BX();VX();KX();HX();YX();eJ();rJ();iJ();uJ();cJ();hJ();pJ();mJ();vJ();yJ();dO();fO();bJ();SJ();EJ();qJ();PJ();CJ();MJ();RJ();FJ();zJ();NJ();UJ();VJ();WJ();ZJ();oQ();HO();XO();hQ();ek();tk();pQ();bQ();TQ();EQ();PQ();CQ();MQ();RQ();OQ();kQ();DQ();BQ();UQ();VQ();oee();gk();pee();Gw();xee();wee();Eee();Pee();Mee();Ek();Ik();Ck();Rk();kk();Fk();Nk();lte();dte();gte();jk();bte();Uk();Vk();Dte();Xk();Gte();Zte();Jte();Yte();nre();oD();ure();pre();gre();_re();fD();Are();Mre();Lre();Bre();jre();Ure();Vre();$re();Wre();Gre();Zre();Kre();Hre();Xre();Jre();Yre();Eie();Aie();qie();Iie();Pie();Cie();Mie();Rie();Oie();ID();Lie();zie();Bie();Vie();Wie();Zie();PD();CD();Jie();Yie();ene();rne();sne();une();hne();dne();pne();vne();yne();xne();Ane();qne();Pne();Dne();Fne();Une();$D();WD();$ne();ZD();Hne();bS();hae();dae();mae();Uae();Vae();$ae();Wae();Gae();Zae();Hae();Xae();Yae();Qae();roe();ioe();ooe();soe();loe();uoe();voe();goe();yoe();_oe();xoe();Ooe();zoe();Xoe();ese();rse();ise();ase();ose();dse();fse();mse();vse();gse();yse();_se();wse();Sse();Cse();Lse();zse();Nse();Bse();jse();Use();Zse();Jse();Qse();tle();rle();ale();ole();sle();lle();cle();fle();vle();gle();yle();_le();xle();ble();wle();Sle();Tle();Ele();qle();Ile();Ple();Cle();Mle();Ole();Lle();Kle();rue();nue();oue();sue();uue();cue();hue();pue();mue();vue();gue();xue();wue();Sue();Eue();que();Iue();Mue();Rue();Oue();Due();Fue();zue();Vue();$ue();Wue();Zue();Kue();Hue();Xue();Jue();Yue();Que();ece();nce();ace();cce();hce();pce();mce();vce();xce();bce();wce();Sce();zce();Nce();Bce();jce();Uce();Kce();Xce();Yce();rhe();nhe();ohe();uhe();hhe();fhe();phe();mhe();vhe();ghe();whe();She();Ehe();Ahe();Ihe();Phe();Che();Mhe();Rhe();Ohe();khe();Dhe();Lhe();zhe();Bhe();Uhe();Vhe();$he();Whe();Ghe();Zhe();Khe();Hhe();ede();ade();Ede();Ade();qde();Ide();Pde();Cde();Mde();Rde();kde();Dde();Ude();Vde();$de();Wde();Gde();Zde();Kde();Hde();Jde();Yde();efe();rfe();ife();nfe();afe();ofe();sfe();lfe();ufe();cfe();wfe();qfe();Pfe();Cfe();Rfe();Ofe();Dfe();Ffe();Nfe();jfe();Ufe();Gfe();Zfe();Xfe();Jfe();Qfe();tpe();lpe();fpe();xpe();Epe();Fpe();$pe();Gpe();tme();rme();nme();mme();wme();bve();Tve();Ave();qve();Ive();Rve();Lve();Fve();zve.exports=I1()});var jve=S((VKt,Bve)=>{"use strict";Bve.exports=Nve()});var fge=S((ZKt,dge)=>{"use strict";var fSt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";dge.exports=fSt});var gge=S((KKt,vge)=>{"use strict";var pSt=fge();function pge(){}function mge(){}mge.resetWarningCache=pge;vge.exports=function(){function e(o,c,a,g,x,E){if(E!==pSt){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:mge,resetWarningCache:pge};return i.PropTypes=i,i}});var Oi=S((JKt,yge)=>{yge.exports=gge()();var HKt,XKt});var Ege=S((wN,SN)=>{(function(e,t){typeof wN=="object"&&typeof SN!="undefined"?SN.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(wN,function(){"use strict";var e={},t={};function i(c,a,g){if(t[c]=g,c==="index"){var x="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",E={};return t.shared(E),t.index(e,E),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))),e}}i("shared",["exports"],function(c){"use strict";function a(u,n,l,h){return new(l||(l=Promise))(function(p,y){function _(I){try{A(h.next(I))}catch(R){y(R)}}function w(I){try{A(h.throw(I))}catch(R){y(R)}}function A(I){var R;I.done?p(I.value):(R=I.value,R instanceof l?R:new l(function(D){D(R)})).then(_,w)}A((h=h.apply(u,n||[])).next())})}function g(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var x,E;function P(){if(E)return x;function u(n,l){this.x=n,this.y=l}return E=1,x=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,l){return this.clone()._rotateAround(n,l)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var l=n.x-this.x,h=n.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,l){return Math.atan2(this.x*l-this.y*n,this.x*n+this.y*l)},_matMult:function(n){var l=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=l,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var l=Math.cos(n),h=Math.sin(n),p=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=p,this},_rotateAround:function(n,l){var h=Math.cos(n),p=Math.sin(n),y=l.y+p*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-p*(this.y-l.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(n){return n instanceof u?n:Array.isArray(n)?new u(n[0],n[1]):n},x}typeof SuppressedError=="function"&&SuppressedError;var M,O,z=g(P()),oe=function(){if(O)return M;function u(n,l,h,p){this.cx=3*n,this.bx=3*(h-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(p-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=l,this.p2x=h,this.p2y=p}return O=1,M=u,u.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,l){if(l===void 0&&(l=1e-6),n<0)return 0;if(n>1)return 1;for(var h=n,p=0;p<8;p++){var y=this.sampleCurveX(h)-n;if(Math.abs(y)<l)return h;var _=this.sampleCurveDerivativeX(h);if(Math.abs(_)<1e-6)break;h-=y/_}var w=0,A=1;for(h=n,p=0;p<20&&(y=this.sampleCurveX(h),!(Math.abs(y-n)<l));p++)n>y?w=h:A=h,h=.5*(A-w)+w;return h},solve:function(n,l){return this.sampleCurveY(this.solveCurveX(n,l))}},M}(),we=g(oe);let ye,te;function Q(){return ye==null&&(ye=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ye}function ee(){if(te==null&&(te=!1,Q())){let n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){let p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}let l=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){te=!0;break}}}return te||!1}var xe=1e-6,Te=typeof Float32Array!="undefined"?Float32Array:Array;function Je(){var u=new Te(9);return Te!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function Ne(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function ut(){var u=new Te(3);return Te!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function xt(u){return Math.hypot(u[0],u[1],u[2])}function mt(u,n,l){var h=new Te(3);return h[0]=u,h[1]=n,h[2]=l,h}Math.hypot||(Math.hypot=function(){for(var u=0,n=arguments.length;n--;)u+=arguments[n]*arguments[n];return Math.sqrt(u)});var _r,kr=xt;function wt(u,n,l){var h=n[0],p=n[1],y=n[2],_=n[3];return u[0]=l[0]*h+l[4]*p+l[8]*y+l[12]*_,u[1]=l[1]*h+l[5]*p+l[9]*y+l[13]*_,u[2]=l[2]*h+l[6]*p+l[10]*y+l[14]*_,u[3]=l[3]*h+l[7]*p+l[11]*y+l[15]*_,u}function zt(){var u=new Te(4);return Te!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function xr(){var u=new Te(2);return Te!=Float32Array&&(u[0]=0,u[1]=0),u}function Kr(u,n){var l=new Te(2);return l[0]=u,l[1]=n,l}ut(),_r=new Te(4),Te!=Float32Array&&(_r[0]=0,_r[1]=0,_r[2]=0,_r[3]=0),ut(),mt(1,0,0),mt(0,1,0),zt(),zt(),Je(),xr();let Lt=8192;function Dr(u,n,l){return n*(Lt/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}function Si(u,n){return(u%n+n)%n}function wa(u,n,l){return u*(1-l)+n*l}function nn(u){if(u<=0)return 0;if(u>=1)return 1;let n=u*u,l=n*u;return 4*(u<.5?l:3*(u-n)+l-.75)}function ws(u,n,l,h){let p=new we(u,n,l,h);return y=>p.solve(y)}let jn=ws(.25,.1,.25,1);function fi(u,n,l){return Math.min(l,Math.max(n,u))}function fo(u,n,l){let h=l-n,p=((u-n)%h+h)%h+n;return p===n?l:p}function an(u,...n){for(let l of n)for(let h in l)u[h]=l[h];return u}let Ss=1;function po(u,n,l){let h={};for(let p in u)h[p]=n.call(this,u[p],p,u);return h}function ml(u,n,l){let h={};for(let p in u)n.call(this,u[p],p,u)&&(h[p]=u[p]);return h}function Wi(u){return Array.isArray(u)?u.map(Wi):typeof u=="object"&&u?po(u,Wi):u}let on={};function Ti(u){on[u]||(typeof console!="undefined"&&console.warn(u),on[u]=!0)}function gr(u,n,l){return(l.y-u.y)*(n.x-u.x)>(n.y-u.y)*(l.x-u.x)}function Sa(u){return typeof WorkerGlobalScope!="undefined"&&u!==void 0&&u instanceof WorkerGlobalScope}let Ha=null;function Un(u){return typeof ImageBitmap!="undefined"&&u instanceof ImageBitmap}let Ts="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Es(u,n,l,h,p){return a(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let y=new VideoFrame(u,{timestamp:0});try{let _=y==null?void 0:y.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);let w=_.startsWith("BGR"),A=new Uint8ClampedArray(h*p*4);if(yield y.copyTo(A,function(I,R,D,N,j){let U=4*Math.max(1,0),W=(Math.max(0,D)-D)*N*4+U,X=4*N,ae=Math.max(0,R),me=Math.max(0,D);return{rect:{x:ae,y:me,width:Math.min(I.width,R+N)-ae,height:Math.min(I.height,D+j)-me},layout:[{offset:W,stride:X}]}}(u,n,l,h,p)),w)for(let I=0;I<A.length;I+=4){let R=A[I];A[I]=A[I+2],A[I+2]=R}return A}finally{y.close()}})}let _n,Ta;function As(u,n,l,h){return u.addEventListener(n,l,h),{unsubscribe:()=>{u.removeEventListener(n,l,h)}}}function mo(u){return u*Math.PI/180}function ge(u){return u/Math.PI*180}let Re={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ve={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},gt="AbortError";function st(){return new Error(gt)}let tt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function dt(u){return tt.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}let Bt="global-dispatcher";class Kt extends Error{constructor(n,l,h,p){super(`AJAXError: ${l} (${n}): ${h}`),this.status=n,this.statusText=l,this.url=h,this.body=p}}let tr=()=>Sa(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,xn=function(u,n){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){let h=dt(u.url);if(h)return h(u,n);if(Sa(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:Bt},n)}if(!(/^file:/.test(l=u.url)||/^file:/.test(tr())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return a(this,void 0,void 0,function*(){let y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:tr(),signal:p.signal}),_,w;h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");try{_=yield fetch(y)}catch(I){throw new Kt(0,I.message,h.url,new Blob())}if(!_.ok){let I=yield _.blob();throw new Kt(_.status,_.statusText,h.url,I)}w=h.type==="arrayBuffer"||h.type==="image"?_.arrayBuffer():h.type==="json"?_.json():_.text();let A=yield w;if(p.signal.aborted)throw st();return{data:A,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}})}(u,n);if(Sa(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:Bt},n)}var l;return function(h,p){return new Promise((y,_)=>{var w;let A=new XMLHttpRequest;A.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(A.responseType="arraybuffer");for(let I in h.headers)A.setRequestHeader(I,h.headers[I]);h.type==="json"&&(A.responseType="text",!((w=h.headers)===null||w===void 0)&&w.Accept||A.setRequestHeader("Accept","application/json")),A.withCredentials=h.credentials==="include",A.onerror=()=>{_(new Error(A.statusText))},A.onload=()=>{if(!p.signal.aborted)if((A.status>=200&&A.status<300||A.status===0)&&A.response!==null){let I=A.response;if(h.type==="json")try{I=JSON.parse(A.response)}catch(R){return void _(R)}y({data:I,cacheControl:A.getResponseHeader("Cache-Control"),expires:A.getResponseHeader("Expires")})}else{let I=new Blob([A.response],{type:A.getResponseHeader("Content-Type")});_(new Kt(A.status,A.statusText,h.url,I))}},p.signal.addEventListener("abort",()=>{A.abort(),_(st())}),A.send(h.body)})}(u,n)};function Se(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;let n=new URL(u),l=window.location;return n.protocol===l.protocol&&n.host===l.host}function G(u,n,l){l[u]&&l[u].indexOf(n)!==-1||(l[u]=l[u]||[],l[u].push(n))}function Z(u,n,l){if(l&&l[u]){let h=l[u].indexOf(n);h!==-1&&l[u].splice(h,1)}}class Y{constructor(n,l={}){an(this,l),this.type=n}}class ue extends Y{constructor(n,l={}){super("error",an({error:n},l))}}class ve{on(n,l){return this._listeners=this._listeners||{},G(n,l,this._listeners),{unsubscribe:()=>{this.off(n,l)}}}off(n,l){return Z(n,l,this._listeners),Z(n,l,this._oneTimeListeners),this}once(n,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},G(n,l,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,l){typeof n=="string"&&(n=new Y(n,l||{}));let h=n.type;if(this.listens(h)){n.target=this;let p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let w of p)w.call(this,n);let y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let w of y)Z(h,w,this._oneTimeListeners),w.call(this,n);let _=this._eventedParent;_&&(an(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof ue&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,l){return this._eventedParent=n,this._eventedParentData=l,this}}var J={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Pe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function be(u,n){let l={};for(let h in u)h!=="ref"&&(l[h]=u[h]);return Pe.forEach(h=>{h in n&&(l[h]=n[h])}),l}function Ae(u,n){if(Array.isArray(u)){if(!Array.isArray(n)||u.length!==n.length)return!1;for(let l=0;l<u.length;l++)if(!Ae(u[l],n[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&n!==null){if(typeof n!="object"||Object.keys(u).length!==Object.keys(n).length)return!1;for(let l in u)if(!Ae(u[l],n[l]))return!1;return!0}return u===n}function Ce(u,n){u.push(n)}function Ee(u,n,l){Ce(l,{command:"addSource",args:[u,n[u]]})}function Ue(u,n,l){Ce(n,{command:"removeSource",args:[u]}),l[u]=!0}function et(u,n,l,h){Ue(u,l,h),Ee(u,n,l)}function rt(u,n,l){let h;for(h in u[l])if(Object.prototype.hasOwnProperty.call(u[l],h)&&h!=="data"&&!Ae(u[l][h],n[l][h]))return!1;for(h in n[l])if(Object.prototype.hasOwnProperty.call(n[l],h)&&h!=="data"&&!Ae(u[l][h],n[l][h]))return!1;return!0}function St(u,n,l,h,p,y){u=u||{},n=n||{};for(let _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(Ae(u[_],n[_])||l.push({command:y,args:[h,_,n[_],p]}));for(let _ in n)Object.prototype.hasOwnProperty.call(n,_)&&!Object.prototype.hasOwnProperty.call(u,_)&&(Ae(u[_],n[_])||l.push({command:y,args:[h,_,n[_],p]}))}function jt(u){return u.id}function Mt(u,n){return u[n.id]=n,u}class Le{constructor(n,l,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),l!=null&&l.__line__&&(this.line=l.__line__)}}function mr(u,...n){for(let l of n)for(let h in l)u[h]=l[h];return u}class rr extends Error{constructor(n,l){super(l),this.message=l,this.key=n}}class cr{constructor(n,l=[]){this.parent=n,this.bindings={};for(let[h,p]of l)this.bindings[h]=p}concat(n){return new cr(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}let Ct={kind:"null"},je={kind:"number"},qt={kind:"string"},Ut={kind:"boolean"},Hr={kind:"color"},Xr={kind:"projectionDefinition"},Vn={kind:"object"},Vt={kind:"value"},cu={kind:"collator"},Gc={kind:"formatted"},vl={kind:"padding"},Zc={kind:"colorArray"},Go={kind:"numberArray"},gl={kind:"resolvedImage"},ci={kind:"variableAnchorOffsetCollection"};function aa(u,n){return{kind:"array",itemType:u,N:n}}function Lr(u){if(u.kind==="array"){let n=Lr(u.itemType);return typeof u.N=="number"?`array<${n}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${n}>`}return u.kind}let Kc=[Ct,je,qt,Ut,Hr,Xr,Gc,Vn,aa(Vt),vl,Go,Zc,gl,ci];function hu(u,n){if(n.kind==="error")return null;if(u.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!hu(u.itemType,n.itemType))&&(typeof u.N!="number"||u.N===n.N))return null}else{if(u.kind===n.kind)return null;if(u.kind==="value"){for(let l of Kc)if(!hu(l,n))return null}}return`Expected ${Lr(u)} but found ${Lr(n)} instead.`}function Vm(u,n){return n.some(l=>l.kind===u.kind)}function yl(u,n){return n.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}function Zo(u,n){return u.kind==="array"&&n.kind==="array"?u.itemType.kind===n.itemType.kind&&typeof u.N=="number":u.kind===n.kind}let z0=.96422,$m=.82521,N0=4/29,du=6/29,B0=3*du*du,IA=du*du*du,PA=Math.PI/180,CA=180/Math.PI;function j0(u){return(u%=360)<0&&(u+=360),u}function Wm([u,n,l,h]){let p,y,_=Gm((.2225045*(u=_l(u))+.7168786*(n=_l(n))+.0606169*(l=_l(l)))/1);u===n&&n===l?p=y=_:(p=Gm((.4360747*u+.3850649*n+.1430804*l)/z0),y=Gm((.0139322*u+.0971045*n+.7141733*l)/$m));let w=116*_-16;return[w<0?0:w,500*(p-_),200*(_-y),h]}function _l(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Gm(u){return u>IA?Math.pow(u,1/3):u/B0+N0}function U0([u,n,l,h]){let p=(u+16)/116,y=isNaN(n)?p:p+n/500,_=isNaN(l)?p:p-l/200;return p=1*Zm(p),y=z0*Zm(y),_=$m*Zm(_),[xl(3.1338561*y-1.6168667*p-.4906146*_),xl(-.9787684*y+1.9161415*p+.033454*_),xl(.0719453*y-.2289914*p+1.4052427*_),h]}function xl(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Zm(u){return u>du?u*u*u:B0*(u-N0)}let MA=Object.hasOwn||function(u,n){return Object.prototype.hasOwnProperty.call(u,n)};function Hc(u,n){return MA(u,n)?u[n]:void 0}function Xc(u){return parseInt(u.padEnd(2,u),16)/255}function Km(u,n){return bn(n?u/100:u,0,1)}function bn(u,n,l){return Math.min(Math.max(n,u),l)}function or(u){return!u.some(Number.isNaN)}let fu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function wn(u,n,l){return u+l*(n-u)}function bl(u,n,l){return u.map((h,p)=>wn(h,n[p],l))}class ir{constructor(n,l,h,p=1,y=!0){this.r=n,this.g=l,this.b=h,this.a=p,y||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,l,h,p]))}static parse(n){if(n instanceof ir)return n;if(typeof n!="string")return;let l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let p=Hc(fu,h);if(p){let[_,w,A]=p;return[_/255,w/255,A/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let _=h.length<6?1:2,w=1;return[Xc(h.slice(w,w+=_)),Xc(h.slice(w,w+=_)),Xc(h.slice(w,w+=_)),Xc(h.slice(w,w+_)||"ff")]}if(h.startsWith("rgb")){let _=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){let[w,A,I,R,D,N,j,U,W,X,ae,me]=_,le=[R||" ",j||" ",X].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){let B=[I,N,W].join(""),H=B==="%%%"?100:B===""?255:0;if(H){let ce=[bn(+A/H,0,1),bn(+D/H,0,1),bn(+U/H,0,1),ae?Km(+ae,me):1];if(or(ce))return ce}}return}}let y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[_,w,A,I,R,D,N,j,U]=y,W=[A||" ",R||" ",N].join("");if(W==="  "||W==="  /"||W===",,"||W===",,,"){let X=[+w,bn(+I,0,100),bn(+D,0,100),j?Km(+j,U):1];if(or(X))return function([ae,me,le,B]){function H(ce){let Ie=(ce+ae/30)%12,$e=me*Math.min(le,1-le);return le-$e*Math.max(-1,Math.min(Ie-3,9-Ie,1))}return ae=j0(ae),me/=100,le/=100,[H(0),H(8),H(4),B]}(X)}}}(n);return l?new ir(...l,!1):void 0}get rgb(){let{r:n,g:l,b:h,a:p}=this,y=p||1/0;return this.overwriteGetter("rgb",[n/y,l/y,h/y,p])}get hcl(){return this.overwriteGetter("hcl",function(n){let[l,h,p,y]=Wm(n),_=Math.sqrt(h*h+p*p);return[Math.round(1e4*_)?j0(Math.atan2(p,h)*CA):NaN,_,l,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Wm(this.rgb))}overwriteGetter(n,l){return Object.defineProperty(this,n,{value:l}),l}toString(){let[n,l,h,p]=this.rgb;return`rgba(${[n,l,h].map(y=>Math.round(255*y)).join(",")},${p})`}static interpolate(n,l,h,p="rgb"){switch(p){case"rgb":{let[y,_,w,A]=bl(n.rgb,l.rgb,h);return new ir(y,_,w,A,!1)}case"hcl":{let[y,_,w,A]=n.hcl,[I,R,D,N]=l.hcl,j,U;if(isNaN(y)||isNaN(I))isNaN(y)?isNaN(I)?j=NaN:(j=I,w!==1&&w!==0||(U=R)):(j=y,D!==1&&D!==0||(U=_));else{let le=I-y;I>y&&le>180?le-=360:I<y&&y-I>180&&(le+=360),j=y+h*le}let[W,X,ae,me]=function([le,B,H,ce]){return le=isNaN(le)?0:le*PA,U0([H,Math.cos(le)*B,Math.sin(le)*B,ce])}([j,U!=null?U:wn(_,R,h),wn(w,D,h),wn(A,N,h)]);return new ir(W,X,ae,me,!1)}case"lab":{let[y,_,w,A]=U0(bl(n.lab,l.lab,h));return new ir(y,_,w,A,!1)}}}}ir.black=new ir(0,0,0,1),ir.white=new ir(1,1,1,1),ir.transparent=new ir(0,0,0,0),ir.red=new ir(1,0,0,1);class Jc{constructor(n,l,h){this.sensitivity=n?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,l){return this.collator.compare(n,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let Yc=["bottom","center","top"];class pu{constructor(n,l,h,p,y,_){this.text=n,this.image=l,this.scale=h,this.fontStack=p,this.textColor=y,this.verticalAlign=_}}class $n{constructor(n){this.sections=n}static fromString(n){return new $n([new pu(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof $n?n:$n.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Gi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Gi)return n;if(typeof n=="number")return new Gi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(let l of n)if(typeof l!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Gi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,l,h){return new Gi(bl(n.values,l.values,h))}}class hi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof hi)return n;if(typeof n=="number")return new hi([n]);if(Array.isArray(n)){for(let l of n)if(typeof l!="number")return;return new hi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,l,h){return new hi(bl(n.values,l.values,h))}}class Zi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Zi)return n;if(typeof n=="string"){let h=ir.parse(n);return h?new Zi([h]):void 0}if(!Array.isArray(n))return;let l=[];for(let h of n){if(typeof h!="string")return;let p=ir.parse(h);if(!p)return;l.push(p)}return new Zi(l)}toString(){return JSON.stringify(this.values)}static interpolate(n,l,h,p="rgb"){let y=[];if(n.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let _=0;_<n.values.length;_++)y.push(ir.interpolate(n.values[_],l.values[_],h,p));return new Zi(y)}}class Pr extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}let mu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Sn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Sn)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let l=0;l<n.length;l+=2){let h=n[l],p=n[l+1];if(typeof h!="string"||!mu.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Sn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,l,h){let p=n.values,y=l.values;if(p.length!==y.length)throw new Pr(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${l.toString()}`);let _=[];for(let w=0;w<p.length;w+=2){if(p[w]!==y[w])throw new Pr(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${p[w]}, to[${w}]: ${y[w]}`);_.push(p[w]);let[A,I]=p[w+1],[R,D]=y[w+1];_.push([wn(A,R,h),wn(I,D,h)])}return new Sn(_)}}class oa{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new oa({name:n,available:!1}):null}}class Wn{constructor(n,l,h){this.from=n,this.to=l,this.transition=h}static interpolate(n,l,h){return new Wn(n,l,h)}static parse(n){return n instanceof Wn?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new Wn(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new Wn(n.from,n.to,n.transition):typeof n=="string"?new Wn(n,n,1):void 0}}function Qc(u,n,l,h){return typeof u=="number"&&u>=0&&u<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[u,n,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[u,n,l,h]:[u,n,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function br(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof Wn||u instanceof ir||u instanceof Jc||u instanceof $n||u instanceof Gi||u instanceof hi||u instanceof Zi||u instanceof Sn||u instanceof oa)return!0;if(Array.isArray(u)){for(let n of u)if(!br(n))return!1;return!0}if(typeof u=="object"){for(let n in u)if(!br(u[n]))return!1;return!0}return!1}function Jr(u){if(u===null)return Ct;if(typeof u=="string")return qt;if(typeof u=="boolean")return Ut;if(typeof u=="number")return je;if(u instanceof ir)return Hr;if(u instanceof Wn)return Xr;if(u instanceof Jc)return cu;if(u instanceof $n)return Gc;if(u instanceof Gi)return vl;if(u instanceof hi)return Go;if(u instanceof Zi)return Zc;if(u instanceof Sn)return ci;if(u instanceof oa)return gl;if(Array.isArray(u)){let n=u.length,l;for(let h of u){let p=Jr(h);if(l){if(l===p)continue;l=Vt;break}l=p}return aa(l||Vt,n)}return Vn}function nr(u){let n=typeof u;return u===null?"":n==="string"||n==="number"||n==="boolean"?String(u):u instanceof ir||u instanceof Wn||u instanceof $n||u instanceof Gi||u instanceof hi||u instanceof Zi||u instanceof Sn||u instanceof oa?u.toString():JSON.stringify(u)}class Ft{constructor(n,l){this.type=n,this.value=l}static parse(n,l){if(n.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!br(n[1]))return l.error("invalid value");let h=n[1],p=Jr(h),y=l.expectedType;return p.kind!=="array"||p.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(p=y),new Ft(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let vu={string:qt,number:je,boolean:Ut,object:Vn};class $t{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h,p=1,y=n[0];if(y==="array"){let w,A;if(n.length>2){let I=n[1];if(typeof I!="string"||!(I in vu)||I==="object")return l.error("The item type argument of \"array\" must be one of string, number, boolean",1);w=vu[I],p++}else w=Vt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return l.error("The length argument to \"array\" must be a positive integer literal",2);A=n[2],p++}h=aa(w,A)}else{if(!vu[y])throw new Error(`Types doesn't contain name = ${y}`);h=vu[y]}let _=[];for(;p<n.length;p++){let w=l.parse(n[p],p,Vt);if(!w)return null;_.push(w)}return new $t(h,_)}evaluate(n){for(let l=0;l<this.args.length;l++){let h=this.args[l].evaluate(n);if(!hu(this.type,Jr(h)))return h;if(l===this.args.length-1)throw new Pr(`Expected value to be of type ${Lr(this.type)}, but found ${Lr(Jr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let Ld={"to-boolean":Ut,"to-color":Hr,"to-number":je,"to-string":qt};class sn{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h=n[0];if(!Ld[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return l.error("Expected one argument.");let p=Ld[h],y=[];for(let _=1;_<n.length;_++){let w=l.parse(n[_],_,Vt);if(!w)return null;y.push(w)}return new sn(p,y)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let l,h;for(let p of this.args){if(l=p.evaluate(n),h=null,l instanceof ir)return l;if(typeof l=="string"){let y=n.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Qc(l[0],l[1],l[2],l[3]),!h))return new ir(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Pr(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(let h of this.args){l=h.evaluate(n);let p=Gi.parse(l);if(p)return p}throw new Pr(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(let h of this.args){l=h.evaluate(n);let p=hi.parse(l);if(p)return p}throw new Pr(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(let h of this.args){l=h.evaluate(n);let p=Zi.parse(l);if(p)return p}throw new Pr(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(let h of this.args){l=h.evaluate(n);let p=Sn.parse(l);if(p)return p}throw new Pr(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(let h of this.args){if(l=h.evaluate(n),l===null)return 0;let p=Number(l);if(!isNaN(p))return p}throw new Pr(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return $n.fromString(nr(this.args[0].evaluate(n)));case"resolvedImage":return oa.fromString(nr(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return nr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let Hm=["Unknown","Point","LineString","Polygon"];class Xm{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Hm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let l=this._parseColorCache.get(n);return l||(l=ir.parse(n),this._parseColorCache.set(n,l)),l}}class eh{constructor(n,l,h=[],p,y=new cr,_=[]){this.registry=n,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=y,this.errors=_,this.expectedType=p,this._isConstant=l}parse(n,l,h,p,y={}){return l?this.concat(l,h,p)._parse(n,y):this._parse(n,y)}_parse(n,l){function h(p,y,_){return _==="assert"?new $t(y,[p]):_==="coerce"?new sn(y,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let y=this.registry[p];if(y){let _=y.parse(n,this);if(!_)return null;if(this.expectedType){let w=this.expectedType,A=_.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||A.kind!=="value"){if(w.kind==="projectionDefinition"&&["string","array"].includes(A.kind)||["color","formatted","resolvedImage"].includes(w.kind)&&["value","string"].includes(A.kind)||["padding","numberArray"].includes(w.kind)&&["value","number","array"].includes(A.kind)||w.kind==="colorArray"&&["value","string","array"].includes(A.kind)||w.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(A.kind))_=h(_,w,l.typeAnnotation||"coerce");else if(this.checkSubtype(w,A))return null}else _=h(_,w,l.typeAnnotation||"assert")}if(!(_ instanceof Ft)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){let w=new Xm;try{_=new Ft(_.type,_.evaluate(w))}catch(A){return this.error(A.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof n} instead.`)}concat(n,l,h){let p=typeof n=="number"?this.path.concat(n):this.path,y=h?this.scope.concat(h):this.scope;return new eh(this.registry,this._isConstant,p,l||null,y,this.errors)}error(n,...l){let h=`${this.key}${l.map(p=>`[${p}]`).join("")}`;this.errors.push(new rr(h,n))}checkSubtype(n,l){let h=hu(n,l);return h&&this.error(h),h}}class gu{constructor(n,l){this.type=l.type,this.bindings=[].concat(n),this.result=l}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(let l of this.bindings)n(l[1]);n(this.result)}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);let h=[];for(let y=1;y<n.length-1;y+=2){let _=n[y];if(typeof _!="string")return l.error(`Expected string, but found ${typeof _} instead.`,y);if(/[^a-zA-Z0-9_]/.test(_))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);let w=l.parse(n[y+1],y+1);if(!w)return null;h.push([_,w])}let p=l.parse(n[n.length-1],n.length-1,l.expectedType,h);return p?new gu(h,p):null}outputDefined(){return this.result.outputDefined()}}class th{constructor(n,l){this.type=l.type,this.name=n,this.boundExpression=l}static parse(n,l){if(n.length!==2||typeof n[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");let h=n[1];return l.scope.has(h)?new th(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Jm{constructor(n,l,h){this.type=n,this.index=l,this.input=h}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,je),p=l.parse(n[2],2,aa(l.expectedType||Vt));return h&&p?new Jm(p.type.itemType,h,p):null}evaluate(n){let l=this.index.evaluate(n),h=this.input.evaluate(n);if(l<0)throw new Pr(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new Pr(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new Pr(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Fd{constructor(n,l){this.type=Ut,this.needle=n,this.haystack=l}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Vt),p=l.parse(n[2],2,Vt);return h&&p?Vm(h.type,[Ut,qt,je,Ct,Vt])?new Fd(h,p):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Lr(h.type)} instead`):null}evaluate(n){let l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!yl(l,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${Lr(Jr(l))} instead.`);if(!yl(h,["string","array"]))throw new Pr(`Expected second argument to be of type array or string, but found ${Lr(Jr(h))} instead.`);return h.indexOf(l)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class rh{constructor(n,l,h){this.type=je,this.needle=n,this.haystack=l,this.fromIndex=h}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Vt),p=l.parse(n[2],2,Vt);if(!h||!p)return null;if(!Vm(h.type,[Ut,qt,je,Ct,Vt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Lr(h.type)} instead`);if(n.length===4){let y=l.parse(n[3],3,je);return y?new rh(h,p,y):null}return new rh(h,p)}evaluate(n){let l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!yl(l,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${Lr(Jr(l))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(n)),yl(h,["string"])){let y=h.indexOf(l,p);return y===-1?-1:[...h.slice(0,y)].length}if(yl(h,["array"]))return h.indexOf(l,p);throw new Pr(`Expected second argument to be of type array or string, but found ${Lr(Jr(h))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class wl{constructor(n,l,h,p,y,_){this.inputType=n,this.type=l,this.input=h,this.cases=p,this.outputs=y,this.otherwise=_}static parse(n,l){if(n.length<5)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return l.error("Expected an even number of arguments.");let h,p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);let y={},_=[];for(let I=2;I<n.length-1;I+=2){let R=n[I],D=n[I+1];Array.isArray(R)||(R=[R]);let N=l.concat(I);if(R.length===0)return N.error("Expected at least one branch label.");for(let U of R){if(typeof U!="number"&&typeof U!="string")return N.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return N.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return N.error("Numeric branch labels must be integer values.");if(h){if(N.checkSubtype(h,Jr(U)))return null}else h=Jr(U);if(y[String(U)]!==void 0)return N.error("Branch labels must be unique.");y[String(U)]=_.length}let j=l.parse(D,I,p);if(!j)return null;p=p||j.type,_.push(j)}let w=l.parse(n[1],1,Vt);if(!w)return null;let A=l.parse(n[n.length-1],n.length-1,p);return A?w.type.kind!=="value"&&l.concat(1).checkSubtype(h,w.type)?null:new wl(h,p,w,y,_,A):null}evaluate(n){let l=this.input.evaluate(n);return(Jr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class ki{constructor(n,l,h){this.type=n,this.branches=l,this.otherwise=h}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);let p=[];for(let _=1;_<n.length-1;_+=2){let w=l.parse(n[_],_,Ut);if(!w)return null;let A=l.parse(n[_+1],_+1,h);if(!A)return null;p.push([w,A]),h=h||A.type}let y=l.parse(n[n.length-1],n.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new ki(h,p,y)}evaluate(n){for(let[l,h]of this.branches)if(l.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(let[l,h]of this.branches)n(l),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Sl{constructor(n,l,h,p){this.type=n,this.input=l,this.beginIndex=h,this.endIndex=p}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Vt),p=l.parse(n[2],2,je);if(!h||!p)return null;if(!Vm(h.type,[aa(Vt),qt,Vt]))return l.error(`Expected first argument to be of type array or string, but found ${Lr(h.type)} instead`);if(n.length===4){let y=l.parse(n[3],3,je);return y?new Sl(h.type,h,p,y):null}return new Sl(h.type,h,p)}evaluate(n){let l=this.input.evaluate(n),h=this.beginIndex.evaluate(n),p;if(this.endIndex&&(p=this.endIndex.evaluate(n)),yl(l,["string"]))return[...l].slice(h,p).join("");if(yl(l,["array"]))return l.slice(h,p);throw new Pr(`Expected first argument to be of type array or string, but found ${Lr(Jr(l))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function ih(u,n){let l=u.length-1,h,p,y=0,_=l,w=0;for(;y<=_;)if(w=Math.floor((y+_)/2),h=u[w],p=u[w+1],h<=n){if(w===l||n<p)return w;y=w+1}else{if(!(h>n))throw new Pr("Input is not a number.");_=w-1}return 0}class qs{constructor(n,l,h){this.type=n,this.input=l,this.labels=[],this.outputs=[];for(let[p,y]of h)this.labels.push(p),this.outputs.push(y)}static parse(n,l){if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");let h=l.parse(n[1],1,je);if(!h)return null;let p=[],y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let _=1;_<n.length;_+=2){let w=_===1?-1/0:n[_],A=n[_+1],I=_,R=_+1;if(typeof w!="number")return l.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",I);if(p.length&&p[p.length-1][0]>=w)return l.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",I);let D=l.parse(A,R,y);if(!D)return null;y=y||D.type,p.push([w,D])}return new qs(y,h,p)}evaluate(n){let l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);let p=this.input.evaluate(n);if(p<=l[0])return h[0].evaluate(n);let y=l.length;return p>=l[y-1]?h[y-1].evaluate(n):h[ih(l,p)].evaluate(n)}eachChild(n){n(this.input);for(let l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Di(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var zd,Nd,V0=function(){if(Nd)return zd;function u(n,l,h,p){this.cx=3*n,this.bx=3*(h-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(p-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=l,this.p2x=h,this.p2y=p}return Nd=1,zd=u,u.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,l){if(l===void 0&&(l=1e-6),n<0)return 0;if(n>1)return 1;for(var h=n,p=0;p<8;p++){var y=this.sampleCurveX(h)-n;if(Math.abs(y)<l)return h;var _=this.sampleCurveDerivativeX(h);if(Math.abs(_)<1e-6)break;h-=y/_}var w=0,A=1;for(h=n,p=0;p<20&&(y=this.sampleCurveX(h),!(Math.abs(y-n)<l));p++)n>y?w=h:A=h,h=.5*(A-w)+w;return h},solve:function(n,l){return this.sampleCurveY(this.solveCurveX(n,l))}},zd}(),RA=Di(V0);class ln{constructor(n,l,h,p,y){this.type=n,this.operator=l,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(let[_,w]of y)this.labels.push(_),this.outputs.push(w)}static interpolationFactor(n,l,h,p){let y=0;if(n.name==="exponential")y=nh(l,n.base,h,p);else if(n.name==="linear")y=nh(l,1,h,p);else if(n.name==="cubic-bezier"){let _=n.controlPoints;y=new RA(_[0],_[1],_[2],_[3]).solve(nh(l,1,h,p))}return y}static parse(n,l){let[h,p,y,..._]=n;if(!Array.isArray(p)||p.length===0)return l.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){let I=p[1];if(typeof I!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:I}}else{if(p[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(p[0])}`,1,0);{let I=p.slice(1);if(I.length!==4||I.some(R=>typeof R!="number"||R<0||R>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:I}}}if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,je),!y)return null;let w=[],A=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||l.expectedType==Zc?l.expectedType&&l.expectedType.kind!=="value"&&(A=l.expectedType):A=Hr;for(let I=0;I<_.length;I+=2){let R=_[I],D=_[I+1],N=I+3,j=I+4;if(typeof R!="number")return l.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",N);if(w.length&&w[w.length-1][0]>=R)return l.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",N);let U=l.parse(D,j,A);if(!U)return null;A=A||U.type,w.push([R,U])}return Zo(A,je)||Zo(A,Xr)||Zo(A,Hr)||Zo(A,vl)||Zo(A,Go)||Zo(A,Zc)||Zo(A,ci)||Zo(A,aa(je))?new ln(A,h,p,y,w):l.error(`Type ${Lr(A)} is not interpolatable.`)}evaluate(n){let l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);let p=this.input.evaluate(n);if(p<=l[0])return h[0].evaluate(n);let y=l.length;if(p>=l[y-1])return h[y-1].evaluate(n);let _=ih(l,p),w=ln.interpolationFactor(this.interpolation,p,l[_],l[_+1]),A=h[_].evaluate(n),I=h[_+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return wn(A,I,w);case"color":return ir.interpolate(A,I,w);case"padding":return Gi.interpolate(A,I,w);case"colorArray":return Zi.interpolate(A,I,w);case"numberArray":return hi.interpolate(A,I,w);case"variableAnchorOffsetCollection":return Sn.interpolate(A,I,w);case"array":return bl(A,I,w);case"projectionDefinition":return Wn.interpolate(A,I,w)}case"interpolate-hcl":switch(this.type.kind){case"color":return ir.interpolate(A,I,w,"hcl");case"colorArray":return Zi.interpolate(A,I,w,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ir.interpolate(A,I,w,"lab");case"colorArray":return Zi.interpolate(A,I,w,"lab")}}}eachChild(n){n(this.input);for(let l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function nh(u,n,l,h){let p=h-l,y=u-l;return p===0?0:n===1?y/p:(Math.pow(n,y)-1)/(Math.pow(n,p)-1)}let vo={color:ir.interpolate,number:wn,padding:Gi.interpolate,numberArray:hi.interpolate,colorArray:Zi.interpolate,variableAnchorOffsetCollection:Sn.interpolate,array:bl};class Tl{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h=null,p=l.expectedType;p&&p.kind!=="value"&&(h=p);let y=[];for(let w of n.slice(1)){let A=l.parse(w,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!A)return null;h=h||A.type,y.push(A)}if(!h)throw new Error("No output type");let _=p&&y.some(w=>hu(p,w.type));return new Tl(_?Vt:h,y)}evaluate(n){let l,h=null,p=0;for(let y of this.args)if(p++,h=y.evaluate(n),h&&h instanceof oa&&!h.available&&(l||(l=h.name),h=null,p===this.args.length&&(h=l)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function ah(u,n){return u==="=="||u==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Ea(u,n,l,h){return h.compare(n,l)===0}function El(u,n,l){let h=u!=="=="&&u!=="!=";return class Tge{constructor(y,_,w){this.type=Ut,this.lhs=y,this.rhs=_,this.collator=w,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}static parse(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");let w=y[0],A=_.parse(y[1],1,Vt);if(!A)return null;if(!ah(w,A.type))return _.concat(1).error(`"${w}" comparisons are not supported for type '${Lr(A.type)}'.`);let I=_.parse(y[2],2,Vt);if(!I)return null;if(!ah(w,I.type))return _.concat(2).error(`"${w}" comparisons are not supported for type '${Lr(I.type)}'.`);if(A.type.kind!==I.type.kind&&A.type.kind!=="value"&&I.type.kind!=="value")return _.error(`Cannot compare types '${Lr(A.type)}' and '${Lr(I.type)}'.`);h&&(A.type.kind==="value"&&I.type.kind!=="value"?A=new $t(I.type,[A]):A.type.kind!=="value"&&I.type.kind==="value"&&(I=new $t(A.type,[I])));let R=null;if(y.length===4){if(A.type.kind!=="string"&&I.type.kind!=="string"&&A.type.kind!=="value"&&I.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(R=_.parse(y[3],3,cu),!R)return null}return new Tge(A,I,R)}evaluate(y){let _=this.lhs.evaluate(y),w=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){let A=Jr(_),I=Jr(w);if(A.kind!==I.kind||A.kind!=="string"&&A.kind!=="number")throw new Pr(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${A.kind}, ${I.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let A=Jr(_),I=Jr(w);if(A.kind!=="string"||I.kind!=="string")return n(y,_,w)}return this.collator?l(y,_,w,this.collator.evaluate(y)):n(y,_,w)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}let Bd=El("==",function(u,n,l){return n===l},Ea),OA=El("!=",function(u,n,l){return n!==l},function(u,n,l,h){return!Ea(0,n,l,h)}),Ym=El("<",function(u,n,l){return n<l},function(u,n,l,h){return h.compare(n,l)<0}),kA=El(">",function(u,n,l){return n>l},function(u,n,l,h){return h.compare(n,l)>0}),DA=El("<=",function(u,n,l){return n<=l},function(u,n,l,h){return h.compare(n,l)<=0}),LA=El(">=",function(u,n,l){return n>=l},function(u,n,l,h){return h.compare(n,l)>=0});class jd{constructor(n,l,h){this.type=cu,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=l}static parse(n,l){if(n.length!==2)return l.error("Expected one argument.");let h=n[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");let p=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ut);if(!p)return null;let y=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ut);if(!y)return null;let _=null;return h.locale&&(_=l.parse(h.locale,1,qt),!_)?null:new jd(p,y,_)}evaluate(n){return new Jc(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class yu{constructor(n,l,h,p,y){this.type=qt,this.number=n,this.locale=l,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=y}static parse(n,l){if(n.length!==3)return l.error("Expected two arguments.");let h=l.parse(n[1],1,je);if(!h)return null;let p=n[2];if(typeof p!="object"||Array.isArray(p))return l.error("NumberFormat options argument must be an object.");let y=null;if(p.locale&&(y=l.parse(p.locale,1,qt),!y))return null;let _=null;if(p.currency&&(_=l.parse(p.currency,1,qt),!_))return null;let w=null;if(p["min-fraction-digits"]&&(w=l.parse(p["min-fraction-digits"],1,je),!w))return null;let A=null;return p["max-fraction-digits"]&&(A=l.parse(p["max-fraction-digits"],1,je),!A)?null:new yu(h,y,_,w,A)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Ud{constructor(n){this.type=Gc,this.sections=n}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h=n[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");let p=[],y=!1;for(let _=1;_<=n.length-1;++_){let w=n[_];if(y&&typeof w=="object"&&!Array.isArray(w)){y=!1;let A=null;if(w["font-scale"]&&(A=l.parse(w["font-scale"],1,je),!A))return null;let I=null;if(w["text-font"]&&(I=l.parse(w["text-font"],1,aa(qt)),!I))return null;let R=null;if(w["text-color"]&&(R=l.parse(w["text-color"],1,Hr),!R))return null;let D=null;if(w["vertical-align"]){if(typeof w["vertical-align"]=="string"&&!Yc.includes(w["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${w["vertical-align"]}' instead.`);if(D=l.parse(w["vertical-align"],1,qt),!D)return null}let N=p[p.length-1];N.scale=A,N.font=I,N.textColor=R,N.verticalAlign=D}else{let A=l.parse(n[_],1,Vt);if(!A)return null;let I=A.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,p.push({content:A,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ud(p)}evaluate(n){return new $n(this.sections.map(l=>{let h=l.content.evaluate(n);return Jr(h)===gl?new pu("",h,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(n):null):new pu(nr(h),null,l.scale?l.scale.evaluate(n):null,l.font?l.font.evaluate(n).join(","):null,l.textColor?l.textColor.evaluate(n):null,l.verticalAlign?l.verticalAlign.evaluate(n):null)}))}eachChild(n){for(let l of this.sections)n(l.content),l.scale&&n(l.scale),l.font&&n(l.font),l.textColor&&n(l.textColor),l.verticalAlign&&n(l.verticalAlign)}outputDefined(){return!1}}class Vd{constructor(n){this.type=gl,this.input=n}static parse(n,l){if(n.length!==2)return l.error("Expected two arguments.");let h=l.parse(n[1],1,qt);return h?new Vd(h):l.error("No image name provided.")}evaluate(n){let l=this.input.evaluate(n),h=oa.fromString(l);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(l)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class $d{constructor(n){this.type=je,this.input=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);let h=l.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Lr(h.type)} instead.`):new $d(h):null}evaluate(n){let l=this.input.evaluate(n);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Pr(`Expected value to be of type string or array, but found ${Lr(Jr(l))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}let go=8192;function $0(u,n){let l=(180+u[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(l*p*go),Math.round(h*p*go)]}function Qm(u,n){let l=Math.pow(2,n.z);return[(p=(u[0]/go+n.x)/l,360*p-180),(h=(u[1]/go+n.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function oh(u,n){u[0]=Math.min(u[0],n[0]),u[1]=Math.min(u[1],n[1]),u[2]=Math.max(u[2],n[0]),u[3]=Math.max(u[3],n[1])}function sh(u,n){return!(u[0]<=n[0]||u[2]>=n[2]||u[1]<=n[1]||u[3]>=n[3])}function FA(u,n,l){let h=u[0]-n[0],p=u[1]-n[1],y=u[0]-l[0],_=u[1]-l[1];return h*_-y*p==0&&h*y<=0&&p*_<=0}function Wd(u,n,l,h){return(p=[h[0]-l[0],h[1]-l[1]])[0]*(y=[n[0]-u[0],n[1]-u[1]])[1]-p[1]*y[0]!=0&&!(!K0(u,n,l,h)||!K0(l,h,u,n));var p,y}function W0(u,n,l){for(let h of l)for(let p=0;p<h.length-1;++p)if(Wd(u,n,h[p],h[p+1]))return!0;return!1}function Al(u,n,l=!1){let h=!1;for(let w of n)for(let A=0;A<w.length-1;A++){if(FA(u,w[A],w[A+1]))return l;(y=w[A])[1]>(p=u)[1]!=(_=w[A+1])[1]>p[1]&&p[0]<(_[0]-y[0])*(p[1]-y[1])/(_[1]-y[1])+y[0]&&(h=!h)}var p,y,_;return h}function G0(u,n){for(let l of n)if(Al(u,l))return!0;return!1}function Z0(u,n){for(let l of u)if(!Al(l,n))return!1;for(let l=0;l<u.length-1;++l)if(W0(u[l],u[l+1],n))return!1;return!0}function zA(u,n){for(let l of n)if(Z0(u,l))return!0;return!1}function K0(u,n,l,h){let p=h[0]-l[0],y=h[1]-l[1],_=(u[0]-l[0])*y-p*(u[1]-l[1]),w=(n[0]-l[0])*y-p*(n[1]-l[1]);return _>0&&w<0||_<0&&w>0}function lh(u,n,l){let h=[];for(let p=0;p<u.length;p++){let y=[];for(let _=0;_<u[p].length;_++){let w=$0(u[p][_],l);oh(n,w),y.push(w)}h.push(y)}return h}function H0(u,n,l){let h=[];for(let p=0;p<u.length;p++){let y=lh(u[p],n,l);h.push(y)}return h}function X0(u,n,l,h){if(u[0]<l[0]||u[0]>l[2]){let p=.5*h,y=u[0]-l[0]>p?-h:l[0]-u[0]>p?h:0;y===0&&(y=u[0]-l[2]>p?-h:l[2]-u[0]>p?h:0),u[0]+=y}oh(n,u)}function J0(u,n,l,h){let p=Math.pow(2,h.z)*go,y=[h.x*go,h.y*go],_=[];for(let w of u)for(let A of w){let I=[A.x+y[0],A.y+y[1]];X0(I,n,l,p),_.push(I)}return _}function ev(u,n,l,h){let p=Math.pow(2,h.z)*go,y=[h.x*go,h.y*go],_=[];for(let A of u){let I=[];for(let R of A){let D=[R.x+y[0],R.y+y[1]];oh(n,D),I.push(D)}_.push(I)}if(n[2]-n[0]<=p/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(let A of _)for(let I of A)X0(I,n,l,p)}var w;return _}class Is{constructor(n,l){this.type=Ut,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(br(n[1])){let h=n[1];if(h.type==="FeatureCollection"){let p=[];for(let y of h.features){let{type:_,coordinates:w}=y.geometry;_==="Polygon"&&p.push(w),_==="MultiPolygon"&&p.push(...w)}if(p.length)return new Is(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){let p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Is(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Is(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,h){let p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(h.type==="Polygon"){let w=lh(h.coordinates,y,_),A=J0(l.geometry(),p,y,_);if(!sh(p,y))return!1;for(let I of A)if(!Al(I,w))return!1}if(h.type==="MultiPolygon"){let w=H0(h.coordinates,y,_),A=J0(l.geometry(),p,y,_);if(!sh(p,y))return!1;for(let I of A)if(!G0(I,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,h){let p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(h.type==="Polygon"){let w=lh(h.coordinates,y,_),A=ev(l.geometry(),p,y,_);if(!sh(p,y))return!1;for(let I of A)if(!Z0(I,w))return!1}if(h.type==="MultiPolygon"){let w=H0(h.coordinates,y,_),A=ev(l.geometry(),p,y,_);if(!sh(p,y))return!1;for(let I of A)if(!zA(I,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Y0=class{constructor(u=[],n=(l,h)=>l<h?-1:l>h?1:0){if(this.data=u,this.length=this.data.length,this.compare=n,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;let u=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),u}peek(){return this.data[0]}_up(u){let{data:n,compare:l}=this,h=n[u];for(;u>0;){let p=u-1>>1,y=n[p];if(l(h,y)>=0)break;n[u]=y,u=p}n[u]=h}_down(u){let{data:n,compare:l}=this,h=this.length>>1,p=n[u];for(;u<h;){let y=1+(u<<1),_=y+1;if(_<this.length&&l(n[_],n[y])<0&&(y=_),l(n[y],p)>=0)break;n[u]=n[y],u=y}n[u]=p}};function Q0(u,n,l=0,h=u.length-1,p=ex){for(;h>l;){if(h-l>600){let A=h-l+1,I=n-l+1,R=Math.log(A),D=.5*Math.exp(2*R/3),N=.5*Math.sqrt(R*D*(A-D)/A)*(I-A/2<0?-1:1);Q0(u,n,Math.max(l,Math.floor(n-I*D/A+N)),Math.min(h,Math.floor(n+(A-I)*D/A+N)),p)}let y=u[n],_=l,w=h;for(_u(u,l,n),p(u[h],y)>0&&_u(u,l,h);_<w;){for(_u(u,_,w),_++,w--;p(u[_],y)<0;)_++;for(;p(u[w],y)>0;)w--}p(u[l],y)===0?_u(u,l,w):(w++,_u(u,w,h)),w<=n&&(l=w+1),n<=w&&(h=w-1)}}function _u(u,n,l){let h=u[n];u[n]=u[l],u[l]=h}function ex(u,n){return u<n?-1:u>n?1:0}function Gd(u,n){if(u.length<=1)return[u];let l=[],h,p;for(let y of u){let _=BA(y);_!==0&&(y.area=Math.abs(_),p===void 0&&(p=_<0),p===_<0?(h&&l.push(h),h=[y]):h.push(y))}if(h&&l.push(h),n>1)for(let y=0;y<l.length;y++)l[y].length<=n||(Q0(l[y],n,1,l[y].length-1,NA),l[y]=l[y].slice(0,n));return l}function NA(u,n){return n.area-u.area}function BA(u){let n=0;for(let l,h,p=0,y=u.length,_=y-1;p<y;_=p++)l=u[p],h=u[_],n+=(h.x-l.x)*(l.y+h.y);return n}let tv=1/298.257223563,tx=tv*(2-tv),rx=Math.PI/180;class rv{constructor(n){let l=6378.137*rx*1e3,h=Math.cos(n*rx),p=1/(1-tx*(1-h*h)),y=Math.sqrt(p);this.kx=l*y*h,this.ky=l*y*p*(1-tx)}distance(n,l){let h=this.wrap(n[0]-l[0])*this.kx,p=(n[1]-l[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(n,l){let h,p,y,_,w=1/0;for(let A=0;A<n.length-1;A++){let I=n[A][0],R=n[A][1],D=this.wrap(n[A+1][0]-I)*this.kx,N=(n[A+1][1]-R)*this.ky,j=0;D===0&&N===0||(j=(this.wrap(l[0]-I)*this.kx*D+(l[1]-R)*this.ky*N)/(D*D+N*N),j>1?(I=n[A+1][0],R=n[A+1][1]):j>0&&(I+=D/this.kx*j,R+=N/this.ky*j)),D=this.wrap(l[0]-I)*this.kx,N=(l[1]-R)*this.ky;let U=D*D+N*N;U<w&&(w=U,h=I,p=R,y=A,_=j)}return{point:[h,p],index:y,t:Math.max(0,Math.min(1,_))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function ix(u,n){return n[0]-u[0]}function lr(u){return u[1]-u[0]+1}function Ko(u,n){return u[1]>=u[0]&&u[1]<n}function iv(u,n){if(u[0]>u[1])return[null,null];let l=lr(u);if(n){if(l===2)return[u,null];let p=Math.floor(l/2);return[[u[0],u[0]+p],[u[0]+p,u[1]]]}if(l===1)return[u,null];let h=Math.floor(l/2)-1;return[[u[0],u[0]+h],[u[0]+h+1,u[1]]]}function nv(u,n){if(!Ko(n,u.length))return[1/0,1/0,-1/0,-1/0];let l=[1/0,1/0,-1/0,-1/0];for(let h=n[0];h<=n[1];++h)oh(l,u[h]);return l}function av(u){let n=[1/0,1/0,-1/0,-1/0];for(let l of u)for(let h of l)oh(n,h);return n}function nx(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function ov(u,n,l){if(!nx(u)||!nx(n))return NaN;let h=0,p=0;return u[2]<n[0]&&(h=n[0]-u[2]),u[0]>n[2]&&(h=u[0]-n[2]),u[1]>n[3]&&(p=u[1]-n[3]),u[3]<n[1]&&(p=n[1]-u[3]),l.distance([0,0],[h,p])}function ql(u,n,l){let h=l.pointOnLine(n,u);return l.distance(u,h.point)}function sv(u,n,l,h,p){let y=Math.min(ql(u,[l,h],p),ql(n,[l,h],p)),_=Math.min(ql(l,[u,n],p),ql(h,[u,n],p));return Math.min(y,_)}function jA(u,n,l,h,p){if(!Ko(n,u.length)||!Ko(h,l.length))return 1/0;let y=1/0;for(let _=n[0];_<n[1];++_){let w=u[_],A=u[_+1];for(let I=h[0];I<h[1];++I){let R=l[I],D=l[I+1];if(Wd(w,A,R,D))return 0;y=Math.min(y,sv(w,A,R,D,p))}}return y}function UA(u,n,l,h,p){if(!Ko(n,u.length)||!Ko(h,l.length))return NaN;let y=1/0;for(let _=n[0];_<=n[1];++_)for(let w=h[0];w<=h[1];++w)if(y=Math.min(y,p.distance(u[_],l[w])),y===0)return y;return y}function VA(u,n,l){if(Al(u,n,!0))return 0;let h=1/0;for(let p of n){let y=p[0],_=p[p.length-1];if(y!==_&&(h=Math.min(h,ql(u,[_,y],l)),h===0))return h;let w=l.pointOnLine(p,u);if(h=Math.min(h,l.distance(u,w.point)),h===0)return h}return h}function $A(u,n,l,h){if(!Ko(n,u.length))return NaN;for(let y=n[0];y<=n[1];++y)if(Al(u[y],l,!0))return 0;let p=1/0;for(let y=n[0];y<n[1];++y){let _=u[y],w=u[y+1];for(let A of l)for(let I=0,R=A.length,D=R-1;I<R;D=I++){let N=A[D],j=A[I];if(Wd(_,w,N,j))return 0;p=Math.min(p,sv(_,w,N,j,h))}}return p}function ax(u,n){for(let l of u)for(let h of l)if(Al(h,n,!0))return!0;return!1}function WA(u,n,l,h=1/0){let p=av(u),y=av(n);if(h!==1/0&&ov(p,y,l)>=h)return h;if(sh(p,y)){if(ax(u,n))return 0}else if(ax(n,u))return 0;let _=1/0;for(let w of u)for(let A=0,I=w.length,R=I-1;A<I;R=A++){let D=w[R],N=w[A];for(let j of n)for(let U=0,W=j.length,X=W-1;U<W;X=U++){let ae=j[X],me=j[U];if(Wd(D,N,ae,me))return 0;_=Math.min(_,sv(D,N,ae,me,l))}}return _}function ox(u,n,l,h,p,y){if(!y)return;let _=ov(nv(h,y),p,l);_<n&&u.push([_,y,[0,0]])}function Zd(u,n,l,h,p,y,_){if(!y||!_)return;let w=ov(nv(h,y),nv(p,_),l);w<n&&u.push([w,y,_])}function Kd(u,n,l,h,p=1/0){let y=Math.min(h.distance(u[0],l[0][0]),p);if(y===0)return y;let _=new Y0([[0,[0,u.length-1],[0,0]]],ix),w=av(l);for(;_.length>0;){let A=_.pop();if(A[0]>=y)continue;let I=A[1],R=n?50:100;if(lr(I)<=R){if(!Ko(I,u.length))return NaN;if(n){let D=$A(u,I,l,h);if(isNaN(D)||D===0)return D;y=Math.min(y,D)}else for(let D=I[0];D<=I[1];++D){let N=VA(u[D],l,h);if(y=Math.min(y,N),y===0)return 0}}else{let D=iv(I,n);ox(_,y,h,u,w,D[0]),ox(_,y,h,u,w,D[1])}}return y}function Hd(u,n,l,h,p,y=1/0){let _=Math.min(y,p.distance(u[0],l[0]));if(_===0)return _;let w=new Y0([[0,[0,u.length-1],[0,l.length-1]]],ix);for(;w.length>0;){let A=w.pop();if(A[0]>=_)continue;let I=A[1],R=A[2],D=n?50:100,N=h?50:100;if(lr(I)<=D&&lr(R)<=N){if(!Ko(I,u.length)&&Ko(R,l.length))return NaN;let j;if(n&&h)j=jA(u,I,l,R,p),_=Math.min(_,j);else if(n&&!h){let U=u.slice(I[0],I[1]+1);for(let W=R[0];W<=R[1];++W)if(j=ql(l[W],U,p),_=Math.min(_,j),_===0)return _}else if(!n&&h){let U=l.slice(R[0],R[1]+1);for(let W=I[0];W<=I[1];++W)if(j=ql(u[W],U,p),_=Math.min(_,j),_===0)return _}else j=UA(u,I,l,R,p),_=Math.min(_,j)}else{let j=iv(I,n),U=iv(R,h);Zd(w,_,p,u,l,j[0],U[0]),Zd(w,_,p,u,l,j[0],U[1]),Zd(w,_,p,u,l,j[1],U[0]),Zd(w,_,p,u,l,j[1],U[1])}}return _}function lv(u){return u.type==="MultiPolygon"?u.coordinates.map(n=>({type:"Polygon",coordinates:n})):u.type==="MultiLineString"?u.coordinates.map(n=>({type:"LineString",coordinates:n})):u.type==="MultiPoint"?u.coordinates.map(n=>({type:"Point",coordinates:n})):[u]}class Il{constructor(n,l){this.type=je,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(br(n[1])){let h=n[1];if(h.type==="FeatureCollection")return new Il(h,h.features.map(p=>lv(p.geometry)).flat());if(h.type==="Feature")return new Il(h,lv(h.geometry));if("type"in h&&"coordinates"in h)return new Il(h,lv(h))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,h){let p=l.geometry(),y=p.flat().map(A=>Qm([A.x,A.y],l.canonical));if(p.length===0)return NaN;let _=new rv(y[0][1]),w=1/0;for(let A of h){switch(A.type){case"Point":w=Math.min(w,Hd(y,!1,[A.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,Hd(y,!1,A.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,Kd(y,!1,A.coordinates,_,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,h){let p=l.geometry(),y=p.flat().map(A=>Qm([A.x,A.y],l.canonical));if(p.length===0)return NaN;let _=new rv(y[0][1]),w=1/0;for(let A of h){switch(A.type){case"Point":w=Math.min(w,Hd(y,!0,[A.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,Hd(y,!0,A.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,Kd(y,!0,A.coordinates,_,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="Polygon")return function(l,h){let p=l.geometry();if(p.length===0||p[0].length===0)return NaN;let y=Gd(p,0).map(A=>A.map(I=>I.map(R=>Qm([R.x,R.y],l.canonical)))),_=new rv(y[0][0][0][1]),w=1/0;for(let A of h)for(let I of y){switch(A.type){case"Point":w=Math.min(w,Kd([A.coordinates],!1,I,_,w));break;case"LineString":w=Math.min(w,Kd(A.coordinates,!0,I,_,w));break;case"Polygon":w=Math.min(w,WA(I,A.coordinates,_,w))}if(w===0)return w}return w}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Xd{constructor(n){this.type=Vt,this.key=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);let h=n[1];return h==null?l.error("Global state property must be defined."):typeof h!="string"?l.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new Xd(h)}evaluate(n){var l;let h=(l=n.globals)===null||l===void 0?void 0:l.globalState;return h&&Object.keys(h).length!==0?Hc(h,this.key):null}eachChild(){}outputDefined(){return!1}}let xu={"==":Bd,"!=":OA,">":kA,"<":Ym,">=":LA,"<=":DA,array:$t,at:Jm,boolean:$t,case:ki,coalesce:Tl,collator:jd,format:Ud,image:Vd,in:Fd,"index-of":rh,interpolate:ln,"interpolate-hcl":ln,"interpolate-lab":ln,length:$d,let:gu,literal:Ft,match:wl,number:$t,"number-format":yu,object:$t,slice:Sl,step:qs,string:$t,"to-boolean":sn,"to-color":sn,"to-number":sn,"to-string":sn,var:th,within:Is,distance:Il,"global-state":Xd};class Aa{constructor(n,l,h,p){this.name=n,this.type=l,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,l){let h=n[0],p=Aa.definitions[h];if(!p)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let y=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=_.filter(([I])=>!Array.isArray(I)||I.length===n.length-1),A=null;for(let[I,R]of w){A=new eh(l.registry,Jd,l.path,null,l.scope);let D=[],N=!1;for(let j=1;j<n.length;j++){let U=n[j],W=Array.isArray(I)?I[j-1]:I.type,X=A.parse(U,1+D.length,W);if(!X){N=!0;break}D.push(X)}if(!N)if(Array.isArray(I)&&I.length!==D.length)A.error(`Expected ${I.length} arguments, but found ${D.length} instead.`);else{for(let j=0;j<D.length;j++){let U=Array.isArray(I)?I[j]:I.type,W=D[j];A.concat(j+1).checkSubtype(U,W.type)}if(A.errors.length===0)return new Aa(h,y,R,D)}}if(w.length===1)l.errors.push(...A.errors);else{let I=(w.length?w:_).map(([D])=>{return N=D,Array.isArray(N)?`(${N.map(Lr).join(", ")})`:`(${Lr(N.type)}...)`;var N}).join(" | "),R=[];for(let D=1;D<n.length;D++){let N=l.parse(n[D],1+R.length);if(!N)return null;R.push(Lr(N.type))}l.error(`Expected arguments of type ${I}, but found (${R.join(", ")}) instead.`)}return null}static register(n,l){Aa.definitions=l;for(let h in l)n[h]=Aa}}function sx(u,[n,l,h,p]){n=n.evaluate(u),l=l.evaluate(u),h=h.evaluate(u);let y=p?p.evaluate(u):1,_=Qc(n,l,h,y);if(_)throw new Pr(_);return new ir(n/255,l/255,h/255,y,!1)}function lx(u,n){return u in n}function uv(u,n){let l=n[u];return l===void 0?null:l}function Pl(u){return{type:u}}function Jd(u){if(u instanceof th)return Jd(u.boundExpression);if(u instanceof Aa&&u.name==="error"||u instanceof jd||u instanceof Is||u instanceof Il||u instanceof Xd)return!1;let n=u instanceof sn||u instanceof $t,l=!0;return u.eachChild(h=>{l=n?l&&Jd(h):l&&h instanceof Ft}),!!l&&Yd(u)&&Qd(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Yd(u){if(u instanceof Aa&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Is||u instanceof Il)return!1;let n=!0;return u.eachChild(l=>{n&&!Yd(l)&&(n=!1)}),n}function uh(u){if(u instanceof Aa&&u.name==="feature-state")return!1;let n=!0;return u.eachChild(l=>{n&&!uh(l)&&(n=!1)}),n}function Qd(u,n){if(u instanceof Aa&&n.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(h=>{l&&!Qd(h,n)&&(l=!1)}),l}function ef(u){return{result:"success",value:u}}function bu(u){return{result:"error",value:u}}function wu(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function ux(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function tf(u){return!!u.expression&&u.expression.interpolated}function Jt(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function rf(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)&&Jr(u)===Vn}function nf(u){return u}function cv(u,n){let l=u.stops&&typeof u.stops[0][0]=="object",h=l||!(l||u.property!==void 0),p=u.type||(tf(n)?"exponential":"interval"),y=function(R){switch(R.type){case"color":return ir.parse;case"padding":return Gi.parse;case"numberArray":return hi.parse;case"colorArray":return Zi.parse;default:return null}}(n);if(y&&((u=mr({},u)).stops&&(u.stops=u.stops.map(R=>[R[0],y(R[1])])),u.default=y(u.default?u.default:n.default)),u.colorSpace&&(_=u.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var _;let w=function(R){switch(R){case"exponential":return cx;case"interval":return ZA;case"categorical":return GA;case"identity":return KA;default:throw new Error(`Unknown function type "${R}"`)}}(p),A,I;if(p==="categorical"){A=Object.create(null);for(let R of u.stops)A[R[0]]=R[1];I=typeof u.stops[0][0]}if(l){let R={},D=[];for(let U=0;U<u.stops.length;U++){let W=u.stops[U],X=W[0].zoom;R[X]===void 0&&(R[X]={zoom:X,type:u.type,property:u.property,default:u.default,stops:[]},D.push(X)),R[X].stops.push([W[0].value,W[1]])}let N=[];for(let U of D)N.push([R[U].zoom,cv(R[U],n)]);let j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:ln.interpolationFactor.bind(void 0,j),zoomStops:N.map(U=>U[0]),evaluate:({zoom:U},W)=>cx({stops:N,base:u.base},n,U).evaluate(U,W)}}if(h){let R=p==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:ln.interpolationFactor.bind(void 0,R),zoomStops:u.stops.map(D=>D[0]),evaluate:({zoom:D})=>w(u,n,D,A,I)}}return{kind:"source",evaluate(R,D){let N=D&&D.properties?D.properties[u.property]:void 0;return N===void 0?ch(u.default,n.default):w(u,n,N,A,I)}}}function ch(u,n,l){return u!==void 0?u:n!==void 0?n:l!==void 0?l:void 0}function GA(u,n,l,h,p){return ch(typeof l===p?h[l]:void 0,u.default,n.default)}function ZA(u,n,l){if(Jt(l)!=="number")return ch(u.default,n.default);let h=u.stops.length;if(h===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[h-1][0])return u.stops[h-1][1];let p=ih(u.stops.map(y=>y[0]),l);return u.stops[p][1]}function cx(u,n,l){let h=u.base!==void 0?u.base:1;if(Jt(l)!=="number")return ch(u.default,n.default);let p=u.stops.length;if(p===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[p-1][0])return u.stops[p-1][1];let y=ih(u.stops.map(R=>R[0]),l),_=function(R,D,N,j){let U=j-N,W=R-N;return U===0?0:D===1?W/U:(Math.pow(D,W)-1)/(Math.pow(D,U)-1)}(l,h,u.stops[y][0],u.stops[y+1][0]),w=u.stops[y][1],A=u.stops[y+1][1],I=vo[n.type]||nf;return typeof w.evaluate=="function"?{evaluate(...R){let D=w.evaluate.apply(void 0,R),N=A.evaluate.apply(void 0,R);if(D!==void 0&&N!==void 0)return I(D,N,_,u.colorSpace)}}:I(w,A,_,u.colorSpace)}function KA(u,n,l){switch(n.type){case"color":l=ir.parse(l);break;case"formatted":l=$n.fromString(l.toString());break;case"resolvedImage":l=oa.fromString(l.toString());break;case"padding":l=Gi.parse(l);break;case"colorArray":l=Zi.parse(l);break;case"numberArray":l=hi.parse(l);break;default:Jt(l)===n.type||n.type==="enum"&&n.values[l]||(l=void 0)}return ch(l,u.default,n.default)}Aa.register(xu,{error:[{kind:"error"},[qt],(u,[n])=>{throw new Pr(n.evaluate(u))}],typeof:[qt,[Vt],(u,[n])=>Lr(Jr(n.evaluate(u)))],"to-rgba":[aa(je,4),[Hr],(u,[n])=>{let[l,h,p,y]=n.evaluate(u).rgb;return[255*l,255*h,255*p,y]}],rgb:[Hr,[je,je,je],sx],rgba:[Hr,[je,je,je,je],sx],has:{type:Ut,overloads:[[[qt],(u,[n])=>lx(n.evaluate(u),u.properties())],[[qt,Vn],(u,[n,l])=>lx(n.evaluate(u),l.evaluate(u))]]},get:{type:Vt,overloads:[[[qt],(u,[n])=>uv(n.evaluate(u),u.properties())],[[qt,Vn],(u,[n,l])=>uv(n.evaluate(u),l.evaluate(u))]]},"feature-state":[Vt,[qt],(u,[n])=>uv(n.evaluate(u),u.featureState||{})],properties:[Vn,[],u=>u.properties()],"geometry-type":[qt,[],u=>u.geometryType()],id:[Vt,[],u=>u.id()],zoom:[je,[],u=>u.globals.zoom],"heatmap-density":[je,[],u=>u.globals.heatmapDensity||0],"line-progress":[je,[],u=>u.globals.lineProgress||0],accumulated:[Vt,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[je,Pl(je),(u,n)=>{let l=0;for(let h of n)l+=h.evaluate(u);return l}],"*":[je,Pl(je),(u,n)=>{let l=1;for(let h of n)l*=h.evaluate(u);return l}],"-":{type:je,overloads:[[[je,je],(u,[n,l])=>n.evaluate(u)-l.evaluate(u)],[[je],(u,[n])=>-n.evaluate(u)]]},"/":[je,[je,je],(u,[n,l])=>n.evaluate(u)/l.evaluate(u)],"%":[je,[je,je],(u,[n,l])=>n.evaluate(u)%l.evaluate(u)],ln2:[je,[],()=>Math.LN2],pi:[je,[],()=>Math.PI],e:[je,[],()=>Math.E],"^":[je,[je,je],(u,[n,l])=>Math.pow(n.evaluate(u),l.evaluate(u))],sqrt:[je,[je],(u,[n])=>Math.sqrt(n.evaluate(u))],log10:[je,[je],(u,[n])=>Math.log(n.evaluate(u))/Math.LN10],ln:[je,[je],(u,[n])=>Math.log(n.evaluate(u))],log2:[je,[je],(u,[n])=>Math.log(n.evaluate(u))/Math.LN2],sin:[je,[je],(u,[n])=>Math.sin(n.evaluate(u))],cos:[je,[je],(u,[n])=>Math.cos(n.evaluate(u))],tan:[je,[je],(u,[n])=>Math.tan(n.evaluate(u))],asin:[je,[je],(u,[n])=>Math.asin(n.evaluate(u))],acos:[je,[je],(u,[n])=>Math.acos(n.evaluate(u))],atan:[je,[je],(u,[n])=>Math.atan(n.evaluate(u))],min:[je,Pl(je),(u,n)=>Math.min(...n.map(l=>l.evaluate(u)))],max:[je,Pl(je),(u,n)=>Math.max(...n.map(l=>l.evaluate(u)))],abs:[je,[je],(u,[n])=>Math.abs(n.evaluate(u))],round:[je,[je],(u,[n])=>{let l=n.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[je,[je],(u,[n])=>Math.floor(n.evaluate(u))],ceil:[je,[je],(u,[n])=>Math.ceil(n.evaluate(u))],"filter-==":[Ut,[qt,Vt],(u,[n,l])=>u.properties()[n.value]===l.value],"filter-id-==":[Ut,[Vt],(u,[n])=>u.id()===n.value],"filter-type-==":[Ut,[qt],(u,[n])=>u.geometryType()===n.value],"filter-<":[Ut,[qt,Vt],(u,[n,l])=>{let h=u.properties()[n.value],p=l.value;return typeof h==typeof p&&h<p}],"filter-id-<":[Ut,[Vt],(u,[n])=>{let l=u.id(),h=n.value;return typeof l==typeof h&&l<h}],"filter->":[Ut,[qt,Vt],(u,[n,l])=>{let h=u.properties()[n.value],p=l.value;return typeof h==typeof p&&h>p}],"filter-id->":[Ut,[Vt],(u,[n])=>{let l=u.id(),h=n.value;return typeof l==typeof h&&l>h}],"filter-<=":[Ut,[qt,Vt],(u,[n,l])=>{let h=u.properties()[n.value],p=l.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[Ut,[Vt],(u,[n])=>{let l=u.id(),h=n.value;return typeof l==typeof h&&l<=h}],"filter->=":[Ut,[qt,Vt],(u,[n,l])=>{let h=u.properties()[n.value],p=l.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[Ut,[Vt],(u,[n])=>{let l=u.id(),h=n.value;return typeof l==typeof h&&l>=h}],"filter-has":[Ut,[Vt],(u,[n])=>n.value in u.properties()],"filter-has-id":[Ut,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[Ut,[aa(qt)],(u,[n])=>n.value.indexOf(u.geometryType())>=0],"filter-id-in":[Ut,[aa(Vt)],(u,[n])=>n.value.indexOf(u.id())>=0],"filter-in-small":[Ut,[qt,aa(Vt)],(u,[n,l])=>l.value.indexOf(u.properties()[n.value])>=0],"filter-in-large":[Ut,[qt,aa(Vt)],(u,[n,l])=>function(h,p,y,_){for(;y<=_;){let w=y+_>>1;if(p[w]===h)return!0;p[w]>h?_=w-1:y=w+1}return!1}(u.properties()[n.value],l.value,0,l.value.length-1)],all:{type:Ut,overloads:[[[Ut,Ut],(u,[n,l])=>n.evaluate(u)&&l.evaluate(u)],[Pl(Ut),(u,n)=>{for(let l of n)if(!l.evaluate(u))return!1;return!0}]]},any:{type:Ut,overloads:[[[Ut,Ut],(u,[n,l])=>n.evaluate(u)||l.evaluate(u)],[Pl(Ut),(u,n)=>{for(let l of n)if(l.evaluate(u))return!0;return!1}]]},"!":[Ut,[Ut],(u,[n])=>!n.evaluate(u)],"is-supported-script":[Ut,[qt],(u,[n])=>{let l=u.globals&&u.globals.isSupportedScript;return!l||l(n.evaluate(u))}],upcase:[qt,[qt],(u,[n])=>n.evaluate(u).toUpperCase()],downcase:[qt,[qt],(u,[n])=>n.evaluate(u).toLowerCase()],concat:[qt,Pl(Vt),(u,n)=>n.map(l=>nr(l.evaluate(u))).join("")],"resolved-locale":[qt,[cu],(u,[n])=>n.evaluate(u).resolvedLocale()]});class af{constructor(n,l){this.expression=n,this._warningHistory={},this._evaluator=new Xm,this._defaultValue=l?function(h){if(h.type==="color"&&rf(h.default))return new ir(0,0,0,0);switch(h.type){case"color":return ir.parse(h.default)||null;case"padding":return Gi.parse(h.default)||null;case"numberArray":return hi.parse(h.default)||null;case"colorArray":return Zi.parse(h.default)||null;case"variableAnchorOffsetCollection":return Sn.parse(h.default)||null;case"projectionDefinition":return Wn.parse(h.default)||null;default:return h.default===void 0?null:h.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(n,l,h,p,y,_){return this._evaluator.globals=n,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,l,h,p,y,_){this._evaluator.globals=n,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_||null;try{let w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Pr(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console!="undefined"&&console.warn(w.message)),this._defaultValue}}}function hh(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in xu}function of(u,n){let l=new eh(xu,Jd,[],n?function(p){let y={color:Hr,string:qt,number:je,enum:qt,boolean:Ut,formatted:Gc,padding:vl,numberArray:Go,colorArray:Zc,projectionDefinition:Xr,resolvedImage:gl,variableAnchorOffsetCollection:ci};return p.type==="array"?aa(y[p.value]||Vt,p.length):y[p.type]}(n):void 0),h=l.parse(u,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?ef(new af(h,n)):bu(l.errors)}class hv{constructor(n,l){this.kind=n,this._styleExpression=l,this.isStateDependent=n!=="constant"&&!uh(l.expression)}evaluateWithoutErrorHandling(n,l,h,p,y,_){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,p,y,_)}evaluate(n,l,h,p,y,_){return this._styleExpression.evaluate(n,l,h,p,y,_)}}class sf{constructor(n,l,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=n!=="camera"&&!uh(l.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,l,h,p,y,_){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,p,y,_)}evaluate(n,l,h,p,y,_){return this._styleExpression.evaluate(n,l,h,p,y,_)}interpolationFactor(n,l,h){return this.interpolationType?ln.interpolationFactor(this.interpolationType,n,l,h):0}}function dv(u,n){let l=of(u,n);if(l.result==="error")return l;let h=l.value.expression,p=Yd(h);if(!p&&!wu(n))return bu([new rr("","data expressions not supported")]);let y=Qd(h,["zoom"]);if(!y&&!ux(n))return bu([new rr("","zoom expressions not supported")]);let _=fh(h);return _||y?_ instanceof rr?bu([_]):_ instanceof ln&&!tf(n)?bu([new rr("","\"interpolate\" expressions cannot be used with this property")]):ef(_?new sf(p?"camera":"composite",l.value,_.labels,_ instanceof ln?_.interpolation:void 0):new hv(p?"constant":"source",l.value)):bu([new rr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class dh{constructor(n,l){this._parameters=n,this._specification=l,mr(this,cv(this._parameters,this._specification))}static deserialize(n){return new dh(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function fh(u){let n=null;if(u instanceof gu)n=fh(u.result);else if(u instanceof Tl){for(let l of u.args)if(n=fh(l),n)break}else(u instanceof qs||u instanceof ln)&&u.input instanceof Aa&&u.input.name==="zoom"&&(n=u);return n instanceof rr||u.eachChild(l=>{let h=fh(l);h instanceof rr?n=h:!n&&h?n=new rr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):n&&h&&n!==h&&(n=new rr("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),n}function ph(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(let n of u.slice(1))if(!ph(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}let fv={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mh(u){if(u==null)return{filter:()=>!0,needGeometry:!1};ph(u)||(u=uf(u));let n=of(u,fv);if(n.result==="error")throw new Error(n.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,p)=>n.value.evaluate(l,h,{},p),needGeometry:hx(u)}}function lf(u,n){return u<n?-1:u>n?1:0}function hx(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let n=1;n<u.length;n++)if(hx(u[n]))return!0;return!1}function uf(u){if(!u)return!0;let n=u[0];return u.length<=1?n!=="any":n==="=="?pv(u[1],u[2],"=="):n==="!="?cf(pv(u[1],u[2],"==")):n==="<"||n===">"||n==="<="||n===">="?pv(u[1],u[2],n):n==="any"?(l=u.slice(1),["any"].concat(l.map(uf))):n==="all"?["all"].concat(u.slice(1).map(uf)):n==="none"?["all"].concat(u.slice(1).map(uf).map(cf)):n==="in"?dx(u[1],u.slice(2)):n==="!in"?cf(dx(u[1],u.slice(2))):n==="has"?fx(u[1]):n!=="!has"||cf(fx(u[1]));var l}function pv(u,n,l){switch(u){case"$type":return[`filter-type-${l}`,n];case"$id":return[`filter-id-${l}`,n];default:return[`filter-${l}`,u,n]}}function dx(u,n){if(n.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(l=>typeof l!=typeof n[0])?["filter-in-large",u,["literal",n.sort(lf)]]:["filter-in-small",u,["literal",n]]}}function fx(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function cf(u){return["!",u]}function hf(u){let n=typeof u;if(n==="number"||n==="boolean"||n==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let p="[";for(let y of u)p+=`${hf(y)},`;return`${p}]`}let l=Object.keys(u).sort(),h="{";for(let p=0;p<l.length;p++)h+=`${JSON.stringify(l[p])}:${hf(u[l[p]])},`;return`${h}}`}function px(u){let n="";for(let l of Pe)n+=`/${hf(u[l])}`;return n}function vh(u){let n=u.value;return n?[new Le(u.key,n,"constants have been deprecated as of v8")]:[]}function ni(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Ps(u){if(Array.isArray(u))return u.map(Ps);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){let n={};for(let l in u)n[l]=Ps(u[l]);return n}return ni(u)}function sa(u){let n=u.key,l=u.value,h=u.valueSpec||{},p=u.objectElementValidators||{},y=u.style,_=u.styleSpec,w=u.validateSpec,A=[],I=Jt(l);if(I!=="object")return[new Le(n,l,`object expected, ${I} found`)];for(let R in l){let D=R.split(".")[0],N=Hc(h,D)||h["*"],j;if(Hc(p,D))j=p[D];else if(Hc(h,D))j=w;else if(p["*"])j=p["*"];else{if(!h["*"]){A.push(new Le(n,l[R],`unknown property "${R}"`));continue}j=w}A=A.concat(j({key:(n&&`${n}.`)+R,value:l[R],valueSpec:N,style:y,styleSpec:_,object:l,objectKey:R,validateSpec:w},l))}for(let R in h)p[R]||h[R].required&&h[R].default===void 0&&l[R]===void 0&&A.push(new Le(n,l,`missing required property "${R}"`));return A}function mv(u){let n=u.value,l=u.valueSpec,h=u.style,p=u.styleSpec,y=u.key,_=u.arrayElementValidator||u.validateSpec;if(Jt(n)!=="array")return[new Le(y,n,`array expected, ${Jt(n)} found`)];if(l.length&&n.length!==l.length)return[new Le(y,n,`array length ${l.length} expected, length ${n.length} found`)];if(l["min-length"]&&n.length<l["min-length"])return[new Le(y,n,`array length at least ${l["min-length"]} expected, length ${n.length} found`)];let w={type:l.value,values:l.values};p.$version<7&&(w.function=l.function),Jt(l.value)==="object"&&(w=l.value);let A=[];for(let I=0;I<n.length;I++)A=A.concat(_({array:n,arrayIndex:I,value:n[I],valueSpec:w,validateSpec:u.validateSpec,style:h,styleSpec:p,key:`${y}[${I}]`}));return A}function gh(u){let n=u.key,l=u.value,h=u.valueSpec,p=Jt(l);return p==="number"&&l!=l&&(p="NaN"),p!=="number"?[new Le(n,l,`number expected, ${p} found`)]:"minimum"in h&&l<h.minimum?[new Le(n,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new Le(n,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function vv(u){let n=u.valueSpec,l=ni(u.value.type),h,p,y,_={},w=l!=="categorical"&&u.value.property===void 0,A=!w,I=Jt(u.value.stops)==="array"&&Jt(u.value.stops[0])==="array"&&Jt(u.value.stops[0][0])==="object",R=sa({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(j){if(l==="identity")return[new Le(j.key,j.value,"identity function may not have a \"stops\" property")];let U=[],W=j.value;return U=U.concat(mv({key:j.key,value:W,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:D})),Jt(W)==="array"&&W.length===0&&U.push(new Le(j.key,W,"array must have at least one stop")),U},default:function(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:n,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}});return l==="identity"&&w&&R.push(new Le(u.key,u.value,"missing required property \"property\"")),l==="identity"||u.value.stops||R.push(new Le(u.key,u.value,"missing required property \"stops\"")),l==="exponential"&&u.valueSpec.expression&&!tf(u.valueSpec)&&R.push(new Le(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(A&&!wu(u.valueSpec)?R.push(new Le(u.key,u.value,"property functions not supported")):w&&!ux(u.valueSpec)&&R.push(new Le(u.key,u.value,"zoom functions not supported"))),l!=="categorical"&&!I||u.value.property!==void 0||R.push(new Le(u.key,u.value,"\"property\" property is required")),R;function D(j){let U=[],W=j.value,X=j.key;if(Jt(W)!=="array")return[new Le(X,W,`array expected, ${Jt(W)} found`)];if(W.length!==2)return[new Le(X,W,`array length 2 expected, length ${W.length} found`)];if(I){if(Jt(W[0])!=="object")return[new Le(X,W,`object expected, ${Jt(W[0])} found`)];if(W[0].zoom===void 0)return[new Le(X,W,"object stop key must have zoom")];if(W[0].value===void 0)return[new Le(X,W,"object stop key must have value")];if(y&&y>ni(W[0].zoom))return[new Le(X,W[0].zoom,"stop zoom values must appear in ascending order")];ni(W[0].zoom)!==y&&(y=ni(W[0].zoom),p=void 0,_={}),U=U.concat(sa({key:`${X}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:gh,value:N}}))}else U=U.concat(N({key:`${X}[0]`,value:W[0],validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},W));return hh(Ps(W[1]))?U.concat([new Le(`${X}[1]`,W[1],"expressions are not allowed in function stops.")]):U.concat(j.validateSpec({key:`${X}[1]`,value:W[1],valueSpec:n,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function N(j,U){let W=Jt(j.value),X=ni(j.value),ae=j.value!==null?j.value:U;if(h){if(W!==h)return[new Le(j.key,ae,`${W} stop domain type must match previous stop domain type ${h}`)]}else h=W;if(W!=="number"&&W!=="string"&&W!=="boolean")return[new Le(j.key,ae,"stop domain value must be a number, string, or boolean")];if(W!=="number"&&l!=="categorical"){let me=`number expected, ${W} found`;return wu(n)&&l===void 0&&(me+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Le(j.key,ae,me)]}return l!=="categorical"||W!=="number"||isFinite(X)&&Math.floor(X)===X?l!=="categorical"&&W==="number"&&p!==void 0&&X<p?[new Le(j.key,ae,"stop domain values must appear in ascending order")]:(p=X,l==="categorical"&&X in _?[new Le(j.key,ae,"stop domain values must be unique")]:(_[X]=!0,[])):[new Le(j.key,ae,`integer expected, found ${X}`)]}}function yo(u){let n=(u.expressionContext==="property"?dv:of)(Ps(u.value),u.valueSpec);if(n.result==="error")return n.value.map(h=>new Le(`${u.key}${h.key}`,u.value,h.message));let l=n.value.expression||n.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!l.outputDefined())return[new Le(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!uh(l))return[new Le(u.key,u.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(u.expressionContext==="filter"&&!uh(l))return[new Le(u.key,u.value,"\"feature-state\" data expressions are not supported with filters.")];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Qd(l,["zoom","feature-state"]))return[new Le(u.key,u.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(u.expressionContext==="cluster-initial"&&!Yd(l))return[new Le(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gv(u){let n=u.key,l=u.value,h=Jt(l);return h!=="string"?[new Le(n,l,`color expected, ${h} found`)]:ir.parse(String(l))?[]:[new Le(n,l,`color expected, "${l}" found`)]}function yh(u){let n=u.key,l=u.value,h=u.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(ni(l))===-1&&p.push(new Le(n,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(ni(l))===-1&&p.push(new Le(n,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),p}function yv(u){return ph(Ps(u.value))?yo(mr({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):mx(u)}function mx(u){let n=u.value,l=u.key;if(Jt(n)!=="array")return[new Le(l,n,`array expected, ${Jt(n)} found`)];let h=u.styleSpec,p,y=[];if(n.length<1)return[new Le(l,n,"filter array must have at least 1 element")];switch(y=y.concat(yh({key:`${l}[0]`,value:n[0],valueSpec:h.filter_operator,style:u.style,styleSpec:u.styleSpec})),ni(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&ni(n[1])==="$type"&&y.push(new Le(l,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&y.push(new Le(l,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Jt(n[1]),p!=="string"&&y.push(new Le(`${l}[1]`,n[1],`string expected, ${p} found`)));for(let _=2;_<n.length;_++)p=Jt(n[_]),ni(n[1])==="$type"?y=y.concat(yh({key:`${l}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:u.style,styleSpec:u.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&y.push(new Le(`${l}[${_}]`,n[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)y=y.concat(mx({key:`${l}[${_}]`,value:n[_],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":p=Jt(n[1]),n.length!==2?y.push(new Le(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&y.push(new Le(`${l}[1]`,n[1],`string expected, ${p} found`))}return y}function vx(u,n){let l=u.key,h=u.validateSpec,p=u.style,y=u.styleSpec,_=u.value,w=u.objectKey,A=y[`${n}_${u.layerType}`];if(!A)return[];let I=w.match(/^(.*)-transition$/);if(n==="paint"&&I&&A[I[1]]&&A[I[1]].transition)return h({key:l,value:_,valueSpec:y.transition,style:p,styleSpec:y});let R=u.valueSpec||A[w];if(!R)return[new Le(l,_,`unknown property "${w}"`)];let D;if(Jt(_)==="string"&&wu(R)&&!R.tokens&&(D=/^{([^}]+)}$/.exec(_)))return[new Le(l,_,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];let N=[];return u.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&N.push(new Le(l,_,"use of \"text-field\" requires a style \"glyphs\" property")),w==="text-font"&&rf(Ps(_))&&ni(_.type)==="identity"&&N.push(new Le(l,_,"\"text-font\" does not support identity functions"))),N.concat(h({key:u.key,value:_,valueSpec:R,style:p,styleSpec:y,expressionContext:"property",propertyType:n,propertyKey:w}))}function gx(u){return vx(u,"paint")}function Su(u){return vx(u,"layout")}function Tu(u){let n=[],l=u.value,h=u.key,p=u.style,y=u.styleSpec;if(Jt(l)!=="object")return[new Le(h,l,`object expected, ${Jt(l)} found`)];l.type||l.ref||n.push(new Le(h,l,"either \"type\" or \"ref\" is required"));let _=ni(l.type),w=ni(l.ref);if(l.id){let A=ni(l.id);for(let I=0;I<u.arrayIndex;I++){let R=p.layers[I];ni(R.id)===A&&n.push(new Le(h,l.id,`duplicate layer id "${l.id}", previously used at line ${R.id.__line__}`))}}if("ref"in l){let A;["type","source","source-layer","filter","layout"].forEach(I=>{I in l&&n.push(new Le(h,l[I],`"${I}" is prohibited for ref layers`))}),p.layers.forEach(I=>{ni(I.id)===w&&(A=I)}),A?A.ref?n.push(new Le(h,l.ref,"ref cannot reference another ref layer")):_=ni(A.type):n.push(new Le(h,l.ref,`ref layer "${w}" not found`))}else if(_!=="background")if(l.source){let A=p.sources&&p.sources[l.source],I=A&&ni(A.type);A?I==="vector"&&_==="raster"?n.push(new Le(h,l.source,`layer "${l.id}" requires a raster source`)):I!=="raster-dem"&&_==="hillshade"?n.push(new Le(h,l.source,`layer "${l.id}" requires a raster-dem source`)):I==="raster"&&_!=="raster"?n.push(new Le(h,l.source,`layer "${l.id}" requires a vector source`)):I!=="vector"||l["source-layer"]?I==="raster-dem"&&_!=="hillshade"?n.push(new Le(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!l.paint||!l.paint["line-gradient"]||I==="geojson"&&A.lineMetrics||n.push(new Le(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Le(h,l,`layer "${l.id}" must specify a "source-layer"`)):n.push(new Le(h,l.source,`source "${l.source}" not found`))}else n.push(new Le(h,l,"missing required property \"source\""));return n=n.concat(sa({key:h,value:l,valueSpec:y.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${h}.type`,value:l.type,valueSpec:y.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:l,objectKey:"type"}),filter:yv,layout:A=>sa({layer:l,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":I=>Su(mr({layerType:_},I))}}),paint:A=>sa({layer:l,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":I=>gx(mr({layerType:_},I))}})}})),n}function Ei(u){let n=u.value,l=u.key,h=Jt(n);return h!=="string"?[new Le(l,n,`string expected, ${h} found`)]:[]}let Eu={promoteId:function({key:u,value:n}){if(Jt(n)==="string")return Ei({key:u,value:n});{let l=[];for(let h in n)l.push(...Ei({key:`${u}.${h}`,value:n[h]}));return l}}};function _v(u){let n=u.value,l=u.key,h=u.styleSpec,p=u.style,y=u.validateSpec;if(!n.type)return[new Le(l,n,"\"type\" is required")];let _=ni(n.type),w;switch(_){case"vector":case"raster":return w=sa({key:l,value:n,valueSpec:h[`source_${_.replace("-","_")}`],style:u.style,styleSpec:h,objectElementValidators:Eu,validateSpec:y}),w;case"raster-dem":return w=function(A){var I;let R=(I=A.sourceName)!==null&&I!==void 0?I:"",D=A.value,N=A.styleSpec,j=N.source_raster_dem,U=A.style,W=[],X=Jt(D);if(D===void 0)return W;if(X!=="object")return W.push(new Le("source_raster_dem",D,`object expected, ${X} found`)),W;let ae=ni(D.encoding)==="custom",me=["redFactor","greenFactor","blueFactor","baseShift"],le=A.value.encoding?`"${A.value.encoding}"`:"Default";for(let B in D)!ae&&me.includes(B)?W.push(new Le(B,D[B],`In "${R}": "${B}" is only valid when "encoding" is set to "custom". ${le} encoding found`)):j[B]?W=W.concat(A.validateSpec({key:B,value:D[B],valueSpec:j[B],validateSpec:A.validateSpec,style:U,styleSpec:N})):W.push(new Le(B,D[B],`unknown property "${B}"`));return W}({sourceName:l,value:n,style:u.style,styleSpec:h,validateSpec:y}),w;case"geojson":if(w=sa({key:l,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:y,objectElementValidators:Eu}),n.cluster)for(let A in n.clusterProperties){let[I,R]=n.clusterProperties[A],D=typeof I=="string"?[I,["accumulated"],["get",A]]:I;w.push(...yo({key:`${l}.${A}.map`,value:R,expressionContext:"cluster-map"})),w.push(...yo({key:`${l}.${A}.reduce`,value:D,expressionContext:"cluster-reduce"}))}return w;case"video":return sa({key:l,value:n,valueSpec:h.source_video,style:p,validateSpec:y,styleSpec:h});case"image":return sa({key:l,value:n,valueSpec:h.source_image,style:p,validateSpec:y,styleSpec:h});case"canvas":return[new Le(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yh({key:`${l}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function yx(u){let n=u.value,l=u.styleSpec,h=l.light,p=u.style,y=[],_=Jt(n);if(n===void 0)return y;if(_!=="object")return y=y.concat([new Le("light",n,`object expected, ${_} found`)]),y;for(let w in n){let A=w.match(/^(.*)-transition$/);y=y.concat(A&&h[A[1]]&&h[A[1]].transition?u.validateSpec({key:w,value:n[w],valueSpec:l.transition,validateSpec:u.validateSpec,style:p,styleSpec:l}):h[w]?u.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:u.validateSpec,style:p,styleSpec:l}):[new Le(w,n[w],`unknown property "${w}"`)])}return y}function _x(u){let n=u.value,l=u.styleSpec,h=l.sky,p=u.style,y=Jt(n);if(n===void 0)return[];if(y!=="object")return[new Le("sky",n,`object expected, ${y} found`)];let _=[];for(let w in n)_=_.concat(h[w]?u.validateSpec({key:w,value:n[w],valueSpec:h[w],style:p,styleSpec:l}):[new Le(w,n[w],`unknown property "${w}"`)]);return _}function Au(u){let n=u.value,l=u.styleSpec,h=l.terrain,p=u.style,y=[],_=Jt(n);if(n===void 0)return y;if(_!=="object")return y=y.concat([new Le("terrain",n,`object expected, ${_} found`)]),y;for(let w in n)y=y.concat(h[w]?u.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:u.validateSpec,style:p,styleSpec:l}):[new Le(w,n[w],`unknown property "${w}"`)]);return y}function xv(u){let n=[],l=u.value,h=u.key;if(Array.isArray(l)){let p=[],y=[];for(let _ in l)l[_].id&&p.includes(l[_].id)&&n.push(new Le(h,l,`all the sprites' ids must be unique, but ${l[_].id} is duplicated`)),p.push(l[_].id),l[_].url&&y.includes(l[_].url)&&n.push(new Le(h,l,`all the sprites' URLs must be unique, but ${l[_].url} is duplicated`)),y.push(l[_].url),n=n.concat(sa({key:`${h}[${_}]`,value:l[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return n}return Ei({key:h,value:l})}function df(u){return n=u.value,n&&n.constructor===Object?[]:[new Le(u.key,u.value,`object expected, ${Jt(u.value)} found`)];var n}let xx={"*":()=>[],array:mv,boolean:function(u){let n=u.value,l=u.key,h=Jt(n);return h!=="boolean"?[new Le(l,n,`boolean expected, ${h} found`)]:[]},number:gh,color:gv,constants:vh,enum:yh,filter:yv,function:vv,layer:Tu,object:sa,source:_v,light:yx,sky:_x,terrain:Au,projection:function(u){let n=u.value,l=u.styleSpec,h=l.projection,p=u.style,y=Jt(n);if(n===void 0)return[];if(y!=="object")return[new Le("projection",n,`object expected, ${y} found`)];let _=[];for(let w in n)_=_.concat(h[w]?u.validateSpec({key:w,value:n[w],valueSpec:h[w],style:p,styleSpec:l}):[new Le(w,n[w],`unknown property "${w}"`)]);return _},projectionDefinition:function(u){let n=u.key,l=u.value;l=l instanceof String?l.valueOf():l;let h=Jt(l);return h!=="array"||function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"}(l)||function(p){return!!["interpolate","step","literal"].includes(p[0])}(l)?["array","string"].includes(h)?[]:[new Le(n,l,`projection expected, invalid type "${h}" found`)]:[new Le(n,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:Ei,formatted:function(u){return Ei(u).length===0?[]:yo(u)},resolvedImage:function(u){return Ei(u).length===0?[]:yo(u)},padding:function(u){let n=u.key,l=u.value;if(Jt(l)==="array"){if(l.length<1||l.length>4)return[new Le(n,l,`padding requires 1 to 4 values; ${l.length} values found`)];let h={type:"number"},p=[];for(let y=0;y<l.length;y++)p=p.concat(u.validateSpec({key:`${n}[${y}]`,value:l[y],validateSpec:u.validateSpec,valueSpec:h}));return p}return gh({key:n,value:l,valueSpec:{}})},numberArray:function(u){let n=u.key,l=u.value;if(Jt(l)==="array"){let h={type:"number"};if(l.length<1)return[new Le(n,l,"array length at least 1 expected, length 0 found")];let p=[];for(let y=0;y<l.length;y++)p=p.concat(u.validateSpec({key:`${n}[${y}]`,value:l[y],validateSpec:u.validateSpec,valueSpec:h}));return p}return gh({key:n,value:l,valueSpec:{}})},colorArray:function(u){let n=u.key,l=u.value;if(Jt(l)==="array"){if(l.length<1)return[new Le(n,l,"array length at least 1 expected, length 0 found")];let h=[];for(let p=0;p<l.length;p++)h=h.concat(gv({key:`${n}[${p}]`,value:l[p]}));return h}return gv({key:n,value:l})},variableAnchorOffsetCollection:function(u){let n=u.key,l=u.value,h=Jt(l),p=u.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new Le(n,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let _=0;_<l.length;_+=2)y=y.concat(yh({key:`${n}[${_}]`,value:l[_],valueSpec:p.layout_symbol["text-anchor"]})),y=y.concat(mv({key:`${n}[${_+1}]`,value:l[_+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:p}));return y},sprite:xv,state:df};function qu(u){let n=u.value,l=u.valueSpec,h=u.styleSpec;return u.validateSpec=qu,l.expression&&rf(ni(n))?vv(u):l.expression&&hh(Ps(n))?yo(u):l.type&&xx[l.type]?xx[l.type](u):sa(mr({},u,{valueSpec:l.type?h[l.type]:l}))}function bx(u){let n=u.value,l=u.key,h=Ei(u);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Le(l,n,"\"glyphs\" url must include a \"{fontstack}\" token")),n.indexOf("{range}")===-1&&h.push(new Le(l,n,"\"glyphs\" url must include a \"{range}\" token"))),h}function un(u,n=J){let l=[];return l=l.concat(qu({key:"",value:u,valueSpec:n.$root,styleSpec:n,style:u,validateSpec:qu,objectElementValidators:{glyphs:bx,"*":()=>[]}})),u.constants&&(l=l.concat(vh({key:"constants",value:u.constants}))),Iu(l)}function Xa(u){return function(n){return u(qn(lt({},n),{validateSpec:qu}))}}function Iu(u){return[].concat(u).sort((n,l)=>n.line-l.line)}function Ja(u){return function(...n){return Iu(u.apply(this,n))}}un.source=Ja(Xa(_v)),un.sprite=Ja(Xa(xv)),un.glyphs=Ja(Xa(bx)),un.light=Ja(Xa(yx)),un.sky=Ja(Xa(_x)),un.terrain=Ja(Xa(Au)),un.state=Ja(Xa(df)),un.layer=Ja(Xa(Tu)),un.filter=Ja(Xa(yv)),un.paintProperty=Ja(Xa(gx)),un.layoutProperty=Ja(Xa(Su));let Pu=un,ff=Pu.light,HA=Pu.sky,bv=Pu.paintProperty,pf=Pu.layoutProperty;function wv(u,n){let l=!1;if(n&&n.length)for(let h of n)u.fire(new ue(new Error(h.message))),l=!0;return l}class Cu{constructor(n,l,h){let p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;let _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(l=_[1])+2*(h=_[2]);for(let A=0;A<this.d*this.d;A++){let I=_[3+A],R=_[3+A+1];p.push(I===R?null:_.subarray(I,R))}let w=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],w),this.bboxes=_.subarray(w),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=n,this.padding=h,this.scale=l/n,this.uid=0;let y=h/l*n;this.min=-y,this.max=n+y}insert(n,l,h,p,y){this._forEachCell(l,h,p,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,l,h,p,y,_){this.cells[y].push(_)}query(n,l,h,p,y){let _=this.min,w=this.max;if(n<=_&&l<=_&&w<=h&&w<=p&&!y)return Array.prototype.slice.call(this.keys);{let A=[];return this._forEachCell(n,l,h,p,this._queryCell,A,{},y),A}}_queryCell(n,l,h,p,y,_,w,A){let I=this.cells[y];if(I!==null){let R=this.keys,D=this.bboxes;for(let N=0;N<I.length;N++){let j=I[N];if(w[j]===void 0){let U=4*j;(A?A(D[U+0],D[U+1],D[U+2],D[U+3]):n<=D[U+2]&&l<=D[U+3]&&h>=D[U+0]&&p>=D[U+1])?(w[j]=!0,_.push(R[j])):w[j]=!1}}}}_forEachCell(n,l,h,p,y,_,w,A){let I=this._convertToCellCoord(n),R=this._convertToCellCoord(l),D=this._convertToCellCoord(h),N=this._convertToCellCoord(p);for(let j=I;j<=D;j++)for(let U=R;U<=N;U++){let W=this.d*U+j;if((!A||A(this._convertFromCellCoord(j),this._convertFromCellCoord(U),this._convertFromCellCoord(j+1),this._convertFromCellCoord(U+1)))&&y.call(this,n,l,h,p,W,_,w,A))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let n=this.cells,l=3+this.cells.length+1+1,h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;let p=new Int32Array(l+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let y=l;for(let _=0;_<n.length;_++){let w=n[_];p[3+_]=y,p.set(w,y),y+=w.length}return p[3+n.length]=y,p.set(this.keys,y),y+=this.keys.length,p[3+n.length+1]=y,p.set(this.bboxes,y),y+=this.bboxes.length,p.buffer}static serialize(n,l){let h=n.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(n){return new Cu(n.buffer)}}let _o={};function ct(u,n,l={}){if(_o[u])throw new Error(`${u} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:u,writeable:!1}),_o[u]={klass:n,omit:l.omit||[],shallow:l.shallow||[]}}ct("Object",Object),ct("TransferableGridIndex",Cu),ct("Color",ir),ct("Error",Error),ct("AJAXError",Kt),ct("ResolvedImage",oa),ct("StylePropertyFunction",dh),ct("StyleExpression",af,{omit:["_evaluator"]}),ct("ZoomDependentExpression",sf),ct("ZoomConstantExpression",hv),ct("CompoundExpression",Aa,{omit:["_evaluate"]});for(let u in xu)xu[u]._classRegistryKey||ct(`Expression_${u}`,xu[u]);function mf(u){return u&&typeof ArrayBuffer!="undefined"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function vf(u){return u.$name||u.constructor._classRegistryKey}function wx(u){return!function(n){if(n===null||typeof n!="object")return!1;let l=vf(n);return!(!l||l==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||mf(u)||Un(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function Mu(u,n){if(wx(u))return(mf(u)||Un(u))&&n&&n.push(u),ArrayBuffer.isView(u)&&n&&n.push(u.buffer),u instanceof ImageData&&n&&n.push(u.data.buffer),u;if(Array.isArray(u)){let y=[];for(let _ of u)y.push(Mu(_,n));return y}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);let l=vf(u);if(!l)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!_o[l])throw new Error(`${l} is not registered.`);let{klass:h}=_o[l],p=h.serialize?h.serialize(u,n):{};if(h.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let y in u){if(!u.hasOwnProperty(y)||_o[l].omit.indexOf(y)>=0)continue;let _=u[y];p[y]=_o[l].shallow.indexOf(y)>=0?_:Mu(_,n)}u instanceof Error&&(p.message=u.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(p.$name=l),p}function _h(u){if(wx(u))return u;if(Array.isArray(u))return u.map(_h);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);let n=vf(u)||"Object";if(!_o[n])throw new Error(`can't deserialize unregistered class ${n}`);let{klass:l}=_o[n];if(!l)throw new Error(`can't deserialize unregistered class ${n}`);if(l.deserialize)return l.deserialize(u);let h=Object.create(l.prototype);for(let p of Object.keys(u)){if(p==="$name")continue;let y=u[p];h[p]=_o[n].shallow.indexOf(p)>=0?y:_h(y)}return h}class Sv{constructor(){this.first=!0}update(n,l){let h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}let Yt={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Hangul Syllables":u=>u>=44032&&u<=55215,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function gf(u){for(let n of u)if(yf(n.charCodeAt(0)))return!0;return!1}function XA(u){for(let n of u)if(!Tx(n.charCodeAt(0)))return!1;return!0}function Tv(u){let n=u.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch(h){return null}}).filter(l=>l);return new RegExp(n.join("|"),"u")}let Sx=Tv(["Arab","Dupl","Mong","Ougr","Syrc"]);function Tx(u){return!Sx.test(String.fromCodePoint(u))}let Ev=Tv(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function yf(u){return!(u!==746&&u!==747&&(u<4352||!(Yt["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Yt["CJK Compatibility"](u)||Yt["CJK Strokes"](u)||!(!Yt["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Yt["Enclosed CJK Letters and Months"](u)||Yt["Ideographic Description Characters"](u)||Yt.Kanbun(u)||Yt.Katakana(u)&&u!==12540||!(!Yt["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Yt["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Yt["Vertical Forms"](u)||Yt["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||Ev.test(String.fromCodePoint(u)))))}function xh(u){return!(yf(u)||function(n){return!!(Yt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Yt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Yt["Letterlike Symbols"](n)||Yt["Number Forms"](n)||Yt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Yt["Control Pictures"](n)&&n!==9251||Yt["Optical Character Recognition"](n)||Yt["Enclosed Alphanumerics"](n)||Yt["Geometric Shapes"](n)||Yt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Yt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Yt["CJK Symbols and Punctuation"](n)||Yt.Katakana(n)||Yt["Private Use Area"](n)||Yt["CJK Compatibility Forms"](n)||Yt["Small Form Variants"](n)||Yt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(u))}let JA=Tv(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function _f(u){return JA.test(String.fromCodePoint(u))}function YA(u,n){return!(!n&&_f(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Yt.Khmer(u))}function QA(u){for(let n of u)if(_f(n.charCodeAt(0)))return!0;return!1}let Ho=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(Ho.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,n){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;let l=u.pluginURL,h=new Promise(y=>{this.loadScriptResolve=y});n(l);let p=new Promise(y=>setTimeout(()=>y(),this.TIMEOUT));if(yield Promise.race([h,p]),this.isParsed()){let y={pluginStatus:"loaded",pluginURL:l};return this.setState(y),y}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class Cr{constructor(n,l){this.zoom=n,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Sv,this.transition={})}isSupportedScript(n){return function(l,h){for(let p of l)if(!YA(p.charCodeAt(0),h))return!1;return!0}(n,Ho.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let n=this.zoom,l=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class bh{constructor(n,l){this.property=n,this.value=l,this.expression=function(h,p){if(rf(h))return new dh(h,p);if(hh(h)){let y=dv(h,p);if(y.result==="error")throw new Error(y.value.map(_=>`${_.key}: ${_.message}`).join(", "));return y.value}{let y=h;return p.type==="color"&&typeof h=="string"?y=ir.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?p.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?y=Sn.parse(h):p.type==="projectionDefinition"&&typeof h=="string"&&(y=Wn.parse(h)):y=Zi.parse(h):y=hi.parse(h):y=Gi.parse(h),{kind:"constant",evaluate:()=>y}}}(l===void 0?n.specification.default:l,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,l,h){return this.property.possiblyEvaluate(this,n,l,h)}}class Av{constructor(n){this.property=n,this.value=new bh(n,void 0)}transitioned(n,l){return new Ax(this.property,this.value,l,an({},n.transition,this.transition),n.now)}untransitioned(){return new Ax(this.property,this.value,null,{},0)}}class Ex{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Wi(this._values[n].value.value)}setValue(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Av(this._values[n].property)),this._values[n].value=new bh(this._values[n].property,l===null?void 0:Wi(l))}getTransition(n){return Wi(this._values[n].transition)}setTransition(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Av(this._values[n].property)),this._values[n].transition=Wi(l)||void 0}serialize(){let n={};for(let l of Object.keys(this._values)){let h=this.getValue(l);h!==void 0&&(n[l]=h);let p=this.getTransition(l);p!==void 0&&(n[`${l}-transition`]=p)}return n}transitioned(n,l){let h=new qx(this._properties);for(let p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,l._values[p]);return h}untransitioned(){let n=new qx(this._properties);for(let l of Object.keys(this._values))n._values[l]=this._values[l].untransitioned();return n}}class Ax{constructor(n,l,h,p,y){this.property=n,this.value=l,this.begin=y+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,l,h){let p=n.now||0,y=this.value.possiblyEvaluate(n,l,h),_=this.prior;if(_){if(p>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(p<this.begin)return _.possiblyEvaluate(n,l,h);{let w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,l,h),y,nn(w))}}return y}}class qx{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,l,h){let p=new xf(this._properties);for(let y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(n,l,h);return p}hasTransition(){for(let n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class eq{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Wi(this._values[n].value)}setValue(n,l){this._values[n]=new bh(this._values[n].property,l===null?void 0:Wi(l))}serialize(){let n={};for(let l of Object.keys(this._values)){let h=this.getValue(l);h!==void 0&&(n[l]=h)}return n}possiblyEvaluate(n,l,h){let p=new xf(this._properties);for(let y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(n,l,h);return p}}class Tn{constructor(n,l,h){this.property=n,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,l,h,p){return this.property.evaluate(this.value,this.parameters,n,l,h,p)}}class xf{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class vt{constructor(n){this.specification=n}possiblyEvaluate(n,l){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(l)}interpolate(n,l,h){let p=vo[this.specification.type];return p?p(n,l,h):n}}class It{constructor(n,l){this.specification=n,this.overrides=l}possiblyEvaluate(n,l,h,p){return new Tn(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(l,null,{},h,p)}:n.expression,l)}interpolate(n,l,h){if(n.value.kind!=="constant"||l.value.kind!=="constant")return n;if(n.value.value===void 0||l.value.value===void 0)return new Tn(this,{kind:"constant",value:void 0},n.parameters);let p=vo[this.specification.type];if(p){let y=p(n.value.value,l.value.value,h);return new Tn(this,{kind:"constant",value:y},n.parameters)}return n}evaluate(n,l,h,p,y,_){return n.kind==="constant"?n.value:n.evaluate(l,h,p,y,_)}}class wh extends It{possiblyEvaluate(n,l,h,p){if(n.value===void 0)return new Tn(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){let y=n.expression.evaluate(l,null,{},h,p),_=n.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,w=this._calculate(_,_,_,l);return new Tn(this,{kind:"constant",value:w},l)}if(n.expression.kind==="camera"){let y=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new Tn(this,{kind:"constant",value:y},l)}return new Tn(this,n.expression,l)}evaluate(n,l,h,p,y,_){if(n.kind==="source"){let w=n.evaluate(l,h,p,y,_);return this._calculate(w,w,w,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},h,p),n.evaluate({zoom:Math.floor(l.zoom)},h,p),n.evaluate({zoom:Math.floor(l.zoom)+1},h,p),l):n.value}_calculate(n,l,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class qv{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){let y=n.expression.evaluate(l,null,{},h,p);return this._calculate(y,y,y,l)}return this._calculate(n.expression.evaluate(new Cr(Math.floor(l.zoom-1),l)),n.expression.evaluate(new Cr(Math.floor(l.zoom),l)),n.expression.evaluate(new Cr(Math.floor(l.zoom+1),l)),l)}}_calculate(n,l,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class Iv{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,p){return!!n.expression.evaluate(l,null,{},h,p)}interpolate(){return!1}}class pi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let l in n){let h=n[l];h.specification.overridable&&this.overridableProperties.push(l);let p=this.defaultPropertyValues[l]=new bh(h,void 0),y=this.defaultTransitionablePropertyValues[l]=new Av(h);this.defaultTransitioningPropertyValues[l]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=p.possiblyEvaluate({})}}}ct("DataDrivenProperty",It),ct("DataConstantProperty",vt),ct("CrossFadedDataDrivenProperty",wh),ct("CrossFadedProperty",qv),ct("ColorRampProperty",Iv);let Pv="-transition";class qa extends ve{constructor(n,l){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new eq(l.layout)),l.paint)){this._transitionablePaint=new Ex(l.paint);for(let h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(let h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new xf(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,l,h={}){l!=null&&this._validate(pf,`layers.${this.id}.layout.${n}`,n,l,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)}getPaintProperty(n){return n.endsWith(Pv)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,l,h={}){if(l!=null&&this._validate(bv,`layers.${this.id}.paint.${n}`,n,l,h))return!1;if(n.endsWith(Pv))return this._transitionablePaint.setTransition(n.slice(0,-11),l||void 0),!1;{let p=this._transitionablePaint._values[n],y=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);let A=this._transitionablePaint._values[n].value;return A.isDataDriven()||_||y||this._handleOverridablePaintPropertyUpdate(n,w,A)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,l,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)}serialize(){let n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ml(n,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(n,l,h,p,y={}){return(!y||y.validate!==!1)&&wv(this,n.call(Pu,{key:l,layerType:this.type,objectKey:h,value:p,styleSpec:J,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let n in this.paint._values){let l=this.paint.get(n);if(l instanceof Tn&&wu(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}let Ix={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Cl{constructor(n,l){this._structArray=n,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Yr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,l){return n._trim(),l&&(n.isTransferred=!0,l.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){let l=Object.create(this.prototype);return l.arrayBuffer=n.arrayBuffer,l.length=n.length,l.capacity=n.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Nr(u,n=1){let l=0,h=0;return{members:u.map(p=>{let y=Ix[p.type].BYTES_PER_ELEMENT,_=l=Ru(l,Math.max(n,y)),w=p.components||1;return h=Math.max(h,y),l+=y*w,{name:p.name,type:p.type,components:w,offset:_}}),size:Ru(l,Math.max(h,n)),alignment:n}}function Ru(u,n){return Math.ceil(u/n)*n}class Sh extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l){let h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){let p=2*n;return this.int16[p+0]=l,this.int16[p+1]=h,n}}Sh.prototype.bytesPerElement=4,ct("StructArrayLayout2i4",Sh);class Th extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=p,n}}Th.prototype.bytesPerElement=6,ct("StructArrayLayout3i6",Th);class Ml extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p){let y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,p)}emplace(n,l,h,p,y){let _=4*n;return this.int16[_+0]=l,this.int16[_+1]=h,this.int16[_+2]=p,this.int16[_+3]=y,n}}Ml.prototype.bytesPerElement=8,ct("StructArrayLayout4i8",Ml);class Cv extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,w){let A=6*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=p,this.int16[A+3]=y,this.int16[A+4]=_,this.int16[A+5]=w,n}}Cv.prototype.bytesPerElement=12,ct("StructArrayLayout2i4i12",Cv);class Mv extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,w){let A=4*n,I=8*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.uint8[I+4]=p,this.uint8[I+5]=y,this.uint8[I+6]=_,this.uint8[I+7]=w,n}}Mv.prototype.bytesPerElement=8,ct("StructArrayLayout2i4ub8",Mv);class Ou extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l){let h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){let p=2*n;return this.float32[p+0]=l,this.float32[p+1]=h,n}}Ou.prototype.bytesPerElement=8,ct("StructArrayLayout2f8",Ou);class Rv extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,I,R){let D=this.length;return this.resize(D+1),this.emplace(D,n,l,h,p,y,_,w,A,I,R)}emplace(n,l,h,p,y,_,w,A,I,R,D){let N=10*n;return this.uint16[N+0]=l,this.uint16[N+1]=h,this.uint16[N+2]=p,this.uint16[N+3]=y,this.uint16[N+4]=_,this.uint16[N+5]=w,this.uint16[N+6]=A,this.uint16[N+7]=I,this.uint16[N+8]=R,this.uint16[N+9]=D,n}}Rv.prototype.bytesPerElement=20,ct("StructArrayLayout10ui20",Rv);class m extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,I,R,D,N){let j=this.length;return this.resize(j+1),this.emplace(j,n,l,h,p,y,_,w,A,I,R,D,N)}emplace(n,l,h,p,y,_,w,A,I,R,D,N,j){let U=12*n;return this.int16[U+0]=l,this.int16[U+1]=h,this.int16[U+2]=p,this.int16[U+3]=y,this.uint16[U+4]=_,this.uint16[U+5]=w,this.uint16[U+6]=A,this.uint16[U+7]=I,this.int16[U+8]=R,this.int16[U+9]=D,this.int16[U+10]=N,this.int16[U+11]=j,n}}m.prototype.bytesPerElement=24,ct("StructArrayLayout4i4ui4i24",m);class r extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=p,n}}r.prototype.bytesPerElement=12,ct("StructArrayLayout3f12",r);class s extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){let l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint32[1*n+0]=l,n}}s.prototype.bytesPerElement=4,ct("StructArrayLayout1ul4",s);class d extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,I){let R=this.length;return this.resize(R+1),this.emplace(R,n,l,h,p,y,_,w,A,I)}emplace(n,l,h,p,y,_,w,A,I,R){let D=10*n,N=5*n;return this.int16[D+0]=l,this.int16[D+1]=h,this.int16[D+2]=p,this.int16[D+3]=y,this.int16[D+4]=_,this.int16[D+5]=w,this.uint32[N+3]=A,this.uint16[D+8]=I,this.uint16[D+9]=R,n}}d.prototype.bytesPerElement=20,ct("StructArrayLayout6i1ul2ui20",d);class f extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,w){let A=6*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=p,this.int16[A+3]=y,this.int16[A+4]=_,this.int16[A+5]=w,n}}f.prototype.bytesPerElement=12,ct("StructArrayLayout2i2i2i12",f);class v extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y){let _=this.length;return this.resize(_+1),this.emplace(_,n,l,h,p,y)}emplace(n,l,h,p,y,_){let w=4*n,A=8*n;return this.float32[w+0]=l,this.float32[w+1]=h,this.float32[w+2]=p,this.int16[A+6]=y,this.int16[A+7]=_,n}}v.prototype.bytesPerElement=16,ct("StructArrayLayout2f1f2i16",v);class b extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,w){let A=16*n,I=4*n,R=8*n;return this.uint8[A+0]=l,this.uint8[A+1]=h,this.float32[I+1]=p,this.float32[I+2]=y,this.int16[R+6]=_,this.int16[R+7]=w,n}}b.prototype.bytesPerElement=16,ct("StructArrayLayout2ub2f2i16",b);class T extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=p,n}}T.prototype.bytesPerElement=6,ct("StructArrayLayout3ui6",T);class q extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,I,R,D,N,j,U,W,X,ae){let me=this.length;return this.resize(me+1),this.emplace(me,n,l,h,p,y,_,w,A,I,R,D,N,j,U,W,X,ae)}emplace(n,l,h,p,y,_,w,A,I,R,D,N,j,U,W,X,ae,me){let le=24*n,B=12*n,H=48*n;return this.int16[le+0]=l,this.int16[le+1]=h,this.uint16[le+2]=p,this.uint16[le+3]=y,this.uint32[B+2]=_,this.uint32[B+3]=w,this.uint32[B+4]=A,this.uint16[le+10]=I,this.uint16[le+11]=R,this.uint16[le+12]=D,this.float32[B+7]=N,this.float32[B+8]=j,this.uint8[H+36]=U,this.uint8[H+37]=W,this.uint8[H+38]=X,this.uint32[B+10]=ae,this.int16[le+22]=me,n}}q.prototype.bytesPerElement=48,ct("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",q);class C extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,I,R,D,N,j,U,W,X,ae,me,le,B,H,ce,Ie,$e,Me,Fe,Ke,We){let He=this.length;return this.resize(He+1),this.emplace(He,n,l,h,p,y,_,w,A,I,R,D,N,j,U,W,X,ae,me,le,B,H,ce,Ie,$e,Me,Fe,Ke,We)}emplace(n,l,h,p,y,_,w,A,I,R,D,N,j,U,W,X,ae,me,le,B,H,ce,Ie,$e,Me,Fe,Ke,We,He){let Be=32*n,ht=16*n;return this.int16[Be+0]=l,this.int16[Be+1]=h,this.int16[Be+2]=p,this.int16[Be+3]=y,this.int16[Be+4]=_,this.int16[Be+5]=w,this.int16[Be+6]=A,this.int16[Be+7]=I,this.uint16[Be+8]=R,this.uint16[Be+9]=D,this.uint16[Be+10]=N,this.uint16[Be+11]=j,this.uint16[Be+12]=U,this.uint16[Be+13]=W,this.uint16[Be+14]=X,this.uint16[Be+15]=ae,this.uint16[Be+16]=me,this.uint16[Be+17]=le,this.uint16[Be+18]=B,this.uint16[Be+19]=H,this.uint16[Be+20]=ce,this.uint16[Be+21]=Ie,this.uint16[Be+22]=$e,this.uint32[ht+12]=Me,this.float32[ht+13]=Fe,this.float32[ht+14]=Ke,this.uint16[Be+30]=We,this.uint16[Be+31]=He,n}}C.prototype.bytesPerElement=64,ct("StructArrayLayout8i15ui1ul2f2ui64",C);class k extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){let l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.float32[1*n+0]=l,n}}k.prototype.bytesPerElement=4,ct("StructArrayLayout1f4",k);class F extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.uint16[6*n+0]=l,this.float32[y+1]=h,this.float32[y+2]=p,n}}F.prototype.bytesPerElement=12,ct("StructArrayLayout1ui2f12",F);class L extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=4*n;return this.uint32[2*n+0]=l,this.uint16[y+2]=h,this.uint16[y+3]=p,n}}L.prototype.bytesPerElement=8,ct("StructArrayLayout1ul2ui8",L);class V extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l){let h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){let p=2*n;return this.uint16[p+0]=l,this.uint16[p+1]=h,n}}V.prototype.bytesPerElement=4,ct("StructArrayLayout2ui4",V);class $ extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){let l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint16[1*n+0]=l,n}}$.prototype.bytesPerElement=2,ct("StructArrayLayout1ui2",$);class ie extends Yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,p){let y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,p)}emplace(n,l,h,p,y){let _=4*n;return this.float32[_+0]=l,this.float32[_+1]=h,this.float32[_+2]=p,this.float32[_+3]=y,n}}ie.prototype.bytesPerElement=16,ct("StructArrayLayout4f16",ie);class re extends Cl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new z(this.anchorPointX,this.anchorPointY)}}re.prototype.size=20;class ne extends d{get(n){return new re(this,n)}}ct("CollisionBoxArray",ne);class se extends Cl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}se.prototype.size=48;class de extends q{get(n){return new se(this,n)}}ct("PlacedSymbolArray",de);class he extends Cl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}he.prototype.size=64;class fe extends C{get(n){return new he(this,n)}}ct("SymbolInstanceArray",fe);class _e extends k{getoffsetX(n){return this.float32[1*n+0]}}ct("GlyphOffsetArray",_e);class pe extends Th{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}ct("SymbolLineVertexArray",pe);class qe extends Cl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}qe.prototype.size=12;class ze extends F{get(n){return new qe(this,n)}}ct("TextAnchorOffsetArray",ze);class Oe extends Cl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Oe.prototype.size=8;class ke extends L{get(n){return new Oe(this,n)}}ct("FeatureIndexArray",ke);class De extends Sh{}class Qe extends Sh{}class Ye extends Sh{}class Ge extends Cv{}class ft extends Mv{}class Wt extends Ou{}class ar extends Rv{}class Br extends m{}class Sr extends r{}class jr extends s{}class Ur extends f{}class Er extends b{}class hr extends T{}class Ai extends V{}let Li=Nr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ki}=Li;class dr{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,l,h,p){let y=this.segments[this.segments.length-1];return n>dr.MAX_VERTEX_ARRAY_LENGTH&&Ti(`Max vertices per segment is ${dr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${dr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!y||y.vertexLength+n>dr.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==p?this.createNewSegment(l,h,p):y}createNewSegment(n,l,h){let p={vertexOffset:n.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(p.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(n,l,h){return this.prepareSegment(0,n,l,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let n of this.segments)for(let l in n.vaos)n.vaos[l].destroy()}static simpleSegment(n,l,h,p){return new dr([{vertexOffset:n,primitiveOffset:l,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Cs(u,n){return 256*(u=fi(Math.floor(u),0,255))+fi(Math.floor(n),0,255)}dr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ct("SegmentVector",dr);let xo=Nr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ms,Rl,Eh,Rs={exports:{}},Ol={exports:{}},la={exports:{}},Os=function(){if(Eh)return Rs.exports;Eh=1;var u=(Ms||(Ms=1,Ol.exports=function(l,h){var p,y,_,w,A,I,R,D;for(y=l.length-(p=3&l.length),_=h,A=3432918353,I=461845907,D=0;D<y;)R=255&l.charCodeAt(D)|(255&l.charCodeAt(++D))<<8|(255&l.charCodeAt(++D))<<16|(255&l.charCodeAt(++D))<<24,++D,_=27492+(65535&(w=5*(65535&(_=(_^=R=(65535&(R=(R=(65535&R)*A+(((R>>>16)*A&65535)<<16)&4294967295)<<15|R>>>17))*I+(((R>>>16)*I&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(R=0,p){case 3:R^=(255&l.charCodeAt(D+2))<<16;case 2:R^=(255&l.charCodeAt(D+1))<<8;case 1:_^=R=(65535&(R=(R=(65535&(R^=255&l.charCodeAt(D)))*A+(((R>>>16)*A&65535)<<16)&4294967295)<<15|R>>>17))*I+(((R>>>16)*I&65535)<<16)&4294967295}return _^=l.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Ol.exports),n=(Rl||(Rl=1,la.exports=function(l,h){for(var p,y=l.length,_=h^y,w=0;y>=4;)p=1540483477*(65535&(p=255&l.charCodeAt(w)|(255&l.charCodeAt(++w))<<8|(255&l.charCodeAt(++w))<<16|(255&l.charCodeAt(++w))<<24))+((1540483477*(p>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),y-=4,++w;switch(y){case 3:_^=(255&l.charCodeAt(w+2))<<16;case 2:_^=(255&l.charCodeAt(w+1))<<8;case 1:_=1540483477*(65535&(_^=255&l.charCodeAt(w)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),la.exports);return Rs.exports=u,Rs.exports.murmur3=u,Rs.exports.murmur2=n,Rs.exports}(),Xo=g(Os);class ks{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,l,h,p){this.ids.push(mi(n)),this.positions.push(l,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let l=mi(n),h=0,p=this.ids.length-1;for(;h<p;){let _=h+p>>1;this.ids[_]>=l?p=_:h=_+1}let y=[];for(;this.ids[h]===l;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(n,l){let h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return vi(h,p,0,h.length-1),l&&l.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){let l=new ks;return l.ids=n.ids,l.positions=n.positions,l.indexed=!0,l}}function mi(u){let n=+u;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Xo(String(u))}function vi(u,n,l,h){for(;l<h;){let p=u[l+h>>1],y=l-1,_=h+1;for(;;){do y++;while(u[y]<p);do _--;while(u[_]>p);if(y>=_)break;En(u,y,_),En(n,3*y,3*_),En(n,3*y+1,3*_+1),En(n,3*y+2,3*_+2)}_-l<h-_?(vi(u,n,l,_),l=_+1):(vi(u,n,_+1,h),h=_)}}function En(u,n,l){let h=u[n];u[n]=u[l],u[l]=h}ct("FeaturePositionMap",ks);class Mr{constructor(n,l){this.gl=n.gl,this.location=l}}class bf extends Mr{constructor(n,l){super(n,l),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Px extends Mr{constructor(n,l){super(n,l),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Cx extends Mr{constructor(n,l){super(n,l),this.current=ir.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}let tq=new Float32Array(16);function Ov(u){return[Cs(255*u.r,255*u.g),Cs(255*u.b,255*u.a)]}class Ah{constructor(n,l,h){this.value=n,this.uniformNames=l.map(p=>`u_${p}`),this.type=h}setUniform(n,l,h){n.set(h.constantOr(this.value))}getBinding(n,l,h){return this.type==="color"?new Cx(n,l):new bf(n,l)}}class Ia{constructor(n,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=n.tlbr}setUniform(n,l,h,p){let y=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&n.set(y)}getBinding(n,l,h){return h.substr(0,9)==="u_pattern"?new Px(n,l):new bf(n,l)}}class bo{constructor(n,l,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,l,h,p,y){let _=this.paintVertexArray.length,w=this.expression.evaluate(new Cr(0),l,{},p,[],y);this.paintVertexArray.resize(n),this._setPaintValue(_,n,w)}updatePaintArray(n,l,h,p){let y=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,l,y)}_setPaintValue(n,l,h){if(this.type==="color"){let p=Ov(h);for(let y=n;y<l;y++)this.paintVertexArray.emplace(y,p[0],p[1])}else{for(let p=n;p<l;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Pa{constructor(n,l,h,p,y,_){this.expression=n,this.uniformNames=l.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,l,h,p,y){let _=this.expression.evaluate(new Cr(this.zoom),l,{},p,[],y),w=this.expression.evaluate(new Cr(this.zoom+1),l,{},p,[],y),A=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(A,n,_,w)}updatePaintArray(n,l,h,p){let y=this.expression.evaluate({zoom:this.zoom},h,p),_=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,l,y,_)}_setPaintValue(n,l,h,p){if(this.type==="color"){let y=Ov(h),_=Ov(p);for(let w=n;w<l;w++)this.paintVertexArray.emplace(w,y[0],y[1],_[0],_[1])}else{for(let y=n;y<l;y++)this.paintVertexArray.emplace(y,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,l){let h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,p=fi(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,l,h){return new bf(n,l)}}class Jo{constructor(n,l,h,p,y,_){this.expression=n,this.type=l,this.useIntegerZoom=h,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(n,l,h){let p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(n,l,h,p,y){this._setPaintValues(n,l,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(n,l,h,p){if(!p||!h)return;let{min:y,mid:_,max:w}=h,A=p[y],I=p[_],R=p[w];if(A&&I&&R)for(let D=n;D<l;D++)this.zoomInPaintVertexArray.emplace(D,I.tl[0],I.tl[1],I.br[0],I.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],I.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,I.tl[0],I.tl[1],I.br[0],I.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],I.pixelRatio,R.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,xo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,xo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class wf{constructor(n,l,h){this.binders={},this._buffers=[];let p=[];for(let y in n.paint._values){if(!h(y))continue;let _=n.paint.get(y);if(!(_ instanceof Tn&&wu(_.property.specification)))continue;let w=kv(y,n.type),A=_.value,I=_.property.specification.type,R=_.property.useIntegerZoom,D=_.property.specification["property-type"],N=D==="cross-faded"||D==="cross-faded-data-driven";if(A.kind==="constant")this.binders[y]=N?new Ia(A.value,w):new Ah(A.value,w,I),p.push(`/u_${y}`);else if(A.kind==="source"||N){let j=u3(y,I,"source");this.binders[y]=N?new Jo(A,I,R,l,j,n.id):new bo(A,w,I,j),p.push(`/a_${y}`)}else{let j=u3(y,I,"composite");this.binders[y]=new Pa(A,w,I,R,l,j),p.push(`/z_${y}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){let l=this.binders[n];return l instanceof bo||l instanceof Pa?l.maxValue:0}populatePaintArrays(n,l,h,p,y){for(let _ in this.binders){let w=this.binders[_];(w instanceof bo||w instanceof Pa||w instanceof Jo)&&w.populatePaintArray(n,l,h,p,y)}}setConstantPatternPositions(n,l){for(let h in this.binders){let p=this.binders[h];p instanceof Ia&&p.setConstantPatternPositions(n,l)}}updatePaintArrays(n,l,h,p,y){let _=!1;for(let w in n){let A=l.getPositions(w);for(let I of A){let R=h.feature(I.index);for(let D in this.binders){let N=this.binders[D];if((N instanceof bo||N instanceof Pa||N instanceof Jo)&&N.expression.isStateDependent===!0){let j=p.paint.get(D);N.expression=j.value,N.updatePaintArray(I.start,I.end,R,n[w],y),_=!0}}}}return _}defines(){let n=[];for(let l in this.binders){let h=this.binders[l];(h instanceof Ah||h instanceof Ia)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){let n=[];for(let l in this.binders){let h=this.binders[l];if(h instanceof bo||h instanceof Pa)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof Jo)for(let p=0;p<xo.members.length;p++)n.push(xo.members[p].name)}return n}getBinderUniforms(){let n=[];for(let l in this.binders){let h=this.binders[l];if(h instanceof Ah||h instanceof Ia||h instanceof Pa)for(let p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,l){let h=[];for(let p in this.binders){let y=this.binders[p];if(y instanceof Ah||y instanceof Ia||y instanceof Pa){for(let _ of y.uniformNames)if(l[_]){let w=y.getBinding(n,l[_],_);h.push({name:_,property:p,binding:w})}}}return h}setUniforms(n,l,h,p){for(let{name:y,property:_,binding:w}of l)this.binders[_].setUniform(w,p,h.get(_),y)}updatePaintBuffers(n){this._buffers=[];for(let l in this.binders){let h=this.binders[l];if(n&&h instanceof Jo){let p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof bo||h instanceof Pa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(let l in this.binders){let h=this.binders[l];(h instanceof bo||h instanceof Pa||h instanceof Jo)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(let n in this.binders){let l=this.binders[n];(l instanceof bo||l instanceof Pa||l instanceof Jo)&&l.destroy()}}}class Ds{constructor(n,l,h=()=>!0){this.programConfigurations={};for(let p of n)this.programConfigurations[p.id]=new wf(p,l,h);this.needsUpload=!1,this._featureMap=new ks,this._bufferOffset=0}populatePaintArrays(n,l,h,p,y,_){for(let w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,l,p,y,_);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,l,h,p){for(let y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(n,this._featureMap,l,y,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(let l in this.programConfigurations)this.programConfigurations[l].upload(n);this.needsUpload=!1}}destroy(){for(let n in this.programConfigurations)this.programConfigurations[n].destroy()}}function kv(u,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${n}-`,"").replace(/-/g,"_")]}function u3(u,n,l){let h={color:{source:Ou,composite:ie},number:{source:k,composite:Ou}},p=function(y){return{"line-pattern":{source:ar,composite:ar},"fill-pattern":{source:ar,composite:ar},"fill-extrusion-pattern":{source:ar,composite:ar}}[y]}(u);return p&&p[l]||h[n][l]}ct("ConstantBinder",Ah),ct("CrossFadedConstantBinder",Ia),ct("SourceExpressionBinder",bo),ct("CrossFadedCompositeBinder",Jo),ct("CompositeExpressionBinder",Pa),ct("ProgramConfiguration",wf,{omit:["_buffers"]}),ct("ProgramConfigurationSet",Ds);let rq=Math.pow(2,14)-1,c3=-rq-1;function qh(u){let n=Lt/u.extent,l=u.loadGeometry();for(let h=0;h<l.length;h++){let p=l[h];for(let y=0;y<p.length;y++){let _=p[y],w=Math.round(_.x*n),A=Math.round(_.y*n);_.x=fi(w,c3,rq),_.y=fi(A,c3,rq),(w<_.x||w>_.x+1||A<_.y||A>_.y+1)&&Ti("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Ih(u,n){return{type:u.type,id:u.id,properties:u.properties,geometry:n?qh(u):[]}}let h3=-32768;function E1e(u,n,l,h,p){u.emplaceBack(h3+8*n+h,h3+8*l+p)}class iq{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Qe,this.indexArray=new hr,this.segments=new dr,this.programConfigurations=new Ds(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){let p=this.layers[0],y=[],_=null,w=!1,A=p.type==="heatmap";if(p.type==="circle"){let R=p;_=R.layout.get("circle-sort-key"),w=!_.isConstant(),A=A||R.paint.get("circle-pitch-alignment")==="map"}let I=A?l.subdivisionGranularity.circle:1;for(let{feature:R,id:D,index:N,sourceLayerIndex:j}of n){let U=this.layers[0]._featureFilter.needGeometry,W=Ih(R,U);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),W,h))continue;let X=w?_.evaluate(W,{},h):void 0,ae={id:D,properties:R.properties,type:R.type,sourceLayerIndex:j,index:N,geometry:U?W.geometry:qh(R),patterns:{},sortKey:X};y.push(ae)}w&&y.sort((R,D)=>R.sortKey-D.sortKey);for(let R of y){let{geometry:D,index:N,sourceLayerIndex:j}=R,U=n[N].feature;this.addFeature(R,D,N,h,I),l.featureIndex.insert(U,D,N,j,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ki),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,l,h,p,y=1){let _;switch(y){case 1:_=[0,7];break;case 3:_=[0,2,5,7];break;case 5:_=[0,1,3,4,6,7];break;case 7:_=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${y}; valid values are 1, 3, 5, 7.`)}let w=_.length;for(let A of l)for(let I of A){let R=I.x,D=I.y;if(R<0||R>=Lt||D<0||D>=Lt)continue;let N=this.segments.prepareSegment(w*w,this.layoutVertexArray,this.indexArray,n.sortKey),j=N.vertexLength;for(let U=0;U<w;U++)for(let W=0;W<w;W++)E1e(this.layoutVertexArray,R,D,_[W],_[U]);for(let U=0;U<w-1;U++)for(let W=0;W<w-1;W++){let X=j+U*w+W,ae=j+(U+1)*w+W;this.indexArray.emplaceBack(X,ae+1,X+1),this.indexArray.emplaceBack(X,ae,ae+1)}N.vertexLength+=w*w,N.primitiveLength+=(w-1)*(w-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function d3(u,n){for(let l=0;l<u.length;l++)if(Ph(n,u[l]))return!0;for(let l=0;l<n.length;l++)if(Ph(u,n[l]))return!0;return!!nq(u,n)}function A1e(u,n,l){return!!Ph(u,n)||!!aq(n,u,l)}function f3(u,n){if(u.length===1)return m3(n,u[0]);for(let l=0;l<n.length;l++){let h=n[l];for(let p=0;p<h.length;p++)if(Ph(u,h[p]))return!0}for(let l=0;l<u.length;l++)if(m3(n,u[l]))return!0;for(let l=0;l<n.length;l++)if(nq(u,n[l]))return!0;return!1}function q1e(u,n,l){if(u.length>1){if(nq(u,n))return!0;for(let h=0;h<n.length;h++)if(aq(n[h],u,l))return!0}for(let h=0;h<u.length;h++)if(aq(u[h],n,l))return!0;return!1}function nq(u,n){if(u.length===0||n.length===0)return!1;for(let l=0;l<u.length-1;l++){let h=u[l],p=u[l+1];for(let y=0;y<n.length-1;y++)if(I1e(h,p,n[y],n[y+1]))return!0}return!1}function I1e(u,n,l,h){return gr(u,l,h)!==gr(n,l,h)&&gr(u,n,l)!==gr(u,n,h)}function aq(u,n,l){let h=l*l;if(n.length===1)return u.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(p3(u,n[p-1],n[p])<h)return!0;return!1}function p3(u,n,l){let h=n.distSqr(l);if(h===0)return u.distSqr(n);let p=((u.x-n.x)*(l.x-n.x)+(u.y-n.y)*(l.y-n.y))/h;return u.distSqr(p<0?n:p>1?l:l.sub(n)._mult(p)._add(n))}function m3(u,n){for(let l=0;l<u.length;l++)if(Ph(u[l],n))return!0;return!1}function Ph(u,n){let l=!1;for(let h=0,p=u.length-1;h<u.length;p=h++){let y=u[h],_=u[p];y.y>n.y!=_.y>n.y&&n.x<(_.x-y.x)*(n.y-y.y)/(_.y-y.y)+y.x&&(l=!l)}return l}function P1e(u,n,l){let h=l[0],p=l[2];if(u.x<h.x&&n.x<h.x||u.x>p.x&&n.x>p.x||u.y<h.y&&n.y<h.y||u.y>p.y&&n.y>p.y)return!1;let y=gr(u,n,l[0]);return y!==gr(u,n,l[1])||y!==gr(u,n,l[2])||y!==gr(u,n,l[3])}function Dv(u,n,l){let h=n.paint.get(u).value;return h.kind==="constant"?h.value:l.programConfigurations.get(n.id).getMaxValue(u)}function Mx(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Rx(u,n,l,h,p){if(!n[0]&&!n[1])return u;let y=z.convert(n)._mult(p);l==="viewport"&&y._rotate(-h);let _=[];for(let w=0;w<u.length;w++)_.push(u[w].sub(y));return _}let v3,g3;ct("CircleBucket",iq,{omit:["layers"]});var C1e={get paint(){return g3=g3||new pi({"circle-radius":new It(J.paint_circle["circle-radius"]),"circle-color":new It(J.paint_circle["circle-color"]),"circle-blur":new It(J.paint_circle["circle-blur"]),"circle-opacity":new It(J.paint_circle["circle-opacity"]),"circle-translate":new vt(J.paint_circle["circle-translate"]),"circle-translate-anchor":new vt(J.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vt(J.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vt(J.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new It(J.paint_circle["circle-stroke-width"]),"circle-stroke-color":new It(J.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new It(J.paint_circle["circle-stroke-opacity"])})},get layout(){return v3=v3||new pi({"circle-sort-key":new It(J.layout_circle["circle-sort-key"])})}};class M1e extends qa{constructor(n){super(n,C1e)}createBucket(n){return new iq(n)}queryRadius(n){let l=n;return Dv("circle-radius",this,l)+Dv("circle-stroke-width",this,l)+Mx(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:l,featureState:h,geometry:p,transform:y,pixelsToTileUnits:_,unwrappedTileID:w,getElevation:A}){let I=Rx(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-y.bearingInRadians,_),R=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),D=this.paint.get("circle-pitch-alignment")==="map",N=D?I:function(U,W,X,ae){return U.map(me=>y3(me,W,X,ae))}(I,y,w,A),j=D?R*_:R;for(let U of p)for(let W of U){let X=D?W:y3(W,y,w,A),ae=j,me=y.projectTileCoordinates(W.x,W.y,w,A).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ae*=me/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ae*=y.cameraToCenterDistance/me),A1e(N,X,ae))return!0}return!1}}function y3(u,n,l,h){let p=n.projectTileCoordinates(u.x,u.y,l,h).point;return new z((.5*p.x+.5)*n.width,(.5*-p.y+.5)*n.height)}class _3 extends iq{}let x3;ct("HeatmapBucket",_3,{omit:["layers"]});var R1e={get paint(){return x3=x3||new pi({"heatmap-radius":new It(J.paint_heatmap["heatmap-radius"]),"heatmap-weight":new It(J.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vt(J.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Iv(J.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vt(J.paint_heatmap["heatmap-opacity"])})}};function oq(u,{width:n,height:l},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*l*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*l*h}`)}else p=new Uint8Array(n*l*h);return u.width=n,u.height=l,u.data=p,u}function b3(u,{width:n,height:l},h){if(n===u.width&&l===u.height)return;let p=oq({},{width:n,height:l},h);sq(u,p,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,n),height:Math.min(u.height,l)},h),u.width=n,u.height=l,u.data=p.data}function sq(u,n,l,h,p,y){if(p.width===0||p.height===0)return n;if(p.width>u.width||p.height>u.height||l.x>u.width-p.width||l.y>u.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");let _=u.data,w=n.data;if(_===w)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<p.height;A++){let I=((l.y+A)*u.width+l.x)*y,R=((h.y+A)*n.width+h.x)*y;for(let D=0;D<p.width*y;D++)w[R+D]=_[I+D]}return n}class Lv{constructor(n,l){oq(this,n,1,l)}resize(n){b3(this,n,1)}clone(){return new Lv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,p,y){sq(n,l,h,p,y,1)}}class Ya{constructor(n,l){oq(this,n,4,l)}resize(n){b3(this,n,4)}replace(n,l){l?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ya({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,p,y){sq(n,l,h,p,y,4)}}function w3(u){let n={},l=u.resolution||256,h=u.clips?u.clips.length:1,p=u.image||new Ya({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);let y=(_,w,A)=>{n[u.evaluationKey]=A;let I=u.expression.evaluate(n);p.data[_+w+0]=Math.floor(255*I.r/I.a),p.data[_+w+1]=Math.floor(255*I.g/I.a),p.data[_+w+2]=Math.floor(255*I.b/I.a),p.data[_+w+3]=Math.floor(255*I.a)};if(u.clips)for(let _=0,w=0;_<h;++_,w+=4*l)for(let A=0,I=0;A<l;A++,I+=4){let R=A/(l-1),{start:D,end:N}=u.clips[_];y(w,I,D*(1-R)+N*R)}else for(let _=0,w=0;_<l;_++,w+=4)y(0,w,_/(l-1));return p}ct("AlphaImage",Lv),ct("RGBAImage",Ya);let lq="big-fb";class O1e extends qa{createBucket(n){return new _3(n)}constructor(n){super(n,R1e),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=w3({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(lq)&&this.heatmapFbos.delete(lq)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let S3;var k1e={get paint(){return S3=S3||new pi({"hillshade-illumination-direction":new vt(J.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new vt(J.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new vt(J.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vt(J.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vt(J.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vt(J.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vt(J.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new vt(J.paint_hillshade["hillshade-method"])})}};class D1e extends qa{constructor(n){super(n,k1e),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values,y=Math.max(n.length,l.length,h.length,p.length);n=n.concat(Array(y-n.length).fill(n.at(-1))),l=l.concat(Array(y-l.length).fill(l.at(-1))),h=h.concat(Array(y-h.length).fill(h.at(-1))),p=p.concat(Array(y-p.length).fill(p.at(-1)));let _=l.map(mo);return{directionRadians:n.map(mo),altitudeRadians:_,shadowColor:p,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let L1e=Nr([{name:"a_pos",components:2,type:"Int16"}],4),{members:F1e}=L1e;function uq(u,n,l){let h=l.patternDependencies,p=!1;for(let y of n){let _=y.paint.get(`${u}-pattern`);_.isConstant()||(p=!0);let w=_.constantOr(null);w&&(p=!0,h[w.to]=!0,h[w.from]=!0)}return p}function cq(u,n,l,h,p){let y=p.patternDependencies;for(let _ of n){let w=_.paint.get(`${u}-pattern`).value;if(w.kind!=="constant"){let A=w.evaluate({zoom:h-1},l,{},p.availableImages),I=w.evaluate({zoom:h},l,{},p.availableImages),R=w.evaluate({zoom:h+1},l,{},p.availableImages);A=A&&A.name?A.name:A,I=I&&I.name?I.name:I,R=R&&R.name?R.name:R,y[A]=!0,y[I]=!0,y[R]=!0,l.patterns[_.id]={min:A,mid:I,max:R}}}return l}function T3(u,n,l,h,p){let y;if(p===function(_,w,A,I){let R=0;for(let D=w,N=A-I;D<A;D+=I)R+=(_[N]-_[D])*(_[D+1]+_[N+1]),N=D;return R}(u,n,l,h)>0)for(let _=n;_<l;_+=h)y=I3(_/h|0,u[_],u[_+1],y);else for(let _=l-h;_>=n;_-=h)y=I3(_/h|0,u[_],u[_+1],y);return y&&Sf(y,y.next)&&(Bv(y),y=y.next),y}function Ch(u,n){if(!u)return u;n||(n=u);let l,h=u;do if(l=!1,h.steiner||!Sf(h,h.next)&&di(h.prev,h,h.next)!==0)h=h.next;else{if(Bv(h),h=n=h.prev,h===h.next)break;l=!0}while(l||h!==n);return n}function Fv(u,n,l,h,p,y,_){if(!u)return;!_&&y&&function(A,I,R,D){let N=A;do N.z===0&&(N.z=hq(N.x,N.y,I,R,D)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==A);N.prevZ.nextZ=null,N.prevZ=null,function(j){let U,W=1;do{let X,ae=j;j=null;let me=null;for(U=0;ae;){U++;let le=ae,B=0;for(let ce=0;ce<W&&(B++,le=le.nextZ,le);ce++);let H=W;for(;B>0||H>0&&le;)B!==0&&(H===0||!le||ae.z<=le.z)?(X=ae,ae=ae.nextZ,B--):(X=le,le=le.nextZ,H--),me?me.nextZ=X:j=X,X.prevZ=me,me=X;ae=le}me.nextZ=null,W*=2}while(U>1)}(N)}(u,h,p,y);let w=u;for(;u.prev!==u.next;){let A=u.prev,I=u.next;if(y?N1e(u,h,p,y):z1e(u))n.push(A.i,u.i,I.i),Bv(u),u=I.next,w=I.next;else if((u=I)===w){_?_===1?Fv(u=B1e(Ch(u),n),n,l,h,p,y,2):_===2&&j1e(u,n,l,h,p,y):Fv(Ch(u),n,l,h,p,y,1);break}}}function z1e(u){let n=u.prev,l=u,h=u.next;if(di(n,l,h)>=0)return!1;let p=n.x,y=l.x,_=h.x,w=n.y,A=l.y,I=h.y,R=Math.min(p,y,_),D=Math.min(w,A,I),N=Math.max(p,y,_),j=Math.max(w,A,I),U=h.next;for(;U!==n;){if(U.x>=R&&U.x<=N&&U.y>=D&&U.y<=j&&zv(p,w,y,A,_,I,U.x,U.y)&&di(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function N1e(u,n,l,h){let p=u.prev,y=u,_=u.next;if(di(p,y,_)>=0)return!1;let w=p.x,A=y.x,I=_.x,R=p.y,D=y.y,N=_.y,j=Math.min(w,A,I),U=Math.min(R,D,N),W=Math.max(w,A,I),X=Math.max(R,D,N),ae=hq(j,U,n,l,h),me=hq(W,X,n,l,h),le=u.prevZ,B=u.nextZ;for(;le&&le.z>=ae&&B&&B.z<=me;){if(le.x>=j&&le.x<=W&&le.y>=U&&le.y<=X&&le!==p&&le!==_&&zv(w,R,A,D,I,N,le.x,le.y)&&di(le.prev,le,le.next)>=0||(le=le.prevZ,B.x>=j&&B.x<=W&&B.y>=U&&B.y<=X&&B!==p&&B!==_&&zv(w,R,A,D,I,N,B.x,B.y)&&di(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;le&&le.z>=ae;){if(le.x>=j&&le.x<=W&&le.y>=U&&le.y<=X&&le!==p&&le!==_&&zv(w,R,A,D,I,N,le.x,le.y)&&di(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;B&&B.z<=me;){if(B.x>=j&&B.x<=W&&B.y>=U&&B.y<=X&&B!==p&&B!==_&&zv(w,R,A,D,I,N,B.x,B.y)&&di(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function B1e(u,n){let l=u;do{let h=l.prev,p=l.next.next;!Sf(h,p)&&A3(h,l,l.next,p)&&Nv(h,p)&&Nv(p,h)&&(n.push(h.i,l.i,p.i),Bv(l),Bv(l.next),l=u=p),l=l.next}while(l!==u);return Ch(l)}function j1e(u,n,l,h,p,y){let _=u;do{let w=_.next.next;for(;w!==_.prev;){if(_.i!==w.i&&G1e(_,w)){let A=q3(_,w);return _=Ch(_,_.next),A=Ch(A,A.next),Fv(_,n,l,h,p,y,0),void Fv(A,n,l,h,p,y,0)}w=w.next}_=_.next}while(_!==u)}function U1e(u,n){let l=u.x-n.x;return l===0&&(l=u.y-n.y,l===0)&&(l=(u.next.y-u.y)/(u.next.x-u.x)-(n.next.y-n.y)/(n.next.x-n.x)),l}function V1e(u,n){let l=function(p,y){let _=y,w=p.x,A=p.y,I,R=-1/0;if(Sf(p,_))return _;do{if(Sf(p,_.next))return _.next;if(A<=_.y&&A>=_.next.y&&_.next.y!==_.y){let W=_.x+(A-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(W<=w&&W>R&&(R=W,I=_.x<_.next.x?_:_.next,W===w))return I}_=_.next}while(_!==y);if(!I)return null;let D=I,N=I.x,j=I.y,U=1/0;_=I;do{if(w>=_.x&&_.x>=N&&w!==_.x&&E3(A<j?w:R,A,N,j,A<j?R:w,A,_.x,_.y)){let W=Math.abs(A-_.y)/(w-_.x);Nv(_,p)&&(W<U||W===U&&(_.x>I.x||_.x===I.x&&$1e(I,_)))&&(I=_,U=W)}_=_.next}while(_!==D);return I}(u,n);if(!l)return n;let h=q3(l,u);return Ch(h,h.next),Ch(l,l.next)}function $1e(u,n){return di(u.prev,u,n.prev)<0&&di(n.next,u,u.next)<0}function hq(u,n,l,h,p){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*p|0)|u<<8))|u<<4))|u<<2))|u<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function W1e(u){let n=u,l=u;do(n.x<l.x||n.x===l.x&&n.y<l.y)&&(l=n),n=n.next;while(n!==u);return l}function E3(u,n,l,h,p,y,_,w){return(p-_)*(n-w)>=(u-_)*(y-w)&&(u-_)*(h-w)>=(l-_)*(n-w)&&(l-_)*(y-w)>=(p-_)*(h-w)}function zv(u,n,l,h,p,y,_,w){return!(u===_&&n===w)&&E3(u,n,l,h,p,y,_,w)}function G1e(u,n){return u.next.i!==n.i&&u.prev.i!==n.i&&!function(l,h){let p=l;do{if(p.i!==l.i&&p.next.i!==l.i&&p.i!==h.i&&p.next.i!==h.i&&A3(p,p.next,l,h))return!0;p=p.next}while(p!==l);return!1}(u,n)&&(Nv(u,n)&&Nv(n,u)&&function(l,h){let p=l,y=!1,_=(l.x+h.x)/2,w=(l.y+h.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&_<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(y=!y),p=p.next;while(p!==l);return y}(u,n)&&(di(u.prev,u,n.prev)||di(u,n.prev,n))||Sf(u,n)&&di(u.prev,u,u.next)>0&&di(n.prev,n,n.next)>0)}function di(u,n,l){return(n.y-u.y)*(l.x-n.x)-(n.x-u.x)*(l.y-n.y)}function Sf(u,n){return u.x===n.x&&u.y===n.y}function A3(u,n,l,h){let p=kx(di(u,n,l)),y=kx(di(u,n,h)),_=kx(di(l,h,u)),w=kx(di(l,h,n));return p!==y&&_!==w||!(p!==0||!Ox(u,l,n))||!(y!==0||!Ox(u,h,n))||!(_!==0||!Ox(l,u,h))||!(w!==0||!Ox(l,n,h))}function Ox(u,n,l){return n.x<=Math.max(u.x,l.x)&&n.x>=Math.min(u.x,l.x)&&n.y<=Math.max(u.y,l.y)&&n.y>=Math.min(u.y,l.y)}function kx(u){return u>0?1:u<0?-1:0}function Nv(u,n){return di(u.prev,u,u.next)<0?di(u,n,u.next)>=0&&di(u,u.prev,n)>=0:di(u,n,u.prev)<0||di(u,u.next,n)<0}function q3(u,n){let l=dq(u.i,u.x,u.y),h=dq(n.i,n.x,n.y),p=u.next,y=n.prev;return u.next=n,n.prev=u,l.next=p,p.prev=l,h.next=l,l.prev=h,y.next=h,h.prev=y,h}function I3(u,n,l,h){let p=dq(u,n,l);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Bv(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function dq(u,n,l){return{i:u,x:n,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Tf{constructor(n,l){if(l>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=l}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class Dx{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}Dx.noSubdivision=new Dx({fill:new Tf(0,0),line:new Tf(0,0),tile:new Tf(0,0),stencil:new Tf(0,0),circle:1}),ct("SubdivisionGranularityExpression",Tf),ct("SubdivisionGranularitySetting",Dx);let Ef=-32768,jv=32767;class Z1e{constructor(n,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=Lt/n,this._canonical=l}_getKey(n,l){return(n+=32768)<<16|(l+=32768)<<0}_vertexToIndex(n,l){if(n<-32768||l<-32768||n>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let h=0|Math.round(n),p=0|Math.round(l),y=this._getKey(h,p);if(this._vertexDictionary.has(y))return this._vertexDictionary.get(y);let _=this._vertexBuffer.length/2;return this._vertexDictionary.set(y,_),this._vertexBuffer.push(h,p),_}_subdivideTrianglesScanline(n){if(this._granularity<2)return function(p,y){let _=[];for(let w=0;w<y.length;w+=3){let A=y[w],I=y[w+1],R=y[w+2],D=p[2*A],N=p[2*A+1];(p[2*I]-D)*(p[2*R+1]-N)-(p[2*I+1]-N)*(p[2*R]-D)>0?(_.push(A),_.push(R),_.push(I)):(_.push(A),_.push(I),_.push(R))}return _}(this._vertexBuffer,n);let l=[],h=n.length;for(let p=0;p<h;p+=3){let y=[n[p+0],n[p+1],n[p+2]],_=[this._vertexBuffer[2*n[p+0]+0],this._vertexBuffer[2*n[p+0]+1],this._vertexBuffer[2*n[p+1]+0],this._vertexBuffer[2*n[p+1]+1],this._vertexBuffer[2*n[p+2]+0],this._vertexBuffer[2*n[p+2]+1]],w=1/0,A=1/0,I=-1/0,R=-1/0;for(let W=0;W<3;W++){let X=_[2*W],ae=_[2*W+1];w=Math.min(w,X),I=Math.max(I,X),A=Math.min(A,ae),R=Math.max(R,ae)}if(w===I||A===R)continue;let D=Math.floor(w/this._granularityCellSize),N=Math.ceil(I/this._granularityCellSize),j=Math.floor(A/this._granularityCellSize),U=Math.ceil(R/this._granularityCellSize);if(D!==N||j!==U)for(let W=j;W<U;W++){let X=this._scanlineGenerateVertexRingForCellRow(W,_,y);K1e(this._vertexBuffer,X,l)}else l.push(...y)}return l}_scanlineGenerateVertexRingForCellRow(n,l,h){let p=n*this._granularityCellSize,y=p+this._granularityCellSize,_=[];for(let w=0;w<3;w++){let A=l[2*w],I=l[2*w+1],R=l[2*(w+1)%6],D=l[(2*(w+1)+1)%6],N=l[2*(w+2)%6],j=l[(2*(w+2)+1)%6],U=R-A,W=D-I,X=U===0,ae=W===0,me=(p-I)/W,le=(y-I)/W,B=Math.min(me,le),H=Math.max(me,le);if(!ae&&(B>=1||H<=0)||ae&&(I<p||I>y)){D>=p&&D<=y&&_.push(h[(w+1)%3]);continue}!ae&&B>0&&_.push(this._vertexToIndex(A+U*B,I+W*B));let ce=A+U*Math.max(B,0),Ie=A+U*Math.min(H,1);X||this._generateIntraEdgeVertices(_,A,I,R,D,ce,Ie),!ae&&H<1&&_.push(this._vertexToIndex(A+U*H,I+W*H)),(ae||D>=p&&D<=y)&&_.push(h[(w+1)%3]),!ae&&(D<=p||D>=y)&&this._generateInterEdgeVertices(_,A,I,R,D,N,j,Ie,p,y)}return _}_generateIntraEdgeVertices(n,l,h,p,y,_,w){let A=p-l,I=y-h,R=I===0,D=R?Math.min(l,p):Math.min(_,w),N=R?Math.max(l,p):Math.max(_,w),j=Math.floor(D/this._granularityCellSize)+1,U=Math.ceil(N/this._granularityCellSize)-1;if(R?l<p:_<w)for(let W=j;W<=U;W++){let X=W*this._granularityCellSize;n.push(this._vertexToIndex(X,h+I*(X-l)/A))}else for(let W=U;W>=j;W--){let X=W*this._granularityCellSize;n.push(this._vertexToIndex(X,h+I*(X-l)/A))}}_generateInterEdgeVertices(n,l,h,p,y,_,w,A,I,R){let D=y-h,N=_-p,j=w-y,U=(I-y)/j,W=(R-y)/j,X=Math.min(U,W),ae=Math.max(U,W),me=p+N*X,le=Math.floor(Math.min(me,A)/this._granularityCellSize)+1,B=Math.ceil(Math.max(me,A)/this._granularityCellSize)-1,H=A<me,ce=j===0;if(ce&&(w===I||w===R))return;if(ce||X>=1||ae<=0){let $e=h-w,Me=_+(l-_)*Math.min((I-w)/$e,(R-w)/$e);le=Math.floor(Math.min(Me,A)/this._granularityCellSize)+1,B=Math.ceil(Math.max(Me,A)/this._granularityCellSize)-1,H=A<Me}let Ie=D>0?R:I;if(H)for(let $e=le;$e<=B;$e++)n.push(this._vertexToIndex($e*this._granularityCellSize,Ie));else for(let $e=B;$e>=le;$e--)n.push(this._vertexToIndex($e*this._granularityCellSize,Ie))}_generateOutline(n){let l=[];for(let h of n){let p=Mh(h,this._granularity,!0),y=this._pointArrayToIndices(p),_=[];for(let w=1;w<y.length;w++)_.push(y[w-1]),_.push(y[w]);l.push(_)}return l}_handlePoles(n){let l=!1,h=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(l||h)&&this._fillPoles(n,l,h)}_ensureNoPoleVertices(){let n=this._vertexBuffer;for(let l=0;l<n.length;l+=2){let h=n[l+1];h===Ef&&(n[l+1]=-32767),h===jv&&(n[l+1]=32766)}}_generatePoleQuad(n,l,h,p,y,_){p>y!=(_===Ef)?(n.push(l),n.push(h),n.push(this._vertexToIndex(p,_)),n.push(h),n.push(this._vertexToIndex(y,_)),n.push(this._vertexToIndex(p,_))):(n.push(h),n.push(l),n.push(this._vertexToIndex(p,_)),n.push(this._vertexToIndex(y,_)),n.push(h),n.push(this._vertexToIndex(p,_)))}_fillPoles(n,l,h){let p=this._vertexBuffer,y=Lt,_=n.length;for(let w=2;w<_;w+=3){let A=n[w-2],I=n[w-1],R=n[w],D=p[2*A],N=p[2*A+1],j=p[2*I],U=p[2*I+1],W=p[2*R],X=p[2*R+1];l&&(N===0&&U===0&&this._generatePoleQuad(n,A,I,D,j,Ef),U===0&&X===0&&this._generatePoleQuad(n,I,R,j,W,Ef),X===0&&N===0&&this._generatePoleQuad(n,R,A,W,D,Ef)),h&&(N===y&&U===y&&this._generatePoleQuad(n,A,I,D,j,jv),U===y&&X===y&&this._generatePoleQuad(n,I,R,j,W,jv),X===y&&N===y&&this._generatePoleQuad(n,R,A,W,D,jv))}}_initializeVertices(n){for(let l=0;l<n.length;l+=2)this._vertexToIndex(n[l],n[l+1])}subdividePolygonInternal(n,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:h,holeIndices:p}=function(w){let A=[],I=[];for(let R of w)if(R.length!==0){R!==w[0]&&A.push(I.length/2);for(let D=0;D<R.length;D++)I.push(R[D].x),I.push(R[D].y)}return{flattened:I,holeIndices:A}}(n),y;this._initializeVertices(h);try{let w=function(I,R,D=2){let N=R&&R.length,j=N?R[0]*D:I.length,U=T3(I,0,j,D,!0),W=[];if(!U||U.next===U.prev)return W;let X,ae,me;if(N&&(U=function(le,B,H,ce){let Ie=[];for(let $e=0,Me=B.length;$e<Me;$e++){let Fe=T3(le,B[$e]*ce,$e<Me-1?B[$e+1]*ce:le.length,ce,!1);Fe===Fe.next&&(Fe.steiner=!0),Ie.push(W1e(Fe))}Ie.sort(U1e);for(let $e=0;$e<Ie.length;$e++)H=V1e(Ie[$e],H);return H}(I,R,U,D)),I.length>80*D){X=1/0,ae=1/0;let le=-1/0,B=-1/0;for(let H=D;H<j;H+=D){let ce=I[H],Ie=I[H+1];ce<X&&(X=ce),Ie<ae&&(ae=Ie),ce>le&&(le=ce),Ie>B&&(B=Ie)}me=Math.max(le-X,B-ae),me=me!==0?32767/me:0}return Fv(U,W,D,X,ae,me,0),W}(h,p),A=this._convertIndices(h,w);y=this._subdivideTrianglesScanline(A)}catch(w){console.error(w)}let _=[];return l&&(_=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(y),{verticesFlattened:this._vertexBuffer,indicesTriangles:y,indicesLineList:_}}_convertIndices(n,l){let h=[];for(let p=0;p<l.length;p++)h.push(this._vertexToIndex(n[2*l[p]],n[2*l[p]+1]));return h}_pointArrayToIndices(n){let l=[];for(let h=0;h<n.length;h++){let p=n[h];l.push(this._vertexToIndex(p.x,p.y))}return l}}function P3(u,n,l,h=!0){return new Z1e(l,n).subdividePolygonInternal(u,h)}function Mh(u,n,l=!1){if(!u||u.length<1)return[];if(u.length<2)return[];let h=u[0],p=u[u.length-1],y=l&&(h.x!==p.x||h.y!==p.y);if(n<2)return y?[...u,u[0]]:[...u];let _=Math.floor(Lt/n),w=[];w.push(new z(u[0].x,u[0].y));let A=u.length,I=y?A:A-1;for(let R=0;R<I;R++){let D=u[R],N=R<A-1?u[R+1]:u[0],j=D.x,U=D.y,W=N.x,X=N.y,ae=j!==W,me=U!==X;if(!ae&&!me)continue;let le=W-j,B=X-U,H=Math.abs(le),ce=Math.abs(B),Ie=j,$e=U;for(;;){let Fe=le>0?(Math.floor(Ie/_)+1)*_:(Math.ceil(Ie/_)-1)*_,Ke=B>0?(Math.floor($e/_)+1)*_:(Math.ceil($e/_)-1)*_,We=Math.abs(Ie-Fe),He=Math.abs($e-Ke),Be=Math.abs(Ie-W),ht=Math.abs($e-X),Tt=ae?We/H:Number.POSITIVE_INFINITY,bt=me?He/ce:Number.POSITIVE_INFINITY;if((Be<=We||!ae)&&(ht<=He||!me))break;if(Tt<bt&&ae||!me){Ie=Fe,$e+=B*Tt;let pt=new z(Ie,Math.round($e));w[w.length-1].x===pt.x&&w[w.length-1].y===pt.y||w.push(pt)}else{Ie+=le*bt,$e=Ke;let pt=new z(Math.round(Ie),$e);w[w.length-1].x===pt.x&&w[w.length-1].y===pt.y||w.push(pt)}}let Me=new z(W,X);w[w.length-1].x===Me.x&&w[w.length-1].y===Me.y||w.push(Me)}return w}function K1e(u,n,l){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,p=u[2*n[0]];for(let A=1;A<n.length;A++){let I=u[2*n[A]];I<p&&(p=I,h=A)}let y=n.length,_=h,w=(_+1)%y;for(;;){let A=_-1>=0?_-1:y-1,I=(w+1)%y,R=u[2*n[A]],D=u[2*n[I]],N=u[2*n[_]],j=u[2*n[_]+1],U=u[2*n[w]+1],W=!1;if(R<D)W=!0;else if(R>D)W=!1;else{let X=U-j,ae=-(u[2*n[w]]-N),me=j<U?1:-1;((R-N)*X+(u[2*n[A]+1]-j)*ae)*me>((D-N)*X+(u[2*n[I]+1]-j)*ae)*me&&(W=!0)}if(W){let X=n[A],ae=n[_],me=n[w];X!==ae&&X!==me&&ae!==me&&l.push(me,ae,X),_--,_<0&&(_=y-1)}else{let X=n[I],ae=n[_],me=n[w];X!==ae&&X!==me&&ae!==me&&l.push(me,ae,X),w++,w>=y&&(w=0)}if(A===I)break}}function C3(u,n,l,h,p,y,_,w,A){let I=p.length/2,R=_&&w&&A;if(I<dr.MAX_VERTEX_ARRAY_LENGTH){let D=n.prepareSegment(I,l,h),N=D.vertexLength;for(let W=0;W<y.length;W+=3)h.emplaceBack(N+y[W],N+y[W+1],N+y[W+2]);let j,U;D.vertexLength+=I,D.primitiveLength+=y.length/3,R&&(U=_.prepareSegment(I,l,w),j=U.vertexLength,U.vertexLength+=I);for(let W=0;W<p.length;W+=2)u(p[W],p[W+1]);if(R)for(let W=0;W<A.length;W++){let X=A[W];for(let ae=1;ae<X.length;ae+=2)w.emplaceBack(j+X[ae-1],j+X[ae]);U.primitiveLength+=X.length/2}}else(function(D,N,j,U,W,X){let ae=[];for(let ce=0;ce<U.length/2;ce++)ae.push(-1);let me={count:0},le=0,B=D.getOrCreateLatestSegment(N,j),H=B.vertexLength;for(let ce=2;ce<W.length;ce+=3){let Ie=W[ce-2],$e=W[ce-1],Me=W[ce],Fe=ae[Ie]<le,Ke=ae[$e]<le,We=ae[Me]<le;B.vertexLength+((Fe?1:0)+(Ke?1:0)+(We?1:0))>dr.MAX_VERTEX_ARRAY_LENGTH&&(B=D.createNewSegment(N,j),le=me.count,Fe=!0,Ke=!0,We=!0,H=0);let He=Uv(ae,U,X,me,Ie,Fe,B),Be=Uv(ae,U,X,me,$e,Ke,B),ht=Uv(ae,U,X,me,Me,We,B);j.emplaceBack(H+He-le,H+Be-le,H+ht-le),B.primitiveLength++}})(n,l,h,p,y,u),R&&function(D,N,j,U,W,X){let ae=[];for(let ce=0;ce<U.length/2;ce++)ae.push(-1);let me={count:0},le=0,B=D.getOrCreateLatestSegment(N,j),H=B.vertexLength;for(let ce=0;ce<W.length;ce++){let Ie=W[ce];for(let $e=1;$e<W[ce].length;$e+=2){let Me=Ie[$e-1],Fe=Ie[$e],Ke=ae[Me]<le,We=ae[Fe]<le;B.vertexLength+((Ke?1:0)+(We?1:0))>dr.MAX_VERTEX_ARRAY_LENGTH&&(B=D.createNewSegment(N,j),le=me.count,Ke=!0,We=!0,H=0);let He=Uv(ae,U,X,me,Me,Ke,B),Be=Uv(ae,U,X,me,Fe,We,B);j.emplaceBack(H+He-le,H+Be-le),B.primitiveLength++}}}(_,l,w,p,A,u),n.forceNewSegmentOnNextPrepare(),_==null||_.forceNewSegmentOnNextPrepare()}function Uv(u,n,l,h,p,y,_){if(y){let w=h.count;return l(n[2*p],n[2*p+1]),u[p]=h.count,h.count++,_.vertexLength++,w}return u[p]}class fq{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ye,this.indexArray=new hr,this.indexArray2=new Ai,this.programConfigurations=new Ds(n.layers,n.zoom),this.segments=new dr,this.segments2=new dr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=uq("fill",this.layers,l);let p=this.layers[0].layout.get("fill-sort-key"),y=!p.isConstant(),_=[];for(let{feature:w,id:A,index:I,sourceLayerIndex:R}of n){let D=this.layers[0]._featureFilter.needGeometry,N=Ih(w,D);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),N,h))continue;let j=y?p.evaluate(N,{},h,l.availableImages):void 0,U={id:A,properties:w.properties,type:w.type,sourceLayerIndex:R,index:I,geometry:D?N.geometry:qh(w),patterns:{},sortKey:j};_.push(U)}y&&_.sort((w,A)=>w.sortKey-A.sortKey);for(let w of _){let{geometry:A,index:I,sourceLayerIndex:R}=w;if(this.hasPattern){let D=cq("fill",this.layers,w,this.zoom,l);this.patternFeatures.push(D)}else this.addFeature(w,A,I,h,{},l.subdivisionGranularity);l.featureIndex.insert(n[I].feature,A,I,R,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,l,h,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,F1e),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,l,h,p,y,_){for(let w of Gd(l,500)){let A=P3(w,p,_.fill.getGranularityForZoomLevel(p.z)),I=this.layoutVertexArray;C3((R,D)=>{I.emplaceBack(R,D)},this.segments,this.layoutVertexArray,this.indexArray,A.verticesFlattened,A.indicesTriangles,this.segments2,this.indexArray2,A.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,p)}}let M3,R3;ct("FillBucket",fq,{omit:["layers","patternFeatures"]});var H1e={get paint(){return R3=R3||new pi({"fill-antialias":new vt(J.paint_fill["fill-antialias"]),"fill-opacity":new It(J.paint_fill["fill-opacity"]),"fill-color":new It(J.paint_fill["fill-color"]),"fill-outline-color":new It(J.paint_fill["fill-outline-color"]),"fill-translate":new vt(J.paint_fill["fill-translate"]),"fill-translate-anchor":new vt(J.paint_fill["fill-translate-anchor"]),"fill-pattern":new wh(J.paint_fill["fill-pattern"])})},get layout(){return M3=M3||new pi({"fill-sort-key":new It(J.layout_fill["fill-sort-key"])})}};class X1e extends qa{constructor(n){super(n,H1e)}recalculate(n,l){super.recalculate(n,l);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new fq(n)}queryRadius(){return Mx(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:l,transform:h,pixelsToTileUnits:p}){return f3(Rx(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,p),l)}isTileClipped(){return!0}}let J1e=Nr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Y1e=Nr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Q1e}=J1e;var pq,O3,mq,k3,vq,D3,L3,Lx={};function F3(){if(O3)return pq;O3=1;var u=P();function n(p,y,_,w,A){this.properties={},this.extent=_,this.type=0,this._pbf=p,this._geometry=-1,this._keys=w,this._values=A,p.readFields(l,this,y)}function l(p,y,_){p==1?y.id=_.readVarint():p==2?function(w,A){for(var I=w.readVarint()+w.pos;w.pos<I;){var R=A._keys[w.readVarint()],D=A._values[w.readVarint()];A.properties[R]=D}}(_,y):p==3?y.type=_.readVarint():p==4&&(y._geometry=_.pos)}function h(p){for(var y,_,w=0,A=0,I=p.length,R=I-1;A<I;R=A++)w+=((_=p[R]).x-(y=p[A]).x)*(y.y+_.y);return w}return pq=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var p=this._pbf;p.pos=this._geometry;for(var y,_=p.readVarint()+p.pos,w=1,A=0,I=0,R=0,D=[];p.pos<_;){if(A<=0){var N=p.readVarint();w=7&N,A=N>>3}if(A--,w===1||w===2)I+=p.readSVarint(),R+=p.readSVarint(),w===1&&(y&&D.push(y),y=[]),y.push(new u(I,R));else{if(w!==7)throw new Error("unknown command "+w);y&&y.push(y[0].clone())}}return y&&D.push(y),D},n.prototype.bbox=function(){var p=this._pbf;p.pos=this._geometry;for(var y=p.readVarint()+p.pos,_=1,w=0,A=0,I=0,R=1/0,D=-1/0,N=1/0,j=-1/0;p.pos<y;){if(w<=0){var U=p.readVarint();_=7&U,w=U>>3}if(w--,_===1||_===2)(A+=p.readSVarint())<R&&(R=A),A>D&&(D=A),(I+=p.readSVarint())<N&&(N=I),I>j&&(j=I);else if(_!==7)throw new Error("unknown command "+_)}return[R,N,D,j]},n.prototype.toGeoJSON=function(p,y,_){var w,A,I=this.extent*Math.pow(2,_),R=this.extent*p,D=this.extent*y,N=this.loadGeometry(),j=n.types[this.type];function U(ae){for(var me=0;me<ae.length;me++){var le=ae[me];ae[me]=[360*(le.x+R)/I-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+D)/I)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(w=0;w<N.length;w++)W[w]=N[w][0];U(N=W);break;case 2:for(w=0;w<N.length;w++)U(N[w]);break;case 3:for(N=function(ae){var me=ae.length;if(me<=1)return[ae];for(var le,B,H=[],ce=0;ce<me;ce++){var Ie=h(ae[ce]);Ie!==0&&(B===void 0&&(B=Ie<0),B===Ie<0?(le&&H.push(le),le=[ae[ce]]):le.push(ae[ce]))}return le&&H.push(le),H}(N),w=0;w<N.length;w++)for(A=0;A<N[w].length;A++)U(N[w][A])}N.length===1?N=N[0]:j="Multi"+j;var X={type:"Feature",geometry:{type:j,coordinates:N},properties:this.properties};return"id"in this&&(X.id=this.id),X},pq}function z3(){if(k3)return mq;k3=1;var u=F3();function n(h,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(l,this,p),this.length=this._features.length}function l(h,p,y){h===15?p.version=y.readVarint():h===1?p.name=y.readString():h===5?p.extent=y.readVarint():h===2?p._features.push(y.pos):h===3?p._keys.push(y.readString()):h===4&&p._values.push(function(_){for(var w=null,A=_.readVarint()+_.pos;_.pos<A;){var I=_.readVarint()>>3;w=I===1?_.readString():I===2?_.readFloat():I===3?_.readDouble():I===4?_.readVarint64():I===5?_.readVarint():I===6?_.readSVarint():I===7?_.readBoolean():null}return w}(y))}return mq=n,n.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var p=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,p,this.extent,this._keys,this._values)},mq}function N3(){return L3||(L3=1,Lx.VectorTile=function(){if(D3)return vq;D3=1;var u=z3();function n(l,h,p){if(l===3){var y=new u(p,p.readVarint()+p.pos);y.length&&(h[y.name]=y)}}return vq=function(l,h){this.layers=l.readFields(n,{},h)},vq}(),Lx.VectorTileFeature=F3(),Lx.VectorTileLayer=z3()),Lx}var Vv=g(N3());let ewe=Vv.VectorTileFeature.types,gq=Math.pow(2,13);function $v(u,n,l,h,p,y,_,w){u.emplaceBack(n,l,2*Math.floor(h*gq)+_,p*gq*2,y*gq*2,Math.round(w))}class yq{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ge,this.centroidVertexArray=new De,this.indexArray=new hr,this.programConfigurations=new Ds(n.layers,n.zoom),this.segments=new dr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.features=[],this.hasPattern=uq("fill-extrusion",this.layers,l);for(let{feature:p,id:y,index:_,sourceLayerIndex:w}of n){let A=this.layers[0]._featureFilter.needGeometry,I=Ih(p,A);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),I,h))continue;let R={id:y,sourceLayerIndex:w,index:_,geometry:A?I.geometry:qh(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(cq("fill-extrusion",this.layers,R,this.zoom,l)):this.addFeature(R,R.geometry,_,h,{},l.subdivisionGranularity),l.featureIndex.insert(p,R.geometry,_,w,this.index,!0)}}addFeatures(n,l,h){for(let p of this.features){let{geometry:y}=p;this.addFeature(p,y,p.index,l,h,n.subdivisionGranularity)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Q1e),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Y1e.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,l,h,p,y,_){for(let w of Gd(l,500)){let A={x:0,y:0,sampleCount:0},I=this.layoutVertexArray.length;this.processPolygon(A,p,n,w,_);let R=this.layoutVertexArray.length-I,D=Math.floor(A.x/A.sampleCount),N=Math.floor(A.y/A.sampleCount);for(let j=0;j<R;j++)this.centroidVertexArray.emplaceBack(D,N)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,p)}processPolygon(n,l,h,p,y){if(p.length<1||B3(p[0]))return;for(let D of p)D.length!==0&&twe(n,D);let _={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},w=y.fill.getGranularityForZoomLevel(l.z),A=ewe[h.type]==="Polygon";for(let D of p){if(D.length===0||B3(D))continue;let N=Mh(D,w,A);this._generateSideFaces(N,_)}if(!A)return;let I=P3(p,l,w,!1),R=this.layoutVertexArray;C3((D,N)=>{$v(R,D,N,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles)}_generateSideFaces(n,l){let h=0;for(let p=1;p<n.length;p++){let y=n[p],_=n[p-1];if(rwe(y,_))continue;l.segment.vertexLength+4>dr.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let w=y.sub(_)._perp()._unit(),A=_.dist(y);h+A>32768&&(h=0),$v(this.layoutVertexArray,y.x,y.y,w.x,w.y,0,0,h),$v(this.layoutVertexArray,y.x,y.y,w.x,w.y,0,1,h),h+=A,$v(this.layoutVertexArray,_.x,_.y,w.x,w.y,0,0,h),$v(this.layoutVertexArray,_.x,_.y,w.x,w.y,0,1,h);let I=l.segment.vertexLength;this.indexArray.emplaceBack(I,I+2,I+1),this.indexArray.emplaceBack(I+1,I+2,I+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function twe(u,n){for(let l=0;l<n.length;l++){let h=n[l];l===n.length-1&&n[0].x===h.x&&n[0].y===h.y||(u.x+=h.x,u.y+=h.y,u.sampleCount++)}}function rwe(u,n){return u.x===n.x&&(u.x<0||u.x>Lt)||u.y===n.y&&(u.y<0||u.y>Lt)}function B3(u){return u.every(n=>n.x<0)||u.every(n=>n.x>Lt)||u.every(n=>n.y<0)||u.every(n=>n.y>Lt)}let j3;ct("FillExtrusionBucket",yq,{omit:["layers","features"]});var iwe={get paint(){return j3=j3||new pi({"fill-extrusion-opacity":new vt(J["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new It(J["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vt(J["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vt(J["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wh(J["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new It(J["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new It(J["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vt(J["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class nwe extends qa{constructor(n){super(n,iwe)}createBucket(n){return new yq(n)}queryRadius(){return Mx(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:l,featureState:h,geometry:p,transform:y,pixelsToTileUnits:_,pixelPosMatrix:w}){let A=Rx(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-y.bearingInRadians,_),I=this.paint.get("fill-extrusion-height").evaluate(l,h),R=this.paint.get("fill-extrusion-base").evaluate(l,h),D=function(j,U,W){let X=[];for(let ae of j){let me=[ae.x,ae.y,0,1];wt(me,me,U),X.push(new z(me[0]/me[3],me[1]/me[3]))}return X}(A,w),N=function(j,U,W,X){let ae=[],me=[],le=X[8]*U,B=X[9]*U,H=X[10]*U,ce=X[11]*U,Ie=X[8]*W,$e=X[9]*W,Me=X[10]*W,Fe=X[11]*W;for(let Ke of j){let We=[],He=[];for(let Be of Ke){let ht=Be.x,Tt=Be.y,bt=X[0]*ht+X[4]*Tt+X[12],pt=X[1]*ht+X[5]*Tt+X[13],er=X[2]*ht+X[6]*Tt+X[14],Qr=X[3]*ht+X[7]*Tt+X[15],Ii=er+H,hn=Qr+ce,eo=bt+Ie,ca=pt+$e,Hi=er+Me,Vr=Qr+Fe,Fi=new z((bt+le)/hn,(pt+B)/hn);Fi.z=Ii/hn,We.push(Fi);let Xi=new z(eo/Vr,ca/Vr);Xi.z=Hi/Vr,He.push(Xi)}ae.push(We),me.push(He)}return[ae,me]}(p,R,I,w);return function(j,U,W){let X=1/0;f3(W,U)&&(X=U3(W,U[0]));for(let ae=0;ae<U.length;ae++){let me=U[ae],le=j[ae];for(let B=0;B<me.length-1;B++){let H=me[B],ce=[H,me[B+1],le[B+1],le[B],H];d3(W,ce)&&(X=Math.min(X,U3(W,ce)))}}return X!==1/0&&X}(N[0],N[1],D)}}function Wv(u,n){return u.x*n.x+u.y*n.y}function U3(u,n){if(u.length===1){let l=0,h=n[l++],p;for(;!p||h.equals(p);)if(p=n[l++],!p)return 1/0;for(;l<n.length;l++){let y=n[l],_=u[0],w=p.sub(h),A=y.sub(h),I=_.sub(h),R=Wv(w,w),D=Wv(w,A),N=Wv(A,A),j=Wv(I,w),U=Wv(I,A),W=R*N-D*D,X=(N*j-D*U)/W,ae=(R*U-D*j)/W,me=h.z*(1-X-ae)+p.z*X+y.z*ae;if(isFinite(me))return me}return 1/0}{let l=1/0;for(let h of n)l=Math.min(l,h.z);return l}}let awe=Nr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:owe}=awe,swe=Nr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:lwe}=swe,uwe=Vv.VectorTileFeature.types,cwe=Math.cos(Math.PI/180*37.5),V3=Math.pow(2,14)/.5;class _q{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new ft,this.layoutVertexArray2=new Wt,this.indexArray=new hr,this.programConfigurations=new Ds(n.layers,n.zoom),this.segments=new dr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=uq("line",this.layers,l);let p=this.layers[0].layout.get("line-sort-key"),y=!p.isConstant(),_=[];for(let{feature:w,id:A,index:I,sourceLayerIndex:R}of n){let D=this.layers[0]._featureFilter.needGeometry,N=Ih(w,D);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),N,h))continue;let j=y?p.evaluate(N,{},h):void 0,U={id:A,properties:w.properties,type:w.type,sourceLayerIndex:R,index:I,geometry:D?N.geometry:qh(w),patterns:{},sortKey:j};_.push(U)}y&&_.sort((w,A)=>w.sortKey-A.sortKey);for(let w of _){let{geometry:A,index:I,sourceLayerIndex:R}=w;if(this.hasPattern){let D=cq("line",this.layers,w,this.zoom,l);this.patternFeatures.push(D)}else this.addFeature(w,A,I,h,{},l.subdivisionGranularity);l.featureIndex.insert(n[I].feature,A,I,R,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,l,h,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,lwe)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,owe),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,l,h,p,y,_){let w=this.layers[0].layout,A=w.get("line-join").evaluate(n,{}),I=w.get("line-cap"),R=w.get("line-miter-limit"),D=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(let N of l)this.addLine(N,n,A,I,R,D,p,_);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,p)}addLine(n,l,h,p,y,_,w,A){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=Mh(n,w?A.line.getGranularityForZoomLevel(w.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<n.length-1;le++)this.totalDistance+=n[le].dist(n[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let I=uwe[l.type]==="Polygon",R=n.length;for(;R>=2&&n[R-1].equals(n[R-2]);)R--;let D=0;for(;D<R-1&&n[D].equals(n[D+1]);)D++;if(R<(I?3:2))return;h==="bevel"&&(y=1.05);let N=this.overscaling<=16?15*Lt/(512*this.overscaling):0,j=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray),U,W,X,ae,me;this.e1=this.e2=-1,I&&(U=n[R-2],me=n[D].sub(U)._unit()._perp());for(let le=D;le<R;le++){if(X=le===R-1?I?n[D+1]:void 0:n[le+1],X&&n[le].equals(X))continue;me&&(ae=me),U&&(W=U),U=n[le],me=X?X.sub(U)._unit()._perp():ae,ae=ae||me;let B=ae.add(me);B.x===0&&B.y===0||B._unit();let H=ae.x*me.x+ae.y*me.y,ce=B.x*me.x+B.y*me.y,Ie=ce!==0?1/ce:1/0,$e=2*Math.sqrt(2-2*ce),Me=ce<cwe&&W&&X,Fe=ae.x*me.y-ae.y*me.x>0;if(Me&&le>D){let He=U.dist(W);if(He>2*N){let Be=U.sub(U.sub(W)._mult(N/He)._round());this.updateDistance(W,Be),this.addCurrentVertex(Be,ae,0,0,j),W=Be}}let Ke=W&&X,We=Ke?h:I?"butt":p;if(Ke&&We==="round"&&(Ie<_?We="miter":Ie<=2&&(We="fakeround")),We==="miter"&&Ie>y&&(We="bevel"),We==="bevel"&&(Ie>2&&(We="flipbevel"),Ie<y&&(We="miter")),W&&this.updateDistance(W,U),We==="miter")B._mult(Ie),this.addCurrentVertex(U,B,0,0,j);else if(We==="flipbevel"){if(Ie>100)B=me.mult(-1);else{let He=Ie*ae.add(me).mag()/ae.sub(me).mag();B._perp()._mult(He*(Fe?-1:1))}this.addCurrentVertex(U,B,0,0,j),this.addCurrentVertex(U,B.mult(-1),0,0,j)}else if(We==="bevel"||We==="fakeround"){let He=-Math.sqrt(Ie*Ie-1),Be=Fe?He:0,ht=Fe?0:He;if(W&&this.addCurrentVertex(U,ae,Be,ht,j),We==="fakeround"){let Tt=Math.round(180*$e/Math.PI/20);for(let bt=1;bt<Tt;bt++){let pt=bt/Tt;if(pt!==.5){let Qr=pt-.5;pt+=pt*Qr*(pt-1)*((1.0904+H*(H*(3.55645-1.43519*H)-3.2452))*Qr*Qr+(.848013+H*(.215638*H-1.06021)))}let er=me.sub(ae)._mult(pt)._add(ae)._unit()._mult(Fe?-1:1);this.addHalfVertex(U,er.x,er.y,!1,Fe,0,j)}}X&&this.addCurrentVertex(U,me,-Be,-ht,j)}else if(We==="butt")this.addCurrentVertex(U,B,0,0,j);else if(We==="square"){let He=W?1:-1;this.addCurrentVertex(U,B,He,He,j)}else We==="round"&&(W&&(this.addCurrentVertex(U,ae,0,0,j),this.addCurrentVertex(U,ae,1,1,j,!0)),X&&(this.addCurrentVertex(U,me,-1,-1,j,!0),this.addCurrentVertex(U,me,0,0,j)));if(Me&&le<R-1){let He=U.dist(X);if(He>2*N){let Be=U.add(X.sub(U)._mult(N/He)._round());this.updateDistance(U,Be),this.addCurrentVertex(Be,me,0,0,j),U=Be}}}}addCurrentVertex(n,l,h,p,y,_=!1){let w=l.y*p-l.x,A=-l.y-l.x*p;this.addHalfVertex(n,l.x+l.y*h,l.y-l.x*h,_,!1,h,y),this.addHalfVertex(n,w,A,_,!0,-p,y),this.distance>V3/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,l,h,p,y,_))}addHalfVertex({x:n,y:l},h,p,y,_,w,A){let I=.5*(this.lineClips?this.scaledDistance*(V3-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(y?1:0),(l<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let R=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,R,this.e2),A.primitiveLength++),_?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,l){this.distance+=n.dist(l),this.updateScaledDistance()}}let $3,W3;ct("LineBucket",_q,{omit:["layers","patternFeatures"]});var G3={get paint(){return W3=W3||new pi({"line-opacity":new It(J.paint_line["line-opacity"]),"line-color":new It(J.paint_line["line-color"]),"line-translate":new vt(J.paint_line["line-translate"]),"line-translate-anchor":new vt(J.paint_line["line-translate-anchor"]),"line-width":new It(J.paint_line["line-width"]),"line-gap-width":new It(J.paint_line["line-gap-width"]),"line-offset":new It(J.paint_line["line-offset"]),"line-blur":new It(J.paint_line["line-blur"]),"line-dasharray":new qv(J.paint_line["line-dasharray"]),"line-pattern":new wh(J.paint_line["line-pattern"]),"line-gradient":new Iv(J.paint_line["line-gradient"])})},get layout(){return $3=$3||new pi({"line-cap":new vt(J.layout_line["line-cap"]),"line-join":new It(J.layout_line["line-join"]),"line-miter-limit":new vt(J.layout_line["line-miter-limit"]),"line-round-limit":new vt(J.layout_line["line-round-limit"]),"line-sort-key":new It(J.layout_line["line-sort-key"])})}};class hwe extends It{possiblyEvaluate(n,l){return l=new Cr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(n,l)}evaluate(n,l,h,p){return l=an({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(n,l,h,p)}}let Fx;class dwe extends qa{constructor(n){super(n,G3),this.gradientVersion=0,Fx||(Fx=new hwe(G3.paint.properties["line-width"].specification),Fx.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){let l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof qs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,l){super.recalculate(n,l),this.paint._values["line-floorwidth"]=Fx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new _q(n)}queryRadius(n){let l=n,h=Z3(Dv("line-width",this,l),Dv("line-gap-width",this,l)),p=Dv("line-offset",this,l);return h/2+Math.abs(p)+Mx(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:l,featureState:h,geometry:p,transform:y,pixelsToTileUnits:_}){let w=Rx(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-y.bearingInRadians,_),A=_/2*Z3(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),I=this.paint.get("line-offset").evaluate(l,h);return I&&(p=function(R,D){let N=[];for(let j=0;j<R.length;j++){let U=R[j],W=[];for(let X=0;X<U.length;X++){let ae=U[X-1],me=U[X],le=U[X+1],B=X===0?new z(0,0):me.sub(ae)._unit()._perp(),H=X===U.length-1?new z(0,0):le.sub(me)._unit()._perp(),ce=B._add(H)._unit(),Ie=ce.x*H.x+ce.y*H.y;Ie!==0&&ce._mult(1/Ie),W.push(ce._mult(D)._add(me))}N.push(W)}return N}(p,I*_)),function(R,D,N){for(let j=0;j<D.length;j++){let U=D[j];if(R.length>=3){for(let W=0;W<U.length;W++)if(Ph(R,U[W]))return!0}if(q1e(R,U,N))return!0}return!1}(w,p,A)}isTileClipped(){return!0}}function Z3(u,n){return n>0?n+2*u:u}let fwe=Nr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),pwe=Nr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Nr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let mwe=Nr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Nr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let K3=Nr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),vwe=Nr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gwe(u,n,l){return u.sections.forEach(h=>{h.text=function(p,y,_){let w=y.layout.get("text-transform").evaluate(_,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),Ho.applyArabicShaping&&(p=Ho.applyArabicShaping(p)),p}(h.text,n,l)}),u}Nr([{name:"triangle",components:3,type:"Uint16"}]),Nr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Nr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Nr([{type:"Float32",name:"offsetX"}]),Nr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Nr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Gv={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var H3,xq,X3,qi=24,bq={};function ywe(){return H3||(H3=1,bq.read=function(u,n,l,h,p){var y,_,w=8*p-h-1,A=(1<<w)-1,I=A>>1,R=-7,D=l?p-1:0,N=l?-1:1,j=u[n+D];for(D+=N,y=j&(1<<-R)-1,j>>=-R,R+=w;R>0;y=256*y+u[n+D],D+=N,R-=8);for(_=y&(1<<-R)-1,y>>=-R,R+=h;R>0;_=256*_+u[n+D],D+=N,R-=8);if(y===0)y=1-I;else{if(y===A)return _?NaN:1/0*(j?-1:1);_+=Math.pow(2,h),y-=I}return(j?-1:1)*_*Math.pow(2,y-h)},bq.write=function(u,n,l,h,p,y){var _,w,A,I=8*y-p-1,R=(1<<I)-1,D=R>>1,N=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=h?0:y-1,U=h?1:-1,W=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,_=R):(_=Math.floor(Math.log(n)/Math.LN2),n*(A=Math.pow(2,-_))<1&&(_--,A*=2),(n+=_+D>=1?N/A:N*Math.pow(2,1-D))*A>=2&&(_++,A/=2),_+D>=R?(w=0,_=R):_+D>=1?(w=(n*A-1)*Math.pow(2,p),_+=D):(w=n*Math.pow(2,D-1)*Math.pow(2,p),_=0));p>=8;u[l+j]=255&w,j+=U,w/=256,p-=8);for(_=_<<p|w,I+=p;I>0;u[l+j]=255&_,j+=U,_/=256,I-=8);u[l+j-U]|=128*W}),bq}function J3(){if(X3)return xq;X3=1,xq=n;var u=ywe();function n(B){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(B)?B:new Uint8Array(B||0),this.pos=0,this.type=0,this.length=this.buf.length}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var l=4294967296,h=1/l,p=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function y(B){return B.type===n.Bytes?B.readVarint()+B.pos:B.pos+1}function _(B,H,ce){return ce?4294967296*H+(B>>>0):4294967296*(H>>>0)+(B>>>0)}function w(B,H,ce){var Ie=H<=16383?1:H<=2097151?2:H<=268435455?3:Math.floor(Math.log(H)/(7*Math.LN2));ce.realloc(Ie);for(var $e=ce.pos-1;$e>=B;$e--)ce.buf[$e+Ie]=ce.buf[$e]}function A(B,H){for(var ce=0;ce<B.length;ce++)H.writeVarint(B[ce])}function I(B,H){for(var ce=0;ce<B.length;ce++)H.writeSVarint(B[ce])}function R(B,H){for(var ce=0;ce<B.length;ce++)H.writeFloat(B[ce])}function D(B,H){for(var ce=0;ce<B.length;ce++)H.writeDouble(B[ce])}function N(B,H){for(var ce=0;ce<B.length;ce++)H.writeBoolean(B[ce])}function j(B,H){for(var ce=0;ce<B.length;ce++)H.writeFixed32(B[ce])}function U(B,H){for(var ce=0;ce<B.length;ce++)H.writeSFixed32(B[ce])}function W(B,H){for(var ce=0;ce<B.length;ce++)H.writeFixed64(B[ce])}function X(B,H){for(var ce=0;ce<B.length;ce++)H.writeSFixed64(B[ce])}function ae(B,H){return(B[H]|B[H+1]<<8|B[H+2]<<16)+16777216*B[H+3]}function me(B,H,ce){B[ce]=H,B[ce+1]=H>>>8,B[ce+2]=H>>>16,B[ce+3]=H>>>24}function le(B,H){return(B[H]|B[H+1]<<8|B[H+2]<<16)+(B[H+3]<<24)}return n.prototype={destroy:function(){this.buf=null},readFields:function(B,H,ce){for(ce=ce||this.length;this.pos<ce;){var Ie=this.readVarint(),$e=Ie>>3,Me=this.pos;this.type=7&Ie,B($e,H,this),this.pos===Me&&this.skip(Ie)}return H},readMessage:function(B,H){return this.readFields(B,H,this.readVarint()+this.pos)},readFixed32:function(){var B=ae(this.buf,this.pos);return this.pos+=4,B},readSFixed32:function(){var B=le(this.buf,this.pos);return this.pos+=4,B},readFixed64:function(){var B=ae(this.buf,this.pos)+ae(this.buf,this.pos+4)*l;return this.pos+=8,B},readSFixed64:function(){var B=ae(this.buf,this.pos)+le(this.buf,this.pos+4)*l;return this.pos+=8,B},readFloat:function(){var B=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,B},readDouble:function(){var B=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,B},readVarint:function(B){var H,ce,Ie=this.buf;return H=127&(ce=Ie[this.pos++]),ce<128?H:(H|=(127&(ce=Ie[this.pos++]))<<7,ce<128?H:(H|=(127&(ce=Ie[this.pos++]))<<14,ce<128?H:(H|=(127&(ce=Ie[this.pos++]))<<21,ce<128?H:function($e,Me,Fe){var Ke,We,He=Fe.buf;if(Ke=(112&(We=He[Fe.pos++]))>>4,We<128||(Ke|=(127&(We=He[Fe.pos++]))<<3,We<128)||(Ke|=(127&(We=He[Fe.pos++]))<<10,We<128)||(Ke|=(127&(We=He[Fe.pos++]))<<17,We<128)||(Ke|=(127&(We=He[Fe.pos++]))<<24,We<128)||(Ke|=(1&(We=He[Fe.pos++]))<<31,We<128))return _($e,Ke,Me);throw new Error("Expected varint not more than 10 bytes")}(H|=(15&(ce=Ie[this.pos]))<<28,B,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var B=this.readVarint();return B%2==1?(B+1)/-2:B/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var B=this.readVarint()+this.pos,H=this.pos;return this.pos=B,B-H>=12&&p?function(ce,Ie,$e){return p.decode(ce.subarray(Ie,$e))}(this.buf,H,B):function(ce,Ie,$e){for(var Me="",Fe=Ie;Fe<$e;){var Ke,We,He,Be=ce[Fe],ht=null,Tt=Be>239?4:Be>223?3:Be>191?2:1;if(Fe+Tt>$e)break;Tt===1?Be<128&&(ht=Be):Tt===2?(192&(Ke=ce[Fe+1]))==128&&(ht=(31&Be)<<6|63&Ke)<=127&&(ht=null):Tt===3?(We=ce[Fe+2],(192&(Ke=ce[Fe+1]))==128&&(192&We)==128&&((ht=(15&Be)<<12|(63&Ke)<<6|63&We)<=2047||ht>=55296&&ht<=57343)&&(ht=null)):Tt===4&&(We=ce[Fe+2],He=ce[Fe+3],(192&(Ke=ce[Fe+1]))==128&&(192&We)==128&&(192&He)==128&&((ht=(15&Be)<<18|(63&Ke)<<12|(63&We)<<6|63&He)<=65535||ht>=1114112)&&(ht=null)),ht===null?(ht=65533,Tt=1):ht>65535&&(ht-=65536,Me+=String.fromCharCode(ht>>>10&1023|55296),ht=56320|1023&ht),Me+=String.fromCharCode(ht),Fe+=Tt}return Me}(this.buf,H,B)},readBytes:function(){var B=this.readVarint()+this.pos,H=this.buf.subarray(this.pos,B);return this.pos=B,H},readPackedVarint:function(B,H){if(this.type!==n.Bytes)return B.push(this.readVarint(H));var ce=y(this);for(B=B||[];this.pos<ce;)B.push(this.readVarint(H));return B},readPackedSVarint:function(B){if(this.type!==n.Bytes)return B.push(this.readSVarint());var H=y(this);for(B=B||[];this.pos<H;)B.push(this.readSVarint());return B},readPackedBoolean:function(B){if(this.type!==n.Bytes)return B.push(this.readBoolean());var H=y(this);for(B=B||[];this.pos<H;)B.push(this.readBoolean());return B},readPackedFloat:function(B){if(this.type!==n.Bytes)return B.push(this.readFloat());var H=y(this);for(B=B||[];this.pos<H;)B.push(this.readFloat());return B},readPackedDouble:function(B){if(this.type!==n.Bytes)return B.push(this.readDouble());var H=y(this);for(B=B||[];this.pos<H;)B.push(this.readDouble());return B},readPackedFixed32:function(B){if(this.type!==n.Bytes)return B.push(this.readFixed32());var H=y(this);for(B=B||[];this.pos<H;)B.push(this.readFixed32());return B},readPackedSFixed32:function(B){if(this.type!==n.Bytes)return B.push(this.readSFixed32());var H=y(this);for(B=B||[];this.pos<H;)B.push(this.readSFixed32());return B},readPackedFixed64:function(B){if(this.type!==n.Bytes)return B.push(this.readFixed64());var H=y(this);for(B=B||[];this.pos<H;)B.push(this.readFixed64());return B},readPackedSFixed64:function(B){if(this.type!==n.Bytes)return B.push(this.readSFixed64());var H=y(this);for(B=B||[];this.pos<H;)B.push(this.readSFixed64());return B},skip:function(B){var H=7&B;if(H===n.Varint)for(;this.buf[this.pos++]>127;);else if(H===n.Bytes)this.pos=this.readVarint()+this.pos;else if(H===n.Fixed32)this.pos+=4;else{if(H!==n.Fixed64)throw new Error("Unimplemented type: "+H);this.pos+=8}},writeTag:function(B,H){this.writeVarint(B<<3|H)},realloc:function(B){for(var H=this.length||16;H<this.pos+B;)H*=2;if(H!==this.length){var ce=new Uint8Array(H);ce.set(this.buf),this.buf=ce,this.length=H}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(B){this.realloc(4),me(this.buf,B,this.pos),this.pos+=4},writeSFixed32:function(B){this.realloc(4),me(this.buf,B,this.pos),this.pos+=4},writeFixed64:function(B){this.realloc(8),me(this.buf,-1&B,this.pos),me(this.buf,Math.floor(B*h),this.pos+4),this.pos+=8},writeSFixed64:function(B){this.realloc(8),me(this.buf,-1&B,this.pos),me(this.buf,Math.floor(B*h),this.pos+4),this.pos+=8},writeVarint:function(B){(B=+B||0)>268435455||B<0?function(H,ce){var Ie,$e;if(H>=0?(Ie=H%4294967296|0,$e=H/4294967296|0):($e=~(-H/4294967296),4294967295^(Ie=~(-H%4294967296))?Ie=Ie+1|0:(Ie=0,$e=$e+1|0)),H>=18446744073709552e3||H<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");ce.realloc(10),function(Me,Fe,Ke){Ke.buf[Ke.pos++]=127&Me|128,Me>>>=7,Ke.buf[Ke.pos++]=127&Me|128,Me>>>=7,Ke.buf[Ke.pos++]=127&Me|128,Me>>>=7,Ke.buf[Ke.pos++]=127&Me|128,Ke.buf[Ke.pos]=127&(Me>>>=7)}(Ie,0,ce),function(Me,Fe){var Ke=(7&Me)<<4;Fe.buf[Fe.pos++]|=Ke|((Me>>>=3)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me)))))}($e,ce)}(B,this):(this.realloc(4),this.buf[this.pos++]=127&B|(B>127?128:0),B<=127||(this.buf[this.pos++]=127&(B>>>=7)|(B>127?128:0),B<=127||(this.buf[this.pos++]=127&(B>>>=7)|(B>127?128:0),B<=127||(this.buf[this.pos++]=B>>>7&127))))},writeSVarint:function(B){this.writeVarint(B<0?2*-B-1:2*B)},writeBoolean:function(B){this.writeVarint(!!B)},writeString:function(B){B=String(B),this.realloc(4*B.length),this.pos++;var H=this.pos;this.pos=function(Ie,$e,Me){for(var Fe,Ke,We=0;We<$e.length;We++){if((Fe=$e.charCodeAt(We))>55295&&Fe<57344){if(!Ke){Fe>56319||We+1===$e.length?(Ie[Me++]=239,Ie[Me++]=191,Ie[Me++]=189):Ke=Fe;continue}if(Fe<56320){Ie[Me++]=239,Ie[Me++]=191,Ie[Me++]=189,Ke=Fe;continue}Fe=Ke-55296<<10|Fe-56320|65536,Ke=null}else Ke&&(Ie[Me++]=239,Ie[Me++]=191,Ie[Me++]=189,Ke=null);Fe<128?Ie[Me++]=Fe:(Fe<2048?Ie[Me++]=Fe>>6|192:(Fe<65536?Ie[Me++]=Fe>>12|224:(Ie[Me++]=Fe>>18|240,Ie[Me++]=Fe>>12&63|128),Ie[Me++]=Fe>>6&63|128),Ie[Me++]=63&Fe|128)}return Me}(this.buf,B,this.pos);var ce=this.pos-H;ce>=128&&w(H,ce,this),this.pos=H-1,this.writeVarint(ce),this.pos+=ce},writeFloat:function(B){this.realloc(4),u.write(this.buf,B,this.pos,!0,23,4),this.pos+=4},writeDouble:function(B){this.realloc(8),u.write(this.buf,B,this.pos,!0,52,8),this.pos+=8},writeBytes:function(B){var H=B.length;this.writeVarint(H),this.realloc(H);for(var ce=0;ce<H;ce++)this.buf[this.pos++]=B[ce]},writeRawMessage:function(B,H){this.pos++;var ce=this.pos;B(H,this);var Ie=this.pos-ce;Ie>=128&&w(ce,Ie,this),this.pos=ce-1,this.writeVarint(Ie),this.pos+=Ie},writeMessage:function(B,H,ce){this.writeTag(B,n.Bytes),this.writeRawMessage(H,ce)},writePackedVarint:function(B,H){H.length&&this.writeMessage(B,A,H)},writePackedSVarint:function(B,H){H.length&&this.writeMessage(B,I,H)},writePackedBoolean:function(B,H){H.length&&this.writeMessage(B,N,H)},writePackedFloat:function(B,H){H.length&&this.writeMessage(B,R,H)},writePackedDouble:function(B,H){H.length&&this.writeMessage(B,D,H)},writePackedFixed32:function(B,H){H.length&&this.writeMessage(B,j,H)},writePackedSFixed32:function(B,H){H.length&&this.writeMessage(B,U,H)},writePackedFixed64:function(B,H){H.length&&this.writeMessage(B,W,H)},writePackedSFixed64:function(B,H){H.length&&this.writeMessage(B,X,H)},writeBytesField:function(B,H){this.writeTag(B,n.Bytes),this.writeBytes(H)},writeFixed32Field:function(B,H){this.writeTag(B,n.Fixed32),this.writeFixed32(H)},writeSFixed32Field:function(B,H){this.writeTag(B,n.Fixed32),this.writeSFixed32(H)},writeFixed64Field:function(B,H){this.writeTag(B,n.Fixed64),this.writeFixed64(H)},writeSFixed64Field:function(B,H){this.writeTag(B,n.Fixed64),this.writeSFixed64(H)},writeVarintField:function(B,H){this.writeTag(B,n.Varint),this.writeVarint(H)},writeSVarintField:function(B,H){this.writeTag(B,n.Varint),this.writeSVarint(H)},writeStringField:function(B,H){this.writeTag(B,n.Bytes),this.writeString(H)},writeFloatField:function(B,H){this.writeTag(B,n.Fixed32),this.writeFloat(H)},writeDoubleField:function(B,H){this.writeTag(B,n.Fixed64),this.writeDouble(H)},writeBooleanField:function(B,H){this.writeVarintField(B,!!H)}},xq}var wq=g(J3());let Sq=3;function _we(u,n,l){u===1&&l.readMessage(xwe,n)}function xwe(u,n,l){if(u===3){let{id:h,bitmap:p,width:y,height:_,left:w,top:A,advance:I}=l.readMessage(bwe,{});n.push({id:h,bitmap:new Lv({width:y+2*Sq,height:_+2*Sq},p),metrics:{width:y,height:_,left:w,top:A,advance:I}})}}function bwe(u,n,l){u===1?n.id=l.readVarint():u===2?n.bitmap=l.readBytes():u===3?n.width=l.readVarint():u===4?n.height=l.readVarint():u===5?n.left=l.readSVarint():u===6?n.top=l.readSVarint():u===7&&(n.advance=l.readVarint())}let wwe=Sq;function Y3(u){let n=0,l=0;for(let _ of u)n+=_.w*_.h,l=Math.max(l,_.w);u.sort((_,w)=>w.h-_.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),l),h:1/0}],p=0,y=0;for(let _ of u)for(let w=h.length-1;w>=0;w--){let A=h[w];if(!(_.w>A.w||_.h>A.h)){if(_.x=A.x,_.y=A.y,y=Math.max(y,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===A.w&&_.h===A.h){let I=h.pop();w<h.length&&(h[w]=I)}else _.h===A.h?(A.x+=_.w,A.w-=_.w):_.w===A.w?(A.y+=_.h,A.h-=_.h):(h.push({x:A.x+_.w,y:A.y,w:A.w-_.w,h:_.h}),A.y+=_.h,A.h-=_.h);break}}return{w:p,h:y,fill:n/(p*y)||0}}let ua=1;class Tq{constructor(n,{pixelRatio:l,version:h,stretchX:p,stretchY:y,content:_,textFitWidth:w,textFitHeight:A}){this.paddedRect=n,this.pixelRatio=l,this.stretchX=p,this.stretchY=y,this.content=_,this.version=h,this.textFitWidth=w,this.textFitHeight=A}get tl(){return[this.paddedRect.x+ua,this.paddedRect.y+ua]}get br(){return[this.paddedRect.x+this.paddedRect.w-ua,this.paddedRect.y+this.paddedRect.h-ua]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ua)/this.pixelRatio,(this.paddedRect.h-2*ua)/this.pixelRatio]}}class Q3{constructor(n,l){let h={},p={};this.haveRenderCallbacks=[];let y=[];this.addImages(n,h,y),this.addImages(l,p,y);let{w:_,h:w}=Y3(y),A=new Ya({width:_||1,height:w||1});for(let I in n){let R=n[I],D=h[I].paddedRect;Ya.copy(R.data,A,{x:0,y:0},{x:D.x+ua,y:D.y+ua},R.data)}for(let I in l){let R=l[I],D=p[I].paddedRect,N=D.x+ua,j=D.y+ua,U=R.data.width,W=R.data.height;Ya.copy(R.data,A,{x:0,y:0},{x:N,y:j},R.data),Ya.copy(R.data,A,{x:0,y:W-1},{x:N,y:j-1},{width:U,height:1}),Ya.copy(R.data,A,{x:0,y:0},{x:N,y:j+W},{width:U,height:1}),Ya.copy(R.data,A,{x:U-1,y:0},{x:N-1,y:j},{width:1,height:W}),Ya.copy(R.data,A,{x:0,y:0},{x:N+U,y:j},{width:1,height:W})}this.image=A,this.iconPositions=h,this.patternPositions=p}addImages(n,l,h){for(let p in n){let y=n[p],_={x:0,y:0,w:y.data.width+2*ua,h:y.data.height+2*ua};h.push(_),l[p]=new Tq(_,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,l){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),l)}patchUpdatedImage(n,l,h){if(!n||!l||n.version===l.version)return;n.version=l.version;let[p,y]=n.tl;h.update(l.data,void 0,{x:p,y})}}var ku;ct("ImagePosition",Tq),ct("ImageAtlas",Q3),c.al=void 0,(ku=c.al||(c.al={}))[ku.none=0]="none",ku[ku.horizontal=1]="horizontal",ku[ku.vertical=2]="vertical",ku[ku.horizontalOnly=3]="horizontalOnly";let zx=-17;class Zv{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,l,h){let p=new Zv;return p.scale=n||1,p.fontStack=l,p.verticalAlign=h||"bottom",p}static forImage(n,l){let h=new Zv;return h.imageName=n,h.verticalAlign=l||"bottom",h}}class Af{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,l){let h=new Af;for(let p=0;p<n.sections.length;p++){let y=n.sections[p];y.image?h.addImageSection(y):h.addTextSection(y,l)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let l="";for(let h=0;h<n.length;h++){let p=n.charCodeAt(h+1)||null,y=n.charCodeAt(h-1)||null;l+=p&&xh(p)&&!Gv[n[h+1]]||y&&xh(y)&&!Gv[n[h-1]]||!Gv[n[h]]?n[h]:Gv[n[h]]}return l}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Bx[this.text.charCodeAt(h)];h++)n++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Bx[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(n,l),this.sectionIndex=this.sectionIndex.slice(n,l)}substring(n,l){let h=new Af;return h.text=this.text.substring(n,l),h.sectionIndex=this.sectionIndex.slice(n,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,l)=>Math.max(n,this.sections[l].scale),0)}getMaxImageSize(n){let l=0,h=0;for(let p=0;p<this.length();p++){let y=this.getSection(p);if(y.imageName){let _=n[y.imageName];if(!_)continue;let w=_.displaySize;l=Math.max(l,w[0]),h=Math.max(h,w[1])}}return{maxImageWidth:l,maxImageHeight:h}}addTextSection(n,l){this.text+=n.text,this.sections.push(Zv.forText(n.scale,n.fontStack||l,n.verticalAlign));let h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){let l=n.image?n.image.name:"";if(l.length===0)return void Ti("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Zv.forImage(l,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ti("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Nx(u,n,l,h,p,y,_,w,A,I,R,D,N,j,U){let W=Af.fromFeature(u,p),X;D===c.al.vertical&&W.verticalizePunctuation();let{processBidirectionalText:ae,processStyledBidirectionalText:me}=Ho;if(ae&&W.sections.length===1){X=[];let H=ae(W.toString(),Eq(W,I,y,n,h,j));for(let ce of H){let Ie=new Af;Ie.text=ce,Ie.sections=W.sections;for(let $e=0;$e<ce.length;$e++)Ie.sectionIndex.push(0);X.push(Ie)}}else if(me){X=[];let H=me(W.text,W.sectionIndex,Eq(W,I,y,n,h,j));for(let ce of H){let Ie=new Af;Ie.text=ce[0],Ie.sectionIndex=ce[1],Ie.sections=W.sections,X.push(Ie)}}else X=function(H,ce){let Ie=[],$e=H.text,Me=0;for(let Fe of ce)Ie.push(H.substring(Me,Fe)),Me=Fe;return Me<$e.length&&Ie.push(H.substring(Me,$e.length)),Ie}(W,Eq(W,I,y,n,h,j));let le=[],B={positionedLines:le,text:W.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(H,ce,Ie,$e,Me,Fe,Ke,We,He,Be,ht,Tt){let bt=0,pt=0,er=0,Qr=0,Ii=We==="right"?1:We==="left"?0:.5,hn=qi/Tt,eo=0;for(let Vr of Me){Vr.trim();let Fi=Vr.getMaxScale(),Xi={positionedGlyphs:[],lineOffset:0};H.positionedLines[eo]=Xi;let Ji=Xi.positionedGlyphs,Gn=0;if(!Vr.length()){pt+=Fe,++eo;continue}let to=Awe($e,Vr,hn);for(let ha=0;ha<Vr.length();ha++){let Pi=Vr.getSection(ha),Ni=Vr.getSectionIndex(ha),Bi=Vr.getCharCode(ha),gi=qwe(He,ht,Bi),Rr;if(Pi.imageName){if(H.iconsInText=!0,Pi.scale=Pi.scale*hn,Rr=Pwe(Pi,gi,Fi,to,$e),!Rr)continue;Gn=Math.max(Gn,Rr.imageOffset)}else if(Rr=Iwe(Pi,Bi,gi,to,ce,Ie),!Rr)continue;let{rect:Yo,metrics:Cf,baselineOffset:Qo}=Rr;Ji.push({glyph:Bi,imageName:Pi.imageName,x:bt,y:pt+Qo+zx,vertical:gi,scale:Pi.scale,fontStack:Pi.fontStack,sectionIndex:Ni,metrics:Cf,rect:Yo}),gi?(H.verticalizable=!0,bt+=(Pi.imageName?Cf.advance:qi)*Pi.scale+Be):bt+=Cf.advance*Pi.scale+Be}Ji.length!==0&&(er=Math.max(bt-Be,er),Cwe(Ji,0,Ji.length-1,Ii)),bt=0,Xi.lineOffset=Math.max(Gn,(Fi-1)*qi);let zi=Fe*Fi+Gn;pt+=zi,Qr=Math.max(zi,Qr),++eo}let{horizontalAlign:ca,verticalAlign:Hi}=Aq(Ke);(function(Vr,Fi,Xi,Ji,Gn,to,zi,ha,Pi){let Ni=(Fi-Xi)*Gn,Bi=0;Bi=to!==zi?-ha*Ji-zx:-Ji*Pi*zi+.5*zi;for(let gi of Vr)for(let Rr of gi.positionedGlyphs)Rr.x+=Ni,Rr.y+=Bi})(H.positionedLines,Ii,ca,Hi,er,Qr,Fe,pt,Me.length),H.top+=-Hi*pt,H.bottom=H.top+pt,H.left+=-ca*er,H.right=H.left+er}(B,n,l,h,X,_,w,A,D,I,N,U),!function(H){for(let ce of H)if(ce.positionedGlyphs.length!==0)return!1;return!0}(le)&&B}let Bx={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Swe={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Twe={40:!0};function ej(u,n,l,h,p,y){if(n.imageName){let _=h[n.imageName];return _?_.displaySize[0]*n.scale*qi/y+p:0}{let _=l[n.fontStack],w=_&&_[u];return w?w.metrics.advance*n.scale+p:0}}function tj(u,n,l,h){let p=Math.pow(u-n,2);return h?u<n?p/2:2*p:p+Math.abs(l)*l}function Ewe(u,n,l){let h=0;return u===10&&(h-=1e4),l&&(h+=150),u!==40&&u!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function rj(u,n,l,h,p,y){let _=null,w=tj(n,l,p,y);for(let A of h){let I=tj(n-A.x,l,p,y)+A.badness;I<=w&&(_=A,w=I)}return{index:u,x:n,priorBreak:_,badness:w}}function ij(u){return u?ij(u.priorBreak).concat(u.index):[]}function Eq(u,n,l,h,p,y){if(!u)return[];let _=[],w=function(D,N,j,U,W,X){let ae=0;for(let me=0;me<D.length();me++){let le=D.getSection(me);ae+=ej(D.getCharCode(me),le,U,W,N,X)}return ae/Math.max(1,Math.ceil(ae/j))}(u,n,l,h,p,y),A=u.text.indexOf("\u200B")>=0,I=0;for(let D=0;D<u.length();D++){let N=u.getSection(D),j=u.getCharCode(D);if(Bx[j]||(I+=ej(j,N,h,p,n,y)),D<u.length()-1){let U=!((R=j)<11904)&&(!!Yt["CJK Compatibility Forms"](R)||!!Yt["CJK Compatibility"](R)||!!Yt["CJK Strokes"](R)||!!Yt["CJK Symbols and Punctuation"](R)||!!Yt["Enclosed CJK Letters and Months"](R)||!!Yt["Halfwidth and Fullwidth Forms"](R)||!!Yt["Ideographic Description Characters"](R)||!!Yt["Vertical Forms"](R)||Ev.test(String.fromCodePoint(R)));(Swe[j]||U||N.imageName||D!==u.length()-2&&Twe[u.getCharCode(D+1)])&&_.push(rj(D+1,I,w,_,Ewe(j,u.getCharCode(D+1),U&&A),!1))}}var R;return ij(rj(u.length(),I,w,_,0,!0))}function Aq(u){let n=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:n,verticalAlign:l}}function Awe(u,n,l){let h=n.getMaxScale()*qi,{maxImageWidth:p,maxImageHeight:y}=n.getMaxImageSize(u),_=Math.max(h,y*l);return{verticalLineContentWidth:Math.max(h,p*l),horizontalLineContentHeight:_}}function nj(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function qwe(u,n,l){return!(u===c.al.horizontal||!n&&!yf(l)||n&&(Bx[l]||(h=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function Iwe(u,n,l,h,p,y){let _=y[u.fontStack],w=function(I,R,D,N){if(I&&I.rect)return I;let j=R[D.fontStack],U=j&&j[N];return U?{rect:null,metrics:U.metrics}:null}(_&&_[n],p,u,n);if(w===null)return null;let A;if(l)A=h.verticalLineContentWidth-u.scale*qi;else{let I=nj(u.verticalAlign);A=(h.horizontalLineContentHeight-u.scale*qi)*I}return{rect:w.rect,metrics:w.metrics,baselineOffset:A}}function Pwe(u,n,l,h,p){let y=p[u.imageName];if(!y)return null;let _=y.paddedRect,w=y.displaySize,A={width:w[0],height:w[1],left:ua,top:-3,advance:n?w[1]:w[0]},I;if(n)I=h.verticalLineContentWidth-w[1]*u.scale;else{let R=nj(u.verticalAlign);I=(h.horizontalLineContentHeight-w[1]*u.scale)*R}return{rect:_,metrics:A,baselineOffset:I,imageOffset:(n?w[0]:w[1])*u.scale-qi*l}}function Cwe(u,n,l,h){if(h===0)return;let p=u[l],y=(u[l].x+p.metrics.advance*p.scale)*h;for(let _=n;_<=l;_++)u[_].x-=y}function Mwe(u,n,l){let{horizontalAlign:h,verticalAlign:p}=Aq(l),y=n[0]-u.displaySize[0]*h,_=n[1]-u.displaySize[1]*p;return{image:u,top:_,bottom:_+u.displaySize[1],left:y,right:y+u.displaySize[0]}}function aj(u){var n,l;let h=u.left,p=u.top,y=u.right-h,_=u.bottom-p,w=(n=u.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",A=(l=u.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",I=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(A==="proportional"){if(w==="stretchOnly"&&y/_<I||w==="proportional"){let R=Math.ceil(_*I);h*=R/y,y=R}}else if(w==="proportional"&&A==="stretchOnly"&&I!==0&&y/_>I){let R=Math.ceil(y/I);p*=R/_,_=R}return{x1:h,y1:p,x2:h+y,y2:p+_}}function oj(u,n,l,h,p,y){let _=u.image,w;if(_.content){let X=_.content,ae=_.pixelRatio||1;w=[X[0]/ae,X[1]/ae,_.displaySize[0]-X[2]/ae,_.displaySize[1]-X[3]/ae]}let A=n.left*y,I=n.right*y,R,D,N,j;l==="width"||l==="both"?(j=p[0]+A-h[3],D=p[0]+I+h[1]):(j=p[0]+(A+I-_.displaySize[0])/2,D=j+_.displaySize[0]);let U=n.top*y,W=n.bottom*y;return l==="height"||l==="both"?(R=p[1]+U-h[0],N=p[1]+W+h[2]):(R=p[1]+(U+W-_.displaySize[1])/2,N=R+_.displaySize[1]),{image:_,top:R,right:D,bottom:N,left:j,collisionPadding:w}}let Kv=255,Ls=128,Du=Kv*Ls;function sj(u,n){let{expression:l}=n;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Cr(u+1))};if(l.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:p}=l,y=0;for(;y<h.length&&h[y]<=u;)y++;y=Math.max(0,y-1);let _=y;for(;_<h.length&&h[_]<u+1;)_++;_=Math.min(h.length-1,_);let w=h[y],A=h[_];return l.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:A,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:A,minSize:l.evaluate(new Cr(w)),maxSize:l.evaluate(new Cr(A)),interpolationType:p}}}function qq(u,n,l){let h="never",p=u.get(n);return p?h=p:u.get(l)&&(h="always"),h}let Rwe=Vv.VectorTileFeature.types,Owe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function jx(u,n,l,h,p,y,_,w,A,I,R,D,N){let j=w?Math.min(Du,Math.round(w[0])):0,U=w?Math.min(Du,Math.round(w[1])):0;u.emplaceBack(n,l,Math.round(32*h),Math.round(32*p),y,_,(j<<1)+(A?1:0),U,16*I,16*R,256*D,256*N)}function Iq(u,n,l){u.emplaceBack(n.x,n.y,l),u.emplaceBack(n.x,n.y,l),u.emplaceBack(n.x,n.y,l),u.emplaceBack(n.x,n.y,l)}function kwe(u){for(let n of u.sections)if(QA(n.text))return!0;return!1}class Pq{constructor(n){this.layoutVertexArray=new Br,this.indexArray=new hr,this.programConfigurations=n,this.segments=new dr,this.dynamicLayoutVertexArray=new Sr,this.opacityVertexArray=new jr,this.hasVisibleVertices=!1,this.placedSymbolArray=new de}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,l,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,fwe.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,pwe.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Owe,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ct("SymbolBuffers",Pq);class Cq{constructor(n,l,h){this.layoutVertexArray=new n,this.layoutAttributes=l,this.indexArray=new h,this.segments=new dr,this.collisionVertexArray=new Er}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,mwe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ct("CollisionBuffers",Cq);class qf{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=sj(this.zoom,l["text-size"]),this.iconSizeData=sj(this.zoom,l["icon-size"]);let h=this.layers[0].layout,p=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=qq(h,"text-overlap","text-allow-overlap")!=="never"||qq(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>c.al[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new Pq(new Ds(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Pq(new Ds(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new _e,this.lineVertexArray=new pe,this.symbolInstances=new fe,this.textAnchorOffsets=new ze}calculateGlyphDependencies(n,l,h,p,y){for(let _=0;_<n.length;_++)if(l[n.charCodeAt(_)]=!0,(h||p)&&y){let w=Gv[n.charAt(_)];w&&(l[w.charCodeAt(0)]=!0)}}populate(n,l,h){let p=this.layers[0],y=p.layout,_=y.get("text-font"),w=y.get("text-field"),A=y.get("icon-image"),I=(w.value.kind!=="constant"||w.value.value instanceof $n&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),R=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,D=y.get("symbol-sort-key");if(this.features=[],!I&&!R)return;let N=l.iconDependencies,j=l.glyphDependencies,U=l.availableImages,W=new Cr(this.zoom);for(let{feature:X,id:ae,index:me,sourceLayerIndex:le}of n){let B=p._featureFilter.needGeometry,H=Ih(X,B);if(!p._featureFilter.filter(W,H,h))continue;let ce,Ie;if(B||(H.geometry=qh(X)),I){let Me=p.getValueAndResolveTokens("text-field",H,h,U),Fe=$n.factory(Me),Ke=this.hasRTLText=this.hasRTLText||kwe(Fe);(!Ke||Ho.getRTLTextPluginStatus()==="unavailable"||Ke&&Ho.isParsed())&&(ce=gwe(Fe,p,H))}if(R){let Me=p.getValueAndResolveTokens("icon-image",H,h,U);Ie=Me instanceof oa?Me:oa.fromString(Me)}if(!ce&&!Ie)continue;let $e=this.sortFeaturesByKey?D.evaluate(H,{},h):void 0;if(this.features.push({id:ae,text:ce,icon:Ie,index:me,sourceLayerIndex:le,geometry:H.geometry,properties:X.properties,type:Rwe[X.type],sortKey:$e}),Ie&&(N[Ie.name]=!0),ce){let Me=_.evaluate(H,{},h).join(","),Fe=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.al.vertical)>=0;for(let Ke of ce.sections)if(Ke.image)N[Ke.image.name]=!0;else{let We=gf(ce.toString()),He=Ke.fontStack||Me,Be=j[He]=j[He]||{};this.calculateGlyphDependencies(Ke.text,Be,Fe,this.allowVerticalPlacement,We)}}}y.get("symbol-placement")==="line"&&(this.features=function(X){let ae={},me={},le=[],B=0;function H(Me){le.push(X[Me]),B++}function ce(Me,Fe,Ke){let We=me[Me];return delete me[Me],me[Fe]=We,le[We].geometry[0].pop(),le[We].geometry[0]=le[We].geometry[0].concat(Ke[0]),We}function Ie(Me,Fe,Ke){let We=ae[Fe];return delete ae[Fe],ae[Me]=We,le[We].geometry[0].shift(),le[We].geometry[0]=Ke[0].concat(le[We].geometry[0]),We}function $e(Me,Fe,Ke){let We=Ke?Fe[0][Fe[0].length-1]:Fe[0][0];return`${Me}:${We.x}:${We.y}`}for(let Me=0;Me<X.length;Me++){let Fe=X[Me],Ke=Fe.geometry,We=Fe.text?Fe.text.toString():null;if(!We){H(Me);continue}let He=$e(We,Ke),Be=$e(We,Ke,!0);if(He in me&&Be in ae&&me[He]!==ae[Be]){let ht=Ie(He,Be,Ke),Tt=ce(He,Be,le[ht].geometry);delete ae[He],delete me[Be],me[$e(We,le[Tt].geometry,!0)]=Tt,le[ht].geometry=null}else He in me?ce(He,Be,Ke):Be in ae?Ie(He,Be,Ke):(H(Me),ae[He]=B-1,me[Be]=B-1)}return le.filter(Me=>Me.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((X,ae)=>X.sortKey-ae.sortKey)}update(n,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,l){let h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(l[n.segment+1]),y=n.dist(l[n.segment]),_={};for(let w=n.segment+1;w<l.length;w++)_[w]={x:l[w].x,y:l[w].y,tileUnitDistanceFromAnchor:p},w<l.length-1&&(p+=l[w+1].dist(l[w]));for(let w=n.segment||0;w>=0;w--)_[w]={x:l[w].x,y:l[w].y,tileUnitDistanceFromAnchor:y},w>0&&(y+=l[w-1].dist(l[w]));for(let w=0;w<l.length;w++){let A=_[w];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,l,h,p,y,_,w,A,I,R,D,N){let j=n.indexArray,U=n.layoutVertexArray,W=n.segments.prepareSegment(4*l.length,U,j,this.canOverlap?_.sortKey:void 0),X=this.glyphOffsetArray.length,ae=W.vertexLength,me=this.allowVerticalPlacement&&w===c.al.vertical?Math.PI/2:0,le=_.text&&_.text.sections;for(let B=0;B<l.length;B++){let{tl:H,tr:ce,bl:Ie,br:$e,tex:Me,pixelOffsetTL:Fe,pixelOffsetBR:Ke,minFontScaleX:We,minFontScaleY:He,glyphOffset:Be,isSDF:ht,sectionIndex:Tt}=l[B],bt=W.vertexLength,pt=Be[1];jx(U,A.x,A.y,H.x,pt+H.y,Me.x,Me.y,h,ht,Fe.x,Fe.y,We,He),jx(U,A.x,A.y,ce.x,pt+ce.y,Me.x+Me.w,Me.y,h,ht,Ke.x,Fe.y,We,He),jx(U,A.x,A.y,Ie.x,pt+Ie.y,Me.x,Me.y+Me.h,h,ht,Fe.x,Ke.y,We,He),jx(U,A.x,A.y,$e.x,pt+$e.y,Me.x+Me.w,Me.y+Me.h,h,ht,Ke.x,Ke.y,We,He),Iq(n.dynamicLayoutVertexArray,A,me),j.emplaceBack(bt,bt+2,bt+1),j.emplaceBack(bt+1,bt+2,bt+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Be[0]),B!==l.length-1&&Tt===l[B+1].sectionIndex||n.programConfigurations.populatePaintArrays(U.length,_,_.index,{},N,le&&le[Tt])}n.placedSymbolArray.emplaceBack(A.x,A.y,X,this.glyphOffsetArray.length-X,ae,I,R,A.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],w,0,!1,0,D)}_addCollisionDebugVertex(n,l,h,p,y,_){return l.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,y,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,l,h,p,y,_,w){let A=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),I=A.vertexLength,R=y.layoutVertexArray,D=y.collisionVertexArray,N=w.anchorX,j=w.anchorY;this._addCollisionDebugVertex(R,D,_,N,j,new z(n,l)),this._addCollisionDebugVertex(R,D,_,N,j,new z(h,l)),this._addCollisionDebugVertex(R,D,_,N,j,new z(h,p)),this._addCollisionDebugVertex(R,D,_,N,j,new z(n,p)),A.vertexLength+=4;let U=y.indexArray;U.emplaceBack(I,I+1),U.emplaceBack(I+1,I+2),U.emplaceBack(I+2,I+3),U.emplaceBack(I+3,I),A.primitiveLength+=4}addDebugCollisionBoxes(n,l,h,p){for(let y=n;y<l;y++){let _=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cq(Ur,K3.members,Ai),this.iconCollisionBox=new Cq(Ur,K3.members,Ai);for(let n=0;n<this.symbolInstances.length;n++){let l=this.symbolInstances.get(n);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(n,l,h,p,y,_,w,A,I){let R={};for(let D=l;D<h;D++){let N=n.get(D);R.textBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},R.textFeatureIndex=N.featureIndex;break}for(let D=p;D<y;D++){let N=n.get(D);R.verticalTextBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},R.verticalTextFeatureIndex=N.featureIndex;break}for(let D=_;D<w;D++){let N=n.get(D);R.iconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},R.iconFeatureIndex=N.featureIndex;break}for(let D=A;D<I;D++){let N=n.get(D);R.verticalIconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},R.verticalIconFeatureIndex=N.featureIndex;break}return R}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){let h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,l){let h=n.placedSymbolArray.get(l),p=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<p;y+=4)n.indexArray.emplaceBack(y,y+2,y+1),n.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let l=Math.sin(n),h=Math.cos(n),p=[],y=[],_=[];for(let w=0;w<this.symbolInstances.length;++w){_.push(w);let A=this.symbolInstances.get(w);p.push(0|Math.round(l*A.anchorX+h*A.anchorY)),y.push(A.featureIndex)}return _.sort((w,A)=>p[w]-p[A]||y[A]-y[w]),_}addToSortKeyRanges(n,l){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let l of this.symbolInstanceIndexes){let h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,y,_)=>{p>=0&&_.indexOf(p)===y&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let lj,uj;ct("SymbolBucket",qf,{omit:["layers","collisionBoxArray","features","compareText"]}),qf.MAX_GLYPHS=65535,qf.addDynamicAttributes=Iq;var Mq={get paint(){return uj=uj||new pi({"icon-opacity":new It(J.paint_symbol["icon-opacity"]),"icon-color":new It(J.paint_symbol["icon-color"]),"icon-halo-color":new It(J.paint_symbol["icon-halo-color"]),"icon-halo-width":new It(J.paint_symbol["icon-halo-width"]),"icon-halo-blur":new It(J.paint_symbol["icon-halo-blur"]),"icon-translate":new vt(J.paint_symbol["icon-translate"]),"icon-translate-anchor":new vt(J.paint_symbol["icon-translate-anchor"]),"text-opacity":new It(J.paint_symbol["text-opacity"]),"text-color":new It(J.paint_symbol["text-color"],{runtimeType:Hr,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new It(J.paint_symbol["text-halo-color"]),"text-halo-width":new It(J.paint_symbol["text-halo-width"]),"text-halo-blur":new It(J.paint_symbol["text-halo-blur"]),"text-translate":new vt(J.paint_symbol["text-translate"]),"text-translate-anchor":new vt(J.paint_symbol["text-translate-anchor"])})},get layout(){return lj=lj||new pi({"symbol-placement":new vt(J.layout_symbol["symbol-placement"]),"symbol-spacing":new vt(J.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vt(J.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new It(J.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vt(J.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vt(J.layout_symbol["icon-allow-overlap"]),"icon-overlap":new vt(J.layout_symbol["icon-overlap"]),"icon-ignore-placement":new vt(J.layout_symbol["icon-ignore-placement"]),"icon-optional":new vt(J.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vt(J.layout_symbol["icon-rotation-alignment"]),"icon-size":new It(J.layout_symbol["icon-size"]),"icon-text-fit":new vt(J.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vt(J.layout_symbol["icon-text-fit-padding"]),"icon-image":new It(J.layout_symbol["icon-image"]),"icon-rotate":new It(J.layout_symbol["icon-rotate"]),"icon-padding":new It(J.layout_symbol["icon-padding"]),"icon-keep-upright":new vt(J.layout_symbol["icon-keep-upright"]),"icon-offset":new It(J.layout_symbol["icon-offset"]),"icon-anchor":new It(J.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vt(J.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vt(J.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vt(J.layout_symbol["text-rotation-alignment"]),"text-field":new It(J.layout_symbol["text-field"]),"text-font":new It(J.layout_symbol["text-font"]),"text-size":new It(J.layout_symbol["text-size"]),"text-max-width":new It(J.layout_symbol["text-max-width"]),"text-line-height":new vt(J.layout_symbol["text-line-height"]),"text-letter-spacing":new It(J.layout_symbol["text-letter-spacing"]),"text-justify":new It(J.layout_symbol["text-justify"]),"text-radial-offset":new It(J.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vt(J.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new It(J.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new It(J.layout_symbol["text-anchor"]),"text-max-angle":new vt(J.layout_symbol["text-max-angle"]),"text-writing-mode":new vt(J.layout_symbol["text-writing-mode"]),"text-rotate":new It(J.layout_symbol["text-rotate"]),"text-padding":new vt(J.layout_symbol["text-padding"]),"text-keep-upright":new vt(J.layout_symbol["text-keep-upright"]),"text-transform":new It(J.layout_symbol["text-transform"]),"text-offset":new It(J.layout_symbol["text-offset"]),"text-allow-overlap":new vt(J.layout_symbol["text-allow-overlap"]),"text-overlap":new vt(J.layout_symbol["text-overlap"]),"text-ignore-placement":new vt(J.layout_symbol["text-ignore-placement"]),"text-optional":new vt(J.layout_symbol["text-optional"])})}};class cj{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Ct,this.defaultValue=n}evaluate(n){if(n.formattedSection){let l=this.defaultValue.property.overrides;if(l&&l.hasOverride(n.formattedSection))return l.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ct("FormatSectionOverride",cj,{omit:["defaultValue"]});class Ux extends qa{constructor(n){super(n,Mq)}recalculate(n,l){if(super.recalculate(n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let p=[];for(let y of h)p.indexOf(y)<0&&p.push(y);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,l,h,p){let y=this.layout.get(n).evaluate(l,{},h,p),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||hh(_.value)||!y?y:function(w,A){return A.replace(/{([^{}]+)}/g,(I,R)=>w&&R in w?String(w[R]):"")}(l.properties,y)}createBucket(n){return new qf(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let n of Mq.paint.overridableProperties){if(!Ux.hasPaintOverride(this.layout,n))continue;let l=this.paint.get(n),h=new cj(l),p=new af(h,l.property.specification),y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new hv("source",p):new sf("composite",p,l.value.zoomStops),this.paint._values[n]=new Tn(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(n,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Ux.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,l){let h=n.get("text-field"),p=Mq.paint.properties[l],y=!1,_=w=>{for(let A of w)if(p.overrides&&p.overrides.hasOverride(A))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof $n)_(h.value.value.sections);else if(h.value.kind==="source"){let w=I=>{y||(I instanceof Ft&&Jr(I.value)===Gc?_(I.value.sections):I instanceof Ud?_(I.sections):I.eachChild(w))},A=h.value;A._styleExpression&&w(A._styleExpression.expression)}return y}}let hj;var Dwe={get paint(){return hj=hj||new pi({"background-color":new vt(J.paint_background["background-color"]),"background-pattern":new qv(J.paint_background["background-pattern"]),"background-opacity":new vt(J.paint_background["background-opacity"])})}};class Lwe extends qa{constructor(n){super(n,Dwe)}}let dj;var Fwe={get paint(){return dj=dj||new pi({"raster-opacity":new vt(J.paint_raster["raster-opacity"]),"raster-hue-rotate":new vt(J.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vt(J.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vt(J.paint_raster["raster-brightness-max"]),"raster-saturation":new vt(J.paint_raster["raster-saturation"]),"raster-contrast":new vt(J.paint_raster["raster-contrast"]),"raster-resampling":new vt(J.paint_raster["raster-resampling"]),"raster-fade-duration":new vt(J.paint_raster["raster-fade-duration"])})}};class zwe extends qa{constructor(n){super(n,Fwe)}}class Nwe extends qa{constructor(n){super(n,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Bwe{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let jwe={once:!0},Rq=6371008.8;class Lu{constructor(n,l){if(isNaN(n)||isNaN(l))throw new Error(`Invalid LngLat object: (${n}, ${l})`);if(this.lng=+n,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Lu(fo(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){let l=Math.PI/180,h=this.lat*l,p=n.lat*l,y=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*l);return Rq*Math.acos(Math.min(y,1))}static convert(n){if(n instanceof Lu)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Lu(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Lu(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let fj=2*Math.PI*Rq;function pj(u){return fj*Math.cos(u*Math.PI/180)}function mj(u){return(180+u)/360}function vj(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function gj(u,n){return u/pj(n)}function Oq(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function yj(u,n){return u*pj(Oq(n))}class Hv{constructor(n,l,h=0){this.x=+n,this.y=+l,this.z=+h}static fromLngLat(n,l=0){let h=Lu.convert(n);return new Hv(mj(h.lng),vj(h.lat),gj(l,h.lat))}toLngLat(){return new Lu(360*this.x-180,Oq(this.y))}toAltitude(){return yj(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/fj*(n=Oq(this.y),1/Math.cos(n*Math.PI/180));var n}}function _j(u,n,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[u*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class kq{constructor(n,l,h){if(!function(p,y,_){return!(p<0||p>25||_<0||_>=Math.pow(2,p)||y<0||y>=Math.pow(2,p))}(n,l,h))throw new Error(`x=${l}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=l,this.y=h,this.key=If(0,n,n,l,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,l,h){let p=(_=this.y,w=this.z,A=_j(256*(y=this.x),256*(_=Math.pow(2,w)-_-1),w),I=_j(256*(y+1),256*(_+1),w),A[0]+","+A[1]+","+I[0]+","+I[1]);var y,_,w,A,I;let R=function(D,N,j){let U,W="";for(let X=D;X>0;X--)U=1<<X-1,W+=(N&U?1:0)+(j&U?2:0);return W}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){let l=this.z-n.z;return l>0&&n.x===this.x>>l&&n.y===this.y>>l}getTilePoint(n){let l=Math.pow(2,this.z);return new z((n.x*l-this.x)*Lt,(n.y*l-this.y)*Lt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xj{constructor(n,l){this.wrap=n,this.canonical=l,this.key=If(n,l.z,l.z,l.x,l.y)}}class Qa{constructor(n,l,h,p,y){if(this.terrainRttPosMatrix32f=null,n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=l,this.canonical=new kq(h,+p,+y),this.key=If(l,n,h,p,y)}clone(){return new Qa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let l=this.canonical.z-n;return n>this.canonical.z?new Qa(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qa(n,this.wrap,n,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(n,l){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-n;return n>this.canonical.z?If(this.wrap*+l,n,this.canonical.z,this.canonical.x,this.canonical.y):If(this.wrap*+l,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;let l=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>l&&n.canonical.y===this.canonical.y>>l}children(n){if(this.overscaledZ>=n)return[new Qa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let l=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Qa(l,this.wrap,l,h,p),new Qa(l,this.wrap,l,h+1,p),new Qa(l,this.wrap,l,h,p+1),new Qa(l,this.wrap,l,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Qa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Qa(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xj(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Hv(n.x-this.wrap,n.y))}}function If(u,n,l,h,p){(u*=2)<0&&(u=-1*u-1);let y=1<<l;return(y*y*u+y*p+h).toString(36)+l.toString(36)+n.toString(36)}ct("CanonicalTileID",kq),ct("OverscaledTileID",Qa,{omit:["terrainRttPosMatrix32f"]});class bj{constructor(n,l,h,p=1,y=1,_=1,w=0){if(this.uid=n,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Ti(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;let A=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=y,this.blueFactor=_,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<A;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(A,I)]=this.data[this._idx(A-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,A)]=this.data[this._idx(I,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<A;I++)for(let R=0;R<A;R++){let D=this.get(I,R);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(n,l){let h=new Uint8Array(this.data.buffer),p=4*this._idx(n,l);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,l){if(n<-1||n>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(n+1)}unpack(n,l,h){return n*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ya({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,l,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=l*this.dim,y=l*this.dim+this.dim,_=h*this.dim,w=h*this.dim+this.dim;switch(l){case-1:p=y-1;break;case 1:y=p+1}switch(h){case-1:_=w-1;break;case 1:w=_+1}let A=-l*this.dim,I=-h*this.dim;for(let R=_;R<w;R++)for(let D=p;D<y;D++)this.data[this._idx(D,R)]=n.data[this._idx(D+A,R+I)]}}ct("DEMData",bj);class wj{constructor(n){this._stringToNumber={},this._numberToString=[];for(let l=0;l<n.length;l++){let h=n[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Sj{constructor(n,l,h,p,y){this.type="Feature",this._vectorTileFeature=n,n._z=l,n._x=h,n._y=p,this.properties=n.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){let n={geometry:this.geometry};for(let l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(n[l]=this[l]);return n}}class Tj{constructor(n,l){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Cu(Lt,16,0),this.grid3D=new Cu(Lt,16,0),this.featureIndexArray=new ke,this.promoteId=l}insert(n,l,h,p,y,_){let w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,y);let A=_?this.grid3D:this.grid;for(let I=0;I<l.length;I++){let R=l[I],D=[1/0,1/0,-1/0,-1/0];for(let N=0;N<R.length;N++){let j=R[N];D[0]=Math.min(D[0],j.x),D[1]=Math.min(D[1],j.y),D[2]=Math.max(D[2],j.x),D[3]=Math.max(D[3],j.y)}D[0]<Lt&&D[1]<Lt&&D[2]>=0&&D[3]>=0&&A.insert(w,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Vv.VectorTile(new wq(this.rawTileData)).layers,this.sourceLayerCoder=new wj(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,l,h,p){this.loadVTLayers();let y=n.params,_=Lt/n.tileSize/n.scale,w=mh(y.filter),A=n.queryGeometry,I=n.queryPadding*_,R=Aj(A),D=this.grid.query(R.minX-I,R.minY-I,R.maxX+I,R.maxY+I),N=Aj(n.cameraQueryGeometry),j=this.grid3D.query(N.minX-I,N.minY-I,N.maxX+I,N.maxY+I,(X,ae,me,le)=>function(B,H,ce,Ie,$e){for(let Fe of B)if(H<=Fe.x&&ce<=Fe.y&&Ie>=Fe.x&&$e>=Fe.y)return!0;let Me=[new z(H,ce),new z(H,$e),new z(Ie,$e),new z(Ie,ce)];if(B.length>2){for(let Fe of Me)if(Ph(B,Fe))return!0}for(let Fe=0;Fe<B.length-1;Fe++)if(P1e(B[Fe],B[Fe+1],Me))return!0;return!1}(n.cameraQueryGeometry,X-I,ae-I,me+I,le+I));for(let X of j)D.push(X);D.sort(Uwe);let U={},W;for(let X=0;X<D.length;X++){let ae=D[X];if(ae===W)continue;W=ae;let me=this.featureIndexArray.get(ae),le=null;this.loadMatchingFeature(U,me.bucketIndex,me.sourceLayerIndex,me.featureIndex,w,y.layers,y.availableImages,l,h,p,(B,H,ce)=>(le||(le=qh(B)),H.queryIntersectsFeature({queryGeometry:A,feature:B,featureState:ce,geometry:le,zoom:this.z,transform:n.transform,pixelsToTileUnits:_,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation})))}return U}loadMatchingFeature(n,l,h,p,y,_,w,A,I,R,D){let N=this.bucketLayerIDs[l];if(_&&!N.some(X=>_.has(X)))return;let j=this.sourceLayerCoder.decode(h),U=this.vtLayers[j].feature(p);if(y.needGeometry){let X=Ih(U,!0);if(!y.filter(new Cr(this.tileID.overscaledZ),X,this.tileID.canonical))return}else if(!y.filter(new Cr(this.tileID.overscaledZ),U))return;let W=this.getId(U,j);for(let X=0;X<N.length;X++){let ae=N[X];if(_&&!_.has(ae))continue;let me=A[ae];if(!me)continue;let le={};W&&R&&(le=R.getState(me.sourceLayer||"_geojsonTileLayer",W));let B=an({},I[ae]);B.paint=Ej(B.paint,me.paint,U,le,w),B.layout=Ej(B.layout,me.layout,U,le,w);let H=!D||D(U,me,le);if(!H)continue;let ce=new Sj(U,this.z,this.x,this.y,W);ce.layer=B;let Ie=n[ae];Ie===void 0&&(Ie=n[ae]=[]),Ie.push({featureIndex:p,feature:ce,intersectionZ:H})}}lookupSymbolFeatures(n,l,h,p,y,_,w,A){let I={};this.loadVTLayers();let R=mh(y);for(let D of n)this.loadMatchingFeature(I,h,p,D,R,_,w,A,l);return I}hasLayer(n){for(let l of this.bucketLayerIDs)for(let h of l)if(n===h)return!0;return!1}getId(n,l){var h;let p=n.id;return this.promoteId&&(p=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&!((h=n.properties)===null||h===void 0)&&h.cluster&&this.promoteId&&(p=Number(n.properties.cluster_id))),p}}function Ej(u,n,l,h,p){return po(u,(y,_)=>{let w=n instanceof xf?n.get(_):null;return w&&w.evaluate?w.evaluate(l,h,p):w})}function Aj(u){let n=1/0,l=1/0,h=-1/0,p=-1/0;for(let y of u)n=Math.min(n,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),p=Math.max(p,y.y);return{minX:n,minY:l,maxX:h,maxY:p}}function Uwe(u,n){return n-u}function qj(u,n,l,h,p){let y=[];for(let _=0;_<u.length;_++){let w=u[_],A;for(let I=0;I<w.length-1;I++){let R=w[I],D=w[I+1];R.x<n&&D.x<n||(R.x<n?R=new z(n,R.y+(n-R.x)/(D.x-R.x)*(D.y-R.y))._round():D.x<n&&(D=new z(n,R.y+(n-R.x)/(D.x-R.x)*(D.y-R.y))._round()),R.y<l&&D.y<l||(R.y<l?R=new z(R.x+(l-R.y)/(D.y-R.y)*(D.x-R.x),l)._round():D.y<l&&(D=new z(R.x+(l-R.y)/(D.y-R.y)*(D.x-R.x),l)._round()),R.x>=h&&D.x>=h||(R.x>=h?R=new z(h,R.y+(h-R.x)/(D.x-R.x)*(D.y-R.y))._round():D.x>=h&&(D=new z(h,R.y+(h-R.x)/(D.x-R.x)*(D.y-R.y))._round()),R.y>=p&&D.y>=p||(R.y>=p?R=new z(R.x+(p-R.y)/(D.y-R.y)*(D.x-R.x),p)._round():D.y>=p&&(D=new z(R.x+(p-R.y)/(D.y-R.y)*(D.x-R.x),p)._round()),A&&R.equals(A[A.length-1])||(A=[R],y.push(A)),A.push(D)))))}}return y}ct("FeatureIndex",Tj,{omit:["rawTileData","sourceLayerCoder"]});class Fu extends z{constructor(n,l,h,p){super(n,l),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new Fu(this.x,this.y,this.angle,this.segment)}}function Ij(u,n,l,h,p){if(n.segment===void 0||l===0)return!0;let y=n,_=n.segment+1,w=0;for(;w>-l/2;){if(_--,_<0)return!1;w-=u[_].dist(y),y=u[_]}w+=u[_].dist(u[_+1]),_++;let A=[],I=0;for(;w<l/2;){let R=u[_],D=u[_+1];if(!D)return!1;let N=u[_-1].angleTo(R)-R.angleTo(D);for(N=Math.abs((N+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:w,angleDelta:N}),I+=N;w-A[0].distance>h;)I-=A.shift().angleDelta;if(I>p)return!1;_++,w+=R.dist(D)}return!0}function Pj(u){let n=0;for(let l=0;l<u.length-1;l++)n+=u[l].dist(u[l+1]);return n}function Cj(u,n,l){return u?.6*n*l:0}function Mj(u,n){return Math.max(u?u.right-u.left:0,n?n.right-n.left:0)}function Vwe(u,n,l,h,p,y){let _=Cj(l,p,y),w=Mj(l,h)*y,A=0,I=Pj(u)/2;for(let R=0;R<u.length-1;R++){let D=u[R],N=u[R+1],j=D.dist(N);if(A+j>I){let U=(I-A)/j,W=vo.number(D.x,N.x,U),X=vo.number(D.y,N.y,U),ae=new Fu(W,X,N.angleTo(D),R);return ae._round(),!_||Ij(u,ae,w,_,n)?ae:void 0}A+=j}}function $we(u,n,l,h,p,y,_,w,A){let I=Cj(h,y,_),R=Mj(h,p),D=R*_,N=u[0].x===0||u[0].x===A||u[0].y===0||u[0].y===A;return n-D<n/4&&(n=D+n/4),Rj(u,N?n/2*w%n:(R/2+2*y)*_*w%n,n,I,l,D,N,!1,A)}function Rj(u,n,l,h,p,y,_,w,A){let I=y/2,R=Pj(u),D=0,N=n-l,j=[];for(let U=0;U<u.length-1;U++){let W=u[U],X=u[U+1],ae=W.dist(X),me=X.angleTo(W);for(;N+l<D+ae;){N+=l;let le=(N-D)/ae,B=vo.number(W.x,X.x,le),H=vo.number(W.y,X.y,le);if(B>=0&&B<A&&H>=0&&H<A&&N-I>=0&&N+I<=R){let ce=new Fu(B,H,me,U);ce._round(),h&&!Ij(u,ce,y,h,p)||j.push(ce)}}D+=ae}return w||j.length||_||(j=Rj(u,D/2,l,h,p,y,_,!0,A)),j}ct("Anchor",Fu);let Xv=ua;function Oj(u,n,l,h){let p=[],y=u.image,_=y.pixelRatio,w=y.paddedRect.w-2*Xv,A=y.paddedRect.h-2*Xv,I={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom},R=y.stretchX||[[0,w]],D=y.stretchY||[[0,A]],N=(Be,ht)=>Be+ht[1]-ht[0],j=R.reduce(N,0),U=D.reduce(N,0),W=w-j,X=A-U,ae=0,me=j,le=0,B=U,H=0,ce=W,Ie=0,$e=X;if(y.content&&h){let Be=y.content,ht=Be[2]-Be[0],Tt=Be[3]-Be[1];(y.textFitWidth||y.textFitHeight)&&(I=aj(u)),ae=Vx(R,0,Be[0]),le=Vx(D,0,Be[1]),me=Vx(R,Be[0],Be[2]),B=Vx(D,Be[1],Be[3]),H=Be[0]-ae,Ie=Be[1]-le,ce=ht-me,$e=Tt-B}let Me=I.x1,Fe=I.y1,Ke=I.x2-Me,We=I.y2-Fe,He=(Be,ht,Tt,bt)=>{let pt=$x(Be.stretch-ae,me,Ke,Me),er=Wx(Be.fixed-H,ce,Be.stretch,j),Qr=$x(ht.stretch-le,B,We,Fe),Ii=Wx(ht.fixed-Ie,$e,ht.stretch,U),hn=$x(Tt.stretch-ae,me,Ke,Me),eo=Wx(Tt.fixed-H,ce,Tt.stretch,j),ca=$x(bt.stretch-le,B,We,Fe),Hi=Wx(bt.fixed-Ie,$e,bt.stretch,U),Vr=new z(pt,Qr),Fi=new z(hn,Qr),Xi=new z(hn,ca),Ji=new z(pt,ca),Gn=new z(er/_,Ii/_),to=new z(eo/_,Hi/_),zi=n*Math.PI/180;if(zi){let Ni=Math.sin(zi),Bi=Math.cos(zi),gi=[Bi,-Ni,Ni,Bi];Vr._matMult(gi),Fi._matMult(gi),Ji._matMult(gi),Xi._matMult(gi)}let ha=Be.stretch+Be.fixed,Pi=ht.stretch+ht.fixed;return{tl:Vr,tr:Fi,bl:Ji,br:Xi,tex:{x:y.paddedRect.x+Xv+ha,y:y.paddedRect.y+Xv+Pi,w:Tt.stretch+Tt.fixed-ha,h:bt.stretch+bt.fixed-Pi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gn,pixelOffsetBR:to,minFontScaleX:ce/_/Ke,minFontScaleY:$e/_/We,isSDF:l}};if(h&&(y.stretchX||y.stretchY)){let Be=kj(R,W,j),ht=kj(D,X,U);for(let Tt=0;Tt<Be.length-1;Tt++){let bt=Be[Tt],pt=Be[Tt+1];for(let er=0;er<ht.length-1;er++)p.push(He(bt,ht[er],pt,ht[er+1]))}}else p.push(He({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:A+1}));return p}function Vx(u,n,l){let h=0;for(let p of u)h+=Math.max(n,Math.min(l,p[1]))-Math.max(n,Math.min(l,p[0]));return h}function kj(u,n,l){let h=[{fixed:-1,stretch:0}];for(let[p,y]of u){let _=h[h.length-1];h.push({fixed:p-_.stretch,stretch:_.stretch}),h.push({fixed:p-_.stretch,stretch:_.stretch+(y-p)})}return h.push({fixed:n+Xv,stretch:l}),h}function $x(u,n,l,h){return u/n*l+h}function Wx(u,n,l,h){return u-n*l/h}class Gx{constructor(n,l,h,p,y,_,w,A,I,R){var D;if(this.boxStartIndex=n.length,I){let N=_.top,j=_.bottom,U=_.collisionPadding;U&&(N-=U[1],j+=U[3]);let W=j-N;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{let N=!((D=_.image)===null||D===void 0)&&D.content&&(_.image.textFitWidth||_.image.textFitHeight)?aj(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};N.y1=N.y1*w-A[0],N.y2=N.y2*w+A[2],N.x1=N.x1*w-A[3],N.x2=N.x2*w+A[1];let j=_.collisionPadding;if(j&&(N.x1-=j[0]*w,N.y1-=j[1]*w,N.x2+=j[2]*w,N.y2+=j[3]*w),R){let U=new z(N.x1,N.y1),W=new z(N.x2,N.y1),X=new z(N.x1,N.y2),ae=new z(N.x2,N.y2),me=R*Math.PI/180;U._rotate(me),W._rotate(me),X._rotate(me),ae._rotate(me),N.x1=Math.min(U.x,W.x,X.x,ae.x),N.x2=Math.max(U.x,W.x,X.x,ae.x),N.y1=Math.min(U.y,W.y,X.y,ae.y),N.y2=Math.max(U.y,W.y,X.y,ae.y)}n.emplaceBack(l.x,l.y,N.x1,N.y1,N.x2,N.y2,h,p,y)}this.boxEndIndex=n.length}}class Wwe{constructor(n=[],l=(h,p)=>h<p?-1:h>p?1:0){if(this.data=n,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;let n=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),n}peek(){return this.data[0]}_up(n){let{data:l,compare:h}=this,p=l[n];for(;n>0;){let y=n-1>>1,_=l[y];if(h(p,_)>=0)break;l[n]=_,n=y}l[n]=p}_down(n){let{data:l,compare:h}=this,p=this.length>>1,y=l[n];for(;n<p;){let _=1+(n<<1),w=_+1;if(w<this.length&&h(l[w],l[_])<0&&(_=w),h(l[_],y)>=0)break;l[n]=l[_],n=_}l[n]=y}}function Gwe(u,n=1,l=!1){let h=1/0,p=1/0,y=-1/0,_=-1/0,w=u[0];for(let j=0;j<w.length;j++){let U=w[j];(!j||U.x<h)&&(h=U.x),(!j||U.y<p)&&(p=U.y),(!j||U.x>y)&&(y=U.x),(!j||U.y>_)&&(_=U.y)}let A=Math.min(y-h,_-p),I=A/2,R=new Wwe([],Zwe);if(A===0)return new z(h,p);for(let j=h;j<y;j+=A)for(let U=p;U<_;U+=A)R.push(new Pf(j+I,U+I,I,u));let D=function(j){let U=0,W=0,X=0,ae=j[0];for(let me=0,le=ae.length,B=le-1;me<le;B=me++){let H=ae[me],ce=ae[B],Ie=H.x*ce.y-ce.x*H.y;W+=(H.x+ce.x)*Ie,X+=(H.y+ce.y)*Ie,U+=3*Ie}return new Pf(W/U,X/U,0,j)}(u),N=R.length;for(;R.length;){let j=R.pop();(j.d>D.d||!D.d)&&(D=j,l&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,N)),j.max-D.d<=n||(I=j.h/2,R.push(new Pf(j.p.x-I,j.p.y-I,I,u)),R.push(new Pf(j.p.x+I,j.p.y-I,I,u)),R.push(new Pf(j.p.x-I,j.p.y+I,I,u)),R.push(new Pf(j.p.x+I,j.p.y+I,I,u)),N+=4)}return l&&(console.log(`num probes: ${N}`),console.log(`best distance: ${D.d}`)),D.p}function Zwe(u,n){return n.max-u.max}function Pf(u,n,l,h){this.p=new z(u,n),this.h=l,this.d=function(p,y){let _=!1,w=1/0;for(let A=0;A<y.length;A++){let I=y[A];for(let R=0,D=I.length,N=D-1;R<D;N=R++){let j=I[R],U=I[N];j.y>p.y!=U.y>p.y&&p.x<(U.x-j.x)*(p.y-j.y)/(U.y-j.y)+j.x&&(_=!_),w=Math.min(w,p3(p,j,U))}}return(_?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var cn;c.aB=void 0,(cn=c.aB||(c.aB={}))[cn.center=1]="center",cn[cn.left=2]="left",cn[cn.right=3]="right",cn[cn.top=4]="top",cn[cn.bottom=5]="bottom",cn[cn["top-left"]=6]="top-left",cn[cn["top-right"]=7]="top-right",cn[cn["bottom-left"]=8]="bottom-left",cn[cn["bottom-right"]=9]="bottom-right";let zu=7,Dq=Number.POSITIVE_INFINITY;function Dj(u,n){return n[1]!==Dq?function(l,h,p){let y=0,_=0;switch(h=Math.abs(h),p=Math.abs(p),l){case"top-right":case"top-left":case"top":_=p-zu;break;case"bottom-right":case"bottom-left":case"bottom":_=-p+zu}switch(l){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,_]}(u,n[0],n[1]):function(l,h){let p=0,y=0;h<0&&(h=0);let _=h/Math.SQRT2;switch(l){case"top-right":case"top-left":y=_-zu;break;case"bottom-right":case"bottom-left":y=-_+zu;break;case"bottom":y=-h+zu;break;case"top":y=h-zu}switch(l){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=h;break;case"right":p=-h}return[p,y]}(u,n[0])}function Lj(u,n,l){var h;let p=u.layout,y=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},l);if(y){let w=y.values,A=[];for(let I=0;I<w.length;I+=2){let R=A[I]=w[I],D=w[I+1].map(N=>N*qi);R.startsWith("top")?D[1]-=zu:R.startsWith("bottom")&&(D[1]+=zu),A[I+1]=D}return new Sn(A)}let _=p.get("text-variable-anchor");if(_){let w;w=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},l)*qi,Dq]:p.get("text-offset").evaluate(n,{},l).map(I=>I*qi);let A=[];for(let I of _)A.push(I,Dj(I,w));return new Sn(A)}return null}function Lq(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Kwe(u,n,l,h,p,y,_,w,A,I,R,D){let N=y.textMaxSize.evaluate(n,{});N===void 0&&(N=_);let j=u.layers[0].layout,U=j.get("icon-offset").evaluate(n,{},R),W=zj(l.horizontal),X=_/24,ae=u.tilePixelRatio*X,me=u.tilePixelRatio*N/24,le=u.tilePixelRatio*w,B=u.tilePixelRatio*j.get("symbol-spacing"),H=j.get("text-padding")*u.tilePixelRatio,ce=function(Tt,bt,pt,er=1){let Qr=Tt.get("icon-padding").evaluate(bt,{},pt),Ii=Qr&&Qr.values;return[Ii[0]*er,Ii[1]*er,Ii[2]*er,Ii[3]*er]}(j,n,R,u.tilePixelRatio),Ie=j.get("text-max-angle")/180*Math.PI,$e=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",Me=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",Fe=j.get("symbol-placement"),Ke=B/2,We=j.get("icon-text-fit"),He;h&&We!=="none"&&(u.allowVerticalPlacement&&l.vertical&&(He=oj(h,l.vertical,We,j.get("icon-text-fit-padding"),U,X)),W&&(h=oj(h,W,We,j.get("icon-text-fit-padding"),U,X)));let Be=R?D.line.getGranularityForZoomLevel(R.z):1,ht=(Tt,bt)=>{bt.x<0||bt.x>=Lt||bt.y<0||bt.y>=Lt||function(pt,er,Qr,Ii,hn,eo,ca,Hi,Vr,Fi,Xi,Ji,Gn,to,zi,ha,Pi,Ni,Bi,gi,Rr,Yo,Cf,Qo,Jwe){let Mf=pt.addToLineVertexArray(er,Qr),Rh,Rf,Of,kf,Uj=0,Vj=0,$j=0,Wj=0,$q=-1,Wq=-1,kl={},Gj=Xo("");if(pt.allowVerticalPlacement&&Ii.vertical){let An=Hi.layout.get("text-rotate").evaluate(Rr,{},Qo)+90;Of=new Gx(Vr,er,Fi,Xi,Ji,Ii.vertical,Gn,to,zi,An),ca&&(kf=new Gx(Vr,er,Fi,Xi,Ji,ca,Pi,Ni,zi,An))}if(hn){let An=Hi.layout.get("icon-rotate").evaluate(Rr,{}),ro=Hi.layout.get("icon-text-fit")!=="none",Oh=Oj(hn,An,Cf,ro),ts=ca?Oj(ca,An,Cf,ro):void 0;Rf=new Gx(Vr,er,Fi,Xi,Ji,hn,Pi,Ni,!1,An),Uj=4*Oh.length;let kh=pt.iconSizeData,Fs=null;kh.kind==="source"?(Fs=[Ls*Hi.layout.get("icon-size").evaluate(Rr,{})],Fs[0]>Du&&Ti(`${pt.layerIds[0]}: Value for "icon-size" is >= ${Kv}. Reduce your "icon-size".`)):kh.kind==="composite"&&(Fs=[Ls*Yo.compositeIconSizes[0].evaluate(Rr,{},Qo),Ls*Yo.compositeIconSizes[1].evaluate(Rr,{},Qo)],(Fs[0]>Du||Fs[1]>Du)&&Ti(`${pt.layerIds[0]}: Value for "icon-size" is >= ${Kv}. Reduce your "icon-size".`)),pt.addSymbols(pt.icon,Oh,Fs,gi,Bi,Rr,c.al.none,er,Mf.lineStartIndex,Mf.lineLength,-1,Qo),$q=pt.icon.placedSymbolArray.length-1,ts&&(Vj=4*ts.length,pt.addSymbols(pt.icon,ts,Fs,gi,Bi,Rr,c.al.vertical,er,Mf.lineStartIndex,Mf.lineLength,-1,Qo),Wq=pt.icon.placedSymbolArray.length-1)}let Zj=Object.keys(Ii.horizontal);for(let An of Zj){let ro=Ii.horizontal[An];if(!Rh){Gj=Xo(ro.text);let ts=Hi.layout.get("text-rotate").evaluate(Rr,{},Qo);Rh=new Gx(Vr,er,Fi,Xi,Ji,ro,Gn,to,zi,ts)}let Oh=ro.positionedLines.length===1;if($j+=Fj(pt,er,ro,eo,Hi,zi,Rr,ha,Mf,Ii.vertical?c.al.horizontal:c.al.horizontalOnly,Oh?Zj:[An],kl,$q,Yo,Qo),Oh)break}Ii.vertical&&(Wj+=Fj(pt,er,Ii.vertical,eo,Hi,zi,Rr,ha,Mf,c.al.vertical,["vertical"],kl,Wq,Yo,Qo));let Ywe=Rh?Rh.boxStartIndex:pt.collisionBoxArray.length,Qwe=Rh?Rh.boxEndIndex:pt.collisionBoxArray.length,eSe=Of?Of.boxStartIndex:pt.collisionBoxArray.length,tSe=Of?Of.boxEndIndex:pt.collisionBoxArray.length,rSe=Rf?Rf.boxStartIndex:pt.collisionBoxArray.length,iSe=Rf?Rf.boxEndIndex:pt.collisionBoxArray.length,nSe=kf?kf.boxStartIndex:pt.collisionBoxArray.length,aSe=kf?kf.boxEndIndex:pt.collisionBoxArray.length,es=-1,Kx=(An,ro)=>An&&An.circleDiameter?Math.max(An.circleDiameter,ro):ro;es=Kx(Rh,es),es=Kx(Of,es),es=Kx(Rf,es),es=Kx(kf,es);let Kj=es>-1?1:0;Kj&&(es*=Jwe/qi),pt.glyphOffsetArray.length>=qf.MAX_GLYPHS&&Ti("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Rr.sortKey!==void 0&&pt.addToSortKeyRanges(pt.symbolInstances.length,Rr.sortKey);let oSe=Lj(Hi,Rr,Qo),[sSe,lSe]=function(An,ro){let Oh=An.length,ts=ro==null?void 0:ro.values;if((ts==null?void 0:ts.length)>0)for(let kh=0;kh<ts.length;kh+=2){let Fs=ts[kh+1];An.emplaceBack(c.aB[ts[kh]],Fs[0],Fs[1])}return[Oh,An.length]}(pt.textAnchorOffsets,oSe);pt.symbolInstances.emplaceBack(er.x,er.y,kl.right>=0?kl.right:-1,kl.center>=0?kl.center:-1,kl.left>=0?kl.left:-1,kl.vertical||-1,$q,Wq,Gj,Ywe,Qwe,eSe,tSe,rSe,iSe,nSe,aSe,Fi,$j,Wj,Uj,Vj,Kj,0,Gn,es,sSe,lSe)}(u,bt,Tt,l,h,p,He,u.layers[0],u.collisionBoxArray,n.index,n.sourceLayerIndex,u.index,ae,[H,H,H,H],$e,A,le,ce,Me,U,n,y,I,R,_)};if(Fe==="line")for(let Tt of qj(n.geometry,0,0,Lt,Lt)){let bt=Mh(Tt,Be),pt=$we(bt,B,Ie,l.vertical||W,h,24,me,u.overscaling,Lt);for(let er of pt)W&&Hwe(u,W.text,Ke,er)||ht(bt,er)}else if(Fe==="line-center"){for(let Tt of n.geometry)if(Tt.length>1){let bt=Mh(Tt,Be),pt=Vwe(bt,Ie,l.vertical||W,h,24,me);pt&&ht(bt,pt)}}else if(n.type==="Polygon")for(let Tt of Gd(n.geometry,0)){let bt=Gwe(Tt,16);ht(Mh(Tt[0],Be,!0),new Fu(bt.x,bt.y,0))}else if(n.type==="LineString")for(let Tt of n.geometry){let bt=Mh(Tt,Be);ht(bt,new Fu(bt[0].x,bt[0].y,0))}else if(n.type==="Point")for(let Tt of n.geometry)for(let bt of Tt)ht([bt],new Fu(bt.x,bt.y,0))}function Fj(u,n,l,h,p,y,_,w,A,I,R,D,N,j,U){let W=function(me,le,B,H,ce,Ie,$e,Me){let Fe=H.layout.get("text-rotate").evaluate(Ie,{})*Math.PI/180,Ke=[];for(let We of le.positionedLines)for(let He of We.positionedGlyphs){if(!He.rect)continue;let Be=He.rect||{},ht=wwe+1,Tt=!0,bt=1,pt=0,er=(ce||Me)&&He.vertical,Qr=He.metrics.advance*He.scale/2;if(Me&&le.verticalizable&&(pt=We.lineOffset/2-(He.imageName?-(qi-He.metrics.width*He.scale)/2:(He.scale-1)*qi)),He.imageName){let Ni=$e[He.imageName];Tt=Ni.sdf,bt=Ni.pixelRatio,ht=ua/bt}let Ii=ce?[He.x+Qr,He.y]:[0,0],hn=ce?[0,0]:[He.x+Qr+B[0],He.y+B[1]-pt],eo=[0,0];er&&(eo=hn,hn=[0,0]);let ca=He.metrics.isDoubleResolution?2:1,Hi=(He.metrics.left-ht)*He.scale-Qr+hn[0],Vr=(-He.metrics.top-ht)*He.scale+hn[1],Fi=Hi+Be.w/ca*He.scale/bt,Xi=Vr+Be.h/ca*He.scale/bt,Ji=new z(Hi,Vr),Gn=new z(Fi,Vr),to=new z(Hi,Xi),zi=new z(Fi,Xi);if(er){let Ni=new z(-Qr,Qr-zx),Bi=-Math.PI/2,gi=qi/2-Qr,Rr=new z(5-zx-gi,-(He.imageName?gi:0)),Yo=new z(...eo);Ji._rotateAround(Bi,Ni)._add(Rr)._add(Yo),Gn._rotateAround(Bi,Ni)._add(Rr)._add(Yo),to._rotateAround(Bi,Ni)._add(Rr)._add(Yo),zi._rotateAround(Bi,Ni)._add(Rr)._add(Yo)}if(Fe){let Ni=Math.sin(Fe),Bi=Math.cos(Fe),gi=[Bi,-Ni,Ni,Bi];Ji._matMult(gi),Gn._matMult(gi),to._matMult(gi),zi._matMult(gi)}let ha=new z(0,0),Pi=new z(0,0);Ke.push({tl:Ji,tr:Gn,bl:to,br:zi,tex:Be,writingMode:le.writingMode,glyphOffset:Ii,sectionIndex:He.sectionIndex,isSDF:Tt,pixelOffsetTL:ha,pixelOffsetBR:Pi,minFontScaleX:0,minFontScaleY:0})}return Ke}(0,l,w,p,y,_,h,u.allowVerticalPlacement),X=u.textSizeData,ae=null;X.kind==="source"?(ae=[Ls*p.layout.get("text-size").evaluate(_,{})],ae[0]>Du&&Ti(`${u.layerIds[0]}: Value for "text-size" is >= ${Kv}. Reduce your "text-size".`)):X.kind==="composite"&&(ae=[Ls*j.compositeTextSizes[0].evaluate(_,{},U),Ls*j.compositeTextSizes[1].evaluate(_,{},U)],(ae[0]>Du||ae[1]>Du)&&Ti(`${u.layerIds[0]}: Value for "text-size" is >= ${Kv}. Reduce your "text-size".`)),u.addSymbols(u.text,W,ae,w,y,_,I,n,A.lineStartIndex,A.lineLength,N,U);for(let me of R)D[me]=u.text.placedSymbolArray.length-1;return 4*W.length}function zj(u){for(let n in u)return u[n];return null}function Hwe(u,n,l,h){let p=u.compareText;if(n in p){let y=p[n];for(let _=y.length-1;_>=0;_--)if(h.dist(y[_])<l)return!0}else p[n]=[];return p[n].push(h),!1}let Nj=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Fq{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[l,h]=new Uint8Array(n,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");let p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);let y=Nj[15&h];if(!y)throw new Error("Unrecognized array type.");let[_]=new Uint16Array(n,2,1),[w]=new Uint32Array(n,4,1);return new Fq(w,_,y,n)}constructor(n,l=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;let y=Nj.indexOf(this.ArrayType),_=2*n*this.ArrayType.BYTES_PER_ELEMENT,w=n*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-w%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+A,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+_+w+A),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+A,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=n)}add(n,l){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=l,h}finish(){let n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return zq(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,l,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:y,coords:_,nodeSize:w}=this,A=[0,y.length-1,0],I=[];for(;A.length;){let R=A.pop()||0,D=A.pop()||0,N=A.pop()||0;if(D-N<=w){for(let X=N;X<=D;X++){let ae=_[2*X],me=_[2*X+1];ae>=n&&ae<=h&&me>=l&&me<=p&&I.push(y[X])}continue}let j=N+D>>1,U=_[2*j],W=_[2*j+1];U>=n&&U<=h&&W>=l&&W<=p&&I.push(y[j]),(R===0?n<=U:l<=W)&&(A.push(N),A.push(j-1),A.push(1-R)),(R===0?h>=U:p>=W)&&(A.push(j+1),A.push(D),A.push(1-R))}return I}within(n,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:p,coords:y,nodeSize:_}=this,w=[0,p.length-1,0],A=[],I=h*h;for(;w.length;){let R=w.pop()||0,D=w.pop()||0,N=w.pop()||0;if(D-N<=_){for(let X=N;X<=D;X++)jj(y[2*X],y[2*X+1],n,l)<=I&&A.push(p[X]);continue}let j=N+D>>1,U=y[2*j],W=y[2*j+1];jj(U,W,n,l)<=I&&A.push(p[j]),(R===0?n-h<=U:l-h<=W)&&(w.push(N),w.push(j-1),w.push(1-R)),(R===0?n+h>=U:l+h>=W)&&(w.push(j+1),w.push(D),w.push(1-R))}return A}}function zq(u,n,l,h,p,y){if(p-h<=l)return;let _=h+p>>1;Bj(u,n,_,h,p,y),zq(u,n,l,h,_-1,1-y),zq(u,n,l,_+1,p,1-y)}function Bj(u,n,l,h,p,y){for(;p>h;){if(p-h>600){let I=p-h+1,R=l-h+1,D=Math.log(I),N=.5*Math.exp(2*D/3),j=.5*Math.sqrt(D*N*(I-N)/I)*(R-I/2<0?-1:1);Bj(u,n,l,Math.max(h,Math.floor(l-R*N/I+j)),Math.min(p,Math.floor(l+(I-R)*N/I+j)),y)}let _=n[2*l+y],w=h,A=p;for(Jv(u,n,h,l),n[2*p+y]>_&&Jv(u,n,h,p);w<A;){for(Jv(u,n,w,A),w++,A--;n[2*w+y]<_;)w++;for(;n[2*A+y]>_;)A--}n[2*h+y]===_?Jv(u,n,h,A):(A++,Jv(u,n,A,p)),A<=l&&(h=A+1),l<=A&&(p=A-1)}}function Jv(u,n,l,h){Nq(u,l,h),Nq(n,2*l,2*h),Nq(n,2*l+1,2*h+1)}function Nq(u,n,l){let h=u[n];u[n]=u[l],u[l]=h}function jj(u,n,l,h){let p=u-l,y=n-h;return p*p+y*y}var Bq;c.co=void 0,(Bq=c.co||(c.co={})).create="create",Bq.load="load",Bq.fullLoad="fullLoad";let Zx=null,Yv=[],jq=1e3/60,Uq="loadTime",Vq="fullLoadTime",Xwe={mark(u){performance.mark(u)},frame(u){let n=u;Zx!=null&&Yv.push(n-Zx),Zx=n},clearMetrics(){Zx=null,Yv=[],performance.clearMeasures(Uq),performance.clearMeasures(Vq);for(let u in c.co)performance.clearMarks(c.co[u])},getPerformanceMetrics(){performance.measure(Uq,c.co.create,c.co.load),performance.measure(Vq,c.co.create,c.co.fullLoad);let u=performance.getEntriesByName(Uq)[0].duration,n=performance.getEntriesByName(Vq)[0].duration,l=Yv.length,h=1/(Yv.reduce((y,_)=>y+_,0)/l/1e3),p=Yv.filter(y=>y>jq).reduce((y,_)=>y+(_-jq)/jq,0);return{loadTime:u,fullLoadTime:n,fps:h,percentDroppedFrames:p/(l+p)*100,totalFrames:l}}};c.$=Hv,c.A=Te,c.B=vo,c.C=Cr,c.D=vt,c.E=ve,c.F=HA,c.G=function(u){if(Ha==null){let n=u.navigator?u.navigator.userAgent:null;Ha=!!u.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Ha},c.H=class{constructor(u,n){this.target=u,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Bwe(()=>this.process()),this.subscription=As(this.target,"message",l=>this.receive(l),!1),this.globalScope=Sa(self)?u:window}registerMessageHandler(u,n){this.messageHandlers[u]=n}sendAsync(u,n){return new Promise((l,h)=>{let p=Math.round(1e18*Math.random()).toString(36).substring(0,10),y=n?As(n.signal,"abort",()=>{y==null||y.unsubscribe(),delete this.resolveRejects[p];let A={id:p,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(A)},jwe):null;this.resolveRejects[p]={resolve:A=>{y==null||y.unsubscribe(),l(A)},reject:A=>{y==null||y.unsubscribe(),h(A)}};let _=[],w=Object.assign(Object.assign({},u),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Mu(u.data,_)});this.target.postMessage(w,{transfer:_})})}receive(u){let n=u.data,l=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[l];let h=this.abortControllers[l];return delete this.abortControllers[l],void(h&&h.abort())}if(Sa(self)||n.mustQueue)return this.tasks[l]=n,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,n)}}process(){if(this.taskQueue.length===0)return;let u=this.taskQueue.shift(),n=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(u,n)}processTask(u,n){return a(this,void 0,void 0,function*(){if(n.type==="<response>"){let p=this.resolveRejects[u];return delete this.resolveRejects[u],p?void(n.error?p.reject(_h(n.error)):p.resolve(_h(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let l=_h(n.data),h=new AbortController;this.abortControllers[u]=h;try{let p=yield this.messageHandlers[n.type](n.sourceMapId,l,h);this.completeTask(u,null,p)}catch(p){this.completeTask(u,p)}})}completeTask(u,n,l){let h=[];delete this.abortControllers[u];let p={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Mu(n):null,data:Mu(l,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.I=Tq,c.J=Bt,c.K=function(){var u=new Te(16);return Te!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},c.L=function(u,n,l){var h,p,y,_,w,A,I,R,D,N,j,U,W=l[0],X=l[1],ae=l[2];return n===u?(u[12]=n[0]*W+n[4]*X+n[8]*ae+n[12],u[13]=n[1]*W+n[5]*X+n[9]*ae+n[13],u[14]=n[2]*W+n[6]*X+n[10]*ae+n[14],u[15]=n[3]*W+n[7]*X+n[11]*ae+n[15]):(p=n[1],y=n[2],_=n[3],w=n[4],A=n[5],I=n[6],R=n[7],D=n[8],N=n[9],j=n[10],U=n[11],u[0]=h=n[0],u[1]=p,u[2]=y,u[3]=_,u[4]=w,u[5]=A,u[6]=I,u[7]=R,u[8]=D,u[9]=N,u[10]=j,u[11]=U,u[12]=h*W+w*X+D*ae+n[12],u[13]=p*W+A*X+N*ae+n[13],u[14]=y*W+I*X+j*ae+n[14],u[15]=_*W+R*X+U*ae+n[15]),u},c.M=function(u,n,l){var h=l[0],p=l[1],y=l[2];return u[0]=n[0]*h,u[1]=n[1]*h,u[2]=n[2]*h,u[3]=n[3]*h,u[4]=n[4]*p,u[5]=n[5]*p,u[6]=n[6]*p,u[7]=n[7]*p,u[8]=n[8]*y,u[9]=n[9]*y,u[10]=n[10]*y,u[11]=n[11]*y,u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15],u},c.N=function(u,n,l){var h=n[0],p=n[1],y=n[2],_=n[3],w=n[4],A=n[5],I=n[6],R=n[7],D=n[8],N=n[9],j=n[10],U=n[11],W=n[12],X=n[13],ae=n[14],me=n[15],le=l[0],B=l[1],H=l[2],ce=l[3];return u[0]=le*h+B*w+H*D+ce*W,u[1]=le*p+B*A+H*N+ce*X,u[2]=le*y+B*I+H*j+ce*ae,u[3]=le*_+B*R+H*U+ce*me,u[4]=(le=l[4])*h+(B=l[5])*w+(H=l[6])*D+(ce=l[7])*W,u[5]=le*p+B*A+H*N+ce*X,u[6]=le*y+B*I+H*j+ce*ae,u[7]=le*_+B*R+H*U+ce*me,u[8]=(le=l[8])*h+(B=l[9])*w+(H=l[10])*D+(ce=l[11])*W,u[9]=le*p+B*A+H*N+ce*X,u[10]=le*y+B*I+H*j+ce*ae,u[11]=le*_+B*R+H*U+ce*me,u[12]=(le=l[12])*h+(B=l[13])*w+(H=l[14])*D+(ce=l[15])*W,u[13]=le*p+B*A+H*N+ce*X,u[14]=le*y+B*I+H*j+ce*ae,u[15]=le*_+B*R+H*U+ce*me,u},c.O=function(u,n){let l={};for(let h=0;h<n.length;h++){let p=n[h];p in u&&(l[p]=u[p])}return l},c.P=z,c.Q=Lu,c.R=Ya,c.S=vj,c.T=Ex,c.U=mj,c.V=Q,c.W=ee,c.X=Es,c.Y=Qa,c.Z=Lt,c._=a,c.a=tt,c.a$=function(u,n,l){var h=Math.sin(l),p=Math.cos(l),y=n[4],_=n[5],w=n[6],A=n[7],I=n[8],R=n[9],D=n[10],N=n[11];return n!==u&&(u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u[4]=y*p+I*h,u[5]=_*p+R*h,u[6]=w*p+D*h,u[7]=A*p+N*h,u[8]=I*p-y*h,u[9]=R*p-_*h,u[10]=D*p-w*h,u[11]=N*p-A*h,u},c.a0=25,c.a1=kq,c.a2=u=>{let n=window.document.createElement("video");return n.muted=!0,new Promise(l=>{n.onloadstart=()=>{l(n)};for(let h of u){let p=window.document.createElement("source");Se(h)||(n.crossOrigin="Anonymous"),p.src=h,n.appendChild(p)}})},c.a3=Le,c.a4=function(){return Ss++},c.a5=ne,c.a6=qf,c.a7=mh,c.a8=Ih,c.a9=Sj,c.aA=function(u,n,l,h,p=!1){if(!l[0]&&!l[1])return[0,0];let y=p?h==="map"?-u.bearingInRadians:0:h==="viewport"?u.bearingInRadians:0;if(y){let _=Math.sin(y),w=Math.cos(y);l=[l[0]*w-l[1]*_,l[0]*_+l[1]*w]}return[p?l[0]:Dr(n,l[0],u.zoom),p?l[1]:Dr(n,l[1],u.zoom)]},c.aC=qq,c.aD=Lq,c.aE=Aq,c.aF=Fq,c.aG=Nr,c.aH=Dx,c.aI=De,c.aJ=dr,c.aK=hr,c.aL=fo,c.aM=ge,c.aN=yj,c.aO=function(u,n,l){return u[0]=n[0]*l,u[1]=n[1]*l,u[2]=n[2]*l,u},c.aP=function(u,n,l){return u[0]=n[0]+l[0],u[1]=n[1]+l[1],u[2]=n[2]+l[2],u},c.aQ=function(u){var n=new Te(3);return n[0]=u[0],n[1]=u[1],n[2]=u[2],n},c.aR=function(u,n,l){return u[0]=n[0]*l[0],u[1]=n[1]*l[1],u[2]=n[2]*l[2],u[3]=n[3]*l[3],u},c.aS=function(u,n,l){return u[0]=n[0]-l[0],u[1]=n[1]-l[1],u[2]=n[2]-l[2],u},c.aT=function(u,n){var l=n[0],h=n[1],p=n[2],y=l*l+h*h+p*p;return y>0&&(y=1/Math.sqrt(y)),u[0]=n[0]*y,u[1]=n[1]*y,u[2]=n[2]*y,u},c.aU=function(u,n,l){var h=n[0],p=n[1],y=n[2],_=l[0],w=l[1],A=l[2];return u[0]=p*A-y*w,u[1]=y*_-h*A,u[2]=h*w-p*_,u},c.aV=function(u,n){return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]},c.aW=xj,c.aX=If,c.aY=function(u,n,l,h,p){var y,_=1/Math.tan(n/2);return u[0]=_/l,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=_,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,p!=null&&p!==1/0?(u[10]=(p+h)*(y=1/(h-p)),u[14]=2*p*h*y):(u[10]=-1,u[14]=-2*h),u},c.aZ=function(u){var n=new Te(16);return n[0]=u[0],n[1]=u[1],n[2]=u[2],n[3]=u[3],n[4]=u[4],n[5]=u[5],n[6]=u[6],n[7]=u[7],n[8]=u[8],n[9]=u[9],n[10]=u[10],n[11]=u[11],n[12]=u[12],n[13]=u[13],n[14]=u[14],n[15]=u[15],n},c.a_=function(u,n,l){var h=Math.sin(l),p=Math.cos(l),y=n[0],_=n[1],w=n[2],A=n[3],I=n[4],R=n[5],D=n[6],N=n[7];return n!==u&&(u[8]=n[8],u[9]=n[9],u[10]=n[10],u[11]=n[11],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u[0]=y*p+I*h,u[1]=_*p+R*h,u[2]=w*p+D*h,u[3]=A*p+N*h,u[4]=I*p-y*h,u[5]=R*p-_*h,u[6]=D*p-w*h,u[7]=N*p-A*h,u},c.aa=function(u){let n={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,p,y)=>{let _=p||y;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){let l=parseInt(n["max-age"],10);isNaN(l)?delete n["max-age"]:n["max-age"]=l}return n},c.ab=mo,c.ac=function(u){return Math.pow(2,u)},c.ad=Ne,c.ae=fi,c.af=85.051129,c.ag=gj,c.ah=function(u){return Math.log(u)/Math.LN2},c.ai=function(u){var n=u[0],l=u[1];return n*n+l*l},c.aj=function(u,n){let l=[];for(let h in u)h in n||l.push(h);return l},c.ak=function(u,n){let l=0,h=0;if(u.kind==="constant")h=u.layoutSize;else if(u.kind!=="source"){let{interpolationType:p,minZoom:y,maxZoom:_}=u,w=p?fi(ln.interpolationFactor(p,n,y,_),0,1):0;u.kind==="camera"?h=vo.number(u.minSize,u.maxSize,w):l=w}return{uSizeT:l,uSize:h}},c.am=function(u,{uSize:n,uSizeT:l},{lowerSize:h,upperSize:p}){return u.kind==="source"?h/Ls:u.kind==="composite"?vo.number(h/Ls,p/Ls,l):n},c.an=function(u,n){var l=n[0],h=n[1],p=n[2],y=n[3],_=n[4],w=n[5],A=n[6],I=n[7],R=n[8],D=n[9],N=n[10],j=n[11],U=n[12],W=n[13],X=n[14],ae=n[15],me=l*w-h*_,le=l*A-p*_,B=l*I-y*_,H=h*A-p*w,ce=h*I-y*w,Ie=p*I-y*A,$e=R*W-D*U,Me=R*X-N*U,Fe=R*ae-j*U,Ke=D*X-N*W,We=D*ae-j*W,He=N*ae-j*X,Be=me*He-le*We+B*Ke+H*Fe-ce*Me+Ie*$e;return Be?(u[0]=(w*He-A*We+I*Ke)*(Be=1/Be),u[1]=(p*We-h*He-y*Ke)*Be,u[2]=(W*Ie-X*ce+ae*H)*Be,u[3]=(N*ce-D*Ie-j*H)*Be,u[4]=(A*Fe-_*He-I*Me)*Be,u[5]=(l*He-p*Fe+y*Me)*Be,u[6]=(X*B-U*Ie-ae*le)*Be,u[7]=(R*Ie-N*B+j*le)*Be,u[8]=(_*We-w*Fe+I*$e)*Be,u[9]=(h*Fe-l*We-y*$e)*Be,u[10]=(U*ce-W*B+ae*me)*Be,u[11]=(D*B-R*ce-j*me)*Be,u[12]=(w*Me-_*Ke-A*$e)*Be,u[13]=(l*Ke-h*Me+p*$e)*Be,u[14]=(W*le-U*H-X*me)*Be,u[15]=(R*H-D*le+N*me)*Be,u):null},c.ao=xr,c.ap=function(u){return Math.hypot(u[0],u[1])},c.aq=function(u){return u[0]=0,u[1]=0,u},c.ar=function(u,n,l){return u[0]=n[0]*l,u[1]=n[1]*l,u},c.as=Iq,c.at=wt,c.au=function(u,n,l,h){let p=n.y-u.y,y=n.x-u.x,_=h.y-l.y,w=h.x-l.x,A=_*y-w*p;if(A===0)return null;let I=(w*(u.y-l.y)-_*(u.x-l.x))/A;return new z(u.x+I*y,u.y+I*p)},c.av=qj,c.aw=d3,c.ax=function(u){let n=1/0,l=1/0,h=-1/0,p=-1/0;for(let y of u)n=Math.min(n,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),p=Math.max(p,y.y);return[n,l,h,p]},c.ay=qi,c.az=Dr,c.b=Un,c.b$=class extends ${},c.b0=function(){let u=new Float32Array(16);return Ne(u),u},c.b1=function(){let u=new Float64Array(16);return Ne(u),u},c.b2=function(){return new Float64Array(16)},c.b3=function(u,n,l){let h=new Float64Array(4);return function(p,y,_,w){var A=.5*Math.PI/180;y*=A,_*=A,w*=A;var I=Math.sin(y),R=Math.cos(y),D=Math.sin(_),N=Math.cos(_),j=Math.sin(w),U=Math.cos(w);p[0]=I*N*U-R*D*j,p[1]=R*D*U+I*N*j,p[2]=R*N*j-I*D*U,p[3]=R*N*U+I*D*j}(h,u,n-90,l),h},c.b4=function(u,n,l,h){var p,y,_,w,A,I=n[0],R=n[1],D=n[2],N=n[3],j=l[0],U=l[1],W=l[2],X=l[3];return(y=I*j+R*U+D*W+N*X)<0&&(y=-y,j=-j,U=-U,W=-W,X=-X),1-y>xe?(p=Math.acos(y),_=Math.sin(p),w=Math.sin((1-h)*p)/_,A=Math.sin(h*p)/_):(w=1-h,A=h),u[0]=w*I+A*j,u[1]=w*R+A*U,u[2]=w*D+A*W,u[3]=w*N+A*X,u},c.b5=function(u){let n=new Float64Array(9);var l,h,p,y,_,w,A,I,R,D,N,j,U,W,X,ae,me,le;D=(p=(h=u)[0])*(A=p+p),N=(y=h[1])*A,U=(_=h[2])*A,W=_*(I=y+y),ae=(w=h[3])*A,me=w*I,le=w*(R=_+_),(l=n)[0]=1-(j=y*I)-(X=_*R),l[3]=N-le,l[6]=U+me,l[1]=N+le,l[4]=1-D-X,l[7]=W-ae,l[2]=U-me,l[5]=W+ae,l[8]=1-D-j;let B=ge(-Math.asin(fi(n[2],-1,1))),H,ce;return Math.hypot(n[5],n[8])<.001?(H=0,ce=-ge(Math.atan2(n[3],n[4]))):(H=ge(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),ce=ge(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:H,pitch:B+90,bearing:ce}},c.b6=function(u,n){return u.roll==n.roll&&u.pitch==n.pitch&&u.bearing==n.bearing},c.b7=ir,c.b8=bf,c.b9=Ef,c.bA=function(u){if(u.type==="custom")return new Nwe(u);switch(u.type){case"background":return new Lwe(u);case"circle":return new M1e(u);case"fill":return new X1e(u);case"fill-extrusion":return new nwe(u);case"heatmap":return new O1e(u);case"hillshade":return new D1e(u);case"line":return new dwe(u);case"raster":return new zwe(u);case"symbol":return new Ux(u)}},c.bB=Wi,c.bC=function(u,n){if(!u)return[{command:"setStyle",args:[n]}];let l=[];try{if(!Ae(u.version,n.version))return[{command:"setStyle",args:[n]}];Ae(u.center,n.center)||l.push({command:"setCenter",args:[n.center]}),Ae(u.state,n.state)||l.push({command:"setGlobalState",args:[n.state]}),Ae(u.centerAltitude,n.centerAltitude)||l.push({command:"setCenterAltitude",args:[n.centerAltitude]}),Ae(u.zoom,n.zoom)||l.push({command:"setZoom",args:[n.zoom]}),Ae(u.bearing,n.bearing)||l.push({command:"setBearing",args:[n.bearing]}),Ae(u.pitch,n.pitch)||l.push({command:"setPitch",args:[n.pitch]}),Ae(u.roll,n.roll)||l.push({command:"setRoll",args:[n.roll]}),Ae(u.sprite,n.sprite)||l.push({command:"setSprite",args:[n.sprite]}),Ae(u.glyphs,n.glyphs)||l.push({command:"setGlyphs",args:[n.glyphs]}),Ae(u.transition,n.transition)||l.push({command:"setTransition",args:[n.transition]}),Ae(u.light,n.light)||l.push({command:"setLight",args:[n.light]}),Ae(u.terrain,n.terrain)||l.push({command:"setTerrain",args:[n.terrain]}),Ae(u.sky,n.sky)||l.push({command:"setSky",args:[n.sky]}),Ae(u.projection,n.projection)||l.push({command:"setProjection",args:[n.projection]});let h={},p=[];(function(_,w,A,I){let R;for(R in w=w||{},_=_||{})Object.prototype.hasOwnProperty.call(_,R)&&(Object.prototype.hasOwnProperty.call(w,R)||Ue(R,A,I));for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&(Object.prototype.hasOwnProperty.call(_,R)?Ae(_[R],w[R])||(_[R].type==="geojson"&&w[R].type==="geojson"&&rt(_,w,R)?Ce(A,{command:"setGeoJSONSourceData",args:[R,w[R].data]}):et(R,w,A,I)):Ee(R,w,A))})(u.sources,n.sources,p,h);let y=[];u.layers&&u.layers.forEach(_=>{"source"in _&&h[_.source]?l.push({command:"removeLayer",args:[_.id]}):y.push(_)}),l=l.concat(p),function(_,w,A){w=w||[];let I=(_=_||[]).map(jt),R=w.map(jt),D=_.reduce(Mt,{}),N=w.reduce(Mt,{}),j=I.slice(),U=Object.create(null),W,X,ae,me,le;for(let B=0,H=0;B<I.length;B++)W=I[B],Object.prototype.hasOwnProperty.call(N,W)?H++:(Ce(A,{command:"removeLayer",args:[W]}),j.splice(j.indexOf(W,H),1));for(let B=0,H=0;B<R.length;B++)W=R[R.length-1-B],j[j.length-1-B]!==W&&(Object.prototype.hasOwnProperty.call(D,W)?(Ce(A,{command:"removeLayer",args:[W]}),j.splice(j.lastIndexOf(W,j.length-H),1)):H++,me=j[j.length-B],Ce(A,{command:"addLayer",args:[N[W],me]}),j.splice(j.length-B,0,W),U[W]=!0);for(let B=0;B<R.length;B++)if(W=R[B],X=D[W],ae=N[W],!U[W]&&!Ae(X,ae))if(Ae(X.source,ae.source)&&Ae(X["source-layer"],ae["source-layer"])&&Ae(X.type,ae.type)){for(le in St(X.layout,ae.layout,A,W,null,"setLayoutProperty"),St(X.paint,ae.paint,A,W,null,"setPaintProperty"),Ae(X.filter,ae.filter)||Ce(A,{command:"setFilter",args:[W,ae.filter]}),Ae(X.minzoom,ae.minzoom)&&Ae(X.maxzoom,ae.maxzoom)||Ce(A,{command:"setLayerZoomRange",args:[W,ae.minzoom,ae.maxzoom]}),X)Object.prototype.hasOwnProperty.call(X,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?St(X[le],ae[le],A,W,le.slice(6),"setPaintProperty"):Ae(X[le],ae[le])||Ce(A,{command:"setLayerProperty",args:[W,le,ae[le]]}));for(le in ae)Object.prototype.hasOwnProperty.call(ae,le)&&!Object.prototype.hasOwnProperty.call(X,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?St(X[le],ae[le],A,W,le.slice(6),"setPaintProperty"):Ae(X[le],ae[le])||Ce(A,{command:"setLayerProperty",args:[W,le,ae[le]]}))}else Ce(A,{command:"removeLayer",args:[W]}),me=j[j.lastIndexOf(W)+1],Ce(A,{command:"addLayer",args:[ae,me]})}(y,n.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:"setStyle",args:[n]}]}return l},c.bD=function(u){let n=[],l=u.id;return l===void 0&&n.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&n.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&n.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),n},c.bE=function u(n,l){if(Array.isArray(n)){if(!Array.isArray(l)||n.length!==l.length)return!1;for(let h=0;h<n.length;h++)if(!u(n[h],l[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&l!==null){if(typeof l!="object"||Object.keys(n).length!==Object.keys(l).length)return!1;for(let h in n)if(!u(n[h],l[h]))return!1;return!0}return n===l},c.bF=po,c.bG=ml,c.bH=class extends Mr{constructor(u,n){super(u,n),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},c.bI=Cx,c.bJ=class extends Mr{constructor(u,n){super(u,n),this.current=tq}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let n=1;n<16;n++)if(u[n]!==this.current[n]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},c.bK=Px,c.bL=class extends Mr{constructor(u,n){super(u,n),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},c.bM=class extends Mr{constructor(u,n){super(u,n),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},c.bN=Je,c.bO=function(u,n){var l=Math.sin(n),h=Math.cos(n);return u[0]=h,u[1]=l,u[2]=0,u[3]=-l,u[4]=h,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},c.bP=function(u,n,l){var h=n[0],p=n[1],y=n[2];return u[0]=h*l[0]+p*l[3]+y*l[6],u[1]=h*l[1]+p*l[4]+y*l[7],u[2]=h*l[2]+p*l[5]+y*l[8],u},c.bQ=function(u,n,l,h,p,y,_){var w=1/(n-l),A=1/(h-p),I=1/(y-_);return u[0]=-2*w,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*A,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*I,u[11]=0,u[12]=(n+l)*w,u[13]=(p+h)*A,u[14]=(_+y)*I,u[15]=1,u},c.bR=class extends Mr{constructor(u,n){super(u,n),this.current=new Array}set(u){if(u!=this.current){this.current=u;let n=new Float32Array(4*u.length);for(let l=0;l<u.length;l++)n[4*l]=u[l].r,n[4*l+1]=u[l].g,n[4*l+2]=u[l].b,n[4*l+3]=u[l].a;this.gl.uniform4fv(this.location,n)}}},c.bS=class extends Mr{constructor(u,n){super(u,n),this.current=new Array}set(u){if(u!=this.current){this.current=u;let n=new Float32Array(u);this.gl.uniform1fv(this.location,n)}}},c.bT=class extends v{},c.bU=vwe,c.bV=class extends T{},c.bW=lq,c.bX=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},c.bY=w3,c.bZ=function(u,n,l){var h=n[0],p=n[1],y=n[2],_=l[3]*h+l[7]*p+l[11]*y+l[15];return u[0]=(l[0]*h+l[4]*p+l[8]*y+l[12])/(_=_||1),u[1]=(l[1]*h+l[5]*p+l[9]*y+l[13])/_,u[2]=(l[2]*h+l[6]*p+l[10]*y+l[14])/_,u},c.b_=class extends Ml{},c.ba=jv,c.bb=Tf,c.bc=wa,c.bd=nn,c.be=Wn,c.bf=function(u,n,l,h,p){return wa(h,p,fi((u-n)/(l-n),0,1))},c.bg=Si,c.bh=function(){return new Float64Array(3)},c.bi=function(u,n,l,h){return u[0]=n[0]+l[0]*h,u[1]=n[1]+l[1]*h,u[2]=n[2]+l[2]*h,u},c.bj=kr,c.bk=function(){return new Float64Array(4)},c.bl=function(u,n,l,h){var p=[],y=[];return p[0]=n[0]-l[0],p[1]=n[1]-l[1],p[2]=n[2]-l[2],y[0]=p[0]*Math.cos(h)-p[1]*Math.sin(h),y[1]=p[0]*Math.sin(h)+p[1]*Math.cos(h),y[2]=p[2],u[0]=y[0]+l[0],u[1]=y[1]+l[1],u[2]=y[2]+l[2],u},c.bm=function(u,n,l,h){var p=[],y=[];return p[0]=n[0]-l[0],p[1]=n[1]-l[1],p[2]=n[2]-l[2],y[0]=p[0],y[1]=p[1]*Math.cos(h)-p[2]*Math.sin(h),y[2]=p[1]*Math.sin(h)+p[2]*Math.cos(h),u[0]=y[0]+l[0],u[1]=y[1]+l[1],u[2]=y[2]+l[2],u},c.bn=function(u,n,l,h){var p=[],y=[];return p[0]=n[0]-l[0],p[1]=n[1]-l[1],p[2]=n[2]-l[2],y[0]=p[2]*Math.sin(h)+p[0]*Math.cos(h),y[1]=p[1],y[2]=p[2]*Math.cos(h)-p[0]*Math.sin(h),u[0]=y[0]+l[0],u[1]=y[1]+l[1],u[2]=y[2]+l[2],u},c.bo=xt,c.bp=function(u,n,l){var h=Math.sin(l),p=Math.cos(l),y=n[0],_=n[1],w=n[2],A=n[3],I=n[8],R=n[9],D=n[10],N=n[11];return n!==u&&(u[4]=n[4],u[5]=n[5],u[6]=n[6],u[7]=n[7],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u[0]=y*p-I*h,u[1]=_*p-R*h,u[2]=w*p-D*h,u[3]=A*p-N*h,u[8]=y*h+I*p,u[9]=_*h+R*p,u[10]=w*h+D*p,u[11]=A*h+N*p,u},c.bq=function(u,n){let l=Si(u,360),h=Si(n,360),p=h-l,y=h>l?p-360:p+360;return Math.abs(p)<Math.abs(y)?p:y},c.br=function(u){return u[0]=0,u[1]=0,u[2]=0,u},c.bs=function(u,n,l,h){let p=Math.sqrt(u*u+n*n),y=Math.sqrt(l*l+h*h);u/=p,n/=p,l/=y,h/=y;let _=Math.acos(u*l+n*h);return-n*l+u*h>0?_:-_},c.bt=function(u,n){return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]+u[3]},c.bu=Rq,c.bv=function(u,n){let l=Si(u,2*Math.PI),h=Si(n,2*Math.PI);return Math.min(Math.abs(l-h),Math.abs(l-h+2*Math.PI),Math.abs(l-h-2*Math.PI))},c.bw=function(){let u={},n=J.$version;for(let l in J.$root){let h=J.$root[l];if(h.required){let p=null;p=l==="version"?n:h.type==="array"?[]:{},p!=null&&(u[l]=p)}}return u},c.bx=Sv,c.by=tr,c.bz=function(u){u=u.slice();let n=Object.create(null);for(let l=0;l<u.length;l++)n[u[l].id]=u[l];for(let l=0;l<u.length;l++)"ref"in u[l]&&(u[l]=be(u[l],n[u[l].ref]));return u},c.c=st,c.c0=function(u,n){return u[0]===n[0]&&u[1]===n[1]&&u[2]===n[2]&&u[3]===n[3]&&u[4]===n[4]&&u[5]===n[5]&&u[6]===n[6]&&u[7]===n[7]&&u[8]===n[8]&&u[9]===n[9]&&u[10]===n[10]&&u[11]===n[11]&&u[12]===n[12]&&u[13]===n[13]&&u[14]===n[14]&&u[15]===n[15]},c.c1=function(u,n){var l=u[0],h=u[1],p=u[2],y=u[3],_=u[4],w=u[5],A=u[6],I=u[7],R=u[8],D=u[9],N=u[10],j=u[11],U=u[12],W=u[13],X=u[14],ae=u[15],me=n[0],le=n[1],B=n[2],H=n[3],ce=n[4],Ie=n[5],$e=n[6],Me=n[7],Fe=n[8],Ke=n[9],We=n[10],He=n[11],Be=n[12],ht=n[13],Tt=n[14],bt=n[15];return Math.abs(l-me)<=xe*Math.max(1,Math.abs(l),Math.abs(me))&&Math.abs(h-le)<=xe*Math.max(1,Math.abs(h),Math.abs(le))&&Math.abs(p-B)<=xe*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(y-H)<=xe*Math.max(1,Math.abs(y),Math.abs(H))&&Math.abs(_-ce)<=xe*Math.max(1,Math.abs(_),Math.abs(ce))&&Math.abs(w-Ie)<=xe*Math.max(1,Math.abs(w),Math.abs(Ie))&&Math.abs(A-$e)<=xe*Math.max(1,Math.abs(A),Math.abs($e))&&Math.abs(I-Me)<=xe*Math.max(1,Math.abs(I),Math.abs(Me))&&Math.abs(R-Fe)<=xe*Math.max(1,Math.abs(R),Math.abs(Fe))&&Math.abs(D-Ke)<=xe*Math.max(1,Math.abs(D),Math.abs(Ke))&&Math.abs(N-We)<=xe*Math.max(1,Math.abs(N),Math.abs(We))&&Math.abs(j-He)<=xe*Math.max(1,Math.abs(j),Math.abs(He))&&Math.abs(U-Be)<=xe*Math.max(1,Math.abs(U),Math.abs(Be))&&Math.abs(W-ht)<=xe*Math.max(1,Math.abs(W),Math.abs(ht))&&Math.abs(X-Tt)<=xe*Math.max(1,Math.abs(X),Math.abs(Tt))&&Math.abs(ae-bt)<=xe*Math.max(1,Math.abs(ae),Math.abs(bt))},c.c2=function(u,n){return u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3],u[4]=n[4],u[5]=n[5],u[6]=n[6],u[7]=n[7],u[8]=n[8],u[9]=n[9],u[10]=n[10],u[11]=n[11],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15],u},c.c3=u=>u.type==="symbol",c.c4=u=>u.type==="circle",c.c5=u=>u.type==="heatmap",c.c6=u=>u.type==="line",c.c7=u=>u.type==="fill",c.c8=u=>u.type==="fill-extrusion",c.c9=u=>u.type==="hillshade",c.cA=fq,c.cB=yq,c.cC=Vv,c.cD=wq,c.cE=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},c.cF=function(u,n,l,h,p){return a(this,void 0,void 0,function*(){if(ee())try{return yield Es(u,n,l,h,p)}catch(y){}return function(y,_,w,A,I){let R=y.width,D=y.height;_n&&Ta||(_n=new OffscreenCanvas(R,D),Ta=_n.getContext("2d",{willReadFrequently:!0})),_n.width=R,_n.height=D,Ta.drawImage(y,0,0,R,D);let N=Ta.getImageData(_,w,A,I);return Ta.clearRect(0,0,R,D),N.data}(u,n,l,h,p)})},c.cG=bj,c.cH=g,c.cI=P,c.cJ=N3,c.cK=J3,c.cL=of,c.cM=Ho,c.ca=u=>u.type==="raster",c.cb=u=>u.type==="background",c.cc=u=>u.type==="custom",c.cd=ws,c.ce=function(u,n,l){let h=Kr(n.x-l.x,n.y-l.y),p=Kr(u.x-l.x,u.y-l.y);var y,_;return ge(Math.atan2(h[0]*p[1]-h[1]*p[0],(y=h)[0]*(_=p)[0]+y[1]*_[1]))},c.cf=jn,c.cg=function(u,n){return Ve[n]&&(u instanceof MouseEvent||u instanceof WheelEvent)},c.ch=function(u,n){return Re[n]&&"touches"in u},c.ci=function(u){return Re[u]||Ve[u]},c.cj=function(u,n,l){var h=n[0],p=n[1];return u[0]=l[0]*h+l[4]*p+l[12],u[1]=l[1]*h+l[5]*p+l[13],u},c.ck=function(u,n){let{x:l,y:h}=Hv.fromLngLat(n);return!(u<0||u>25||h<0||h>=1||l<0||l>=1)},c.cl=function(u,n){return u[0]=n[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=n[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=n[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},c.cm=class extends Th{},c.cn=Xwe,c.cp=function(u){return u.message===gt},c.cq=Kt,c.cr=function(u,n){tt.REGISTERED_PROTOCOLS[u]=n},c.cs=function(u){delete tt.REGISTERED_PROTOCOLS[u]},c.ct=function(u,n){let l={};for(let p=0;p<u.length;p++){let y=n&&n[u[p].id]||px(u[p]);n&&(n[u[p].id]=y);let _=l[y];_||(_=l[y]=[]),_.push(u[p])}let h=[];for(let p in l)h.push(l[p]);return h},c.cu=ct,c.cv=wj,c.cw=Tj,c.cx=Q3,c.cy=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=Lt/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;let n=u.bucket.layers[0],l=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new Cr(u.bucket.zoom+1),u.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Cr(u.bucket.zoom+1),u.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Cr(18))};if(u.bucket.textSizeData.kind==="composite"){let{minZoom:I,maxZoom:R}=u.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Cr(I),u.canonical),h["text-size"].possiblyEvaluate(new Cr(R),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){let{minZoom:I,maxZoom:R}=u.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Cr(I),u.canonical),h["icon-size"].possiblyEvaluate(new Cr(R),u.canonical)]}let y=l.get("text-line-height")*qi,_=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",w=l.get("text-keep-upright"),A=l.get("text-size");for(let I of u.bucket.features){let R=l.get("text-font").evaluate(I,{},u.canonical).join(","),D=A.evaluate(I,{},u.canonical),N=p.layoutTextSize.evaluate(I,{},u.canonical),j=p.layoutIconSize.evaluate(I,{},u.canonical),U={horizontal:{},vertical:void 0},W=I.text,X,ae=[0,0];if(W){let B=W.toString(),H=l.get("text-letter-spacing").evaluate(I,{},u.canonical)*qi,ce=XA(B)?H:0,Ie=l.get("text-anchor").evaluate(I,{},u.canonical),$e=Lj(n,I,u.canonical);if(!$e){let We=l.get("text-radial-offset").evaluate(I,{},u.canonical);ae=We?Dj(Ie,[We*qi,Dq]):l.get("text-offset").evaluate(I,{},u.canonical).map(He=>He*qi)}let Me=_?"center":l.get("text-justify").evaluate(I,{},u.canonical),Fe=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(I,{},u.canonical)*qi:1/0,Ke=()=>{u.bucket.allowVerticalPlacement&&gf(B)&&(U.vertical=Nx(W,u.glyphMap,u.glyphPositions,u.imagePositions,R,Fe,y,Ie,"left",ce,ae,c.al.vertical,!0,N,D))};if(!_&&$e){let We=new Set;if(Me==="auto")for(let Be=0;Be<$e.values.length;Be+=2)We.add(Lq($e.values[Be]));else We.add(Me);let He=!1;for(let Be of We)if(!U.horizontal[Be])if(He)U.horizontal[Be]=U.horizontal[0];else{let ht=Nx(W,u.glyphMap,u.glyphPositions,u.imagePositions,R,Fe,y,"center",Be,ce,ae,c.al.horizontal,!1,N,D);ht&&(U.horizontal[Be]=ht,He=ht.positionedLines.length===1)}Ke()}else{Me==="auto"&&(Me=Lq(Ie));let We=Nx(W,u.glyphMap,u.glyphPositions,u.imagePositions,R,Fe,y,Ie,Me,ce,ae,c.al.horizontal,!1,N,D);We&&(U.horizontal[Me]=We),Ke(),gf(B)&&_&&w&&(U.vertical=Nx(W,u.glyphMap,u.glyphPositions,u.imagePositions,R,Fe,y,Ie,Me,ce,ae,c.al.vertical,!1,N,D))}}let me=!1;if(I.icon&&I.icon.name){let B=u.imageMap[I.icon.name];B&&(X=Mwe(u.imagePositions[I.icon.name],l.get("icon-offset").evaluate(I,{},u.canonical),l.get("icon-anchor").evaluate(I,{},u.canonical)),me=!!B.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=me:u.bucket.sdfIcons!==me&&Ti("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(B.pixelRatio!==u.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}let le=zj(U.horizontal)||U.vertical;u.bucket.iconsInText=!!le&&le.iconsInText,(le||X)&&Kwe(u.bucket,I,U,X,u.imageMap,p,N,j,ae,me,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},c.cz=_q,c.d=Se,c.e=an,c.f=u=>a(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));let n=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(n)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=dt,c.h=u=>new Promise((n,l)=>{let h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Ts})},h.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let p=new Blob([new Uint8Array(u)],{type:"image/png"});h.src=u.byteLength?URL.createObjectURL(p):Ts}),c.i=Sa,c.j=(u,n)=>xn(an(u,{type:"json"}),n),c.k=ue,c.l=Y,c.m=xn,c.n=(u,n)=>xn(an(u,{type:"arrayBuffer"}),n),c.o=function(u){return new wq(u).readFields(_we,[])},c.p=Y3,c.q=Lv,c.r=pi,c.s=As,c.t=ff,c.u=Yt,c.v=J,c.w=Ti,c.x=wv,c.y=Pu,c.z=function([u,n,l]){return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:u*Math.cos(n)*Math.sin(l),y:u*Math.sin(n)*Math.sin(l),z:u*Math.cos(l)}}}),i("worker",["./shared"],function(c){"use strict";class a{constructor(G){this.keyCache={},G&&this.replace(G)}replace(G){this._layerConfigs={},this._layers={},this.update(G,[])}update(G,Z){for(let ue of G){this._layerConfigs[ue.id]=ue;let ve=this._layers[ue.id]=c.bA(ue);ve._featureFilter=c.a7(ve.filter),this.keyCache[ue.id]&&delete this.keyCache[ue.id]}for(let ue of Z)delete this.keyCache[ue],delete this._layerConfigs[ue],delete this._layers[ue];this.familiesBySource={};let Y=c.ct(Object.values(this._layerConfigs),this.keyCache);for(let ue of Y){let ve=ue.map(Ee=>this._layers[Ee.id]),J=ve[0];if(J.visibility==="none")continue;let Pe=J.source||"",be=this.familiesBySource[Pe];be||(be=this.familiesBySource[Pe]={});let Ae=J.sourceLayer||"_geojsonTileLayer",Ce=be[Ae];Ce||(Ce=be[Ae]=[]),Ce.push(ve)}}}class g{constructor(G){let Z={},Y=[];for(let Pe in G){let be=G[Pe],Ae=Z[Pe]={};for(let Ce in be){let Ee=be[+Ce];if(!Ee||Ee.bitmap.width===0||Ee.bitmap.height===0)continue;let Ue={x:0,y:0,w:Ee.bitmap.width+2,h:Ee.bitmap.height+2};Y.push(Ue),Ae[Ce]={rect:Ue,metrics:Ee.metrics}}}let{w:ue,h:ve}=c.p(Y),J=new c.q({width:ue||1,height:ve||1});for(let Pe in G){let be=G[Pe];for(let Ae in be){let Ce=be[+Ae];if(!Ce||Ce.bitmap.width===0||Ce.bitmap.height===0)continue;let Ee=Z[Pe][Ae].rect;c.q.copy(Ce.bitmap,J,{x:0,y:0},{x:Ee.x+1,y:Ee.y+1},Ce.bitmap)}}this.image=J,this.positions=Z}}c.cu("GlyphAtlas",g);class x{constructor(G){this.tileID=new c.Y(G.tileID.overscaledZ,G.tileID.wrap,G.tileID.canonical.z,G.tileID.canonical.x,G.tileID.canonical.y),this.uid=G.uid,this.zoom=G.zoom,this.pixelRatio=G.pixelRatio,this.tileSize=G.tileSize,this.source=G.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=G.showCollisionBoxes,this.collectResourceTiming=!!G.collectResourceTiming,this.returnDependencies=!!G.returnDependencies,this.promoteId=G.promoteId,this.inFlightDependencies=[]}parse(G,Z,Y,ue,ve){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=G,this.collisionBoxArray=new c.a5;let J=new c.cv(Object.keys(G.layers).sort()),Pe=new c.cw(this.tileID,this.promoteId);Pe.bucketLayerIDs=[];let be={},Ae={featureIndex:Pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Y,subdivisionGranularity:ve},Ce=Z.familiesBySource[this.source];for(let Ct in Ce){let je=G.layers[Ct];if(!je)continue;je.version===1&&c.w(`Vector tile source "${this.source}" layer "${Ct}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let qt=J.encode(Ct),Ut=[];for(let Hr=0;Hr<je.length;Hr++){let Xr=je.feature(Hr),Vn=Pe.getId(Xr,Ct);Ut.push({feature:Xr,id:Vn,index:Hr,sourceLayerIndex:qt})}for(let Hr of Ce[Ct]){let Xr=Hr[0];Xr.source!==this.source&&c.w(`layer.source = ${Xr.source} does not equal this.source = ${this.source}`),Xr.minzoom&&this.zoom<Math.floor(Xr.minzoom)||Xr.maxzoom&&this.zoom>=Xr.maxzoom||Xr.visibility!=="none"&&(E(Hr,this.zoom,Y),(be[Xr.id]=Xr.createBucket({index:Pe.bucketLayerIDs.length,layers:Hr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qt,sourceID:this.source})).populate(Ut,Ae,this.tileID.canonical),Pe.bucketLayerIDs.push(Hr.map(Vn=>Vn.id)))}}let Ee=c.bF(Ae.glyphDependencies,Ct=>Object.keys(Ct).map(Number));this.inFlightDependencies.forEach(Ct=>Ct==null?void 0:Ct.abort()),this.inFlightDependencies=[];let Ue=Promise.resolve({});if(Object.keys(Ee).length){let Ct=new AbortController;this.inFlightDependencies.push(Ct),Ue=ue.sendAsync({type:"GG",data:{stacks:Ee,source:this.source,tileID:this.tileID,type:"glyphs"}},Ct)}let et=Object.keys(Ae.iconDependencies),rt=Promise.resolve({});if(et.length){let Ct=new AbortController;this.inFlightDependencies.push(Ct),rt=ue.sendAsync({type:"GI",data:{icons:et,source:this.source,tileID:this.tileID,type:"icons"}},Ct)}let St=Object.keys(Ae.patternDependencies),jt=Promise.resolve({});if(St.length){let Ct=new AbortController;this.inFlightDependencies.push(Ct),jt=ue.sendAsync({type:"GI",data:{icons:St,source:this.source,tileID:this.tileID,type:"patterns"}},Ct)}let[Mt,Le,mr]=yield Promise.all([Ue,rt,jt]),rr=new g(Mt),cr=new c.cx(Le,mr);for(let Ct in be){let je=be[Ct];je instanceof c.a6?(E(je.layers,this.zoom,Y),c.cy({bucket:je,glyphMap:Mt,glyphPositions:rr.positions,imageMap:Le,imagePositions:cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ae.subdivisionGranularity})):je.hasPattern&&(je instanceof c.cz||je instanceof c.cA||je instanceof c.cB)&&(E(je.layers,this.zoom,Y),je.addFeatures(Ae,this.tileID.canonical,cr.patternPositions))}return this.status="done",{buckets:Object.values(be).filter(Ct=>!Ct.isEmpty()),featureIndex:Pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:rr.image,imageAtlas:cr,glyphMap:this.returnDependencies?Mt:null,iconMap:this.returnDependencies?Le:null,glyphPositions:this.returnDependencies?rr.positions:null}})}}function E(Se,G,Z){let Y=new c.C(G);for(let ue of Se)ue.recalculate(Y,Z)}class P{constructor(G,Z,Y){this.actor=G,this.layerIndex=Z,this.availableImages=Y,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(G,Z){return c._(this,void 0,void 0,function*(){let Y=yield c.n(G.request,Z);try{return{vectorTile:new c.cC.VectorTile(new c.cD(Y.data)),rawData:Y.data,cacheControl:Y.cacheControl,expires:Y.expires}}catch(ue){let ve=new Uint8Array(Y.data),J=`Unable to parse the tile at ${G.request.url}, `;throw J+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ue.message}`,new Error(J)}})}loadTile(G){return c._(this,void 0,void 0,function*(){let Z=G.uid,Y=!!(G&&G.request&&G.request.collectResourceTiming)&&new c.cE(G.request),ue=new x(G);this.loading[Z]=ue;let ve=new AbortController;ue.abort=ve;try{let J=yield this.loadVectorTile(G,ve);if(delete this.loading[Z],!J)return null;let Pe=J.rawData,be={};J.expires&&(be.expires=J.expires),J.cacheControl&&(be.cacheControl=J.cacheControl);let Ae={};if(Y){let Ee=Y.finish();Ee&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Ee)))}ue.vectorTile=J.vectorTile;let Ce=ue.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor,G.subdivisionGranularity);this.loaded[Z]=ue,this.fetching[Z]={rawTileData:Pe,cacheControl:be,resourceTiming:Ae};try{let Ee=yield Ce;return c.e({rawTileData:Pe.slice(0)},Ee,be,Ae)}finally{delete this.fetching[Z]}}catch(J){throw delete this.loading[Z],ue.status="done",this.loaded[Z]=ue,J}})}reloadTile(G){return c._(this,void 0,void 0,function*(){let Z=G.uid;if(!this.loaded||!this.loaded[Z])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let Y=this.loaded[Z];if(Y.showCollisionBoxes=G.showCollisionBoxes,Y.status==="parsing"){let ue=yield Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,G.subdivisionGranularity),ve;if(this.fetching[Z]){let{rawTileData:J,cacheControl:Pe,resourceTiming:be}=this.fetching[Z];delete this.fetching[Z],ve=c.e({rawTileData:J.slice(0)},ue,Pe,be)}else ve=ue;return ve}if(Y.status==="done"&&Y.vectorTile)return Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,G.subdivisionGranularity)})}abortTile(G){return c._(this,void 0,void 0,function*(){let Z=this.loading,Y=G.uid;Z&&Z[Y]&&Z[Y].abort&&(Z[Y].abort.abort(),delete Z[Y])})}removeTile(G){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[G.uid]&&delete this.loaded[G.uid]})}}class M{constructor(){this.loaded={}}loadTile(G){return c._(this,void 0,void 0,function*(){let{uid:Z,encoding:Y,rawImageData:ue,redFactor:ve,greenFactor:J,blueFactor:Pe,baseShift:be}=G,Ae=ue.width+2,Ce=ue.height+2,Ee=c.b(ue)?new c.R({width:Ae,height:Ce},yield c.cF(ue,-1,-1,Ae,Ce)):ue,Ue=new c.cG(Z,Ee,Y,ve,J,Pe,be);return this.loaded=this.loaded||{},this.loaded[Z]=Ue,Ue})}removeTile(G){let Z=this.loaded,Y=G.uid;Z&&Z[Y]&&delete Z[Y]}}var O,z,oe=function(){if(z)return O;function Se(Z,Y){if(Z.length!==0){G(Z[0],Y);for(var ue=1;ue<Z.length;ue++)G(Z[ue],!Y)}}function G(Z,Y){for(var ue=0,ve=0,J=0,Pe=Z.length,be=Pe-1;J<Pe;be=J++){var Ae=(Z[J][0]-Z[be][0])*(Z[be][1]+Z[J][1]),Ce=ue+Ae;ve+=Math.abs(ue)>=Math.abs(Ae)?ue-Ce+Ae:Ae-Ce+ue,ue=Ce}ue+ve>=0!=!!Y&&Z.reverse()}return z=1,O=function Z(Y,ue){var ve,J=Y&&Y.type;if(J==="FeatureCollection")for(ve=0;ve<Y.features.length;ve++)Z(Y.features[ve],ue);else if(J==="GeometryCollection")for(ve=0;ve<Y.geometries.length;ve++)Z(Y.geometries[ve],ue);else if(J==="Feature")Z(Y.geometry,ue);else if(J==="Polygon")Se(Y.coordinates,ue);else if(J==="MultiPolygon")for(ve=0;ve<Y.coordinates.length;ve++)Se(Y.coordinates[ve],ue);return Y}}(),we=c.cH(oe);let ye=c.cC.VectorTileFeature.prototype.toGeoJSON;class te{constructor(G){this._feature=G,this.extent=c.Z,this.type=G.type,this.properties=G.tags,"id"in G&&!isNaN(G.id)&&(this.id=parseInt(G.id,10))}loadGeometry(){if(this._feature.type===1){let G=[];for(let Z of this._feature.geometry)G.push([new c.P(Z[0],Z[1])]);return G}{let G=[];for(let Z of this._feature.geometry){let Y=[];for(let ue of Z)Y.push(new c.P(ue[0],ue[1]));G.push(Y)}return G}}toGeoJSON(G,Z,Y){return ye.call(this,G,Z,Y)}}class Q{constructor(G){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.Z,this.length=G.length,this._features=G}feature(G){return new te(this._features[G])}}var ee,xe,Te,Je={exports:{}},Ne=function(){if(Te)return Je.exports;Te=1;var Se=c.cK(),G=function(){if(xe)return ee;xe=1;var Ce=c.cI(),Ee=c.cJ().VectorTileFeature;function Ue(rt,St){this.options=St||{},this.features=rt,this.length=rt.length}function et(rt,St){this.id=typeof rt.id=="number"?rt.id:void 0,this.type=rt.type,this.rawGeometry=rt.type===1?[rt.geometry]:rt.geometry,this.properties=rt.tags,this.extent=St||4096}return ee=Ue,Ue.prototype.feature=function(rt){return new et(this.features[rt],this.options.extent)},et.prototype.loadGeometry=function(){var rt=this.rawGeometry;this.geometry=[];for(var St=0;St<rt.length;St++){for(var jt=rt[St],Mt=[],Le=0;Le<jt.length;Le++)Mt.push(new Ce(jt[Le][0],jt[Le][1]));this.geometry.push(Mt)}return this.geometry},et.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var rt=this.geometry,St=1/0,jt=-1/0,Mt=1/0,Le=-1/0,mr=0;mr<rt.length;mr++)for(var rr=rt[mr],cr=0;cr<rr.length;cr++){var Ct=rr[cr];St=Math.min(St,Ct.x),jt=Math.max(jt,Ct.x),Mt=Math.min(Mt,Ct.y),Le=Math.max(Le,Ct.y)}return[St,Mt,jt,Le]},et.prototype.toGeoJSON=Ee.prototype.toGeoJSON,ee}();function Z(Ce){var Ee=new Se;return function(Ue,et){for(var rt in Ue.layers)et.writeMessage(3,Y,Ue.layers[rt])}(Ce,Ee),Ee.finish()}function Y(Ce,Ee){var Ue;Ee.writeVarintField(15,Ce.version||1),Ee.writeStringField(1,Ce.name||""),Ee.writeVarintField(5,Ce.extent||4096);var et={keys:[],values:[],keycache:{},valuecache:{}};for(Ue=0;Ue<Ce.length;Ue++)et.feature=Ce.feature(Ue),Ee.writeMessage(2,ue,et);var rt=et.keys;for(Ue=0;Ue<rt.length;Ue++)Ee.writeStringField(3,rt[Ue]);var St=et.values;for(Ue=0;Ue<St.length;Ue++)Ee.writeMessage(4,Ae,St[Ue])}function ue(Ce,Ee){var Ue=Ce.feature;Ue.id!==void 0&&Ee.writeVarintField(1,Ue.id),Ee.writeMessage(2,ve,Ce),Ee.writeVarintField(3,Ue.type),Ee.writeMessage(4,be,Ue)}function ve(Ce,Ee){var Ue=Ce.feature,et=Ce.keys,rt=Ce.values,St=Ce.keycache,jt=Ce.valuecache;for(var Mt in Ue.properties){var Le=Ue.properties[Mt],mr=St[Mt];if(Le!==null){mr===void 0&&(et.push(Mt),St[Mt]=mr=et.length-1),Ee.writeVarint(mr);var rr=typeof Le;rr!=="string"&&rr!=="boolean"&&rr!=="number"&&(Le=JSON.stringify(Le));var cr=rr+":"+Le,Ct=jt[cr];Ct===void 0&&(rt.push(Le),jt[cr]=Ct=rt.length-1),Ee.writeVarint(Ct)}}}function J(Ce,Ee){return(Ee<<3)+(7&Ce)}function Pe(Ce){return Ce<<1^Ce>>31}function be(Ce,Ee){for(var Ue=Ce.loadGeometry(),et=Ce.type,rt=0,St=0,jt=Ue.length,Mt=0;Mt<jt;Mt++){var Le=Ue[Mt],mr=1;et===1&&(mr=Le.length),Ee.writeVarint(J(1,mr));for(var rr=et===3?Le.length-1:Le.length,cr=0;cr<rr;cr++){cr===1&&et!==1&&Ee.writeVarint(J(2,rr-1));var Ct=Le[cr].x-rt,je=Le[cr].y-St;Ee.writeVarint(Pe(Ct)),Ee.writeVarint(Pe(je)),rt+=Ct,St+=je}et===3&&Ee.writeVarint(J(7,1))}}function Ae(Ce,Ee){var Ue=typeof Ce;Ue==="string"?Ee.writeStringField(1,Ce):Ue==="boolean"?Ee.writeBooleanField(7,Ce):Ue==="number"&&(Ce%1!=0?Ee.writeDoubleField(3,Ce):Ce<0?Ee.writeSVarintField(6,Ce):Ee.writeVarintField(5,Ce))}return Je.exports=Z,Je.exports.fromVectorTileJs=Z,Je.exports.fromGeojsonVt=function(Ce,Ee){Ee=Ee||{};var Ue={};for(var et in Ce)Ue[et]=new G(Ce[et].features,Ee),Ue[et].name=et,Ue[et].version=Ee.version,Ue[et].extent=Ee.extent;return Z({layers:Ue})},Je.exports.GeoJSONWrapper=G,Je.exports}(),ut=c.cH(Ne);let xt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Se=>Se},mt=Math.fround||(_r=new Float32Array(1),Se=>(_r[0]=+Se,_r[0]));var _r;let kr=3,wt=5,zt=6;class xr{constructor(G){this.options=Object.assign(Object.create(xt),G),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(G){let{log:Z,minZoom:Y,maxZoom:ue}=this.options;Z&&console.time("total time");let ve=`prepare ${G.length} points`;Z&&console.time(ve),this.points=G;let J=[];for(let be=0;be<G.length;be++){let Ae=G[be];if(!Ae.geometry)continue;let[Ce,Ee]=Ae.geometry.coordinates,Ue=mt(Dr(Ce)),et=mt(Si(Ee));J.push(Ue,et,1/0,be,-1,1),this.options.reduce&&J.push(0)}let Pe=this.trees[ue+1]=this._createTree(J);Z&&console.timeEnd(ve);for(let be=ue;be>=Y;be--){let Ae=+Date.now();Pe=this.trees[be]=this._createTree(this._cluster(Pe,be)),Z&&console.log("z%d: %d clusters in %dms",be,Pe.numItems,+Date.now()-Ae)}return Z&&console.timeEnd("total time"),this}getClusters(G,Z){let Y=((G[0]+180)%360+360)%360-180,ue=Math.max(-90,Math.min(90,G[1])),ve=G[2]===180?180:((G[2]+180)%360+360)%360-180,J=Math.max(-90,Math.min(90,G[3]));if(G[2]-G[0]>=360)Y=-180,ve=180;else if(Y>ve){let Ee=this.getClusters([Y,ue,180,J],Z),Ue=this.getClusters([-180,ue,ve,J],Z);return Ee.concat(Ue)}let Pe=this.trees[this._limitZoom(Z)],be=Pe.range(Dr(Y),Si(J),Dr(ve),Si(ue)),Ae=Pe.data,Ce=[];for(let Ee of be){let Ue=this.stride*Ee;Ce.push(Ae[Ue+wt]>1?Kr(Ae,Ue,this.clusterProps):this.points[Ae[Ue+kr]])}return Ce}getChildren(G){let Z=this._getOriginId(G),Y=this._getOriginZoom(G),ue="No cluster with the specified id.",ve=this.trees[Y];if(!ve)throw new Error(ue);let J=ve.data;if(Z*this.stride>=J.length)throw new Error(ue);let Pe=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),be=ve.within(J[Z*this.stride],J[Z*this.stride+1],Pe),Ae=[];for(let Ce of be){let Ee=Ce*this.stride;J[Ee+4]===G&&Ae.push(J[Ee+wt]>1?Kr(J,Ee,this.clusterProps):this.points[J[Ee+kr]])}if(Ae.length===0)throw new Error(ue);return Ae}getLeaves(G,Z,Y){let ue=[];return this._appendLeaves(ue,G,Z=Z||10,Y=Y||0,0),ue}getTile(G,Z,Y){let ue=this.trees[this._limitZoom(G)],ve=Math.pow(2,G),{extent:J,radius:Pe}=this.options,be=Pe/J,Ae=(Y-be)/ve,Ce=(Y+1+be)/ve,Ee={features:[]};return this._addTileFeatures(ue.range((Z-be)/ve,Ae,(Z+1+be)/ve,Ce),ue.data,Z,Y,ve,Ee),Z===0&&this._addTileFeatures(ue.range(1-be/ve,Ae,1,Ce),ue.data,ve,Y,ve,Ee),Z===ve-1&&this._addTileFeatures(ue.range(0,Ae,be/ve,Ce),ue.data,-1,Y,ve,Ee),Ee.features.length?Ee:null}getClusterExpansionZoom(G){let Z=this._getOriginZoom(G)-1;for(;Z<=this.options.maxZoom;){let Y=this.getChildren(G);if(Z++,Y.length!==1)break;G=Y[0].properties.cluster_id}return Z}_appendLeaves(G,Z,Y,ue,ve){let J=this.getChildren(Z);for(let Pe of J){let be=Pe.properties;if(be&&be.cluster?ve+be.point_count<=ue?ve+=be.point_count:ve=this._appendLeaves(G,be.cluster_id,Y,ue,ve):ve<ue?ve++:G.push(Pe),G.length===Y)break}return ve}_createTree(G){let Z=new c.aF(G.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<G.length;Y+=this.stride)Z.add(G[Y],G[Y+1]);return Z.finish(),Z.data=G,Z}_addTileFeatures(G,Z,Y,ue,ve,J){for(let Pe of G){let be=Pe*this.stride,Ae=Z[be+wt]>1,Ce,Ee,Ue;if(Ae)Ce=Lt(Z,be,this.clusterProps),Ee=Z[be],Ue=Z[be+1];else{let St=this.points[Z[be+kr]];Ce=St.properties;let[jt,Mt]=St.geometry.coordinates;Ee=Dr(jt),Ue=Si(Mt)}let et={type:1,geometry:[[Math.round(this.options.extent*(Ee*ve-Y)),Math.round(this.options.extent*(Ue*ve-ue))]],tags:Ce},rt;rt=Ae||this.options.generateId?Z[be+kr]:this.points[Z[be+kr]].id,rt!==void 0&&(et.id=rt),J.features.push(et)}}_limitZoom(G){return Math.max(this.options.minZoom,Math.min(Math.floor(+G),this.options.maxZoom+1))}_cluster(G,Z){let{radius:Y,extent:ue,reduce:ve,minPoints:J}=this.options,Pe=Y/(ue*Math.pow(2,Z)),be=G.data,Ae=[],Ce=this.stride;for(let Ee=0;Ee<be.length;Ee+=Ce){if(be[Ee+2]<=Z)continue;be[Ee+2]=Z;let Ue=be[Ee],et=be[Ee+1],rt=G.within(be[Ee],be[Ee+1],Pe),St=be[Ee+wt],jt=St;for(let Mt of rt){let Le=Mt*Ce;be[Le+2]>Z&&(jt+=be[Le+wt])}if(jt>St&&jt>=J){let Mt,Le=Ue*St,mr=et*St,rr=-1,cr=((Ee/Ce|0)<<5)+(Z+1)+this.points.length;for(let Ct of rt){let je=Ct*Ce;if(be[je+2]<=Z)continue;be[je+2]=Z;let qt=be[je+wt];Le+=be[je]*qt,mr+=be[je+1]*qt,be[je+4]=cr,ve&&(Mt||(Mt=this._map(be,Ee,!0),rr=this.clusterProps.length,this.clusterProps.push(Mt)),ve(Mt,this._map(be,je)))}be[Ee+4]=cr,Ae.push(Le/jt,mr/jt,1/0,cr,-1,jt),ve&&Ae.push(rr)}else{for(let Mt=0;Mt<Ce;Mt++)Ae.push(be[Ee+Mt]);if(jt>1)for(let Mt of rt){let Le=Mt*Ce;if(!(be[Le+2]<=Z)){be[Le+2]=Z;for(let mr=0;mr<Ce;mr++)Ae.push(be[Le+mr])}}}}return Ae}_getOriginId(G){return G-this.points.length>>5}_getOriginZoom(G){return(G-this.points.length)%32}_map(G,Z,Y){if(G[Z+wt]>1){let J=this.clusterProps[G[Z+zt]];return Y?Object.assign({},J):J}let ue=this.points[G[Z+kr]].properties,ve=this.options.map(ue);return Y&&ve===ue?Object.assign({},ve):ve}}function Kr(Se,G,Z){return{type:"Feature",id:Se[G+kr],properties:Lt(Se,G,Z),geometry:{type:"Point",coordinates:[(Y=Se[G],360*(Y-.5)),wa(Se[G+1])]}};var Y}function Lt(Se,G,Z){let Y=Se[G+wt],ue=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,ve=Se[G+zt],J=ve===-1?{}:Object.assign({},Z[ve]);return Object.assign(J,{cluster:!0,cluster_id:Se[G+kr],point_count:Y,point_count_abbreviated:ue})}function Dr(Se){return Se/360+.5}function Si(Se){let G=Math.sin(Se*Math.PI/180),Z=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return Z<0?0:Z>1?1:Z}function wa(Se){let G=(180-360*Se)*Math.PI/180;return 360*Math.atan(Math.exp(G))/Math.PI-90}function nn(Se,G,Z,Y){let ue=Y,ve=G+(Z-G>>1),J,Pe=Z-G,be=Se[G],Ae=Se[G+1],Ce=Se[Z],Ee=Se[Z+1];for(let Ue=G+3;Ue<Z;Ue+=3){let et=ws(Se[Ue],Se[Ue+1],be,Ae,Ce,Ee);if(et>ue)J=Ue,ue=et;else if(et===ue){let rt=Math.abs(Ue-ve);rt<Pe&&(J=Ue,Pe=rt)}}ue>Y&&(J-G>3&&nn(Se,G,J,Y),Se[J+2]=ue,Z-J>3&&nn(Se,J,Z,Y))}function ws(Se,G,Z,Y,ue,ve){let J=ue-Z,Pe=ve-Y;if(J!==0||Pe!==0){let be=((Se-Z)*J+(G-Y)*Pe)/(J*J+Pe*Pe);be>1?(Z=ue,Y=ve):be>0&&(Z+=J*be,Y+=Pe*be)}return J=Se-Z,Pe=G-Y,J*J+Pe*Pe}function jn(Se,G,Z,Y){let ue={id:Se==null?null:Se,type:G,geometry:Z,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(G==="Point"||G==="MultiPoint"||G==="LineString")fi(ue,Z);else if(G==="Polygon")fi(ue,Z[0]);else if(G==="MultiLineString")for(let ve of Z)fi(ue,ve);else if(G==="MultiPolygon")for(let ve of Z)fi(ue,ve[0]);return ue}function fi(Se,G){for(let Z=0;Z<G.length;Z+=3)Se.minX=Math.min(Se.minX,G[Z]),Se.minY=Math.min(Se.minY,G[Z+1]),Se.maxX=Math.max(Se.maxX,G[Z]),Se.maxY=Math.max(Se.maxY,G[Z+1])}function fo(Se,G,Z,Y){if(!G.geometry)return;let ue=G.geometry.coordinates;if(ue&&ue.length===0)return;let ve=G.geometry.type,J=Math.pow(Z.tolerance/((1<<Z.maxZoom)*Z.extent),2),Pe=[],be=G.id;if(Z.promoteId?be=G.properties[Z.promoteId]:Z.generateId&&(be=Y||0),ve==="Point")an(ue,Pe);else if(ve==="MultiPoint")for(let Ae of ue)an(Ae,Pe);else if(ve==="LineString")Ss(ue,Pe,J,!1);else if(ve==="MultiLineString"){if(Z.lineMetrics){for(let Ae of ue)Pe=[],Ss(Ae,Pe,J,!1),Se.push(jn(be,"LineString",Pe,G.properties));return}po(ue,Pe,J,!1)}else if(ve==="Polygon")po(ue,Pe,J,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(let Ae of G.geometry.geometries)fo(Se,{id:be,geometry:Ae,properties:G.properties},Z,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Ae of ue){let Ce=[];po(Ae,Ce,J,!0),Pe.push(Ce)}}Se.push(jn(be,ve,Pe,G.properties))}function an(Se,G){G.push(ml(Se[0]),Wi(Se[1]),0)}function Ss(Se,G,Z,Y){let ue,ve,J=0;for(let be=0;be<Se.length;be++){let Ae=ml(Se[be][0]),Ce=Wi(Se[be][1]);G.push(Ae,Ce,0),be>0&&(J+=Y?(ue*Ce-Ae*ve)/2:Math.sqrt(Math.pow(Ae-ue,2)+Math.pow(Ce-ve,2))),ue=Ae,ve=Ce}let Pe=G.length-3;G[2]=1,nn(G,0,Pe,Z),G[Pe+2]=1,G.size=Math.abs(J),G.start=0,G.end=G.size}function po(Se,G,Z,Y){for(let ue=0;ue<Se.length;ue++){let ve=[];Ss(Se[ue],ve,Z,Y),G.push(ve)}}function ml(Se){return Se/360+.5}function Wi(Se){let G=Math.sin(Se*Math.PI/180),Z=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return Z<0?0:Z>1?1:Z}function on(Se,G,Z,Y,ue,ve,J,Pe){if(Y/=G,ve>=(Z/=G)&&J<Y)return Se;if(J<Z||ve>=Y)return null;let be=[];for(let Ae of Se){let Ce=Ae.geometry,Ee=Ae.type,Ue=ue===0?Ae.minX:Ae.minY,et=ue===0?Ae.maxX:Ae.maxY;if(Ue>=Z&&et<Y){be.push(Ae);continue}if(et<Z||Ue>=Y)continue;let rt=[];if(Ee==="Point"||Ee==="MultiPoint")Ti(Ce,rt,Z,Y,ue);else if(Ee==="LineString")gr(Ce,rt,Z,Y,ue,!1,Pe.lineMetrics);else if(Ee==="MultiLineString")Ha(Ce,rt,Z,Y,ue,!1);else if(Ee==="Polygon")Ha(Ce,rt,Z,Y,ue,!0);else if(Ee==="MultiPolygon")for(let St of Ce){let jt=[];Ha(St,jt,Z,Y,ue,!0),jt.length&&rt.push(jt)}if(rt.length){if(Pe.lineMetrics&&Ee==="LineString"){for(let St of rt)be.push(jn(Ae.id,Ee,St,Ae.tags));continue}Ee!=="LineString"&&Ee!=="MultiLineString"||(rt.length===1?(Ee="LineString",rt=rt[0]):Ee="MultiLineString"),Ee!=="Point"&&Ee!=="MultiPoint"||(Ee=rt.length===3?"Point":"MultiPoint"),be.push(jn(Ae.id,Ee,rt,Ae.tags))}}return be.length?be:null}function Ti(Se,G,Z,Y,ue){for(let ve=0;ve<Se.length;ve+=3){let J=Se[ve+ue];J>=Z&&J<=Y&&Un(G,Se[ve],Se[ve+1],Se[ve+2])}}function gr(Se,G,Z,Y,ue,ve,J){let Pe=Sa(Se),be=ue===0?Ts:Es,Ae,Ce,Ee=Se.start;for(let jt=0;jt<Se.length-3;jt+=3){let Mt=Se[jt],Le=Se[jt+1],mr=Se[jt+2],rr=Se[jt+3],cr=Se[jt+4],Ct=ue===0?Mt:Le,je=ue===0?rr:cr,qt=!1;J&&(Ae=Math.sqrt(Math.pow(Mt-rr,2)+Math.pow(Le-cr,2))),Ct<Z?je>Z&&(Ce=be(Pe,Mt,Le,rr,cr,Z),J&&(Pe.start=Ee+Ae*Ce)):Ct>Y?je<Y&&(Ce=be(Pe,Mt,Le,rr,cr,Y),J&&(Pe.start=Ee+Ae*Ce)):Un(Pe,Mt,Le,mr),je<Z&&Ct>=Z&&(Ce=be(Pe,Mt,Le,rr,cr,Z),qt=!0),je>Y&&Ct<=Y&&(Ce=be(Pe,Mt,Le,rr,cr,Y),qt=!0),!ve&&qt&&(J&&(Pe.end=Ee+Ae*Ce),G.push(Pe),Pe=Sa(Se)),J&&(Ee+=Ae)}let Ue=Se.length-3,et=Se[Ue],rt=Se[Ue+1],St=ue===0?et:rt;St>=Z&&St<=Y&&Un(Pe,et,rt,Se[Ue+2]),Ue=Pe.length-3,ve&&Ue>=3&&(Pe[Ue]!==Pe[0]||Pe[Ue+1]!==Pe[1])&&Un(Pe,Pe[0],Pe[1],Pe[2]),Pe.length&&G.push(Pe)}function Sa(Se){let G=[];return G.size=Se.size,G.start=Se.start,G.end=Se.end,G}function Ha(Se,G,Z,Y,ue,ve){for(let J of Se)gr(J,G,Z,Y,ue,ve,!1)}function Un(Se,G,Z,Y){Se.push(G,Z,Y)}function Ts(Se,G,Z,Y,ue,ve){let J=(ve-G)/(Y-G);return Un(Se,ve,Z+(ue-Z)*J,1),J}function Es(Se,G,Z,Y,ue,ve){let J=(ve-Z)/(ue-Z);return Un(Se,G+(Y-G)*J,ve,1),J}function _n(Se,G){let Z=[];for(let Y=0;Y<Se.length;Y++){let ue=Se[Y],ve=ue.type,J;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")J=Ta(ue.geometry,G);else if(ve==="MultiLineString"||ve==="Polygon"){J=[];for(let Pe of ue.geometry)J.push(Ta(Pe,G))}else if(ve==="MultiPolygon"){J=[];for(let Pe of ue.geometry){let be=[];for(let Ae of Pe)be.push(Ta(Ae,G));J.push(be)}}Z.push(jn(ue.id,ve,J,ue.tags))}return Z}function Ta(Se,G){let Z=[];Z.size=Se.size,Se.start!==void 0&&(Z.start=Se.start,Z.end=Se.end);for(let Y=0;Y<Se.length;Y+=3)Z.push(Se[Y]+G,Se[Y+1],Se[Y+2]);return Z}function As(Se,G){if(Se.transformed)return Se;let Z=1<<Se.z,Y=Se.x,ue=Se.y;for(let ve of Se.features){let J=ve.geometry,Pe=ve.type;if(ve.geometry=[],Pe===1)for(let be=0;be<J.length;be+=2)ve.geometry.push(mo(J[be],J[be+1],G,Z,Y,ue));else for(let be=0;be<J.length;be++){let Ae=[];for(let Ce=0;Ce<J[be].length;Ce+=2)Ae.push(mo(J[be][Ce],J[be][Ce+1],G,Z,Y,ue));ve.geometry.push(Ae)}}return Se.transformed=!0,Se}function mo(Se,G,Z,Y,ue,ve){return[Math.round(Z*(Se*Y-ue)),Math.round(Z*(G*Y-ve))]}function ge(Se,G,Z,Y,ue){let ve=G===ue.maxZoom?0:ue.tolerance/((1<<G)*ue.extent),J={features:[],numPoints:0,numSimplified:0,numFeatures:Se.length,source:null,x:Z,y:Y,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Pe of Se)Re(J,Pe,ve,ue);return J}function Re(Se,G,Z,Y){let ue=G.geometry,ve=G.type,J=[];if(Se.minX=Math.min(Se.minX,G.minX),Se.minY=Math.min(Se.minY,G.minY),Se.maxX=Math.max(Se.maxX,G.maxX),Se.maxY=Math.max(Se.maxY,G.maxY),ve==="Point"||ve==="MultiPoint")for(let Pe=0;Pe<ue.length;Pe+=3)J.push(ue[Pe],ue[Pe+1]),Se.numPoints++,Se.numSimplified++;else if(ve==="LineString")Ve(J,ue,Se,Z,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let Pe=0;Pe<ue.length;Pe++)Ve(J,ue[Pe],Se,Z,ve==="Polygon",Pe===0);else if(ve==="MultiPolygon")for(let Pe=0;Pe<ue.length;Pe++){let be=ue[Pe];for(let Ae=0;Ae<be.length;Ae++)Ve(J,be[Ae],Se,Z,!0,Ae===0)}if(J.length){let Pe=G.tags||null;if(ve==="LineString"&&Y.lineMetrics){Pe={};for(let Ae in G.tags)Pe[Ae]=G.tags[Ae];Pe.mapbox_clip_start=ue.start/ue.size,Pe.mapbox_clip_end=ue.end/ue.size}let be={geometry:J,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Pe};G.id!==null&&(be.id=G.id),Se.features.push(be)}}function Ve(Se,G,Z,Y,ue,ve){let J=Y*Y;if(Y>0&&G.size<(ue?J:Y))return void(Z.numPoints+=G.length/3);let Pe=[];for(let be=0;be<G.length;be+=3)(Y===0||G[be+2]>J)&&(Z.numSimplified++,Pe.push(G[be],G[be+1])),Z.numPoints++;ue&&function(be,Ae){let Ce=0;for(let Ee=0,Ue=be.length,et=Ue-2;Ee<Ue;et=Ee,Ee+=2)Ce+=(be[Ee]-be[et])*(be[Ee+1]+be[et+1]);if(Ce>0===Ae)for(let Ee=0,Ue=be.length;Ee<Ue/2;Ee+=2){let et=be[Ee],rt=be[Ee+1];be[Ee]=be[Ue-2-Ee],be[Ee+1]=be[Ue-1-Ee],be[Ue-2-Ee]=et,be[Ue-1-Ee]=rt}}(Pe,ve),Se.push(Pe)}let gt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class st{constructor(G,Z){let Y=(Z=this.options=function(ve,J){for(let Pe in J)ve[Pe]=J[Pe];return ve}(Object.create(gt),Z)).debug;if(Y&&console.time("preprocess data"),Z.maxZoom<0||Z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Z.promoteId&&Z.generateId)throw new Error("promoteId and generateId cannot be used together.");let ue=function(ve,J){let Pe=[];if(ve.type==="FeatureCollection")for(let be=0;be<ve.features.length;be++)fo(Pe,ve.features[be],J,be);else fo(Pe,ve.type==="Feature"?ve:{geometry:ve},J);return Pe}(G,Z);this.tiles={},this.tileCoords=[],Y&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Z.indexMaxZoom,Z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ue=function(ve,J){let Pe=J.buffer/J.extent,be=ve,Ae=on(ve,1,-1-Pe,Pe,0,-1,2,J),Ce=on(ve,1,1-Pe,2+Pe,0,-1,2,J);return(Ae||Ce)&&(be=on(ve,1,-Pe,1+Pe,0,-1,2,J)||[],Ae&&(be=_n(Ae,1).concat(be)),Ce&&(be=be.concat(_n(Ce,-1)))),be}(ue,Z),ue.length&&this.splitTile(ue,0,0,0),Y&&(ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(G,Z,Y,ue,ve,J,Pe){let be=[G,Z,Y,ue],Ae=this.options,Ce=Ae.debug;for(;be.length;){ue=be.pop(),Y=be.pop(),Z=be.pop(),G=be.pop();let Ee=1<<Z,Ue=tt(Z,Y,ue),et=this.tiles[Ue];if(!et&&(Ce>1&&console.time("creation"),et=this.tiles[Ue]=ge(G,Z,Y,ue,Ae),this.tileCoords.push({z:Z,x:Y,y:ue}),Ce)){Ce>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Z,Y,ue,et.numFeatures,et.numPoints,et.numSimplified),console.timeEnd("creation"));let qt=`z${Z}`;this.stats[qt]=(this.stats[qt]||0)+1,this.total++}if(et.source=G,ve==null){if(Z===Ae.indexMaxZoom||et.numPoints<=Ae.indexMaxPoints)continue}else{if(Z===Ae.maxZoom||Z===ve)continue;if(ve!=null){let qt=ve-Z;if(Y!==J>>qt||ue!==Pe>>qt)continue}}if(et.source=null,G.length===0)continue;Ce>1&&console.time("clipping");let rt=.5*Ae.buffer/Ae.extent,St=.5-rt,jt=.5+rt,Mt=1+rt,Le=null,mr=null,rr=null,cr=null,Ct=on(G,Ee,Y-rt,Y+jt,0,et.minX,et.maxX,Ae),je=on(G,Ee,Y+St,Y+Mt,0,et.minX,et.maxX,Ae);G=null,Ct&&(Le=on(Ct,Ee,ue-rt,ue+jt,1,et.minY,et.maxY,Ae),mr=on(Ct,Ee,ue+St,ue+Mt,1,et.minY,et.maxY,Ae),Ct=null),je&&(rr=on(je,Ee,ue-rt,ue+jt,1,et.minY,et.maxY,Ae),cr=on(je,Ee,ue+St,ue+Mt,1,et.minY,et.maxY,Ae),je=null),Ce>1&&console.timeEnd("clipping"),be.push(Le||[],Z+1,2*Y,2*ue),be.push(mr||[],Z+1,2*Y,2*ue+1),be.push(rr||[],Z+1,2*Y+1,2*ue),be.push(cr||[],Z+1,2*Y+1,2*ue+1)}}getTile(G,Z,Y){G=+G,Z=+Z,Y=+Y;let ue=this.options,{extent:ve,debug:J}=ue;if(G<0||G>24)return null;let Pe=1<<G,be=tt(G,Z=Z+Pe&Pe-1,Y);if(this.tiles[be])return As(this.tiles[be],ve);J>1&&console.log("drilling down to z%d-%d-%d",G,Z,Y);let Ae,Ce=G,Ee=Z,Ue=Y;for(;!Ae&&Ce>0;)Ce--,Ee>>=1,Ue>>=1,Ae=this.tiles[tt(Ce,Ee,Ue)];return Ae&&Ae.source?(J>1&&(console.log("found parent tile z%d-%d-%d",Ce,Ee,Ue),console.time("drilling down")),this.splitTile(Ae.source,Ce,Ee,Ue,G,Z,Y),J>1&&console.timeEnd("drilling down"),this.tiles[be]?As(this.tiles[be],ve):null):null}}function tt(Se,G,Z){return 32*((1<<Se)*Z+G)+Se}function dt(Se,G){return G?Se.properties[G]:Se.id}function Bt(Se,G){if(Se==null)return!0;if(Se.type==="Feature")return dt(Se,G)!=null;if(Se.type==="FeatureCollection"){let Z=new Set;for(let Y of Se.features){let ue=dt(Y,G);if(ue==null||Z.has(ue))return!1;Z.add(ue)}return!0}return!1}function Kt(Se,G){let Z=new Map;if(Se!=null)if(Se.type==="Feature")Z.set(dt(Se,G),Se);else for(let Y of Se.features)Z.set(dt(Y,G),Y);return Z}class tr extends P{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(G,Z){return c._(this,void 0,void 0,function*(){let Y=G.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ue=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!ue)return null;let ve=new Q(ue.features),J=ut(ve);return J.byteOffset===0&&J.byteLength===J.buffer.byteLength||(J=new Uint8Array(J)),{vectorTile:ve,rawData:J.buffer}})}loadData(G){return c._(this,void 0,void 0,function*(){var Z;(Z=this._pendingRequest)===null||Z===void 0||Z.abort();let Y=!!(G&&G.request&&G.request.collectResourceTiming)&&new c.cE(G.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(G,this._pendingRequest),this._geoJSONIndex=G.cluster?new xr(function({superclusterOptions:J,clusterProperties:Pe}){if(!Pe||!J)return J;let be={},Ae={},Ce={accumulated:null,zoom:0},Ee={properties:null},Ue=Object.keys(Pe);for(let et of Ue){let[rt,St]=Pe[et],jt=c.cL(St),Mt=c.cL(typeof rt=="string"?[rt,["accumulated"],["get",et]]:rt);be[et]=jt.value,Ae[et]=Mt.value}return J.map=et=>{Ee.properties=et;let rt={};for(let St of Ue)rt[St]=be[St].evaluate(Ce,Ee);return rt},J.reduce=(et,rt)=>{Ee.properties=rt;for(let St of Ue)Ce.accumulated=et[St],et[St]=Ae[St].evaluate(Ce,Ee)},J}(G)).load((yield this._pendingData).features):(ue=yield this._pendingData,new st(ue,G.geojsonVtOptions)),this.loaded={};let ve={};if(Y){let J=Y.finish();J&&(ve.resourceTiming={},ve.resourceTiming[G.source]=JSON.parse(JSON.stringify(J)))}return ve}catch(ve){if(delete this._pendingRequest,c.cp(ve))return{abandoned:!0};throw ve}var ue})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(G){let Z=this.loaded;return Z&&Z[G.uid]?super.reloadTile(G):this.loadTile(G)}loadAndProcessGeoJSON(G,Z){return c._(this,void 0,void 0,function*(){let Y=yield this.loadGeoJSON(G,Z);if(delete this._pendingRequest,typeof Y!="object")throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`);if(we(Y,!0),G.filter){let ue=c.cL(G.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ue.result==="error")throw new Error(ue.value.map(J=>`${J.key}: ${J.message}`).join(", "));Y={type:"FeatureCollection",features:Y.features.filter(J=>ue.value.evaluate({zoom:0},J))}}return Y})}loadGeoJSON(G,Z){return c._(this,void 0,void 0,function*(){let{promoteId:Y}=G;if(G.request){let ue=yield c.j(G.request,Z);return this._dataUpdateable=Bt(ue.data,Y)?Kt(ue.data,Y):void 0,ue.data}if(typeof G.data=="string")try{let ue=JSON.parse(G.data);return this._dataUpdateable=Bt(ue,Y)?Kt(ue,Y):void 0,ue}catch(ue){throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`)}if(!G.dataDiff)throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${G.source}`);return function(ue,ve,J){var Pe,be,Ae,Ce;if(ve.removeAll&&ue.clear(),ve.remove)for(let Ee of ve.remove)ue.delete(Ee);if(ve.add)for(let Ee of ve.add){let Ue=dt(Ee,J);Ue!=null&&ue.set(Ue,Ee)}if(ve.update)for(let Ee of ve.update){let Ue=ue.get(Ee.id);if(Ue==null)continue;let et=!Ee.removeAllProperties&&(((Pe=Ee.removeProperties)===null||Pe===void 0?void 0:Pe.length)>0||((be=Ee.addOrUpdateProperties)===null||be===void 0?void 0:be.length)>0);if((Ee.newGeometry||Ee.removeAllProperties||et)&&(Ue=Object.assign({},Ue),ue.set(Ee.id,Ue),et&&(Ue.properties=Object.assign({},Ue.properties))),Ee.newGeometry&&(Ue.geometry=Ee.newGeometry),Ee.removeAllProperties)Ue.properties={};else if(((Ae=Ee.removeProperties)===null||Ae===void 0?void 0:Ae.length)>0)for(let rt of Ee.removeProperties)Object.prototype.hasOwnProperty.call(Ue.properties,rt)&&delete Ue.properties[rt];if(((Ce=Ee.addOrUpdateProperties)===null||Ce===void 0?void 0:Ce.length)>0)for(let{key:rt,value:St}of Ee.addOrUpdateProperties)Ue.properties[rt]=St}}(this._dataUpdateable,G.dataDiff,Y),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(G){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(G){return this._geoJSONIndex.getClusterExpansionZoom(G.clusterId)}getClusterChildren(G){return this._geoJSONIndex.getChildren(G.clusterId)}getClusterLeaves(G){return this._geoJSONIndex.getLeaves(G.clusterId,G.limit,G.offset)}}class xn{constructor(G){this.self=G,this.actor=new c.H(G),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(Z,Y)=>{if(this.externalWorkerSourceTypes[Z])throw new Error(`Worker source with name "${Z}" already registered.`);this.externalWorkerSourceTypes[Z]=Y},this.self.addProtocol=c.cr,this.self.removeProtocol=c.cs,this.self.registerRTLTextPlugin=Z=>{c.cM.setMethods(Z)},this.actor.registerMessageHandler("LDT",(Z,Y)=>this._getDEMWorkerSource(Z,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RDT",(Z,Y)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(Z,Y.source).removeTile(Y)})),this.actor.registerMessageHandler("GCEZ",(Z,Y)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(Z,Y.type,Y.source).getClusterExpansionZoom(Y)})),this.actor.registerMessageHandler("GCC",(Z,Y)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(Z,Y.type,Y.source).getClusterChildren(Y)})),this.actor.registerMessageHandler("GCL",(Z,Y)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(Z,Y.type,Y.source).getClusterLeaves(Y)})),this.actor.registerMessageHandler("LD",(Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).loadData(Y)),this.actor.registerMessageHandler("GD",(Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).getData()),this.actor.registerMessageHandler("LT",(Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RT",(Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).reloadTile(Y)),this.actor.registerMessageHandler("AT",(Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).abortTile(Y)),this.actor.registerMessageHandler("RMT",(Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).removeTile(Y)),this.actor.registerMessageHandler("RS",(Z,Y)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[Z]||!this.workerSources[Z][Y.type]||!this.workerSources[Z][Y.type][Y.source])return;let ue=this.workerSources[Z][Y.type][Y.source];delete this.workerSources[Z][Y.type][Y.source],ue.removeSource!==void 0&&ue.removeSource(Y)})),this.actor.registerMessageHandler("RM",Z=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[Z],delete this.availableImages[Z],delete this.workerSources[Z],delete this.demWorkerSources[Z]})),this.actor.registerMessageHandler("SR",(Z,Y)=>c._(this,void 0,void 0,function*(){this.referrer=Y})),this.actor.registerMessageHandler("SRPS",(Z,Y)=>this._syncRTLPluginState(Z,Y)),this.actor.registerMessageHandler("IS",(Z,Y)=>c._(this,void 0,void 0,function*(){this.self.importScripts(Y)})),this.actor.registerMessageHandler("SI",(Z,Y)=>this._setImages(Z,Y)),this.actor.registerMessageHandler("UL",(Z,Y)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(Z).update(Y.layers,Y.removedIds)})),this.actor.registerMessageHandler("SL",(Z,Y)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(Z).replace(Y)}))}_setImages(G,Z){return c._(this,void 0,void 0,function*(){this.availableImages[G]=Z;for(let Y in this.workerSources[G]){let ue=this.workerSources[G][Y];for(let ve in ue)ue[ve].availableImages=Z}})}_syncRTLPluginState(G,Z){return c._(this,void 0,void 0,function*(){return yield c.cM.syncState(Z,this.self.importScripts)})}_getAvailableImages(G){let Z=this.availableImages[G];return Z||(Z=[]),Z}_getLayerIndex(G){let Z=this.layerIndexes[G];return Z||(Z=this.layerIndexes[G]=new a),Z}_getWorkerSource(G,Z,Y){if(this.workerSources[G]||(this.workerSources[G]={}),this.workerSources[G][Z]||(this.workerSources[G][Z]={}),!this.workerSources[G][Z][Y]){let ue={sendAsync:(ve,J)=>(ve.targetMapId=G,this.actor.sendAsync(ve,J))};switch(Z){case"vector":this.workerSources[G][Z][Y]=new P(ue,this._getLayerIndex(G),this._getAvailableImages(G));break;case"geojson":this.workerSources[G][Z][Y]=new tr(ue,this._getLayerIndex(G),this._getAvailableImages(G));break;default:this.workerSources[G][Z][Y]=new this.externalWorkerSourceTypes[Z](ue,this._getLayerIndex(G),this._getAvailableImages(G))}}return this.workerSources[G][Z][Y]}_getDEMWorkerSource(G,Z){return this.demWorkerSources[G]||(this.demWorkerSources[G]={}),this.demWorkerSources[G][Z]||(this.demWorkerSources[G][Z]=new M),this.demWorkerSources[G][Z]}}return c.i(self)&&(self.worker=new xn(self)),xn}),i("index",["exports","./shared"],function(c,a){"use strict";var g="5.5.0";function x(){var m=new a.A(4);return a.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}let E,P,M={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(m,r,s){let d=requestAnimationFrame(v=>{f(),r(v)}),{unsubscribe:f}=a.s(m.signal,"abort",()=>{f(),cancelAnimationFrame(d),s(a.c())},!1)},frameAsync(m){return new Promise((r,s)=>{this.frame(m,r,s)})},getImageData(m,r=0){return this.getImageCanvasContext(m).getImageData(-r,-r,m.width+2*r,m.height+2*r)},getImageCanvasContext(m){let r=window.document.createElement("canvas"),s=r.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return r.width=m.width,r.height=m.height,s.drawImage(m,0,0,m.width,m.height),s},resolveURL:m=>(E||(E=document.createElement("a")),E.href=m,E.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(P==null&&(P=matchMedia("(prefers-reduced-motion: reduce)")),P.matches)}};class O{static testProp(r){if(!O.docStyle)return r[0];for(let s=0;s<r.length;s++)if(r[s]in O.docStyle)return r[s];return r[0]}static create(r,s,d){let f=window.document.createElement(r);return s!==void 0&&(f.className=s),d&&d.appendChild(f),f}static createNS(r,s){return window.document.createElementNS(r,s)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(r,s){r.style[O.transformProp]=s}static addEventListener(r,s,d,f={}){r.addEventListener(s,d,"passive"in f?f:f.capture)}static removeEventListener(r,s,d,f={}){r.removeEventListener(s,d,"passive"in f?f:f.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static getScale(r){let s=r.getBoundingClientRect();return{x:s.width/r.offsetWidth||1,y:s.height/r.offsetHeight||1,boundingClientRect:s}}static getPoint(r,s,d){let f=s.boundingClientRect;return new a.P((d.clientX-f.left)/s.x-r.clientLeft,(d.clientY-f.top)/s.y-r.clientTop)}static mousePos(r,s){let d=O.getScale(r);return O.getPoint(r,d,s)}static touchPos(r,s){let d=[],f=O.getScale(r);for(let v=0;v<s.length;v++)d.push(O.getPoint(r,f,s[v]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){let s=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),d=s.querySelectorAll("script");for(let f of d)f.remove();return O.clean(s),s.innerHTML}static isPossiblyDangerous(r,s){let d=s.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!d.includes("javascript:")&&!d.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){let s=r.children;for(let d of s)O.removeAttributes(d),O.clean(d)}static removeAttributes(r){for(let{name:s,value:d}of r.attributes)O.isPossiblyDangerous(s,d)&&r.removeAttribute(s)}}O.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);let z={supported:!1,testSupport:function(m){!ye&&we&&(te?Q(m):oe=m)}},oe,we,ye=!1,te=!1;function Q(m){let r=m.createTexture();m.bindTexture(m.TEXTURE_2D,r);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,we),m.isContextLost())return;z.supported=!0}catch(s){}m.deleteTexture(r),ye=!0}var ee;typeof document!="undefined"&&(we=document.createElement("img"),we.onload=()=>{oe&&Q(oe),oe=null,te=!0},we.onerror=()=>{ye=!0,oe=null},we.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(m){let r,s,d,f;m.resetRequestQueue=()=>{r=[],s=0,d=0,f={}},m.addThrottleControl=q=>{let C=d++;return f[C]=q,C},m.removeThrottleControl=q=>{delete f[q],b()},m.getImage=(q,C,k=!0)=>new Promise((F,L)=>{z.supported&&(q.headers||(q.headers={}),q.headers.accept="image/webp,*/*"),a.e(q,{type:"image"}),r.push({abortController:C,requestParameters:q,supportImageRefresh:k,state:"queued",onError:V=>{L(V)},onSuccess:V=>{F(V)}}),b()});let v=q=>a._(this,void 0,void 0,function*(){q.state="running";let{requestParameters:C,supportImageRefresh:k,onError:F,onSuccess:L,abortController:V}=q,$=k===!1&&!a.i(self)&&!a.g(C.url)&&(!C.headers||Object.keys(C.headers).reduce((ne,se)=>ne&&se==="accept",!0));s++;let ie=$?T(C,V):a.m(C,V);try{let ne=yield ie;delete q.abortController,q.state="completed",ne.data instanceof HTMLImageElement||a.b(ne.data)?L(ne):ne.data&&L({data:yield(re=ne.data,typeof createImageBitmap=="function"?a.f(re):a.h(re)),cacheControl:ne.cacheControl,expires:ne.expires})}catch(ne){delete q.abortController,F(ne)}finally{s--,b()}var re}),b=()=>{let q=(()=>{for(let C of Object.keys(f))if(f[C]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let C=s;C<q&&r.length>0;C++){let k=r.shift();k.abortController.signal.aborted?C--:v(k)}},T=(q,C)=>new Promise((k,F)=>{let L=new Image,V=q.url,$=q.credentials;$&&$==="include"?L.crossOrigin="use-credentials":($&&$==="same-origin"||!a.d(V))&&(L.crossOrigin="anonymous"),C.signal.addEventListener("abort",()=>{L.src="",F(a.c())}),L.fetchPriority="high",L.onload=()=>{L.onerror=L.onload=null,k({data:L})},L.onerror=()=>{L.onerror=L.onload=null,C.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},L.src=V})}(ee||(ee={})),ee.resetRequestQueue();class xe{constructor(r){this._transformRequestFn=r}transformRequest(r,s){return this._transformRequestFn&&this._transformRequestFn(r,s)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function Te(m){let r=[];if(typeof m=="string")r.push({id:"default",url:m});else if(m&&m.length>0){let s=[];for(let{id:d,url:f}of m){let v=`${d}${f}`;s.indexOf(v)===-1&&(s.push(v),r.push({id:d,url:f}))}}return r}function Je(m,r,s){try{let d=new URL(m);return d.pathname+=`${r}${s}`,d.toString()}catch(d){throw new Error(`Invalid sprite URL "${m}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Ne{constructor(r,s,d,f){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(s,f)}update(r,s,d){let{width:f,height:v}=r,b=!(this.size&&this.size[0]===f&&this.size[1]===v||d),{context:T}=this,{gl:q}=T;if(this.useMipmap=!!(s&&s.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!s||s.premultiply!==!1)),b)this.size=[f,v],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||a.b(r)?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,r):q.texImage2D(q.TEXTURE_2D,0,this.format,f,v,0,this.format,q.UNSIGNED_BYTE,r.data);else{let{x:C,y:k}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||a.b(r)?q.texSubImage2D(q.TEXTURE_2D,0,C,k,q.RGBA,q.UNSIGNED_BYTE,r):q.texSubImage2D(q.TEXTURE_2D,0,C,k,f,v,q.RGBA,q.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D),T.pixelStoreUnpackFlipY.setDefault(),T.pixelStoreUnpack.setDefault(),T.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,s,d){let{context:f}=this,{gl:v}=f;v.bindTexture(v.TEXTURE_2D,this.texture),d!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=v.LINEAR),r!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,d||r),this.filter=r),s!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ut(m){let{userImage:r}=m;return!!(r&&r.render&&r.render())&&(m.data.replace(new Uint8Array(r.data.buffer)),!0)}class xt extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(let{ids:s,promiseResolve:d}of this.requestors)d(this._getImagesForIds(s));this.requestors=[]}}getImage(r){let s=this.images[r];if(s&&!s.data&&s.spriteData){let d=s.spriteData;s.data=new a.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),s.spriteData=null}return s}addImage(r,s){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,s)&&(this.images[r]=s)}_validate(r,s){let d=!0,f=s.data||s.spriteData;return this._validateStretch(s.stretchX,f&&f.width)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(s.stretchY,f&&f.height)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(s.content,s)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,s){if(!r)return!0;let d=0;for(let f of r){if(f[0]<d||f[1]<f[0]||s<f[1])return!1;d=f[1]}return!0}_validateContent(r,s){if(!r)return!0;if(r.length!==4)return!1;let d=s.spriteData,f=d&&d.width||s.data.width,v=d&&d.height||s.data.height;return!(r[0]<0||f<r[0]||r[1]<0||v<r[1]||r[2]<0||f<r[2]||r[3]<0||v<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,s,d=!0){let f=this.getImage(r);if(d&&(f.data.width!==s.data.width||f.data.height!==s.data.height))throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=f.version+1,this.images[r]=s,this.updatedImages[r]=!0}removeImage(r){let s=this.images[r];delete this.images[r],delete this.patterns[r],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((s,d)=>{let f=!0;if(!this.isLoaded())for(let v of r)this.images[v]||(f=!1);this.isLoaded()||f?s(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:s})})}_getImagesForIds(r){let s={};for(let d of r){let f=this.getImage(d);f||(this.fire(new a.l("styleimagemissing",{id:d})),f=this.getImage(d)),f?s[d]={data:f.data.clone(),pixelRatio:f.pixelRatio,sdf:f.sdf,version:f.version,stretchX:f.stretchX,stretchY:f.stretchY,content:f.content,textFitWidth:f.textFitWidth,textFitHeight:f.textFitHeight,hasRenderCallback:!!(f.userImage&&f.userImage.render)}:a.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return s}getPixelSize(){let{width:r,height:s}=this.atlasImage;return{width:r,height:s}}getPattern(r){let s=this.patterns[r],d=this.getImage(r);if(!d)return null;if(s&&s.position.version===d.version)return s.position;if(s)s.position.version=d.version;else{let f={w:d.data.width+2,h:d.data.height+2,x:0,y:0},v=new a.I(f,d);this.patterns[r]={bin:f,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){let s=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ne(r,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){let r=[];for(let v in this.patterns)r.push(this.patterns[v].bin);let{w:s,h:d}=a.p(r),f=this.atlasImage;f.resize({width:s||1,height:d||1});for(let v in this.patterns){let{bin:b}=this.patterns[v],T=b.x+1,q=b.y+1,C=this.getImage(v).data,k=C.width,F=C.height;a.R.copy(C,f,{x:0,y:0},{x:T,y:q},{width:k,height:F}),a.R.copy(C,f,{x:0,y:F-1},{x:T,y:q-1},{width:k,height:1}),a.R.copy(C,f,{x:0,y:0},{x:T,y:q+F},{width:k,height:1}),a.R.copy(C,f,{x:k-1,y:0},{x:T-1,y:q},{width:1,height:F}),a.R.copy(C,f,{x:0,y:0},{x:T+k,y:q},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(let s of r){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;let d=this.getImage(s);d||a.w(`Image with ID: "${s}" was not found`),ut(d)&&this.updateImage(s,d)}}}let mt=1e20;function _r(m,r,s,d,f,v,b,T,q){for(let C=r;C<r+d;C++)kr(m,s*v+C,v,f,b,T,q);for(let C=s;C<s+f;C++)kr(m,C*v+r,1,d,b,T,q)}function kr(m,r,s,d,f,v,b){v[0]=0,b[0]=-1e20,b[1]=mt,f[0]=m[r];for(let T=1,q=0,C=0;T<d;T++){f[T]=m[r+T*s];let k=T*T;do{let F=v[q];C=(f[T]-f[F]+k-F*F)/(T-F)/2}while(C<=b[q]&&--q>-1);q++,v[q]=T,b[q]=C,b[q+1]=mt}for(let T=0,q=0;T<d;T++){for(;b[q+1]<T;)q++;let C=v[q],k=T-C;m[r+T*s]=f[C]+k*k}}class wt{constructor(r,s){this.requestManager=r,this.localIdeographFontFamily=s,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return a._(this,void 0,void 0,function*(){let s=[];for(let v in r)for(let b of r[v])s.push(this._getAndCacheGlyphsPromise(v,b));let d=yield Promise.all(s),f={};for(let{stack:v,id:b,glyph:T}of d)f[v]||(f[v]={}),f[v][b]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return f})}_getAndCacheGlyphsPromise(r,s){return a._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let f=d.glyphs[s];if(f!==void 0)return{stack:r,id:s,glyph:f};if(f=this._tinySDF(d,r,s),f)return d.glyphs[s]=f,{stack:r,id:s,glyph:f};let v=Math.floor(s/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[v])return{stack:r,id:s,glyph:f};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[v]){let T=wt.loadGlyphRange(r,v,this.url,this.requestManager);d.requests[v]=T}let b=yield d.requests[v];for(let T in b)this._doesCharSupportLocalGlyph(+T)||(d.glyphs[+T]=b[+T]);return d.ranges[v]=!0,{stack:r,id:s,glyph:b[s]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||a.u["CJK Unified Ideographs"](r)||a.u["Hangul Syllables"](r)||a.u.Hiragana(r)||a.u.Katakana(r)||a.u["CJK Symbols and Punctuation"](r)||a.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,s,d){let f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let v=r.tinySDF;if(!v){let T="400";/bold/i.test(s)?T="900":/medium/i.test(s)?T="500":/light/i.test(s)&&(T="200"),v=r.tinySDF=new wt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:T})}let b=v.draw(String.fromCharCode(d));return{id:d,bitmap:new a.q({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}wt.loadGlyphRange=function(m,r,s,d){return a._(this,void 0,void 0,function*(){let f=256*r,v=f+255,b=d.transformRequest(s.replace("{fontstack}",m).replace("{range}",`${f}-${v}`),"Glyphs"),T=yield a.n(b,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${r}, ${f}-${v}`);let q={};for(let C of a.o(T.data))q[C.id]=C;return q})},wt.TinySDF=class{constructor({fontSize:m=24,buffer:r=3,radius:s=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:v="normal",fontStyle:b="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=s;let T=this.size=m+4*r,q=this._createCanvas(T),C=this.ctx=q.getContext("2d",{willReadFrequently:!0});C.font=`${b} ${v} ${m}px ${f}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(m){let r=document.createElement("canvas");return r.width=r.height=m,r}draw(m){let{width:r,actualBoundingBoxAscent:s,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:v}=this.ctx.measureText(m),b=Math.ceil(s),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-f))),q=Math.min(this.size-this.buffer,b+Math.ceil(d)),C=T+2*this.buffer,k=q+2*this.buffer,F=Math.max(C*k,0),L=new Uint8ClampedArray(F),V={data:L,width:C,height:k,glyphWidth:T,glyphHeight:q,glyphTop:b,glyphLeft:0,glyphAdvance:r};if(T===0||q===0)return V;let{ctx:$,buffer:ie,gridInner:re,gridOuter:ne}=this;$.clearRect(ie,ie,T,q),$.fillText(m,ie,ie+b);let se=$.getImageData(ie,ie,T,q);ne.fill(mt,0,F),re.fill(0,0,F);for(let de=0;de<q;de++)for(let he=0;he<T;he++){let fe=se.data[4*(de*T+he)+3]/255;if(fe===0)continue;let _e=(de+ie)*C+he+ie;if(fe===1)ne[_e]=0,re[_e]=mt;else{let pe=.5-fe;ne[_e]=pe>0?pe*pe:0,re[_e]=pe<0?pe*pe:0}}_r(ne,0,0,C,k,C,this.f,this.v,this.z),_r(re,ie,ie,T,q,C,this.f,this.v,this.z);for(let de=0;de<F;de++){let he=Math.sqrt(ne[de])-Math.sqrt(re[de]);L[de]=Math.round(255-255*(he/this.radius+this.cutoff))}return V}};class zt{constructor(){this.specification=a.v.light.position}possiblyEvaluate(r,s){return a.z(r.expression.evaluate(s))}interpolate(r,s,d){return{x:a.B.number(r.x,s.x,d),y:a.B.number(r.y,s.y,d),z:a.B.number(r.z,s.z,d)}}}let xr;class Kr extends a.E{constructor(r){super(),xr=xr||new a.r({anchor:new a.D(a.v.light.anchor),position:new zt,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(xr),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,s={}){if(!this._validate(a.t,r,s))for(let d in r){let f=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,s,d){return(!d||d.validate!==!1)&&a.x(this,r.call(a.y,{value:s,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}let Lt=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Dr extends a.E{constructor(r){super(),this._transitionable=new a.T(Lt),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.C(0))}setSky(r,s={}){if(!this._validate(a.F,r,s)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let d in r){let f=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,s,d={}){return(d==null?void 0:d.validate)!==!1&&a.x(this,r.call(a.y,a.e({value:s,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Si{constructor(r,s){this.width=r,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,s){let d=r.join(",")+String(s);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,s)),this.dashEntry[d]}getDashRanges(r,s,d){let f=[],v=r.length%2==1?-r[r.length-1]*d:0,b=r[0]*d,T=!0;f.push({left:v,right:b,isDash:T,zeroLength:r[0]===0});let q=r[0];for(let C=1;C<r.length;C++){T=!T;let k=r[C];v=q*d,q+=k,b=q*d,f.push({left:v,right:b,isDash:T,zeroLength:k===0})}return f}addRoundDash(r,s,d){let f=s/2;for(let v=-d;v<=d;v++){let b=this.width*(this.nextRow+d+v),T=0,q=r[T];for(let C=0;C<this.width;C++){C/q.right>1&&(q=r[++T]);let k=Math.abs(C-q.left),F=Math.abs(C-q.right),L=Math.min(k,F),V,$=v/d*(f+1);if(q.isDash){let ie=f-Math.abs($);V=Math.sqrt(L*L+ie*ie)}else V=f-Math.sqrt(L*L+$*$);this.data[b+C]=Math.max(0,Math.min(255,V+128))}}}addRegularDash(r){for(let T=r.length-1;T>=0;--T){let q=r[T],C=r[T+1];q.zeroLength?r.splice(T,1):C&&C.isDash===q.isDash&&(C.left=q.left,r.splice(T,1))}let s=r[0],d=r[r.length-1];s.isDash===d.isDash&&(s.left=d.left-this.width,d.right=s.right+this.width);let f=this.width*this.nextRow,v=0,b=r[v];for(let T=0;T<this.width;T++){T/b.right>1&&(b=r[++v]);let q=Math.abs(T-b.left),C=Math.abs(T-b.right),k=Math.min(q,C);this.data[f+T]=Math.max(0,Math.min(255,(b.isDash?k:-k)+128))}}addDash(r,s){let d=s?7:0,f=2*d+1;if(this.nextRow+f>this.height)return a.w("LineAtlas out of space"),null;let v=0;for(let T=0;T<r.length;T++)v+=r[T];if(v!==0){let T=this.width/v,q=this.getDashRanges(r,this.width,T);s?this.addRoundDash(q,T,d):this.addRegularDash(q)}let b={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:v};return this.nextRow+=f,this.dirty=!0,b}bind(r){let s=r.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}let wa="maplibre_preloaded_worker_pool";class nn{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<nn.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[wa]}numActive(){return Object.keys(this.active).length}}let ws=Math.floor(M.hardwareConcurrency/2),jn,fi;function fo(){return jn||(jn=new nn),jn}nn.workerCount=a.G(globalThis)?Math.max(Math.min(ws,3),1):1;class an{constructor(r,s){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=s;let d=this.workerPool.acquire(s);for(let f=0;f<d.length;f++){let v=new a.H(d[f],s);v.name=`Worker ${f}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,s){let d=[];for(let f of this.actors)d.push(f.sendAsync({type:r,data:s}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(s=>{s.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,s){for(let d of this.actors)d.registerMessageHandler(r,s)}}function Ss(){return fi||(fi=new an(fo(),a.J),fi.registerMessageHandler("GR",(m,r,s)=>a.m(r,s))),fi}function po(m,r){let s=a.K();return a.L(s,s,[1,1,0]),a.M(s,s,[.5*m.width,.5*m.height,1]),m.calculatePosMatrix?a.N(s,s,m.calculatePosMatrix(r.toUnwrapped())):s}function ml(m,r,s,d,f,v,b){var T;let q=function(L,V,$){if(L)for(let ie of L){let re=V[ie];if(re&&re.source===$&&re.type==="fill-extrusion")return!0}else for(let ie in V){let re=V[ie];if(re.source===$&&re.type==="fill-extrusion")return!0}return!1}((T=f==null?void 0:f.layers)!==null&&T!==void 0?T:null,r,m.id),C=v.maxPitchScaleFactor(),k=m.tilesIn(d,C,q);k.sort(Wi);let F=[];for(let L of k)F.push({wrappedTileID:L.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(r,s,m._state,L.queryGeometry,L.cameraQueryGeometry,L.scale,f,v,C,po(m.transform,L.tileID),b?(V,$)=>b(L.tileID,V,$):void 0)});return function(L,V){for(let $ in L)for(let ie of L[$])on(ie,V);return L}(function(L){let V={},$={};for(let ie of L){let re=ie.queryResults,ne=ie.wrappedTileID,se=$[ne]=$[ne]||{};for(let de in re){let he=re[de],fe=se[de]=se[de]||{},_e=V[de]=V[de]||[];for(let pe of he)fe[pe.featureIndex]||(fe[pe.featureIndex]=!0,_e.push(pe))}}return V}(F),m)}function Wi(m,r){let s=m.tileID,d=r.tileID;return s.overscaledZ-d.overscaledZ||s.canonical.y-d.canonical.y||s.wrap-d.wrap||s.canonical.x-d.canonical.x}function on(m,r){let s=m.feature,d=r.getFeatureState(s.layer["source-layer"],s.id);s.source=s.layer.source,s.layer["source-layer"]&&(s.sourceLayer=s.layer["source-layer"]),s.state=d}function Ti(m,r,s){return a._(this,void 0,void 0,function*(){let d=m;if(m.url?d=(yield a.j(r.transformRequest(m.url,"Source"),s)).data:yield M.frameAsync(s),!d)return null;let f=a.O(a.e(d,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(f.vectorLayerIds=d.vector_layers.map(v=>v.id)),f})}class gr{constructor(r,s){r&&(s?this.setSouthWest(r).setNorthEast(s):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof a.Q?new a.Q(r.lng,r.lat):a.Q.convert(r),this}setSouthWest(r){return this._sw=r instanceof a.Q?new a.Q(r.lng,r.lat):a.Q.convert(r),this}extend(r){let s=this._sw,d=this._ne,f,v;if(r instanceof a.Q)f=r,v=r;else{if(!(r instanceof gr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(gr.convert(r)):this.extend(a.Q.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(a.Q.convert(r)):this;if(f=r._sw,v=r._ne,!f||!v)return this}return s||d?(s.lng=Math.min(f.lng,s.lng),s.lat=Math.min(f.lat,s.lat),d.lng=Math.max(v.lng,d.lng),d.lat=Math.max(v.lat,d.lat)):(this._sw=new a.Q(f.lng,f.lat),this._ne=new a.Q(v.lng,v.lat)),this}getCenter(){return new a.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.Q(this.getWest(),this.getNorth())}getSouthEast(){return new a.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){let{lng:s,lat:d}=a.Q.convert(r),f=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(r){return r instanceof gr?r:r&&new gr(r)}static fromLngLat(r,s=0){let d=360*s/40075017,f=d/Math.cos(Math.PI/180*r.lat);return new gr(new a.Q(r.lng-f,r.lat-d),new a.Q(r.lng+f,r.lat+d))}adjustAntiMeridian(){let r=new a.Q(this._sw.lng,this._sw.lat),s=new a.Q(this._ne.lng,this._ne.lat);return new gr(r,r.lng>s.lng?new a.Q(s.lng+360,s.lat):s)}}class Sa{constructor(r,s,d){this.bounds=gr.convert(this.validateBounds(r)),this.minzoom=s||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){let s=Math.pow(2,r.z),d=Math.floor(a.U(this.bounds.getWest())*s),f=Math.floor(a.S(this.bounds.getNorth())*s),v=Math.ceil(a.U(this.bounds.getEast())*s),b=Math.ceil(a.S(this.bounds.getSouth())*s);return r.x>=d&&r.x<v&&r.y>=f&&r.y<b}}class Ha extends a.E{constructor(r,s,d,f){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.O(s,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield Ti(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(a.e(this,r),r.bounds&&(this.tileBounds=new Sa(r.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new a.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(r){return a._(this,void 0,void 0,function*(){let s=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(s,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};d.request.collectResourceTiming=this._collectResourceTiming;let f="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((v,b)=>{r.reloadPromise={resolve:v,reject:b}})}else r.actor=this.dispatcher.getActor(),f="LT";r.abortController=new AbortController;try{let v=yield r.actor.sendAsync({type:f,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,v)}catch(v){if(delete r.abortController,r.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,s){if(s&&s.resourceTiming&&(r.resourceTiming=s.resourceTiming),s&&this.map._refreshExpiredTiles&&r.setExpiryData(s),r.loadVectorData(s,this.map.painter),r.reloadPromise){let d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Un extends a.E{constructor(r,s,d,f){super(),this.id=r,this.dispatcher=d,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},s),a.e(this,a.O(s,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield Ti(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(a.e(this,s),s.bounds&&(this.tileBounds=new Sa(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(s){this._tileJSONRequest=null,this.fire(new a.k(s))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return a.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return a._(this,void 0,void 0,function*(){let s=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{let d=yield ee.getImage(this.map._requestManager.transformRequest(s,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let f=this.map.painter.context,v=f.gl,b=d.data;r.texture=this.map.painter.getTileTexture(b.width),r.texture?r.texture.update(b,{useMipmap:!0}):(r.texture=new Ne(f,b,v.RGBA,{useMipmap:!0}),r.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Ts extends Un{constructor(r,s,d,f){super(r,s,d,f),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox",this.redFactor=s.redFactor,this.greenFactor=s.greenFactor,this.blueFactor=s.blueFactor,this.baseShift=s.baseShift}loadTile(r){return a._(this,void 0,void 0,function*(){let s=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(s,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{let f=yield ee.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){let v=f.data;this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});let b=a.b(v)&&a.V()?v:yield this.readImageNow(v),T={type:this.type,uid:r.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();let q=yield r.actor.sendAsync({type:"LDT",data:T});r.dem=q,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}readImageNow(r){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&a.W()){let s=r.width+2,d=r.height+2;try{return new a.R({width:s,height:d},yield a.X(r,-1,-1,s,d))}catch(f){}}return M.getImageData(r,1)})}_getNeighboringTiles(r){let s=r.canonical,d=Math.pow(2,s.z),f=(s.x-1+d)%d,v=s.x===0?r.wrap-1:r.wrap,b=(s.x+1+d)%d,T=s.x+1===d?r.wrap+1:r.wrap,q={};return q[new a.Y(r.overscaledZ,v,s.z,f,s.y).key]={backfilled:!1},q[new a.Y(r.overscaledZ,T,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(q[new a.Y(r.overscaledZ,v,s.z,f,s.y-1).key]={backfilled:!1},q[new a.Y(r.overscaledZ,r.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},q[new a.Y(r.overscaledZ,T,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<d&&(q[new a.Y(r.overscaledZ,v,s.z,f,s.y+1).key]={backfilled:!1},q[new a.Y(r.overscaledZ,r.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},q[new a.Y(r.overscaledZ,T,s.z,b,s.y+1).key]={backfilled:!1}),q}unloadTile(r){return a._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Es extends a.E{constructor(r,s,d,f){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(f),this._data=s.data,this._options=a.e({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId,s.clusterMaxZoom!==void 0&&this.maxzoom<=s.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${s.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(s.buffer!==void 0?s.buffer:128),tolerance:this._pixelsToTileUnits(s.tolerance!==void 0?s.tolerance:.375),extent:a.Z,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:a.Z,radius:this._pixelsToTileUnits(s.clusterRadius||50),log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(a.Z/this.tileSize)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return a._(this,void 0,void 0,function*(){let r=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(s=>s.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){let r=new gr,s=yield this.getData(),d;switch(s.type){case"FeatureCollection":d=s.features.map(f=>this.getCoordinatesFromGeometry(f.geometry)).flat(1/0);break;case"Feature":d=this.getCoordinatesFromGeometry(s.geometry);break;default:d=this.getCoordinatesFromGeometry(s)}if(d.length==0)return r;for(let f=0;f<d.length-1;f+=2)r.extend([d[f],d[f+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,s,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:s,offset:d}})}_updateWorkerData(r){return a._(this,void 0,void 0,function*(){let s=a.e({type:this.type},this.workerOptions);r?s.dataDiff=r:typeof this._data=="string"?(s.request=this.map._requestManager.transformRequest(M.resolveURL(this._data),"Source"),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{let d=yield this.actor.sendAsync({type:"LD",data:s});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let f=null;d.resourceTiming&&d.resourceTiming[this.id]&&(f=d.resourceTiming[this.id].slice(0));let v={dataType:"source"};this._collectResourceTiming&&f&&f.length>0&&a.e(v,{resourceTiming:f}),this.fire(new a.l("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return a._(this,void 0,void 0,function*(){let s=r.actor?"RT":"LT";r.actor=this.actor;let d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;let f=yield this.actor.sendAsync({type:s,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(f,this.map.painter,s==="RT")})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class _n extends a.E{constructor(r,s,d,f){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=d,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=s}load(r){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let s=yield ee.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,s&&s.data&&(this.image=s.data,r&&(this.coordinates=r),this._finishLoading())}catch(s){this._request=null,this._loaded=!0,this.fire(new a.k(s))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;let s=r.map(a.$.fromLngLat);var d;return this.tileID=function(f){let v=1/0,b=1/0,T=-1/0,q=-1/0;for(let L of f)v=Math.min(v,L.x),b=Math.min(b,L.y),T=Math.max(T,L.x),q=Math.max(q,L.y);let C=Math.max(T-v,q-b),k=Math.max(0,Math.floor(-Math.log(C)/Math.LN2)),F=Math.pow(2,k);return new a.a1(k,Math.floor((v+T)/2*F),Math.floor((b+q)/2*F))}(s),this.terrainTileRanges=this._getOverlappingTileRanges(s),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=s.map(f=>this.tileID.getTilePoint(f)._round()),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let r=this.map.painter.context,s=r.gl;this.texture||(this.texture=new Ne(r,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let d=!1;for(let f in this.tiles){let v=this.tiles[f];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,d=!0)}d&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let s=1/0,d=1/0,f=-1/0,v=-1/0;for(let T of r)s=Math.min(s,T.x),d=Math.min(d,T.y),f=Math.max(f,T.x),v=Math.max(v,T.y);let b={};for(let T=0;T<=a.a0;T++){let q=Math.pow(2,T),C=Math.floor(s*q),k=Math.floor(d*q),F=Math.floor(f*q),L=Math.floor(v*q);b[T]={minTileX:C,minTileY:k,maxTileX:F,maxTileY:L}}return b}}class Ta extends _n{constructor(r,s,d,f){super(r,s,d,f),this.roundZoom=!0,this.type="video",this.options=s}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;let r=this.options;this.urls=[];for(let s of r.urls)this.urls.push(this.map._requestManager.transformRequest(s,"Source").url);try{let s=yield a.a2(this.urls);if(this._loaded=!0,!s)return;this.video=s,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(s){this.fire(new a.k(s))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){let s=this.video.seekable;r<s.start(0)||r>s.end(0)?this.fire(new a.k(new a.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let r=this.map.painter.context,s=r.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new Ne(r,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let d=!1;for(let f in this.tiles){let v=this.tiles[f];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,d=!0)}d&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class As extends _n{constructor(r,s,d,f){super(r,s,d,f),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(b=>typeof b!="number"))||this.fire(new a.k(new a.a3(`sources.${r}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new a.k(new a.a3(`sources.${r}`,null,"missing required property \"coordinates\""))),s.animate&&typeof s.animate!="boolean"&&this.fire(new a.k(new a.a3(`sources.${r}`,null,"optional \"animate\" property must be a boolean value"))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a3(`sources.${r}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new a.k(new a.a3(`sources.${r}`,null,"missing required property \"canvas\""))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let s=this.map.painter.context,d=s.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ne(s,this.canvas,d.RGBA,{premultiply:!0});let f=!1;for(let v in this.tiles){let b=this.tiles[v];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}let mo={},ge=m=>{switch(m){case"geojson":return Es;case"image":return _n;case"raster":return Un;case"raster-dem":return Ts;case"vector":return Ha;case"video":return Ta;case"canvas":return As}return mo[m]},Re="RTLPluginLoaded";class Ve extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ss()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(s=>{throw this.status="error",s})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return a._(this,arguments,void 0,function*(s,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=M.resolveURL(s),!this.url)throw new Error(`requested url ${s} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Re))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let gt=null;function st(){return gt||(gt=new Ve),gt}class tt{constructor(r,s){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=a.a4(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){let s=r+this.timeAdded;s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,s,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(f,v){let b={};if(!v)return b;for(let T of f){let q=T.layerIds.map(C=>v.getLayer(C)).filter(Boolean);if(q.length!==0){T.layers=q,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(C=>q.filter(k=>k.id===C)[0]));for(let C of q)b[C.id]=T}}return b}(r.buckets,s==null?void 0:s.style),this.hasSymbolBuckets=!1;for(let f in this.buckets){let v=this.buckets[f];if(v instanceof a.a6){if(this.hasSymbolBuckets=!0,!d)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let f in this.buckets){let v=this.buckets[f];if(v instanceof a.a6&&v.hasRTLText){this.hasRTLText=!0,st().lazyLoad();break}}this.queryPadding=0;for(let f in this.buckets){let v=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(f).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(let r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(let d in this.buckets){let f=this.buckets[d];f.uploadPending()&&f.upload(r)}let s=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ne(r,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ne(r,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,s,d,f,v,b,T,q,C,k,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:v,scale:b,tileSize:this.tileSize,pixelPosMatrix:k,transform:q,params:T,queryPadding:this.queryPadding*C,getElevation:F},r,s,d):{}}querySourceFeatures(r,s){let d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;let f=d.loadVTLayers(),v=s&&s.sourceLayer?s.sourceLayer:"",b=f._geojsonTileLayer||f[v];if(!b)return;let T=a.a7(s&&s.filter),{z:q,x:C,y:k}=this.tileID.canonical,F={z:q,x:C,y:k};for(let L=0;L<b.length;L++){let V=b.feature(L);if(T.needGeometry){let re=a.a8(V,!0);if(!T.filter(new a.C(this.tileID.overscaledZ),re,this.tileID.canonical))continue}else if(!T.filter(new a.C(this.tileID.overscaledZ),V))continue;let $=d.getId(V,v),ie=new a.a9(V,q,C,k,$);ie.tile=F,r.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){let s=this.expirationTime;if(r.cacheControl){let d=a.aa(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){let d=Date.now(),f=!1;if(this.expirationTime>d)f=!1;else if(s){if(this.expirationTime<s)f=!0;else{let v=this.expirationTime-s;v?this.expirationTime=d+Math.max(v,3e4):f=!0}}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;let d=this.latestFeatureIndex.loadVTLayers();for(let f in this.buckets){if(!s.style.hasLayer(f))continue;let v=this.buckets[f],b=v.layers[0].sourceLayer||"_geojsonTileLayer",T=d[b],q=r[b];if(!T||!q||Object.keys(q).length===0)continue;v.update(q,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});let C=s&&s.style&&s.style.getLayer(f);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<M.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=M.now()+r}setDependencies(r,s){let d={};for(let f of s)d[f]=!0;this.dependencies[r]=d}hasDependency(r,s){for(let d of r){let f=this.dependencies[d];if(f){for(let v of s)if(f[v])return!0}}return!1}}class dt{constructor(r,s){this.max=r,this.onRemove=s,this.reset()}reset(){for(let r in this.data)for(let s of this.data[r])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(r,s,d){let f=r.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);let v={value:s,timeout:void 0};if(d!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},d)),this.data[f].push(v),this.order.push(f),this.order.length>this.max){let b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let s=this.data[r].shift();return s.timeout&&clearTimeout(s.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),s.value}getByKey(r){let s=this.data[r];return s?s[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,s){if(!this.has(r))return this;let d=r.wrapped().key,f=s===void 0?0:this.data[d].indexOf(s),v=this.data[d][f];return this.data[d].splice(f,1),v.timeout&&clearTimeout(v.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(v.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(r){let s=[];for(let d in this.data)for(let f of this.data[d])r(f.value)||s.push(f);for(let d of s)this.remove(d.value.tileID,d)}}class Bt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,s,d){let f=String(s);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][f]=this.stateChanges[r][f]||{},a.e(this.stateChanges[r][f],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(let v in this.state[r])v!==f&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][f]===null){this.deletedStates[r][f]={};for(let v in this.state[r][f])d[v]||(this.deletedStates[r][f][v]=null)}else for(let v in d)this.deletedStates[r]&&this.deletedStates[r][f]&&this.deletedStates[r][f][v]===null&&delete this.deletedStates[r][f][v]}removeFeatureState(r,s,d){if(this.deletedStates[r]===null)return;let f=String(s);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&s!==void 0)this.deletedStates[r][f]!==null&&(this.deletedStates[r][f]=this.deletedStates[r][f]||{},this.deletedStates[r][f][d]=null);else if(s!==void 0){if(this.stateChanges[r]&&this.stateChanges[r][f])for(d in this.deletedStates[r][f]={},this.stateChanges[r][f])this.deletedStates[r][f][d]=null;else this.deletedStates[r][f]=null;}else this.deletedStates[r]=null}getState(r,s){let d=String(s),f=a.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){let v=this.deletedStates[r][s];if(v===null)return{};for(let b in v)delete f[b]}return f}initializeTileState(r,s){r.setFeatureState(this.state,s)}coalesceChanges(r,s){let d={};for(let f in this.stateChanges){this.state[f]=this.state[f]||{};let v={};for(let b in this.stateChanges[f])this.state[f][b]||(this.state[f][b]={}),a.e(this.state[f][b],this.stateChanges[f][b]),v[b]=this.state[f][b];d[f]=v}for(let f in this.deletedStates){this.state[f]=this.state[f]||{};let v={};if(this.deletedStates[f]===null)for(let b in this.state[f])v[b]={},this.state[f][b]={};else for(let b in this.deletedStates[f]){if(this.deletedStates[f][b]===null)this.state[f][b]={};else for(let T of Object.keys(this.deletedStates[f][b]))delete this.state[f][b][T];v[b]=this.state[f][b]}d[f]=d[f]||{},a.e(d[f],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(let f in r)r[f].setFeatureState(d,s)}}let Kt=89.25;function tr(m,r){let s=a.ae(r.lat,-85.051129,a.af);return new a.P(a.U(r.lng)*m,a.S(s)*m)}function xn(m,r){return new a.$(r.x/m,r.y/m).toLngLat()}function Se(m){return m.cameraToCenterDistance*Math.min(.85*Math.tan(a.ab(90-m.pitch)),Math.tan(a.ab(Kt-m.pitch)))}function G(m,r){let s=m.canonical,d=r/a.ac(s.z),f=s.x+Math.pow(2,s.z)*m.wrap,v=a.ad(new Float64Array(16));return a.L(v,v,[f*d,s.y*d,0]),a.M(v,v,[d/a.Z,d/a.Z,1]),v}function Z(m,r,s,d,f){let v=a.$.fromLngLat(m,r),b=f*a.ag(1,m.lat),T=b*Math.cos(a.ab(s)),q=Math.sqrt(b*b-T*T),C=q*Math.sin(a.ab(-d)),k=q*Math.cos(a.ab(-d));return new a.$(v.x+C,v.y+k,v.z+T)}function Y(m,r,s){let d=r.intersectsFrustum(m);if(!s)return d;let f=r.intersectsPlane(s);return d===0||f===0?0:d===2&&f===2?2:1}function ue(m,r,s){let d=0,f=(s-r)/10;for(let v=0;v<10;v++)d+=f*Math.pow(Math.cos(r+(v+.5)/10*(s-r)),m);return d}function ve(m,r){return function(s,d,f,v,b){let T=2*((m-1)/a.ah(Math.cos(a.ab(Kt-b))/Math.cos(a.ab(Kt)))-1),q=Math.acos(f/v),C=2*ue(T-1,0,a.ab(b/2)),k=Math.min(a.ab(Kt),q+a.ab(b/2)),F=ue(T-1,Math.min(k,q-a.ab(b/2)),k),L=Math.atan(d/f),V=Math.hypot(d,f),$=s;return $+=a.ah(v/V/Math.max(.5,Math.cos(a.ab(b/2)))),$+=T*a.ah(Math.cos(L))/2,$-=a.ah(Math.max(1,F/C/r))/2,$}}let J=ve(9.314,3);function Pe(m,r){let s=(r.roundZoom?Math.round:Math.floor)(m.zoom+a.ah(m.tileSize/r.tileSize));return Math.max(0,s)}function be(m,r){let s=m.getCameraFrustum(),d=m.getClippingPlane(),f=m.screenPointToMercatorCoordinate(m.getCameraPoint()),v=a.$.fromLngLat(m.center,m.elevation);f.z=v.z+Math.cos(m.pitchInRadians)*m.cameraToCenterDistance/m.worldSize;let b=m.getCoveringTilesDetailsProvider(),T=b.allowVariableZoom(m,r),q=Pe(m,r),C=r.minzoom||0,k=r.maxzoom!==void 0?r.maxzoom:m.maxZoom,F=Math.min(Math.max(0,q),k),L=Math.pow(2,F),V=[L*f.x,L*f.y,0],$=[L*v.x,L*v.y,0],ie=Math.hypot(v.x-f.x,v.y-f.y),re=Math.abs(v.z-f.z),ne=Math.hypot(ie,re),se=fe=>({zoom:0,x:0,y:0,wrap:fe,fullyVisible:!1}),de=[],he=[];if(m.renderWorldCopies&&b.allowWorldCopies())for(let fe=1;fe<=3;fe++)de.push(se(-fe)),de.push(se(fe));for(de.push(se(0));de.length>0;){let fe=de.pop(),_e=fe.x,pe=fe.y,qe=fe.fullyVisible,ze={x:_e,y:pe,z:fe.zoom},Oe=b.getTileAABB(ze,fe.wrap,m.elevation,r);if(!qe){let Ye=Y(s,Oe,d);if(Ye===0)continue;qe=Ye===2}let ke=b.distanceToTile2d(f.x,f.y,ze,Oe),De=q;T&&(De=(r.calculateTileZoom||J)(m.zoom+a.ah(m.tileSize/r.tileSize),ke,re,ne,m.fov)),De=(r.roundZoom?Math.round:Math.floor)(De),De=Math.max(0,De);let Qe=Math.min(De,k);if(fe.wrap=b.getWrap(v,ze,fe.wrap),fe.zoom>=Qe){if(fe.zoom<C)continue;let Ye=F-fe.zoom,Ge=V[0]-.5-(_e<<Ye),ft=V[1]-.5-(pe<<Ye),Wt=r.reparseOverscaled?Math.max(fe.zoom,De):fe.zoom;he.push({tileID:new a.Y(fe.zoom===k?Wt:fe.zoom,fe.wrap,fe.zoom,_e,pe),distanceSq:a.ai([$[0]-.5-_e,$[1]-.5-pe]),tileDistanceToCamera:Math.sqrt(Ge*Ge+ft*ft)})}else for(let Ye=0;Ye<4;Ye++)de.push({zoom:fe.zoom+1,x:(_e<<1)+Ye%2,y:(pe<<1)+(Ye>>1),wrap:fe.wrap,fullyVisible:qe})}return he.sort((fe,_e)=>fe.distanceSq-_e.distanceSq).map(fe=>fe.tileID)}class Ae extends a.E{constructor(r,s,d){super(),this.id=r,this.dispatcher=d,this.on("data",f=>this._dataHandler(f)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((f,v,b,T)=>{let q=new(ge(v.type))(f,v,b,T);if(q.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${q.id}`);return q})(r,s,d,this),this._tiles={},this._cache=new dt(0,f=>this._unloadTile(f)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Bt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let r in this._tiles){let s=this._tiles[r];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,s,d){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,s,d)}catch(f){r.state="errored",f.status!==404?this._source.fire(new a.k(f,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new a.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let s in this._tiles){let d=this._tiles[s];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Ce).map(r=>r.key)}getRenderableIds(r){let s=[];for(let d in this._tiles)this._isIdRenderable(d,r)&&s.push(this._tiles[d]);return r?s.sort((d,f)=>{let v=d.tileID,b=f.tileID,T=new a.P(v.canonical.x,v.canonical.y)._rotate(-this.transform.bearingInRadians),q=new a.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians);return v.overscaledZ-b.overscaledZ||q.y-T.y||q.x-T.x}).map(d=>d.tileID.key):s.map(d=>d.tileID).sort(Ce).map(d=>d.key)}hasRenderableParent(r){let s=this.findLoadedParent(r,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(r,s){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(s||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let s in this._tiles)(r||this._tiles[s].state!=="errored")&&this._reloadTile(s,"reloading")}}_reloadTile(r,s){return a._(this,void 0,void 0,function*(){let d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=s),yield this._loadTile(d,r,s))})}_tileLoaded(r,s,d){r.timeAdded=M.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(s,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){let s=this.getRenderableIds();for(let f=0;f<s.length;f++){let v=s[f];if(r.neighboringTiles&&r.neighboringTiles[v]){let b=this.getTileByID(v);d(r,b),d(b,r)}}function d(f,v){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let b=v.tileID.canonical.x-f.tileID.canonical.x,T=v.tileID.canonical.y-f.tileID.canonical.y,q=Math.pow(2,f.tileID.canonical.z),C=v.tileID.key;b===0&&T===0||Math.abs(T)>1||(Math.abs(b)>1&&(Math.abs(b+q)===1?b+=q:Math.abs(b-q)===1&&(b-=q)),v.dem&&f.dem&&(f.dem.backfillBorder(v.dem,b,T),f.neighboringTiles&&f.neighboringTiles[C]&&(f.neighboringTiles[C].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,s,d,f){for(let v in this._tiles){let b=this._tiles[v];if(f[v]||!b.hasData()||b.tileID.overscaledZ<=s||b.tileID.overscaledZ>d)continue;let T=b.tileID;for(;b&&b.tileID.overscaledZ>s+1;){let C=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[C.key],b&&b.hasData()&&(T=C)}let q=T;for(;q.overscaledZ>s;)if(q=q.scaledTo(q.overscaledZ-1),r[q.key]||r[q.canonical.key]){f[T.key]=T;break}}}findLoadedParent(r,s){if(r.key in this._loadedParentTiles){let d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=s?d:null}for(let d=r.overscaledZ-1;d>=s;d--){let f=r.scaledTo(d),v=this._getLoadedTile(f);if(v)return v}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){let s=this._tiles[r.key];return s&&s.hasData()?s:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){let s=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,f=Math.floor(s*d*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(v)}handleWrapJump(r){let s=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,s){let d={};for(let f in this._tiles){let v=this._tiles[f];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+s),d[v.tileID.key]=v}this._tiles=d;for(let f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(let f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}_updateCoveredAndRetainedTiles(r,s,d,f,v,b){let T={},q={},C=Object.keys(r),k=M.now();for(let F of C){let L=r[F],V=this._tiles[F];if(!V||V.fadeEndTime!==0&&V.fadeEndTime<=k)continue;let $=this.findLoadedParent(L,s),ie=this.findLoadedSibling(L),re=$||ie||null;re&&(this._addTile(re.tileID),T[re.tileID.key]=re.tileID),q[F]=L}this._retainLoadedChildren(q,f,d,r);for(let F in T)r[F]||(this._coveredTiles[F]=!0,r[F]=T[F]);if(b){let F={},L={};for(let V of v)this._tiles[V.key].hasData()?F[V.key]=V:L[V.key]=V;for(let V in L){let $=L[V].children(this._source.maxzoom);this._tiles[$[0].key]&&this._tiles[$[1].key]&&this._tiles[$[2].key]&&this._tiles[$[3].key]&&(F[$[0].key]=r[$[0].key]=$[0],F[$[1].key]=r[$[1].key]=$[1],F[$[2].key]=r[$[2].key]=$[2],F[$[3].key]=r[$[3].key]=$[3],delete L[V])}for(let V in L){let $=L[V],ie=this.findLoadedParent($,this._source.minzoom),re=this.findLoadedSibling($),ne=ie||re||null;if(ne){F[ne.tileID.key]=r[ne.tileID.key]=ne.tileID;for(let se in F)F[se].isChildOf(ne.tileID)&&delete F[se]}}for(let V in this._tiles)F[V]||(this._coveredTiles[V]=!0)}}update(r,s){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=s,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new a.Y(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y)):(d=be(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter(k=>this._source.hasTile(k)))):d=[];let f=Pe(r,this._source),v=Math.max(f-Ae.maxOverzooming,this._source.minzoom),b=Math.max(f+Ae.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let k={};for(let F of d)if(F.canonical.z>this._source.minzoom){let L=F.scaledTo(F.canonical.z-1);k[L.key]=L;let V=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));k[V.key]=V}d=d.concat(Object.values(k))}let T=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let q=this._updateRetainedTiles(d,f);Ee(this._source.type)&&this._updateCoveredAndRetainedTiles(q,v,b,f,d,s);for(let k in q)this._tiles[k].clearFadeHold();let C=a.aj(this._tiles,q);for(let k of C){let F=this._tiles[k];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(k)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,s){var d;let f={},v={},b=Math.max(s-Ae.maxOverzooming,this._source.minzoom),T=Math.max(s+Ae.maxUnderzooming,this._source.minzoom),q={};for(let C of r){let k=this._addTile(C);f[C.key]=C,k.hasData()||s<this._source.maxzoom&&(q[C.key]=C)}this._retainLoadedChildren(q,s,T,f);for(let C of r){let k=this._tiles[C.key];if(k.hasData())continue;if(s+1>this._source.maxzoom){let L=C.children(this._source.maxzoom)[0],V=this.getTile(L);if(V&&V.hasData()){f[L.key]=L;continue}}else{let L=C.children(this._source.maxzoom);if(f[L[0].key]&&f[L[1].key]&&f[L[2].key]&&f[L[3].key])continue}let F=k.wasRequested();for(let L=C.overscaledZ-1;L>=b;--L){let V=C.scaledTo(L);if(v[V.key])break;if(v[V.key]=!0,k=this.getTile(V),!k&&F&&(k=this._addTile(V)),k){let $=k.hasData();if(($||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||F)&&(f[V.key]=V),F=k.wasRequested(),$)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let r in this._tiles){let s=[],d,f=this._tiles[r].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}s.push(f.key);let v=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(v),d)break;f=v}for(let v of s)this._loadedParentTiles[v]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let r in this._tiles){let s=this._tiles[r].tileID,d=this._getLoadedTile(s);this._loadedSiblingTiles[s.key]=d}}_addTile(r){let s=this._tiles[r.key];if(s)return s;s=this._cache.getAndRemove(r),s&&(this._setTileReloadTimer(r.key,s),s.tileID=r,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,s)));let d=s;return s||(s=new tt(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(s,r.key,s.state)),s.uses++,this._tiles[r.key]=s,d||this._source.fire(new a.l("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(r,s){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);let d=s.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}refreshTiles(r){for(let s in this._tiles)this._isIdRenderable(s)&&r.some(d=>d.equals(this._tiles[s].tileID.canonical))&&this._reloadTile(s,"expired")}_removeTile(r){let s=this._tiles[r];s&&(s.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}_dataHandler(r){let s=r.sourceDataType;r.dataType==="source"&&s==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&s==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,s,d){let f=[],v=this.transform;if(!v)return f;let b=d?v.getCameraQueryGeometry(r):r,T=r.map($=>v.screenPointToMercatorCoordinate($,this.terrain)),q=b.map($=>v.screenPointToMercatorCoordinate($,this.terrain)),C=this.getIds(),k=1/0,F=1/0,L=-1/0,V=-1/0;for(let $ of q)k=Math.min(k,$.x),F=Math.min(F,$.y),L=Math.max(L,$.x),V=Math.max(V,$.y);for(let $=0;$<C.length;$++){let ie=this._tiles[C[$]];if(ie.holdingForFade())continue;let re=v.getCoveringTilesDetailsProvider().allowWorldCopies()?ie.tileID:ie.tileID.unwrapTo(0),ne=Math.pow(2,v.zoom-ie.tileID.overscaledZ),se=s*ie.queryPadding*a.Z/ie.tileSize/ne,de=[re.getTilePoint(new a.$(k,F)),re.getTilePoint(new a.$(L,V))];if(de[0].x-se<a.Z&&de[0].y-se<a.Z&&de[1].x+se>=0&&de[1].y+se>=0){let he=T.map(_e=>re.getTilePoint(_e)),fe=q.map(_e=>re.getTilePoint(_e));f.push({tile:ie,tileID:re,queryGeometry:he,cameraQueryGeometry:fe,scale:ne})}}return f}getVisibleCoordinates(r){let s=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);return this.transform&&this.transform.populateCache(s),s}hasTransition(){if(this._source.hasTransition())return!0;if(Ee(this._source.type)){let r=M.now();for(let s in this._tiles)if(this._tiles[s].fadeEndTime>=r)return!0}return!1}setFeatureState(r,s,d){this._state.updateState(r=r||"_geojsonTileLayer",s,d)}removeFeatureState(r,s,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",s,d)}getFeatureState(r,s){return this._state.getState(r=r||"_geojsonTileLayer",s)}setDependencies(r,s,d){let f=this._tiles[r];f&&f.setDependencies(s,d)}reloadTilesForDependencies(r,s){for(let d in this._tiles)this._tiles[d].hasDependency(r,s)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,s))}}function Ce(m,r){let s=Math.abs(2*m.wrap)-+(m.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return m.overscaledZ-r.overscaledZ||d-s||r.canonical.y-m.canonical.y||r.canonical.x-m.canonical.x}function Ee(m){return m==="raster"||m==="image"||m==="video"}Ae.maxOverzooming=10,Ae.maxUnderzooming=3;class Ue{constructor(r,s){this.reset(r,s)}reset(r,s){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=a.ae(r,0,1);let s=1,d=this._distances[s],f=r*this.paddedLength+this.padding;for(;d<f&&s<this._distances.length;)d=this._distances[++s];let v=s-1,b=this._distances[v],T=d-b,q=T>0?(f-b)/T:0;return this.points[v].mult(1-q).add(this.points[s].mult(q))}}function et(m,r){let s=!0;return m==="always"||m!=="never"&&r!=="never"||(s=!1),s}class rt{constructor(r,s,d){let f=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(s/d);for(let b=0;b<this.xCellCount*this.yCellCount;b++)f.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=s,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,s,d,f,v){this._forEachCell(s,d,f,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(v)}insertCircle(r,s,d,f){this._forEachCell(s-f,d-f,s+f,d+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(s),this.circles.push(d),this.circles.push(f)}_insertBoxCell(r,s,d,f,v,b){this.boxCells[v].push(b)}_insertCircleCell(r,s,d,f,v,b){this.circleCells[v].push(b)}_query(r,s,d,f,v,b,T){if(d<0||r>this.width||f<0||s>this.height)return[];let q=[];if(r<=0&&s<=0&&this.width<=d&&this.height<=f){if(v)return[{key:null,x1:r,y1:s,x2:d,y2:f}];for(let C=0;C<this.boxKeys.length;C++)q.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(let C=0;C<this.circleKeys.length;C++){let k=this.circles[3*C],F=this.circles[3*C+1],L=this.circles[3*C+2];q.push({key:this.circleKeys[C],x1:k-L,y1:F-L,x2:k+L,y2:F+L})}}else this._forEachCell(r,s,d,f,this._queryCell,q,{hitTest:v,overlapMode:b,seenUids:{box:{},circle:{}}},T);return q}query(r,s,d,f){return this._query(r,s,d,f,!1,null)}hitTest(r,s,d,f,v,b){return this._query(r,s,d,f,!0,v,b).length>0}hitTestCircle(r,s,d,f,v){let b=r-d,T=r+d,q=s-d,C=s+d;if(T<0||b>this.width||C<0||q>this.height)return!1;let k=[];return this._forEachCell(b,q,T,C,this._queryCellCircle,k,{hitTest:!0,overlapMode:f,circle:{x:r,y:s,radius:d},seenUids:{box:{},circle:{}}},v),k.length>0}_queryCell(r,s,d,f,v,b,T,q){let{seenUids:C,hitTest:k,overlapMode:F}=T,L=this.boxCells[v];if(L!==null){let $=this.bboxes;for(let ie of L)if(!C.box[ie]){C.box[ie]=!0;let re=4*ie,ne=this.boxKeys[ie];if(r<=$[re+2]&&s<=$[re+3]&&d>=$[re+0]&&f>=$[re+1]&&(!q||q(ne))&&(!k||!et(F,ne.overlapMode))&&(b.push({key:ne,x1:$[re],y1:$[re+1],x2:$[re+2],y2:$[re+3]}),k))return!0}}let V=this.circleCells[v];if(V!==null){let $=this.circles;for(let ie of V)if(!C.circle[ie]){C.circle[ie]=!0;let re=3*ie,ne=this.circleKeys[ie];if(this._circleAndRectCollide($[re],$[re+1],$[re+2],r,s,d,f)&&(!q||q(ne))&&(!k||!et(F,ne.overlapMode))){let se=$[re],de=$[re+1],he=$[re+2];if(b.push({key:ne,x1:se-he,y1:de-he,x2:se+he,y2:de+he}),k)return!0}}}return!1}_queryCellCircle(r,s,d,f,v,b,T,q){let{circle:C,seenUids:k,overlapMode:F}=T,L=this.boxCells[v];if(L!==null){let $=this.bboxes;for(let ie of L)if(!k.box[ie]){k.box[ie]=!0;let re=4*ie,ne=this.boxKeys[ie];if(this._circleAndRectCollide(C.x,C.y,C.radius,$[re+0],$[re+1],$[re+2],$[re+3])&&(!q||q(ne))&&!et(F,ne.overlapMode))return b.push(!0),!0}}let V=this.circleCells[v];if(V!==null){let $=this.circles;for(let ie of V)if(!k.circle[ie]){k.circle[ie]=!0;let re=3*ie,ne=this.circleKeys[ie];if(this._circlesCollide($[re],$[re+1],$[re+2],C.x,C.y,C.radius)&&(!q||q(ne))&&!et(F,ne.overlapMode))return b.push(!0),!0}}}_forEachCell(r,s,d,f,v,b,T,q){let C=this._convertToXCellCoord(r),k=this._convertToYCellCoord(s),F=this._convertToXCellCoord(d),L=this._convertToYCellCoord(f);for(let V=C;V<=F;V++)for(let $=k;$<=L;$++)if(v.call(this,r,s,d,f,this.xCellCount*$+V,b,T,q))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,s,d,f,v,b){let T=f-r,q=v-s,C=d+b;return C*C>T*T+q*q}_circleAndRectCollide(r,s,d,f,v,b,T){let q=(b-f)/2,C=Math.abs(r-(f+q));if(C>q+d)return!1;let k=(T-v)/2,F=Math.abs(s-(v+k));if(F>k+d)return!1;if(C<=q||F<=k)return!0;let L=C-q,V=F-k;return L*L+V*V<=d*d}}function St(m,r,s){let d=a.K();if(!m){let{vecSouth:F,vecEast:L}=Mt(r),V=x();V[0]=L[0],V[1]=L[1],V[2]=F[0],V[3]=F[1],f=V,(k=(b=(v=V)[0])*(C=v[3])-(q=v[2])*(T=v[1]))&&(f[0]=C*(k=1/k),f[1]=-T*k,f[2]=-q*k,f[3]=b*k),d[0]=V[0],d[1]=V[1],d[4]=V[2],d[5]=V[3]}var f,v,b,T,q,C,k;return a.M(d,d,[1/s,1/s,1]),d}function jt(m,r,s,d){if(m){let f=a.K();if(!r){let{vecSouth:v,vecEast:b}=Mt(s);f[0]=b[0],f[1]=b[1],f[4]=v[0],f[5]=v[1]}return a.M(f,f,[d,d,1]),f}return s.pixelsToClipSpaceMatrix}function Mt(m){let r=Math.cos(m.rollInRadians),s=Math.sin(m.rollInRadians),d=Math.cos(m.pitchInRadians),f=Math.cos(m.bearingInRadians),v=Math.sin(m.bearingInRadians),b=a.ao();b[0]=-f*d*s-v*r,b[1]=-v*d*s+f*r;let T=a.ap(b);T<1e-9?a.aq(b):a.ar(b,b,1/T);let q=a.ao();q[0]=f*d*r-v*s,q[1]=v*d*r+f*s;let C=a.ap(q);return C<1e-9?a.aq(q):a.ar(q,q,1/C),{vecEast:q,vecSouth:b}}function Le(m,r,s,d){let f;d?(f=[m,r,d(m,r),1],a.at(f,f,s)):(f=[m,r,0,1],gl(f,f,s));let v=f[3];return{point:new a.P(f[0]/v,f[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function mr(m,r){return .5+m/r*.5}function rr(m,r){return m.x>=-r[0]&&m.x<=r[0]&&m.y>=-r[1]&&m.y<=r[1]}function cr(m,r,s,d,f,v,b,T,q,C,k,F,L){let V=s?m.textSizeData:m.iconSizeData,$=a.ak(V,r.transform.zoom),ie=[256/r.width*2+1,256/r.height*2+1],re=s?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;re.clear();let ne=m.lineVertexArray,se=s?m.text.placedSymbolArray:m.icon.placedSymbolArray,de=r.transform.width/r.transform.height,he=!1;for(let fe=0;fe<se.length;fe++){let _e=se.get(fe);if(_e.hidden||_e.writingMode===a.al.vertical&&!he){Go(_e.numGlyphs,re);continue}he=!1;let pe=new a.P(_e.anchorX,_e.anchorY),qe={getElevation:L,pitchedLabelPlaneMatrix:d,lineVertexArray:ne,pitchWithMap:v,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:pe,unwrappedTileID:q,width:C,height:k,translation:F},ze=Vt(_e.anchorX,_e.anchorY,qe);if(!rr(ze.point,ie)){Go(_e.numGlyphs,re);continue}let Oe=mr(r.transform.cameraToCenterDistance,ze.signedDistanceFromCamera),ke=a.am(V,$,_e),De=v?ke*r.transform.getPitchedTextCorrection(_e.anchorX,_e.anchorY,q)/Oe:ke*Oe,Qe=qt({projectionContext:qe,pitchedLabelPlaneMatrixInverse:f,symbol:_e,fontSize:De,flip:!1,keepUpright:b,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:re,aspectRatio:de,rotateToLine:T});he=Qe.useVertical,(Qe.notEnoughRoom||he||Qe.needsFlipping&&qt({projectionContext:qe,pitchedLabelPlaneMatrixInverse:f,symbol:_e,fontSize:De,flip:!0,keepUpright:b,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:re,aspectRatio:de,rotateToLine:T}).notEnoughRoom)&&Go(_e.numGlyphs,re)}s?m.text.dynamicLayoutVertexBuffer.updateData(re):m.icon.dynamicLayoutVertexBuffer.updateData(re)}function Ct(m,r,s,d,f,v,b,T){let q=v.glyphStartIndex+v.numGlyphs,C=v.lineStartIndex,k=v.lineStartIndex+v.lineLength,F=r.getoffsetX(v.glyphStartIndex),L=r.getoffsetX(q-1),V=vl(m*F,s,d,f,v.segment,C,k,T,b);if(!V)return null;let $=vl(m*L,s,d,f,v.segment,C,k,T,b);return $?T.projectionCache.anyProjectionOccluded?null:{first:V,last:$}:null}function je(m,r,s,d){return m===a.al.horizontal&&Math.abs(s.y-r.y)>Math.abs(s.x-r.x)*d?{useVertical:!0}:(m===a.al.vertical?r.y<s.y:r.x>s.x)?{needsFlipping:!0}:null}function qt(m){let{projectionContext:r,pitchedLabelPlaneMatrixInverse:s,symbol:d,fontSize:f,flip:v,keepUpright:b,glyphOffsetArray:T,dynamicLayoutVertexArray:q,aspectRatio:C,rotateToLine:k}=m,F=f/24,L=d.lineOffsetX*F,V=d.lineOffsetY*F,$;if(d.numGlyphs>1){let ie=d.glyphStartIndex+d.numGlyphs,re=d.lineStartIndex,ne=d.lineStartIndex+d.lineLength,se=Ct(F,T,L,V,v,d,k,r);if(!se)return{notEnoughRoom:!0};let de=Vn(se.first.point.x,se.first.point.y,r,s),he=Vn(se.last.point.x,se.last.point.y,r,s);if(b&&!v){let fe=je(d.writingMode,de,he,C);if(fe)return fe}$=[se.first];for(let fe=d.glyphStartIndex+1;fe<ie-1;fe++)$.push(vl(F*T.getoffsetX(fe),L,V,v,d.segment,re,ne,r,k));$.push(se.last)}else{if(b&&!v){let re=Xr(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,ne=d.lineStartIndex+d.segment+1,se=new a.P(r.lineVertexArray.getx(ne),r.lineVertexArray.gety(ne)),de=Xr(se.x,se.y,r),he=de.signedDistanceFromCamera>0?de.point:Ut(r.tileAnchorPoint,se,re,1,r),fe=Vn(re.x,re.y,r,s),_e=Vn(he.x,he.y,r,s),pe=je(d.writingMode,fe,_e,C);if(pe)return pe}let ie=vl(F*T.getoffsetX(d.glyphStartIndex),L,V,v,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,r,k);if(!ie||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};$=[ie]}for(let ie of $)a.as(q,ie.point,ie.angle);return{}}function Ut(m,r,s,d,f){let v=m.add(m.sub(r)._unit()),b=Xr(v.x,v.y,f).point,T=s.sub(b);return s.add(T._mult(d/T.mag()))}function Hr(m,r,s){let d=r.projectionCache;if(d.projections[m])return d.projections[m];let f=new a.P(r.lineVertexArray.getx(m),r.lineVertexArray.gety(m)),v=Xr(f.x,f.y,r);if(v.signedDistanceFromCamera>0)return d.projections[m]=v.point,d.anyProjectionOccluded=d.anyProjectionOccluded||v.isOccluded,v.point;let b=m-s.direction;return Ut(s.distanceFromAnchor===0?r.tileAnchorPoint:new a.P(r.lineVertexArray.getx(b),r.lineVertexArray.gety(b)),f,s.previousVertex,s.absOffsetX-s.distanceFromAnchor+1,r)}function Xr(m,r,s){let d=m+s.translation[0],f=r+s.translation[1],v;return s.pitchWithMap?(v=Le(d,f,s.pitchedLabelPlaneMatrix,s.getElevation),v.isOccluded=!1):(v=s.transform.projectTileCoordinates(d,f,s.unwrappedTileID,s.getElevation),v.point.x=(.5*v.point.x+.5)*s.width,v.point.y=(.5*-v.point.y+.5)*s.height),v}function Vn(m,r,s,d){if(s.pitchWithMap){let f=[m,r,0,1];return a.at(f,f,d),s.transform.projectTileCoordinates(f[0]/f[3],f[1]/f[3],s.unwrappedTileID,s.getElevation).point}return{x:m/s.width*2-1,y:r/s.height*2-1}}function Vt(m,r,s){return s.transform.projectTileCoordinates(m,r,s.unwrappedTileID,s.getElevation)}function cu(m,r,s){return m._unit()._perp()._mult(r*s)}function Gc(m,r,s,d,f,v,b,T,q){if(T.projectionCache.offsets[m])return T.projectionCache.offsets[m];let C=s.add(r);if(m+q.direction<d||m+q.direction>=f)return T.projectionCache.offsets[m]=C,C;let k=Hr(m+q.direction,T,q),F=cu(k.sub(s),b,q.direction),L=s.add(F),V=k.add(F);return T.projectionCache.offsets[m]=a.au(v,C,L,V)||C,T.projectionCache.offsets[m]}function vl(m,r,s,d,f,v,b,T,q){let C=d?m-r:m+r,k=C>0?1:-1,F=0;d&&(k*=-1,F=Math.PI),k<0&&(F+=Math.PI);let L,V=k>0?v+f:v+f+1;T.projectionCache.cachedAnchorPoint?L=T.projectionCache.cachedAnchorPoint:(L=Xr(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=L);let $,ie,re=L,ne=L,se=0,de=0,he=Math.abs(C),fe=[],_e;for(;se+de<=he;){if(V+=k,V<v||V>=b)return null;se+=de,ne=re,ie=$;let ze={absOffsetX:he,direction:k,distanceFromAnchor:se,previousVertex:ne};if(re=Hr(V,T,ze),s===0)fe.push(ne),_e=re.sub(ne);else{let Oe,ke=re.sub(ne);Oe=ke.mag()===0?cu(Hr(V+k,T,ze).sub(re),s,k):cu(ke,s,k),ie||(ie=ne.add(Oe)),$=Gc(V,Oe,re,v,b,ie,s,T,ze),fe.push(ie),_e=$.sub(ie)}de=_e.mag()}let pe=_e._mult((he-se)/de)._add(ie||ne),qe=F+Math.atan2(re.y-ne.y,re.x-ne.x);return fe.push(pe),{point:pe,angle:q?qe:0,path:fe}}let Zc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Go(m,r){for(let s=0;s<m;s++){let d=r.length;r.resize(d+4),r.float32.set(Zc,3*d)}}function gl(m,r,s){let d=r[0],f=r[1];return m[0]=s[0]*d+s[4]*f+s[12],m[1]=s[1]*d+s[5]*f+s[13],m[3]=s[3]*d+s[7]*f+s[15],m}let ci=100;class aa{constructor(r,s=new rt(r.width+200,r.height+200,25),d=new rt(r.width+200,r.height+200,25)){this.transform=r,this.grid=s,this.ignoredGrid=d,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+ci,this.screenBottomBoundary=r.height+ci,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,s,d,f,v,b,T,q,C,k,F,L){let V=this.projectAndGetPerspectiveRatio(r.anchorPointX+q[0],r.anchorPointY+q[1],v,k,L),$=d*V.perspectiveRatio,ie;if(b||T)ie=this._projectCollisionBox(r,$,f,v,b,T,q,V,k,F,L);else{let _e=V.x+(F?F.x*$:0),pe=V.y+(F?F.y*$:0);ie={allPointsOccluded:!1,box:[_e+r.x1*$,pe+r.y1*$,_e+r.x2*$,pe+r.y2*$]}}let[re,ne,se,de]=ie.box,he=b?ie.allPointsOccluded:V.isOccluded,fe=he;return fe||(fe=V.perspectiveRatio<this.perspectiveRatioCutoff),fe||(fe=!this.isInsideGrid(re,ne,se,de)),fe||s!=="always"&&this.grid.hitTest(re,ne,se,de,s,C)?{box:[re,ne,se,de],placeable:!1,offscreen:!1,occluded:he}:{box:[re,ne,se,de],placeable:!0,offscreen:this.isOffscreen(re,ne,se,de),occluded:he}}placeCollisionCircles(r,s,d,f,v,b,T,q,C,k,F,L,V,$){let ie=[],re=new a.P(s.anchorX,s.anchorY),ne=this.getPerspectiveRatio(re.x,re.y,b,$),se=(C?v*this.transform.getPitchedTextCorrection(s.anchorX,s.anchorY,b)/ne:v*ne)/a.ay,de={getElevation:$,pitchedLabelPlaneMatrix:T,lineVertexArray:d,pitchWithMap:C,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:re,unwrappedTileID:b,width:this.transform.width,height:this.transform.height,translation:V},he=Ct(se,f,s.lineOffsetX*se,s.lineOffsetY*se,!1,s,!1,de),fe=!1,_e=!1,pe=!0;if(he){let qe=.5*F*ne+L,ze=new a.P(-100,-100),Oe=new a.P(this.screenRightBoundary,this.screenBottomBoundary),ke=new Ue,De=he.first,Qe=he.last,Ye=[];for(let Wt=De.path.length-1;Wt>=1;Wt--)Ye.push(De.path[Wt]);for(let Wt=1;Wt<Qe.path.length;Wt++)Ye.push(Qe.path[Wt]);let Ge=2.5*qe;if(C){let Wt=this.projectPathToScreenSpace(Ye,de);Ye=Wt.some(ar=>ar.signedDistanceFromCamera<=0)?[]:Wt.map(ar=>ar.point)}let ft=[];if(Ye.length>0){let Wt=Ye[0].clone(),ar=Ye[0].clone();for(let Br=1;Br<Ye.length;Br++)Wt.x=Math.min(Wt.x,Ye[Br].x),Wt.y=Math.min(Wt.y,Ye[Br].y),ar.x=Math.max(ar.x,Ye[Br].x),ar.y=Math.max(ar.y,Ye[Br].y);ft=Wt.x>=ze.x&&ar.x<=Oe.x&&Wt.y>=ze.y&&ar.y<=Oe.y?[Ye]:ar.x<ze.x||Wt.x>Oe.x||ar.y<ze.y||Wt.y>Oe.y?[]:a.av([Ye],ze.x,ze.y,Oe.x,Oe.y)}for(let Wt of ft){ke.reset(Wt,.25*qe);let ar=0;ar=ke.length<=.5*qe?1:Math.ceil(ke.paddedLength/Ge)+1;for(let Br=0;Br<ar;Br++){let Sr=Br/Math.max(ar-1,1),jr=ke.lerp(Sr),Ur=jr.x+ci,Er=jr.y+ci;ie.push(Ur,Er,qe,0);let hr=Ur-qe,Ai=Er-qe,Li=Ur+qe,Ki=Er+qe;if(pe=pe&&this.isOffscreen(hr,Ai,Li,Ki),_e=_e||this.isInsideGrid(hr,Ai,Li,Ki),r!=="always"&&this.grid.hitTestCircle(Ur,Er,qe,r,k)&&(fe=!0,!q))return{circles:[],offscreen:!1,collisionDetected:fe}}}}return{circles:!q&&fe||!_e||ne<this.perspectiveRatioCutoff?[]:ie,offscreen:pe,collisionDetected:fe}}projectPathToScreenSpace(r,s){let d=function(f,v){let b=a.K();return a.an(b,v.pitchedLabelPlaneMatrix),f.map(T=>{let q=Le(T.x,T.y,b,v.getElevation),C=v.transform.projectTileCoordinates(q.point.x,q.point.y,v.unwrappedTileID,v.getElevation);return C.point.x=(.5*C.point.x+.5)*v.width,C.point.y=(.5*-C.point.y+.5)*v.height,C})}(r,s);return function(f){let v=0,b=0,T=0,q=0;for(let C=0;C<f.length;C++)f[C].isOccluded?(T=C+1,q=0):(q++,q>b&&(b=q,v=T));return f.slice(v,v+b)}(d)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let s=[],d=1/0,f=1/0,v=-1/0,b=-1/0;for(let k of r){let F=new a.P(k.x+ci,k.y+ci);d=Math.min(d,F.x),f=Math.min(f,F.y),v=Math.max(v,F.x),b=Math.max(b,F.y),s.push(F)}let T=this.grid.query(d,f,v,b).concat(this.ignoredGrid.query(d,f,v,b)),q={},C={};for(let k of T){let F=k.key;if(q[F.bucketInstanceId]===void 0&&(q[F.bucketInstanceId]={}),q[F.bucketInstanceId][F.featureIndex])continue;let L=[new a.P(k.x1,k.y1),new a.P(k.x2,k.y1),new a.P(k.x2,k.y2),new a.P(k.x1,k.y2)];a.aw(s,L)&&(q[F.bucketInstanceId][F.featureIndex]=!0,C[F.bucketInstanceId]===void 0&&(C[F.bucketInstanceId]=[]),C[F.bucketInstanceId].push(F.featureIndex))}return C}insertCollisionBox(r,s,d,f,v,b){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:v,collisionGroupID:b,overlapMode:s},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,s,d,f,v,b){let T=d?this.ignoredGrid:this.grid,q={bucketInstanceId:f,featureIndex:v,collisionGroupID:b,overlapMode:s};for(let C=0;C<r.length;C+=4)T.insertCircle(q,r[C],r[C+1],r[C+2])}projectAndGetPerspectiveRatio(r,s,d,f,v){if(v){let b;f?(b=[r,s,f(r,s),1],a.at(b,b,v)):(b=[r,s,0,1],gl(b,b,v));let T=b[3];return{x:(b[0]/T+1)/2*this.transform.width+ci,y:(-b[1]/T+1)/2*this.transform.height+ci,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T*.5,isOccluded:!1,signedDistanceFromCamera:T}}{let b=this.transform.projectTileCoordinates(r,s,d,f);return{x:(b.point.x+1)/2*this.transform.width+ci,y:(1-b.point.y)/2*this.transform.height+ci,perspectiveRatio:.5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5,isOccluded:b.isOccluded,signedDistanceFromCamera:b.signedDistanceFromCamera}}}getPerspectiveRatio(r,s,d,f){let v=this.transform.projectTileCoordinates(r,s,d,f);return .5+this.transform.cameraToCenterDistance/v.signedDistanceFromCamera*.5}isOffscreen(r,s,d,f){return d<ci||r>=this.screenRightBoundary||f<ci||s>this.screenBottomBoundary}isInsideGrid(r,s,d,f){return d>=0&&r<this.gridRightBoundary&&f>=0&&s<this.gridBottomBoundary}getViewportMatrix(){let r=a.ad([]);return a.L(r,r,[-100,-100,0]),r}_projectCollisionBox(r,s,d,f,v,b,T,q,C,k,F){let L=1,V=0,$=0,ie=1,re=r.anchorPointX+T[0],ne=r.anchorPointY+T[1];if(b&&!v){let Ye=this.projectAndGetPerspectiveRatio(re+1,ne,f,C,F),Ge=Ye.x-q.x,ft=Math.atan((Ye.y-q.y)/Ge)+(Ge<0?Math.PI:0),Wt=Math.sin(ft),ar=Math.cos(ft);L=ar,V=Wt,$=-Wt,ie=ar}else if(!b&&v){let Ye=Mt(this.transform);L=Ye.vecEast[0],V=Ye.vecEast[1],$=Ye.vecSouth[0],ie=Ye.vecSouth[1]}let se=q.x,de=q.y,he=s;v&&(se=re,de=ne,he=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),he*=this.transform.getPitchedTextCorrection(re,ne,f),k||(he*=a.ae(.5+q.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),k&&(se+=L*k.x*he+$*k.y*he,de+=V*k.x*he+ie*k.y*he);let fe=r.x1*he,_e=r.x2*he,pe=(fe+_e)/2,qe=r.y1*he,ze=r.y2*he,Oe=(qe+ze)/2,ke=[{offsetX:fe,offsetY:qe},{offsetX:pe,offsetY:qe},{offsetX:_e,offsetY:qe},{offsetX:_e,offsetY:Oe},{offsetX:_e,offsetY:ze},{offsetX:pe,offsetY:ze},{offsetX:fe,offsetY:ze},{offsetX:fe,offsetY:Oe}],De=[];for(let{offsetX:Ye,offsetY:Ge}of ke)De.push(new a.P(se+L*Ye+$*Ge,de+V*Ye+ie*Ge));let Qe=!1;if(v){let Ye=De.map(Ge=>this.projectAndGetPerspectiveRatio(Ge.x,Ge.y,f,C,F));Qe=Ye.some(Ge=>!Ge.isOccluded),De=Ye.map(Ge=>new a.P(Ge.x,Ge.y))}else Qe=!0;return{box:a.ax(De),allPointsOccluded:!Qe}}}class Lr{constructor(r,s,d,f){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?s:-s))):f&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Kc{constructor(r,s,d,f,v){this.text=new Lr(r?r.text:null,s,d,v),this.icon=new Lr(r?r.icon:null,s,f,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class hu{constructor(r,s,d){this.text=r,this.icon=s,this.skipFade=d}}class Vm{constructor(r,s,d,f,v){this.bucketInstanceId=r,this.featureIndex=s,this.sourceLayerIndex=d,this.bucketIndex=f,this.tileID=v}}class yl{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){let s=++this.maxGroupID;this.collisionGroups[r]={ID:s,predicate:d=>d.collisionGroupID===s}}return this.collisionGroups[r]}}function Zo(m,r,s,d,f){let{horizontalAlign:v,verticalAlign:b}=a.aE(m);return new a.P(-(v-.5)*r+d[0]*f,-(b-.5)*s+d[1]*f)}class z0{constructor(r,s,d,f,v){this.transform=r.clone(),this.terrain=s,this.collisionIndex=new aa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new yl(f),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){let s=this.terrain;return s?(d,f)=>s.getElevation(r,d,f):null}getBucketParts(r,s,d,f){let v=d.getBucket(s),b=d.latestFeatureIndex;if(!v||!b||s.id!==v.layerIds[0])return;let T=d.collisionBoxArray,q=v.layers[0].layout,C=v.layers[0].paint,k=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),F=d.tileSize/a.Z,L=d.tileID.toUnwrapped(),V=q.get("text-rotation-alignment")==="map",$=a.az(d,1,this.transform.zoom),ie=a.aA(this.collisionIndex.transform,d,C.get("text-translate"),C.get("text-translate-anchor")),re=a.aA(this.collisionIndex.transform,d,C.get("icon-translate"),C.get("icon-translate-anchor")),ne=St(V,this.transform,$);this.retainedQueryData[v.bucketInstanceId]=new Vm(v.bucketInstanceId,b,v.sourceLayerIndex,v.index,d.tileID);let se={bucket:v,layout:q,translationText:ie,translationIcon:re,unwrappedTileID:L,pitchedLabelPlaneMatrix:ne,scale:k,textPixelRatio:F,holdingForFade:d.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:a.ak(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(f)for(let de of v.sortKeyRanges){let{sortKey:he,symbolInstanceStart:fe,symbolInstanceEnd:_e}=de;r.push({sortKey:he,symbolInstanceStart:fe,symbolInstanceEnd:_e,parameters:se})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:se})}attemptAnchorPlacement(r,s,d,f,v,b,T,q,C,k,F,L,V,$,ie,re,ne,se,de,he){let fe=a.aB[r.textAnchor],_e=[r.textOffset0,r.textOffset1],pe=Zo(fe,d,f,_e,v),qe=this.collisionIndex.placeCollisionBox(s,L,q,C,k,T,b,re,F.predicate,de,pe,he);if((!se||this.collisionIndex.placeCollisionBox(se,L,q,C,k,T,b,ne,F.predicate,de,pe,he).placeable)&&qe.placeable){let ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID].text&&(ze=this.prevPlacement.variableOffsets[V.crossTileID].anchor),V.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[V.crossTileID]={textOffset:_e,width:d,height:f,anchor:fe,textBoxScale:v,prevAnchor:ze},this.markUsedJustification($,fe,V,ie),$.allowVerticalPlacement&&(this.markUsedOrientation($,ie,V),this.placedOrientations[V.crossTileID]=ie),{shift:pe,placedGlyphBoxes:qe}}}placeLayerBucketPart(r,s,d){let{bucket:f,layout:v,translationText:b,translationIcon:T,unwrappedTileID:q,pitchedLabelPlaneMatrix:C,textPixelRatio:k,holdingForFade:F,collisionBoxArray:L,partiallyEvaluatedTextSize:V,collisionGroup:$}=r.parameters,ie=v.get("text-optional"),re=v.get("icon-optional"),ne=a.aC(v,"text-overlap","text-allow-overlap"),se=ne==="always",de=a.aC(v,"icon-overlap","icon-allow-overlap"),he=de==="always",fe=v.get("text-rotation-alignment")==="map",_e=v.get("text-pitch-alignment")==="map",pe=v.get("icon-text-fit")!=="none",qe=v.get("symbol-z-order")==="viewport-y",ze=se&&(he||!f.hasIconData()||re),Oe=he&&(se||!f.hasTextData()||ie);!f.collisionArrays&&L&&f.deserializeCollisionBoxes(L);let ke=this.retainedQueryData[f.bucketInstanceId].tileID,De=this._getTerrainElevationFunc(ke),Qe=this.transform.getFastPathSimpleProjectionMatrix(ke),Ye=(Ge,ft,Wt)=>{var ar,Br;if(s[Ge.crossTileID])return;if(F)return void(this.placements[Ge.crossTileID]=new hu(!1,!1,!1));let Sr=!1,jr=!1,Ur=!0,Er=null,hr={box:null,placeable:!1,offscreen:null,occluded:!1},Ai={placeable:!1},Li=null,Ki=null,dr=null,Cs=0,xo=0,Ms=0;ft.textFeatureIndex?Cs=ft.textFeatureIndex:Ge.useRuntimeCollisionCircles&&(Cs=Ge.featureIndex),ft.verticalTextFeatureIndex&&(xo=ft.verticalTextFeatureIndex);let Rl=ft.textBox;if(Rl){let la=mi=>{let vi=a.al.horizontal;if(f.allowVerticalPlacement&&!mi&&this.prevPlacement){let En=this.prevPlacement.placedOrientations[Ge.crossTileID];En&&(this.placedOrientations[Ge.crossTileID]=En,vi=En,this.markUsedOrientation(f,vi,Ge))}return vi},Os=(mi,vi)=>{if(f.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&ft.verticalTextBox){for(let En of f.writingModes)if(En===a.al.vertical?(hr=vi(),Ai=hr):hr=mi(),hr&&hr.placeable)break}else hr=mi()},Xo=Ge.textAnchorOffsetStartIndex,ks=Ge.textAnchorOffsetEndIndex;if(ks===Xo){let mi=(vi,En)=>{let Mr=this.collisionIndex.placeCollisionBox(vi,ne,k,ke,q,_e,fe,b,$.predicate,De,void 0,Qe);return Mr&&Mr.placeable&&(this.markUsedOrientation(f,En,Ge),this.placedOrientations[Ge.crossTileID]=En),Mr};Os(()=>mi(Rl,a.al.horizontal),()=>{let vi=ft.verticalTextBox;return f.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&vi?mi(vi,a.al.vertical):{box:null,offscreen:null}}),la(hr&&hr.placeable)}else{let mi=a.aB[(Br=(ar=this.prevPlacement)===null||ar===void 0?void 0:ar.variableOffsets[Ge.crossTileID])===null||Br===void 0?void 0:Br.anchor],vi=(Mr,bf,Px)=>{let Cx=Mr.x2-Mr.x1,tq=Mr.y2-Mr.y1,Ov=Ge.textBoxScale,Ah=pe&&de==="never"?bf:null,Ia=null,bo=ne==="never"?1:2,Pa="never";mi&&bo++;for(let Jo=0;Jo<bo;Jo++){for(let wf=Xo;wf<ks;wf++){let Ds=f.textAnchorOffsets.get(wf);if(mi&&Ds.textAnchor!==mi)continue;let kv=this.attemptAnchorPlacement(Ds,Mr,Cx,tq,Ov,fe,_e,k,ke,q,$,Pa,Ge,f,Px,b,T,Ah,De);if(kv&&(Ia=kv.placedGlyphBoxes,Ia&&Ia.placeable))return Sr=!0,Er=kv.shift,Ia}mi?mi=null:Pa=ne}return d&&!Ia&&(Ia={box:this.collisionIndex.placeCollisionBox(Rl,"always",k,ke,q,_e,fe,b,$.predicate,De,void 0,Qe).box,offscreen:!1,placeable:!1,occluded:!1}),Ia};Os(()=>vi(Rl,ft.iconBox,a.al.horizontal),()=>{let Mr=ft.verticalTextBox;return f.allowVerticalPlacement&&(!hr||!hr.placeable)&&Ge.numVerticalGlyphVertices>0&&Mr?vi(Mr,ft.verticalIconBox,a.al.vertical):{box:null,occluded:!0,offscreen:null}}),hr&&(Sr=hr.placeable,Ur=hr.offscreen);let En=la(hr&&hr.placeable);if(!Sr&&this.prevPlacement){let Mr=this.prevPlacement.variableOffsets[Ge.crossTileID];Mr&&(this.variableOffsets[Ge.crossTileID]=Mr,this.markUsedJustification(f,Mr.anchor,Ge,En))}}}if(Li=hr,Sr=Li&&Li.placeable,Ur=Li&&Li.offscreen,Ge.useRuntimeCollisionCircles){let la=f.text.placedSymbolArray.get(Ge.centerJustifiedTextSymbolIndex),Os=a.am(f.textSizeData,V,la),Xo=v.get("text-padding");Ki=this.collisionIndex.placeCollisionCircles(ne,la,f.lineVertexArray,f.glyphOffsetArray,Os,q,C,d,_e,$.predicate,Ge.collisionCircleDiameter,Xo,b,De),Ki.circles.length&&Ki.collisionDetected&&!d&&a.w("Collisions detected, but collision boxes are not shown"),Sr=se||Ki.circles.length>0&&!Ki.collisionDetected,Ur=Ur&&Ki.offscreen}if(ft.iconFeatureIndex&&(Ms=ft.iconFeatureIndex),ft.iconBox){let la=Os=>this.collisionIndex.placeCollisionBox(Os,de,k,ke,q,_e,fe,T,$.predicate,De,pe&&Er?Er:void 0,Qe);Ai&&Ai.placeable&&ft.verticalIconBox?(dr=la(ft.verticalIconBox),jr=dr.placeable):(dr=la(ft.iconBox),jr=dr.placeable),Ur=Ur&&dr.offscreen}let Eh=ie||Ge.numHorizontalGlyphVertices===0&&Ge.numVerticalGlyphVertices===0,Rs=re||Ge.numIconVertices===0;Eh||Rs?Rs?Eh||(jr=jr&&Sr):Sr=jr&&Sr:jr=Sr=jr&&Sr;let Ol=jr&&dr.placeable;if(Sr&&Li.placeable&&this.collisionIndex.insertCollisionBox(Li.box,ne,v.get("text-ignore-placement"),f.bucketInstanceId,Ai&&Ai.placeable&&xo?xo:Cs,$.ID),Ol&&this.collisionIndex.insertCollisionBox(dr.box,de,v.get("icon-ignore-placement"),f.bucketInstanceId,Ms,$.ID),Ki&&Sr&&this.collisionIndex.insertCollisionCircles(Ki.circles,ne,v.get("text-ignore-placement"),f.bucketInstanceId,Cs,$.ID),d&&this.storeCollisionData(f.bucketInstanceId,Wt,ft,Li,dr,Ki),Ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ge.crossTileID]=new hu((Sr||ze)&&!(Li!=null&&Li.occluded),(jr||Oe)&&!(dr!=null&&dr.occluded),Ur||f.justReloaded),s[Ge.crossTileID]=!0};if(qe){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Ge=f.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ft=Ge.length-1;ft>=0;--ft){let Wt=Ge[ft];Ye(f.symbolInstances.get(Wt),f.collisionArrays[Wt],Wt)}}else for(let Ge=r.symbolInstanceStart;Ge<r.symbolInstanceEnd;Ge++)Ye(f.symbolInstances.get(Ge),f.collisionArrays[Ge],Ge);f.justReloaded=!1}storeCollisionData(r,s,d,f,v,b){if(d.textBox||d.iconBox){let T,q;this.collisionBoxArrays.has(r)?T=this.collisionBoxArrays.get(r):(T=new Map,this.collisionBoxArrays.set(r,T)),T.has(s)?q=T.get(s):(q={text:null,icon:null},T.set(s,q)),d.textBox&&(q.text=f.box),d.iconBox&&(q.icon=v.box)}if(b){let T=this.collisionCircleArrays[r];T===void 0&&(T=this.collisionCircleArrays[r]=[]);for(let q=0;q<b.circles.length;q+=4)T.push(b.circles[q+0]-ci),T.push(b.circles[q+1]-ci),T.push(b.circles[q+2]),T.push(b.collisionDetected?1:0)}}markUsedJustification(r,s,d,f){let v;v=f===a.al.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[a.aD(s)];let b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(let T of b)T>=0&&(r.text.placedSymbolArray.get(T).crossTileID=v>=0&&T!==v?0:d.crossTileID)}markUsedOrientation(r,s,d){let f=s===a.al.horizontal||s===a.al.horizontalOnly?s:0,v=s===a.al.vertical?s:0,b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(let T of b)r.text.placedSymbolArray.get(T).placedOrientation=f;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;let s=this.prevPlacement,d=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;let f=s?s.symbolFadeChange(r):1,v=s?s.opacities:{},b=s?s.variableOffsets:{},T=s?s.placedOrientations:{};for(let q in this.placements){let C=this.placements[q],k=v[q];k?(this.opacities[q]=new Kc(k,f,C.text,C.icon),d=d||C.text!==k.text.placed||C.icon!==k.icon.placed):(this.opacities[q]=new Kc(null,f,C.text,C.icon,C.skipFade),d=d||C.text||C.icon)}for(let q in v){let C=v[q];if(!this.opacities[q]){let k=new Kc(C,f,!1,!1);k.isHidden()||(this.opacities[q]=k,d=d||C.text.placed||C.icon.placed)}}for(let q in b)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=b[q]);for(let q in T)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=T[q]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:r)}updateLayerOpacities(r,s){let d={};for(let f of s){let v=f.getBucket(r);v&&f.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,f.tileID,d,f.collisionBoxArray)}}updateBucketOpacities(r,s,d,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();let v=r.layers[0],b=v.layout,T=new Kc(null,0,!1,!1,!0),q=b.get("text-allow-overlap"),C=b.get("icon-allow-overlap"),k=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=b.get("text-rotation-alignment")==="map",L=b.get("text-pitch-alignment")==="map",V=b.get("icon-text-fit")!=="none",$=new Kc(null,0,q&&(C||!r.hasIconData()||b.get("icon-optional")),C&&(q||!r.hasTextData()||b.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);let ie=(ne,se,de)=>{for(let he=0;he<se/4;he++)ne.opacityVertexArray.emplaceBack(de);ne.hasVisibleVertices=ne.hasVisibleVertices||de!==_l},re=this.collisionBoxArrays.get(r.bucketInstanceId);for(let ne=0;ne<r.symbolInstances.length;ne++){let se=r.symbolInstances.get(ne),{numHorizontalGlyphVertices:de,numVerticalGlyphVertices:he,crossTileID:fe}=se,_e=this.opacities[fe];d[fe]?_e=T:_e||(_e=$,this.opacities[fe]=_e),d[fe]=!0;let pe=se.numIconVertices>0,qe=this.placedOrientations[se.crossTileID],ze=qe===a.al.vertical,Oe=qe===a.al.horizontal||qe===a.al.horizontalOnly;if(de>0||he>0){let De=Wm(_e.text);ie(r.text,de,ze?_l:De),ie(r.text,he,Oe?_l:De);let Qe=_e.text.isHidden();[se.rightJustifiedTextSymbolIndex,se.centerJustifiedTextSymbolIndex,se.leftJustifiedTextSymbolIndex].forEach(ft=>{ft>=0&&(r.text.placedSymbolArray.get(ft).hidden=Qe||ze?1:0)}),se.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(se.verticalPlacedTextSymbolIndex).hidden=Qe||Oe?1:0);let Ye=this.variableOffsets[se.crossTileID];Ye&&this.markUsedJustification(r,Ye.anchor,se,qe);let Ge=this.placedOrientations[se.crossTileID];Ge&&(this.markUsedJustification(r,"left",se,Ge),this.markUsedOrientation(r,Ge,se))}if(pe){let De=Wm(_e.icon),Qe=!(V&&se.verticalPlacedIconSymbolIndex&&ze);se.placedIconSymbolIndex>=0&&(ie(r.icon,se.numIconVertices,Qe?De:_l),r.icon.placedSymbolArray.get(se.placedIconSymbolIndex).hidden=_e.icon.isHidden()),se.verticalPlacedIconSymbolIndex>=0&&(ie(r.icon,se.numVerticalIconVertices,Qe?_l:De),r.icon.placedSymbolArray.get(se.verticalPlacedIconSymbolIndex).hidden=_e.icon.isHidden())}let ke=re&&re.has(ne)?re.get(ne):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){let De=r.collisionArrays[ne];if(De){let Qe=new a.P(0,0);if(De.textBox||De.verticalTextBox){let Ye=!0;if(k){let Ge=this.variableOffsets[fe];Ge?(Qe=Zo(Ge.anchor,Ge.width,Ge.height,Ge.textOffset,Ge.textBoxScale),F&&Qe._rotate(L?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ye=!1}if(De.textBox||De.verticalTextBox){let Ge;De.textBox&&(Ge=ze),De.verticalTextBox&&(Ge=Oe),$m(r.textCollisionBox.collisionVertexArray,_e.text.placed,!Ye||Ge,ke.text,Qe.x,Qe.y)}}if(De.iconBox||De.verticalIconBox){let Ye=!!(!Oe&&De.verticalIconBox),Ge;De.iconBox&&(Ge=Ye),De.verticalIconBox&&(Ge=!Ye),$m(r.iconCollisionBox.collisionVertexArray,_e.icon.placed,Ge,ke.icon,V?Qe.x:0,V?Qe.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,s){let d=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function $m(m,r,s,d,f,v){d&&d.length!==0||(d=[0,0,0,0]);let b=d[0]-ci,T=d[1]-ci,q=d[2]-ci,C=d[3]-ci;m.emplaceBack(r?1:0,s?1:0,f||0,v||0,b,T),m.emplaceBack(r?1:0,s?1:0,f||0,v||0,q,T),m.emplaceBack(r?1:0,s?1:0,f||0,v||0,q,C),m.emplaceBack(r?1:0,s?1:0,f||0,v||0,b,C)}let N0=Math.pow(2,25),du=Math.pow(2,24),B0=Math.pow(2,17),IA=Math.pow(2,16),PA=Math.pow(2,9),CA=Math.pow(2,8),j0=Math.pow(2,1);function Wm(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;let r=m.placed?1:0,s=Math.floor(127*m.opacity);return s*N0+r*du+s*B0+r*IA+s*PA+r*CA+s*j0+r}let _l=0;class Gm{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,s,d,f,v){let b=this._bucketParts;for(;this._currentTileIndex<r.length;)if(s.getBucketParts(b,f,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((T,q)=>T.sortKey-q.sortKey));this._currentPartIndex<b.length;)if(s.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,v())return!0;return!1}}class U0{constructor(r,s,d,f,v,b,T,q){this.placement=new z0(r,s,b,T,q),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(r,s,d){let f=M.now(),v=()=>!this._forceFullPlacement&&M.now()-f>2;for(;this._currentPlacementIndex>=0;){let b=s[r[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=T)&&(!b.maxzoom||b.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Gm(b)),this._inProgressLayer.continuePlacement(d[b.source],this.placement,this._showCollisionBoxes,b,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}let xl=512/a.Z/2;class Zm{constructor(r,s,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};let f=new Map;for(let v=0;v<s.length;v++){let b=s.get(v),T=b.key,q=f.get(T);q?q.push(b):f.set(T,[b])}for(let[v,b]of f){let T={positions:b.map(q=>({x:Math.floor(q.anchorX*xl),y:Math.floor(q.anchorY*xl)})),crossTileIDs:b.map(q=>q.crossTileID)};if(T.positions.length>128){let q=new a.aF(T.positions.length,16,Uint16Array);for(let{x:C,y:k}of T.positions)q.add(C,k);q.finish(),delete T.positions,T.index=q}this._symbolsByKey[v]=T}}getScaledCoordinates(r,s){let{x:d,y:f,z:v}=this.tileID.canonical,{x:b,y:T,z:q}=s.canonical,C=xl/Math.pow(2,q-v),k=(T*a.Z+r.anchorY)*C,F=f*a.Z*xl;return{x:Math.floor((b*a.Z+r.anchorX)*C-d*a.Z*xl),y:Math.floor(k-F)}}findMatches(r,s,d){let f=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let v=0;v<r.length;v++){let b=r.get(v);if(b.crossTileID)continue;let T=this._symbolsByKey[b.key];if(!T)continue;let q=this.getScaledCoordinates(b,s);if(T.index){let C=T.index.range(q.x-f,q.y-f,q.x+f,q.y+f).sort();for(let k of C){let F=T.crossTileIDs[k];if(!d[F]){d[F]=!0,b.crossTileID=F;break}}}else if(T.positions)for(let C=0;C<T.positions.length;C++){let k=T.positions[C],F=T.crossTileIDs[C];if(Math.abs(k.x-q.x)<=f&&Math.abs(k.y-q.y)<=f&&!d[F]){d[F]=!0,b.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class MA{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Hc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){let s=Math.round((r-this.lng)/360);if(s!==0)for(let d in this.indexes){let f=this.indexes[d],v={};for(let b in f){let T=f[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+s),v[T.tileID.key]=T}this.indexes[d]=v}this.lng=r}addBucket(r,s,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<s.symbolInstances.length;v++)s.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});let f=this.usedCrossTileIDs[r.overscaledZ];for(let v in this.indexes){let b=this.indexes[v];if(Number(v)>r.overscaledZ)for(let T in b){let q=b[T];q.tileID.isChildOf(r)&&q.findMatches(s.symbolInstances,r,f)}else{let T=b[r.scaledTo(Number(v)).key];T&&T.findMatches(s.symbolInstances,r,f)}}for(let v=0;v<s.symbolInstances.length;v++){let b=s.symbolInstances.get(v);b.crossTileID||(b.crossTileID=d.generate(),f[b.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Zm(r,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(r,s){for(let d of s.getCrossTileIDsLists())for(let f of d)delete this.usedCrossTileIDs[r][f]}removeStaleBuckets(r){let s=!1;for(let d in this.indexes){let f=this.indexes[d];for(let v in f)r[f[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,f[v]),delete f[v],s=!0)}return s}}class Xc{constructor(){this.layerIndexes={},this.crossTileIDs=new MA,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,s,d){let f=this.layerIndexes[r.id];f===void 0&&(f=this.layerIndexes[r.id]=new Hc);let v=!1,b={};f.handleWrapJump(d);for(let T of s){let q=T.getBucket(r);q&&r.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(T.tileID,q,this.crossTileIDs)&&(v=!0),b[q.bucketInstanceId]=!0)}return f.removeStaleBuckets(b)&&(v=!0),v}pruneUnusedLayers(r){let s={};r.forEach(d=>{s[d]=!0});for(let d in this.layerIndexes)s[d]||delete this.layerIndexes[d]}}var Km="void main() {fragColor=vec4(1.0);}";let bn={prelude:or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:or("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:or("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:or(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:or(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:or(Km,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:or(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:or("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:or("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:or("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:or(Km,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:or(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:or(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:or(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:or(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:or(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:or("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:or("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:or("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:or("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:or(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:or("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function or(m,r){let s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/in ([\w]+) ([\w]+)/g),f=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=v?v.concat(f):f,T={};return{fragmentSource:m=m.replace(s,(q,C,k,F,L)=>(T[L]=!0,C==="define"?`
#ifndef HAS_UNIFORM_u_${L}
in ${k} ${F} ${L};
#else
uniform ${k} ${F} u_${L};
#endif
`:`
#ifdef HAS_UNIFORM_u_${L}
    ${k} ${F} ${L} = u_${L};
#endif
`)),vertexSource:r=r.replace(s,(q,C,k,F,L)=>{let V=F==="float"?"vec2":"vec4",$=L.match(/color/)?"color":V;return T[L]?C==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
in ${k} ${V} a_${L};
out ${k} ${F} ${L};
#else
uniform ${k} ${F} u_${L};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = a_${L};
#else
    ${k} ${F} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = unpack_mix_${$}(a_${L}, u_${L}_t);
#else
    ${k} ${F} ${L} = u_${L};
#endif
`:C==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
in ${k} ${V} a_${L};
#else
uniform ${k} ${F} u_${L};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${k} ${F} ${L} = a_${L};
#else
    ${k} ${F} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${k} ${F} ${L} = unpack_mix_${$}(a_${L}, u_${L}_t);
#else
    ${k} ${F} ${L} = u_${L};
#endif
`}),staticAttributes:d,staticUniforms:b}}class fu{constructor(r,s,d){this.vertexBuffer=r,this.indexBuffer=s,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var wn=a.aG([{name:"a_pos",type:"Int16",components:2}]);let bl="#define PROJECTION_MERCATOR",ir="mercator";class Jc{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ir}get shaderDefine(){return bl}get shaderPreludeCode(){return bn.projectionMercator}get vertexShaderPreludeCode(){return bn.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,s,d,f,v){if(this._cachedMesh)return this._cachedMesh;let b=new a.aI;b.emplaceBack(0,0),b.emplaceBack(a.Z,0),b.emplaceBack(0,a.Z),b.emplaceBack(a.Z,a.Z);let T=r.createVertexBuffer(b,wn.members),q=a.aJ.simpleSegment(0,0,4,2),C=new a.aK;C.emplaceBack(1,0,2),C.emplaceBack(1,2,3);let k=r.createIndexBuffer(C);return this._cachedMesh=new fu(T,k,q),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Yc{constructor(r=0,s=0,d=0,f=0){if(isNaN(r)||r<0||isNaN(s)||s<0||isNaN(d)||d<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=s,this.left=d,this.right=f}interpolate(r,s,d){return s.top!=null&&r.top!=null&&(this.top=a.B.number(r.top,s.top,d)),s.bottom!=null&&r.bottom!=null&&(this.bottom=a.B.number(r.bottom,s.bottom,d)),s.left!=null&&r.left!=null&&(this.left=a.B.number(r.left,s.left,d)),s.right!=null&&r.right!=null&&(this.right=a.B.number(r.right,s.right,d)),this}getCenter(r,s){let d=a.ae((this.left+r-this.right)/2,0,r),f=a.ae((this.top+s-this.bottom)/2,0,s);return new a.P(d,f)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Yc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function pu(m,r){if(!m.renderWorldCopies||m.lngRange)return;let s=r.lng-m.center.lng;r.lng+=s>180?-360:s<-180?360:0}function $n(m){return Math.max(0,Math.floor(m))}class Gi{constructor(r,s,d,f,v,b){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=f==null?0:f,this._maxPitch=v==null?60:v,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=$n(this._zoom),this._scale=a.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Yc,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,s,d){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=$n(this._zoom),this._scale=a.ac(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Yc(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!d&&r.autoCalculateNearFarZ,s&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){let s=a.aL(r,-180,180)*Math.PI/180;var d,f,v,b,T,q,C,k,F;this._bearingInRadians!==s&&(this._unmodified=!1,this._bearingInRadians=s,this._calcMatrices(),this._rotationMatrix=x(),d=this._rotationMatrix,v=-this._bearingInRadians,b=(f=this._rotationMatrix)[0],T=f[1],q=f[2],C=f[3],k=Math.sin(v),F=Math.cos(v),d[0]=b*F+q*k,d[1]=T*F+C*k,d[2]=b*-k+q*F,d[3]=T*-k+C*F)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){let s=a.ae(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==s&&(this._unmodified=!1,this._pitchInRadians=s,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){let s=r/180*Math.PI;this._rollInRadians!==s&&(this._unmodified=!1,this._rollInRadians=s,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aM(this._fovInRadians)}setFov(r){r=a.ae(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=a.ab(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){let s=this.getConstrained(this._center,r).zoom;this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this._tileZoom=Math.max(0,Math.floor(s)),this._scale=a.ac(s),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,s){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=s,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,s,d){this._unmodified=!1,this._edgeInsets.interpolate(r,s,d),this._constrain(),this._calcMatrices()}resize(r,s,d=!0){this._width=r,this._height=s,d&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new gr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.af])}getConstrained(r,s){return this._callbacks.getConstrained(r,s)}getCameraQueryGeometry(r,s){if(s.length===1)return[s[0],r];{let d=r.x,f=r.y,v=r.x,b=r.y;for(let T of s)d=Math.min(d,T.x),f=Math.min(f,T.y),v=Math.max(v,T.x),b=Math.max(b,T.y);return[new a.P(d,f),new a.P(v,f),new a.P(v,b),new a.P(d,b),new a.P(d,f)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let r=this._unmodified,{center:s,zoom:d}=this.getConstrained(this.center,this.zoom);this.setCenter(s),this.setZoom(d),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=a.ad(new Float64Array(16));a.M(r,r,[this._width/2,-this._height/2,1]),a.L(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=a.ad(new Float64Array(16)),a.M(r,r,[1,-1,1]),a.L(r,r,[-1,-1,0]),a.M(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,s,d,f){let v=d!==void 0?d:this.bearing,b=f=f!==void 0?f:this.pitch,T=a.$.fromLngLat(r,s),q=-Math.cos(a.ab(b)),C=Math.sin(a.ab(b)),k=C*Math.sin(a.ab(v)),F=-C*Math.cos(a.ab(v)),L=this.elevation,V=s-L,$;q*V>=0||Math.abs(q)<.1?($=1e4,L=s+$*q):$=-V/q;let ie,re,ne=a.aN(1,T.y),se=0;do{if(se+=1,se>10)break;re=$/ne,ie=new a.$(T.x+k*re,T.y+F*re),ne=1/ie.meterInMercatorCoordinateUnits()}while(Math.abs($-re*ne)>1e-12);return{center:ie.toLngLat(),elevation:L,zoom:a.ah(this.height/2/Math.tan(this.fovInRadians/2)/re/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;let s=a.ag(1,this.center.lat)*this.worldSize,d=this.cameraToCenterDistance/s,f=a.$.fromLngLat(this.center,this.elevation),v=Z(this.center,this.elevation,this.pitch,this.bearing,d);this._elevation=r;let b=this.calculateCenterFromCameraLngLatAlt(v.toLngLat(),a.aN(v.z,f.y),this.bearing,this.pitch);this._elevation=b.elevation,this._center=b.center,this.setZoom(b.zoom)}getCameraPoint(){let r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let r=a.ag(1,this.center.lat)*this.worldSize;return Z(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];let s=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/s,r.canonical.y/s,1/s/a.Z,1/s/a.Z]}}class hi{constructor(r,s){this.min=r,this.max=s,this.center=a.aO([],a.aP([],this.min,this.max),.5)}quadrant(r){let s=[r%2==0,r<2],d=a.aQ(this.min),f=a.aQ(this.max);for(let v=0;v<s.length;v++)d[v]=s[v]?this.min[v]:this.center[v],f[v]=s[v]?this.center[v]:this.max[v];return f[2]=this.max[2],new hi(d,f)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let s=!0;for(let d=0;d<r.planes.length;d++){let f=this.intersectsPlane(r.planes[d]);if(f===0)return 0;f===1&&(s=!1)}return s?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let s=r[3],d=r[3];for(let f=0;f<3;f++)r[f]>0?(s+=r[f]*this.min[f],d+=r[f]*this.max[f]):(d+=r[f]*this.min[f],s+=r[f]*this.max[f]);return s>=0?2:d<0?0:1}}class Zi{distanceToTile2d(r,s,d,f){let v=f.distanceX([r,s]),b=f.distanceY([r,s]);return Math.hypot(v,b)}getWrap(r,s,d){return d}getTileAABB(r,s,d,f){var v,b;let T=d,q=d;if(f.terrain){let k=new a.Y(r.z,s,r.z,r.x,r.y),F=f.terrain.getMinMaxElevation(k);T=(v=F.minElevation)!==null&&v!==void 0?v:d,q=(b=F.maxElevation)!==null&&b!==void 0?b:d}let C=1<<r.z;return new hi([s+r.x/C,r.y/C,T],[s+(r.x+1)/C,(r.y+1)/C,q])}allowVariableZoom(r,s){let d=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,f=a.ae(78.5-d/2,0,60);return!!s.terrain||r.pitch>f}allowWorldCopies(){return!0}recalculateCache(){}}class Pr{constructor(r,s,d){this.points=r,this.planes=s,this.aabb=d}static fromInvProjectionMatrix(r,s=1,d=0){let f=Math.pow(2,d),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{let k=1/(C=a.at([],C,r))[3]/s*f;return a.aR(C,C,[k,k,1/C[3],k])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{let k=a.aS([],v[C[0]],v[C[1]]),F=a.aS([],v[C[2]],v[C[1]]),L=a.aT([],a.aU([],k,F)),V=-a.aV(L,v[C[1]]);return L.concat(V)}),T=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],q=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let C of v)for(let k=0;k<3;k++)T[k]=Math.min(T[k],C[k]),q[k]=Math.max(q[k],C[k]);return new Pr(v,b,new hi(T,q))}}class mu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,s,d){return this._helper.interpolatePadding(r,s,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,s,d=!0){this._helper.resize(r,s,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,s){this._helper.overrideNearFarZ(r,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,s){}constructor(r,s,d,f,v){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Gi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(b,T)=>this.getConstrained(b,T)},r,s,d,f,v),this._coveringTilesDetailsProvider=new Zi}clone(){let r=new mu;return r.apply(this),r}apply(r,s,d){this._helper.apply(r,s,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){let s=[new a.aW(0,r)];if(this._helper._renderWorldCopies){let d=this.screenPointToMercatorCoordinate(new a.P(0,0)),f=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),v=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),b=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),T=Math.floor(Math.min(d.x,f.x,v.x,b.x)),q=Math.floor(Math.max(d.x,f.x,v.x,b.x)),C=1;for(let k=T-C;k<=q+C;k++)k!==0&&s.push(new a.aW(k,r))}return s}getCameraFrustum(){return Pr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){let s=this.screenPointToLocation(this.centerPoint,r),d=r?r.getElevationForLngLatZoom(s,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(r,s){let d=a.ag(this.elevation,this.center.lat),f=this.screenPointToMercatorCoordinateAtZ(s,d),v=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),b=a.$.fromLngLat(r),T=new a.$(b.x-(f.x-v.x),b.y-(f.y-v.y));this.setCenter(T==null?void 0:T.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,s){return s?this.coordinatePoint(a.$.fromLngLat(r),s.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.$.fromLngLat(r))}screenPointToLocation(r,s){var d;return(d=this.screenPointToMercatorCoordinate(r,s))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(r,s){if(s){let d=s.pointCoordinate(r);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,s){let d=s||0,f=[r.x,r.y,0,1],v=[r.x,r.y,1,1];a.at(f,f,this._pixelMatrixInverse),a.at(v,v,this._pixelMatrixInverse);let b=f[3],T=v[3],q=f[1]/b,C=v[1]/T,k=f[2]/b,F=v[2]/T,L=k===F?0:(d-k)/(F-k);return new a.$(a.B.number(f[0]/b,v[0]/T,L)/this.worldSize,a.B.number(q,C,L)/this.worldSize,d)}coordinatePoint(r,s=0,d=this._pixelMatrix){let f=[r.x*this.worldSize,r.y*this.worldSize,s,1];return a.at(f,f,d),new a.P(f[0]/f[3],f[1]/f[3])}getBounds(){let r=Math.max(0,this._helper._height/2-Se(this));return new gr().extend(this.screenPointToLocation(new a.P(0,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(r,s){return s?s.pointCoordinate(r)!=null:r.y>this.height/2-Se(this)}calculatePosMatrix(r,s=!1,d){var f;let v=(f=r.key)!==null&&f!==void 0?f:a.aX(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),b=s?this._alignedPosMatrixCache:this._posMatrixCache;if(b.has(v)){let C=b.get(v);return d?C.f32:C.f64}let T=G(r,this.worldSize);a.N(T,s?this._alignedProjMatrix:this._viewProjMatrix,T);let q={f64:T,f32:new Float32Array(T)};return b.set(v,q),d?q.f32:q.f64}calculateFogMatrix(r){let s=r.key,d=this._fogMatrixCacheF32;if(d.has(s))return d.get(s);let f=G(r,this.worldSize);return a.N(f,this._fogMatrix,f),d.set(s,new Float32Array(f)),d.get(s)}getConstrained(r,s){s=a.ae(+s,this.minZoom,this.maxZoom);let d={center:new a.Q(r.lng,r.lat),zoom:s},f=this._helper._lngRange;this._helper._renderWorldCopies||f!==null||(f=[-179.9999999999,180-1e-10]);let v=this.tileSize*a.ac(d.zoom),b=0,T=v,q=0,C=v,k=0,F=0,{x:L,y:V}=this.size;if(this._helper._latRange){let de=this._helper._latRange;b=a.S(de[1])*v,T=a.S(de[0])*v,T-b<V&&(k=V/(T-b))}f&&(q=a.aL(a.U(f[0])*v,0,v),C=a.aL(a.U(f[1])*v,0,v),C<q&&(C+=v),C-q<L&&(F=L/(C-q)));let{x:$,y:ie}=tr(v,r),re,ne,se=Math.max(F||0,k||0);if(se){let de=new a.P(F?(C+q)/2:$,k?(T+b)/2:ie);return d.center=xn(v,de).wrap(),d.zoom+=a.ah(se),d}if(this._helper._latRange){let de=V/2;ie-de<b&&(ne=b+de),ie+de>T&&(ne=T-de)}if(f){let de=(q+C)/2,he=$;this._helper._renderWorldCopies&&(he=a.aL($,de-v/2,de+v/2));let fe=L/2;he-fe<q&&(re=q+fe),he+fe>C&&(re=C-fe)}if(re!==void 0||ne!==void 0){let de=new a.P(re!=null?re:$,ne!=null?ne:ie);d.center=xn(v,de).wrap()}return d}calculateCenterFromCameraLngLatAlt(r,s,d,f){return this._helper.calculateCenterFromCameraLngLatAlt(r,s,d,f)}_calculateNearFarZIfNeeded(r,s,d){if(!this._helper.autoCalculateNearFarZ)return;let f=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),v=r-f*this._helper._pixelPerMeter/Math.cos(s),b=f<0?v:r,T=Math.PI/2+this.pitchInRadians,q=a.ab(this.fov)*(Math.abs(Math.cos(a.ab(this.roll)))*this.height+Math.abs(Math.sin(a.ab(this.roll)))*this.width)/this.height*(.5+d.y/this.height),C=Math.sin(q)*b/Math.sin(a.ae(Math.PI-T-q,.01,Math.PI-.01)),k=Se(this),F=Math.atan(k/this._helper.cameraToCenterDistance),L=a.ab(.75),V=F>L?2*F*(.5+d.y/(2*k)):L,$=Math.sin(V)*b/Math.sin(a.ae(Math.PI-T-V,.01,Math.PI-.01)),ie=Math.min(C,$);this._helper._farZ=1.01*(Math.cos(Math.PI/2-s)*ie+b),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let r=this.centerOffset,s=tr(this.worldSize,this.center),d=s.x,f=s.y;this._helper._pixelPerMeter=a.ag(1,this.center.lat)*this.worldSize;let v=a.ab(Math.min(this.pitch,Kt)),b=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(v)),T;this._calculateNearFarZIfNeeded(b,v,r),T=new Float64Array(16),a.aY(T,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.an(this._invProjMatrix,T),T[8]=2*-r.x/this._helper._width,T[9]=2*r.y/this._helper._height,this._projectionMatrix=a.aZ(T),a.M(T,T,[1,-1,1]),a.L(T,T,[0,0,-this._helper.cameraToCenterDistance]),a.a_(T,T,-this.rollInRadians),a.a$(T,T,this.pitchInRadians),a.a_(T,T,-this.bearingInRadians),a.L(T,T,[-d,-f,0]),this._mercatorMatrix=a.M([],T,[this.worldSize,this.worldSize,this.worldSize]),a.M(T,T,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,T),a.L(T,T,[0,0,-this.elevation]),this._viewProjMatrix=T,this._invViewProjMatrix=a.an([],T);let q=[0,0,-1,1];a.at(q,q,this._invViewProjMatrix),this._cameraPosition=[q[0]/q[3],q[1]/q[3],q[2]/q[3]],this._fogMatrix=new Float64Array(16),a.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,b,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,a.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.L(this._fogMatrix,this._fogMatrix,[-d,-f,0]),a.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,T);let C=this._helper._width%2/2,k=this._helper._height%2/2,F=Math.cos(this.bearingInRadians),L=Math.sin(-this.bearingInRadians),V=d-Math.round(d)+F*C+L*k,$=f-Math.round(f)+F*k+L*C,ie=new Float64Array(T);if(a.L(ie,ie,[V>.5?V-1:V,$>.5?$-1:$,0]),this._alignedProjMatrix=ie,T=a.an(new Float64Array(16),this._pixelMatrix),!T)throw new Error("failed to invert matrix");this._pixelMatrixInverse=T,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let r=this.screenPointToMercatorCoordinate(new a.P(0,0)),s=[r.x*this.worldSize,r.y*this.worldSize,0,1];return a.at(s,s,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let r=a.ag(1,this.center.lat)*this.worldSize;return Z(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,s){let d=a.$.fromLngLat(r),f=[d.x*this.worldSize,d.y*this.worldSize,s,1];return a.at(f,f,this._viewProjMatrix),f[2]/f[3]}getProjectionData(r){let{overscaledTileID:s,aligned:d,applyTerrainMatrix:f}=r,v=this._helper.getMercatorTileCoordinates(s),b=s?this.calculatePosMatrix(s,d,!0):null,T;return T=s&&s.terrainRttPosMatrix32f&&f?s.terrainRttPosMatrix32f:b||a.b0(),{mainMatrix:T,tileMercatorCoords:v,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:T}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,s,d){return 1}transformLightDirection(r){return a.aQ(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,s,d,f){let v=this.calculatePosMatrix(d),b;f?(b=[r,s,f(r,s),1],a.at(b,b,v)):(b=[r,s,0,1],gl(b,b,v));let T=b[3];return{point:new a.P(b[0]/T,b[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}populateCache(r){for(let s of r)this.calculatePosMatrix(s)}getMatrixForModel(r,s){let d=a.$.fromLngLat(r,s),f=d.meterInMercatorCoordinateUnits(),v=a.b1();return a.L(v,v,[d.x,d.y,d.z]),a.a_(v,v,Math.PI),a.a$(v,v,Math.PI/2),a.M(v,v,[-f,f,f]),v}getProjectionDataForCustomLayer(r=!0){let s=new a.Y(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:s,applyGlobeMatrix:r}),f=G(s,this.worldSize);a.N(f,this._viewProjMatrix,f),d.tileMercatorCoords=[0,0,1,1];let v=[a.Z,a.Z,this.worldSize/this._helper.pixelsPerMeter],b=a.b2();return a.M(b,f,v),d.fallbackMatrix=b,d.mainMatrix=b,d}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function Sn(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function oa(m){if(m.useSlerp){if(m.k<1){let r=a.b3(m.startEulerAngles.roll,m.startEulerAngles.pitch,m.startEulerAngles.bearing),s=a.b3(m.endEulerAngles.roll,m.endEulerAngles.pitch,m.endEulerAngles.bearing),d=new Float64Array(4);a.b4(d,r,s,m.k);let f=a.b5(d);m.tr.setRoll(f.roll),m.tr.setPitch(f.pitch),m.tr.setBearing(f.bearing)}else m.tr.setRoll(m.endEulerAngles.roll),m.tr.setPitch(m.endEulerAngles.pitch),m.tr.setBearing(m.endEulerAngles.bearing);}else m.tr.setRoll(a.B.number(m.startEulerAngles.roll,m.endEulerAngles.roll,m.k)),m.tr.setPitch(a.B.number(m.startEulerAngles.pitch,m.endEulerAngles.pitch,m.k)),m.tr.setBearing(a.B.number(m.startEulerAngles.bearing,m.endEulerAngles.bearing,m.k))}function Wn(m,r,s,d,f){let v=f.padding,b=tr(f.worldSize,s.getNorthWest()),T=tr(f.worldSize,s.getNorthEast()),q=tr(f.worldSize,s.getSouthEast()),C=tr(f.worldSize,s.getSouthWest()),k=a.ab(-d),F=b.rotate(k),L=T.rotate(k),V=q.rotate(k),$=C.rotate(k),ie=new a.P(Math.max(F.x,L.x,$.x,V.x),Math.max(F.y,L.y,$.y,V.y)),re=new a.P(Math.min(F.x,L.x,$.x,V.x),Math.min(F.y,L.y,$.y,V.y)),ne=ie.sub(re),se=(f.width-(v.left+v.right+r.left+r.right))/ne.x,de=(f.height-(v.top+v.bottom+r.top+r.bottom))/ne.y;if(de<0||se<0)return void Sn();let he=Math.min(a.ah(f.scale*Math.min(se,de)),m.maxZoom),fe=a.P.convert(m.offset),_e=new a.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(a.ab(d)),pe=fe.add(_e).mult(f.scale/a.ac(he));return{center:xn(f.worldSize,b.add(q).div(2).sub(pe)),zoom:he,bearing:d}}class Qc{get useGlobeControls(){return!1}handlePanInertia(r,s){return{easingOffset:r,easingCenter:s.center}}handleMapControlsRollPitchBearingZoom(r,s){r.bearingDelta&&s.setBearing(s.bearing+r.bearingDelta),r.pitchDelta&&s.setPitch(s.pitch+r.pitchDelta),r.rollDelta&&s.setRoll(s.roll+r.rollDelta),r.zoomDelta&&s.setZoom(s.zoom+r.zoomDelta)}handleMapControlsPan(r,s,d){r.around.distSqr(s.centerPoint)<.01||s.setLocationAtPoint(d,r.around)}cameraForBoxAndBearing(r,s,d,f,v){return Wn(r,s,d,f,v)}handleJumpToCenterZoom(r,s){r.zoom!==(s.zoom!==void 0?+s.zoom:r.zoom)&&r.setZoom(+s.zoom),s.center!==void 0&&r.setCenter(a.Q.convert(s.center))}handleEaseTo(r,s){let d=r.zoom,f=r.padding,v={roll:r.roll,pitch:r.pitch,bearing:r.bearing},b={roll:s.roll===void 0?r.roll:s.roll,pitch:s.pitch===void 0?r.pitch:s.pitch,bearing:s.bearing===void 0?r.bearing:s.bearing},T=s.zoom!==void 0,q=!r.isPaddingEqual(s.padding),C=!1,k=T?+s.zoom:r.zoom,F=r.centerPoint.add(s.offsetAsPoint),L=r.screenPointToLocation(F),{center:V,zoom:$}=r.getConstrained(a.Q.convert(s.center||L),k!=null?k:d);pu(r,V);let ie=tr(r.worldSize,L),re=tr(r.worldSize,V).sub(ie),ne=a.ac($-d);return C=$!==d,{easeFunc:se=>{if(C&&r.setZoom(a.B.number(d,$,se)),a.b6(v,b)||oa({startEulerAngles:v,endEulerAngles:b,tr:r,k:se,useSlerp:v.roll!=b.roll}),q&&(r.interpolatePadding(f,s.padding,se),F=r.centerPoint.add(s.offsetAsPoint)),s.around)r.setLocationAtPoint(s.around,s.aroundPoint);else{let de=a.ac(r.zoom-d),he=$>d?Math.min(2,ne):Math.max(.5,ne),fe=Math.pow(he,1-se),_e=xn(r.worldSize,ie.add(re.mult(se*fe)).mult(de));r.setLocationAtPoint(r.renderWorldCopies?_e.wrap():_e,F)}},isZooming:C,elevationCenter:V}}handleFlyTo(r,s){let d=s.zoom!==void 0,f=r.zoom,v=r.getConstrained(a.Q.convert(s.center||s.locationAtOffset),d?+s.zoom:f),b=v.center,T=v.zoom;pu(r,b);let q=tr(r.worldSize,s.locationAtOffset),C=tr(r.worldSize,b).sub(q),k=C.mag(),F=a.ac(T-f),L;if(s.minZoom!==void 0){let V=Math.min(+s.minZoom,f,T),$=r.getConstrained(b,V).zoom;L=a.ac($-f)}return{easeFunc:(V,$,ie,re)=>{r.setZoom(V===1?T:f+a.ah($));let ne=V===1?b:xn(r.worldSize,q.add(C.mult(ie)).mult($));r.setLocationAtPoint(r.renderWorldCopies?ne.wrap():ne,re)},scaleOfZoom:F,targetCenter:b,scaleOfMinZoom:L,pixelPathLength:k}}}class br{constructor(r,s,d){this.blendFunction=r,this.blendColor=s,this.mask=d}}br.Replace=[1,0],br.disabled=new br(br.Replace,a.b7.transparent,[!1,!1,!1,!1]),br.unblended=new br(br.Replace,a.b7.transparent,[!0,!0,!0,!0]),br.alphaBlended=new br([1,771],a.b7.transparent,[!0,!0,!0,!0]);let Jr=2305;class nr{constructor(r,s,d){this.enable=r,this.mode=s,this.frontFace=d}}nr.disabled=new nr(!1,1029,Jr),nr.backCCW=new nr(!0,1029,Jr),nr.frontCCW=new nr(!0,1028,Jr);class Ft{constructor(r,s,d){this.func=r,this.mask=s,this.range=d}}Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);let vu=7680;class $t{constructor(r,s,d,f,v,b){this.test=r,this.ref=s,this.mask=d,this.fail=f,this.depthFail=v,this.pass=b}}$t.disabled=new $t({func:519,mask:0},0,0,vu,vu,vu);let Ld=new WeakMap;function sn(m){var r;if(Ld.has(m))return Ld.get(m);{let s=(r=m.getParameter(m.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Ld.set(m,s),s}}class Hm{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;let s=r.context,d=s.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;let f=new a.aI;f.emplaceBack(-1,-1),f.emplaceBack(2,-1),f.emplaceBack(-1,2);let v=new a.aK;v.emplaceBack(0,1,2),this._fullscreenTriangle=new fu(s.createVertexBuffer(f,wn.members),s.createIndexBuffer(v),a.aJ.simpleSegment(0,0,f.length,v.length)),this._resultBuffer=new Uint8Array(4),s.activeTexture.set(d.TEXTURE1);let b=d.createTexture();d.bindTexture(d.TEXTURE_2D,b),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=s.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(b),sn(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){let r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,s){let d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,s),this._updateCount++,this._measuredError}_bindFramebuffer(){let r=this._cachedRenderContext.context,s=r.gl;r.activeTexture.set(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,s){let d=this._cachedRenderContext.context,f=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:a.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,f.TRIANGLES,Ft.disabled,$t.disabled,br.unblended,nr.disabled,((v,b)=>({u_input:v,u_output_expected:b}))(r,s),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&sn(f)){f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.readBuffer(f.COLOR_ATTACHMENT0),f.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),f.bindBuffer(f.PIXEL_PACK_BUFFER,null);let v=f.fenceSync(f.SYNC_GPU_COMMANDS_COMPLETE,0);f.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:v}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&sn(r)){let s=r.clientWaitSync(this._readbackQueue.sync,0,0);if(s===r.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(s===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Hm._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let s=0;return s+=r[0]/256,s+=r[1]/65536,s+=r[2]/16777216,r[3]<127&&(s=-s),s/128}}let Xm=a.Z/128;function eh(m,r){let s=m.granularity!==void 0?Math.max(m.granularity,1):1,d=s+(m.generateBorders?2:0),f=s+(m.extendToNorthPole||m.generateBorders?1:0)+(m.extendToSouthPole||m.generateBorders?1:0),v=d+1,b=f+1,T=m.generateBorders?-1:0,q=m.generateBorders||m.extendToNorthPole?-1:0,C=s+(m.generateBorders?1:0),k=s+(m.generateBorders||m.extendToSouthPole?1:0),F=v*b,L=d*f*6,V=v*b>65536;if(V&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let $=V||r==="32bit",ie=new Int16Array(2*F),re=0;for(let de=q;de<=k;de++)for(let he=T;he<=C;he++){let fe=he/s*a.Z;he===-1&&(fe=-64),he===s+1&&(fe=a.Z+Xm);let _e=de/s*a.Z;de===-1&&(_e=m.extendToNorthPole?a.b9:-64),de===s+1&&(_e=m.extendToSouthPole?a.ba:a.Z+Xm),ie[re++]=fe,ie[re++]=_e}let ne=$?new Uint32Array(L):new Uint16Array(L),se=0;for(let de=0;de<f;de++)for(let he=0;he<d;he++){let fe=he+1+de*v,_e=he+(de+1)*v,pe=he+1+(de+1)*v;ne[se++]=he+de*v,ne[se++]=_e,ne[se++]=fe,ne[se++]=fe,ne[se++]=_e,ne[se++]=pe}return{vertices:ie.buffer.slice(0),indices:ne.buffer.slice(0),uses32bitIndices:$}}let gu=new a.aH({fill:new a.bb(128,2),line:new a.bb(512,0),tile:new a.bb(128,32),stencil:new a.bb(128,1),circle:3});class th{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return bn.projectionGlobe}get vertexShaderPreludeCode(){return bn.projectionMercator.vertexSource}get subdivisionGranularity(){return gu}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Hm(r));let s=a.S(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-s*Math.PI*2))-.5*Math.PI,f=this._errorMeasurement.updateErrorLoop(s,d),v=M.now();f!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=f,this._errorMeasurementLastChangeTime=v);let b=Math.min(Math.max((v-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bd(b))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,s,d,f,v){let b=(v==="stencil"?gu.stencil:gu.tile).getGranularityForZoomLevel(s.z);return this._getMesh(r,{granularity:b,generateBorders:d,extendToNorthPole:s.y===0&&f,extendToSouthPole:s.y===(1<<s.z)-1&&f})}_getMesh(r,s){let d=this._getMeshKey(s);if(d in this._tileMeshCache)return this._tileMeshCache[d];let f=function(v,b){let T=eh(b,"16bit"),q=a.aI.deserialize({arrayBuffer:T.vertices,length:T.vertices.byteLength/2/2}),C=a.aK.deserialize({arrayBuffer:T.indices,length:T.indices.byteLength/2/3});return new fu(v.createVertexBuffer(q,wn.members),v.createIndexBuffer(C),a.aJ.simpleSegment(0,0,q.length,C.length))}(r,s);return this._tileMeshCache[d]=f,f}recalculate(r){}hasTransition(){let r=M.now(),s=!1;return s=s||(r-this._errorMeasurementLastChangeTime)/1e3<.7,s=s||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,s}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}let Jm=new a.r({type:new a.D(a.v.projection.type)});class Fd extends a.E{constructor(r){super(),this._transitionable=new a.T(Jm),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.C(0)),this._mercatorProjection=new Jc,this._verticalPerspectiveProjection=new th}get transitionState(){let r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof a.be){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,s,d,f,v){return this.currentProjection.getMeshFromTileID(r,s,d,f,v)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function rh(m){let r=Sl(m.worldSize,m.center.lat);return 2*Math.PI*r}function wl(m,r,s,d,f){let v=1/(1<<f),b=r/a.Z*v+d*v,T=a.bg((m/a.Z*v+s*v)*Math.PI*2+Math.PI,2*Math.PI),q=2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI,C=Math.cos(q),k=new Float64Array(3);return k[0]=Math.sin(T)*C,k[1]=Math.sin(q),k[2]=Math.cos(T)*C,k}function ki(m){return function(r,s){let d=Math.cos(s),f=new Float64Array(3);return f[0]=Math.sin(r)*d,f[1]=Math.sin(s),f[2]=Math.cos(r)*d,f}(m.lng*Math.PI/180,m.lat*Math.PI/180)}function Sl(m,r){return m/(2*Math.PI)/Math.cos(r*Math.PI/180)}function ih(m){let r=Math.asin(m[1])/Math.PI*180,s=Math.sqrt(m[0]*m[0]+m[2]*m[2]);if(s>1e-6){let d=m[0]/s,f=Math.acos(m[2]/s),v=(d>0?f:-f)/Math.PI*180;return new a.Q(a.aL(v,-180,180),r)}return new a.Q(0,r)}function qs(m){return Math.cos(m*Math.PI/180)}function Di(m,r){let s=qs(m),d=qs(r);return a.ah(d/s)}function zd(m,r){let s=m.rotate(r.bearingInRadians),d=r.zoom+Di(r.center.lat,0),f=a.bc(1/qs(r.center.lat),1/qs(Math.min(Math.abs(r.center.lat),60)),a.bf(d,7,3,0,1)),v=360/rh({worldSize:r.worldSize,center:{lat:r.center.lat}});return new a.Q(r.center.lng-s.x*v*f,a.ae(r.center.lat+s.y*v,-85.051129,a.af))}function Nd(m){let r=.5*m,s=Math.sin(r),d=Math.cos(r);return Math.log(s+d)-Math.log(d-s)}function V0(m,r,s,d){let f=m.lat+s*d;if(Math.abs(s)>1){let v=(Math.sign(m.lat+s)!==Math.sign(m.lat)?-Math.abs(m.lat):Math.abs(m.lat))*Math.PI/180,b=Math.abs(m.lat+s)*Math.PI/180,T=Nd(v+d*(b-v)),q=Nd(v),C=Nd(b);return new a.Q(m.lng+r*((T-q)/(C-q)),f)}return new a.Q(m.lng+r*d,f)}class RA{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=r}recalculateCache(){if(!this._hadAnyChanges)return;let r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(r,s,d,f){let v=`${r.z}_${r.x}_${r.y}`,b=this._cache.get(v);if(b)return b;let T=this._cachePrevious.get(v);if(T)return this._cache.set(v,T),T;let q=this._aabbFactory(r,s,d,f);return this._cache.set(v,q),this._hadAnyChanges=!0,q}}function ln(m,r,s){let d=m-r;return d<0?-d:Math.max(0,d-s)}function nh(m,r,s,d,f){let v=m-s,b;return b=v<0?Math.min(-v,1+v-f):v>1?Math.min(Math.max(v-f,0),1-v):0,Math.max(b,ln(r,d,f))}class vo{constructor(){this._aabbCache=new RA(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(r,s,d,f){let v=1<<d.z,b=1/v,T=d.x/v,q=d.y/v,C=2;return C=Math.min(C,nh(r,s,T,q,b)),C=Math.min(C,nh(r,s,T+.5,-q-b,b)),C=Math.min(C,nh(r,s,T+.5,2-q-b,b)),C}getWrap(r,s,d){let f=1<<s.z,v=1/f,b=s.x/f,T=ln(r.x,b,v),q=ln(r.x,b-1,v),C=ln(r.x,b+1,v),k=Math.min(T,q,C);return k===C?1:k===q?-1:0}allowVariableZoom(r,s){return Pe(r,s)>4}allowWorldCopies(){return!1}getTileAABB(r,s,d,f){return this._aabbCache.getTileAABB(r,s,d,f)}_computeTileAABB(r,s,d,f){if(r.z<=0)return new hi([-1,-1,-1],[1,1,1]);if(r.z===1)return new hi([r.x===0?-1:0,r.y===0?0:-1,-1],[r.x===0?0:1,r.y===0?1:0,1]);{let v=[wl(0,0,r.x,r.y,r.z),wl(a.Z,0,r.x,r.y,r.z),wl(a.Z,a.Z,r.x,r.y,r.z),wl(0,a.Z,r.x,r.y,r.z)],b=[1,1,1],T=[-1,-1,-1];for(let q of v)for(let C=0;C<3;C++)b[C]=Math.min(b[C],q[C]),T[C]=Math.max(T[C],q[C]);if(r.y===0||r.y===(1<<r.z)-1){let q=[0,r.y===0?1:-1,0];for(let C=0;C<3;C++)b[C]=Math.min(b[C],q[C]),T[C]=Math.max(T[C],q[C])}return new hi(b,T)}}}class Tl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,s,d){return this._helper.interpolatePadding(r,s,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,s){this._helper.resize(r,s)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,s){this._helper.overrideNearFarZ(r,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=a.bk(),this._projectionMatrix=a.b1(),this._globeViewProjMatrix32f=a.b0(),this._globeViewProjMatrixNoCorrection=a.b1(),this._globeViewProjMatrixNoCorrectionInverted=a.b1(),this._globeProjMatrixInverted=a.b1(),this._cameraPosition=a.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Gi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,s)=>this.getConstrained(r,s)}),this._coveringTilesDetailsProvider=new vo}clone(){let r=new Tl;return r.apply(this),r}apply(r,s){this._globeLatitudeErrorCorrectionRadians=s||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let r=a.bh();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){let{overscaledTileID:s,applyGlobeMatrix:d}=r,f=this._helper.getMercatorTileCoordinates(s);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:f,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){let s=this.pitchInRadians,d=this.cameraToCenterDistance/r,f=Math.sin(s)*d,v=Math.cos(s)*d+1,b=1/Math.sqrt(f*f+v*v)*1,T=-f,q=v,C=Math.sqrt(T*T+q*q);T/=C,q/=C;let k=[0,T,q];a.bl(k,k,[0,0,0],-this.bearingInRadians),a.bm(k,k,[0,0,0],-1*this.center.lat*Math.PI/180),a.bn(k,k,[0,0,0],this.center.lng*Math.PI/180);let F=1/a.bo(k);return a.aO(k,k,F),[...k,-b*F]}isLocationOccluded(r){return!this.isSurfacePointVisible(ki(r))}transformLightDirection(r){let s=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,f=Math.cos(d),v=[Math.sin(s)*f,Math.sin(d),Math.cos(s)*f],b=[v[2],0,-v[0]],T=[0,0,0];a.aU(T,b,v),a.aT(b,b),a.aT(T,T);let q=[0,0,0];return a.aT(q,[b[0]*r[0]+T[0]*r[1]+v[0]*r[2],b[1]*r[0]+T[1]*r[1]+v[1]*r[2],b[2]*r[0]+T[2]*r[1]+v[2]*r[2]]),q}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,s,d){let f=function(T,q,C){let k=1/(1<<C.z);return new a.$(T/a.Z*k+C.x*k,q/a.Z*k+C.y*k)}(r,s,d.canonical),v=(b=f.y,[a.bg(f.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI]);var b;return this.getCircleRadiusCorrection()/Math.cos(v[1])}projectTileCoordinates(r,s,d,f){let v=d.canonical,b=wl(r,s,v.x,v.y,v.z),T=1+(f?f(r,s):0)/a.bu,q=[b[0]*T,b[1]*T,b[2]*T,1];a.at(q,q,this._globeViewProjMatrixNoCorrection);let C=this._cachedClippingPlane,k=C[0]*b[0]+C[1]*b[1]+C[2]*b[2]+C[3]<0;return{point:new a.P(q[0]/q[3],q[1]/q[3]),signedDistanceFromCamera:q[3],isOccluded:k}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let r=Sl(this.worldSize,this.center.lat),s=a.b2(),d=a.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),a.aY(s,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let f=this.centerOffset;s[8]=2*-f.x/this._helper._width,s[9]=2*f.y/this._helper._height,this._projectionMatrix=a.aZ(s),this._globeProjMatrixInverted=a.b2(),a.an(this._globeProjMatrixInverted,s),a.L(s,s,[0,0,-this.cameraToCenterDistance]),a.a_(s,s,this.rollInRadians),a.a$(s,s,-this.pitchInRadians),a.a_(s,s,this.bearingInRadians),a.L(s,s,[0,0,-r]);let v=a.bh();v[0]=r,v[1]=r,v[2]=r,a.a$(d,s,this.center.lat*Math.PI/180),a.bp(d,d,-this.center.lng*Math.PI/180),a.M(d,d,v),this._globeViewProjMatrixNoCorrection=d,a.a$(s,s,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bp(s,s,-this.center.lng*Math.PI/180),a.M(s,s,v),this._globeViewProjMatrix32f=new Float32Array(s),this._globeViewProjMatrixNoCorrectionInverted=a.b2(),a.an(this._globeViewProjMatrixNoCorrectionInverted,d);let b=a.bh();this._cameraPosition=a.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/r,a.bl(this._cameraPosition,this._cameraPosition,b,-this.rollInRadians),a.bm(this._cameraPosition,this._cameraPosition,b,this.pitchInRadians),a.bl(this._cameraPosition,this._cameraPosition,b,-this.bearingInRadians),a.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bm(this._cameraPosition,this._cameraPosition,b,-this.center.lat*Math.PI/180),a.bn(this._cameraPosition,this._cameraPosition,b,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);let T=a.aZ(this._globeViewProjMatrixNoCorrectionInverted);a.M(T,T,[1,1,-1]),this._cachedFrustum=Pr.fromInvProjectionMatrix(T)}calculateFogMatrix(r){a.w("calculateFogMatrix is not supported on globe projection.");let s=a.b2();return a.ad(s),s}getVisibleUnwrappedCoordinates(r){return[new a.aW(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,s){if(!this._globeViewProjMatrixNoCorrection)return 1;let d=ki(r);a.aO(d,d,1+s/a.bu);let f=a.bk();return a.at(f,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),f[2]/f[3]}populateCache(r){}getBounds(){let r=.5*this.width,s=.5*this.height,d=[new a.P(0,0),new a.P(r,0),new a.P(this.width,0),new a.P(this.width,s),new a.P(this.width,this.height),new a.P(r,this.height),new a.P(0,this.height),new a.P(0,s)],f=[];for(let F of d)f.push(this.unprojectScreenPoint(F));let v=0,b=0,T=0,q=0,C=this.center;for(let F of f){let L=a.bq(C.lng,F.lng),V=a.bq(C.lat,F.lat);L<b&&(b=L),L>v&&(v=L),V<q&&(q=V),V>T&&(T=V)}let k=[C.lng+b,C.lat+q,C.lng+v,C.lat+T];return this.isSurfacePointOnScreen([0,1,0])&&(k[3]=90,k[0]=-180,k[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(k[1]=-90,k[0]=-180,k[2]=180),new gr(k)}getConstrained(r,s){let d=a.ae(r.lat,-85.051129,a.af),f=a.ae(+s,this.minZoom+Di(0,d),this.maxZoom);return{center:new a.Q(r.lng,d),zoom:f}}calculateCenterFromCameraLngLatAlt(r,s,d,f){return this._helper.calculateCenterFromCameraLngLatAlt(r,s,d,f)}setLocationAtPoint(r,s){let d=ki(this.unprojectScreenPoint(s)),f=ki(r),v=a.bh();a.br(v);let b=a.bh();a.bn(b,d,v,-this.center.lng*Math.PI/180),a.bm(b,b,v,this.center.lat*Math.PI/180);let T=f[0]*f[0]+f[2]*f[2],q=b[0]*b[0];if(T<q)return;let C=Math.sqrt(T-q),k=-C,F=a.bs(f[0],f[2],b[0],C),L=a.bs(f[0],f[2],b[0],k),V=a.bh();a.bn(V,f,v,-F);let $=a.bs(V[1],V[2],b[1],b[2]),ie=a.bh();a.bn(ie,f,v,-L);let re=a.bs(ie[1],ie[2],b[1],b[2]),ne=.5*Math.PI,se=$>=-ne&&$<=ne,de=re>=-ne&&re<=ne,he,fe;if(se&&de){let ze=this.center.lng*Math.PI/180,Oe=this.center.lat*Math.PI/180;a.bv(F,ze)+a.bv($,Oe)<a.bv(L,ze)+a.bv(re,Oe)?(he=F,fe=$):(he=L,fe=re)}else if(se)he=F,fe=$;else{if(!de)return;he=L,fe=re}let _e=he/Math.PI*180,pe=fe/Math.PI*180,qe=this.center.lat;this.setCenter(new a.Q(_e,a.ae(pe,-90,90))),this.setZoom(this.zoom+Di(qe,this.center.lat))}locationToScreenPoint(r,s){let d=ki(r);if(s){let f=s.getElevationForLngLatZoom(r,this._helper._tileZoom);a.aO(d,d,1+f/a.bu)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(r){let s=a.bk();return a.at(s,[...r,1],this._globeViewProjMatrixNoCorrection),s[0]/=s[3],s[1]/=s[3],new a.P((.5*s[0]+.5)*this.width,(.5*-s[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,s){if(s){let d=s.pointCoordinate(r);if(d)return d}return a.$.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,s){var d;return(d=this.screenPointToMercatorCoordinate(r,s))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(r,s){let d=this._cameraPosition,f=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(d,f)}getRayDirectionFromPixel(r){let s=a.bk();s[0]=r.x/this.width*2-1,s[1]=-1*(r.y/this.height*2-1),s[2]=1,s[3]=1,a.at(s,s,this._globeViewProjMatrixNoCorrectionInverted),s[0]/=s[3],s[1]/=s[3],s[2]/=s[3];let d=a.bh();d[0]=s[0]-this._cameraPosition[0],d[1]=s[1]-this._cameraPosition[1],d[2]=s[2]-this._cameraPosition[2];let f=a.bh();return a.aT(f,d),f}isSurfacePointVisible(r){let s=this._cachedClippingPlane;return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]+s[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;let s=a.bk();return a.at(s,[...r,1],this._globeViewProjMatrixNoCorrection),s[0]/=s[3],s[1]/=s[3],s[2]/=s[3],s[0]>-1&&s[0]<1&&s[1]>-1&&s[1]<1&&s[2]>-1&&s[2]<1}rayPlanetIntersection(r,s){let d=a.aV(r,s),f=a.bh(),v=a.bh();a.aO(v,s,d),a.aS(f,r,v);let b=1-a.aV(f,f);if(b<0)return null;let T=a.aV(r,r)-1,q=-d+(d<0?1:-1)*Math.sqrt(b),C=T/q,k=q;return{tMin:Math.min(C,k),tMax:Math.max(C,k)}}unprojectScreenPoint(r){let s=this._cameraPosition,d=this.getRayDirectionFromPixel(r),f=this.rayPlanetIntersection(s,d);if(f){let k=a.bh();a.aP(k,s,[d[0]*f.tMin,d[1]*f.tMin,d[2]*f.tMin]);let F=a.bh();return a.aT(F,k),ih(F)}let v=this._cachedClippingPlane,b=v[0]*d[0]+v[1]*d[1]+v[2]*d[2],T=-a.bt(v,s)/b,q=a.bh();if(T>0)a.aP(q,s,[d[0]*T,d[1]*T,d[2]*T]);else{let k=a.bh();a.aP(k,s,[2*d[0],2*d[1],2*d[2]]);let F=a.bt(this._cachedClippingPlane,k);a.aS(q,k,[this._cachedClippingPlane[0]*F,this._cachedClippingPlane[1]*F,this._cachedClippingPlane[2]*F])}let C=function(k){let F=a.bh();return F[0]=k[0]*-k[3],F[1]=k[1]*-k[3],F[2]=k[2]*-k[3],{center:F,radius:Math.sqrt(1-k[3]*k[3])}}(v);return ih(function(k,F,L){let V=a.bh();a.aS(V,L,k);let $=a.bh();return a.bi($,k,V,F/a.bj(V)),$}(C.center,C.radius,q))}getMatrixForModel(r,s){let d=a.Q.convert(r),f=1/a.bu,v=a.b1();return a.bp(v,v,d.lng/180*Math.PI),a.a$(v,v,-d.lat/180*Math.PI),a.L(v,v,[0,0,1+s/a.bu]),a.a$(v,v,.5*Math.PI),a.M(v,v,[f,f,f]),v}getProjectionDataForCustomLayer(r=!0){let s=this.getProjectionData({overscaledTileID:new a.Y(0,0,0,0,0),applyGlobeMatrix:r});return s.tileMercatorCoords=[0,0,1,1],s}getFastPathSimpleProjectionMatrix(r){}}class ah{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,s,d){return this._helper.interpolatePadding(r,s,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,s,d=!0){this._helper.resize(r,s,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,s){this._helper.overrideNearFarZ(r,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,s){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=s,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Gi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,s)=>this.getConstrained(r,s)}),this._globeness=1,this._mercatorTransform=new mu,this._verticalPerspectiveTransform=new Tl}clone(){let r=new ah;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){let s=this._mercatorTransform.getProjectionData(r),d=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:s.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:s.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return a.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,s,d){let f=this._mercatorTransform.getPitchedTextCorrection(r,s,d),v=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,s,d);return a.bc(f,v,this._globeness)}projectTileCoordinates(r,s,d,f){return this.currentTransform.projectTileCoordinates(r,s,d,f)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,s){return this.currentTransform.lngLatToCameraDepth(r,s)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,s){return this.currentTransform.getConstrained(r,s)}calculateCenterFromCameraLngLatAlt(r,s,d,f){return this._helper.calculateCenterFromCameraLngLatAlt(r,s,d,f)}setLocationAtPoint(r,s){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,s),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,s),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,s){return this.currentTransform.locationToScreenPoint(r,s)}screenPointToMercatorCoordinate(r,s){return this.currentTransform.screenPointToMercatorCoordinate(r,s)}screenPointToLocation(r,s){return this.currentTransform.screenPointToLocation(r,s)}isPointOnMapSurface(r,s){return this.currentTransform.isPointOnMapSurface(r,s)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,s){return this.currentTransform.getMatrixForModel(r,s)}getProjectionDataForCustomLayer(r=!0){let s=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return s;let d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return d.fallbackMatrix=s.mainMatrix,d}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class Ea{get useGlobeControls(){return!0}handlePanInertia(r,s){let d=zd(r,s);return Math.abs(d.lng-s.center.lng)>180&&(d.lng=s.center.lng+179.5*Math.sign(d.lng-s.center.lng)),{easingCenter:d,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,s){let d=r.around,f=s.screenPointToLocation(d);r.bearingDelta&&s.setBearing(s.bearing+r.bearingDelta),r.pitchDelta&&s.setPitch(s.pitch+r.pitchDelta),r.rollDelta&&s.setRoll(s.roll+r.rollDelta);let v=s.zoom;r.zoomDelta&&s.setZoom(s.zoom+r.zoomDelta);let b=s.zoom-v;if(b===0)return;let T=a.bq(s.center.lng,f.lng),q=T/(Math.abs(T/180)+1),C=a.bq(s.center.lat,f.lat),k=s.getRayDirectionFromPixel(d),F=s.cameraPosition,L=-1*a.aV(F,k),V=a.bh();a.aP(V,F,[k[0]*L,k[1]*L,k[2]*L]);let $=a.bo(V)-1,ie=Math.exp(.5*-Math.max($-.3,0)),re=Sl(s.worldSize,s.center.lat)/Math.min(s.width,s.height),ne=a.bf(re,.9,.5,1,.25),se=(1-a.ac(-b))*Math.min(ie,ne),de=s.center.lat,he=s.zoom,fe=new a.Q(s.center.lng+q*se,a.ae(s.center.lat+C*se,-85.051129,a.af));s.setLocationAtPoint(f,d);let _e=s.center,pe=a.bf(Math.abs(T),45,85,0,1),qe=a.bf(re,.75,.35,0,1),ze=Math.pow(Math.max(pe,qe),.25),Oe=a.bq(_e.lng,fe.lng),ke=a.bq(_e.lat,fe.lat);s.setCenter(new a.Q(_e.lng+Oe*ze,_e.lat+ke*ze).wrap()),s.setZoom(he+Di(de,s.center.lat))}handleMapControlsPan(r,s,d){if(!r.panDelta)return;let f=s.center.lat,v=s.zoom;s.setCenter(zd(r.panDelta,s).wrap()),s.setZoom(v+Di(f,s.center.lat))}cameraForBoxAndBearing(r,s,d,f,v){let b=Wn(r,s,d,f,v),T=s.left/v.width*2-1,q=(v.width-s.right)/v.width*2-1,C=s.top/v.height*-2+1,k=(v.height-s.bottom)/v.height*-2+1,F=a.bq(d.getWest(),d.getEast())<0,L=F?d.getEast():d.getWest(),V=F?d.getWest():d.getEast(),$=Math.max(d.getNorth(),d.getSouth()),ie=Math.min(d.getNorth(),d.getSouth()),re=L+.5*a.bq(L,V),ne=$+.5*a.bq($,ie),se=v.clone();se.setCenter(b.center),se.setBearing(b.bearing),se.setPitch(0),se.setRoll(0),se.setZoom(b.zoom);let de=se.modelViewProjectionMatrix,he=[ki(d.getNorthWest()),ki(d.getNorthEast()),ki(d.getSouthWest()),ki(d.getSouthEast()),ki(new a.Q(V,ne)),ki(new a.Q(L,ne)),ki(new a.Q(re,$)),ki(new a.Q(re,ie))],fe=ki(b.center),_e=Number.POSITIVE_INFINITY;for(let pe of he)T<0&&(_e=Ea.getLesserNonNegativeNonNull(_e,Ea.solveVectorScale(pe,fe,de,"x",T))),q>0&&(_e=Ea.getLesserNonNegativeNonNull(_e,Ea.solveVectorScale(pe,fe,de,"x",q))),C>0&&(_e=Ea.getLesserNonNegativeNonNull(_e,Ea.solveVectorScale(pe,fe,de,"y",C))),k<0&&(_e=Ea.getLesserNonNegativeNonNull(_e,Ea.solveVectorScale(pe,fe,de,"y",k)));if(Number.isFinite(_e)&&_e!==0)return b.zoom=se.zoom+a.ah(_e),b;Sn()}handleJumpToCenterZoom(r,s){let d=r.center.lat,f=r.getConstrained(s.center?a.Q.convert(s.center):r.center,r.zoom).center;r.setCenter(f.wrap());let v=s.zoom!==void 0?+s.zoom:r.zoom+Di(d,f.lat);r.zoom!==v&&r.setZoom(v)}handleEaseTo(r,s){let d=r.zoom,f=r.center,v=r.padding,b={roll:r.roll,pitch:r.pitch,bearing:r.bearing},T={roll:s.roll===void 0?r.roll:s.roll,pitch:s.pitch===void 0?r.pitch:s.pitch,bearing:s.bearing===void 0?r.bearing:s.bearing},q=s.zoom!==void 0,C=!r.isPaddingEqual(s.padding),k=!1,F=s.center?a.Q.convert(s.center):f,L=r.getConstrained(F,d).center;pu(r,L);let V=r.clone();V.setCenter(L),V.setZoom(q?+s.zoom:d+Di(f.lat,F.lat)),V.setBearing(s.bearing);let $=new a.P(a.ae(r.centerPoint.x+s.offsetAsPoint.x,0,r.width),a.ae(r.centerPoint.y+s.offsetAsPoint.y,0,r.height));V.setLocationAtPoint(L,$);let ie=(s.offset&&s.offsetAsPoint.mag())>0?V.center:L,re=q?+s.zoom:d+Di(f.lat,ie.lat),ne=d+Di(f.lat,0),se=re+Di(ie.lat,0),de=a.bq(f.lng,ie.lng),he=a.bq(f.lat,ie.lat),fe=a.ac(se-ne);return k=re!==d,{easeFunc:_e=>{if(a.b6(b,T)||oa({startEulerAngles:b,endEulerAngles:T,tr:r,k:_e,useSlerp:b.roll!=T.roll}),C&&r.interpolatePadding(v,s.padding,_e),s.around)a.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(s.around,s.aroundPoint);else{let pe=se>ne?Math.min(2,fe):Math.max(.5,fe),qe=Math.pow(pe,1-_e),ze=V0(f,de,he,_e*qe);r.setCenter(ze.wrap())}if(k){let pe=a.B.number(ne,se,_e)+Di(0,r.center.lat);r.setZoom(pe)}},isZooming:k,elevationCenter:ie}}handleFlyTo(r,s){let d=s.zoom!==void 0,f=r.center,v=r.zoom,b=r.padding,T=!r.isPaddingEqual(s.padding),q=r.getConstrained(a.Q.convert(s.center||s.locationAtOffset),v).center,C=d?+s.zoom:r.zoom+Di(r.center.lat,q.lat),k=r.clone();k.setCenter(q),k.setZoom(C),k.setBearing(s.bearing);let F=new a.P(a.ae(r.centerPoint.x+s.offsetAsPoint.x,0,r.width),a.ae(r.centerPoint.y+s.offsetAsPoint.y,0,r.height));k.setLocationAtPoint(q,F);let L=k.center;pu(r,L);let V=function(he,fe,_e){let pe=ki(fe),qe=ki(_e),ze=a.aV(pe,qe),Oe=Math.acos(ze),ke=rh(he);return Oe/(2*Math.PI)*ke}(r,f,L),$=v+Di(f.lat,0),ie=C+Di(L.lat,0),re=a.ac(ie-$),ne;if(typeof s.minZoom=="number"){let he=+s.minZoom+Di(L.lat,0),fe=Math.min(he,$,ie)+Di(0,L.lat),_e=r.getConstrained(L,fe).zoom+Di(L.lat,0);ne=a.ac(_e-$)}let se=a.bq(f.lng,L.lng),de=a.bq(f.lat,L.lat);return{easeFunc:(he,fe,_e,pe)=>{let qe=V0(f,se,de,_e);T&&r.interpolatePadding(b,s.padding,he);let ze=he===1?L:qe;r.setCenter(ze.wrap());let Oe=$+a.ah(fe);r.setZoom(he===1?C:Oe+Di(0,ze.lat))},scaleOfZoom:re,targetCenter:L,scaleOfMinZoom:ne,pixelPathLength:V}}static solveVectorScale(r,s,d,f,v){let b=f==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],T=[d[3],d[7],d[11],d[15]],q=r[0]*b[0]+r[1]*b[1]+r[2]*b[2],C=r[0]*T[0]+r[1]*T[1]+r[2]*T[2],k=s[0]*b[0]+s[1]*b[1]+s[2]*b[2],F=s[0]*T[0]+s[1]*T[1]+s[2]*T[2];return k+v*C===q+v*F||T[3]*(q-k)+b[3]*(F-C)+q*F==k*C?null:(k+b[3]-v*F-v*T[3])/(k-q-v*F+v*C)}static getLesserNonNegativeNonNull(r,s){return s!==null&&s>=0&&s<r?s:r}}class El{constructor(r){this._globe=r,this._mercatorCameraHelper=new Qc,this._verticalPerspectiveCameraHelper=new Ea}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,s){return this.currentHelper.handlePanInertia(r,s)}handleMapControlsRollPitchBearingZoom(r,s){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,s)}handleMapControlsPan(r,s,d){this.currentHelper.handleMapControlsPan(r,s,d)}cameraForBoxAndBearing(r,s,d,f,v){return this.currentHelper.cameraForBoxAndBearing(r,s,d,f,v)}handleJumpToCenterZoom(r,s){this.currentHelper.handleJumpToCenterZoom(r,s)}handleEaseTo(r,s){return this.currentHelper.handleEaseTo(r,s)}handleFlyTo(r,s){return this.currentHelper.handleFlyTo(r,s)}}let Bd=(m,r)=>a.x(m,r&&r.filter(s=>s.identifier!=="source.canvas")),OA=a.bw();class Ym extends a.E{constructor(r,s={}){super(),this._rtlPluginLoaded=()=>{for(let d in this.sourceCaches){let f=this.sourceCaches[d].getSource().type;f!=="vector"&&f!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new an(fo(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,f)=>this.getGlyphs(d,f)),this.dispatcher.registerMessageHandler("GI",(d,f)=>this.getImages(d,f)),this.imageManager=new xt,this.imageManager.setEventedParent(this),this.glyphManager=new wt(r._requestManager,s.localIdeographFontFamily),this.lineAtlas=new Si(256,512),this.crossTileSymbolIndex=new Xc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.by()),st().on(Re,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;let f=this.sourceCaches[d.sourceId];if(!f)return;let v=f.getSource();if(v&&v.vectorLayerIds)for(let b in this._layers){let T=this._layers[b];T.source===v.id&&this._validateLayer(T)}})}loadURL(r,s={},d){this.fire(new a.l("dataloading",{dataType:"style"})),s.validate=typeof s.validate!="boolean"||s.validate;let f=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;let v=this._loadStyleRequest;a.j(f,this._loadStyleRequest).then(b=>{this._loadStyleRequest=null,this._load(b.data,s,d)}).catch(b=>{this._loadStyleRequest=null,b&&!v.signal.aborted&&this.fire(new a.k(b))})}loadJSON(r,s={},d){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,M.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,s.validate=s.validate!==!1,this._load(r,s,d)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(OA,{validate:!1})}_load(r,s,d){var f,v;let b=s.transformStyle?s.transformStyle(d,r):r;if(!s.validate||!Bd(this,a.y(b))){this._loaded=!0,this.stylesheet=b;for(let T in b.sources)this.addSource(T,b.sources[T],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Kr(this.stylesheet.light),this._setProjectionInternal(((f=this.stylesheet.projection)===null||f===void 0?void 0:f.type)||"mercator"),this.sky=new Dr(this.stylesheet.sky),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){let r=a.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(s=>s.id),this._layers={},this._serializedLayers=null;for(let s of r){let d=a.bA(s);d.setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=d}}_loadSprite(r,s=!1,d=void 0){let f;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,b,T,q){return a._(this,void 0,void 0,function*(){let C=Te(v),k=T>1?"@2x":"",F={},L={};for(let{id:V,url:$}of C){let ie=b.transformRequest(Je($,k,".json"),"SpriteJSON");F[V]=a.j(ie,q);let re=b.transformRequest(Je($,k,".png"),"SpriteImage");L[V]=ee.getImage(re,q)}return yield Promise.all([...Object.values(F),...Object.values(L)]),function(V,$){return a._(this,void 0,void 0,function*(){let ie={};for(let re in V){ie[re]={};let ne=M.getImageCanvasContext((yield $[re]).data),se=(yield V[re]).data;for(let de in se){let{width:he,height:fe,x:_e,y:pe,sdf:qe,pixelRatio:ze,stretchX:Oe,stretchY:ke,content:De,textFitWidth:Qe,textFitHeight:Ye}=se[de];ie[re][de]={data:null,pixelRatio:ze,sdf:qe,stretchX:Oe,stretchY:ke,content:De,textFitWidth:Qe,textFitHeight:Ye,spriteData:{width:he,height:fe,x:_e,y:pe,context:ne}}}}return ie})}(F,L)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(let b in v){this._spritesImagesIds[b]=[];let T=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter(q=>!(q in v)):[];for(let q of T)this.imageManager.removeImage(q),this._changedImages[q]=!0;for(let q in v[b]){let C=b==="default"?q:`${b}:${q}`;this._spritesImagesIds[b].push(C),C in this.imageManager.images?this.imageManager.updateImage(C,v[b][q],!1):this.imageManager.addImage(C,v[b][q]),s&&(this._changedImages[C]=!0)}}}).catch(v=>{this._spriteRequest=null,f=v,this.fire(new a.k(f))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),s&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),d&&d(f)})}_unloadSprite(){for(let r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(r){let s=this.sourceCaches[r.source];if(!s)return;let d=r.sourceLayer;if(!d)return;let f=s.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(d)===-1)&&this.fire(new a.k(new Error(`Source layer "${d}" does not exist on source "${f.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,s=!1){let d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(s?a.bB(d):d);let f=[];for(let v of r)if(d[v]){let b=s?a.bB(d[v]):d[v];f.push(b)}return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};let s=Object.keys(this._layers);for(let d of s){let f=this._layers[d];f.type!=="custom"&&(r[d]=f.serialize())}return r}hasTransitions(){var r,s,d;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((s=this.sky)===null||s===void 0)&&s.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(let f in this.sourceCaches)if(this.sourceCaches[f].hasTransition())return!0;for(let f in this._layers)if(this._layers[f].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;let s=this._changed;if(s){let f=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(f.length||v.length)&&this._updateWorkerLayers(f,v);for(let b in this._updatedSources){let T=this._updatedSources[b];if(T==="reload")this._reloadSource(b);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let b in this._updatedPaintProps)this._layers[b].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}let d={};for(let f in this.sourceCaches){let v=this.sourceCaches[f];d[f]=v.used,v.used=!1}for(let f of this._order){let v=this._layers[f];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(let f in d){let v=this.sourceCaches[f];!!d[f]!=!!v.used&&v.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,s&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let r=Object.keys(this._changedImages);if(r.length){for(let s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,s){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,s={}){var d;this._checkLoaded();let f=this.serialize();if(r=s.transformStyle?s.transformStyle(f,r):r,((d=s.validate)===null||d===void 0||d)&&Bd(this,a.y(r)))return!1;(r=a.bB(r)).layers=a.bz(r.layers);let v=a.bC(f,r),b=this._getOperationsToPerform(v);if(b.unimplemented.length>0)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(let T of b.operations)T();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){let s=[],d=[];for(let f of r)switch(f.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":s.push(()=>this.addLayer.apply(this,f.args));break;case"removeLayer":s.push(()=>this.removeLayer.apply(this,f.args));break;case"setPaintProperty":s.push(()=>this.setPaintProperty.apply(this,f.args));break;case"setLayoutProperty":s.push(()=>this.setLayoutProperty.apply(this,f.args));break;case"setFilter":s.push(()=>this.setFilter.apply(this,f.args));break;case"addSource":s.push(()=>this.addSource.apply(this,f.args));break;case"removeSource":s.push(()=>this.removeSource.apply(this,f.args));break;case"setLayerZoomRange":s.push(()=>this.setLayerZoomRange.apply(this,f.args));break;case"setLight":s.push(()=>this.setLight.apply(this,f.args));break;case"setGeoJSONSourceData":s.push(()=>this.setGeoJSONSourceData.apply(this,f.args));break;case"setGlyphs":s.push(()=>this.setGlyphs.apply(this,f.args));break;case"setSprite":s.push(()=>this.setSprite.apply(this,f.args));break;case"setTerrain":s.push(()=>this.map.setTerrain.apply(this,f.args));break;case"setSky":s.push(()=>this.setSky.apply(this,f.args));break;case"setProjection":this.setProjection.apply(this,f.args);break;case"setTransition":s.push(()=>{});break;default:d.push(f.command)}return{operations:s,unimplemented:d}}addImage(r,s){if(this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,s),this._afterImageUpdated(r)}updateImage(r,s){this.imageManager.updateImage(r,s)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,s,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(a.y.source,`sources.${r}`,s,null,d))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);let f=this.sourceCaches[r]=new Ae(r,s,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:f.loaded(),source:f.serialize(),sourceId:r})),f.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(let d in this._layers)if(this._layers[d].source===r)return this.fire(new a.k(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));let s=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],s.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,s){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);let d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(s),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,s,d={}){this._checkLoaded();let f=r.id;if(this.getLayer(f))return void this.fire(new a.k(new Error(`Layer "${f}" already exists on this map.`)));let v;if(r.type==="custom"){if(Bd(this,a.bD(r)))return;v=a.bA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(f,r.source),r=a.bB(r),r=a.e(r,{source:f})),this._validate(a.y.layer,`layers.${f}`,r,{arrayIndex:-1},d))return;v=a.bA(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:f}})}let b=s?this._order.indexOf(s):this._order.length;if(s&&b===-1)this.fire(new a.k(new Error(`Cannot add layer "${f}" before non-existing layer "${s}".`)));else{if(this._order.splice(b,0,f),this._layerOrderChanged=!0,this._layers[f]=v,this._removedLayers[f]&&v.source&&v.type!=="custom"){let T=this._removedLayers[f];delete this._removedLayers[f],T.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,s){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new a.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===s)return;let d=this._order.indexOf(r);this._order.splice(d,1);let f=s?this._order.indexOf(s):this._order.length;s&&f===-1?this.fire(new a.k(new Error(`Cannot move layer "${r}" before non-existing layer "${s}".`))):(this._order.splice(f,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();let s=this._layers[r];if(!s)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${r}".`)));s.setEventedParent(null);let d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=s,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],s.onRemove&&s.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,s,d){this._checkLoaded();let f=this.getLayer(r);f?f.minzoom===s&&f.maxzoom===d||(s!=null&&(f.minzoom=s),d!=null&&(f.maxzoom=d),this._updateLayer(f)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,s,d={}){this._checkLoaded();let f=this.getLayer(r);if(f){if(!a.bE(f.filter,s))return s==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(a.y.filter,`layers.${f.id}.filter`,s,null,d)||(f.filter=a.bB(s),this._updateLayer(f)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return a.bB(this.getLayer(r).filter)}setLayoutProperty(r,s,d,f={}){this._checkLoaded();let v=this.getLayer(r);v?a.bE(v.getLayoutProperty(s),d)||(v.setLayoutProperty(s,d,f),this._updateLayer(v)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,s){let d=this.getLayer(r);if(d)return d.getLayoutProperty(s);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,s,d,f={}){this._checkLoaded();let v=this.getLayer(r);v?a.bE(v.getPaintProperty(s),d)||(v.setPaintProperty(s,d,f)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,s){return this.getLayer(r).getPaintProperty(s)}setFeatureState(r,s){this._checkLoaded();let d=r.source,f=r.sourceLayer,v=this.sourceCaches[d];if(v===void 0)return void this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)));let b=v.getSource().type;b==="geojson"&&f?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||f?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),v.setFeatureState(f,r.id,s)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,s){this._checkLoaded();let d=r.source,f=this.sourceCaches[d];if(f===void 0)return void this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)));let v=f.getSource().type,b=v==="vector"?r.sourceLayer:void 0;v!=="vector"||b?s&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(b,r.id,s):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();let s=r.source,d=r.sourceLayer,f=this.sourceCaches[s];if(f!==void 0)return f.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),f.getFeatureState(d,r.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let r=a.bF(this.sourceCaches,v=>v.serialize()),s=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,f=this.stylesheet;return a.bG({version:f.version,name:f.name,metadata:f.metadata,light:f.light,sky:f.sky,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,projection:f.projection,sources:r,layers:s,terrain:d},v=>v!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){let s=b=>this._layers[b].type==="fill-extrusion",d={},f=[];for(let b=this._order.length-1;b>=0;b--){let T=this._order[b];if(s(T)){d[T]=b;for(let q of r){let C=q[T];if(C)for(let k of C)f.push(k)}}}f.sort((b,T)=>T.intersectionZ-b.intersectionZ);let v=[];for(let b=this._order.length-1;b>=0;b--){let T=this._order[b];if(s(T))for(let q=f.length-1;q>=0;q--){let C=f[q].feature;if(d[C.layer.id]<b)break;v.push(C),f.pop()}else for(let q of r){let C=q[T];if(C)for(let k of C)v.push(k.feature)}}return v}queryRenderedFeatures(r,s,d){s&&s.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",s.filter,null,s);let f={};if(s&&s.layers){if(!(Array.isArray(s.layers)||s.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let C of s.layers){let k=this._layers[C];if(!k)return this.fire(new a.k(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];f[k.source]=!0}}let v=[];s.availableImages=this._availableImages;let b=this._serializedAllLayers(),T=s.layers instanceof Set?s.layers:Array.isArray(s.layers)?new Set(s.layers):null,q=Object.assign(Object.assign({},s),{layers:T});for(let C in this.sourceCaches)s.layers&&!f[C]||v.push(ml(this.sourceCaches[C],this._layers,b,r,q,d,this.map.terrain?(k,F,L)=>this.map.terrain.getElevation(k,F,L):void 0));return this.placement&&v.push(function(C,k,F,L,V,$,ie){let re={},ne=$.queryRenderedSymbols(L),se=[];for(let de of Object.keys(ne).map(Number))se.push(ie[de]);se.sort(Wi);for(let de of se){let he=de.featureIndex.lookupSymbolFeatures(ne[de.bucketInstanceId],k,de.bucketIndex,de.sourceLayerIndex,V.filter,V.layers,V.availableImages,C);for(let fe in he){let _e=re[fe]=re[fe]||[],pe=he[fe];pe.sort((qe,ze)=>{let Oe=de.featureSortOrder;if(Oe){let ke=Oe.indexOf(qe.featureIndex);return Oe.indexOf(ze.featureIndex)-ke}return ze.featureIndex-qe.featureIndex});for(let qe of pe)_e.push(qe)}}return function(de,he,fe){for(let _e in de)for(let pe of de[_e])on(pe,fe[he[_e].source]);return de}(re,C,F)}(this._layers,b,this.sourceCaches,r,q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,s){s&&s.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",s.filter,null,s);let d=this.sourceCaches[r];return d?function(f,v){let b=f.getRenderableIds().map(C=>f.getTileByID(C)),T=[],q={};for(let C=0;C<b.length;C++){let k=b[C],F=k.tileID.canonical.key;q[F]||(q[F]=!0,k.querySourceFeatures(T,v))}return T}(d,s):[]}getLight(){return this.light.getLight()}setLight(r,s={}){this._checkLoaded();let d=this.light.getLight(),f=!1;for(let b in r)if(!a.bE(r[b],d[b])){f=!0;break}if(!f)return;let v={now:M.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,s),this.light.updateTransitions(v)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,s={}){this._checkLoaded();let d=this.getSky(),f=!1;if(!r&&!d)return;if(r&&!d)f=!0;else if(!r&&d)f=!0;else for(let b in r)if(!a.bE(r[b],d[b])){f=!0;break}if(!f)return;let v={now:M.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,s),this.sky.updateTransitions(v)}_setProjectionInternal(r){let s=function(d){if(Array.isArray(d)){let f=new Fd({type:d});return{projection:f,transform:new ah,cameraHelper:new El(f)}}switch(d){case"mercator":return{projection:new Jc,transform:new mu,cameraHelper:new Qc};case"globe":{let f=new Fd({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:f,transform:new ah,cameraHelper:new El(f)}}case"vertical-perspective":return{projection:new th,transform:new Tl,cameraHelper:new Ea};default:return a.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new Jc,transform:new mu,cameraHelper:new Qc}}}(r);this.projection=s.projection,this.map.migrateProjection(s.transform,s.cameraHelper);for(let d in this.sourceCaches)this.sourceCaches[d].reload()}_validate(r,s,d,f,v={}){return(!v||v.validate!==!1)&&Bd(this,r.call(a.y,a.e({key:s,style:this.serialize(),value:d,styleSpec:a.v},f)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),st().off(Re,this._rtlPluginLoaded);for(let s in this._layers)this._layers[s].setEventedParent(null);for(let s in this.sourceCaches){let d=this.sourceCaches[s];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(let s in this.sourceCaches)this.sourceCaches[s].update(r,this.map.terrain)}_generateCollisionBoxes(){for(let r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,s,d,f,v=!1){let b=!1,T=!1,q={};for(let C of this._order){let k=this._layers[C];if(k.type!=="symbol")continue;if(!q[k.source]){let L=this.sourceCaches[k.source];q[k.source]=L.getRenderableIds(!0).map(V=>L.getTileByID(V)).sort((V,$)=>$.tileID.overscaledZ-V.tileID.overscaledZ||(V.tileID.isLessThan($.tileID)?-1:1))}let F=this.crossTileSymbolIndex.addLayer(k,q[k.source],r.center.lng);b=b||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(M.now(),r.zoom))&&(this.pauseablePlacement=new U0(r,this.map.terrain,this._order,v,s,d,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(M.now()),T=!0),b&&this.pauseablePlacement.placement.setStale()),T||b)for(let C of this._order){let k=this._layers[C];k.type==="symbol"&&this.placement.updateLayerOpacities(k,q[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(M.now())}_releaseSymbolFadeTiles(){for(let r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,s){return a._(this,void 0,void 0,function*(){let d=yield this.imageManager.getImages(s.icons);this._updateTilesForChangedImages();let f=this.sourceCaches[s.source];return f&&f.setDependencies(s.tileID.key,s.type,s.icons),d})}getGlyphs(r,s){return a._(this,void 0,void 0,function*(){let d=yield this.glyphManager.getGlyphs(s.stacks),f=this.sourceCaches[s.source];return f&&f.setDependencies(s.tileID.key,s.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,s={}){this._checkLoaded(),r&&this._validate(a.y.glyphs,"glyphs",r,null,s)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,s,d={},f){this._checkLoaded();let v=[{id:r,url:s}],b=[...Te(this.stylesheet.sprite),...v];this._validate(a.y.sprite,"sprite",b,null,d)||(this.stylesheet.sprite=b,this._loadSprite(v,!0,f))}removeSprite(r){this._checkLoaded();let s=Te(this.stylesheet.sprite);if(s.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(let d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;s.splice(s.findIndex(d=>d.id===r),1),this.stylesheet.sprite=s.length>0?s:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Te(this.stylesheet.sprite)}setSprite(r,s={},d){this._checkLoaded(),r&&this._validate(a.y.sprite,"sprite",r,null,s)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var kA=a.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class DA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,s,d,f,v,b,T,q,C){this.context=r;let k=this.boundPaintVertexBuffers.length!==f.length;for(let F=0;!k&&F<f.length;F++)this.boundPaintVertexBuffers[F]!==f[F]&&(k=!0);!this.vao||this.boundProgram!==s||this.boundLayoutVertexBuffer!==d||k||this.boundIndexBuffer!==v||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==q||this.boundDynamicVertexBuffer3!==C?this.freshBind(s,d,f,v,b,T,q,C):(r.bindVertexArray.set(this.vao),T&&T.bind(),v&&v.dynamicDraw&&v.bind(),q&&q.bind(),C&&C.bind())}freshBind(r,s,d,f,v,b,T,q){let C=r.numAttributes,k=this.context,F=k.gl;this.vao&&this.destroy(),this.vao=k.createVertexArray(),k.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=f,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=q,s.enableAttributes(F,r);for(let L of d)L.enableAttributes(F,r);b&&b.enableAttributes(F,r),T&&T.enableAttributes(F,r),q&&q.enableAttributes(F,r),s.bind(),s.setVertexAttribPointers(F,r,v);for(let L of d)L.bind(),L.setVertexAttribPointers(F,r,v);b&&(b.bind(),b.setVertexAttribPointers(F,r,v)),f&&f.bind(),T&&(T.bind(),T.setVertexAttribPointers(F,r,v)),q&&(q.bind(),q.setVertexAttribPointers(F,r,v)),k.currentNumAttributes=C}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let LA=(m,r,s,d,f)=>({u_texture:0,u_ele_delta:m,u_fog_matrix:r,u_fog_color:s?s.properties.get("fog-color"):a.b7.white,u_fog_ground_blend:s?s.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?0:s?s.calculateFogBlendOpacity(d):0,u_horizon_color:s?s.properties.get("horizon-color"):a.b7.white,u_horizon_fog_blend:s?s.properties.get("horizon-fog-blend"):1,u_is_globe_mode:f?1:0}),jd={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function yu(m){let r=[];for(let s=0;s<m.length;s++){if(m[s]===null)continue;let d=m[s].split(" ");r.push(d.pop())}return r}class Ud{constructor(r,s,d,f,v,b,T,q,C=[]){let k=r.gl;this.program=k.createProgram();let F=yu(s.staticAttributes),L=d?d.getBinderAttributes():[],V=F.concat(L),$=bn.prelude.staticUniforms?yu(bn.prelude.staticUniforms):[],ie=T.staticUniforms?yu(T.staticUniforms):[],re=s.staticUniforms?yu(s.staticUniforms):[],ne=d?d.getBinderUniforms():[],se=$.concat(ie).concat(re).concat(ne),de=[];for(let Oe of se)de.indexOf(Oe)<0&&de.push(Oe);let he=d?d.defines():[];sn(k)&&he.unshift("#version 300 es"),v&&he.push("#define OVERDRAW_INSPECTOR;"),b&&he.push("#define TERRAIN3D;"),q&&he.push(q),C&&he.push(...C);let fe=he.concat(bn.prelude.fragmentSource,T.fragmentSource,s.fragmentSource).join(`
`),_e=he.concat(bn.prelude.vertexSource,T.vertexSource,s.vertexSource).join(`
`);sn(k)||(fe=function(Oe){return Oe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(fe),_e=function(Oe){return Oe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(_e));let pe=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(pe,fe),k.compileShader(pe),!k.getShaderParameter(pe,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(pe)}`);k.attachShader(this.program,pe);let qe=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(qe,_e),k.compileShader(qe),!k.getShaderParameter(qe,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(qe)}`);k.attachShader(this.program,qe),this.attributes={};let ze={};this.numAttributes=V.length;for(let Oe=0;Oe<this.numAttributes;Oe++)V[Oe]&&(k.bindAttribLocation(this.program,Oe,V[Oe]),this.attributes[V[Oe]]=Oe);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(qe),k.deleteShader(pe);for(let Oe=0;Oe<de.length;Oe++){let ke=de[Oe];if(ke&&!ze[ke]){let De=k.getUniformLocation(this.program,ke);De&&(ze[ke]=De)}}this.fixedUniforms=f(r,ze),this.terrainUniforms=((Oe,ke)=>({u_depth:new a.bH(Oe,ke.u_depth),u_terrain:new a.bH(Oe,ke.u_terrain),u_terrain_dim:new a.b8(Oe,ke.u_terrain_dim),u_terrain_matrix:new a.bJ(Oe,ke.u_terrain_matrix),u_terrain_unpack:new a.bK(Oe,ke.u_terrain_unpack),u_terrain_exaggeration:new a.b8(Oe,ke.u_terrain_exaggeration)}))(r,ze),this.projectionUniforms=((Oe,ke)=>({u_projection_matrix:new a.bJ(Oe,ke.u_projection_matrix),u_projection_tile_mercator_coords:new a.bK(Oe,ke.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bK(Oe,ke.u_projection_clipping_plane),u_projection_transition:new a.b8(Oe,ke.u_projection_transition),u_projection_fallback_matrix:new a.bJ(Oe,ke.u_projection_fallback_matrix)}))(r,ze),this.binderUniforms=d?d.getUniforms(r,ze):[]}draw(r,s,d,f,v,b,T,q,C,k,F,L,V,$,ie,re,ne,se,de){let he=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(f),r.setColorMode(v),r.setCullFace(b),q){r.activeTexture.set(he.TEXTURE2),he.bindTexture(he.TEXTURE_2D,q.depthTexture),r.activeTexture.set(he.TEXTURE3),he.bindTexture(he.TEXTURE_2D,q.texture);for(let _e in this.terrainUniforms)this.terrainUniforms[_e].set(q[_e])}if(C)for(let _e in C)this.projectionUniforms[jd[_e]].set(C[_e]);if(T)for(let _e in this.fixedUniforms)this.fixedUniforms[_e].set(T[_e]);re&&re.setUniforms(r,this.binderUniforms,$,{zoom:ie});let fe=0;switch(s){case he.LINES:fe=2;break;case he.TRIANGLES:fe=3;break;case he.LINE_STRIP:fe=1}for(let _e of V.get()){let pe=_e.vaos||(_e.vaos={});(pe[k]||(pe[k]=new DA)).bind(r,this,F,re?re.getPaintVertexBuffers():[],L,_e.vertexOffset,ne,se,de),he.drawElements(s,_e.primitiveLength*fe,he.UNSIGNED_SHORT,_e.primitiveOffset*fe*2)}}}function Vd(m,r,s){let d=1/a.az(s,1,r.transform.tileZoom),f=Math.pow(2,s.tileID.overscaledZ),v=s.tileSize*Math.pow(2,r.transform.tileZoom)/f,b=v*(s.tileID.canonical.x+s.tileID.wrap*f),T=v*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[d,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}let $d=(m,r,s,d)=>{let f=m.style.light,v=f.properties.get("position"),b=[v.x,v.y,v.z],T=a.bN();f.properties.get("anchor")==="viewport"&&a.bO(T,m.transform.bearingInRadians),a.bP(b,b,T);let q=m.transform.transformLightDirection(b),C=f.properties.get("color");return{u_lightpos:b,u_lightpos_globe:q,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+r,u_opacity:s,u_fill_translate:d}},go=(m,r,s,d,f,v,b)=>a.e($d(m,r,s,d),Vd(v,m,b),{u_height_factor:-Math.pow(2,f.overscaledZ)/b.tileSize/8}),$0=(m,r,s,d)=>a.e(Vd(r,m,s),{u_fill_translate:d}),Qm=(m,r)=>({u_world:m,u_fill_translate:r}),oh=(m,r,s,d,f)=>a.e($0(m,r,s,f),{u_world:d}),sh=(m,r,s,d,f)=>{let v=m.transform,b,T,q=0;if(s.paint.get("circle-pitch-alignment")==="map"){let C=a.az(r,1,v.zoom);b=!0,T=[C,C],q=C/(a.Z*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*f}else b=!1,T=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(s.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+b,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:T,u_globe_extrude_scale:q,u_translate:d}},FA=m=>({u_pixel_extrude_scale:[1/m.width,1/m.height]}),Wd=m=>({u_viewport_size:[m.width,m.height]}),W0=(m,r=1)=>({u_color:m,u_overlay:0,u_overlay_scale:r}),Al=(m,r,s,d)=>{let f=a.az(m,1,r)/(a.Z*Math.pow(2,m.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:a.az(m,1,r),u_intensity:s,u_globe_extrude_scale:f}},G0=(m,r,s,d)=>{let f=a.K();a.bQ(f,0,m.width,m.height,0,0,1);let v=m.context.gl;return{u_matrix:f,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:s,u_color_ramp:d,u_opacity:r.paint.get("heatmap-opacity")}},Z0=(m,r,s)=>{let d=s.paint.get("hillshade-accent-color"),f;switch(s.paint.get("hillshade-method")){case"basic":f=4;break;case"combined":f=1;break;case"igor":f=2;break;case"multidirectional":f=3;break;default:f=0}let v=s.getIlluminationProperties();for(let b=0;b<v.directionRadians.length;b++)s.paint.get("hillshade-illumination-anchor")==="viewport"&&(v.directionRadians[b]+=m.transform.bearingInRadians);return{u_image:0,u_latrange:K0(0,r.tileID),u_exaggeration:s.paint.get("hillshade-exaggeration"),u_altitudes:v.altitudeRadians,u_azimuths:v.directionRadians,u_accent:d,u_method:f,u_highlights:v.highlightColor,u_shadows:v.shadowColor}},zA=(m,r)=>{let s=r.stride,d=a.K();return a.bQ(d,0,a.Z,-8192,0,0,1),a.L(d,d,[0,-8192,0]),{u_matrix:d,u_image:1,u_dimension:[s,s],u_zoom:m.overscaledZ,u_unpack:r.getUnpackVector()}};function K0(m,r){let s=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new a.$(0,d/s).toLngLat().lat,new a.$(0,(d+1)/s).toLngLat().lat]}let lh=(m,r,s,d)=>{let f=m.transform;return{u_translation:Is(m,r,s),u_ratio:d/a.az(r,1,f.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},H0=(m,r,s,d,f)=>a.e(lh(m,r,s,d),{u_image:0,u_image_height:f}),X0=(m,r,s,d,f)=>{let v=m.transform,b=ev(r,v);return{u_translation:Is(m,r,s),u_texsize:r.imageAtlasTexture.size,u_ratio:d/a.az(r,1,v.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[b,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},J0=(m,r,s,d,f,v)=>{let b=m.lineAtlas,T=ev(r,m.transform),q=s.layout.get("line-cap")==="round",C=b.getDash(f.from,q),k=b.getDash(f.to,q),F=C.width*v.fromScale,L=k.width*v.toScale;return a.e(lh(m,r,s,d),{u_patternscale_a:[T/F,-C.height/2],u_patternscale_b:[T/L,-k.height/2],u_sdfgamma:b.width/(256*Math.min(F,L)*m.pixelRatio)/2,u_image:0,u_tex_y_a:C.y,u_tex_y_b:k.y,u_mix:v.t})};function ev(m,r){return 1/a.az(m,1,r.tileZoom)}function Is(m,r,s){return a.aA(m.transform,r,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}let Y0=(m,r,s,d,f)=>{return{u_tl_parent:m,u_scale_parent:r,u_buffer_scale:1,u_fade_t:s.mix,u_opacity:s.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(b=d.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(v=d.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:Q0(d.paint.get("raster-hue-rotate")),u_coords_top:[f[0].x,f[0].y,f[1].x,f[1].y],u_coords_bottom:[f[3].x,f[3].y,f[2].x,f[2].y]};var v,b};function Q0(m){m*=Math.PI/180;let r=Math.sin(m),s=Math.cos(m);return[(2*s+1)/3,(-Math.sqrt(3)*r-s+1)/3,(Math.sqrt(3)*r-s+1)/3]}let _u=(m,r,s,d,f,v,b,T,q,C,k,F,L)=>{let V=b.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:V.cameraToCenterDistance,u_pitch:V.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:V.width/V.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_label_plane_matrix:T,u_coord_matrix:q,u_is_text:+k,u_pitch_with_map:+d,u_is_along_line:f,u_is_variable_anchor:v,u_texsize:F,u_texture:0,u_translation:C,u_pitched_scale:L}},ex=(m,r,s,d,f,v,b,T,q,C,k,F,L,V)=>{let $=b.transform;return a.e(_u(m,r,s,d,f,v,b,T,q,C,k,F,V),{u_gamma_scale:d?Math.cos($.pitch*Math.PI/180)*$.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:1})},Gd=(m,r,s,d,f,v,b,T,q,C,k,F,L)=>a.e(ex(m,r,s,d,f,v,b,T,q,C,!0,k,0,L),{u_texsize_icon:F,u_texture_icon:1}),NA=(m,r)=>({u_opacity:m,u_color:r}),BA=(m,r,s,d,f)=>a.e(function(v,b,T,q){let C=T.imageManager.getPattern(v.from.toString()),k=T.imageManager.getPattern(v.to.toString()),{width:F,height:L}=T.imageManager.getPixelSize(),V=Math.pow(2,q.tileID.overscaledZ),$=q.tileSize*Math.pow(2,T.transform.tileZoom)/V,ie=$*(q.tileID.canonical.x+q.tileID.wrap*V),re=$*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:C.tl,u_pattern_br_a:C.br,u_pattern_tl_b:k.tl,u_pattern_br_b:k.br,u_texsize:[F,L],u_mix:b.t,u_pattern_size_a:C.displaySize,u_pattern_size_b:k.displaySize,u_scale_a:b.fromScale,u_scale_b:b.toScale,u_tile_units_to_pixels:1/a.az(q,1,T.transform.tileZoom),u_pixel_coord_upper:[ie>>16,re>>16],u_pixel_coord_lower:[65535&ie,65535&re]}}(s,f,r,d),{u_opacity:m}),tv=(m,r)=>{},tx={fillExtrusion:(m,r)=>({u_lightpos:new a.bL(m,r.u_lightpos),u_lightpos_globe:new a.bL(m,r.u_lightpos_globe),u_lightintensity:new a.b8(m,r.u_lightintensity),u_lightcolor:new a.bL(m,r.u_lightcolor),u_vertical_gradient:new a.b8(m,r.u_vertical_gradient),u_opacity:new a.b8(m,r.u_opacity),u_fill_translate:new a.bM(m,r.u_fill_translate)}),fillExtrusionPattern:(m,r)=>({u_lightpos:new a.bL(m,r.u_lightpos),u_lightpos_globe:new a.bL(m,r.u_lightpos_globe),u_lightintensity:new a.b8(m,r.u_lightintensity),u_lightcolor:new a.bL(m,r.u_lightcolor),u_vertical_gradient:new a.b8(m,r.u_vertical_gradient),u_height_factor:new a.b8(m,r.u_height_factor),u_opacity:new a.b8(m,r.u_opacity),u_fill_translate:new a.bM(m,r.u_fill_translate),u_image:new a.bH(m,r.u_image),u_texsize:new a.bM(m,r.u_texsize),u_pixel_coord_upper:new a.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bM(m,r.u_pixel_coord_lower),u_scale:new a.bL(m,r.u_scale),u_fade:new a.b8(m,r.u_fade)}),fill:(m,r)=>({u_fill_translate:new a.bM(m,r.u_fill_translate)}),fillPattern:(m,r)=>({u_image:new a.bH(m,r.u_image),u_texsize:new a.bM(m,r.u_texsize),u_pixel_coord_upper:new a.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bM(m,r.u_pixel_coord_lower),u_scale:new a.bL(m,r.u_scale),u_fade:new a.b8(m,r.u_fade),u_fill_translate:new a.bM(m,r.u_fill_translate)}),fillOutline:(m,r)=>({u_world:new a.bM(m,r.u_world),u_fill_translate:new a.bM(m,r.u_fill_translate)}),fillOutlinePattern:(m,r)=>({u_world:new a.bM(m,r.u_world),u_image:new a.bH(m,r.u_image),u_texsize:new a.bM(m,r.u_texsize),u_pixel_coord_upper:new a.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bM(m,r.u_pixel_coord_lower),u_scale:new a.bL(m,r.u_scale),u_fade:new a.b8(m,r.u_fade),u_fill_translate:new a.bM(m,r.u_fill_translate)}),circle:(m,r)=>({u_camera_to_center_distance:new a.b8(m,r.u_camera_to_center_distance),u_scale_with_map:new a.bH(m,r.u_scale_with_map),u_pitch_with_map:new a.bH(m,r.u_pitch_with_map),u_extrude_scale:new a.bM(m,r.u_extrude_scale),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_globe_extrude_scale:new a.b8(m,r.u_globe_extrude_scale),u_translate:new a.bM(m,r.u_translate)}),collisionBox:(m,r)=>({u_pixel_extrude_scale:new a.bM(m,r.u_pixel_extrude_scale)}),collisionCircle:(m,r)=>({u_viewport_size:new a.bM(m,r.u_viewport_size)}),debug:(m,r)=>({u_color:new a.bI(m,r.u_color),u_overlay:new a.bH(m,r.u_overlay),u_overlay_scale:new a.b8(m,r.u_overlay_scale)}),depth:tv,clippingMask:tv,heatmap:(m,r)=>({u_extrude_scale:new a.b8(m,r.u_extrude_scale),u_intensity:new a.b8(m,r.u_intensity),u_globe_extrude_scale:new a.b8(m,r.u_globe_extrude_scale)}),heatmapTexture:(m,r)=>({u_matrix:new a.bJ(m,r.u_matrix),u_world:new a.bM(m,r.u_world),u_image:new a.bH(m,r.u_image),u_color_ramp:new a.bH(m,r.u_color_ramp),u_opacity:new a.b8(m,r.u_opacity)}),hillshade:(m,r)=>({u_image:new a.bH(m,r.u_image),u_latrange:new a.bM(m,r.u_latrange),u_exaggeration:new a.b8(m,r.u_exaggeration),u_altitudes:new a.bS(m,r.u_altitudes),u_azimuths:new a.bS(m,r.u_azimuths),u_accent:new a.bI(m,r.u_accent),u_method:new a.bH(m,r.u_method),u_shadows:new a.bR(m,r.u_shadows),u_highlights:new a.bR(m,r.u_highlights)}),hillshadePrepare:(m,r)=>({u_matrix:new a.bJ(m,r.u_matrix),u_image:new a.bH(m,r.u_image),u_dimension:new a.bM(m,r.u_dimension),u_zoom:new a.b8(m,r.u_zoom),u_unpack:new a.bK(m,r.u_unpack)}),line:(m,r)=>({u_translation:new a.bM(m,r.u_translation),u_ratio:new a.b8(m,r.u_ratio),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_units_to_pixels:new a.bM(m,r.u_units_to_pixels)}),lineGradient:(m,r)=>({u_translation:new a.bM(m,r.u_translation),u_ratio:new a.b8(m,r.u_ratio),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_units_to_pixels:new a.bM(m,r.u_units_to_pixels),u_image:new a.bH(m,r.u_image),u_image_height:new a.b8(m,r.u_image_height)}),linePattern:(m,r)=>({u_translation:new a.bM(m,r.u_translation),u_texsize:new a.bM(m,r.u_texsize),u_ratio:new a.b8(m,r.u_ratio),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_image:new a.bH(m,r.u_image),u_units_to_pixels:new a.bM(m,r.u_units_to_pixels),u_scale:new a.bL(m,r.u_scale),u_fade:new a.b8(m,r.u_fade)}),lineSDF:(m,r)=>({u_translation:new a.bM(m,r.u_translation),u_ratio:new a.b8(m,r.u_ratio),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_units_to_pixels:new a.bM(m,r.u_units_to_pixels),u_patternscale_a:new a.bM(m,r.u_patternscale_a),u_patternscale_b:new a.bM(m,r.u_patternscale_b),u_sdfgamma:new a.b8(m,r.u_sdfgamma),u_image:new a.bH(m,r.u_image),u_tex_y_a:new a.b8(m,r.u_tex_y_a),u_tex_y_b:new a.b8(m,r.u_tex_y_b),u_mix:new a.b8(m,r.u_mix)}),raster:(m,r)=>({u_tl_parent:new a.bM(m,r.u_tl_parent),u_scale_parent:new a.b8(m,r.u_scale_parent),u_buffer_scale:new a.b8(m,r.u_buffer_scale),u_fade_t:new a.b8(m,r.u_fade_t),u_opacity:new a.b8(m,r.u_opacity),u_image0:new a.bH(m,r.u_image0),u_image1:new a.bH(m,r.u_image1),u_brightness_low:new a.b8(m,r.u_brightness_low),u_brightness_high:new a.b8(m,r.u_brightness_high),u_saturation_factor:new a.b8(m,r.u_saturation_factor),u_contrast_factor:new a.b8(m,r.u_contrast_factor),u_spin_weights:new a.bL(m,r.u_spin_weights),u_coords_top:new a.bK(m,r.u_coords_top),u_coords_bottom:new a.bK(m,r.u_coords_bottom)}),symbolIcon:(m,r)=>({u_is_size_zoom_constant:new a.bH(m,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bH(m,r.u_is_size_feature_constant),u_size_t:new a.b8(m,r.u_size_t),u_size:new a.b8(m,r.u_size),u_camera_to_center_distance:new a.b8(m,r.u_camera_to_center_distance),u_pitch:new a.b8(m,r.u_pitch),u_rotate_symbol:new a.bH(m,r.u_rotate_symbol),u_aspect_ratio:new a.b8(m,r.u_aspect_ratio),u_fade_change:new a.b8(m,r.u_fade_change),u_label_plane_matrix:new a.bJ(m,r.u_label_plane_matrix),u_coord_matrix:new a.bJ(m,r.u_coord_matrix),u_is_text:new a.bH(m,r.u_is_text),u_pitch_with_map:new a.bH(m,r.u_pitch_with_map),u_is_along_line:new a.bH(m,r.u_is_along_line),u_is_variable_anchor:new a.bH(m,r.u_is_variable_anchor),u_texsize:new a.bM(m,r.u_texsize),u_texture:new a.bH(m,r.u_texture),u_translation:new a.bM(m,r.u_translation),u_pitched_scale:new a.b8(m,r.u_pitched_scale)}),symbolSDF:(m,r)=>({u_is_size_zoom_constant:new a.bH(m,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bH(m,r.u_is_size_feature_constant),u_size_t:new a.b8(m,r.u_size_t),u_size:new a.b8(m,r.u_size),u_camera_to_center_distance:new a.b8(m,r.u_camera_to_center_distance),u_pitch:new a.b8(m,r.u_pitch),u_rotate_symbol:new a.bH(m,r.u_rotate_symbol),u_aspect_ratio:new a.b8(m,r.u_aspect_ratio),u_fade_change:new a.b8(m,r.u_fade_change),u_label_plane_matrix:new a.bJ(m,r.u_label_plane_matrix),u_coord_matrix:new a.bJ(m,r.u_coord_matrix),u_is_text:new a.bH(m,r.u_is_text),u_pitch_with_map:new a.bH(m,r.u_pitch_with_map),u_is_along_line:new a.bH(m,r.u_is_along_line),u_is_variable_anchor:new a.bH(m,r.u_is_variable_anchor),u_texsize:new a.bM(m,r.u_texsize),u_texture:new a.bH(m,r.u_texture),u_gamma_scale:new a.b8(m,r.u_gamma_scale),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_is_halo:new a.bH(m,r.u_is_halo),u_translation:new a.bM(m,r.u_translation),u_pitched_scale:new a.b8(m,r.u_pitched_scale)}),symbolTextAndIcon:(m,r)=>({u_is_size_zoom_constant:new a.bH(m,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bH(m,r.u_is_size_feature_constant),u_size_t:new a.b8(m,r.u_size_t),u_size:new a.b8(m,r.u_size),u_camera_to_center_distance:new a.b8(m,r.u_camera_to_center_distance),u_pitch:new a.b8(m,r.u_pitch),u_rotate_symbol:new a.bH(m,r.u_rotate_symbol),u_aspect_ratio:new a.b8(m,r.u_aspect_ratio),u_fade_change:new a.b8(m,r.u_fade_change),u_label_plane_matrix:new a.bJ(m,r.u_label_plane_matrix),u_coord_matrix:new a.bJ(m,r.u_coord_matrix),u_is_text:new a.bH(m,r.u_is_text),u_pitch_with_map:new a.bH(m,r.u_pitch_with_map),u_is_along_line:new a.bH(m,r.u_is_along_line),u_is_variable_anchor:new a.bH(m,r.u_is_variable_anchor),u_texsize:new a.bM(m,r.u_texsize),u_texsize_icon:new a.bM(m,r.u_texsize_icon),u_texture:new a.bH(m,r.u_texture),u_texture_icon:new a.bH(m,r.u_texture_icon),u_gamma_scale:new a.b8(m,r.u_gamma_scale),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_is_halo:new a.bH(m,r.u_is_halo),u_translation:new a.bM(m,r.u_translation),u_pitched_scale:new a.b8(m,r.u_pitched_scale)}),background:(m,r)=>({u_opacity:new a.b8(m,r.u_opacity),u_color:new a.bI(m,r.u_color)}),backgroundPattern:(m,r)=>({u_opacity:new a.b8(m,r.u_opacity),u_image:new a.bH(m,r.u_image),u_pattern_tl_a:new a.bM(m,r.u_pattern_tl_a),u_pattern_br_a:new a.bM(m,r.u_pattern_br_a),u_pattern_tl_b:new a.bM(m,r.u_pattern_tl_b),u_pattern_br_b:new a.bM(m,r.u_pattern_br_b),u_texsize:new a.bM(m,r.u_texsize),u_mix:new a.b8(m,r.u_mix),u_pattern_size_a:new a.bM(m,r.u_pattern_size_a),u_pattern_size_b:new a.bM(m,r.u_pattern_size_b),u_scale_a:new a.b8(m,r.u_scale_a),u_scale_b:new a.b8(m,r.u_scale_b),u_pixel_coord_upper:new a.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bM(m,r.u_pixel_coord_lower),u_tile_units_to_pixels:new a.b8(m,r.u_tile_units_to_pixels)}),terrain:(m,r)=>({u_texture:new a.bH(m,r.u_texture),u_ele_delta:new a.b8(m,r.u_ele_delta),u_fog_matrix:new a.bJ(m,r.u_fog_matrix),u_fog_color:new a.bI(m,r.u_fog_color),u_fog_ground_blend:new a.b8(m,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.b8(m,r.u_fog_ground_blend_opacity),u_horizon_color:new a.bI(m,r.u_horizon_color),u_horizon_fog_blend:new a.b8(m,r.u_horizon_fog_blend),u_is_globe_mode:new a.b8(m,r.u_is_globe_mode)}),terrainDepth:(m,r)=>({u_ele_delta:new a.b8(m,r.u_ele_delta)}),terrainCoords:(m,r)=>({u_texture:new a.bH(m,r.u_texture),u_terrain_coords_id:new a.b8(m,r.u_terrain_coords_id),u_ele_delta:new a.b8(m,r.u_ele_delta)}),projectionErrorMeasurement:(m,r)=>({u_input:new a.b8(m,r.u_input),u_output_expected:new a.b8(m,r.u_output_expected)}),atmosphere:(m,r)=>({u_sun_pos:new a.bL(m,r.u_sun_pos),u_atmosphere_blend:new a.b8(m,r.u_atmosphere_blend),u_globe_position:new a.bL(m,r.u_globe_position),u_globe_radius:new a.b8(m,r.u_globe_radius),u_inv_proj_matrix:new a.bJ(m,r.u_inv_proj_matrix)}),sky:(m,r)=>({u_sky_color:new a.bI(m,r.u_sky_color),u_horizon_color:new a.bI(m,r.u_horizon_color),u_horizon:new a.bM(m,r.u_horizon),u_horizon_normal:new a.bM(m,r.u_horizon_normal),u_sky_horizon_blend:new a.b8(m,r.u_sky_horizon_blend),u_sky_blend:new a.b8(m,r.u_sky_blend)})};class rx{constructor(r,s,d){this.context=r;let f=r.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){let s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let rv={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ix{constructor(r,s,d,f){this.length=s.length,this.attributes=d,this.itemSize=s.bytesPerElement,this.dynamicDraw=f,this.context=r;let v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);let s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,s){for(let d=0;d<this.attributes.length;d++){let f=s.attributes[this.attributes[d].name];f!==void 0&&r.enableVertexAttribArray(f)}}setVertexAttribPointers(r,s,d){for(let f=0;f<this.attributes.length;f++){let v=this.attributes[f],b=s.attributes[v.name];b!==void 0&&r.vertexAttribPointer(b,v.components,r[rv[v.type]],!1,this.itemSize,v.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class lr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ko extends lr{getDefault(){return a.b7.transparent}set(r){let s=this.current;(r.r!==s.r||r.g!==s.g||r.b!==s.b||r.a!==s.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class iv extends lr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class nv extends lr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class av extends lr{getDefault(){return[!0,!0,!0,!0]}set(r){let s=this.current;(r[0]!==s[0]||r[1]!==s[1]||r[2]!==s[2]||r[3]!==s[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class nx extends lr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class ov extends lr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class ql extends lr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){let s=this.current;(r.func!==s.func||r.ref!==s.ref||r.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class sv extends lr{getDefault(){let r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){let s=this.current;(r[0]!==s[0]||r[1]!==s[1]||r[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class jA extends lr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;r?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=r,this.dirty=!1}}class UA extends lr{getDefault(){return[0,1]}set(r){let s=this.current;(r[0]!==s[0]||r[1]!==s[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class VA extends lr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;r?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=r,this.dirty=!1}}class $A extends lr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class ax extends lr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;r?s.enable(s.BLEND):s.disable(s.BLEND),this.current=r,this.dirty=!1}}class WA extends lr{getDefault(){let r=this.gl;return[r.ONE,r.ZERO]}set(r){let s=this.current;(r[0]!==s[0]||r[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class ox extends lr{getDefault(){return a.b7.transparent}set(r){let s=this.current;(r.r!==s.r||r.g!==s.g||r.b!==s.b||r.a!==s.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Zd extends lr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Kd extends lr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;r?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=r,this.dirty=!1}}class Hd extends lr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class lv extends lr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Il extends lr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Xd extends lr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class xu extends lr{getDefault(){let r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){let s=this.current;(r[0]!==s[0]||r[1]!==s[1]||r[2]!==s[2]||r[3]!==s[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Aa extends lr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class sx extends lr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class lx extends lr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;s.bindTexture(s.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class uv extends lr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Pl extends lr{getDefault(){return null}set(r){let s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Jd extends lr{getDefault(){return null}set(r){var s;if(r===this.current&&!this.dirty)return;let d=this.gl;sn(d)?d.bindVertexArray(r):(s=d.getExtension("OES_vertex_array_object"))===null||s===void 0||s.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Yd extends lr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class uh extends lr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Qd extends lr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class ef extends lr{constructor(r,s){super(r),this.context=r,this.parent=s}getDefault(){return null}}class bu extends ef{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class wu extends ef{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ux extends ef{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,r),this.current=r,this.dirty=!1}}let tf="Framebuffer is not complete";class Jt{constructor(r,s,d,f,v){this.context=r,this.width=s,this.height=d;let b=r.gl,T=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new bu(r,T),f)this.depthAttachment=v?new ux(r,T):new wu(r,T);else if(v)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error(tf)}destroy(){let r=this.context.gl,s=this.colorAttachment.get();if(s&&r.deleteTexture(s),this.depthAttachment){let d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class rf{constructor(r){var s,d;if(this.gl=r,this.clearColor=new Ko(this),this.clearDepth=new iv(this),this.clearStencil=new nv(this),this.colorMask=new av(this),this.depthMask=new nx(this),this.stencilMask=new ov(this),this.stencilFunc=new ql(this),this.stencilOp=new sv(this),this.stencilTest=new jA(this),this.depthRange=new UA(this),this.depthTest=new VA(this),this.depthFunc=new $A(this),this.blend=new ax(this),this.blendFunc=new WA(this),this.blendColor=new ox(this),this.blendEquation=new Zd(this),this.cullFace=new Kd(this),this.cullFaceSide=new Hd(this),this.frontFace=new lv(this),this.program=new Il(this),this.activeTexture=new Xd(this),this.viewport=new xu(this),this.bindFramebuffer=new Aa(this),this.bindRenderbuffer=new sx(this),this.bindTexture=new lx(this),this.bindVertexBuffer=new uv(this),this.bindElementBuffer=new Pl(this),this.bindVertexArray=new Jd(this),this.pixelStoreUnpack=new Yd(this),this.pixelStoreUnpackPremultiplyAlpha=new uh(this),this.pixelStoreUnpackFlipY=new Qd(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),sn(r)){this.HALF_FLOAT=r.HALF_FLOAT;let f=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(s=r.RGBA16F)!==null&&s!==void 0?s:f==null?void 0:f.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:f==null?void 0:f.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");let f=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=f==null?void 0:f.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,s){return new rx(this,r,s)}createVertexBuffer(r,s,d){return new ix(this,r,s,d)}createRenderbuffer(r,s,d){let f=this.gl,v=f.createRenderbuffer();return this.bindRenderbuffer.set(v),f.renderbufferStorage(f.RENDERBUFFER,r,s,d),this.bindRenderbuffer.set(null),v}createFramebuffer(r,s,d,f){return new Jt(this,r,s,d,f)}clear({color:r,depth:s,stencil:d}){let f=this.gl,v=0;r&&(v|=f.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(v|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),d!==void 0&&(v|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),f.clear(v)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){a.bE(r.blendFunction,br.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return sn(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var s;return sn(this.gl)?this.gl.deleteVertexArray(r):(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let nf;function cv(m,r,s,d,f){let v=m.context,b=m.transform,T=v.gl,q=m.useProgram("collisionBox"),C=[],k=0,F=0;for(let ne=0;ne<d.length;ne++){let se=d[ne],de=r.getTile(se).getBucket(s);if(!de)continue;let he=f?de.textCollisionBox:de.iconCollisionBox,fe=de.collisionCircleArray;fe.length>0&&(C.push({circleArray:fe,circleOffset:F,coord:se}),k+=fe.length/4,F=k),he&&q.draw(v,T.LINES,Ft.disabled,$t.disabled,m.colorModeForRenderPass(),nr.disabled,FA(m.transform),m.style.map.terrain&&m.style.map.terrain.getTerrainData(se),b.getProjectionData({overscaledTileID:se,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),s.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,null,m.transform.zoom,null,null,he.collisionVertexBuffer)}if(!f||!C.length)return;let L=m.useProgram("collisionCircle"),V=new a.bT;V.resize(4*k),V._trim();let $=0;for(let ne of C)for(let se=0;se<ne.circleArray.length/4;se++){let de=4*se,he=ne.circleArray[de+0],fe=ne.circleArray[de+1],_e=ne.circleArray[de+2],pe=ne.circleArray[de+3];V.emplace($++,he,fe,_e,pe,0),V.emplace($++,he,fe,_e,pe,1),V.emplace($++,he,fe,_e,pe,2),V.emplace($++,he,fe,_e,pe,3)}(!nf||nf.length<2*k)&&(nf=function(ne){let se=2*ne,de=new a.bV;de.resize(se),de._trim();for(let he=0;he<se;he++){let fe=6*he;de.uint16[fe+0]=4*he+0,de.uint16[fe+1]=4*he+1,de.uint16[fe+2]=4*he+2,de.uint16[fe+3]=4*he+2,de.uint16[fe+4]=4*he+3,de.uint16[fe+5]=4*he+0}return de}(k));let ie=v.createIndexBuffer(nf,!0),re=v.createVertexBuffer(V,a.bU.members,!0);for(let ne of C){let se=Wd(m.transform);L.draw(v,T.TRIANGLES,Ft.disabled,$t.disabled,m.colorModeForRenderPass(),nr.disabled,se,m.style.map.terrain&&m.style.map.terrain.getTerrainData(ne.coord),null,s.id,re,ie,a.aJ.simpleSegment(0,2*ne.circleOffset,ne.circleArray.length,ne.circleArray.length/2),null,m.transform.zoom,null,null,null)}re.destroy(),ie.destroy()}let ch=a.ad(new Float32Array(16));function GA(m,r,s,d,f,v){let{horizontalAlign:b,verticalAlign:T}=a.aE(m);return new a.P((-(b-.5)*r/f+d[0])*v,(-(T-.5)*s/f+d[1])*v)}function ZA(m,r,s,d,f,v){let b=r.tileAnchorPoint.add(new a.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let T=d.mult(v);s||(T=T.rotate(-f));let q=b.add(T);return Le(q.x,q.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(s){let T=Xr(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(m),q=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return m.add(d.rotate(q))}return m.add(d)}function cx(m,r,s,d,f,v,b,T,q,C,k,F){let L=m.text.placedSymbolArray,V=m.text.dynamicLayoutVertexArray,$=m.icon.dynamicLayoutVertexArray,ie={};V.clear();for(let re=0;re<L.length;re++){let ne=L.get(re),se=ne.hidden||!ne.crossTileID||m.allowVerticalPlacement&&!ne.placedOrientation?null:d[ne.crossTileID];if(se){let de=new a.P(ne.anchorX,ne.anchorY),he={getElevation:F,width:f.width,height:f.height,pitchedLabelPlaneMatrix:v,pitchWithMap:s,transform:f,tileAnchorPoint:de,translation:C,unwrappedTileID:k},fe=s?Vt(de.x,de.y,he):Xr(de.x,de.y,he),_e=mr(f.cameraToCenterDistance,fe.signedDistanceFromCamera),pe=a.am(m.textSizeData,T,ne)*_e/a.ay;s&&(pe*=m.tilePixelRatio/b);let{width:qe,height:ze,anchor:Oe,textOffset:ke,textBoxScale:De}=se,Qe=GA(Oe,qe,ze,ke,De,pe),Ye=f.getPitchedTextCorrection(de.x+C[0],de.y+C[1],k),Ge=ZA(fe.point,he,r,Qe,-f.bearingInRadians,Ye),ft=m.allowVerticalPlacement&&ne.placedOrientation===a.al.vertical?Math.PI/2:0;for(let Wt=0;Wt<ne.numGlyphs;Wt++)a.as(V,Ge,ft);q&&ne.associatedIconIndex>=0&&(ie[ne.associatedIconIndex]={shiftedAnchor:Ge,angle:ft})}else Go(ne.numGlyphs,V)}if(q){$.clear();let re=m.icon.placedSymbolArray;for(let ne=0;ne<re.length;ne++){let se=re.get(ne);if(se.hidden)Go(se.numGlyphs,$);else{let de=ie[ne];if(de)for(let he=0;he<se.numGlyphs;he++)a.as($,de.shiftedAnchor,de.angle);else Go(se.numGlyphs,$)}}m.icon.dynamicLayoutVertexBuffer.updateData($)}m.text.dynamicLayoutVertexBuffer.updateData(V)}function KA(m,r,s){return s.iconsInText&&r?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function af(m,r,s,d,f,v,b,T,q,C,k,F,L){let V=m.context,$=V.gl,ie=m.transform,re=T==="map",ne=q==="map",se=T!=="viewport"&&s.layout.get("symbol-placement")!=="point",de=re&&!ne&&!se,he=!s.layout.get("symbol-sort-key").isConstant(),fe=!1,_e=m.getDepthModeForSublayer(0,Ft.ReadOnly),pe=s._unevaluatedLayout.hasValue("text-variable-anchor")||s._unevaluatedLayout.hasValue("text-variable-anchor-offset"),qe=[],ze=ie.getCircleRadiusCorrection();for(let Oe of d){let ke=r.getTile(Oe),De=ke.getBucket(s);if(!De)continue;let Qe=f?De.text:De.icon;if(!Qe||!Qe.segments.get().length||!Qe.hasVisibleVertices)continue;let Ye=Qe.programConfigurations.get(s.id),Ge=f||De.sdfIcons,ft=f?De.textSizeData:De.iconSizeData,Wt=ne||ie.pitch!==0,ar=m.useProgram(KA(Ge,f,De),Ye),Br=a.ak(ft,ie.zoom),Sr=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Oe),jr,Ur,Er,hr,Ai=[0,0],Li=null;if(f)Ur=ke.glyphAtlasTexture,Er=$.LINEAR,jr=ke.glyphAtlasTexture.size,De.iconsInText&&(Ai=ke.imageAtlasTexture.size,Li=ke.imageAtlasTexture,hr=Wt||m.options.rotating||m.options.zooming||ft.kind==="composite"||ft.kind==="camera"?$.LINEAR:$.NEAREST);else{let mi=s.layout.get("icon-size").constantOr(0)!==1||De.iconsNeedLinear;Ur=ke.imageAtlasTexture,Er=Ge||m.options.rotating||m.options.zooming||mi||Wt?$.LINEAR:$.NEAREST,jr=ke.imageAtlasTexture.size}let Ki=a.az(ke,1,m.transform.zoom),dr=St(re,m.transform,Ki),Cs=a.K();a.an(Cs,dr);let xo=jt(ne,re,m.transform,Ki),Ms=a.aA(ie,ke,v,b),Rl=ie.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),Eh=pe&&De.hasTextData(),Rs=s.layout.get("icon-text-fit")!=="none"&&Eh&&De.hasIconData();if(se){let mi=m.style.map.terrain?(En,Mr)=>m.style.map.terrain.getElevation(Oe,En,Mr):null,vi=s.layout.get("text-rotation-alignment")==="map";cr(De,m,f,dr,Cs,ne,C,vi,Oe.toUnwrapped(),ie.width,ie.height,Ms,mi)}let Ol=f&&pe||Rs,la=se||Ol?ch:ne?dr:m.transform.clipSpaceToPixelsMatrix,Os=Ge&&s.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Xo;Xo=Ge?De.iconsInText?Gd(ft.kind,Br,de,ne,se,Ol,m,la,xo,Ms,jr,Ai,ze):ex(ft.kind,Br,de,ne,se,Ol,m,la,xo,Ms,f,jr,0,ze):_u(ft.kind,Br,de,ne,se,Ol,m,la,xo,Ms,f,jr,ze);let ks={program:ar,buffers:Qe,uniformValues:Xo,projectionData:Rl,atlasTexture:Ur,atlasTextureIcon:Li,atlasInterpolation:Er,atlasInterpolationIcon:hr,isSDF:Ge,hasHalo:Os};if(he&&De.canOverlap){fe=!0;let mi=Qe.segments.get();for(let vi of mi)qe.push({segments:new a.aJ([vi]),sortKey:vi.sortKey,state:ks,terrainData:Sr})}else qe.push({segments:Qe.segments,sortKey:0,state:ks,terrainData:Sr})}fe&&qe.sort((Oe,ke)=>Oe.sortKey-ke.sortKey);for(let Oe of qe){let ke=Oe.state;if(V.activeTexture.set($.TEXTURE0),ke.atlasTexture.bind(ke.atlasInterpolation,$.CLAMP_TO_EDGE),ke.atlasTextureIcon&&(V.activeTexture.set($.TEXTURE1),ke.atlasTextureIcon&&ke.atlasTextureIcon.bind(ke.atlasInterpolationIcon,$.CLAMP_TO_EDGE)),ke.isSDF){let De=ke.uniformValues;ke.hasHalo&&(De.u_is_halo=1,hh(ke.buffers,Oe.segments,s,m,ke.program,_e,k,F,De,ke.projectionData,Oe.terrainData)),De.u_is_halo=0}hh(ke.buffers,Oe.segments,s,m,ke.program,_e,k,F,ke.uniformValues,ke.projectionData,Oe.terrainData)}}function hh(m,r,s,d,f,v,b,T,q,C,k){let F=d.context;f.draw(F,F.gl.TRIANGLES,v,b,T,nr.backCCW,q,k,C,s.id,m.layoutVertexBuffer,m.indexBuffer,r,s.paint,d.transform.zoom,m.programConfigurations.get(s.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function of(m,r,s,d,f){let v=m.context,b=v.gl,T=$t.disabled,q=new br([b.ONE,b.ONE],a.b7.transparent,[!0,!0,!0,!0]),C=r.getBucket(s);if(!C)return;let k=d.key,F=s.heatmapFbos.get(k);F||(F=sf(v,r.tileSize,r.tileSize),s.heatmapFbos.set(k,F)),v.bindFramebuffer.set(F.framebuffer),v.viewport.set([0,0,r.tileSize,r.tileSize]),v.clear({color:a.b7.transparent});let L=C.programConfigurations.get(s.id),V=m.useProgram("heatmap",L,!f),$=m.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ie=m.style.map.terrain.getTerrainData(d);V.draw(v,b.TRIANGLES,Ft.disabled,T,q,nr.disabled,Al(r,m.transform.zoom,s.paint.get("heatmap-intensity"),1),ie,$,s.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,s.paint,m.transform.zoom,L)}function hv(m,r,s,d,f){let v=m.context,b=v.gl,T=m.transform;v.setColorMode(m.colorModeForRenderPass());let q=dv(v,r),C=s.key,k=r.heatmapFbos.get(C);if(!k)return;v.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,k.colorAttachment.get()),v.activeTexture.set(b.TEXTURE1),q.bind(b.LINEAR,b.CLAMP_TO_EDGE);let F=T.getProjectionData({overscaledTileID:s,applyTerrainMatrix:f,applyGlobeMatrix:!d});m.useProgram("heatmapTexture").draw(v,b.TRIANGLES,Ft.disabled,$t.disabled,m.colorModeForRenderPass(),nr.disabled,G0(m,r,0,1),null,F,r.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments,r.paint,T.zoom),k.destroy(),r.heatmapFbos.delete(C)}function sf(m,r,s){var d,f;let v=m.gl,b=v.createTexture();v.bindTexture(v.TEXTURE_2D,b),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);let T=(d=m.HALF_FLOAT)!==null&&d!==void 0?d:v.UNSIGNED_BYTE,q=(f=m.RGBA16F)!==null&&f!==void 0?f:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,q,r,s,0,v.RGBA,T,null);let C=m.createFramebuffer(r,s,!1,!1);return C.colorAttachment.set(b),C}function dv(m,r){return r.colorRampTexture||(r.colorRampTexture=new Ne(m,r.colorRamp,m.gl.RGBA)),r.colorRampTexture}function dh(m,r,s,d,f){if(!s||!d||!d.imageAtlas)return;let v=d.imageAtlas.patternPositions,b=v[s.to.toString()],T=v[s.from.toString()];if(!b&&T&&(b=T),!T&&b&&(T=b),!b||!T){let q=f.getPaintProperty(r);b=v[q],T=v[q]}b&&T&&m.setConstantPatternPositions(b,T)}function fh(m,r,s,d,f,v,b,T){let q=m.context.gl,C="fill-pattern",k=s.paint.get(C),F=k&&k.constantOr(1),L=s.getCrossfadeParameters(),V,$,ie,re,ne,se=m.transform,de=s.paint.get("fill-translate"),he=s.paint.get("fill-translate-anchor");b?($=F&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=q.LINES):($=F?"fillPattern":"fill",V=q.TRIANGLES);let fe=k.constantOr(null);for(let _e of d){let pe=r.getTile(_e);if(F&&!pe.patternsLoaded())continue;let qe=pe.getBucket(s);if(!qe)continue;let ze=qe.programConfigurations.get(s.id),Oe=m.useProgram($,ze),ke=m.style.map.terrain&&m.style.map.terrain.getTerrainData(_e);F&&(m.context.activeTexture.set(q.TEXTURE0),pe.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),ze.updatePaintBuffers(L)),dh(ze,C,fe,pe,s);let De=se.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!T,applyTerrainMatrix:!0}),Qe=a.aA(se,pe,de,he);if(b){re=qe.indexBuffer2,ne=qe.segments2;let Ge=[q.drawingBufferWidth,q.drawingBufferHeight];ie=$==="fillOutlinePattern"&&F?oh(m,L,pe,Ge,Qe):Qm(Ge,Qe)}else re=qe.indexBuffer,ne=qe.segments,ie=F?$0(m,L,pe,Qe):{u_fill_translate:Qe};let Ye=m.stencilModeForClipping(_e);Oe.draw(m.context,V,f,Ye,v,nr.backCCW,ie,ke,De,s.id,qe.layoutVertexBuffer,re,ne,s.paint,m.transform.zoom,ze)}}function ph(m,r,s,d,f,v,b,T){let q=m.context,C=q.gl,k="fill-extrusion-pattern",F=s.paint.get(k),L=F.constantOr(1),V=s.getCrossfadeParameters(),$=s.paint.get("fill-extrusion-opacity"),ie=F.constantOr(null),re=m.transform;for(let ne of d){let se=r.getTile(ne),de=se.getBucket(s);if(!de)continue;let he=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ne),fe=de.programConfigurations.get(s.id),_e=m.useProgram(L?"fillExtrusionPattern":"fillExtrusion",fe);L&&(m.context.activeTexture.set(C.TEXTURE0),se.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),fe.updatePaintBuffers(V));let pe=re.getProjectionData({overscaledTileID:ne,applyGlobeMatrix:!T,applyTerrainMatrix:!0});dh(fe,k,ie,se,s);let qe=a.aA(re,se,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),ze=s.paint.get("fill-extrusion-vertical-gradient"),Oe=L?go(m,ze,$,qe,ne,V,se):$d(m,ze,$,qe);_e.draw(q,q.gl.TRIANGLES,f,v,b,nr.backCCW,Oe,he,pe,s.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,s.paint,m.transform.zoom,fe,m.style.map.terrain&&de.centroidVertexBuffer)}}function fv(m,r,s,d,f,v,b,T,q){var C;let k=m.style.projection,F=m.context,L=m.transform,V=F.gl,$=[`#define NUM_ILLUMINATION_SOURCES ${s.paint.get("hillshade-highlight-color").values.length}`],ie=m.useProgram("hillshade",null,!1,$),re=!m.options.moving;for(let ne of d){let se=r.getTile(ne),de=se.fbo;if(!de)continue;let he=k.getMeshFromTileID(F,ne.canonical,T,!0,"raster"),fe=(C=m.style.map.terrain)===null||C===void 0?void 0:C.getTerrainData(ne);F.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,de.colorAttachment.get());let _e=L.getProjectionData({overscaledTileID:ne,aligned:re,applyGlobeMatrix:!q,applyTerrainMatrix:!0});ie.draw(F,V.TRIANGLES,v,f[ne.overscaledZ],b,nr.backCCW,Z0(m,se,s),fe,_e,s.id,he.vertexBuffer,he.indexBuffer,he.segments)}}let mh=[new a.P(0,0),new a.P(a.Z,0),new a.P(a.Z,a.Z),new a.P(0,a.Z)];function lf(m,r,s,d,f,v,b,T,q=!1,C=!1){let k=d[d.length-1].overscaledZ,F=m.context,L=F.gl,V=m.useProgram("raster"),$=m.transform,ie=m.style.projection,re=m.colorModeForRenderPass(),ne=!m.options.moving;for(let se of d){let de=m.getDepthModeForSublayer(se.overscaledZ-k,s.paint.get("raster-opacity")===1?Ft.ReadWrite:Ft.ReadOnly,L.LESS),he=r.getTile(se);he.registerFadeDuration(s.paint.get("raster-fade-duration"));let fe=r.findLoadedParent(se,0),_e=r.findLoadedSibling(se),pe=hx(he,fe||_e||null,r,s,m.transform,m.style.map.terrain),qe,ze,Oe=s.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;F.activeTexture.set(L.TEXTURE0),he.texture.bind(Oe,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(L.TEXTURE1),fe?(fe.texture.bind(Oe,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),qe=Math.pow(2,fe.tileID.overscaledZ-he.tileID.overscaledZ),ze=[he.tileID.canonical.x*qe%1,he.tileID.canonical.y*qe%1]):he.texture.bind(Oe,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),he.texture.useMipmap&&F.extTextureFilterAnisotropic&&m.transform.pitch>20&&L.texParameterf(L.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);let ke=m.style.map.terrain&&m.style.map.terrain.getTerrainData(se),De=$.getProjectionData({overscaledTileID:se,aligned:ne,applyGlobeMatrix:!C,applyTerrainMatrix:!0}),Qe=Y0(ze||[0,0],qe||1,pe,s,T),Ye=ie.getMeshFromTileID(F,se.canonical,v,b,"raster");V.draw(F,L.TRIANGLES,de,f?f[se.overscaledZ]:$t.disabled,re,q?nr.frontCCW:nr.backCCW,Qe,ke,De,s.id,Ye.vertexBuffer,Ye.indexBuffer,Ye.segments)}}function hx(m,r,s,d,f,v){let b=d.paint.get("raster-fade-duration");if(!v&&b>0){let T=M.now(),q=(T-m.timeAdded)/b,C=r?(T-r.timeAdded)/b:-1,k=s.getSource(),F=Pe(f,{tileSize:k.tileSize,roundZoom:k.roundZoom}),L=!r||Math.abs(r.tileID.overscaledZ-F)>Math.abs(m.tileID.overscaledZ-F),V=L&&m.refreshedUponExpiration?1:a.ae(L?q:1-C,0,1);return m.refreshedUponExpiration&&q>=1&&(m.refreshedUponExpiration=!1),r?{opacity:1,mix:1-V}:{opacity:V,mix:0}}return{opacity:1,mix:0}}let uf=new a.b7(1,0,0,1),pv=new a.b7(0,1,0,1),dx=new a.b7(0,0,1,1),fx=new a.b7(1,0,1,1),cf=new a.b7(0,1,1,1);function hf(m,r,s,d){vh(m,0,r+s/2,m.transform.width,s,d)}function px(m,r,s,d){vh(m,r-s/2,0,s,m.transform.height,d)}function vh(m,r,s,d,f,v){let b=m.context,T=b.gl;T.enable(T.SCISSOR_TEST),T.scissor(r*m.pixelRatio,s*m.pixelRatio,d*m.pixelRatio,f*m.pixelRatio),b.clear({color:v}),T.disable(T.SCISSOR_TEST)}function ni(m,r,s){let d=m.context,f=d.gl,v=m.useProgram("debug"),b=Ft.disabled,T=$t.disabled,q=m.colorModeForRenderPass(),C="$debug",k=m.style.map.terrain&&m.style.map.terrain.getTerrainData(s);d.activeTexture.set(f.TEXTURE0);let F=r.getTileByID(s.key).latestRawTileData,L=Math.floor((F&&F.byteLength||0)/1024),V=r.getTile(s).tileSize,$=512/Math.min(V,512)*(s.overscaledZ/m.transform.zoom)*.5,ie=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(ie+=` => ${s.overscaledZ}`),function(ne,se){ne.initDebugOverlayCanvas();let de=ne.debugOverlayCanvas,he=ne.context.gl,fe=ne.debugOverlayCanvas.getContext("2d");fe.clearRect(0,0,de.width,de.height),fe.shadowColor="white",fe.shadowBlur=2,fe.lineWidth=1.5,fe.strokeStyle="white",fe.textBaseline="top",fe.font="bold 36px Open Sans, sans-serif",fe.fillText(se,5,5),fe.strokeText(se,5,5),ne.debugOverlayTexture.update(de),ne.debugOverlayTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)}(m,`${ie} ${L}kB`);let re=m.transform.getProjectionData({overscaledTileID:s,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(d,f.TRIANGLES,b,T,br.alphaBlended,nr.disabled,W0(a.b7.transparent,$),null,re,C,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),v.draw(d,f.LINE_STRIP,b,T,q,nr.disabled,W0(a.b7.red),k,re,C,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function Ps(m,r,s,d){let{isRenderingGlobe:f}=d,v=m.context,b=v.gl,T=m.transform,q=m.colorModeForRenderPass(),C=m.getDepthModeFor3D(),k=m.useProgram("terrain");v.bindFramebuffer.set(null),v.viewport.set([0,0,m.width,m.height]);for(let F of s){let L=r.getTerrainMesh(F.tileID),V=m.renderToTexture.getTexture(F),$=r.getTerrainData(F.tileID);v.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,V.texture);let ie=r.getMeshFrameDelta(T.zoom),re=T.calculateFogMatrix(F.tileID.toUnwrapped()),ne=LA(ie,re,m.style.sky,T.pitch,f),se=T.getProjectionData({overscaledTileID:F.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});k.draw(v,b.TRIANGLES,C,$t.disabled,q,nr.backCCW,ne,$,se,"terrain",L.vertexBuffer,L.indexBuffer,L.segments)}}function sa(m,r){if(!r.mesh){let s=new a.aI;s.emplaceBack(-1,-1),s.emplaceBack(1,-1),s.emplaceBack(1,1),s.emplaceBack(-1,1);let d=new a.aK;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),r.mesh=new fu(m.createVertexBuffer(s,wn.members),m.createIndexBuffer(d),a.aJ.simpleSegment(0,0,s.length,d.length))}return r.mesh}class mv{constructor(r,s){this.context=new rf(r),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ae.maxUnderzooming+Ae.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xc}resize(r,s,d){if(this.width=Math.floor(r*d),this.height=Math.floor(s*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let f of this.style._order)this.style._layers[f].resize()}setup(){let r=this.context,s=new a.aI;s.emplaceBack(0,0),s.emplaceBack(a.Z,0),s.emplaceBack(0,a.Z),s.emplaceBack(a.Z,a.Z),this.tileExtentBuffer=r.createVertexBuffer(s,wn.members),this.tileExtentSegments=a.aJ.simpleSegment(0,0,4,2);let d=new a.aI;d.emplaceBack(0,0),d.emplaceBack(a.Z,0),d.emplaceBack(0,a.Z),d.emplaceBack(a.Z,a.Z),this.debugBuffer=r.createVertexBuffer(d,wn.members),this.debugSegments=a.aJ.simpleSegment(0,0,4,5);let f=new a.b_;f.emplaceBack(0,0,0,0),f.emplaceBack(a.Z,0,a.Z,0),f.emplaceBack(0,a.Z,0,a.Z),f.emplaceBack(a.Z,a.Z,a.Z,a.Z),this.rasterBoundsBuffer=r.createVertexBuffer(f,kA.members),this.rasterBoundsSegments=a.aJ.simpleSegment(0,0,4,2);let v=new a.aI;v.emplaceBack(0,0),v.emplaceBack(a.Z,0),v.emplaceBack(0,a.Z),v.emplaceBack(a.Z,a.Z),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(v,wn.members),this.rasterBoundsSegmentsPosOnly=a.aJ.simpleSegment(0,0,4,5);let b=new a.aI;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(b,wn.members),this.viewportSegments=a.aJ.simpleSegment(0,0,4,2);let T=new a.b$;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);let q=new a.aK;q.emplaceBack(1,0,2),q.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(q);let C=this.context.gl;this.stencilClearMode=new $t({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO),this.tileExtentMesh=new fu(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let r=this.context,s=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let d=a.K();a.bQ(d,0,this.width,this.height,0,0,1),a.M(d,d,[s.drawingBufferWidth,s.drawingBufferHeight,0]);let f={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(r,s.TRIANGLES,Ft.disabled,this.stencilClearMode,br.disabled,nr.disabled,null,null,f,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,s,d){if(this.currentStencilSource===r.source||!r.isTileClipped()||!s||!s.length)return;this.currentStencilSource=r.source,this.nextStencilID+s.length>256&&this.clearStencil();let f=this.context;f.setColorMode(br.disabled),f.setDepthMode(Ft.disabled);let v={};for(let b of s)v[b.key]=this.nextStencilID++;this._renderTileMasks(v,s,d,!0),this._renderTileMasks(v,s,d,!1),this._tileClippingMaskIDs=v}_renderTileMasks(r,s,d,f){let v=this.context,b=v.gl,T=this.style.projection,q=this.transform,C=this.useProgram("clippingMask");for(let k of s){let F=r[k.key],L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k),V=T.getMeshFromTileID(this.context,k.canonical,f,!0,"stencil"),$=q.getProjectionData({overscaledTileID:k,applyGlobeMatrix:!d,applyTerrainMatrix:!0});C.draw(v,b.TRIANGLES,Ft.disabled,new $t({func:b.ALWAYS,mask:0},F,255,b.KEEP,b.KEEP,b.REPLACE),br.disabled,d?nr.disabled:nr.backCCW,null,L,$,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}_renderTilesDepthBuffer(){let r=this.context,s=r.gl,d=this.style.projection,f=this.transform,v=this.useProgram("depth"),b=this.getDepthModeFor3D(),T=be(f,{tileSize:f.tileSize});for(let q of T){let C=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),k=d.getMeshFromTileID(this.context,q.canonical,!0,!0,"raster"),F=f.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(r,s.TRIANGLES,b,$t.disabled,br.disabled,nr.backCCW,null,C,F,"$clipping",k.vertexBuffer,k.indexBuffer,k.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let r=this.nextStencilID++,s=this.context.gl;return new $t({func:s.NOTEQUAL,mask:255},r,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(r){let s=this.context.gl;return new $t({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,s.KEEP,s.KEEP,s.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){let s=this.context.gl,d=r.sort((b,T)=>T.overscaledZ-b.overscaledZ),f=d[d.length-1].overscaledZ,v=d[0].overscaledZ-f+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();let b={};for(let T=0;T<v;T++)b[T+f]=new $t({func:s.GEQUAL,mask:255},T+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=v,[b,d]}return[{[f]:$t.disabled},d]}stencilConfigForOverlapTwoPass(r){let s=this.context.gl,d=r.sort((b,T)=>T.overscaledZ-b.overscaledZ),f=d[d.length-1].overscaledZ,v=d[0].overscaledZ-f+1;if(this.clearStencil(),v>1){let b={},T={};for(let q=0;q<v;q++)b[q+f]=new $t({func:s.GREATER,mask:255},v+1+q,255,s.KEEP,s.KEEP,s.REPLACE),T[q+f]=new $t({func:s.GREATER,mask:255},1+q,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID=2*v+1,[b,T,d]}return this.nextStencilID=3,[{[f]:new $t({func:s.GREATER,mask:255},2,255,s.KEEP,s.KEEP,s.REPLACE)},{[f]:new $t({func:s.GREATER,mask:255},1,255,s.KEEP,s.KEEP,s.REPLACE)},d]}colorModeForRenderPass(){let r=this.context.gl;return this._showOverdrawInspector?new br([r.CONSTANT_COLOR,r.ONE],new a.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?br.unblended:br.alphaBlended}getDepthModeForSublayer(r,s,d){if(!this.opaquePassEnabledForLayer())return Ft.disabled;let f=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Ft(d||this.context.gl.LEQUAL,s,[f,f])}getDepthModeFor3D(){return new Ft(this.context.gl.LEQUAL,Ft.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,s){var d,f;this.style=r,this.options=s,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(M.now()),this.imageManager.beginFrame();let v=this.style._order,b=this.style.sourceCaches,T={},q={},C={},k={isRenderingToTexture:!1,isRenderingGlobe:((d=r.projection)===null||d===void 0?void 0:d.transitionState)>0};for(let L in b){let V=b[L];V.used&&V.prepare(this.context),T[L]=V.getVisibleCoordinates(!1),q[L]=T[L].slice().reverse(),C[L]=V.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<v.length;L++)if(this.style._layers[v[L]].is3D()){this.opaquePassCutoff=L;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let L of v){let V=this.style._layers[L];if(!V.hasOffscreenPass()||V.isHidden(this.transform.zoom))continue;let $=q[V.source];(V.type==="custom"||$.length)&&this.renderLayer(this,b[V.source],V,$,k)}if((f=this.style.projection)===null||f===void 0||f.updateGPUdependent({context:this.context,useProgram:L=>this.useProgram(L)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.b7.black:a.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(L,V){let $=L.context,ie=$.gl,re=((_e,pe,qe)=>{let ze=Math.cos(pe.rollInRadians),Oe=Math.sin(pe.rollInRadians),ke=Se(pe),De=pe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:_e.properties.get("sky-color"),u_horizon_color:_e.properties.get("horizon-color"),u_horizon:[(pe.width/2-ke*Oe)*qe,(pe.height/2+ke*ze)*qe],u_horizon_normal:[-Oe,ze],u_sky_horizon_blend:_e.properties.get("sky-horizon-blend")*pe.height/2*qe,u_sky_blend:De}})(V,L.style.map.transform,L.pixelRatio),ne=new Ft(ie.LEQUAL,Ft.ReadWrite,[0,1]),se=$t.disabled,de=L.colorModeForRenderPass(),he=L.useProgram("sky"),fe=sa($,V);he.draw($,ie.TRIANGLES,ne,se,de,nr.disabled,re,null,void 0,"sky",fe.vertexBuffer,fe.indexBuffer,fe.segments)}(this,this.style.sky),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){let L=this.style._layers[v[this.currentLayer]],V=b[L.source],$=T[L.source];this._renderTileClippingMasks(L,$,!1),this.renderLayer(this,V,L,$,k)}this.renderPass="translucent";let F=!1;for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){let L=this.style._layers[v[this.currentLayer]],V=b[L.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(L,k))continue;this.opaquePassEnabledForLayer()||F||(F=!0,k.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let $=(L.type==="symbol"?C:q)[L.source];this._renderTileClippingMasks(L,T[L.source],!!this.renderToTexture),this.renderLayer(this,V,L,$,k)}if(k.isRenderingGlobe&&function(L,V,$){let ie=L.context,re=ie.gl,ne=L.useProgram("atmosphere"),se=new Ft(re.LEQUAL,Ft.ReadOnly,[0,1]),de=L.transform,he=function(De,Qe){let Ye=De.properties.get("position"),Ge=[-Ye.x,-Ye.y,-Ye.z],ft=a.ad(new Float64Array(16));return De.properties.get("anchor")==="map"&&(a.a_(ft,ft,Qe.rollInRadians),a.a$(ft,ft,-Qe.pitchInRadians),a.a_(ft,ft,Qe.bearingInRadians),a.a$(ft,ft,Qe.center.lat*Math.PI/180),a.bp(ft,ft,-Qe.center.lng*Math.PI/180)),a.bZ(Ge,Ge,ft),Ge}($,L.transform),fe=de.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),_e=V.properties.get("atmosphere-blend")*fe.projectionTransition;if(_e===0)return;let pe=Sl(de.worldSize,de.center.lat),qe=de.inverseProjectionMatrix,ze=new Float64Array(4);ze[3]=1,a.at(ze,ze,de.modelViewProjectionMatrix),ze[0]/=ze[3],ze[1]/=ze[3],ze[2]/=ze[3],ze[3]=1,a.at(ze,ze,qe),ze[0]/=ze[3],ze[1]/=ze[3],ze[2]/=ze[3],ze[3]=1;let Oe=((De,Qe,Ye,Ge,ft)=>({u_sun_pos:De,u_atmosphere_blend:Qe,u_globe_position:Ye,u_globe_radius:Ge,u_inv_proj_matrix:ft}))(he,_e,[ze[0],ze[1],ze[2]],pe,qe),ke=sa(ie,V);ne.draw(ie,re.TRIANGLES,se,$t.disabled,br.alphaBlended,nr.disabled,Oe,null,null,"atmosphere",ke.vertexBuffer,ke.indexBuffer,ke.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let L=function(V,$){let ie=null,re=Object.values(V._layers).flatMap(he=>he.source&&!he.isHidden($)?[V.sourceCaches[he.source]]:[]),ne=re.filter(he=>he.getSource().type==="vector"),se=re.filter(he=>he.getSource().type!=="vector"),de=he=>{(!ie||ie.getSource().maxzoom<he.getSource().maxzoom)&&(ie=he)};return ne.forEach(he=>de(he)),ie||se.forEach(he=>de(he)),ie}(this.style,this.transform.zoom);L&&function(V,$,ie){for(let re=0;re<ie.length;re++)ni(V,$,ie[re])}(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){let V=L.transform.padding;hf(L,L.transform.height-(V.top||0),3,uf),hf(L,V.bottom||0,3,pv),px(L,V.left||0,3,dx),px(L,L.transform.width-(V.right||0),3,fx);let $=L.transform.centerPoint;(function(ie,re,ne,se){vh(ie,re-1,ne-10,2,20,se),vh(ie,re-10,ne-1,20,2,se)})(L,$.x,L.transform.height-$.y,cf)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;let s=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix,f=this.terrainFacilitator.dirty;f||(f=r?!a.c0(s,d):!a.c1(s,d)),f||(f=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),f&&(a.c2(s,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,b){let T=v.context,q=T.gl,C=v.transform,k=br.unblended,F=new Ft(q.LEQUAL,Ft.ReadWrite,[0,1]),L=b.sourceCache.getRenderableTiles(),V=v.useProgram("terrainDepth");T.bindFramebuffer.set(b.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),T.clear({color:a.b7.transparent,depth:1});for(let $ of L){let ie=b.getTerrainMesh($.tileID),re=b.getTerrainData($.tileID),ne=C.getProjectionData({overscaledTileID:$.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),se={u_ele_delta:b.getMeshFrameDelta(C.zoom)};V.draw(T,q.TRIANGLES,F,$t.disabled,k,nr.backCCW,se,re,ne,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,b){let T=v.context,q=T.gl,C=v.transform,k=br.unblended,F=new Ft(q.LEQUAL,Ft.ReadWrite,[0,1]),L=b.getCoordsTexture(),V=b.sourceCache.getRenderableTiles(),$=v.useProgram("terrainCoords");T.bindFramebuffer.set(b.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),T.clear({color:a.b7.transparent,depth:1}),b.coordsIndex=[];for(let ie of V){let re=b.getTerrainMesh(ie.tileID),ne=b.getTerrainData(ie.tileID);T.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,L.texture);let se={u_terrain_coords_id:(255-b.coordsIndex.length)/255,u_texture:0,u_ele_delta:b.getMeshFrameDelta(C.zoom)},de=C.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});$.draw(T,q.TRIANGLES,F,$t.disabled,k,nr.backCCW,se,ne,de,"terrain",re.vertexBuffer,re.indexBuffer,re.segments),b.coordsIndex.push(ie.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(r,s,d,f,v){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(f||[]).length)&&(this.id=d.id,a.c3(d)?function(b,T,q,C,k,F){if(b.renderPass!=="translucent")return;let{isRenderingToTexture:L}=F,V=$t.disabled,$=b.colorModeForRenderPass();(q._unevaluatedLayout.hasValue("text-variable-anchor")||q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ie,re,ne,se,de,he,fe,_e,pe){let qe=re.transform,ze=re.style.map.terrain,Oe=de==="map",ke=he==="map";for(let De of ie){let Qe=se.getTile(De),Ye=Qe.getBucket(ne);if(!Ye||!Ye.text||!Ye.text.segments.get().length)continue;let Ge=a.ak(Ye.textSizeData,qe.zoom),ft=a.az(Qe,1,re.transform.zoom),Wt=St(Oe,re.transform,ft),ar=ne.layout.get("icon-text-fit")!=="none"&&Ye.hasIconData();if(Ge){let Br=Math.pow(2,qe.zoom-Qe.tileID.overscaledZ),Sr=ze?(jr,Ur)=>ze.getElevation(De,jr,Ur):null;cx(Ye,Oe,ke,pe,qe,Wt,Br,Ge,ar,a.aA(qe,Qe,fe,_e),De.toUnwrapped(),Sr)}}}(C,b,q,T,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),k),q.paint.get("icon-opacity").constantOr(1)!==0&&af(b,T,q,C,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),V,$,L),q.paint.get("text-opacity").constantOr(1)!==0&&af(b,T,q,C,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),V,$,L),T.map.showCollisionBoxes&&(cv(b,T,q,C,!0),cv(b,T,q,C,!1))}(r,s,d,f,this.style.placement.variableOffsets,v):a.c4(d)?function(b,T,q,C,k){if(b.renderPass!=="translucent")return;let{isRenderingToTexture:F}=k,L=q.paint.get("circle-opacity"),V=q.paint.get("circle-stroke-width"),$=q.paint.get("circle-stroke-opacity"),ie=!q.layout.get("circle-sort-key").isConstant();if(L.constantOr(1)===0&&(V.constantOr(1)===0||$.constantOr(1)===0))return;let re=b.context,ne=re.gl,se=b.transform,de=b.getDepthModeForSublayer(0,Ft.ReadOnly),he=$t.disabled,fe=b.colorModeForRenderPass(),_e=[],pe=se.getCircleRadiusCorrection();for(let qe=0;qe<C.length;qe++){let ze=C[qe],Oe=T.getTile(ze),ke=Oe.getBucket(q);if(!ke)continue;let De=q.paint.get("circle-translate"),Qe=q.paint.get("circle-translate-anchor"),Ye=a.aA(se,Oe,De,Qe),Ge=ke.programConfigurations.get(q.id),ft=b.useProgram("circle",Ge),Wt=ke.layoutVertexBuffer,ar=ke.indexBuffer,Br=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ze),Sr={programConfiguration:Ge,program:ft,layoutVertexBuffer:Wt,indexBuffer:ar,uniformValues:sh(b,Oe,q,Ye,pe),terrainData:Br,projectionData:se.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!F,applyTerrainMatrix:!0})};if(ie){let jr=ke.segments.get();for(let Ur of jr)_e.push({segments:new a.aJ([Ur]),sortKey:Ur.sortKey,state:Sr})}else _e.push({segments:ke.segments,sortKey:0,state:Sr})}ie&&_e.sort((qe,ze)=>qe.sortKey-ze.sortKey);for(let qe of _e){let{programConfiguration:ze,program:Oe,layoutVertexBuffer:ke,indexBuffer:De,uniformValues:Qe,terrainData:Ye,projectionData:Ge}=qe.state;Oe.draw(re,ne.TRIANGLES,de,he,fe,nr.backCCW,Qe,Ye,Ge,q.id,ke,De,qe.segments,q.paint,b.transform.zoom,ze)}}(r,s,d,f,v):a.c5(d)?function(b,T,q,C,k){if(q.paint.get("heatmap-opacity")===0)return;let F=b.context,{isRenderingToTexture:L,isRenderingGlobe:V}=k;if(b.style.map.terrain){for(let $ of C){let ie=T.getTile($);T.hasRenderableParent($)||(b.renderPass==="offscreen"?of(b,ie,q,$,V):b.renderPass==="translucent"&&hv(b,q,$,L,V))}F.viewport.set([0,0,b.width,b.height])}else b.renderPass==="offscreen"?function($,ie,re,ne){let se=$.context,de=se.gl,he=$.transform,fe=$t.disabled,_e=new br([de.ONE,de.ONE],a.b7.transparent,[!0,!0,!0,!0]);(function(pe,qe,ze){let Oe=pe.gl;pe.activeTexture.set(Oe.TEXTURE1),pe.viewport.set([0,0,qe.width/4,qe.height/4]);let ke=ze.heatmapFbos.get(a.bW);ke?(Oe.bindTexture(Oe.TEXTURE_2D,ke.colorAttachment.get()),pe.bindFramebuffer.set(ke.framebuffer)):(ke=sf(pe,qe.width/4,qe.height/4),ze.heatmapFbos.set(a.bW,ke))})(se,$,re),se.clear({color:a.b7.transparent});for(let pe=0;pe<ne.length;pe++){let qe=ne[pe];if(ie.hasRenderableParent(qe))continue;let ze=ie.getTile(qe),Oe=ze.getBucket(re);if(!Oe)continue;let ke=Oe.programConfigurations.get(re.id),De=$.useProgram("heatmap",ke),Qe=he.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ye=he.getCircleRadiusCorrection();De.draw(se,de.TRIANGLES,Ft.disabled,fe,_e,nr.backCCW,Al(ze,he.zoom,re.paint.get("heatmap-intensity"),Ye),null,Qe,re.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,re.paint,he.zoom,ke)}se.viewport.set([0,0,$.width,$.height])}(b,T,q,C):b.renderPass==="translucent"&&function($,ie){let re=$.context,ne=re.gl;re.setColorMode($.colorModeForRenderPass());let se=ie.heatmapFbos.get(a.bW);se&&(re.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,se.colorAttachment.get()),re.activeTexture.set(ne.TEXTURE1),dv(re,ie).bind(ne.LINEAR,ne.CLAMP_TO_EDGE),$.useProgram("heatmapTexture").draw(re,ne.TRIANGLES,Ft.disabled,$t.disabled,$.colorModeForRenderPass(),nr.disabled,G0($,ie,0,1),null,null,ie.id,$.viewportBuffer,$.quadTriangleIndexBuffer,$.viewportSegments,ie.paint,$.transform.zoom))}(b,q)}(r,s,d,f,v):a.c6(d)?function(b,T,q,C,k){if(b.renderPass!=="translucent")return;let{isRenderingToTexture:F}=k,L=q.paint.get("line-opacity"),V=q.paint.get("line-width");if(L.constantOr(1)===0||V.constantOr(1)===0)return;let $=b.getDepthModeForSublayer(0,Ft.ReadOnly),ie=b.colorModeForRenderPass(),re=q.paint.get("line-dasharray"),ne=q.paint.get("line-pattern"),se=ne.constantOr(1),de=q.paint.get("line-gradient"),he=q.getCrossfadeParameters(),fe=se?"linePattern":re?"lineSDF":de?"lineGradient":"line",_e=b.context,pe=_e.gl,qe=b.transform,ze=!0;for(let Oe of C){let ke=T.getTile(Oe);if(se&&!ke.patternsLoaded())continue;let De=ke.getBucket(q);if(!De)continue;let Qe=De.programConfigurations.get(q.id),Ye=b.context.program.get(),Ge=b.useProgram(fe,Qe),ft=ze||Ge.program!==Ye,Wt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Oe),ar=ne.constantOr(null);if(ar&&ke.imageAtlas){let Er=ke.imageAtlas,hr=Er.patternPositions[ar.to.toString()],Ai=Er.patternPositions[ar.from.toString()];hr&&Ai&&Qe.setConstantPatternPositions(hr,Ai)}let Br=qe.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),Sr=qe.getPixelScale(),jr=se?X0(b,ke,q,Sr,he):re?J0(b,ke,q,Sr,re,he):de?H0(b,ke,q,Sr,De.lineClipsArray.length):lh(b,ke,q,Sr);if(se)_e.activeTexture.set(pe.TEXTURE0),ke.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Qe.updatePaintBuffers(he);else if(re&&(ft||b.lineAtlas.dirty))_e.activeTexture.set(pe.TEXTURE0),b.lineAtlas.bind(_e);else if(de){let Er=De.gradients[q.id],hr=Er.texture;if(q.gradientVersion!==Er.version){let Ai=256;if(q.stepInterpolant){let Li=T.getSource().maxzoom,Ki=Oe.canonical.z===Li?Math.ceil(1<<b.transform.maxZoom-Oe.canonical.z):1;Ai=a.ae(a.bX(De.maxLineLength/a.Z*1024*Ki),256,_e.maxTextureSize)}Er.gradient=a.bY({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:Ai,image:Er.gradient||void 0,clips:De.lineClipsArray}),Er.texture?Er.texture.update(Er.gradient):Er.texture=new Ne(_e,Er.gradient,pe.RGBA),Er.version=q.gradientVersion,hr=Er.texture}_e.activeTexture.set(pe.TEXTURE0),hr.bind(q.stepInterpolant?pe.NEAREST:pe.LINEAR,pe.CLAMP_TO_EDGE)}let Ur=b.stencilModeForClipping(Oe);Ge.draw(_e,pe.TRIANGLES,$,Ur,ie,nr.disabled,jr,Wt,Br,q.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,q.paint,b.transform.zoom,Qe,De.layoutVertexBuffer2),ze=!1}}(r,s,d,f,v):a.c7(d)?function(b,T,q,C,k){let F=q.paint.get("fill-color"),L=q.paint.get("fill-opacity");if(L.constantOr(1)===0)return;let{isRenderingToTexture:V}=k,$=b.colorModeForRenderPass(),ie=q.paint.get("fill-pattern"),re=b.opaquePassEnabledForLayer()&&!ie.constantOr(1)&&F.constantOr(a.b7.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===re){let ne=b.getDepthModeForSublayer(1,b.renderPass==="opaque"?Ft.ReadWrite:Ft.ReadOnly);fh(b,T,q,C,ne,$,!1,V)}if(b.renderPass==="translucent"&&q.paint.get("fill-antialias")){let ne=b.getDepthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly);fh(b,T,q,C,ne,$,!0,V)}}(r,s,d,f,v):a.c8(d)?function(b,T,q,C,k){let F=q.paint.get("fill-extrusion-opacity");if(F===0)return;let{isRenderingToTexture:L}=k;if(b.renderPass==="translucent"){let V=new Ft(b.context.gl.LEQUAL,Ft.ReadWrite,b.depthRangeFor3D);if(F!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))ph(b,T,q,C,V,$t.disabled,br.disabled,L),ph(b,T,q,C,V,b.stencilModeFor3D(),b.colorModeForRenderPass(),L);else{let $=b.colorModeForRenderPass();ph(b,T,q,C,V,$t.disabled,$,L)}}}(r,s,d,f,v):a.c9(d)?function(b,T,q,C,k){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;let{isRenderingToTexture:F}=k,L=b.context,V=b.style.projection.useSubdivision,$=b.getDepthModeForSublayer(0,Ft.ReadOnly),ie=b.colorModeForRenderPass();if(b.renderPass==="offscreen")(function(re,ne,se,de,he,fe,_e){let pe=re.context,qe=pe.gl;for(let ze of se){let Oe=ne.getTile(ze),ke=Oe.dem;if(!ke||!ke.data||!Oe.needsHillshadePrepare)continue;let De=ke.dim,Qe=ke.stride,Ye=ke.getPixels();if(pe.activeTexture.set(qe.TEXTURE1),pe.pixelStoreUnpackPremultiplyAlpha.set(!1),Oe.demTexture=Oe.demTexture||re.getTileTexture(Qe),Oe.demTexture){let ft=Oe.demTexture;ft.update(Ye,{premultiply:!1}),ft.bind(qe.NEAREST,qe.CLAMP_TO_EDGE)}else Oe.demTexture=new Ne(pe,Ye,qe.RGBA,{premultiply:!1}),Oe.demTexture.bind(qe.NEAREST,qe.CLAMP_TO_EDGE);pe.activeTexture.set(qe.TEXTURE0);let Ge=Oe.fbo;if(!Ge){let ft=new Ne(pe,{width:De,height:De,data:null},qe.RGBA);ft.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),Ge=Oe.fbo=pe.createFramebuffer(De,De,!0,!1),Ge.colorAttachment.set(ft.texture)}pe.bindFramebuffer.set(Ge.framebuffer),pe.viewport.set([0,0,De,De]),re.useProgram("hillshadePrepare").draw(pe,qe.TRIANGLES,he,fe,_e,nr.disabled,zA(Oe.tileID,ke),null,null,de.id,re.rasterBoundsBuffer,re.quadTriangleIndexBuffer,re.rasterBoundsSegments),Oe.needsHillshadePrepare=!1}})(b,T,C,q,$,$t.disabled,ie),L.viewport.set([0,0,b.width,b.height]);else if(b.renderPass==="translucent")if(V){let[re,ne,se]=b.stencilConfigForOverlapTwoPass(C);fv(b,T,q,se,re,$,ie,!1,F),fv(b,T,q,se,ne,$,ie,!0,F)}else{let[re,ne]=b.getStencilConfigForOverlapAndUpdateStencilID(C);fv(b,T,q,ne,re,$,ie,!1,F)}}(r,s,d,f,v):a.ca(d)?function(b,T,q,C,k){if(b.renderPass!=="translucent"||q.paint.get("raster-opacity")===0||!C.length)return;let{isRenderingToTexture:F}=k,L=T.getSource(),V=b.style.projection.useSubdivision;if(L instanceof _n)lf(b,T,q,C,null,!1,!1,L.tileCoords,L.flippedWindingOrder,F);else if(V){let[$,ie,re]=b.stencilConfigForOverlapTwoPass(C);lf(b,T,q,re,$,!1,!0,mh,!1,F),lf(b,T,q,re,ie,!0,!0,mh,!1,F)}else{let[$,ie]=b.getStencilConfigForOverlapAndUpdateStencilID(C);lf(b,T,q,ie,$,!1,!0,mh,!1,F)}}(r,s,d,f,v):a.cb(d)?function(b,T,q,C,k){let F=q.paint.get("background-color"),L=q.paint.get("background-opacity");if(L===0)return;let{isRenderingToTexture:V}=k,$=b.context,ie=$.gl,re=b.style.projection,ne=b.transform,se=ne.tileSize,de=q.paint.get("background-pattern");if(b.isPatternMissing(de))return;let he=!de&&F.a===1&&L===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==he)return;let fe=$t.disabled,_e=b.getDepthModeForSublayer(0,he==="opaque"?Ft.ReadWrite:Ft.ReadOnly),pe=b.colorModeForRenderPass(),qe=b.useProgram(de?"backgroundPattern":"background"),ze=C||be(ne,{tileSize:se,terrain:b.style.map.terrain});de&&($.activeTexture.set(ie.TEXTURE0),b.imageManager.bind(b.context));let Oe=q.getCrossfadeParameters();for(let ke of ze){let De=ne.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!V,applyTerrainMatrix:!0}),Qe=de?BA(L,b,de,{tileID:ke,tileSize:se},Oe):NA(L,F),Ye=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ke),Ge=re.getMeshFromTileID($,ke.canonical,!1,!0,"raster");qe.draw($,ie.TRIANGLES,_e,fe,pe,nr.backCCW,Qe,Ye,De,q.id,Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)}}(r,0,d,f,v):a.cc(d)&&function(b,T,q,C){let{isRenderingGlobe:k}=C,F=b.context,L=q.implementation,V=b.style.projection,$=b.transform,ie=$.getProjectionDataForCustomLayer(k),re={farZ:$.farZ,nearZ:$.nearZ,fov:$.fov*Math.PI/180,modelViewProjectionMatrix:$.modelViewProjectionMatrix,projectionMatrix:$.projectionMatrix,shaderData:{variantName:V.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${V.shaderPreludeCode.vertexSource}`,define:V.shaderDefine},defaultProjectionData:ie},ne=L.renderingMode?L.renderingMode:"2d";if(b.renderPass==="offscreen"){let se=L.prerender;se&&(b.setCustomLayerDefaults(),F.setColorMode(b.colorModeForRenderPass()),se.call(L,F.gl,re),F.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),F.setColorMode(b.colorModeForRenderPass()),F.setStencilMode($t.disabled);let se=ne==="3d"?b.getDepthModeFor3D():b.getDepthModeForSublayer(0,Ft.ReadOnly);F.setDepthMode(se),L.render(F.gl,re),F.setDirty(),b.setBaseState(),F.bindFramebuffer.set(null)}}(r,0,d,v))}saveTileTexture(r){let s=this._tileTextures[r.size[0]];s?s.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){let s=this._tileTextures[r];return s&&s.length>0?s.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;let s=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!s||!d}useProgram(r,s,d=!1,f=[]){this.cache=this.cache||{};let v=!!this.style.map.terrain,b=this.style.projection,T=d?bn.projectionMercator:b.shaderPreludeCode,q=d?bl:b.shaderDefine,C=r+(s?s.cacheKey:"")+`/${d?ir:b.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(v?"/terrain":"")+(f?`/${f.join("/")}`:"");return this.cache[C]||(this.cache[C]=new Ud(this.context,bn[r],s,tx[r],this._showOverdrawInspector,v,T,q,f)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ne(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:r,drawingBufferHeight:s}=this.context.gl;return this.width!==r||this.height!==s}}function gh(m,r){let s,d=!1,f=null,v=null,b=()=>{f=null,d&&(m.apply(v,s),f=setTimeout(b,r),d=!1)};return(...T)=>(d=!0,v=this,s=T,f||b(),f)}class vv{constructor(r){this._getCurrentHash=()=>{let s=window.location.hash.replace("#","");if(this._hashName){let d;return s.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(d=f)}),(d&&d[1]||"").split("/")}return s.split("/")},this._onHashChange=()=>{let s=this._getCurrentHash();if(!this._isValidHash(s))return!1;let d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(s[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+s[2],+s[1]],zoom:+s[0],bearing:d,pitch:+(s[4]||0)}),!0},this._updateHashUnthrottled=()=>{let s=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,s)},this._removeHash=()=>{let s=this._getCurrentHash();if(s.length===0)return;let d=s.join("/"),f=d;f.split("&").length>0&&(f=f.split("&")[0]),this._hashName&&(f=`${this._hashName}=${d}`);let v=window.location.hash.replace(f,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let b=window.location.href.replace(/(#.+)?$/,v);b=b.replace("&&","&"),window.history.replaceState(window.history.state,null,b)},this._updateHash=gh(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){let s=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,f=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,f),b=Math.round(s.lng*v)/v,T=Math.round(s.lat*v)/v,q=this._map.getBearing(),C=this._map.getPitch(),k="";if(k+=r?`/${b}/${T}/${d}`:`${d}/${T}/${b}`,(q||C)&&(k+="/"+Math.round(10*q)/10),C&&(k+=`/${Math.round(C)}`),this._hashName){let F=this._hashName,L=!1,V=window.location.hash.slice(1).split("&").map($=>{let ie=$.split("=")[0];return ie===F?(L=!0,`${ie}=${k}`):$}).filter($=>$);return L||V.push(`${F}=${k}`),`#${V.join("&")}`}return`#${k}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new a.Q(+r[2],+r[1])}catch(v){return!1}let s=+r[0],d=+(r[3]||0),f=+(r[4]||0);return s>=this._map.getMinZoom()&&s<=this._map.getMaxZoom()&&d>=-180&&d<=180&&f>=this._map.getMinPitch()&&f<=this._map.getMaxPitch()}}let yo={linearity:.3,easing:a.cd(0,0,.3,1)},gv=a.e({deceleration:2500,maxSpeed:1400},yo),yh=a.e({deceleration:20,maxSpeed:1400},yo),yv=a.e({deceleration:1e3,maxSpeed:360},yo),mx=a.e({deceleration:1e3,maxSpeed:90},yo),vx=a.e({deceleration:1e3,maxSpeed:360},yo);class gx{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:M.now(),settings:r})}_drainInertiaBuffer(){let r=this._inertiaBuffer,s=M.now();for(;r.length>0&&s-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let s={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:v}of this._inertiaBuffer)s.zoom+=v.zoomDelta||0,s.bearing+=v.bearingDelta||0,s.pitch+=v.pitchDelta||0,s.roll+=v.rollDelta||0,v.panDelta&&s.pan._add(v.panDelta),v.around&&(s.around=v.around),v.pinchAround&&(s.pinchAround=v.pinchAround);let d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(s.pan.mag()){let v=Tu(s.pan.mag(),d,a.e({},gv,r||{})),b=s.pan.mult(v.amount/s.pan.mag()),T=this._map.cameraHelper.handlePanInertia(b,this._map.transform);f.center=T.easingCenter,f.offset=T.easingOffset,Su(f,v)}if(s.zoom){let v=Tu(s.zoom,d,yh);f.zoom=this._map.transform.zoom+v.amount,Su(f,v)}if(s.bearing){let v=Tu(s.bearing,d,yv);f.bearing=this._map.transform.bearing+a.ae(v.amount,-179,179),Su(f,v)}if(s.pitch){let v=Tu(s.pitch,d,mx);f.pitch=this._map.transform.pitch+v.amount,Su(f,v)}if(s.roll){let v=Tu(s.roll,d,vx);f.roll=this._map.transform.roll+a.ae(v.amount,-179,179),Su(f,v)}if(f.zoom||f.bearing){let v=s.pinchAround===void 0?s.around:s.pinchAround;f.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),a.e(f,{noMoveStart:!0})}}function Su(m,r){(!m.duration||m.duration<r.duration)&&(m.duration=r.duration,m.easing=r.easing)}function Tu(m,r,s){let{maxSpeed:d,linearity:f,deceleration:v}=s,b=a.ae(m*f/(r/1e3),-d,d),T=Math.abs(b)/(v*f);return{easing:s.easing,duration:1e3*T,amount:b*(T/2)}}class Ei extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,s,d,f={}){d=d instanceof MouseEvent?d:new MouseEvent(r,d);let v=O.mousePos(s.getCanvas(),d),b=s.unproject(v);super(r,a.e({point:v,lngLat:b,originalEvent:d},f)),this._defaultPrevented=!1,this.target=s}}class Eu extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,s,d){let f=r==="touchend"?d.changedTouches:d.touches,v=O.touchPos(s.getCanvasContainer(),f),b=v.map(q=>s.unproject(q)),T=v.reduce((q,C,k,F)=>q.add(C.div(F.length)),new a.P(0,0));super(r,{points:v,point:T,lngLats:b,lngLat:s.unproject(T),originalEvent:d}),this._defaultPrevented=!1}}class _v extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,s,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class yx{constructor(r,s){this._map=r,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new _v(r.type,this._map,r))}mousedown(r,s){return this._mousedownPos=s,this._firePreventable(new Ei(r.type,this._map,r))}mouseup(r){this._map.fire(new Ei(r.type,this._map,r))}click(r,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Ei(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Ei(r.type,this._map,r))}mouseover(r){this._map.fire(new Ei(r.type,this._map,r))}mouseout(r){this._map.fire(new Ei(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Eu(r.type,this._map,r))}touchmove(r){this._map.fire(new Eu(r.type,this._map,r))}touchend(r){this._map.fire(new Eu(r.type,this._map,r))}touchcancel(r){this._map.fire(new Eu(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _x{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Ei(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ei("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Ei(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Au{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(a.P.convert(r),this._map.terrain)}}class xv{constructor(r,s){this._map=r,this._tr=new Au(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,s){this.isEnabled()&&r.shiftKey&&r.button===0&&(O.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(r,s){if(!this._active)return;let d=s;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;let f=this._startPos;this._lastPos=d,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));let v=Math.min(f.x,d.x),b=Math.max(f.x,d.x),T=Math.min(f.y,d.y),q=Math.max(f.y,d.y);O.setTransform(this._box,`translate(${v}px,${T}px)`),this._box.style.width=b-v+"px",this._box.style.height=q-T+"px"}mouseupWindow(r,s){if(!this._active||r.button!==0)return;let d=this._startPos,f=s;if(this.reset(),O.suppressClick(),d.x!==f.x||d.y!==f.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(d,f,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,s){return this._map.fire(new a.l(r,{originalEvent:s}))}}function df(m,r){if(m.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${r.length}`);let s={};for(let d=0;d<m.length;d++)s[m[d].identifier]=r[d];return s}class xx{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,s,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(f){let v=new a.P(0,0);for(let b of f)v._add(b);return v.div(f.length)}(s),this.touches=df(d,s)))}touchmove(r,s,d){if(this.aborted||!this.centroid)return;let f=df(d,s);for(let v in this.touches){let b=f[v];(!b||b.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(r,s,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){let f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class qu{constructor(r){this.singleTap=new xx(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,s,d){this.singleTap.touchstart(r,s,d)}touchmove(r,s,d){this.singleTap.touchmove(r,s,d)}touchend(r,s,d){let f=this.singleTap.touchend(r,s,d);if(f){let v=r.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(f)<30;if(v&&b||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class bx{constructor(r){this._tr=new Au(r),this._zoomIn=new qu({numTouches:1,numTaps:2}),this._zoomOut=new qu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,s,d){this._zoomIn.touchstart(r,s,d),this._zoomOut.touchstart(r,s,d)}touchmove(r,s,d){this._zoomIn.touchmove(r,s,d),this._zoomOut.touchmove(r,s,d)}touchend(r,s,d){let f=this._zoomIn.touchend(r,s,d),v=this._zoomOut.touchend(r,s,d),b=this._tr;return f?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(f)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class un{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){let s=this._moveFunction(...r);if(s.bearingDelta||s.pitchDelta||s.rollDelta||s.around||s.panDelta)return this._active=!0,s}dragStart(r,s){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(s)?s[0]:s,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,s){if(!this.isEnabled())return;let d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);let f=Array.isArray(s)?s[0]:s;return!this._moved&&f.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=f,this._move(d,f))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&O.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Xa={0:1,2:2};class Iu{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){let s=O.mouseButton(r);this._eventButton=s}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(s,d){let f=Xa[d];return s.buttons===void 0||(s.buttons&f)!==f}(r,this._eventButton)}isValidEndEvent(r){return O.mouseButton(r)===this._eventButton}}class Ja{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Pu{constructor(r=new Iu({checkCorrectEvent:()=>!0}),s=new Ja){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=s}_executeRelevantHandler(r,s,d){return r instanceof MouseEvent?s(r):typeof TouchEvent!="undefined"&&r instanceof TouchEvent?d(r):void 0}startMove(r){this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.startMove(s),s=>this.oneFingerTouchMoveStateManager.startMove(s))}endMove(r){this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.endMove(s),s=>this.oneFingerTouchMoveStateManager.endMove(s))}isValidStartEvent(r){return this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.isValidStartEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidStartEvent(s))}isValidMoveEvent(r){return this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.isValidMoveEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(s))}isValidEndEvent(r){return this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.isValidEndEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidEndEvent(s))}}let ff=m=>{m.mousedown=m.dragStart,m.mousemoveWindow=m.dragMove,m.mouseup=m.dragEnd,m.contextmenu=r=>{r.preventDefault()}};class HA{constructor(r,s){this._clickTolerance=r.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,s,d){return this._calculateTransform(r,s,d)}touchmove(r,s,d){if(this._active){if(!this._shouldBePrevented(d.length))return r.preventDefault(),this._calculateTransform(r,s,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,s,d){this._calculateTransform(r,s,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,s,d){d.length>0&&(this._active=!0);let f=df(d,s),v=new a.P(0,0),b=new a.P(0,0),T=0;for(let C in f){let k=f[C],F=this._touches[C];F&&(v._add(k),b._add(k.sub(F)),T++,f[C]=k)}if(this._touches=f,this._shouldBePrevented(T)||!b.mag())return;let q=b.div(T);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(T),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bv{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,s,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([s[0],s[1]]))}touchmove(r,s,d){if(!this._firstTwoTouches)return;r.preventDefault();let[f,v]=this._firstTwoTouches,b=pf(d,s,f),T=pf(d,s,v);if(!b||!T)return;let q=this._aroundCenter?null:b.add(T).div(2);return this._move([b,T],q,r)}touchend(r,s,d){if(!this._firstTwoTouches)return;let[f,v]=this._firstTwoTouches,b=pf(d,s,f),T=pf(d,s,v);b&&T||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function pf(m,r,s){for(let d=0;d<m.length;d++)if(m[d].identifier===s)return r[d]}function wv(m,r){return Math.log(m/r)/Math.LN2}class Cu extends bv{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,s){let d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(wv(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wv(this._distance,d),pinchAround:s}}}function _o(m,r){return 180*m.angleWith(r)/Math.PI}class ct extends bv{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,s,d){let f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:_o(this._vector,f),pinchAround:s}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());let s=25/(Math.PI*this._minDiameter)*360,d=_o(r,this._startVector);return Math.abs(d)<s}}function mf(m){return Math.abs(m.y)>Math.abs(m.x)}class vf extends bv{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,s,d){super.touchstart(r,s,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,mf(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,s,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let f=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,v,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(f.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(r,s,d){if(this._valid!==void 0)return this._valid;let f=r.mag()>=2,v=s.mag()>=2;if(!f&&!v)return;if(!f||!v)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;let b=r.y>0==s.y>0;return mf(r)&&mf(s)&&b}}let wx={panStep:100,bearingStep:15,pitchStep:10};class Mu{constructor(r){this._tr=new Au(r);let s=wx;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let s=0,d=0,f=0,v=0,b=0;switch(r.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?f=1:(r.preventDefault(),b=-1);break;case 40:r.shiftKey?f=-1:(r.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(d=0,f=0),{cameraAnimation:T=>{let q=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:_h,zoom:s?Math.round(q.zoom)+s*(r.shiftKey?2:1):q.zoom,bearing:q.bearing+d*this._bearingStep,pitch:q.pitch+f*this._pitchStep,offset:[-v*this._panStep,-b*this._panStep],center:q.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function _h(m){return m*(2-m)}let Sv=4.000244140625;class Yt{constructor(r,s){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new Au(r),this._triggerRenderFrame=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let s=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,d=M.now(),f=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,s!==0&&s%Sv==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(f*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),r.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=r,this._delta-=s,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let s=O.mousePos(this._map.getCanvas(),r),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(a.Q.convert(d.center)):s,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let T=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=T),typeof this._targetZoom=="number"&&(this._targetZoom+=T)}if(this._delta!==0){let T=this._type==="wheel"&&Math.abs(this._delta)>Sv?this._wheelZoomRate:this._defaultZoomRate,q=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&q!==0&&(q=1/q);let C=typeof this._targetZoom!="number"?r.scale:a.ac(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),a.ah(C*q)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let s=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,d=this._startZoom,f=this._easing,v,b=!1;if(this._type==="wheel"&&d&&f){let T=M.now()-this._lastWheelEventTime,q=Math.min((T+5)/200,1),C=f(q);v=a.B.number(d,s,C),q<1?this._frameId||(this._frameId=!0):b=!0}else v=s,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=v,{noInertia:!0,needsRenderFrame:!b,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let s=a.cf;if(this._prevEase){let d=this._prevEase,f=(M.now()-d.start)/d.duration,v=d.easing(f+.01)-d.easing(f),b=.27/Math.sqrt(v*v+1e-4)*.01,T=Math.sqrt(.0729-b*b);s=a.cd(b,T,.25,1)}return this._prevEase={start:M.now(),duration:r,easing:s},s}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class gf{constructor(r,s){this._clickZoom=r,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class XA{constructor(r){this._tr=new Au(r),this.reset()}reset(){this._active=!1}dblclick(r,s){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(s)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tv{constructor(){this._tap=new qu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,s,d){if(!this._swipePoint)if(this._tapTime){let f=s[0],v=r.timeStamp-this._tapTime<500,b=this._tapPoint.dist(f)<30;v&&b?d.length>0&&(this._swipePoint=f,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,s,d)}touchmove(r,s,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;let f=s[0],v=f.y-this._swipePoint.y;return this._swipePoint=f,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,s,d)}touchend(r,s,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{let f=this._tap.touchend(r,s,d);f&&(this._tapTime=r.timeStamp,this._tapPoint=f)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sx{constructor(r,s,d){this._el=r,this._mousePan=s,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Tx{constructor(r,s,d,f){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=s,this._mousePitch=d,this._mouseRoll=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ev{constructor(r,s,d,f){this._el=r,this._touchZoom=s,this._touchRotate=d,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class yf{constructor(r,s){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=s,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=O.create("div","maplibregl-cooperative-gesture-screen",r);let s=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(s=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),f=document.createElement("div");f.className="maplibregl-desktop-message",f.textContent=s,this._container.appendChild(f);let v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=d,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(O.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,s){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:r,originalEvent:s})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let xh=m=>m.zoom||m.drag||m.roll||m.pitch||m.rotate;class JA extends a.l{}function _f(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta||m.rollDelta}class YA{constructor(r,s){this.handleWindowEvent=f=>{this.handleEvent(f,`${f.type}Window`)},this.handleEvent=(f,v)=>{if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let b=f.type==="renderFrame"?void 0:f,T={needsRenderFrame:!1},q={},C={};for(let{handlerName:L,handler:V,allowed:$}of this._handlers){if(!V.isEnabled())continue;let ie;if(this._blockedByActive(C,$,L))V.reset();else if(V[v||f.type]){if(a.cg(f,v||f.type)){let re=O.mousePos(this._map.getCanvas(),f);ie=V[v||f.type](f,re)}else if(a.ch(f,v||f.type)){let re=this._getMapTouches(f.touches),ne=O.touchPos(this._map.getCanvas(),re);ie=V[v||f.type](f,ne,re)}else a.ci(v||f.type)||(ie=V[v||f.type](f));this.mergeHandlerResult(T,q,ie,L,b),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()}(ie||V.isActive())&&(C[L]=V)}let k={};for(let L in this._previousActiveHandlers)C[L]||(k[L]=b);this._previousActiveHandlers=C,(Object.keys(k).length||_f(T))&&(this._changes.push([T,q,k]),this._triggerRenderFrame()),(Object.keys(C).length||_f(T))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:F}=T;F&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],F(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new gx(r),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s);let d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(let[f,v,b]of this._listeners)O.addEventListener(f,v,f===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(let[r,s,d]of this._listeners)O.removeEventListener(r,s,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){let s=this._map,d=s.getCanvasContainer();this._add("mapEvent",new yx(s,r));let f=s.boxZoom=new xv(s,r);this._add("boxZoom",f),r.interactive&&r.boxZoom&&f.enable();let v=s.cooperativeGestures=new yf(s,r.cooperativeGestures);this._add("cooperativeGestures",v),r.cooperativeGestures&&v.enable();let b=new bx(s),T=new XA(s);s.doubleClickZoom=new gf(T,b),this._add("tapZoom",b),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&s.doubleClickZoom.enable();let q=new Tv;this._add("tapDragZoom",q);let C=s.touchPitch=new vf(s);this._add("touchPitch",C),r.interactive&&r.touchPitch&&s.touchPitch.enable(r.touchPitch);let k=()=>s.project(s.getCenter()),F=function({enable:he,clickTolerance:fe,aroundCenter:_e=!0,minPixelCenterThreshold:pe=100,rotateDegreesPerPixelMoved:qe=.8},ze){let Oe=new Iu({checkCorrectEvent:ke=>O.mouseButton(ke)===0&&ke.ctrlKey||O.mouseButton(ke)===2&&!ke.ctrlKey});return new un({clickTolerance:fe,move:(ke,De)=>{let Qe=ze();if(_e&&Math.abs(Qe.y-ke.y)>pe)return{bearingDelta:a.ce(new a.P(ke.x,De.y),De,Qe)};let Ye=(De.x-ke.x)*qe;return _e&&De.y<Qe.y&&(Ye=-Ye),{bearingDelta:Ye}},moveStateManager:Oe,enable:he,assignEvents:ff})}(r,k),L=function({enable:he,clickTolerance:fe,pitchDegreesPerPixelMoved:_e=-.5}){let pe=new Iu({checkCorrectEvent:qe=>O.mouseButton(qe)===0&&qe.ctrlKey||O.mouseButton(qe)===2});return new un({clickTolerance:fe,move:(qe,ze)=>({pitchDelta:(ze.y-qe.y)*_e}),moveStateManager:pe,enable:he,assignEvents:ff})}(r),V=function({enable:he,clickTolerance:fe,rollDegreesPerPixelMoved:_e=.3},pe){let qe=new Iu({checkCorrectEvent:ze=>O.mouseButton(ze)===2&&ze.ctrlKey});return new un({clickTolerance:fe,move:(ze,Oe)=>{let ke=pe(),De=(Oe.x-ze.x)*_e;return Oe.y<ke.y&&(De=-De),{rollDelta:De}},moveStateManager:qe,enable:he,assignEvents:ff})}(r,k);s.dragRotate=new Tx(r,F,L,V),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",L,["mouseRotate","mouseRoll"]),this._add("mouseRoll",V,["mousePitch"]),r.interactive&&r.dragRotate&&s.dragRotate.enable();let $=function({enable:he,clickTolerance:fe}){let _e=new Iu({checkCorrectEvent:pe=>O.mouseButton(pe)===0&&!pe.ctrlKey});return new un({clickTolerance:fe,move:(pe,qe)=>({around:qe,panDelta:qe.sub(pe)}),activateOnStart:!0,moveStateManager:_e,enable:he,assignEvents:ff})}(r),ie=new HA(r,s);s.dragPan=new Sx(d,$,ie),this._add("mousePan",$),this._add("touchPan",ie,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&s.dragPan.enable(r.dragPan);let re=new ct,ne=new Cu;s.touchZoomRotate=new Ev(d,ne,re,q),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&s.touchZoomRotate.enable(r.touchZoomRotate);let se=s.scrollZoom=new Yt(s,()=>this._triggerRenderFrame());this._add("scrollZoom",se,["mousePan"]),r.interactive&&r.scrollZoom&&s.scrollZoom.enable(r.scrollZoom);let de=s.keyboard=new Mu(s);this._add("keyboard",de),r.interactive&&r.keyboard&&s.keyboard.enable(),this._add("blockableMapEvent",new _x(s))}_add(r,s,d){this._handlers.push({handlerName:r,handler:s,allowed:d}),this._handlersById[r]=s}stop(r){if(!this._updatingCamera){for(let{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(let{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!xh(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,s,d){for(let f in r)if(f!==d&&(!s||s.indexOf(f)<0))return!0;return!1}_getMapTouches(r){let s=[];for(let d of r)this._el.contains(d.target)&&s.push(d);return s}mergeHandlerResult(r,s,d,f,v){if(!d)return;a.e(r,d);let b={handlerName:f,originalEvent:d.originalEvent||v};d.zoomDelta!==void 0&&(s.zoom=b),d.panDelta!==void 0&&(s.drag=b),d.rollDelta!==void 0&&(s.roll=b),d.pitchDelta!==void 0&&(s.pitch=b),d.bearingDelta!==void 0&&(s.rotate=b)}_applyChanges(){let r={},s={},d={};for(let[f,v,b]of this._changes)f.panDelta&&(r.panDelta=(r.panDelta||new a.P(0,0))._add(f.panDelta)),f.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+f.pitchDelta),f.rollDelta&&(r.rollDelta=(r.rollDelta||0)+f.rollDelta),f.around!==void 0&&(r.around=f.around),f.pinchAround!==void 0&&(r.pinchAround=f.pinchAround),f.noInertia&&(r.noInertia=f.noInertia),a.e(s,v),a.e(d,b);this._updateMapTransform(r,s,d),this._changes=[]}_updateMapTransform(r,s,d){let f=this._map,v=f._getTransformForUpdate(),b=f.terrain;if(!(_f(r)||b&&this._terrainMovement))return this._fireEvents(s,d,!0);f._stop(!0);let{panDelta:T,zoomDelta:q,bearingDelta:C,pitchDelta:k,rollDelta:F,around:L,pinchAround:V}=r;V!==void 0&&(L=V),L=L||f.transform.centerPoint,b&&!v.isPointOnMapSurface(L)&&(L=v.centerPoint);let $={panDelta:T,zoomDelta:q,rollDelta:F,pitchDelta:k,bearingDelta:C,around:L};this._map.cameraHelper.useGlobeControls&&!v.isPointOnMapSurface(L)&&(L=v.centerPoint);let ie=L.distSqr(v.centerPoint)<.01?v.center:v.screenPointToLocation(T?L.sub(T):L);b?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom($,v),this._terrainMovement||!s.drag&&!s.zoom?s.drag&&this._terrainMovement?v.setCenter(v.screenPointToLocation(v.centerPoint.sub(T))):this._map.cameraHelper.handleMapControlsPan($,v,ie):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan($,v,ie))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom($,v),this._map.cameraHelper.handleMapControlsPan($,v,ie)),f._applyUpdatedTransform(v),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(s,d,!0)}_fireEvents(r,s,d){let f=xh(this._eventsInProgress),v=xh(r),b={};for(let F in r){let{originalEvent:L}=r[F];this._eventsInProgress[F]||(b[`${F}start`]=L),this._eventsInProgress[F]=r[F]}!f&&v&&this._fireEvent("movestart",v.originalEvent);for(let F in b)this._fireEvent(F,b[F]);v&&this._fireEvent("move",v.originalEvent);for(let F in r){let{originalEvent:L}=r[F];this._fireEvent(F,L)}let T={},q;for(let F in this._eventsInProgress){let{handlerName:L,originalEvent:V}=this._eventsInProgress[F];this._handlersById[L].isActive()||(delete this._eventsInProgress[F],q=s[L]||V,T[`${F}end`]=q)}for(let F in T)this._fireEvent(F,T[F]);let C=xh(this._eventsInProgress),k=(f||v)&&!C;if(k&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let F=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&F.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(F)}if(d&&k){this._updatingCamera=!0;let F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),L=V=>V!==0&&-this._bearingSnap<V&&V<this._bearingSnap;!F||!F.essential&&M.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:q})),L(this._map.getBearing())&&this._map.resetNorth()):(L(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:q})),this._updatingCamera=!1}}_fireEvent(r,s){this._map.fire(new a.l(r,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new JA("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class QA extends a.E{constructor(r,s,d){super(),this._renderFrameCallback=()=>{let f=Math.min((M.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this.cameraHelper=s,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,s){r.apply(this.transform),this.transform=r,this.cameraHelper=s}getCenter(){return new a.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(r,s){return this.jumpTo({center:r},s)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,s){return this.jumpTo({elevation:r},s),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,s,d){return r=a.P.convert(r).mult(-1),this.panTo(this.transform.center,a.e({offset:r},s),d)}panTo(r,s,d){return this.easeTo(a.e({center:r},s),d)}getZoom(){return this.transform.zoom}setZoom(r,s){return this.jumpTo({zoom:r},s),this}zoomTo(r,s,d){return this.easeTo(a.e({zoom:r},s),d)}zoomIn(r,s){return this.zoomTo(this.getZoom()+1,r,s),this}zoomOut(r,s){return this.zoomTo(this.getZoom()-1,r,s),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,s){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new a.l("movestart",s)).fire(new a.l("move",s)).fire(new a.l("moveend",s))),this}getBearing(){return this.transform.bearing}setBearing(r,s){return this.jumpTo({bearing:r},s),this}getPadding(){return this.transform.padding}setPadding(r,s){return this.jumpTo({padding:r},s),this}rotateTo(r,s,d){return this.easeTo(a.e({bearing:r},s),d)}resetNorth(r,s){return this.rotateTo(0,a.e({duration:1e3},r),s),this}resetNorthPitch(r,s){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},r),s),this}snapToNorth(r,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,s):this}getPitch(){return this.transform.pitch}setPitch(r,s){return this.jumpTo({pitch:r},s),this}getRoll(){return this.transform.roll}setRoll(r,s){return this.jumpTo({roll:r},s),this}cameraForBounds(r,s){r=gr.convert(r).adjustAntiMeridian();let d=s&&s.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,s)}_cameraForBoxAndBearing(r,s,d,f){let v={top:0,bottom:0,right:0,left:0};if(typeof(f=a.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){let C=f.padding;f.padding={top:C,bottom:C,right:C,left:C}}let b=a.e(v,f.padding);f.padding=b;let T=this.transform,q=new gr(r,s);return this.cameraHelper.cameraForBoxAndBearing(f,b,q,d,T)}fitBounds(r,s,d){return this._fitInternal(this.cameraForBounds(r,s),s,d)}fitScreenCoordinates(r,s,d,f,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(r)),this.transform.screenPointToLocation(a.P.convert(s)),d,f),f,v)}_fitInternal(r,s,d){return r?(delete(s=a.e(r,s)).padding,s.linear?this.easeTo(s,d):this.flyTo(s,d)):this}jumpTo(r,s){this.stop();let d=this._getTransformForUpdate(),f=!1,v=!1,b=!1,T=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,r);let q=d.zoom!==T;return"elevation"in r&&d.elevation!==+r.elevation&&d.setElevation(+r.elevation),"bearing"in r&&d.bearing!==+r.bearing&&(f=!0,d.setBearing(+r.bearing)),"pitch"in r&&d.pitch!==+r.pitch&&(v=!0,d.setPitch(+r.pitch)),"roll"in r&&d.roll!==+r.roll&&(b=!0,d.setRoll(+r.roll)),r.padding==null||d.isPaddingEqual(r.padding)||d.setPadding(r.padding),this._applyUpdatedTransform(d),this.fire(new a.l("movestart",s)).fire(new a.l("move",s)),q&&this.fire(new a.l("zoomstart",s)).fire(new a.l("zoom",s)).fire(new a.l("zoomend",s)),f&&this.fire(new a.l("rotatestart",s)).fire(new a.l("rotate",s)).fire(new a.l("rotateend",s)),v&&this.fire(new a.l("pitchstart",s)).fire(new a.l("pitch",s)).fire(new a.l("pitchend",s)),b&&this.fire(new a.l("rollstart",s)).fire(new a.l("roll",s)).fire(new a.l("rollend",s)),this.fire(new a.l("moveend",s))}calculateCameraOptionsFromTo(r,s,d,f=0){let v=a.$.fromLngLat(r,s),b=a.$.fromLngLat(d,f),T=b.x-v.x,q=b.y-v.y,C=b.z-v.z,k=Math.hypot(T,q,C);if(k===0)throw new Error("Can't calculate camera options with same From and To");let F=Math.hypot(T,q),L=a.ah(this.transform.cameraToCenterDistance/k/this.transform.tileSize),V=180*Math.atan2(T,-q)/Math.PI,$=180*Math.acos(F/k)/Math.PI;return $=C<0?90-$:90+$,{center:b.toLngLat(),elevation:f,zoom:L,pitch:$,bearing:V}}calculateCameraOptionsFromCameraLngLatAltRotation(r,s,d,f,v){let b=this.transform.calculateCenterFromCameraLngLatAlt(r,s,d,f);return{center:b.center,elevation:b.elevation,zoom:b.zoom,bearing:d,pitch:f,roll:v}}easeTo(r,s){this._stop(!1,r.easeId),((r=a.e({offset:[0,0],duration:500,easing:a.cf},r)).animate===!1||!r.essential&&M.prefersReducedMotion)&&(r.duration=0);let d=this._getTransformForUpdate(),f=this.getBearing(),v=d.pitch,b=d.roll,T="bearing"in r?this._normalizeBearing(r.bearing,f):f,q="pitch"in r?+r.pitch:v,C="roll"in r?this._normalizeBearing(r.roll,b):b,k="padding"in r?r.padding:d.padding,F=a.P.convert(r.offset),L,V;r.around&&(L=a.Q.convert(r.around),V=d.locationToScreenPoint(L));let $={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ie=this.cameraHelper.handleEaseTo(d,{bearing:T,pitch:q,roll:C,padding:k,around:L,aroundPoint:V,offsetAsPoint:F,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||f!==T,this._pitching=this._pitching||q!==v,this._rolling=this._rolling||C!==b,this._padding=!d.isPaddingEqual(k),this._zooming=this._zooming||ie.isZooming,this._easeId=r.easeId,this._prepareEase(s,r.noMoveStart,$),this.terrain&&this._prepareElevation(ie.elevationCenter),this._ease(re=>{ie.easeFunc(re),this.terrain&&!r.freezeElevation&&this._updateElevation(re),this._applyUpdatedTransform(d),this._fireMoveEvents(s)},re=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(s,re)},r),this}_prepareEase(r,s,d={}){this._moving=!0,s||d.moving||this.fire(new a.l("movestart",r)),this._zooming&&!d.zooming&&this.fire(new a.l("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new a.l("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new a.l("pitchstart",r)),this._rolling&&!d.rolling&&this.fire(new a.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let s=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&s!==this._elevationTarget){let d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(s-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=s}this.transform.setElevation(a.B.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};let s=r.getCameraLngLat(),d=r.getCameraAltitude(),f=this.terrain?this.terrain.getElevationForLngLatZoom(s,r.zoom):0;if(d<f){let v=this.calculateCameraOptionsFromTo(s,f,r.center,r.elevation);return{pitch:v.pitch,zoom:v.zoom}}return{}}_applyUpdatedTransform(r){let s=[];if(s.push(f=>this._elevateCameraIfInsideTerrain(f)),this.transformCameraUpdate&&s.push(f=>this.transformCameraUpdate(f)),!s.length)return;let d=r.clone();for(let f of s){let v=d.clone(),{center:b,zoom:T,roll:q,pitch:C,bearing:k,elevation:F}=f(v);b&&v.setCenter(b),F!==void 0&&v.setElevation(F),T!==void 0&&v.setZoom(T),q!==void 0&&v.setRoll(q),C!==void 0&&v.setPitch(C),k!==void 0&&v.setBearing(k),d.apply(v)}this.transform.apply(d)}_fireMoveEvents(r){this.fire(new a.l("move",r)),this._zooming&&this.fire(new a.l("zoom",r)),this._rotating&&this.fire(new a.l("rotate",r)),this._pitching&&this.fire(new a.l("pitch",r)),this._rolling&&this.fire(new a.l("roll",r))}_afterEase(r,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;let d=this._zooming,f=this._rotating,v=this._pitching,b=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new a.l("zoomend",r)),f&&this.fire(new a.l("rotateend",r)),v&&this.fire(new a.l("pitchend",r)),b&&this.fire(new a.l("rollend",r)),this.fire(new a.l("moveend",r))}flyTo(r,s){if(!r.essential&&M.prefersReducedMotion){let De=a.O(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(De,s)}this.stop(),r=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cf},r);let d=this._getTransformForUpdate(),f=d.bearing,v=d.pitch,b=d.roll,T=d.padding,q="bearing"in r?this._normalizeBearing(r.bearing,f):f,C="pitch"in r?+r.pitch:v,k="roll"in r?this._normalizeBearing(r.roll,b):b,F="padding"in r?r.padding:d.padding,L=a.P.convert(r.offset),V=d.centerPoint.add(L),$=d.screenPointToLocation(V),ie=this.cameraHelper.handleFlyTo(d,{bearing:q,pitch:C,roll:k,padding:F,locationAtOffset:$,offsetAsPoint:L,center:r.center,minZoom:r.minZoom,zoom:r.zoom}),re=r.curve,ne=Math.max(d.width,d.height),se=ne/ie.scaleOfZoom,de=ie.pixelPathLength;typeof ie.scaleOfMinZoom=="number"&&(re=Math.sqrt(ne/ie.scaleOfMinZoom/de*2));let he=re*re;function fe(De){let Qe=(se*se-ne*ne+(De?-1:1)*he*he*de*de)/(2*(De?se:ne)*he*de);return Math.log(Math.sqrt(Qe*Qe+1)-Qe)}function _e(De){return(Math.exp(De)-Math.exp(-De))/2}function pe(De){return(Math.exp(De)+Math.exp(-De))/2}let qe=fe(!1),ze=function(De){return pe(qe)/pe(qe+re*De)},Oe=function(De){return ne*((pe(qe)*(_e(Qe=qe+re*De)/pe(Qe))-_e(qe))/he)/de;var Qe},ke=(fe(!0)-qe)/re;if(Math.abs(de)<2e-6||!isFinite(ke)){if(Math.abs(ne-se)<1e-6)return this.easeTo(r,s);let De=se<ne?-1:1;ke=Math.abs(Math.log(se/ne))/re,Oe=()=>0,ze=Qe=>Math.exp(De*re*Qe)}return r.duration="duration"in r?+r.duration:1e3*ke/("screenSpeed"in r?+r.screenSpeed/re:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=f!==q,this._pitching=C!==v,this._rolling=k!==b,this._padding=!d.isPaddingEqual(F),this._prepareEase(s,!1),this.terrain&&this._prepareElevation(ie.targetCenter),this._ease(De=>{let Qe=De*ke,Ye=1/ze(Qe),Ge=Oe(Qe);this._rotating&&d.setBearing(a.B.number(f,q,De)),this._pitching&&d.setPitch(a.B.number(v,C,De)),this._rolling&&d.setRoll(a.B.number(b,k,De)),this._padding&&(d.interpolatePadding(T,F,De),V=d.centerPoint.add(L)),ie.easeFunc(De,Ye,Ge,V),this.terrain&&!r.freezeElevation&&this._updateElevation(De),this._applyUpdatedTransform(d),this._fireMoveEvents(s)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(s)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,s){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,s)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,s,d){d.animate===!1||d.duration===0?(r(1),s()):(this._easeStart=M.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,s){r=a.aL(r,-180,180);let d=Math.abs(r-s);return Math.abs(r-360-s)<d&&(r-=360),Math.abs(r+360-s)<d&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(a.Q.convert(r),this.transform.tileZoom):null}}let Ho={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Cr{constructor(r=Ho){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=s=>{!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"&&s.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,s){let d=this._map._getUIString(`AttributionControl.${s}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){let f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}let s=this._map.style.sourceCaches;for(let f in s){let v=s[f];if(v.used||v.usedForTerrain){let b=v.getSource();b.attribution&&r.indexOf(b.attribution)<0&&r.push(b.attribution)}}r=r.filter(f=>String(f).trim()),r.sort((f,v)=>f.length-v.length),r=r.filter((f,v)=>{for(let b=v+1;b<r.length;b++)if(r[b].indexOf(f)>=0)return!1;return!0});let d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=O.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class bh{constructor(r={}){this._updateCompact=()=>{let s=this._container.children;if(s.length){let d=s[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");let s=O.create("a","maplibregl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Av{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){let s=++this._id;return this._queue.push({callback:r,id:s,cancelled:!1}),s}remove(r){let s=this._currentlyRunning,d=s?this._queue.concat(s):this._queue;for(let f of d)if(f.id===r)return void(f.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let s=this._currentlyRunning=this._queue;this._queue=[];for(let d of s)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ex=a.aG([{name:"a_pos3d",type:"Int16",components:3}]);class Ax extends a.E{constructor(r){super(),this._lastTilesetChange=M.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*Xx(2,this.deltaZoom),r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,s){this.sourceCache.update(r,s),this._renderableTilesKeys=[];let d={};for(let f of be(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))d[f.key]=!0,this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.terrainRttPosMatrix32f=new Float64Array(16),a.bQ(f.terrainRttPosMatrix32f,0,a.Z,a.Z,0,0,1),this._tiles[f.key]=new tt(f,this.tileSize),this._lastTilesetChange=M.now());for(let f in this._tiles)d[f]||delete this._tiles[f]}freeRtt(r){for(let s in this._tiles){let d=this._tiles[s];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,s){return s?this._getTerrainCoordsForTileRanges(r,s):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){let s={};for(let d of this._renderableTilesKeys){let f=this._tiles[d].tileID,v=r.clone(),b=a.b2();if(f.canonical.equals(r.canonical))a.bQ(b,0,a.Z,a.Z,0,0,1);else if(f.canonical.isChildOf(r.canonical)){let T=f.canonical.z-r.canonical.z,q=f.canonical.x-(f.canonical.x>>T<<T),C=f.canonical.y-(f.canonical.y>>T<<T),k=a.Z>>T;a.bQ(b,0,k,k,0,0,1),a.L(b,b,[-q*k,-C*k,0])}else{if(!r.canonical.isChildOf(f.canonical))continue;{let T=r.canonical.z-f.canonical.z,q=r.canonical.x-(r.canonical.x>>T<<T),C=r.canonical.y-(r.canonical.y>>T<<T),k=a.Z>>T;a.bQ(b,0,a.Z,a.Z,0,0,1),a.L(b,b,[q*k,C*k,0]),a.M(b,b,[1/Xx(2,T),1/Xx(2,T),0])}}v.terrainRttPosMatrix32f=new Float32Array(b),s[d]=v}return s}_getTerrainCoordsForTileRanges(r,s){let d={};for(let f of this._renderableTilesKeys){let v=this._tiles[f].tileID;if(!this._isWithinTileRanges(v,s))continue;let b=r.clone(),T=a.b2();if(v.canonical.z===r.canonical.z){let q=r.canonical.x-v.canonical.x,C=r.canonical.y-v.canonical.y;a.bQ(T,0,a.Z,a.Z,0,0,1),a.L(T,T,[q*a.Z,C*a.Z,0])}else if(v.canonical.z>r.canonical.z){let q=v.canonical.z-r.canonical.z,C=v.canonical.x-(v.canonical.x>>q<<q),k=v.canonical.y-(v.canonical.y>>q<<q),F=r.canonical.x-(v.canonical.x>>q),L=r.canonical.y-(v.canonical.y>>q),V=a.Z>>q;a.bQ(T,0,V,V,0,0,1),a.L(T,T,[-C*V+F*a.Z,-k*V+L*a.Z,0])}else{let q=r.canonical.z-v.canonical.z,C=r.canonical.x-(r.canonical.x>>q<<q),k=r.canonical.y-(r.canonical.y>>q<<q),F=(r.canonical.x>>q)-v.canonical.x,L=(r.canonical.y>>q)-v.canonical.y,V=a.Z<<q;a.bQ(T,0,V,V,0,0,1),a.L(T,T,[C*a.Z+F*V,k*a.Z+L*V,0])}b.terrainRttPosMatrix32f=new Float32Array(T),d[f]=b}return d}getSourceTile(r,s){let d=this.sourceCache._source,f=r.overscaledZ-this.deltaZoom;if(f>d.maxzoom&&(f=d.maxzoom),f<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(f).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!v||!v.dem)&&s)for(;f>=d.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(r.scaledTo(f--).key);return v}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,s){return s[r.canonical.z]&&r.canonical.x>=s[r.canonical.z].minTileX&&r.canonical.x<=s[r.canonical.z].maxTileX&&r.canonical.y>=s[r.canonical.z].minTileY&&r.canonical.y<=s[r.canonical.z].maxTileY}}class qx{constructor(r,s,d){this._meshCache={},this.painter=r,this.sourceCache=new Ax(s),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,s,d,f=a.Z){var v;if(!(s>=0&&s<f&&d>=0&&d<f))return 0;let b=this.getTerrainData(r),T=(v=b.tile)===null||v===void 0?void 0:v.dem;if(!T)return 0;let q=a.cj([],[s/f*a.Z,d/f*a.Z],b.u_terrain_matrix),C=[q[0]*T.dim,q[1]*T.dim],k=Math.floor(C[0]),F=Math.floor(C[1]),L=C[0]-k,V=C[1]-F;return T.get(k,F)*(1-L)*(1-V)+T.get(k+1,F)*L*(1-V)+T.get(k,F+1)*(1-L)*V+T.get(k+1,F+1)*L*V}getElevationForLngLatZoom(r,s){if(!a.ck(s,r.wrap()))return 0;let{tileID:d,mercatorX:f,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(r,s);return this.getElevation(d,f%a.Z,v%a.Z,a.Z)}getElevation(r,s,d,f=a.Z){return this.getDEMElevation(r,s,d,f)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){let f=this.painter.context,v=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ne(f,v,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ne(f,new a.R({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ad([])}let s=this.sourceCache.getSourceTile(r,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){let f=this.painter.context;s.demTexture=this.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new Ne(f,s.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),s.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}let d=s&&s+s.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){let f=this.sourceCache.sourceCache._source.maxzoom,v=r.canonical.z-s.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=f?v=r.canonical.z-f:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let b=r.canonical.x-(r.canonical.x>>v<<v),T=r.canonical.y-(r.canonical.y>>v<<v),q=a.cl(new Float64Array(16),[1/(a.Z<<v),1/(a.Z<<v),0]);a.L(q,q,[b*a.Z,T*a.Z,0]),this._demMatrixCache[r.key]={matrix:q,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getFramebuffer(r){let s=this.painter,d=s.width/devicePixelRatio,f=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ne(s.context,{width:d,height:f,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ne(s.context,{width:d,height:f,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(d,f,!0,!1),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,d,f))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,b=0;v<this._coordsTextureSize;v++)for(let T=0;T<this._coordsTextureSize;T++,b+=4)s[b+0]=255&T,s[b+1]=255&v,s[b+2]=T>>8<<4|v>>8,s[b+3]=0;let d=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),f=new Ne(r,d,r.gl.RGBA,{premultiply:!1});return f.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);let s=new Uint8Array(4),d=this.painter.context,f=d.gl,v=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),b=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),f.readPixels(v,T-b-1,1,1,f.RGBA,f.UNSIGNED_BYTE,s),d.bindFramebuffer.set(null);let q=s[0]+(s[2]>>4<<8),C=s[1]+((15&s[2])<<8),k=this.coordsIndex[255-s[3]],F=k&&this.sourceCache.getTileByID(k);if(!F)return null;let L=this._coordsTextureSize,V=(1<<F.tileID.canonical.z)*L;return new a.$((F.tileID.canonical.x*L+q)/V+F.tileID.wrap,(F.tileID.canonical.y*L+C)/V,this.getElevation(F.tileID,q,C,L))}depthAtPoint(r){let s=new Uint8Array(4),d=this.painter.context,f=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),f.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,f.RGBA,f.UNSIGNED_BYTE,s),d.bindFramebuffer.set(null),(s[0]/16777216+s[1]/65536+s[2]/256+s[3])/256}getTerrainMesh(r){var s;let d=((s=this.painter.style.projection)===null||s===void 0?void 0:s.transitionState)>0,f=d&&r.canonical.y===0,v=d&&r.canonical.y===(1<<r.canonical.z)-1,b=`m_${f?"n":""}_${v?"s":""}`;if(this._meshCache[b])return this._meshCache[b];let T=this.painter.context,q=new a.cm,C=new a.aK,k=this.meshSize,F=a.Z/k,L=k*k;for(let pe=0;pe<=k;pe++)for(let qe=0;qe<=k;qe++)q.emplaceBack(qe*F,pe*F,0);for(let pe=0;pe<L;pe+=k+1)for(let qe=0;qe<k;qe++)C.emplaceBack(qe+pe,k+qe+pe+1,k+qe+pe+2),C.emplaceBack(qe+pe,k+qe+pe+2,qe+pe+1);let V=q.length,$=V+(k+1),ie=(k+1)*k,re=f?a.b9:0,ne=f?0:1,se=v?a.ba:a.Z,de=v?0:1;for(let pe=0;pe<=k;pe++)q.emplaceBack(pe*F,re,ne);for(let pe=0;pe<=k;pe++)q.emplaceBack(pe*F,se,de);for(let pe=0;pe<k;pe++)C.emplaceBack(ie+pe,$+pe,$+pe+1),C.emplaceBack(ie+pe,$+pe+1,ie+pe+1),C.emplaceBack(0+pe,V+pe+1,V+pe),C.emplaceBack(0+pe,0+pe+1,V+pe+1);let he=q.length,fe=he+2*(k+1);for(let pe of[0,1])for(let qe=0;qe<=k;qe++)for(let ze of[0,1])q.emplaceBack(pe*a.Z,qe*F,ze);for(let pe=0;pe<2*k;pe+=2)C.emplaceBack(he+pe,he+pe+1,he+pe+3),C.emplaceBack(he+pe,he+pe+3,he+pe+2),C.emplaceBack(fe+pe,fe+pe+3,fe+pe+1),C.emplaceBack(fe+pe,fe+pe+2,fe+pe+3);let _e=new fu(T.createVertexBuffer(q,Ex.members),T.createIndexBuffer(C),a.aJ.simpleSegment(0,0,q.length,C.length));return this._meshCache[b]=_e,_e}getMeshFrameDelta(r){return 2*Math.PI*a.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,s){var d;let{tileID:f}=this._getOverscaledTileIDFromLngLatZoom(r,s);return(d=this.getMinMaxElevation(f).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){let s=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return s&&s.dem&&(d.minElevation=s.dem.min*this.exaggeration,d.maxElevation=s.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,s){let d=a.$.fromLngLat(r.wrap()),f=(1<<s)*a.Z,v=d.x*f,b=d.y*f,T=Math.floor(v/a.Z),q=Math.floor(b/a.Z);return{tileID:new a.Y(s,0,s,T,q),mercatorX:v,mercatorY:b}}}class eq{constructor(r,s,d){this._context=r,this._size=s,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){let s=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Ne(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),s.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),s.colorAttachment.set(d.texture),{id:r,fbo:s,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(s=>r.id!==s),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(let s of this._recentlyUsed)if(!this._objects[s].inUse)return this._objects[s];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(let r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}let Tn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class xf{constructor(r,s){this.painter=r,this.terrain=s,this.pool=new eq(r.context,30,s.sourceCache.tileSize*s.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,s){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(s)),this._coordsAscending={};for(let d in r.sourceCaches){this._coordsAscending[d]={};let f=r.sourceCaches[d].getVisibleCoordinates(),v=r.sourceCaches[d].getSource(),b=v instanceof _n?v.terrainTileRanges:null;for(let T of f){let q=this.terrain.sourceCache.getTerrainCoords(T,b);for(let C in q)this._coordsAscending[d][C]||(this._coordsAscending[d][C]=[]),this._coordsAscending[d][C].push(q[C])}}this._coordsAscendingStr={};for(let d of r._order){let f=r._layers[d],v=f.source;if(Tn[f.type]&&!this._coordsAscendingStr[v]){this._coordsAscendingStr[v]={};for(let b in this._coordsAscending[v])this._coordsAscendingStr[v][b]=this._coordsAscending[v][b].map(T=>T.key).sort().join()}}for(let d of this._renderableTiles)for(let f in this._coordsAscendingStr){let v=this._coordsAscendingStr[f][d.tileID.key];v&&v!==d.rttCoords[f]&&(d.rtt=[])}}renderLayer(r,s){if(r.isHidden(this.painter.transform.zoom))return!1;let d=Object.assign(Object.assign({},s),{isRenderingToTexture:!0}),f=r.type,v=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Tn[f]&&(this._prevType&&Tn[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(r.id),!b))return!0;if(Tn[this._prevType]||Tn[f]&&b){this._prevType=f;let T=this._stacks.length-1,q=this._stacks[T]||[];for(let C of this._renderableTiles){if(this.pool.isFull()&&(Ps(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[T]){let F=this.pool.getObjectForId(C.rtt[T].id);if(F.stamp===C.rtt[T].stamp){this.pool.useObject(F);continue}}let k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),C.rtt[T]={id:k.id,stamp:k.stamp},v.context.bindFramebuffer.set(k.fbo.framebuffer),v.context.clear({color:a.b7.transparent,stencil:0}),v.currentStencilSource=void 0;for(let F=0;F<q.length;F++){let L=v.style._layers[q[F]],V=L.source?this._coordsAscending[L.source][C.tileID.key]:[C.tileID];v.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),v._renderTileClippingMasks(L,V,!0),v.renderLayer(v,v.style.sourceCaches[L.source],L,V,d),L.source&&(C.rttCoords[L.source]=this._coordsAscendingStr[L.source][C.tileID.key])}}return Ps(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),Tn[f]}return!1}}let vt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},It=g,wh={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ho,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},qv={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Iv{constructor(r,s,d=!1){this.mousedown=v=>{this.startMove(v,O.mousePos(this.element,v)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=v=>{this.move(v,O.mousePos(this.element,v))},this.mouseup=v=>{this._rotatePitchHanlder.dragEnd(v),this.offTemp()},this.touchstart=v=>{v.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,v.targetTouches)[0],this.startMove(v,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=v=>{v.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,v.targetTouches)[0],this.move(v,this._lastPos))},this.touchend=v=>{v.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=s;let f=new Pu;this._rotatePitchHanlder=new un({clickTolerance:3,move:(v,b)=>{let T=s.getBoundingClientRect(),q=new a.P((T.bottom-T.top)/2,(T.right-T.left)/2);return{bearingDelta:a.ce(new a.P(v.x,b.y),b,q),pitchDelta:d?-.5*(b.y-v.y):void 0}},moveStateManager:f,enable:!0,assignEvents:()=>{}}),this.map=r,O.addEventListener(s,"mousedown",this.mousedown),O.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(s,"touchcancel",this.reset)}startMove(r,s){this._rotatePitchHanlder.dragStart(r,s),O.disableDrag()}move(r,s){let d=this.map,{bearingDelta:f,pitchDelta:v}=this._rotatePitchHanlder.dragMove(r,s)||{};f&&d.setBearing(d.getBearing()+f),v&&d.setPitch(d.getPitch()+v)}off(){let r=this.element;O.removeEventListener(r,"mousedown",this.mousedown),O.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let pi;function Pv(m,r,s,d=!1){if(d||!s.getCoveringTilesDetailsProvider().allowWorldCopies())return m==null?void 0:m.wrap();let f=new a.Q(m.lng,m.lat);if(m=new a.Q(m.lng,m.lat),r){let v=new a.Q(m.lng-360,m.lat),b=new a.Q(m.lng+360,m.lat),T=s.locationToScreenPoint(m).distSqr(r);s.locationToScreenPoint(v).distSqr(r)<T?m=v:s.locationToScreenPoint(b).distSqr(r)<T&&(m=b)}for(;Math.abs(m.lng-s.center.lng)>180;){let v=s.locationToScreenPoint(m);if(v.x>=0&&v.y>=0&&v.x<=s.width&&v.y<=s.height)break;m.lng>s.center.lng?m.lng-=360:m.lng+=360}return m.lng!==f.lng&&s.isPointOnMapSurface(s.locationToScreenPoint(m))?m:f}let qa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ix(m,r,s){let d=m.classList;for(let f in qa)d.remove(`maplibregl-${s}-anchor-${f}`);d.add(`maplibregl-${s}-anchor-${r}`)}class Cl extends a.E{constructor(r){if(super(),this._onKeyPress=s=>{let d=s.code,f=s.charCode||s.keyCode;d!=="Space"&&d!=="Enter"&&f!==32&&f!==13||this.togglePopup()},this._onMapClick=s=>{let d=s.originalEvent.target,f=this._element;this._popup&&(d===f||f.contains(d))&&this.togglePopup()},this._update=s=>{if(!this._map)return;let d=this._map.loaded()&&!this._map.isMoving();((s==null?void 0:s.type)==="terrain"||(s==null?void 0:s.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=Pv(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(f=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||s&&s.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${qa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${f}`),M.frameAsync(new AbortController).then(()=>{this._updateOpacity(s&&s.type==="moveend")}).catch(()=>{})},this._onMove=s=>{if(!this._isDragging){let d=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=s=>{this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=a.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div");let s=O.createNS("http://www.w3.org/2000/svg","svg"),d=41,f=27;s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height",`${d}px`),s.setAttributeNS(null,"width",`${f}px`),s.setAttributeNS(null,"viewBox",`0 0 ${f} ${d}`);let v=O.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");let b=O.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");let T=O.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");let q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ne of q){let se=O.createNS("http://www.w3.org/2000/svg","ellipse");se.setAttributeNS(null,"opacity","0.04"),se.setAttributeNS(null,"cx","10.5"),se.setAttributeNS(null,"cy","5.80029008"),se.setAttributeNS(null,"rx",ne.rx),se.setAttributeNS(null,"ry",ne.ry),T.appendChild(se)}let C=O.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill",this._color);let k=O.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),C.appendChild(k);let F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");let L=O.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(L);let V=O.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"transform","translate(6.0, 7.0)"),V.setAttributeNS(null,"fill","#FFFFFF");let $=O.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ie=O.createNS("http://www.w3.org/2000/svg","circle");ie.setAttributeNS(null,"fill","#000000"),ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"cx","5.5"),ie.setAttributeNS(null,"cy","5.5"),ie.setAttributeNS(null,"r","5.4999962");let re=O.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#FFFFFF"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962"),$.appendChild(ie),$.appendChild(re),b.appendChild(T),b.appendChild(C),b.appendChild(F),b.appendChild(V),b.appendChild($),s.appendChild(b),s.setAttributeNS(null,"height",d*this._scale+"px"),s.setAttributeNS(null,"width",f*this._scale+"px"),this._element.appendChild(s),this._offset=a.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",s=>{s.preventDefault()}),this._element.addEventListener("mousedown",s=>{s.preventDefault()}),Ix(this._element,this._anchor,"marker"),r&&r.className)for(let s of r.className.split(" "))this._element.classList.add(s);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=a.Q.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){let f=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){let r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var s,d;let f=(s=this._map)===null||s===void 0?void 0:s.terrain,v=this._map.transform.isLocationOccluded(this._lngLat);if(!f||v){let V=v?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==V&&(this._element.style.opacity=V))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let b=this._map,T=b.terrain.depthAtPoint(this._pos),q=b.terrain.getElevationForLngLatZoom(this._lngLat,b.transform.tileZoom);if(b.transform.lngLatToCameraDepth(this._lngLat,q)-T<.006)return void(this._element.style.opacity=this._opacity);let C=-this._offset.y/b.transform.pixelsPerMeter,k=Math.sin(b.getPitch()*Math.PI/180)*C,F=b.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),L=b.transform.lngLatToCameraDepth(this._lngLat,q+k)-F>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&L&&this._popup.remove(),this._element.style.opacity=L?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=a.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,s){return(this._opacity===void 0||r===void 0&&s===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),s!==void 0&&(this._opacityWhenCovered=s),this._map&&this._updateOpacity(!0),this}}let Yr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Nr=0,Ru=!1,Sh={maxWidth:100,unit:"metric"};function Th(m,r,s){let d=s&&s.maxWidth||100,f=m._container.clientHeight/2,v=m._container.clientWidth/2,b=m.unproject([v-d/2,f]),T=m.unproject([v+d/2,f]),q=Math.round(m.project(T).x-m.project(b).x),C=Math.min(d,q,m._container.clientWidth),k=b.distanceTo(T);if(s&&s.unit==="imperial"){let F=3.2808*k;F>5280?Ml(r,C,F/5280,m._getUIString("ScaleControl.Miles")):Ml(r,C,F,m._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?Ml(r,C,k/1852,m._getUIString("ScaleControl.NauticalMiles")):k>=1e3?Ml(r,C,k/1e3,m._getUIString("ScaleControl.Kilometers")):Ml(r,C,k,m._getUIString("ScaleControl.Meters"))}function Ml(m,r,s,d){let f=function(v){let b=Math.pow(10,`${Math.floor(v)}`.length-1),T=v/b;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(q){let C=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*C)/C}(T),b*T}(s);m.style.width=r*(f/s)+"px",m.innerHTML=`${f}&nbsp;${d}`}let Cv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Mv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ou(m){if(m){if(typeof m=="number"){let r=Math.round(Math.abs(m)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,m),"top-left":new a.P(r,r),"top-right":new a.P(-r,r),bottom:new a.P(0,-m),"bottom-left":new a.P(r,-r),"bottom-right":new a.P(-r,-r),left:new a.P(m,0),right:new a.P(-m,0)}}if(m instanceof a.P||Array.isArray(m)){let r=a.P.convert(m);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:a.P.convert(m.center||[0,0]),top:a.P.convert(m.top||[0,0]),"top-left":a.P.convert(m["top-left"]||[0,0]),"top-right":a.P.convert(m["top-right"]||[0,0]),bottom:a.P.convert(m.bottom||[0,0]),"bottom-left":a.P.convert(m["bottom-left"]||[0,0]),"bottom-right":a.P.convert(m["bottom-right"]||[0,0]),left:a.P.convert(m.left||[0,0]),right:a.P.convert(m.right||[0,0])}}return Ou(new a.P(0,0))}let Rv=g;c.AJAXError=a.cq,c.Event=a.l,c.Evented=a.E,c.LngLat=a.Q,c.MercatorCoordinate=a.$,c.Point=a.P,c.addProtocol=a.cr,c.config=a.a,c.removeProtocol=a.cs,c.AttributionControl=Cr,c.BoxZoomHandler=xv,c.CanvasSource=As,c.CooperativeGesturesHandler=yf,c.DoubleClickZoomHandler=gf,c.DragPanHandler=Sx,c.DragRotateHandler=Tx,c.EdgeInsets=Yc,c.FullscreenControl=class extends a.E{constructor(m={}){super(),this._onFullscreenChange=()=>{var r;let s=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=s==null?void 0:s.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)s=s.shadowRoot.fullscreenElement;s===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let m=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=Es,c.GeolocateControl=class extends a.E{constructor(m){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{let s=new a.Q(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,f=this._map.getBearing(),v=a.e({bearing:f},this.options.fitBoundsOptions),b=gr.fromLngLat(s,d);this._map.fitBounds(b,v,{geolocateSource:!0})},this._updateMarker=r=>{if(r){let s=new a.Q(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ru)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}else{let s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Cl({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Cl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},Yr,m)}onAdd(m){return this._map=m,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(r=!1){if(pi!==void 0&&!r)return pi;if(window.navigator.permissions===void 0)return pi=!!window.navigator.geolocation,pi;try{pi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(s){pi=!!window.navigator.geolocation}return pi})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Nr=0,Ru=!1}_isOutOfMapMaxBounds(m){let r=this._map.getMaxBounds(),s=m.coords;return r&&(s.longitude<r.getWest()||s.longitude>r.getEast()||s.latitude<r.getSouth()||s.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let m=this._map.getBounds(),r=m.getSouthEast(),s=m.getNorthEast(),d=r.distanceTo(s),f=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Nr--,Ru=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Nr++,Nr>1?(m={maximumAge:6e5,timeout:0},Ru=!0):(m=this.options.positionOptions,Ru=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var m;let r=(m=this._map.getProjection())===null||m===void 0?void 0:m.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var m;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((m=this._map.getProjection())===null||m===void 0?void 0:m.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(m){return this._map=m,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=O.create("button","maplibregl-ctrl-globe",this._container),O.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=vv,c.ImageSource=_n,c.KeyboardHandler=Mu,c.LngLatBounds=gr,c.LogoControl=bh,c.Map=class extends QA{constructor(m){var r,s;a.cn.mark(a.co.create);let d=Object.assign(Object.assign(Object.assign({},wh),m),{canvasContextAttributes:Object.assign(Object.assign({},wh.canvasContextAttributes),m.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let f=new mu,v=new Qc;if(d.minZoom!==void 0&&f.setMinZoom(d.minZoom),d.maxZoom!==void 0&&f.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&f.setMinPitch(d.minPitch),d.maxPitch!==void 0&&f.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&f.setRenderWorldCopies(d.renderWorldCopies),super(f,v,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Av,this._controls=[],this._mapId=a.a4(),this._contextLost=T=>{T.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:T}))},this._contextRestored=T=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:T}))},this._onMapScroll=T=>{if(T.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},vt),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this.transformCameraUpdate=d.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ee.addThrottleControl(()=>this.isMoving()),this._requestManager=new xe(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let T=!1,q=gh(C=>{this._trackResize&&!this._removed&&(this.resize(C),this.redraw())},50);this._resizeObserver=new ResizeObserver(C=>{T?q(C):T=!0}),this._resizeObserver.observe(this._container)}this.handlers=new YA(this,d),this._hash=d.hash&&new vv(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.e({},d.fitBoundsOptions,{duration:0}))));let b=typeof d.style=="string"||((s=(r=d.style)===null||r===void 0?void 0:r.projection)===null||s===void 0?void 0:s.type)!=="globe";this.resize(null,b),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Cr(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new bh,d.logoPosition),this.on("style.load",()=>{if(b||this._resizeTransform(),this.transform.unmodified){let T=a.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(T)}}),this.on("data",T=>{this._update(T.dataType==="style"),this.fire(new a.l(`${T.dataType}data`,T))}),this.on("dataloading",T=>{this.fire(new a.l(`${T.dataType}dataloading`,T))}),this.on("dataabort",T=>{this.fire(new a.l("sourcedataabort",T))})}_getMapId(){return this._mapId}addControl(m,r){if(r===void 0&&(r=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let s=m.onAdd(this);this._controls.push(m);let d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(s,d.firstChild):d.appendChild(s),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let r=this._controls.indexOf(m);return r>-1&&this._controls.splice(r,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,r,s,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(m,r,s,d)}resize(m,r=!0){let[s,d]=this._containerDimensions(),f=this._getClampedPixelRatio(s,d);if(this._resizeCanvas(s,d,f),this.painter.resize(s,d,f),this.painter.overLimit()){let b=this.painter.context.gl;this._maxCanvasSize=[b.drawingBufferWidth,b.drawingBufferHeight];let T=this._getClampedPixelRatio(s,d);this._resizeCanvas(s,d,T),this.painter.resize(s,d,T)}this._resizeTransform(r);let v=!this._moving;return v&&(this.stop(),this.fire(new a.l("movestart",m)).fire(new a.l("move",m))),this.fire(new a.l("resize",m)),v&&this.fire(new a.l("moveend",m)),this}_resizeTransform(m=!0){var r;let[s,d]=this._containerDimensions();this.transform.resize(s,d,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(s,d,m)}_getClampedPixelRatio(m,r){let{0:s,1:d}=this._maxCanvasSize,f=this.getPixelRatio(),v=m*f,b=r*f;return Math.min(v>s?s/v:1,b>d?d/b:1)*f}getPixelRatio(){var m;return(m=this._overridePixelRatio)!==null&&m!==void 0?m:devicePixelRatio}setPixelRatio(m){this._overridePixelRatio=m,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(gr.convert(m)),this._update()}setMinZoom(m){if((m=m==null?-2:m)>=-2&&m<=this.transform.maxZoom)return this.transform.setMinZoom(m),this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m==null?22:m)>=this.transform.minZoom)return this.transform.setMaxZoom(m),this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m==null?0:m)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.setMinPitch(m),this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m==null?60:m)>180)throw new Error("maxPitch must be less than or equal to 180");if(m>=this.transform.minPitch)return this.transform.setMaxPitch(m),this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.setRenderWorldCopies(m),this._update()}project(m){return this.transform.locationToScreenPoint(a.Q.convert(m),this.style&&this.terrain)}unproject(m){return this.transform.screenPointToLocation(a.P.convert(m),this.terrain)}isMoving(){var m;return this._moving||((m=this.handlers)===null||m===void 0?void 0:m.isMoving())}isZooming(){var m;return this._zooming||((m=this.handlers)===null||m===void 0?void 0:m.isZooming())}isRotating(){var m;return this._rotating||((m=this.handlers)===null||m===void 0?void 0:m.isRotating())}_createDelegatedListener(m,r,s){if(m==="mouseenter"||m==="mouseover"){let d=!1;return{layers:r,listener:s,delegates:{mousemove:v=>{let b=r.filter(q=>this.getLayer(q)),T=b.length!==0?this.queryRenderedFeatures(v.point,{layers:b}):[];T.length?d||(d=!0,s.call(this,new Ei(m,this,v.originalEvent,{features:T}))):d=!1},mouseout:()=>{d=!1}}}}if(m==="mouseleave"||m==="mouseout"){let d=!1;return{layers:r,listener:s,delegates:{mousemove:b=>{let T=r.filter(q=>this.getLayer(q));(T.length!==0?this.queryRenderedFeatures(b.point,{layers:T}):[]).length?d=!0:d&&(d=!1,s.call(this,new Ei(m,this,b.originalEvent)))},mouseout:b=>{d&&(d=!1,s.call(this,new Ei(m,this,b.originalEvent)))}}}}{let d=f=>{let v=r.filter(T=>this.getLayer(T)),b=v.length!==0?this.queryRenderedFeatures(f.point,{layers:v}):[];b.length&&(f.features=b,s.call(this,f),delete f.features)};return{layers:r,listener:s,delegates:{[m]:d}}}}_saveDelegatedListener(m,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(r)}_removeDelegatedListener(m,r,s){if(!this._delegatedListeners||!this._delegatedListeners[m])return;let d=this._delegatedListeners[m];for(let f=0;f<d.length;f++){let v=d[f];if(v.listener===s&&v.layers.length===r.length&&v.layers.every(b=>r.includes(b))){for(let b in v.delegates)this.off(b,v.delegates[b]);return void d.splice(f,1)}}}on(m,r,s){if(s===void 0)return super.on(m,r);let d=typeof r=="string"?[r]:r,f=this._createDelegatedListener(m,d,s);this._saveDelegatedListener(m,f);for(let v in f.delegates)this.on(v,f.delegates[v]);return{unsubscribe:()=>{this._removeDelegatedListener(m,d,s)}}}once(m,r,s){if(s===void 0)return super.once(m,r);let d=typeof r=="string"?[r]:r,f=this._createDelegatedListener(m,d,s);for(let v in f.delegates){let b=f.delegates[v];f.delegates[v]=(...T)=>{this._removeDelegatedListener(m,d,s),b(...T)}}this._saveDelegatedListener(m,f);for(let v in f.delegates)this.once(v,f.delegates[v]);return this}off(m,r,s){return s===void 0?super.off(m,r):(this._removeDelegatedListener(m,typeof r=="string"?[r]:r,s),this)}queryRenderedFeatures(m,r){if(!this.style)return[];let s,d=m instanceof a.P||Array.isArray(m),f=d?m:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:m)||{},f instanceof a.P||typeof f[0]=="number")s=[a.P.convert(f)];else{let v=a.P.convert(f[0]),b=a.P.convert(f[1]);s=[v,new a.P(b.x,v.y),b,new a.P(v.x,b.y),v]}return this.style.queryRenderedFeatures(s,r,this.transform)}querySourceFeatures(m,r){return this.style.querySourceFeatures(m,r)}setStyle(m,r){return(r=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(m,r))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){let r=this._locale[m];if(r==null)throw new Error(`Missing UI string '${m}'`);return r}_updateStyle(m,r){var s,d;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(m,r));let f=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!m)),m?(this.style=new Ym(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m,r,f):this.style.loadJSON(m,r,f),this):((d=(s=this.style)===null||s===void 0?void 0:s.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ym(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,r){if(typeof m=="string"){let s=this._requestManager.transformRequest(m,"Style");a.j(s,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new a.k(d))})}else typeof m=="object"&&this._updateDiff(m,r)}_updateDiff(m,r){try{this.style.setState(m,r)&&this._update(!0)}catch(s){a.w(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(m,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(m,r){return this._lazyInitEmptyStyle(),this.style.addSource(m,r),this._update(!0)}isSourceLoaded(m){let r=this.style&&this.style.sourceCaches[m];if(r!==void 0)return r.loaded();this.fire(new a.k(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),m){let r=this.style.sourceCaches[m.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${m.source}`);this.terrain===null&&r.reload();for(let s in this.style._layers){let d=this.style._layers[s];d.type==="hillshade"&&d.source===m.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new qx(this.painter,r,m),this.painter.renderToTexture=new xf(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=s=>{var d;s.dataType==="style"?this.terrain.sourceCache.freeRtt():s.dataType==="source"&&s.tile&&(s.sourceId!==m.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=s.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(s.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:m})),this}getTerrain(){var m,r;return(r=(m=this.terrain)===null||m===void 0?void 0:m.options)!==null&&r!==void 0?r:null}areTilesLoaded(){let m=this.style&&this.style.sourceCaches;for(let r in m){let s=m[r]._tiles;for(let d in s){let f=s[d];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}setSourceTileLodParams(m,r,s){if(s){let d=this.getSource(s);if(!d)throw new Error(`There is no source with ID "${s}", cannot set LOD parameters`);d.calculateTileZoom=ve(Math.max(1,m),Math.max(1,r))}else for(let d in this.style.sourceCaches)this.style.sourceCaches[d].getSource().calculateTileZoom=ve(Math.max(1,m),Math.max(1,r));return this._update(!0),this}refreshTiles(m,r){let s=this.style.sourceCaches[m];if(!s)throw new Error(`There is no source cache with ID "${m}", cannot refresh tile`);r===void 0?s.reload():s.refreshTiles(r.map(d=>new a.a1(d.z,d.x,d.y)))}addImage(m,r,s={}){let{pixelRatio:d=1,sdf:f=!1,stretchX:v,stretchY:b,content:T,textFitWidth:q,textFitHeight:C}=s;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||a.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:k,height:F,data:L}=r,V=r;return this.style.addImage(m,{data:new a.R({width:k,height:F},new Uint8Array(L)),pixelRatio:d,stretchX:v,stretchY:b,content:T,textFitWidth:q,textFitHeight:C,sdf:f,version:0,userImage:V}),V.onAdd&&V.onAdd(this,m),this}}{let{width:k,height:F,data:L}=M.getImageData(r);this.style.addImage(m,{data:new a.R({width:k,height:F},L),pixelRatio:d,stretchX:v,stretchY:b,content:T,textFitWidth:q,textFitHeight:C,sdf:f,version:0})}}updateImage(m,r){let s=this.style.getImage(m);if(!s)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let d=r instanceof HTMLImageElement||a.b(r)?M.getImageData(r):r,{width:f,height:v,data:b}=d;if(f===void 0||v===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==s.data.width||v!==s.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let T=!(r instanceof HTMLImageElement||a.b(r));return s.data.replace(b,T),this.style.updateImage(m,s),this}getImage(m){return this.style.getImage(m)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m){return ee.getImage(this._requestManager.transformRequest(m,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(m,r){return this._lazyInitEmptyStyle(),this.style.addLayer(m,r),this._update(!0)}moveLayer(m,r){return this.style.moveLayer(m,r),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(m,r,s){return this.style.setLayerZoomRange(m,r,s),this._update(!0)}setFilter(m,r,s={}){return this.style.setFilter(m,r,s),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,r,s,d={}){return this.style.setPaintProperty(m,r,s,d),this._update(!0)}getPaintProperty(m,r){return this.style.getPaintProperty(m,r)}setLayoutProperty(m,r,s,d={}){return this.style.setLayoutProperty(m,r,s,d),this._update(!0)}getLayoutProperty(m,r){return this.style.getLayoutProperty(m,r)}setGlyphs(m,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(m,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(m,r,s={}){return this._lazyInitEmptyStyle(),this.style.addSprite(m,r,s,d=>{d||this._update(!0)}),this}removeSprite(m){return this._lazyInitEmptyStyle(),this.style.removeSprite(m),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(m,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(m,r,s=>{s||this._update(!0)}),this}setLight(m,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(m,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(m,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(m,r){return this.style.setFeatureState(m,r),this._update()}removeFeatureState(m,r){return this.style.removeFeatureState(m,r),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,r=0;return this._container&&(m=this._container.clientWidth||400,r=this._container.clientHeight||300),[m,r]}_setupContainer(){let m=this._container;m.classList.add("maplibregl-map");let r=this._canvasContainer=O.create("div","maplibregl-canvas-container",m);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let s=this._containerDimensions(),d=this._getClampedPixelRatio(s[0],s[1]);this._resizeCanvas(s[0],s[1],d);let f=this._controlContainer=O.create("div","maplibregl-control-container",m),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{v[b]=O.create("div",`maplibregl-ctrl-${b} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,r,s){this._canvas.width=Math.floor(s*m),this._canvas.height=Math.floor(s*r),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${r}px`}_setupPainter(){let m=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:m},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});let s=null;if(s=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,m):this._canvas.getContext("webgl2",m)||this._canvas.getContext("webgl",m),!s){let d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new mv(s,this.transform),z.testSupport(s)}migrateProjection(m,r){super.migrateProjection(m,r),this.painter.transform=m,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){var r,s,d,f,v;let b=this._idleTriggered?this._fadeDuration:0,T=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let F=this.transform.zoom,L=M.now();this.style.zoomHistory.update(F,L);let V=new a.C(F,{now:L,fadeDuration:b,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),$=V.crossFadingFactor();$===1&&$===this._crossFadingFactor||(q=!0,this._crossFadingFactor=$),this.style.update(V)}let C=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0!==T;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((f=this.style.projection)===null||f===void 0?void 0:f.transitionState,(v=this.style.projection)===null||v===void 0?void 0:v.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||C)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,b,this._crossSourceCollisions,C),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cn.mark(a.co.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let k=this._sourcesDirty||this._styleDirty||this._placementDirty;return k||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||k||(this._fullyLoaded=!0,a.cn.mark(a.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var m;this._hash&&this._hash.remove();for(let s of this._controls)s.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),ee.removeThrottleControl(this._imageQueueHandle),(m=this._resizeObserver)===null||m===void 0||m.disconnect();let r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cn.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,M.frame(this._frameRequest,m=>{a.cn.frame(m),this._frameRequest=null;try{this._render(m)}catch(r){if(!a.cp(r)&&!function(s){return s.message===tf}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get version(){return It}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(m){return this._lazyInitEmptyStyle(),this.style.setProjection(m),this._update(!0)}},c.MapMouseEvent=Ei,c.MapTouchEvent=Eu,c.MapWheelEvent=_v,c.Marker=Cl,c.NavigationControl=class{constructor(m){this._updateZoomButtons=()=>{let r=this._map.getZoom(),s=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,s)=>{let d=this._map._getUIString(`NavigationControl.${s}`);r.title=d,r.setAttribute("aria-label",d)},this.options=a.e({},qv,m),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Iv(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,r){let s=O.create("button",m,this._container);return s.type="button",s.addEventListener("click",r),s}},c.Popup=class extends a.E{constructor(m){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let b of this.options.className.split(" "))this._container.classList.add(b);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Pv(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;let s=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor,f=Ou(this.options.offset);if(!d){let b=this._container.offsetWidth,T=this._container.offsetHeight,q;q=s.y+f.bottom.y<T?["top"]:s.y>this._map.transform.height-T?["bottom"]:[],s.x<b/2?q.push("left"):s.x>this._map.transform.width-b/2&&q.push("right"),d=q.length===0?"bottom":q.join("-")}let v=s.add(f[d]);this.options.subpixelPositioning||(v=v.round()),O.setTransform(this._container,`${qa[d]} translate(${v.x}px,${v.y}px)`),Ix(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Cv),m)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=a.Q.convert(m),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){let r=document.createDocumentFragment(),s=document.createElement("body"),d;for(s.innerHTML=m;d=s.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var m;return(m=this._container)===null||m===void 0?void 0:m.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){return this._container&&this._container.classList.add(m),this}removeClassName(m){return this._container&&this._container.classList.remove(m),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}setSubpixelPositioning(m){this.options.subpixelPositioning=m}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let m=this._container.querySelector(Mv);m&&m.focus()}},c.RasterDEMTileSource=Ts,c.RasterTileSource=Un,c.ScaleControl=class{constructor(m){this._onMove=()=>{Th(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Th(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Sh),m)}getDefaultPosition(){return"bottom-left"}onAdd(m){return this._map=m,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=Yt,c.Style=Ym,c.TerrainControl=class{constructor(m){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=m}onAdd(m){return this._map=m,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=vf,c.TwoFingersTouchRotateHandler=ct,c.TwoFingersTouchZoomHandler=Cu,c.TwoFingersTouchZoomRotateHandler=Ev,c.VectorTileSource=Ha,c.VideoSource=Ta,c.addSourceType=(m,r)=>a._(void 0,void 0,void 0,function*(){if(ge(m))throw new Error(`A source type called "${m}" already exists.`);((s,d)=>{mo[s]=d})(m,r)}),c.clearPrewarmedResources=function(){let m=jn;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(wa),jn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=eh,c.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return st().getRTLTextPluginStatus()},c.getVersion=function(){return Rv},c.getWorkerCount=function(){return nn.workerCount},c.getWorkerUrl=function(){return a.a.WORKER_URL},c.importScriptInWorkers=function(m){return Ss().broadcast("IS",m)},c.prewarm=function(){fo().acquire(wa)},c.setMaxParallelImageRequests=function(m){a.a.MAX_PARALLEL_IMAGE_REQUESTS=m},c.setRTLTextPlugin=function(m,r){return st().setRTLTextPlugin(m,r)},c.setWorkerCount=function(m){nn.workerCount=m},c.setWorkerUrl=function(m){a.a.WORKER_URL=m}});var o=e;return o})});var TN=S((MHt,Age)=>{"use strict";Age.exports=function(t,i){return function(){for(var c=new Array(arguments.length),a=0;a<c.length;a++)c[a]=arguments[a];return t.apply(i,c)}}});var Ga=S((RHt,Pge)=>{"use strict";var vSt=TN(),Id=Object.prototype.toString;function qN(e){return Id.call(e)==="[object Array]"}function EN(e){return typeof e=="undefined"}function gSt(e){return e!==null&&!EN(e)&&e.constructor!==null&&!EN(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function ySt(e){return Id.call(e)==="[object ArrayBuffer]"}function _St(e){return typeof FormData!="undefined"&&e instanceof FormData}function xSt(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function bSt(e){return typeof e=="string"}function wSt(e){return typeof e=="number"}function qge(e){return e!==null&&typeof e=="object"}function XT(e){if(Id.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function SSt(e){return Id.call(e)==="[object Date]"}function TSt(e){return Id.call(e)==="[object File]"}function ESt(e){return Id.call(e)==="[object Blob]"}function Ige(e){return Id.call(e)==="[object Function]"}function ASt(e){return qge(e)&&Ige(e.pipe)}function qSt(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function ISt(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function PSt(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function IN(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),qN(e))for(var i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function AN(){var e={};function t(c,a){XT(e[a])&&XT(c)?e[a]=AN(e[a],c):XT(c)?e[a]=AN({},c):qN(c)?e[a]=c.slice():e[a]=c}for(var i=0,o=arguments.length;i<o;i++)IN(arguments[i],t);return e}function CSt(e,t,i){return IN(t,function(c,a){i&&typeof c=="function"?e[a]=vSt(c,i):e[a]=c}),e}function MSt(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}Pge.exports={isArray:qN,isArrayBuffer:ySt,isBuffer:gSt,isFormData:_St,isArrayBufferView:xSt,isString:bSt,isNumber:wSt,isObject:qge,isPlainObject:XT,isUndefined:EN,isDate:SSt,isFile:TSt,isBlob:ESt,isFunction:Ige,isStream:ASt,isURLSearchParams:qSt,isStandardBrowserEnv:PSt,forEach:IN,merge:AN,extend:CSt,trim:ISt,stripBOM:MSt}});var PN=S((OHt,Mge)=>{"use strict";var qm=Ga();function Cge(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Mge.exports=function(t,i,o){if(!i)return t;var c;if(o)c=o(i);else if(qm.isURLSearchParams(i))c=i.toString();else{var a=[];qm.forEach(i,function(E,P){E===null||typeof E=="undefined"||(qm.isArray(E)?P=P+"[]":E=[E],qm.forEach(E,function(O){qm.isDate(O)?O=O.toISOString():qm.isObject(O)&&(O=JSON.stringify(O)),a.push(Cge(P)+"="+Cge(O))}))}),c=a.join("&")}if(c){var g=t.indexOf("#");g!==-1&&(t=t.slice(0,g)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}});var Oge=S((kHt,Rge)=>{"use strict";var RSt=Ga();function JT(){this.handlers=[]}JT.prototype.use=function(t,i,o){return this.handlers.push({fulfilled:t,rejected:i,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};JT.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};JT.prototype.forEach=function(t){RSt.forEach(this.handlers,function(o){o!==null&&t(o)})};Rge.exports=JT});var Dge=S((DHt,kge)=>{"use strict";var OSt=Ga();kge.exports=function(t,i){OSt.forEach(t,function(c,a){a!==i&&a.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[a])})}});var CN=S((LHt,Lge)=>{"use strict";Lge.exports=function(t,i,o,c,a){return t.config=i,o&&(t.code=o),t.request=c,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var MN=S((FHt,Fge)=>{"use strict";var kSt=CN();Fge.exports=function(t,i,o,c,a){var g=new Error(t);return kSt(g,i,o,c,a)}});var Nge=S((zHt,zge)=>{"use strict";var DSt=MN();zge.exports=function(t,i,o){var c=o.config.validateStatus;!o.status||!c||c(o.status)?t(o):i(DSt("Request failed with status code "+o.status,o.config,null,o.request,o))}});var jge=S((NHt,Bge)=>{"use strict";var YT=Ga();Bge.exports=YT.isStandardBrowserEnv()?function(){return{write:function(i,o,c,a,g,x){var E=[];E.push(i+"="+encodeURIComponent(o)),YT.isNumber(c)&&E.push("expires="+new Date(c).toGMTString()),YT.isString(a)&&E.push("path="+a),YT.isString(g)&&E.push("domain="+g),x===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(i){var o=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Vge=S((BHt,Uge)=>{"use strict";Uge.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var Wge=S((jHt,$ge)=>{"use strict";$ge.exports=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}});var Zge=S((UHt,Gge)=>{"use strict";var LSt=Vge(),FSt=Wge();Gge.exports=function(t,i){return t&&!LSt(i)?FSt(t,i):i}});var Hge=S((VHt,Kge)=>{"use strict";var RN=Ga(),zSt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Kge.exports=function(t){var i={},o,c,a;return t&&RN.forEach(t.split(`
`),function(x){if(a=x.indexOf(":"),o=RN.trim(x.substr(0,a)).toLowerCase(),c=RN.trim(x.substr(a+1)),o){if(i[o]&&zSt.indexOf(o)>=0)return;o==="set-cookie"?i[o]=(i[o]?i[o]:[]).concat([c]):i[o]=i[o]?i[o]+", "+c:c}}),i}});var Yge=S(($Ht,Jge)=>{"use strict";var Xge=Ga();Jge.exports=Xge.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),o;function c(a){var g=a;return t&&(i.setAttribute("href",g),g=i.href),i.setAttribute("href",g),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return o=c(window.location.href),function(g){var x=Xge.isString(g)?c(g):g;return x.protocol===o.protocol&&x.host===o.host}}():function(){return function(){return!0}}()});var c0=S((WHt,Qge)=>{"use strict";function ON(e){this.message=e}ON.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};ON.prototype.__CANCEL__=!0;Qge.exports=ON});var DN=S((GHt,eye)=>{"use strict";var QT=Ga(),NSt=Nge(),BSt=jge(),jSt=PN(),USt=Zge(),VSt=Hge(),$St=Yge(),kN=MN(),WSt=h0(),GSt=c0();eye.exports=function(t){return new Promise(function(o,c){var a=t.data,g=t.headers,x=t.responseType,E;function P(){t.cancelToken&&t.cancelToken.unsubscribe(E),t.signal&&t.signal.removeEventListener("abort",E)}QT.isFormData(a)&&delete g["Content-Type"];var M=new XMLHttpRequest;if(t.auth){var O=t.auth.username||"",z=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";g.Authorization="Basic "+btoa(O+":"+z)}var oe=USt(t.baseURL,t.url);M.open(t.method.toUpperCase(),jSt(oe,t.params,t.paramsSerializer),!0),M.timeout=t.timeout;function we(){if(M){var te="getAllResponseHeaders"in M?VSt(M.getAllResponseHeaders()):null,Q=!x||x==="text"||x==="json"?M.responseText:M.response,ee={data:Q,status:M.status,statusText:M.statusText,headers:te,config:t,request:M};NSt(function(Te){o(Te),P()},function(Te){c(Te),P()},ee),M=null}}if("onloadend"in M?M.onloadend=we:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(we)},M.onabort=function(){M&&(c(kN("Request aborted",t,"ECONNABORTED",M)),M=null)},M.onerror=function(){c(kN("Network Error",t,null,M)),M=null},M.ontimeout=function(){var Q=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",ee=t.transitional||WSt.transitional;t.timeoutErrorMessage&&(Q=t.timeoutErrorMessage),c(kN(Q,t,ee.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",M)),M=null},QT.isStandardBrowserEnv()){var ye=(t.withCredentials||$St(oe))&&t.xsrfCookieName?BSt.read(t.xsrfCookieName):void 0;ye&&(g[t.xsrfHeaderName]=ye)}"setRequestHeader"in M&&QT.forEach(g,function(Q,ee){typeof a=="undefined"&&ee.toLowerCase()==="content-type"?delete g[ee]:M.setRequestHeader(ee,Q)}),QT.isUndefined(t.withCredentials)||(M.withCredentials=!!t.withCredentials),x&&x!=="json"&&(M.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&M.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&M.upload&&M.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(E=function(te){M&&(c(!te||te&&te.type?new GSt("canceled"):te),M.abort(),M=null)},t.cancelToken&&t.cancelToken.subscribe(E),t.signal&&(t.signal.aborted?E():t.signal.addEventListener("abort",E))),a||(a=null),M.send(a)})}});var h0=S((ZHt,iye)=>{"use strict";var Nn=Ga(),tye=Dge(),ZSt=CN(),KSt={"Content-Type":"application/x-www-form-urlencoded"};function rye(e,t){!Nn.isUndefined(e)&&Nn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function HSt(){var e;return typeof XMLHttpRequest!="undefined"?e=DN():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=DN()),e}function XSt(e,t,i){if(Nn.isString(e))try{return(t||JSON.parse)(e),Nn.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(e)}var eE={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:HSt(),transformRequest:[function(t,i){return tye(i,"Accept"),tye(i,"Content-Type"),Nn.isFormData(t)||Nn.isArrayBuffer(t)||Nn.isBuffer(t)||Nn.isStream(t)||Nn.isFile(t)||Nn.isBlob(t)?t:Nn.isArrayBufferView(t)?t.buffer:Nn.isURLSearchParams(t)?(rye(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Nn.isObject(t)||i&&i["Content-Type"]==="application/json"?(rye(i,"application/json"),XSt(t)):t}],transformResponse:[function(t){var i=this.transitional||eE.transitional,o=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,a=!o&&this.responseType==="json";if(a||c&&Nn.isString(t)&&t.length)try{return JSON.parse(t)}catch(g){if(a)throw g.name==="SyntaxError"?ZSt(g,this,"E_JSON_PARSE"):g}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Nn.forEach(["delete","get","head"],function(t){eE.headers[t]={}});Nn.forEach(["post","put","patch"],function(t){eE.headers[t]=Nn.merge(KSt)});iye.exports=eE});var aye=S((KHt,nye)=>{"use strict";var JSt=Ga(),YSt=h0();nye.exports=function(t,i,o){var c=this||YSt;return JSt.forEach(o,function(g){t=g.call(c,t,i)}),t}});var LN=S((HHt,oye)=>{"use strict";oye.exports=function(t){return!!(t&&t.__CANCEL__)}});var uye=S((XHt,lye)=>{"use strict";var sye=Ga(),FN=aye(),QSt=LN(),eTt=h0(),tTt=c0();function zN(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tTt("canceled")}lye.exports=function(t){zN(t),t.headers=t.headers||{},t.data=FN.call(t,t.data,t.headers,t.transformRequest),t.headers=sye.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),sye.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||eTt.adapter;return i(t).then(function(c){return zN(t),c.data=FN.call(t,c.data,c.headers,t.transformResponse),c},function(c){return QSt(c)||(zN(t),c&&c.response&&(c.response.data=FN.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})}});var NN=S((JHt,cye)=>{"use strict";var uo=Ga();cye.exports=function(t,i){i=i||{};var o={};function c(M,O){return uo.isPlainObject(M)&&uo.isPlainObject(O)?uo.merge(M,O):uo.isPlainObject(O)?uo.merge({},O):uo.isArray(O)?O.slice():O}function a(M){if(uo.isUndefined(i[M])){if(!uo.isUndefined(t[M]))return c(void 0,t[M])}else return c(t[M],i[M])}function g(M){if(!uo.isUndefined(i[M]))return c(void 0,i[M])}function x(M){if(uo.isUndefined(i[M])){if(!uo.isUndefined(t[M]))return c(void 0,t[M])}else return c(void 0,i[M])}function E(M){if(M in i)return c(t[M],i[M]);if(M in t)return c(void 0,t[M])}var P={url:g,method:g,data:g,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:E};return uo.forEach(Object.keys(t).concat(Object.keys(i)),function(O){var z=P[O]||a,oe=z(O);uo.isUndefined(oe)&&z!==E||(o[O]=oe)}),o}});var BN=S((YHt,hye)=>{hye.exports={version:"0.24.0"}});var pye=S((QHt,fye)=>{"use strict";var rTt=BN().version,jN={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){jN[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});var dye={};jN.transitional=function(t,i,o){function c(a,g){return"[Axios v"+rTt+"] Transitional option '"+a+"'"+g+(o?". "+o:"")}return function(a,g,x){if(t===!1)throw new Error(c(g," has been removed"+(i?" in "+i:"")));return i&&!dye[g]&&(dye[g]=!0,console.warn(c(g," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(a,g,x):!0}};function iTt(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var o=Object.keys(e),c=o.length;c-->0;){var a=o[c],g=t[a];if(g){var x=e[a],E=x===void 0||g(x,a,e);if(E!==!0)throw new TypeError("option "+a+" must be "+E);continue}if(i!==!0)throw Error("Unknown option "+a)}}fye.exports={assertOptions:iTt,validators:jN}});var xye=S((e9t,_ye)=>{"use strict";var gye=Ga(),nTt=PN(),mye=Oge(),vye=uye(),tE=NN(),yye=pye(),Im=yye.validators;function d0(e){this.defaults=e,this.interceptors={request:new mye,response:new mye}}d0.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=tE(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&yye.assertOptions(i,{silentJSONParsing:Im.transitional(Im.boolean),forcedJSONParsing:Im.transitional(Im.boolean),clarifyTimeoutError:Im.transitional(Im.boolean)},!1);var o=[],c=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(t)===!1||(c=c&&z.synchronous,o.unshift(z.fulfilled,z.rejected))});var a=[];this.interceptors.response.forEach(function(z){a.push(z.fulfilled,z.rejected)});var g;if(!c){var x=[vye,void 0];for(Array.prototype.unshift.apply(x,o),x=x.concat(a),g=Promise.resolve(t);x.length;)g=g.then(x.shift(),x.shift());return g}for(var E=t;o.length;){var P=o.shift(),M=o.shift();try{E=P(E)}catch(O){M(O);break}}try{g=vye(E)}catch(O){return Promise.reject(O)}for(;a.length;)g=g.then(a.shift(),a.shift());return g};d0.prototype.getUri=function(t){return t=tE(this.defaults,t),nTt(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};gye.forEach(["delete","get","head","options"],function(t){d0.prototype[t]=function(i,o){return this.request(tE(o||{},{method:t,url:i,data:(o||{}).data}))}});gye.forEach(["post","put","patch"],function(t){d0.prototype[t]=function(i,o,c){return this.request(tE(c||{},{method:t,url:i,data:o}))}});_ye.exports=d0});var wye=S((t9t,bye)=>{"use strict";var aTt=c0();function Pm(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(c){t=c});var i=this;this.promise.then(function(o){if(i._listeners){var c,a=i._listeners.length;for(c=0;c<a;c++)i._listeners[c](o);i._listeners=null}}),this.promise.then=function(o){var c,a=new Promise(function(g){i.subscribe(g),c=g}).then(o);return a.cancel=function(){i.unsubscribe(c)},a},e(function(c){i.reason||(i.reason=new aTt(c),t(i.reason))})}Pm.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Pm.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Pm.prototype.unsubscribe=function(t){if(this._listeners){var i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}};Pm.source=function(){var t,i=new Pm(function(c){t=c});return{token:i,cancel:t}};bye.exports=Pm});var Tye=S((r9t,Sye)=>{"use strict";Sye.exports=function(t){return function(o){return t.apply(null,o)}}});var Aye=S((i9t,Eye)=>{"use strict";Eye.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var Pye=S((n9t,UN)=>{"use strict";var qye=Ga(),oTt=TN(),rE=xye(),sTt=NN(),lTt=h0();function Iye(e){var t=new rE(e),i=oTt(rE.prototype.request,t);return qye.extend(i,rE.prototype,t),qye.extend(i,t),i.create=function(c){return Iye(sTt(e,c))},i}var sl=Iye(lTt);sl.Axios=rE;sl.Cancel=c0();sl.CancelToken=wye();sl.isCancel=LN();sl.VERSION=BN().version;sl.all=function(t){return Promise.all(t)};sl.spread=Tye();sl.isAxiosError=Aye();UN.exports=sl;UN.exports.default=sl});var Mye=S((a9t,Cye)=>{Cye.exports=Pye()});var Vye=S((c9t,Uye)=>{var $N=1/0,hTt=17976931348623157e292,kye=NaN,dTt="[object Symbol]",fTt=/^\s+|\s+$/g,pTt=/^[-+]0x[0-9a-f]+$/i,mTt=/^0b[01]+$/i,vTt=/^0o[0-7]+$/i,gTt=parseInt,yTt=typeof global=="object"&&global&&global.Object===Object&&global,_Tt=typeof self=="object"&&self&&self.Object===Object&&self,xTt=yTt||_Tt||Function("return this")(),bTt=Object.prototype,wTt=bTt.toString,Dye=xTt.Symbol,STt=Math.min,Lye=Dye?Dye.prototype:void 0,Fye=Lye?Lye.toString:void 0;function TTt(e){if(typeof e=="string")return e;if(Bye(e))return Fye?Fye.call(e):"";var t=e+"";return t=="0"&&1/e==-$N?"-0":t}function ETt(e){var t=Math[e];return function(i,o){if(i=jye(i),o=STt(ITt(o),292),o){var c=(Nye(i)+"e").split("e"),a=t(c[0]+"e"+(+c[1]+o));return c=(Nye(a)+"e").split("e"),+(c[0]+"e"+(+c[1]-o))}return t(i)}}function zye(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ATt(e){return!!e&&typeof e=="object"}function Bye(e){return typeof e=="symbol"||ATt(e)&&wTt.call(e)==dTt}function qTt(e){if(!e)return e===0?e:0;if(e=jye(e),e===$N||e===-$N){var t=e<0?-1:1;return t*hTt}return e===e?e:0}function ITt(e){var t=qTt(e),i=t%1;return t===t?i?t-i:t:0}function jye(e){if(typeof e=="number")return e;if(Bye(e))return kye;if(zye(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=zye(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(fTt,"");var i=mTt.test(e);return i||vTt.test(e)?gTt(e.slice(2),i?2:8):pTt.test(e)?kye:+e}function Nye(e){return e==null?"":TTt(e)}var PTt=ETt("round");Uye.exports=PTt});var m0=S((X9t,$ye)=>{var RTt=$ye.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=RTt)});var Pd=S((J9t,Wye)=>{var OTt=Wye.exports={version:"2.6.12"};typeof __e=="number"&&(__e=OTt)});var Zye=S((Y9t,Gye)=>{Gye.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var GN=S((Q9t,Kye)=>{var kTt=Zye();Kye.exports=function(e,t,i){if(kTt(e),t===void 0)return e;switch(i){case 1:return function(o){return e.call(t,o)};case 2:return function(o,c){return e.call(t,o,c)};case 3:return function(o,c,a){return e.call(t,o,c,a)}}return function(){return e.apply(t,arguments)}}});var v0=S((eXt,Hye)=>{Hye.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var g0=S((tXt,Xye)=>{var DTt=v0();Xye.exports=function(e){if(!DTt(e))throw TypeError(e+" is not an object!");return e}});var sE=S((rXt,Jye)=>{Jye.exports=function(e){try{return!!e()}catch(t){return!0}}});var jc=S((iXt,Yye)=>{Yye.exports=!sE()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var KN=S((nXt,e_e)=>{var Qye=v0(),ZN=m0().document,LTt=Qye(ZN)&&Qye(ZN.createElement);e_e.exports=function(e){return LTt?ZN.createElement(e):{}}});var HN=S((aXt,t_e)=>{t_e.exports=!jc()&&!sE()(function(){return Object.defineProperty(KN()("div"),"a",{get:function(){return 7}}).a!=7})});var XN=S((oXt,r_e)=>{var lE=v0();r_e.exports=function(e,t){if(!lE(e))return e;var i,o;if(t&&typeof(i=e.toString)=="function"&&!lE(o=i.call(e))||typeof(i=e.valueOf)=="function"&&!lE(o=i.call(e))||!t&&typeof(i=e.toString)=="function"&&!lE(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}});var JN=S(n_e=>{var i_e=g0(),FTt=HN(),zTt=XN(),NTt=Object.defineProperty;n_e.f=jc()?Object.defineProperty:function(t,i,o){if(i_e(t),i=zTt(i,!0),i_e(o),FTt)try{return NTt(t,i,o)}catch(c){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(t[i]=o.value),t}});var YN=S((lXt,a_e)=>{a_e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var s_e=S((uXt,o_e)=>{var BTt=JN(),jTt=YN();o_e.exports=jc()?function(e,t,i){return BTt.f(e,t,jTt(1,i))}:function(e,t,i){return e[t]=i,e}});var uE=S((cXt,l_e)=>{var UTt={}.hasOwnProperty;l_e.exports=function(e,t){return UTt.call(e,t)}});var y0=S((hXt,c_e)=>{var cE=m0(),QN=Pd(),u_e=GN(),VTt=s_e(),$Tt=uE(),hE="prototype",ra=function(e,t,i){var o=e&ra.F,c=e&ra.G,a=e&ra.S,g=e&ra.P,x=e&ra.B,E=e&ra.W,P=c?QN:QN[t]||(QN[t]={}),M=P[hE],O=c?cE:a?cE[t]:(cE[t]||{})[hE],z,oe,we;c&&(i=t);for(z in i)oe=!o&&O&&O[z]!==void 0,!(oe&&$Tt(P,z))&&(we=oe?O[z]:i[z],P[z]=c&&typeof O[z]!="function"?i[z]:x&&oe?u_e(we,cE):E&&O[z]==we?function(ye){var te=function(Q,ee,xe){if(this instanceof ye){switch(arguments.length){case 0:return new ye;case 1:return new ye(Q);case 2:return new ye(Q,ee)}return new ye(Q,ee,xe)}return ye.apply(this,arguments)};return te[hE]=ye[hE],te}(we):g&&typeof we=="function"?u_e(Function.call,we):we,g&&((P.virtual||(P.virtual={}))[z]=we,e&ra.R&&M&&!M[z]&&VTt(M,z,we)))};ra.F=1;ra.G=2;ra.S=4;ra.P=8;ra.B=16;ra.W=32;ra.U=64;ra.R=128;c_e.exports=ra});var d_e=S((dXt,h_e)=>{var WTt={}.toString;h_e.exports=function(e){return WTt.call(e).slice(8,-1)}});var eB=S((fXt,f_e)=>{var GTt=d_e();f_e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return GTt(e)=="String"?e.split(""):Object(e)}});var tB=S((pXt,p_e)=>{p_e.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var _0=S((mXt,m_e)=>{var ZTt=eB(),KTt=tB();m_e.exports=function(e){return ZTt(KTt(e))}});var rB=S((vXt,v_e)=>{var HTt=Math.ceil,XTt=Math.floor;v_e.exports=function(e){return isNaN(e=+e)?0:(e>0?XTt:HTt)(e)}});var y_e=S((gXt,g_e)=>{var JTt=rB(),YTt=Math.min;g_e.exports=function(e){return e>0?YTt(JTt(e),9007199254740991):0}});var b_e=S((yXt,x_e)=>{var QTt=rB(),eEt=Math.max,tEt=Math.min;x_e.exports=function(e,t){return e=QTt(e),e<0?eEt(e+t,0):tEt(e,t)}});var S_e=S((_Xt,w_e)=>{var rEt=_0(),iEt=y_e(),nEt=b_e();w_e.exports=function(e){return function(t,i,o){var c=rEt(t),a=iEt(c.length),g=nEt(o,a),x;if(e&&i!=i){for(;a>g;)if(x=c[g++],x!=x)return!0}else for(;a>g;g++)if((e||g in c)&&c[g]===i)return e||g||0;return!e&&-1}}});var E_e=S((xXt,T_e)=>{T_e.exports=!0});var C_e=S((bXt,P_e)=>{var aEt=Pd(),A_e=m0(),q_e="__core-js_shared__",I_e=A_e[q_e]||(A_e[q_e]={});(P_e.exports=function(e,t){return I_e[e]||(I_e[e]=t!==void 0?t:{})})("versions",[]).push({version:aEt.version,mode:E_e()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var R_e=S((wXt,M_e)=>{var oEt=0,sEt=Math.random();M_e.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++oEt+sEt).toString(36))}});var iB=S((SXt,k_e)=>{var O_e=C_e()("keys"),lEt=R_e();k_e.exports=function(e){return O_e[e]||(O_e[e]=lEt(e))}});var F_e=S((TXt,L_e)=>{var D_e=uE(),uEt=_0(),cEt=S_e()(!1),hEt=iB()("IE_PROTO");L_e.exports=function(e,t){var i=uEt(e),o=0,c=[],a;for(a in i)a!=hEt&&D_e(i,a)&&c.push(a);for(;t.length>o;)D_e(i,a=t[o++])&&(~cEt(c,a)||c.push(a));return c}});var nB=S((EXt,z_e)=>{z_e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var dE=S((AXt,N_e)=>{var dEt=F_e(),fEt=nB();N_e.exports=Object.keys||function(t){return dEt(t,fEt)}});var j_e=S(B_e=>{B_e.f=Object.getOwnPropertySymbols});var fE=S(U_e=>{U_e.f={}.propertyIsEnumerable});var $_e=S((PXt,V_e)=>{var pEt=tB();V_e.exports=function(e){return Object(pEt(e))}});var Z_e=S((CXt,G_e)=>{"use strict";var mEt=jc(),W_e=dE(),vEt=j_e(),gEt=fE(),yEt=$_e(),_Et=eB(),pE=Object.assign;G_e.exports=!pE||sE()(function(){var e={},t={},i=Symbol(),o="abcdefghijklmnopqrst";return e[i]=7,o.split("").forEach(function(c){t[c]=c}),pE({},e)[i]!=7||Object.keys(pE({},t)).join("")!=o})?function(t,i){for(var o=yEt(t),c=arguments.length,a=1,g=vEt.f,x=gEt.f;c>a;)for(var E=_Et(arguments[a++]),P=g?W_e(E).concat(g(E)):W_e(E),M=P.length,O=0,z;M>O;)z=P[O++],(!mEt||x.call(E,z))&&(o[z]=E[z]);return o}:pE});var K_e=S(()=>{var aB=y0();aB(aB.S+aB.F,"Object",{assign:Z_e()})});var X_e=S((OXt,H_e)=>{K_e();H_e.exports=Pd().Object.assign});var Y_e=S((DXt,J_e)=>{var xEt=JN(),bEt=g0(),wEt=dE();J_e.exports=jc()?Object.defineProperties:function(t,i){bEt(t);for(var o=wEt(i),c=o.length,a=0,g;c>a;)xEt.f(t,g=o[a++],i[g]);return t}});var t0e=S((LXt,e0e)=>{var Q_e=m0().document;e0e.exports=Q_e&&Q_e.documentElement});var n0e=S((FXt,i0e)=>{var SEt=g0(),TEt=Y_e(),r0e=nB(),EEt=iB()("IE_PROTO"),sB=function(){},lB="prototype",mE=function(){var e=KN()("iframe"),t=r0e.length,i="<",o=">",c;for(e.style.display="none",t0e().appendChild(e),e.src="javascript:",c=e.contentWindow.document,c.open(),c.write(i+"script"+o+"document.F=Object"+i+"/script"+o),c.close(),mE=c.F;t--;)delete mE[lB][r0e[t]];return mE()};i0e.exports=Object.create||function(t,i){var o;return t!==null?(sB[lB]=SEt(t),o=new sB,sB[lB]=null,o[EEt]=t):o=mE(),i===void 0?o:TEt(o,i)}});var o0e=S(()=>{var a0e=y0();a0e(a0e.S,"Object",{create:n0e()})});var l0e=S((BXt,s0e)=>{o0e();var AEt=Pd().Object;s0e.exports=function(t,i){return AEt.create(t,i)}});var h0e=S(c0e=>{var qEt=fE(),IEt=YN(),PEt=_0(),CEt=XN(),MEt=uE(),REt=HN(),u0e=Object.getOwnPropertyDescriptor;c0e.f=jc()?u0e:function(t,i){if(t=PEt(t),i=CEt(i,!0),REt)try{return u0e(t,i)}catch(o){}if(MEt(t,i))return IEt(!qEt.f.call(t,i),t[i])}});var p0e=S((UXt,f0e)=>{var OEt=v0(),kEt=g0(),d0e=function(e,t){if(kEt(e),!OEt(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};f0e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=GN()(Function.call,h0e().f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(c,a){return d0e(c,a),t?c.__proto__=a:i(c,a),c}}({},!1):void 0),check:d0e}});var v0e=S(()=>{var m0e=y0();m0e(m0e.S,"Object",{setPrototypeOf:p0e().set})});var y0e=S((WXt,g0e)=>{v0e();g0e.exports=Pd().Object.setPrototypeOf});var Uc=S((XXt,gE)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var c="",a=0;a<arguments.length;a++){var g=arguments[a];g&&(c=o(c,i(g)))}return c}function i(c){if(typeof c=="string"||typeof c=="number")return c;if(typeof c!="object")return"";if(Array.isArray(c))return t.apply(null,c);if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]"))return c.toString();var a="";for(var g in c)e.call(c,g)&&c[g]&&(a=o(a,g));return a}function o(c,a){return a?c?c+" "+a:c+a:c}typeof gE!="undefined"&&gE.exports?(t.default=t,gE.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var b0e=S((JXt,x0e)=>{"use strict";var DEt=function(e,t,i,o,c,a,g,x){if(!e){var E;if(t===void 0)E=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var P=[i,o,c,a,g,x],M=0;E=new Error(t.replace(/%s/g,function(){return P[M++]})),E.name="Invariant Violation"}throw E.framesToPop=1,E}};x0e.exports=DEt});var E0e=S(cB=>{"use strict";Object.defineProperty(cB,"__esModule",{value:!0});function w0e(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function S0e(e){function t(i){var o=this.constructor.getDerivedStateFromProps(e,i);return o!=null?o:null}this.setState(t.bind(this))}function T0e(e,t){try{var i=this.props,o=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(i,o)}finally{this.props=i,this.state=o}}w0e.__suppressDeprecationWarning=!0;S0e.__suppressDeprecationWarning=!0;T0e.__suppressDeprecationWarning=!0;function LEt(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var i=null,o=null,c=null;if(typeof t.componentWillMount=="function"?i="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(i="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?o="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(o="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?c="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(c="UNSAFE_componentWillUpdate"),i!==null||o!==null||c!==null){var a=e.displayName||e.name,g=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+g+" but also contains the following legacy lifecycles:"+(i!==null?`
  `+i:"")+(o!==null?`
  `+o:"")+(c!==null?`
  `+c:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=w0e,t.componentWillReceiveProps=S0e),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=T0e;var x=t.componentDidUpdate;t.componentDidUpdate=function(P,M,O){var z=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:O;x.call(this,P,M,z)}}return e}cB.polyfill=LEt});var q0e=S((QXt,A0e)=>{var FEt=jc(),zEt=dE(),NEt=_0(),BEt=fE().f;A0e.exports=function(e){return function(t){for(var i=NEt(t),o=zEt(i),c=o.length,a=0,g=[],x;c>a;)x=o[a++],(!FEt||BEt.call(i,x))&&g.push(e?[x,i[x]]:i[x]);return g}}});var P0e=S(()=>{var I0e=y0(),jEt=q0e()(!0);I0e(I0e.S,"Object",{entries:function(t){return jEt(t)}})});var M0e=S((rJt,C0e)=>{P0e();C0e.exports=Pd().Object.entries});var hB=S((iJt,R0e)=>{R0e.exports=M0e()});var pB=S((xE,D0e)=>{"use strict";Object.defineProperty(xE,"__esModule",{value:!0});xE.default=$Et;function $Et(e){function t(o,c,a,g,x,E){var P=g||"<<anonymous>>",M=E||a;if(c[a]==null)return o?new Error("Required "+x+" `"+M+"` was not specified "+("in `"+P+"`.")):null;for(var O=arguments.length,z=Array(O>6?O-6:0),oe=6;oe<O;oe++)z[oe-6]=arguments[oe];return e.apply(void 0,[c,a,P,x,M].concat(z))}var i=t.bind(null,!1);return i.isRequired=t.bind(null,!0),i}D0e.exports=xE.default});var z0e=S(Ir=>{"use strict";var gn=typeof Symbol=="function"&&Symbol.for,gB=gn?Symbol.for("react.element"):60103,yB=gn?Symbol.for("react.portal"):60106,bE=gn?Symbol.for("react.fragment"):60107,wE=gn?Symbol.for("react.strict_mode"):60108,SE=gn?Symbol.for("react.profiler"):60114,TE=gn?Symbol.for("react.provider"):60109,EE=gn?Symbol.for("react.context"):60110,_B=gn?Symbol.for("react.async_mode"):60111,AE=gn?Symbol.for("react.concurrent_mode"):60111,qE=gn?Symbol.for("react.forward_ref"):60112,IE=gn?Symbol.for("react.suspense"):60113,ZEt=gn?Symbol.for("react.suspense_list"):60120,PE=gn?Symbol.for("react.memo"):60115,CE=gn?Symbol.for("react.lazy"):60116,KEt=gn?Symbol.for("react.block"):60121,HEt=gn?Symbol.for("react.fundamental"):60117,XEt=gn?Symbol.for("react.responder"):60118,JEt=gn?Symbol.for("react.scope"):60119;function co(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gB:switch(e=e.type,e){case _B:case AE:case bE:case SE:case wE:case IE:return e;default:switch(e=e&&e.$$typeof,e){case EE:case qE:case CE:case PE:case TE:return e;default:return t}}case yB:return t}}}function F0e(e){return co(e)===AE}Ir.AsyncMode=_B;Ir.ConcurrentMode=AE;Ir.ContextConsumer=EE;Ir.ContextProvider=TE;Ir.Element=gB;Ir.ForwardRef=qE;Ir.Fragment=bE;Ir.Lazy=CE;Ir.Memo=PE;Ir.Portal=yB;Ir.Profiler=SE;Ir.StrictMode=wE;Ir.Suspense=IE;Ir.isAsyncMode=function(e){return F0e(e)||co(e)===_B};Ir.isConcurrentMode=F0e;Ir.isContextConsumer=function(e){return co(e)===EE};Ir.isContextProvider=function(e){return co(e)===TE};Ir.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gB};Ir.isForwardRef=function(e){return co(e)===qE};Ir.isFragment=function(e){return co(e)===bE};Ir.isLazy=function(e){return co(e)===CE};Ir.isMemo=function(e){return co(e)===PE};Ir.isPortal=function(e){return co(e)===yB};Ir.isProfiler=function(e){return co(e)===SE};Ir.isStrictMode=function(e){return co(e)===wE};Ir.isSuspense=function(e){return co(e)===IE};Ir.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===bE||e===AE||e===SE||e===wE||e===IE||e===ZEt||typeof e=="object"&&e!==null&&(e.$$typeof===CE||e.$$typeof===PE||e.$$typeof===TE||e.$$typeof===EE||e.$$typeof===qE||e.$$typeof===HEt||e.$$typeof===XEt||e.$$typeof===JEt||e.$$typeof===KEt)};Ir.typeOf=co});var B0e=S((fJt,N0e)=>{"use strict";N0e.exports=z0e()});var Rm=S((ME,U0e)=>{"use strict";Object.defineProperty(ME,"__esModule",{value:!0});var YEt=Ar(),QEt=j0e(YEt),eAt=B0e(),tAt=pB(),rAt=j0e(tAt);function j0e(e){return e&&e.__esModule?e:{default:e}}function iAt(e,t,i,o,c){var a=e[t];return QEt.default.isValidElement(a)?new Error("Invalid "+o+" `"+c+"` of type ReactElement "+("supplied to `"+i+"`,expected an element type (a string ")+", component class, or function component)."):(0,eAt.isValidElementType)(a)?null:new Error("Invalid "+o+" `"+c+"` of value `"+a+"` "+("supplied to `"+i+"`, expected an element type (a string ")+", component class, or function component).")}ME.default=(0,rAt.default)(iAt);U0e.exports=ME.default});var $0e=S((mJt,V0e)=>{"use strict";var aAt=function(){};V0e.exports=aAt});var na=S((vJt,w0)=>{function oAt(e){return e&&e.__esModule?e:{default:e}}w0.exports=oAt,w0.exports.__esModule=!0,w0.exports.default=w0.exports});var G0e=S((RE,W0e)=>{"use strict";RE.__esModule=!0;RE.default=lAt;var sAt=/-(.)/g;function lAt(e){return e.replace(sAt,function(t,i){return i.toUpperCase()})}W0e.exports=RE.default});var xB=S((OE,Z0e)=>{"use strict";var uAt=na();OE.__esModule=!0;OE.default=dAt;var cAt=uAt(G0e()),hAt=/^-ms-/;function dAt(e){return(0,cAt.default)(e.replace(hAt,"ms-"))}Z0e.exports=OE.default});var H0e=S((kE,K0e)=>{"use strict";kE.__esModule=!0;kE.default=pAt;var fAt=/([A-Z])/g;function pAt(e){return e.replace(fAt,"-$1").toLowerCase()}K0e.exports=kE.default});var J0e=S((DE,X0e)=>{"use strict";var mAt=na();DE.__esModule=!0;DE.default=yAt;var vAt=mAt(H0e()),gAt=/^ms-/;function yAt(e){return(0,vAt.default)(e).replace(gAt,"-ms-")}X0e.exports=DE.default});var Q0e=S((LE,Y0e)=>{"use strict";var _At=na();LE.__esModule=!0;LE.default=SAt;var xAt=_At(xB()),bAt=/^(top|right|bottom|left)$/,wAt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function SAt(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(o){var c=e.style;o=(0,xAt.default)(o),o=="float"&&(o="styleFloat");var a=e.currentStyle[o]||null;if(a==null&&c&&c[o]&&(a=c[o]),wAt.test(a)&&!bAt.test(o)){var g=c.left,x=e.runtimeStyle,E=x&&x.left;E&&(x.left=e.currentStyle.left),c.left=o==="fontSize"?"1em":a,a=c.pixelLeft+"px",c.left=g,E&&(x.left=E)}return a}}}Y0e.exports=LE.default});var txe=S((FE,exe)=>{"use strict";FE.__esModule=!0;FE.default=TAt;function TAt(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}exe.exports=FE.default});var dl=S((S0,rxe)=>{"use strict";S0.__esModule=!0;S0.default=void 0;var EAt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);S0.default=EAt;rxe.exports=S0.default});var lxe=S(ur=>{"use strict";var AAt=na();ur.__esModule=!0;ur.default=ur.animationEnd=ur.animationDelay=ur.animationTiming=ur.animationDuration=ur.animationName=ur.transitionEnd=ur.transitionDuration=ur.transitionDelay=ur.transitionTiming=ur.transitionProperty=ur.transform=void 0;var qAt=AAt(dl()),NE="transform";ur.transform=NE;var fl,bB,ixe;ur.animationEnd=ixe;ur.transitionEnd=bB;var wB,SB,TB,EB;ur.transitionDelay=EB;ur.transitionTiming=TB;ur.transitionDuration=SB;ur.transitionProperty=wB;var nxe,axe,oxe,sxe;ur.animationDelay=sxe;ur.animationTiming=oxe;ur.animationDuration=axe;ur.animationName=nxe;qAt.default&&(zE=PAt(),fl=zE.prefix,ur.transitionEnd=bB=zE.transitionEnd,ur.animationEnd=ixe=zE.animationEnd,ur.transform=NE=fl+"-"+NE,ur.transitionProperty=wB=fl+"-transition-property",ur.transitionDuration=SB=fl+"-transition-duration",ur.transitionDelay=EB=fl+"-transition-delay",ur.transitionTiming=TB=fl+"-transition-timing-function",ur.animationName=nxe=fl+"-animation-name",ur.animationDuration=axe=fl+"-animation-duration",ur.animationTiming=oxe=fl+"-animation-delay",ur.animationDelay=sxe=fl+"-animation-timing-function");var zE,IAt={transform:NE,end:bB,property:wB,timing:TB,delay:EB,duration:SB};ur.default=IAt;function PAt(){for(var e=document.createElement("div").style,t={O:function(P){return"o"+P.toLowerCase()},Moz:function(P){return P.toLowerCase()},Webkit:function(P){return"webkit"+P},ms:function(P){return"MS"+P}},i=Object.keys(t),o,c,a="",g=0;g<i.length;g++){var x=i[g];if(x+"TransitionProperty"in e){a="-"+x.toLowerCase(),o=t[x]("TransitionEnd"),c=t[x]("AnimationEnd");break}}return!o&&"transitionProperty"in e&&(o="transitionend"),!c&&"animationName"in e&&(c="animationend"),e=null,{animationEnd:c,transitionEnd:o,prefix:a}}});var cxe=S((BE,uxe)=>{"use strict";BE.__esModule=!0;BE.default=MAt;var CAt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function MAt(e){return!!(e&&CAt.test(e))}uxe.exports=BE.default});var dxe=S((jE,hxe)=>{"use strict";var T0=na();jE.__esModule=!0;jE.default=FAt;var RAt=T0(xB()),AB=T0(J0e()),OAt=T0(Q0e()),kAt=T0(txe()),DAt=lxe(),LAt=T0(cxe());function FAt(e,t,i){var o="",c="",a=t;if(typeof t=="string"){if(i===void 0)return e.style[(0,RAt.default)(t)]||(0,OAt.default)(e).getPropertyValue((0,AB.default)(t));(a={})[t]=i}Object.keys(a).forEach(function(g){var x=a[g];!x&&x!==0?(0,kAt.default)(e,(0,AB.default)(g)):(0,LAt.default)(g)?c+=g+"("+x+") ":o+=(0,AB.default)(g)+": "+x+";"}),c&&(o+=DAt.transform+": "+c+";"),e.style.cssText+=";"+o}hxe.exports=jE.default});var fxe=S(Om=>{"use strict";Om.__esModule=!0;Om.classNamesShape=Om.timeoutsShape=void 0;var yJt=zAt(Oi());function zAt(e){return e&&e.__esModule?e:{default:e}}var NAt=null;Om.timeoutsShape=NAt;var BAt=null;Om.classNamesShape=BAt});var mxe=S(Ka=>{"use strict";Ka.__esModule=!0;Ka.default=Ka.EXITING=Ka.ENTERED=Ka.ENTERING=Ka.EXITED=Ka.UNMOUNTED=void 0;var jAt=$At(Oi()),qB=pxe(Ar()),UAt=pxe(Ul()),VAt=E0e(),xJt=fxe();function pxe(e){return e&&e.__esModule?e:{default:e}}function $At(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};o.get||o.set?Object.defineProperty(t,i,o):t[i]=e[i]}}return t.default=e,t}function WAt(e,t){if(e==null)return{};var i={},o=Object.keys(e),c,a;for(a=0;a<o.length;a++)c=o[a],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function GAt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var E0="unmounted";Ka.UNMOUNTED=E0;var Cd="exited";Ka.EXITED=Cd;var Md="entering";Ka.ENTERING=Md;var Dm="entered";Ka.ENTERED=Dm;var IB="exiting";Ka.EXITING=IB;var pl=function(e){GAt(t,e);function t(o,c){var a;a=e.call(this,o,c)||this;var g=c.transitionGroup,x=g&&!g.isMounting?o.enter:o.appear,E;return a.appearStatus=null,o.in?x?(E=Cd,a.appearStatus=Md):E=Dm:o.unmountOnExit||o.mountOnEnter?E=E0:E=Cd,a.state={status:E},a.nextCallback=null,a}var i=t.prototype;return i.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(c,a){var g=c.in;return g&&a.status===E0?{status:Cd}:null},i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(c){var a=null;if(c!==this.props){var g=this.state.status;this.props.in?g!==Md&&g!==Dm&&(a=Md):(g===Md||g===Dm)&&(a=IB)}this.updateStatus(!1,a)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var c=this.props.timeout,a,g,x;return a=g=x=c,c!=null&&typeof c!="number"&&(a=c.exit,g=c.enter,x=c.appear!==void 0?c.appear:g),{exit:a,enter:g,appear:x}},i.updateStatus=function(c,a){if(c===void 0&&(c=!1),a!==null){this.cancelNextCallback();var g=UAt.default.findDOMNode(this);a===Md?this.performEnter(g,c):this.performExit(g)}else this.props.unmountOnExit&&this.state.status===Cd&&this.setState({status:E0})},i.performEnter=function(c,a){var g=this,x=this.props.enter,E=this.context.transitionGroup?this.context.transitionGroup.isMounting:a,P=this.getTimeouts(),M=E?P.appear:P.enter;if(!a&&!x){this.safeSetState({status:Dm},function(){g.props.onEntered(c)});return}this.props.onEnter(c,E),this.safeSetState({status:Md},function(){g.props.onEntering(c,E),g.onTransitionEnd(c,M,function(){g.safeSetState({status:Dm},function(){g.props.onEntered(c,E)})})})},i.performExit=function(c){var a=this,g=this.props.exit,x=this.getTimeouts();if(!g){this.safeSetState({status:Cd},function(){a.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:IB},function(){a.props.onExiting(c),a.onTransitionEnd(c,x.exit,function(){a.safeSetState({status:Cd},function(){a.props.onExited(c)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(c,a){a=this.setNextCallback(a),this.setState(c,a)},i.setNextCallback=function(c){var a=this,g=!0;return this.nextCallback=function(x){g&&(g=!1,a.nextCallback=null,c(x))},this.nextCallback.cancel=function(){g=!1},this.nextCallback},i.onTransitionEnd=function(c,a,g){this.setNextCallback(g);var x=a==null&&!this.props.addEndListener;if(!c||x){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(c,this.nextCallback),a!=null&&setTimeout(this.nextCallback,a)},i.render=function(){var c=this.state.status;if(c===E0)return null;var a=this.props,g=a.children,x=WAt(a,["children"]);if(delete x.in,delete x.mountOnEnter,delete x.unmountOnExit,delete x.appear,delete x.enter,delete x.exit,delete x.timeout,delete x.addEndListener,delete x.onEnter,delete x.onEntering,delete x.onEntered,delete x.onExit,delete x.onExiting,delete x.onExited,typeof g=="function")return g(c,x);var E=qB.default.Children.only(g);return qB.default.cloneElement(E,x)},t}(qB.default.Component);pl.contextTypes={transitionGroup:jAt.object};pl.childContextTypes={transitionGroup:function(){}};pl.propTypes={};function km(){}pl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:km,onEntering:km,onEntered:km,onExit:km,onExiting:km,onExited:km};pl.UNMOUNTED=0;pl.EXITED=1;pl.ENTERING=2;pl.ENTERED=3;pl.EXITING=4;var ZAt=(0,VAt.polyfill)(pl);Ka.default=ZAt});var A0=S((UE,vxe)=>{"use strict";UE.__esModule=!0;UE.default=KAt;function KAt(e){return e&&e.ownerDocument||document}vxe.exports=UE.default});var yxe=S((VE,gxe)=>{"use strict";var HAt=na();VE.__esModule=!0;VE.default=JAt;var XAt=HAt(A0());function JAt(e){e===void 0&&(e=(0,XAt.default)());try{return e.activeElement}catch(t){}}gxe.exports=VE.default});var PB=S((q0,xxe)=>{"use strict";var YAt=na();q0.__esModule=!0;q0.default=void 0;var QAt=YAt(dl()),eqt=function(){return QAt.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):_xe(e,t)}:_xe}();q0.default=eqt;function _xe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}xxe.exports=q0.default});var GE=S((I0,Txe)=>{"use strict";var nqt=na();I0.__esModule=!0;I0.default=void 0;var aqt=nqt(dl()),Sxe=function(){};aqt.default&&(Sxe=function(){if(document.addEventListener)return function(e,t,i,o){return e.addEventListener(t,i,o||!1)};if(document.attachEvent)return function(e,t,i){return e.attachEvent("on"+t,function(o){o=o||window.event,o.target=o.target||o.srcElement,o.currentTarget=e,i.call(e,o)})}}());var oqt=Sxe;I0.default=oqt;Txe.exports=I0.default});var ZE=S((P0,Axe)=>{"use strict";var sqt=na();P0.__esModule=!0;P0.default=void 0;var lqt=sqt(dl()),Exe=function(){};lqt.default&&(Exe=function(){if(document.addEventListener)return function(e,t,i,o){return e.removeEventListener(t,i,o||!1)};if(document.attachEvent)return function(e,t,i){return e.detachEvent("on"+t,i)}}());var uqt=Exe;P0.default=uqt;Axe.exports=P0.default});var Ixe=S((KE,qxe)=>{"use strict";KE.__esModule=!0;KE.default=hqt;var cqt=/^[\w-]*$/,OB=Function.prototype.bind.call(Function.prototype.call,[].slice);function hqt(e,t){var i=t[0]==="#",o=t[0]===".",c=i||o?t.slice(1):t,a=cqt.test(c),g;return a?i?(e=e.getElementById?e:document,(g=e.getElementById(c))?[g]:[]):e.getElementsByClassName&&o?OB(e.getElementsByClassName(c)):OB(e.getElementsByTagName(t)):OB(e.querySelectorAll(t))}qxe.exports=KE.default});var Mxe=S((HE,Cxe)=>{"use strict";var Pxe=na();HE.__esModule=!0;HE.default=pqt;var dqt=Pxe(PB()),fqt=Pxe(Ixe());function pqt(e,t){return function(o){var c=o.currentTarget,a=o.target,g=(0,fqt.default)(c,e);g.some(function(x){return(0,dqt.default)(x,a)})&&t.call(this,o)}}Cxe.exports=HE.default});var kxe=S((C0,Oxe)=>{"use strict";var kB=na();C0.__esModule=!0;C0.default=void 0;var mqt=kB(dl()),vqt=kB(GE()),gqt=kB(ZE()),Rxe=function(){};mqt.default&&(Rxe=function(t,i,o,c){return(0,vqt.default)(t,i,o,c),function(){(0,gqt.default)(t,i,o,c)}});var yqt=Rxe;C0.default=yqt;Oxe.exports=C0.default});var Nxe=S(Vc=>{"use strict";var XE=na();Vc.__esModule=!0;Vc.default=void 0;var Dxe=XE(GE());Vc.on=Dxe.default;var Lxe=XE(ZE());Vc.off=Lxe.default;var Fxe=XE(Mxe());Vc.filter=Fxe.default;var zxe=XE(kxe());Vc.listen=zxe.default;var _qt={on:Dxe.default,off:Lxe.default,filter:Fxe.default,listen:zxe.default};Vc.default=_qt});var DB=S((YE,Bxe)=>{"use strict";var xqt=na();YE.__esModule=!0;YE.default=wqt;var bqt=xqt(dl()),JE;function wqt(e){if((!JE&&JE!==0||e)&&bqt.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),JE=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return JE}Bxe.exports=YE.default});var eA=S((QE,Uxe)=>{"use strict";Object.defineProperty(QE,"__esModule",{value:!0});var Sqt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tqt=Ar(),Eqt=jxe(Tqt),Aqt=pB(),qqt=jxe(Aqt);function jxe(e){return e&&e.__esModule?e:{default:e}}function Iqt(e,t,i,o,c){var a=e[t],g=typeof a=="undefined"?"undefined":Sqt(a);return Eqt.default.isValidElement(a)?new Error("Invalid "+o+" `"+c+"` of type ReactElement "+("supplied to `"+i+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(g!=="object"||typeof a.render!="function")&&a.nodeType!==1?new Error("Invalid "+o+" `"+c+"` of value `"+a+"` "+("supplied to `"+i+"`, expected a ReactComponent or a ")+"DOMElement."):null}QE.default=(0,qqt.default)(Iqt);Uxe.exports=QE.default});var Gxe=S((IJt,Wxe)=>{"use strict";var Pqt=!1,$xe=function(){};Pqt&&(Vxe=function(t,i){var o=arguments.length;i=new Array(o>1?o-1:0);for(var c=1;c<o;c++)i[c-1]=arguments[c];var a=0,g="Warning: "+t.replace(/%s/g,function(){return i[a++]});typeof console!="undefined"&&console.error(g);try{throw new Error(g)}catch(x){}},$xe=function(e,t,i){var o=arguments.length;i=new Array(o>2?o-2:0);for(var c=2;c<o;c++)i[c-2]=arguments[c];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||Vxe.apply(null,[t].concat(i))});var Vxe;Wxe.exports=$xe});var Hxe=S((tA,Kxe)=>{"use strict";Object.defineProperty(tA,"__esModule",{value:!0});tA.default=Zxe;var Cqt=Gxe(),Mqt=Rqt(Cqt);function Rqt(e){return e&&e.__esModule?e:{default:e}}var LB={};function Zxe(e,t){return function(o,c,a,g,x){var E=a||"<<anonymous>>",P=x||c;if(o[c]!=null){var M=a+"."+c;(0,Mqt.default)(LB[M],"The "+g+" `"+P+"` of "+("`"+E+"` is deprecated. "+t+".")),LB[M]=!0}for(var O=arguments.length,z=Array(O>5?O-5:0),oe=5;oe<O;oe++)z[oe-5]=arguments[oe];return e.apply(void 0,[o,c,a,g,x].concat(z))}}function Oqt(){LB={}}Zxe._resetWarned=Oqt;Kxe.exports=tA.default});var FB=S((rA,Xxe)=>{"use strict";rA.__esModule=!0;rA.default=kqt;function kqt(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}Xxe.exports=rA.default});var Yxe=S((iA,Jxe)=>{"use strict";var Dqt=na();iA.__esModule=!0;iA.default=Fqt;var Lqt=Dqt(FB());function Fqt(e,t){e.classList?e.classList.add(t):(0,Lqt.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}Jxe.exports=iA.default});var tbe=S((PJt,ebe)=>{"use strict";function Qxe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}ebe.exports=function(t,i){t.classList?t.classList.remove(i):typeof t.className=="string"?t.className=Qxe(t.className,i):t.setAttribute("class",Qxe(t.className&&t.className.baseVal||"",i))}});var abe=S(Rd=>{"use strict";var zB=na();Rd.__esModule=!0;Rd.default=void 0;var rbe=zB(Yxe());Rd.addClass=rbe.default;var ibe=zB(tbe());Rd.removeClass=ibe.default;var nbe=zB(FB());Rd.hasClass=nbe.default;var zqt={addClass:rbe.default,removeClass:ibe.default,hasClass:nbe.default};Rd.default=zqt});var sbe=S((nA,obe)=>{"use strict";nA.__esModule=!0;nA.default=Nqt;function Nqt(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}obe.exports=nA.default});var NB=S((aA,cbe)=>{"use strict";aA.__esModule=!0;aA.default=Wqt;var Bqt=sbe(),lbe=ube(Bqt),jqt=A0(),Uqt=ube(jqt);function ube(e){return e&&e.__esModule?e:{default:e}}function Vqt(e){return e&&e.tagName.toLowerCase()==="body"}function $qt(e){var t=(0,Uqt.default)(e),i=(0,lbe.default)(t),o=i.innerWidth;if(!o){var c=t.documentElement.getBoundingClientRect();o=c.right-Math.abs(c.left)}return t.body.clientWidth<o}function Wqt(e){var t=(0,lbe.default)(e);return t||Vqt(e)?$qt(e):e.scrollHeight>e.clientHeight}cbe.exports=aA.default});var dbe=S(M0=>{"use strict";M0.__esModule=!0;M0.ariaHidden=BB;M0.hideSiblings=Kqt;M0.showSiblings=Hqt;var Gqt=["template","script","style"],Zqt=function(t){var i=t.nodeType,o=t.tagName;return i===1&&Gqt.indexOf(o.toLowerCase())===-1},hbe=function(t,i,o){i=[].concat(i),[].forEach.call(t.children,function(c){i.indexOf(c)===-1&&Zqt(c)&&o(c)})};function BB(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function Kqt(e,t){hbe(e,t,function(i){return BB(!0,i)})}function Hqt(e,t){hbe(e,t,function(i){return BB(!1,i)})}});var vbe=S((sA,mbe)=>{"use strict";sA.__esModule=!0;var Xqt=abe(),fbe=oA(Xqt),Jqt=dxe(),pbe=oA(Jqt),Yqt=DB(),Qqt=oA(Yqt),eIt=NB(),tIt=oA(eIt),jB=dbe();function oA(e){return e&&e.__esModule?e:{default:e}}function rIt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iIt(e,t){var i=-1;return e.some(function(o,c){if(t(o,c))return i=c,!0}),i}function nIt(e,t){return iIt(e,function(i){return i.modals.indexOf(t)!==-1})}function aIt(e,t){var i={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(i.paddingRight=parseInt((0,pbe.default)(t,"paddingRight")||0,10)+(0,Qqt.default)()+"px"),(0,pbe.default)(t,i)}function oIt(e,t){var i=e.style;Object.keys(i).forEach(function(o){return t.style[o]=i[o]})}var sIt=function e(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.hideSiblingNodes,c=o===void 0?!0:o,a=i.handleContainerOverflow,g=a===void 0?!0:a;rIt(this,e),this.add=function(x,E,P){var M=t.modals.indexOf(x),O=t.containers.indexOf(E);if(M!==-1)return M;if(M=t.modals.length,t.modals.push(x),t.hideSiblingNodes&&(0,jB.hideSiblings)(E,x.modalNode),O!==-1)return t.data[O].modals.push(x),M;var z={modals:[x],classes:P?P.split(/\s+/):[],overflowing:(0,tIt.default)(E)};return t.handleContainerOverflow&&aIt(z,E),z.classes.forEach(fbe.default.addClass.bind(null,E)),t.containers.push(E),t.data.push(z),M},this.remove=function(x){var E=t.modals.indexOf(x);if(E!==-1){var P=nIt(t.data,x),M=t.data[P],O=t.containers[P];M.modals.splice(M.modals.indexOf(x),1),t.modals.splice(E,1),M.modals.length===0?(M.classes.forEach(fbe.default.removeClass.bind(null,O)),t.handleContainerOverflow&&oIt(M,O),t.hideSiblingNodes&&(0,jB.showSiblings)(O,x.modalNode),t.containers.splice(P,1),t.data.splice(P,1)):t.hideSiblingNodes&&(0,jB.ariaHidden)(!1,M.modals[M.modals.length-1].modalNode)}},this.isTopModal=function(x){return!!t.modals.length&&t.modals[t.modals.length-1]===x},this.hideSiblingNodes=c,this.handleContainerOverflow=g,this.modals=[],this.containers=[],this.data=[]};sA.default=sIt;mbe.exports=sA.default});var uA=S((lA,gbe)=>{"use strict";lA.__esModule=!0;lA.default=hIt;var lIt=Ul(),uIt=cIt(lIt);function cIt(e){return e&&e.__esModule?e:{default:e}}function hIt(e,t){return e=typeof e=="function"?e():e,uIt.default.findDOMNode(e)||t}gbe.exports=lA.default});var hA=S((cA,_be)=>{"use strict";cA.__esModule=!0;cA.default=function(e){return(0,mIt.default)(fIt.default.findDOMNode(e))};var dIt=Ul(),fIt=ybe(dIt),pIt=A0(),mIt=ybe(pIt);function ybe(e){return e&&e.__esModule?e:{default:e}}_be.exports=cA.default});var Abe=S((dA,Ebe)=>{"use strict";dA.__esModule=!0;var vIt=Oi(),UB=Fm(vIt),gIt=eA(),yIt=Fm(gIt),_It=Ar(),xbe=Fm(_It),xIt=Ul(),bbe=Fm(xIt),bIt=uA(),wbe=Fm(bIt),wIt=hA(),Sbe=Fm(wIt);function Fm(e){return e&&e.__esModule?e:{default:e}}function SIt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tbe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function TIt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var VB=function(e){TIt(t,e);function t(){var i,o,c;SIt(this,t);for(var a=arguments.length,g=Array(a),x=0;x<a;x++)g[x]=arguments[x];return c=(i=(o=Tbe(this,e.call.apply(e,[this].concat(g))),o),o._mountOverlayTarget=function(){o._overlayTarget||(o._overlayTarget=document.createElement("div"),o._portalContainerNode=(0,wbe.default)(o.props.container,(0,Sbe.default)(o).body),o._portalContainerNode.appendChild(o._overlayTarget))},o._unmountOverlayTarget=function(){o._overlayTarget&&(o._portalContainerNode.removeChild(o._overlayTarget),o._overlayTarget=null),o._portalContainerNode=null},o._renderOverlay=function(){var E=o.props.children?xbe.default.Children.only(o.props.children):null;if(E!==null){o._mountOverlayTarget();var P=!o._overlayInstance;o._overlayInstance=bbe.default.unstable_renderSubtreeIntoContainer(o,E,o._overlayTarget,function(){P&&o.props.onRendered&&o.props.onRendered()})}else o._unrenderOverlay(),o._unmountOverlayTarget()},o._unrenderOverlay=function(){o._overlayTarget&&(bbe.default.unmountComponentAtNode(o._overlayTarget),o._overlayInstance=null)},o.getMountNode=function(){return o._overlayTarget},i),Tbe(o,c)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(o){this._overlayTarget&&o.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,wbe.default)(o.container,(0,Sbe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(xbe.default.Component);VB.displayName="Portal";VB.propTypes={container:UB.default.oneOfType([yIt.default,UB.default.func]),onRendered:UB.default.func};dA.default=VB;Ebe.exports=dA.default});var Pbe=S((fA,Ibe)=>{"use strict";fA.__esModule=!0;var EIt=dl(),AIt=$c(EIt),qIt=Oi(),$B=$c(qIt),IIt=eA(),PIt=$c(IIt),CIt=Ar(),MIt=$c(CIt),RIt=Ul(),WB=$c(RIt),OIt=uA(),kIt=$c(OIt),DIt=hA(),LIt=$c(DIt),FIt=Abe(),zIt=$c(FIt);function $c(e){return e&&e.__esModule?e:{default:e}}function NIt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qbe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function BIt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var GB=function(e){BIt(t,e);function t(){var i,o,c;NIt(this,t);for(var a=arguments.length,g=Array(a),x=0;x<a;x++)g[x]=arguments[x];return c=(i=(o=qbe(this,e.call.apply(e,[this].concat(g))),o),o.getMountNode=function(){return o._portalContainerNode},i),qbe(o,c)}return t.prototype.UNSAFE_componentWillMount=function(){if(AIt.default){var o=this.props.container;typeof o=="function"&&(o=o()),!(o&&!WB.default.findDOMNode(o))&&this.setContainer(o)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(o){o.container!==this.props.container&&this.setContainer(o.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(o){this._portalContainerNode=(0,kIt.default)(o,(0,LIt.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?WB.default.createPortal(this.props.children,this._portalContainerNode):null},t}(MIt.default.Component);GB.displayName="Portal";GB.propTypes={container:$B.default.oneOfType([PIt.default,$B.default.func]),onRendered:$B.default.func};fA.default=WB.default.createPortal?GB:zIt.default;Ibe.exports=fA.default});var Obe=S((pA,Rbe)=>{"use strict";pA.__esModule=!0;var jIt=Oi(),UIt=Cbe(jIt),VIt=Ar(),$It=Cbe(VIt);function Cbe(e){return e&&e.__esModule?e:{default:e}}function WIt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GIt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ZIt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var KIt={children:UIt.default.node},Mbe=function(e){ZIt(t,e);function t(){return WIt(this,t),GIt(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}($It.default.Component);Mbe.propTypes=KIt;pA.default=Mbe;Rbe.exports=pA.default});var Lbe=S((mA,Dbe)=>{"use strict";mA.__esModule=!0;mA.default=function(e,t,i,o){return(0,XIt.default)(e,t,i,o),{remove:function(){(0,YIt.default)(e,t,i,o)}}};var HIt=GE(),XIt=kbe(HIt),JIt=ZE(),YIt=kbe(JIt);function kbe(e){return e&&e.__esModule?e:{default:e}}Dbe.exports=mA.default});var zbe=S((vA,Fbe)=>{"use strict";vA.__esModule=!0;vA.default=QIt;function QIt(e){var t=!document.addEventListener,i=void 0;return t?(document.attachEvent("onfocusin",e),i=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),i=function(){return document.removeEventListener("focus",e,!0)}),{remove:i}}Fbe.exports=vA.default});var Kbe=S((yA,Zbe)=>{"use strict";yA.__esModule=!0;var Ube=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ePt=yxe(),ZB=Bn(ePt),tPt=PB(),Vbe=Bn(tPt),rPt=dl(),iPt=Bn(rPt),nPt=Oi(),Zr=Bn(nPt),aPt=eA(),oPt=Bn(aPt),sPt=Hxe(),lPt=Bn(sPt),uPt=Rm(),Nbe=Bn(uPt),$be=Ar(),Wc=Bn($be),cPt=Ul(),hPt=Bn(cPt),dPt=$0e(),fPt=Bn(dPt),pPt=vbe(),Wbe=Bn(pPt),mPt=Pbe(),Gbe=Bn(mPt),vPt=Obe(),gPt=Bn(vPt),yPt=Lbe(),Bbe=Bn(yPt),_Pt=zbe(),xPt=Bn(_Pt),bPt=uA(),wPt=Bn(bPt),SPt=hA(),KB=Bn(SPt);function Bn(e){return e&&e.__esModule?e:{default:e}}function TPt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jbe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function EPt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var APt=new Wbe.default,gA=function(e){EPt(t,e);function t(){var i,o,c;TPt(this,t);for(var a=arguments.length,g=Array(a),x=0;x<a;x++)g[x]=arguments[x];return c=(i=(o=jbe(this,e.call.apply(e,[this].concat(g))),o),qPt.call(o),i),jbe(o,c)}return t.prototype.omitProps=function(o,c){var a=Object.keys(o),g={};return a.map(function(x){Object.prototype.hasOwnProperty.call(c,x)||(g[x]=o[x])}),g},t.prototype.render=function(){var o=this.props,c=o.show,a=o.container,g=o.children,x=o.transition,E=o.backdrop,P=o.className,M=o.style,O=o.onExit,z=o.onExiting,oe=o.onEnter,we=o.onEntering,ye=o.onEntered,te=Wc.default.Children.only(g),Q=this.omitProps(this.props,t.propTypes),ee=c||x&&!this.state.exited;if(!ee)return null;var xe=te.props,Te=xe.role,Je=xe.tabIndex;return(Te===void 0||Je===void 0)&&(te=(0,$be.cloneElement)(te,{role:Te===void 0?"document":Te,tabIndex:Je==null?"-1":Je})),x&&(te=Wc.default.createElement(x,{appear:!0,unmountOnExit:!0,in:c,onExit:O,onExiting:z,onExited:this.handleHidden,onEnter:oe,onEntering:we,onEntered:ye},te)),Wc.default.createElement(Gbe.default,{ref:this.setMountNode,container:a,onRendered:this.onPortalRendered},Wc.default.createElement("div",Ube({ref:this.setModalNodeRef,role:Te||"dialog"},Q,{style:M,className:P}),E&&this.renderBackdrop(),Wc.default.createElement(gPt.default,{ref:this.setDialogRef},te)))},t.prototype.UNSAFE_componentWillReceiveProps=function(o){o.show?this.setState({exited:!1}):o.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(o){!this.props.show&&o.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(o){var c=this.props.transition;o.show&&!this.props.show&&!c?this.onHide():!o.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var o=this.props,c=o.show,a=o.transition;this._isMounted=!1,(c||a&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var o=this.getDialogElement(),c=(0,ZB.default)((0,KB.default)(this));o&&!(0,Vbe.default)(o,c)&&(this.lastFocus=c,o.hasAttribute("tabIndex")||((0,fPt.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),o.setAttribute("tabIndex",-1)),o.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return hPt.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(Wc.default.Component);gA.propTypes=Ube({},Gbe.default.propTypes,{show:Zr.default.bool,container:Zr.default.oneOfType([oPt.default,Zr.default.func]),onShow:Zr.default.func,onHide:Zr.default.func,backdrop:Zr.default.oneOfType([Zr.default.bool,Zr.default.oneOf(["static"])]),renderBackdrop:Zr.default.func,onEscapeKeyDown:Zr.default.func,onEscapeKeyUp:(0,lPt.default)(Zr.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Zr.default.func,backdropStyle:Zr.default.object,backdropClassName:Zr.default.string,containerClassName:Zr.default.string,keyboard:Zr.default.bool,transition:Nbe.default,backdropTransition:Nbe.default,autoFocus:Zr.default.bool,enforceFocus:Zr.default.bool,restoreFocus:Zr.default.bool,onEnter:Zr.default.func,onEntering:Zr.default.func,onEntered:Zr.default.func,onExit:Zr.default.func,onExiting:Zr.default.func,onExited:Zr.default.func,manager:Zr.default.object.isRequired});gA.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:APt,renderBackdrop:function(t){return Wc.default.createElement("div",t)}};var qPt=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var i=t.props,o=i.backdropStyle,c=i.backdropClassName,a=i.renderBackdrop,g=i.backdropTransition,x=function(M){return t.backdrop=M},E=a({ref:x,style:o,className:c,onClick:t.handleBackdropClick});return g&&(E=Wc.default.createElement(g,{appear:!0,in:t.props.show},E)),E},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var i=(0,KB.default)(t),o=(0,wPt.default)(t.props.container,i.body);t.props.manager.add(t,o,t.props.containerClassName),t._onDocumentKeydownListener=(0,Bbe.default)(i,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,Bbe.default)(i,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,xPt.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(i){t.mountNode=i&&i.getMountNode()},this.setModalNodeRef=function(i){t.modalNode=i},this.setDialogRef=function(i){t.dialog=i},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var i;(i=t.props).onExited.apply(i,arguments)}},this.handleBackdropClick=function(i){i.target===i.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(i),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(i){t.props.keyboard&&i.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(i),t.props.onHide())},this.handleDocumentKeyUp=function(i){t.props.keyboard&&i.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(i)},this.checkForFocus=function(){iPt.default&&(t.lastFocus=(0,ZB.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var i=t.getDialogElement(),o=(0,ZB.default)((0,KB.default)(t));i&&!(0,Vbe.default)(i,o)&&i.focus()}}};gA.Manager=Wbe.default;yA.default=gA;Zbe.exports=yA.default});var _1e=S((JYt,y1e)=>{var $Pt="Expected a function",v1e=NaN,WPt="[object Symbol]",GPt=/^\s+|\s+$/g,ZPt=/^[-+]0x[0-9a-f]+$/i,KPt=/^0b[01]+$/i,HPt=/^0o[0-7]+$/i,XPt=parseInt,JPt=typeof global=="object"&&global&&global.Object===Object&&global,YPt=typeof self=="object"&&self&&self.Object===Object&&self,QPt=JPt||YPt||Function("return this")(),e2t=Object.prototype,t2t=e2t.toString,r2t=Math.max,i2t=Math.min,o3=function(){return QPt.Date.now()};function n2t(e,t,i){var o,c,a,g,x,E,P=0,M=!1,O=!1,z=!0;if(typeof e!="function")throw new TypeError($Pt);t=g1e(t)||0,s3(i)&&(M=!!i.leading,O="maxWait"in i,a=O?r2t(g1e(i.maxWait)||0,t):a,z="trailing"in i?!!i.trailing:z);function oe(Ne){var ut=o,xt=c;return o=c=void 0,P=Ne,g=e.apply(xt,ut),g}function we(Ne){return P=Ne,x=setTimeout(Q,t),M?oe(Ne):g}function ye(Ne){var ut=Ne-E,xt=Ne-P,mt=t-ut;return O?i2t(mt,a-xt):mt}function te(Ne){var ut=Ne-E,xt=Ne-P;return E===void 0||ut>=t||ut<0||O&&xt>=a}function Q(){var Ne=o3();if(te(Ne))return ee(Ne);x=setTimeout(Q,ye(Ne))}function ee(Ne){return x=void 0,z&&o?oe(Ne):(o=c=void 0,g)}function xe(){x!==void 0&&clearTimeout(x),P=0,o=E=c=x=void 0}function Te(){return x===void 0?g:ee(o3())}function Je(){var Ne=o3(),ut=te(Ne);if(o=arguments,c=this,E=Ne,ut){if(x===void 0)return we(E);if(O)return x=setTimeout(Q,t),oe(E)}return x===void 0&&(x=setTimeout(Q,t)),g}return Je.cancel=xe,Je.flush=Te,Je}function s3(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function a2t(e){return!!e&&typeof e=="object"}function o2t(e){return typeof e=="symbol"||a2t(e)&&t2t.call(e)==WPt}function g1e(e){if(typeof e=="number")return e;if(o2t(e))return v1e;if(s3(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=s3(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(GPt,"");var i=KPt.test(e);return i||HPt.test(e)?XPt(e.slice(2),i?2:8):ZPt.test(e)?v1e:+e}y1e.exports=n2t});var c2t={};mSe(c2t,{SettingsProvider:()=>l2t,renderApp:()=>u2t});var S1e=yt(Ar(),1),T1e=yt(Ul(),1),SQt=yt(jve(),1);var Dd=yt(Ar(),1);var Wwt={AE:"ae",AK:"ak",CM:"cm",GL:"gl",MB:"mb",MTB:"mtb",TK:"tk",TKX:"tkx"};function Em(){return{allow_download:!0,default_crs:null,description:"",license:"CC-BY-SA 4.0",link_zoomify:null,link_thumb_small:null,link_thumb_mid:null,map_type:Wwt.AK,map_scale:25e3,measures:null,owner:null,permalink:null,ppn:null,technic:null,time_of_publication:"1899-01-01T00:00:00",title:"",title_serie:null,title_short:"",type:null}}var Dt=yt(Ar(),1);var KT=yt(Ar(),1),lo=yt(Ar(),1);var u0=e=>e.type==="checkbox",qd=e=>e instanceof Date,xa=e=>e==null,ege=e=>typeof e=="object",Ri=e=>!xa(e)&&!Array.isArray(e)&&ege(e)&&!qd(e),Gwt=e=>Ri(e)&&e.target?u0(e.target)?e.target.checked:e.target.value:e,Zwt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Kwt=(e,t)=>e.has(Zwt(t)),Hwt=e=>{let t=e.constructor&&e.constructor.prototype;return Ri(t)&&t.hasOwnProperty("isPrototypeOf")},yN=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Qn(e){let t,i=Array.isArray(e),o=typeof FileList!="undefined"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(yN&&(e instanceof Blob||o))&&(i||Ri(e))){if(t=i?[]:{},!i&&!Hwt(e))t=e;else for(let c in e)e.hasOwnProperty(c)&&(t[c]=Qn(e[c]));}else return e;return t}var HT=e=>Array.isArray(e)?e.filter(Boolean):[],$i=e=>e===void 0,Et=(e,t,i)=>{if(!t||!Ri(e))return i;let o=HT(t.split(/[,[\].]+?/)).reduce((c,a)=>xa(c)?c:c[a],e);return $i(o)||o===e?$i(e[t])?i:e[t]:o},al=e=>typeof e=="boolean",_N=e=>/^\w*$/.test(e),tge=e=>HT(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ii=(e,t,i)=>{let o=-1,c=_N(t)?[t]:tge(t),a=c.length,g=a-1;for(;++o<a;){let x=c[o],E=i;if(o!==g){let P=e[x];E=Ri(P)||Array.isArray(P)?P:isNaN(+c[o+1])?{}:[]}if(x==="__proto__"||x==="constructor"||x==="prototype")return;e[x]=E,e=e[x]}},Uve={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ys={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},su={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},rge=lo.default.createContext(null),ige=()=>lo.default.useContext(rge),nge=e=>{let o=e,{children:t}=o,i=Df(o,["children"]);return lo.default.createElement(rge.Provider,{value:i},t)},Xwt=(e,t,i,o=!0)=>{let c={defaultValues:t._defaultValues};for(let a in e)Object.defineProperty(c,a,{get:()=>{let g=a;return t._proxyFormState[g]!==ys.all&&(t._proxyFormState[g]=!o||ys.all),i&&(i[g]=!0),e[g]}});return c},Jwt=typeof window!="undefined"?KT.useLayoutEffect:KT.useEffect;var ol=e=>typeof e=="string",Ywt=(e,t,i,o,c)=>ol(e)?(o&&t.watch.add(e),Et(i,e,c)):Array.isArray(e)?e.map(a=>(o&&t.watch.add(a),Et(i,a))):(o&&(t.watchAll=!0),i);var Qwt=(e,t,i,o,c)=>t?qn(lt({},i[e]),{types:qn(lt({},i[e]&&i[e].types?i[e].types:{}),{[o]:c||!0})}):{},s0=e=>Array.isArray(e)?e:[e],Vve=()=>{let e=[];return{get observers(){return e},next:c=>{for(let a of e)a.next&&a.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(a=>a!==c)}}),unsubscribe:()=>{e=[]}}},gN=e=>xa(e)||!ege(e);function Bc(e,t){if(gN(e)||gN(t))return e===t;if(qd(e)&&qd(t))return e.getTime()===t.getTime();let i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(let c of i){let a=e[c];if(!o.includes(c))return!1;if(c!=="ref"){let g=t[c];if(qd(a)&&qd(g)||Ri(a)&&Ri(g)||Array.isArray(a)&&Array.isArray(g)?!Bc(a,g):a!==g)return!1}}return!0}var _a=e=>Ri(e)&&!Object.keys(e).length,xN=e=>e.type==="file",_s=e=>typeof e=="function",WT=e=>{if(!yN)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},age=e=>e.type==="select-multiple",bN=e=>e.type==="radio",eSt=e=>bN(e)||u0(e),vN=e=>WT(e)&&e.isConnected;function tSt(e,t){let i=t.slice(0,-1).length,o=0;for(;o<i;)e=$i(e)?o++:e[t[o++]];return e}function rSt(e){for(let t in e)if(e.hasOwnProperty(t)&&!$i(e[t]))return!1;return!0}function rn(e,t){let i=Array.isArray(t)?t:_N(t)?[t]:tge(t),o=i.length===1?e:tSt(e,i),c=i.length-1,a=i[c];return o&&delete o[a],c!==0&&(Ri(o)&&_a(o)||Array.isArray(o)&&rSt(o))&&rn(e,i.slice(0,-1)),e}var oge=e=>{for(let t in e)if(_s(e[t]))return!0;return!1};function GT(e,t={}){let i=Array.isArray(e);if(Ri(e)||i)for(let o in e)Array.isArray(e[o])||Ri(e[o])&&!oge(e[o])?(t[o]=Array.isArray(e[o])?[]:{},GT(e[o],t[o])):xa(e[o])||(t[o]=!0);return t}function sge(e,t,i){let o=Array.isArray(e);if(Ri(e)||o)for(let c in e)Array.isArray(e[c])||Ri(e[c])&&!oge(e[c])?$i(t)||gN(i[c])?i[c]=Array.isArray(e[c])?GT(e[c],[]):lt({},GT(e[c])):sge(e[c],xa(t)?{}:t[c],i[c]):i[c]=!Bc(e[c],t[c]);return i}var a0=(e,t)=>sge(e,t,GT(t)),$ve={value:!1,isValid:!1},Wve={value:!0,isValid:!0},lge=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(i=>i&&i.checked&&!i.disabled).map(i=>i.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!$i(e[0].attributes.value)?$i(e[0].value)||e[0].value===""?Wve:{value:e[0].value,isValid:!0}:Wve:$ve}return $ve},uge=(e,{valueAsNumber:t,valueAsDate:i,setValueAs:o})=>$i(e)?e:t?e===""?NaN:e&&+e:i&&ol(e)?new Date(e):o?o(e):e,Gve={isValid:!1,value:null},cge=e=>Array.isArray(e)?e.reduce((t,i)=>i&&i.checked&&!i.disabled?{isValid:!0,value:i.value}:t,Gve):Gve;function Zve(e){let t=e.ref;return xN(t)?t.files:bN(t)?cge(e.refs).value:age(t)?[...t.selectedOptions].map(({value:i})=>i):u0(t)?lge(e.refs).value:uge($i(t.value)?e.ref.value:t.value,e)}var iSt=(e,t,i,o)=>{let c={};for(let a of e){let g=Et(t,a);g&&ii(c,a,g._f)}return{criteriaMode:i,names:[...e],fields:c,shouldUseNativeValidation:o}},ZT=e=>e instanceof RegExp,o0=e=>$i(e)?e:ZT(e)?e.source:Ri(e)?ZT(e.value)?e.value.source:e.value:e,Kve=e=>({isOnSubmit:!e||e===ys.onSubmit,isOnBlur:e===ys.onBlur,isOnChange:e===ys.onChange,isOnAll:e===ys.all,isOnTouch:e===ys.onTouched}),Hve="AsyncFunction",nSt=e=>!!e&&!!e.validate&&!!(_s(e.validate)&&e.validate.constructor.name===Hve||Ri(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Hve)),aSt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Xve=(e,t,i)=>!i&&(t.watchAll||t.watch.has(e)||[...t.watch].some(o=>e.startsWith(o)&&/^\.\w+/.test(e.slice(o.length)))),l0=(e,t,i,o)=>{for(let a of i||Object.keys(e)){let g=Et(e,a);if(g){let c=g,{_f:x}=c,E=Df(c,["_f"]);if(x){if(x.refs&&x.refs[0]&&t(x.refs[0],a)&&!o)return!0;if(x.ref&&t(x.ref,x.name)&&!o)return!0;if(l0(E,t))break}else if(Ri(E)&&l0(E,t))break}}};function Jve(e,t,i){let o=Et(e,i);if(o||_N(i))return{error:o,name:i};let c=i.split(".");for(;c.length;){let a=c.join("."),g=Et(t,a),x=Et(e,a);if(g&&!Array.isArray(g)&&i!==a)return{name:i};if(x&&x.type)return{name:a,error:x};c.pop()}return{name:i}}var oSt=(e,t,i,o)=>{i(e);let g=e,{name:c}=g,a=Df(g,["name"]);return _a(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(x=>t[x]===(!o||ys.all))},sSt=(e,t,i)=>!e||!t||e===t||s0(e).some(o=>o&&(i?o===t:o.startsWith(t)||t.startsWith(o))),lSt=(e,t,i,o,c)=>c.isOnAll?!1:!i&&c.isOnTouch?!(t||e):(i?o.isOnBlur:c.isOnBlur)?!e:(i?o.isOnChange:c.isOnChange)?e:!0,uSt=(e,t)=>!HT(Et(e,t)).length&&rn(e,t),cSt=(e,t,i)=>{let o=s0(Et(e,i));return ii(o,"root",t[i]),ii(e,i,o),e},$T=e=>ol(e);function Yve(e,t,i="validate"){if($T(e)||Array.isArray(e)&&e.every($T)||al(e)&&!e)return{type:i,message:$T(e)?e:"",ref:t}}var Am=e=>Ri(e)&&!ZT(e)?e:{value:e,message:""},Qve=(e,t,i,o,c,a)=>Ci(null,null,function*(){let{ref:g,refs:x,required:E,maxLength:P,minLength:M,min:O,max:z,pattern:oe,validate:we,name:ye,valueAsNumber:te,mount:Q}=e._f,ee=Et(i,ye);if(!Q||t.has(ye))return{};let xe=x?x[0]:g,Te=wt=>{c&&xe.reportValidity&&(xe.setCustomValidity(al(wt)?"":wt||""),xe.reportValidity())},Je={},Ne=bN(g),ut=u0(g),xt=Ne||ut,mt=(te||xN(g))&&$i(g.value)&&$i(ee)||WT(g)&&g.value===""||ee===""||Array.isArray(ee)&&!ee.length,_r=Qwt.bind(null,ye,o,Je),kr=(wt,zt,xr,Kr=su.maxLength,Lt=su.minLength)=>{let Dr=wt?zt:xr;Je[ye]=lt({type:wt?Kr:Lt,message:Dr,ref:g},_r(wt?Kr:Lt,Dr))};if(a?!Array.isArray(ee)||!ee.length:E&&(!xt&&(mt||xa(ee))||al(ee)&&!ee||ut&&!lge(x).isValid||Ne&&!cge(x).isValid)){let{value:wt,message:zt}=$T(E)?{value:!!E,message:E}:Am(E);if(wt&&(Je[ye]=lt({type:su.required,message:zt,ref:xe},_r(su.required,zt)),!o))return Te(zt),Je}if(!mt&&(!xa(O)||!xa(z))){let wt,zt,xr=Am(z),Kr=Am(O);if(!xa(ee)&&!isNaN(ee)){let Lt=g.valueAsNumber||ee&&+ee;xa(xr.value)||(wt=Lt>xr.value),xa(Kr.value)||(zt=Lt<Kr.value)}else{let Lt=g.valueAsDate||new Date(ee),Dr=nn=>new Date(new Date().toDateString()+" "+nn),Si=g.type=="time",wa=g.type=="week";ol(xr.value)&&ee&&(wt=Si?Dr(ee)>Dr(xr.value):wa?ee>xr.value:Lt>new Date(xr.value)),ol(Kr.value)&&ee&&(zt=Si?Dr(ee)<Dr(Kr.value):wa?ee<Kr.value:Lt<new Date(Kr.value))}if((wt||zt)&&(kr(!!wt,xr.message,Kr.message,su.max,su.min),!o))return Te(Je[ye].message),Je}if((P||M)&&!mt&&(ol(ee)||a&&Array.isArray(ee))){let wt=Am(P),zt=Am(M),xr=!xa(wt.value)&&ee.length>+wt.value,Kr=!xa(zt.value)&&ee.length<+zt.value;if((xr||Kr)&&(kr(xr,wt.message,zt.message),!o))return Te(Je[ye].message),Je}if(oe&&!mt&&ol(ee)){let{value:wt,message:zt}=Am(oe);if(ZT(wt)&&!ee.match(wt)&&(Je[ye]=lt({type:su.pattern,message:zt,ref:g},_r(su.pattern,zt)),!o))return Te(zt),Je}if(we){if(_s(we)){let wt=yield we(ee,i),zt=Yve(wt,xe);if(zt&&(Je[ye]=lt(lt({},zt),_r(su.validate,zt.message)),!o))return Te(zt.message),Je}else if(Ri(we)){let wt={};for(let zt in we){if(!_a(wt)&&!o)break;let xr=Yve(yield we[zt](ee,i),xe,zt);xr&&(wt=lt(lt({},xr),_r(zt,xr.message)),Te(xr.message),o&&(Je[ye]=wt))}if(!_a(wt)&&(Je[ye]=lt({ref:xe},wt),!o))return Je}}return Te(!0),Je}),hSt={mode:ys.onSubmit,reValidateMode:ys.onChange,shouldFocusError:!0};function dSt(e={}){let t=lt(lt({},hSt),e),i={submitCount:0,isDirty:!1,isReady:!1,isLoading:_s(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},o={},c=Ri(t.defaultValues)||Ri(t.values)?Qn(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Qn(c),g={action:!1,mount:!1,watch:!1},x={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},E,P=0,M={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},O=lt({},M),z={array:Vve(),state:Vve()},oe=Kve(t.mode),we=Kve(t.reValidateMode),ye=t.criteriaMode===ys.all,te=ge=>Re=>{clearTimeout(P),P=setTimeout(ge,Re)},Q=ge=>Ci(null,null,function*(){if(!t.disabled&&(M.isValid||O.isValid||ge)){let Re=t.resolver?_a((yield mt()).errors):yield kr(o,!0);Re!==i.isValid&&z.state.next({isValid:Re})}}),ee=(ge,Re)=>{!t.disabled&&(M.isValidating||M.validatingFields||O.isValidating||O.validatingFields)&&((ge||Array.from(x.mount)).forEach(Ve=>{Ve&&(Re?ii(i.validatingFields,Ve,Re):rn(i.validatingFields,Ve))}),z.state.next({validatingFields:i.validatingFields,isValidating:!_a(i.validatingFields)}))},xe=(ge,Re=[],Ve,gt,st=!0,tt=!0)=>{if(gt&&Ve&&!t.disabled){if(g.action=!0,tt&&Array.isArray(Et(o,ge))){let dt=Ve(Et(o,ge),gt.argA,gt.argB);st&&ii(o,ge,dt)}if(tt&&Array.isArray(Et(i.errors,ge))){let dt=Ve(Et(i.errors,ge),gt.argA,gt.argB);st&&ii(i.errors,ge,dt),uSt(i.errors,ge)}if((M.touchedFields||O.touchedFields)&&tt&&Array.isArray(Et(i.touchedFields,ge))){let dt=Ve(Et(i.touchedFields,ge),gt.argA,gt.argB);st&&ii(i.touchedFields,ge,dt)}(M.dirtyFields||O.dirtyFields)&&(i.dirtyFields=a0(c,a)),z.state.next({name:ge,isDirty:zt(ge,Re),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else ii(a,ge,Re)},Te=(ge,Re)=>{ii(i.errors,ge,Re),z.state.next({errors:i.errors})},Je=ge=>{i.errors=ge,z.state.next({errors:i.errors,isValid:!1})},Ne=(ge,Re,Ve,gt)=>{let st=Et(o,ge);if(st){let tt=Et(a,ge,$i(Ve)?Et(c,ge):Ve);$i(tt)||gt&&gt.defaultChecked||Re?ii(a,ge,Re?tt:Zve(st._f)):Lt(ge,tt),g.mount&&Q()}},ut=(ge,Re,Ve,gt,st)=>{let tt=!1,dt=!1,Bt={name:ge};if(!t.disabled){if(!Ve||gt){(M.isDirty||O.isDirty)&&(dt=i.isDirty,i.isDirty=Bt.isDirty=zt(),tt=dt!==Bt.isDirty);let Kt=Bc(Et(c,ge),Re);dt=!!Et(i.dirtyFields,ge),Kt?rn(i.dirtyFields,ge):ii(i.dirtyFields,ge,!0),Bt.dirtyFields=i.dirtyFields,tt=tt||(M.dirtyFields||O.dirtyFields)&&dt!==!Kt}if(Ve){let Kt=Et(i.touchedFields,ge);Kt||(ii(i.touchedFields,ge,Ve),Bt.touchedFields=i.touchedFields,tt=tt||(M.touchedFields||O.touchedFields)&&Kt!==Ve)}tt&&st&&z.state.next(Bt)}return tt?Bt:{}},xt=(ge,Re,Ve,gt)=>{let st=Et(i.errors,ge),tt=(M.isValid||O.isValid)&&al(Re)&&i.isValid!==Re;if(t.delayError&&Ve?(E=te(()=>Te(ge,Ve)),E(t.delayError)):(clearTimeout(P),E=null,Ve?ii(i.errors,ge,Ve):rn(i.errors,ge)),(Ve?!Bc(st,Ve):st)||!_a(gt)||tt){let dt=qn(lt(lt({},gt),tt&&al(Re)?{isValid:Re}:{}),{errors:i.errors,name:ge});i=lt(lt({},i),dt),z.state.next(dt)}},mt=ge=>Ci(null,null,function*(){ee(ge,!0);let Re=yield t.resolver(a,t.context,iSt(ge||x.mount,o,t.criteriaMode,t.shouldUseNativeValidation));return ee(ge),Re}),_r=ge=>Ci(null,null,function*(){let{errors:Re}=yield mt(ge);if(ge)for(let Ve of ge){let gt=Et(Re,Ve);gt?ii(i.errors,Ve,gt):rn(i.errors,Ve)}else i.errors=Re;return Re}),kr=(gt,st,...tt)=>Ci(null,[gt,st,...tt],function*(ge,Re,Ve={valid:!0}){for(let Bt in ge){let Kt=ge[Bt];if(Kt){let dt=Kt,{_f:tr}=dt,xn=Df(dt,["_f"]);if(tr){let Se=x.array.has(tr.name),G=Kt._f&&nSt(Kt._f);G&&M.validatingFields&&ee([Bt],!0);let Z=yield Qve(Kt,x.disabled,a,ye,t.shouldUseNativeValidation&&!Re,Se);if(G&&M.validatingFields&&ee([Bt]),Z[tr.name]&&(Ve.valid=!1,Re))break;!Re&&(Et(Z,tr.name)?Se?cSt(i.errors,Z,tr.name):ii(i.errors,tr.name,Z[tr.name]):rn(i.errors,tr.name))}!_a(xn)&&(yield kr(xn,Re,Ve))}}return Ve.valid}),wt=()=>{for(let ge of x.unMount){let Re=Et(o,ge);Re&&(Re._f.refs?Re._f.refs.every(Ve=>!vN(Ve)):!vN(Re._f.ref))&&Wi(ge)}x.unMount=new Set},zt=(ge,Re)=>!t.disabled&&(ge&&Re&&ii(a,ge,Re),!Bc(jn(),c)),xr=(ge,Re,Ve)=>Ywt(ge,x,lt({},g.mount?a:$i(Re)?c:ol(ge)?{[ge]:Re}:Re),Ve,Re),Kr=ge=>HT(Et(g.mount?a:c,ge,t.shouldUnregister?Et(c,ge,[]):[])),Lt=(ge,Re,Ve={})=>{let gt=Et(o,ge),st=Re;if(gt){let tt=gt._f;tt&&(!tt.disabled&&ii(a,ge,uge(Re,tt)),st=WT(tt.ref)&&xa(Re)?"":Re,age(tt.ref)?[...tt.ref.options].forEach(dt=>dt.selected=st.includes(dt.value)):tt.refs?u0(tt.ref)?tt.refs.length>1?tt.refs.forEach(dt=>(!dt.defaultChecked||!dt.disabled)&&(dt.checked=Array.isArray(st)?!!st.find(Bt=>Bt===dt.value):st===dt.value)):tt.refs[0]&&(tt.refs[0].checked=!!st):tt.refs.forEach(dt=>dt.checked=dt.value===st):xN(tt.ref)?tt.ref.value="":(tt.ref.value=st,tt.ref.type||z.state.next({name:ge,values:Qn(a)})))}(Ve.shouldDirty||Ve.shouldTouch)&&ut(ge,st,Ve.shouldTouch,Ve.shouldDirty,!0),Ve.shouldValidate&&ws(ge)},Dr=(ge,Re,Ve)=>{for(let gt in Re){let st=Re[gt],tt=`${ge}.${gt}`,dt=Et(o,tt);(x.array.has(ge)||Ri(st)||dt&&!dt._f)&&!qd(st)?Dr(tt,st,Ve):Lt(tt,st,Ve)}},Si=(ge,Re,Ve={})=>{let gt=Et(o,ge),st=x.array.has(ge),tt=Qn(Re);ii(a,ge,tt),st?(z.array.next({name:ge,values:Qn(a)}),(M.isDirty||M.dirtyFields||O.isDirty||O.dirtyFields)&&Ve.shouldDirty&&z.state.next({name:ge,dirtyFields:a0(c,a),isDirty:zt(ge,tt)})):gt&&!gt._f&&!xa(tt)?Dr(ge,tt,Ve):Lt(ge,tt,Ve),Xve(ge,x)&&z.state.next(lt({},i)),z.state.next({name:g.mount?ge:void 0,values:Qn(a)})},wa=ge=>Ci(null,null,function*(){g.mount=!0;let Re=ge.target,Ve=Re.name,gt=!0,st=Et(o,Ve),tt=dt=>{gt=Number.isNaN(dt)||qd(dt)&&isNaN(dt.getTime())||Bc(dt,Et(a,Ve,dt))};if(st){let dt,Bt,Kt=Re.type?Zve(st._f):Gwt(ge),tr=ge.type===Uve.BLUR||ge.type===Uve.FOCUS_OUT,xn=!aSt(st._f)&&!t.resolver&&!Et(i.errors,Ve)&&!st._f.deps||lSt(tr,Et(i.touchedFields,Ve),i.isSubmitted,we,oe),Se=Xve(Ve,x,tr);ii(a,Ve,Kt),tr?(st._f.onBlur&&st._f.onBlur(ge),E&&E(0)):st._f.onChange&&st._f.onChange(ge);let G=ut(Ve,Kt,tr),Z=!_a(G)||Se;if(!tr&&z.state.next({name:Ve,type:ge.type,values:Qn(a)}),xn)return(M.isValid||O.isValid)&&(t.mode==="onBlur"?tr&&Q():tr||Q()),Z&&z.state.next(lt({name:Ve},Se?{}:G));if(!tr&&Se&&z.state.next(lt({},i)),t.resolver){let{errors:Y}=yield mt([Ve]);if(tt(Kt),gt){let ue=Jve(i.errors,o,Ve),ve=Jve(Y,o,ue.name||Ve);dt=ve.error,Ve=ve.name,Bt=_a(Y)}}else ee([Ve],!0),dt=(yield Qve(st,x.disabled,a,ye,t.shouldUseNativeValidation))[Ve],ee([Ve]),tt(Kt),gt&&(dt?Bt=!1:(M.isValid||O.isValid)&&(Bt=yield kr(o,!0)));gt&&(st._f.deps&&ws(st._f.deps),xt(Ve,Bt,dt,G))}}),nn=(ge,Re)=>{if(Et(i.errors,Re)&&ge.focus)return ge.focus(),1},ws=(Ve,...gt)=>Ci(null,[Ve,...gt],function*(ge,Re={}){let st,tt,dt=s0(ge);if(t.resolver){let Bt=yield _r($i(ge)?ge:dt);st=_a(Bt),tt=ge?!dt.some(Kt=>Et(Bt,Kt)):st}else ge?(tt=(yield Promise.all(dt.map(Bt=>Ci(null,null,function*(){let Kt=Et(o,Bt);return yield kr(Kt&&Kt._f?{[Bt]:Kt}:Kt)})))).every(Boolean),!(!tt&&!i.isValid)&&Q()):tt=st=yield kr(o);return z.state.next(qn(lt(lt({},!ol(ge)||(M.isValid||O.isValid)&&st!==i.isValid?{}:{name:ge}),t.resolver||!ge?{isValid:st}:{}),{errors:i.errors})),Re.shouldFocus&&!tt&&l0(o,nn,ge?dt:x.mount),tt}),jn=ge=>{let Re=lt({},g.mount?a:c);return $i(ge)?Re:ol(ge)?Et(Re,ge):ge.map(Ve=>Et(Re,Ve))},fi=(ge,Re)=>({invalid:!!Et((Re||i).errors,ge),isDirty:!!Et((Re||i).dirtyFields,ge),error:Et((Re||i).errors,ge),isValidating:!!Et(i.validatingFields,ge),isTouched:!!Et((Re||i).touchedFields,ge)}),fo=ge=>{ge&&s0(ge).forEach(Re=>rn(i.errors,Re)),z.state.next({errors:ge?i.errors:{}})},an=(ge,Re,Ve)=>{let gt=(Et(o,ge,{_f:{}})._f||{}).ref,tr=Et(i.errors,ge)||{},{ref:tt,message:dt,type:Bt}=tr,Kt=Df(tr,["ref","message","type"]);ii(i.errors,ge,qn(lt(lt({},Kt),Re),{ref:gt})),z.state.next({name:ge,errors:i.errors,isValid:!1}),Ve&&Ve.shouldFocus&&gt&&gt.focus&&gt.focus()},Ss=(ge,Re)=>_s(ge)?z.state.subscribe({next:Ve=>ge(xr(void 0,Re),Ve)}):xr(ge,Re,!0),po=ge=>z.state.subscribe({next:Re=>{sSt(ge.name,Re.name,ge.exact)&&oSt(Re,ge.formState||M,Ta,ge.reRenderRoot)&&ge.callback(lt(lt({values:lt({},a)},i),Re))}}).unsubscribe,ml=ge=>(g.mount=!0,O=lt(lt({},O),ge.formState),po(qn(lt({},ge),{formState:O}))),Wi=(ge,Re={})=>{for(let Ve of ge?s0(ge):x.mount)x.mount.delete(Ve),x.array.delete(Ve),Re.keepValue||(rn(o,Ve),rn(a,Ve)),!Re.keepError&&rn(i.errors,Ve),!Re.keepDirty&&rn(i.dirtyFields,Ve),!Re.keepTouched&&rn(i.touchedFields,Ve),!Re.keepIsValidating&&rn(i.validatingFields,Ve),!t.shouldUnregister&&!Re.keepDefaultValue&&rn(c,Ve);z.state.next({values:Qn(a)}),z.state.next(lt(lt({},i),Re.keepDirty?{isDirty:zt()}:{})),!Re.keepIsValid&&Q()},on=({disabled:ge,name:Re})=>{(al(ge)&&g.mount||ge||x.disabled.has(Re))&&(ge?x.disabled.add(Re):x.disabled.delete(Re))},Ti=(ge,Re={})=>{let Ve=Et(o,ge),gt=al(Re.disabled)||al(t.disabled);return ii(o,ge,qn(lt({},Ve||{}),{_f:lt(qn(lt({},Ve&&Ve._f?Ve._f:{ref:{name:ge}}),{name:ge,mount:!0}),Re)})),x.mount.add(ge),Ve?on({disabled:al(Re.disabled)?Re.disabled:t.disabled,name:ge}):Ne(ge,!0,Re.value),qn(lt(lt({},gt?{disabled:Re.disabled||t.disabled}:{}),t.progressive?{required:!!Re.required,min:o0(Re.min),max:o0(Re.max),minLength:o0(Re.minLength),maxLength:o0(Re.maxLength),pattern:o0(Re.pattern)}:{}),{name:ge,onChange:wa,onBlur:wa,ref:st=>{if(st){Ti(ge,Re),Ve=Et(o,ge);let tt=$i(st.value)&&st.querySelectorAll&&st.querySelectorAll("input,select,textarea")[0]||st,dt=eSt(tt),Bt=Ve._f.refs||[];if(dt?Bt.find(Kt=>Kt===tt):tt===Ve._f.ref)return;ii(o,ge,{_f:lt(lt({},Ve._f),dt?{refs:[...Bt.filter(vN),tt,...(Array.isArray(Et(c,ge))?[{}]:[])],ref:{type:tt.type,name:ge}}:{ref:tt})}),Ne(ge,!1,void 0,tt)}else Ve=Et(o,ge,{}),Ve._f&&(Ve._f.mount=!1),(t.shouldUnregister||Re.shouldUnregister)&&!(Kwt(x.array,ge)&&g.action)&&x.unMount.add(ge)}})},gr=()=>t.shouldFocusError&&l0(o,nn,x.mount),Sa=ge=>{al(ge)&&(z.state.next({disabled:ge}),l0(o,(Re,Ve)=>{let gt=Et(o,Ve);gt&&(Re.disabled=gt._f.disabled||ge,Array.isArray(gt._f.refs)&&gt._f.refs.forEach(st=>{st.disabled=gt._f.disabled||ge}))},0,!1))},Ha=(ge,Re)=>Ve=>Ci(null,null,function*(){let gt;Ve&&(Ve.preventDefault&&Ve.preventDefault(),Ve.persist&&Ve.persist());let st=Qn(a);if(z.state.next({isSubmitting:!0}),t.resolver){let{errors:tt,values:dt}=yield mt();i.errors=tt,st=dt}else yield kr(o);if(x.disabled.size)for(let tt of x.disabled)ii(st,tt,void 0);if(rn(i.errors,"root"),_a(i.errors)){z.state.next({errors:{}});try{yield ge(st,Ve)}catch(tt){gt=tt}}else Re&&(yield Re(lt({},i.errors),Ve)),gr(),setTimeout(gr);if(z.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_a(i.errors)&&!gt,submitCount:i.submitCount+1,errors:i.errors}),gt)throw gt}),Un=(ge,Re={})=>{Et(o,ge)&&($i(Re.defaultValue)?Si(ge,Qn(Et(c,ge))):(Si(ge,Re.defaultValue),ii(c,ge,Qn(Re.defaultValue))),Re.keepTouched||rn(i.touchedFields,ge),Re.keepDirty||(rn(i.dirtyFields,ge),i.isDirty=Re.defaultValue?zt(ge,Qn(Et(c,ge))):zt()),Re.keepError||(rn(i.errors,ge),M.isValid&&Q()),z.state.next(lt({},i)))},Ts=(ge,Re={})=>{let Ve=ge?Qn(ge):c,gt=Qn(Ve),st=_a(ge),tt=st?c:gt;if(Re.keepDefaultValues||(c=Ve),!Re.keepValues){if(Re.keepDirtyValues){let dt=new Set([...x.mount,...Object.keys(a0(c,a))]);for(let Bt of Array.from(dt))Et(i.dirtyFields,Bt)?ii(tt,Bt,Et(a,Bt)):Si(Bt,Et(tt,Bt))}else{if(yN&&$i(ge))for(let dt of x.mount){let Bt=Et(o,dt);if(Bt&&Bt._f){let Kt=Array.isArray(Bt._f.refs)?Bt._f.refs[0]:Bt._f.ref;if(WT(Kt)){let tr=Kt.closest("form");if(tr){tr.reset();break}}}}for(let dt of x.mount)Si(dt,Et(tt,dt))}a=Qn(tt),z.array.next({values:lt({},tt)}),z.state.next({values:lt({},tt)})}x={mount:Re.keepDirtyValues?x.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},g.mount=!M.isValid||!!Re.keepIsValid||!!Re.keepDirtyValues,g.watch=!!t.shouldUnregister,z.state.next({submitCount:Re.keepSubmitCount?i.submitCount:0,isDirty:st?!1:Re.keepDirty?i.isDirty:!!(Re.keepDefaultValues&&!Bc(ge,c)),isSubmitted:Re.keepIsSubmitted?i.isSubmitted:!1,dirtyFields:st?{}:Re.keepDirtyValues?Re.keepDefaultValues&&a?a0(c,a):i.dirtyFields:Re.keepDefaultValues&&ge?a0(c,ge):Re.keepDirty?i.dirtyFields:{},touchedFields:Re.keepTouched?i.touchedFields:{},errors:Re.keepErrors?i.errors:{},isSubmitSuccessful:Re.keepIsSubmitSuccessful?i.isSubmitSuccessful:!1,isSubmitting:!1})},Es=(ge,Re)=>Ts(_s(ge)?ge(a):ge,Re),_n=(ge,Re={})=>{let Ve=Et(o,ge),gt=Ve&&Ve._f;if(gt){let st=gt.refs?gt.refs[0]:gt.ref;st.focus&&(st.focus(),Re.shouldSelect&&_s(st.select)&&st.select())}},Ta=ge=>{i=lt(lt({},i),ge)},mo={control:{register:Ti,unregister:Wi,getFieldState:fi,handleSubmit:Ha,setError:an,_subscribe:po,_runSchema:mt,_getWatch:xr,_getDirty:zt,_setValid:Q,_setFieldArray:xe,_setDisabledField:on,_setErrors:Je,_getFieldArray:Kr,_reset:Ts,_resetDefaultValues:()=>_s(t.defaultValues)&&t.defaultValues().then(ge=>{Es(ge,t.resetOptions),z.state.next({isLoading:!1})}),_removeUnmounted:wt,_disableForm:Sa,_subjects:z,_proxyFormState:M,get _fields(){return o},get _formValues(){return a},get _state(){return g},set _state(ge){g=ge},get _defaultValues(){return c},get _names(){return x},set _names(ge){x=ge},get _formState(){return i},get _options(){return t},set _options(ge){t=lt(lt({},t),ge)}},subscribe:ml,trigger:ws,register:Ti,handleSubmit:Ha,watch:Ss,setValue:Si,getValues:jn,reset:Es,resetField:Un,clearErrors:fo,unregister:Wi,setError:an,setFocus:_n,getFieldState:fi};return qn(lt({},mo),{formControl:mo})}function hge(e={}){let t=lo.default.useRef(void 0),i=lo.default.useRef(void 0),[o,c]=lo.default.useState({isDirty:!1,isValidating:!1,isLoading:_s(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:_s(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=qn(lt({},e.formControl?e.formControl:dSt(e)),{formState:o}),e.formControl&&e.defaultValues&&!_s(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));let a=t.current.control;return a._options=e,Jwt(()=>{let g=a._subscribe({formState:a._proxyFormState,callback:()=>c(lt({},a._formState)),reRenderRoot:!0});return c(x=>qn(lt({},x),{isReady:!0})),a._formState.isReady=!0,g},[a]),lo.default.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),lo.default.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode),e.errors&&!_a(e.errors)&&a._setErrors(e.errors)},[a,e.errors,e.mode,e.reValidateMode]),lo.default.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),lo.default.useEffect(()=>{if(a._proxyFormState.isDirty){let g=a._getDirty();g!==o.isDirty&&a._subjects.state.next({isDirty:g})}},[a,o.isDirty]),lo.default.useEffect(()=>{e.values&&!Bc(e.values,i.current)?(a._reset(e.values,a._options.resetOptions),i.current=e.values,c(g=>lt({},g))):a._resetDefaultValues()},[a,e.values]),lo.default.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next(lt({},a._formState))),a._removeUnmounted()}),t.current.formState=Xwt(o,a),t.current}var jm=yt(Oi(),1);var Wa=yt(Ar(),1);var $a=yt(Oi(),1);var _ge=e=>{let t={};return Object.keys(e).forEach(i=>{e[i]!==void 0&&e[i]!==null&&(i==="time_of_publication"?t[i]=`${e[i]}-01-01T00:00:00`:i==="map_scale"?t[i]=Number(e[i]):i==="allow_download"?t[i]=e[i]==="true":t[i]=e[i])}),t},xge=(e,t)=>{let i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!0;for(let c of i)if(e[c]!==t[c])return!0;return!1},bge=(e,t)=>Object.keys(e).filter(i=>i.includes(t)).reduce((i,o)=>Object.assign(i,{error:e[o]}),{}),lu={ok:e=>({data:e,error:null,httpErrorStatusCode:null}),error:e=>{let t=999;return e.response&&e.response.status&&(t=e.response.status),{data:null,error:e,httpErrorStatusCode:t}}};var mSt=e=>Object.keys(e).length>0,wge=({message:e})=>Wa.default.createElement("div",null,Wa.default.createElement("span",{className:"glyphicon glyphicon-exclamation-sign","aria-hidden":"true"}),Wa.default.createElement("span",{className:"sr-only"},"Error:"),e);wge.propTypes={message:$a.default.string};var Sge=e=>{let{name:t,label:i,type:o,id:c,validation:a,multiline:g,options:x}=e,{register:E,formState:{errors:P}}=ige(),M=bge(P,t),O=mSt(M);return Wa.default.createElement(Wa.default.Fragment,null,Wa.default.createElement("div",{className:`error-label-container ${O?"show-error":""}`},Wa.default.createElement("label",{htmlFor:c,className:"font-semibold capitalize body1"},i,a.required.value&&Wa.default.createElement("span",{className:"required"},"*")),O&&Wa.default.createElement(wge,{message:M.error.message,key:M.error.message})),g?Wa.default.createElement("textarea",lt({className:"body2",name:t,id:c,rows:"6"},E(t,a))):x?Wa.default.createElement("select",lt({className:"body2",name:t,id:c},E(t,a)),x.map(z=>Wa.default.createElement("option",{value:z.value,key:z.label},z.label))):Wa.default.createElement("input",lt({className:"body2",type:o,id:c},E(t,a))))};Sge.propTypes={name:$a.default.string.isRequired,label:$a.default.string.isRequired,type:$a.default.string,id:$a.default.string.isRequired,validation:$a.default.object.isRequired,multiline:$a.default.bool,options:$a.default.arrayOf($a.default.shape({value:$a.default.oneOfType([$a.default.bool,$a.default.string]),label:$a.default.string}))};var ea=Sge;var ll=yt(Ar(),1),WN=yt(Oi(),1);var f0=yt(Ege(),1);var Rye=yt(Mye(),1);var uTt={EN:"en",DE:"de"},cTt=typeof process!="undefined"&&Cm(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&Cm(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",iE=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),ba={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:uTt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},uu={axiosApiInstance:null,appendSettings(e){ba=Object.assign({},ba,e)},getSettings(){return ba},getBaseMaps(){return ba.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},ba.MAPVIEW_PARAMS)},getLanguageDict(){return ba.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return ba.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},ba.TERRAIN_TILES)},getUsername(){return ba.USERNAME},isUserAuthenticated(){return ba.USER_ISAUTHENTICATED===!0},updateSettings(e){ba=e},_initAxiosApiInstance(){let e=ba.API_GEOREFERENCE_BASEURL,t=Oye(e)&&e.length===0;if(!Cm(e)||t)throw new Error("The URL for the georeference service is not set.");let i=Object.assign({baseURL:e,withCredentials:!0},cTt?{headers:{get:iE(),post:iE(),put:iE(),delete:iE()}}:{});this.axiosApiInstance=Rye.default.create(i)},getGeoreferenceApiClient(){return Cm(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=ba.MARKER_URL;if(!Cm(e))throw new Error("The marker icon url is not set.");return{id:ba.MARKER_IMAGE_ID,url:e}},getUserRole(){return ba.USER_ROLE}};var CTt=yt(Vye(),1);function Cm(e){return e!=null}function Oye(e){return typeof e=="string"||e instanceof String}function pr(e){let t=uu.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let i=t[e];return i===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):i}function nE(e){let{onBack:t,mapId:i}=e;return ll.default.createElement("div",{className:"upload-header"},ll.default.createElement("div",{className:"back-btn-container"},ll.default.createElement("span",{className:"glyphicon glyphicon-chevron-left"}),ll.default.createElement("button",{className:"back-btn body1",onClick:t},"Back")),i==null?ll.default.createElement("h4",null,pr("uploadmap-title")):ll.default.createElement(ll.default.Fragment,null,ll.default.createElement("h4",null,pr("uploadmap-title-update")),ll.default.createElement("span",null,"ID: ",i)))}nE.propTypes={onBack:WN.default.func.isRequired,mapId:WN.default.string};var Vo=yt(Ar(),1),p0=yt(Oi(),1);var aE={name:"file",id:"file-upload",accept:"image/tiff"};function oE(e){let{mapMetadata:t,isPending:i,onFileSelect:o,reloadKey:c}=e,a=x=>{if(x.preventDefault(),x.target.files){let E=x.target.files[0];o(E)}};return Vo.default.createElement("div",{className:"upload-file-container"},Vo.default.createElement("div",{className:"upload-section",onClick:x=>{x.preventDefault(),x.stopPropagation(),document.getElementById(aE.id).click()}},t.link_thumb_mid!==null&&i===!1&&Vo.default.createElement("img",{src:`${t.link_thumb_mid}?${c}`,alt:"Thumbnail",className:"thumbnail-img"}),i===!0&&Vo.default.createElement("div",{className:"image-selected"},Vo.default.createElement("label",{className:"body1"},pr("uploadfile-label"))),t.link_thumb_mid===null&&i===!1&&Vo.default.createElement("div",{className:"select-image"},Vo.default.createElement("div",null,Vo.default.createElement("span",{className:"glyphicon glyphicon-picture"})),Vo.default.createElement("label",{className:"body1",htmlFor:aE.id},pr("uploadmap-upload-file")))),Vo.default.createElement("div",{className:"input-file"},Vo.default.createElement("input",{type:"file",id:aE.id,accept:aE.accept,onChange:a})))}oE.propTypes={isPending:p0.default.bool,mapMetadata:p0.default.object,onFileSelect:p0.default.func,reloadKey:p0.default.number};var ta={description:{name:"description",label:"description",multiline:!0,id:"description",validation:{required:{value:!1,message:"required"}}},map_type:{name:"map_type",label:"map_type",id:"map_type",validation:{required:{value:!0,message:"required"}},options:[{label:"\xC4quidistantenkarte",value:"ae"},{label:"Andere Karten",value:"ak"},{label:"Stadtpl\xE4ne",value:"cm"},{label:"Geologische Karten",value:"gl"},{label:"Meilenbl\xE4tter",value:"mb"},{label:"Messtischbl\xE4tter",value:"mtb"},{label:"Topographische Karte des Deutschen Reiches",value:"tk"},{label:"Topographische Karten",value:"tkx"}]},license:{name:"license",label:"license",type:"text",id:"license",validation:{required:{value:!0,message:"required"}}},map_scale:{name:"map_scale",label:"map_scale",type:"number",id:"map_scale",validation:{required:{value:!0,message:"required"}}},measures:{name:"measures",label:"measures",type:"text",id:"measures",validation:{required:{value:!1,message:"required"}}},owner:{name:"owner",label:"owner",type:"text",id:"owner",validation:{required:{value:!1,message:"required"}}},permalink:{name:"permalink",label:"permalink",type:"text",id:"permalink",validation:{required:{value:!1,message:"required"}}},ppn:{name:"ppn",label:"ppn",type:"text",id:"ppn",validation:{required:{value:!1,message:"required"}}},technic:{name:"technic",label:"technic",type:"text",id:"technic",validation:{required:{value:!1,message:"required"}}},time_of_publication:{name:"time_of_publication",label:"time_of_publication",type:"number",id:"time_of_publication",validation:{required:{value:!0,message:"required"},maxLength:{value:4,message:"Please enter a valid year"}}},allow_download:{name:"allow_download",label:"allow_download",id:"allow_download",validation:{required:{value:!1,message:"required"}},options:[{label:"true",value:!0},{label:"false",value:!1}]},title:{name:"title",label:"title",type:"text",id:"title",validation:{required:{value:!0,message:"required"}}},title_serie:{name:"title_serie",label:"title_serie",type:"text",id:"title_serie",validation:{required:{value:!1,message:"required"}}},title_short:{name:"title_short",label:"title_short",type:"text",id:"title_short",validation:{required:{value:!0,message:"required"}}},type:{name:"type",label:"type",type:"text",id:"type",validation:{required:{value:!1,message:"required"}}}};var Od=yt(Ar(),1);var oB=yt(X_e(),1);function zr(){return zr=oB.default?oB.default.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},zr.apply(null,arguments)}var _0e=yt(l0e(),1);var uB=yt(y0e(),1);function vE(e,t){return vE=uB.default?uB.default.bind():function(i,o){return i.__proto__=o,i},vE(e,t)}function ia(e,t){e.prototype=(0,_0e.default)(t.prototype),e.prototype.constructor=e,vE(e,t)}function Za(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var O0e=yt(hB());var k0e=yt(b0e()),yE=yt(Oi());var Mm={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},dB={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};function fB(e){return function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var c=i[i.length-1];return typeof c=="function"?e.apply(void 0,i):function(a){return e.apply(void 0,i.concat([a]))}}}function ul(e,t){var i=(e.bsClass||"").trim();return i==null&&(0,k0e.default)(!1),i+(t?"-"+t:"")}var $o=fB(function(e,t){var i=t.propTypes||(t.propTypes={}),o=t.defaultProps||(t.defaultProps={});return i.bsClass=yE.default.string,o.bsClass=e,t}),sJt=fB(function(e,t,i){typeof t!="string"&&(i=t,t=void 0);var o=i.STYLES||[],c=i.propTypes||{};e.forEach(function(x){o.indexOf(x)===-1&&o.push(x)});var a=yE.default.oneOf(o);if(i.STYLES=o,a._values=o,i.propTypes=zr({},c,{bsStyle:a}),t!==void 0){var g=i.defaultProps||(i.defaultProps={});g.bsStyle=t}return i}),_E=fB(function(e,t,i){typeof t!="string"&&(i=t,t=void 0);var o=i.SIZES||[],c=i.propTypes||{};e.forEach(function(x){o.indexOf(x)===-1&&o.push(x)});var a=[];o.forEach(function(x){var E=dB[x];E&&E!==x&&a.push(E),a.push(x)});var g=yE.default.oneOf(a);return g._values=a,i.SIZES=o,i.propTypes=zr({},c,{bsSize:g}),t!==void 0&&(i.defaultProps||(i.defaultProps={}),i.defaultProps.bsSize=t),i});function cl(e){var t,i=(t={},t[ul(e)]=!0,t);if(e.bsSize){var o=dB[e.bsSize]||e.bsSize;i[ul(e,o)]=!0}return e.bsStyle&&(i[ul(e,e.bsStyle)]=!0),i}function UEt(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function VEt(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function hl(e){var t={};return(0,O0e.default)(e).forEach(function(i){var o=i[0],c=i[1];VEt(o)||(t[o]=c)}),[UEt(e),t]}var mB=yt(Oi()),x0=yt(Ar()),WEt={label:mB.default.string.isRequired,onClick:mB.default.func},GEt={label:"Close"},vB=function(e){ia(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.label,g=c.onClick;return x0.default.createElement("button",{type:"button",className:"close",onClick:g},x0.default.createElement("span",{"aria-hidden":"true"},"\xD7"),x0.default.createElement("span",{className:"sr-only"},a))},t}(x0.default.Component);vB.propTypes=WEt;vB.defaultProps=GEt;var L0e=vB;function xs(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nAt(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(function(o){return o!=null}).reduce(function(o,c){if(typeof c!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return o===null?c:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];o.apply(this,x),c.apply(this,x)}},null)}var b0=nAt;var bxe=yt(hB());function CB(e,t){var i=t.propTypes,o={},c={};return(0,bxe.default)(e).forEach(function(a){var g=a[0],x=a[1];i[g]?o[g]=x:c[g]=x}),[o,c]}var wxe=yt(Uc()),WE=yt(Ar()),Wo=yt(Oi()),Lm=yt(mxe()),$E,tqt={in:Wo.default.bool,mountOnEnter:Wo.default.bool,unmountOnExit:Wo.default.bool,appear:Wo.default.bool,timeout:Wo.default.number,onEnter:Wo.default.func,onEntering:Wo.default.func,onEntered:Wo.default.func,onExit:Wo.default.func,onExiting:Wo.default.func,onExited:Wo.default.func},rqt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},iqt=($E={},$E[Lm.ENTERING]="in",$E[Lm.ENTERED]="in",$E),MB=function(e){ia(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.className,g=c.children,x=Za(c,["className","children"]);return WE.default.createElement(Lm.default,x,function(E,P){return WE.default.cloneElement(g,zr({},P,{className:(0,wxe.default)("fade",a,g.props.className,iqt[E])}))})},t}(WE.default.Component);MB.propTypes=tqt;MB.defaultProps=rqt;var RB=MB;var r3=yt(Uc()),i3=yt(Nxe()),a1e=yt(A0()),o1e=yt(dl()),n3=yt(DB()),Nm=yt(Ar()),yn=yt(Oi()),s1e=yt(Ul()),Bm=yt(Kbe()),l1e=yt(NB()),u1e=yt(Rm());var Hbe=yt(Uc()),HB=yt(Ar()),Xbe=yt(Rm());var IPt={componentClass:Xbe.default},PPt={componentClass:"div"},XB=function(e){ia(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.componentClass,g=c.className,x=Za(c,["componentClass","className"]),E=hl(x),P=E[0],M=E[1],O=cl(P);return HB.default.createElement(a,zr({},M,{className:(0,Hbe.default)(g,O)}))},t}(HB.default.Component);XB.propTypes=IPt;XB.defaultProps=PPt;var R0=$o("modal-body",XB);var JB=yt(Uc()),O0=yt(Ar()),Jbe=yt(Oi());var CPt={dialogClassName:Jbe.default.string},Ybe=function(e){ia(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c,a=this.props,g=a.dialogClassName,x=a.className,E=a.style,P=a.children,M=a.onMouseDownDialog,O=Za(a,["dialogClassName","className","style","children","onMouseDownDialog"]),z=hl(O),oe=z[0],we=z[1],ye=ul(oe),te=zr({display:"block"},E),Q=zr({},cl(oe),(c={},c[ye]=!1,c[ul(oe,"dialog")]=!0,c));return O0.default.createElement("div",zr({},we,{tabIndex:"-1",role:"dialog",style:te,className:(0,JB.default)(x,ye)}),O0.default.createElement("div",{className:(0,JB.default)(g,Q),onMouseDown:M},O0.default.createElement("div",{className:ul(oe,"content"),role:"document"},P)))},t}(O0.default.Component);Ybe.propTypes=CPt;var _A=$o("modal",_E([Mm.LARGE,Mm.SMALL],Ybe));var Qbe=yt(Uc()),YB=yt(Ar()),e1e=yt(Rm());var MPt={componentClass:e1e.default},RPt={componentClass:"div"},QB=function(e){ia(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.componentClass,g=c.className,x=Za(c,["componentClass","className"]),E=hl(x),P=E[0],M=E[1],O=cl(P);return YB.default.createElement(a,zr({},M,{className:(0,Qbe.default)(g,O)}))},t}(YB.default.Component);QB.propTypes=MPt;QB.defaultProps=RPt;var k0=$o("modal-footer",QB);var t1e=yt(Uc()),zm=yt(Oi()),xA=yt(Ar());var OPt={closeLabel:zm.default.string,closeButton:zm.default.bool,onHide:zm.default.func},kPt={closeLabel:"Close",closeButton:!1},DPt={$bs_modal:zm.default.shape({onHide:zm.default.func})},bA=function(e){ia(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.closeLabel,g=c.closeButton,x=c.onHide,E=c.className,P=c.children,M=Za(c,["closeLabel","closeButton","onHide","className","children"]),O=this.context.$bs_modal,z=hl(M),oe=z[0],we=z[1],ye=cl(oe);return xA.default.createElement("div",zr({},we,{className:(0,t1e.default)(E,ye)}),g&&xA.default.createElement(L0e,{label:a,onClick:b0(O&&O.onHide,x)}),P)},t}(xA.default.Component);bA.propTypes=OPt;bA.defaultProps=kPt;bA.contextTypes=DPt;var D0=$o("modal-header",bA);var r1e=yt(Uc()),e3=yt(Ar()),i1e=yt(Rm());var LPt={componentClass:i1e.default},FPt={componentClass:"h4"},t3=function(e){ia(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.componentClass,g=c.className,x=Za(c,["componentClass","className"]),E=hl(x),P=E[0],M=E[1],O=cl(P);return e3.default.createElement(a,zr({},M,{className:(0,r1e.default)(g,O)}))},t}(e3.default.Component);t3.propTypes=LPt;t3.defaultProps=FPt;var n1e=$o("modal-title",t3);var zPt=zr({},Bm.default.propTypes,_A.propTypes,{backdrop:yn.default.oneOf(["static",!0,!1]),backdropClassName:yn.default.string,keyboard:yn.default.bool,animation:yn.default.bool,dialogComponentClass:u1e.default,autoFocus:yn.default.bool,enforceFocus:yn.default.bool,restoreFocus:yn.default.bool,show:yn.default.bool,onHide:yn.default.func,onEnter:yn.default.func,onEntering:yn.default.func,onEntered:yn.default.func,onExit:yn.default.func,onExiting:yn.default.func,onExited:yn.default.func,container:Bm.default.propTypes.container}),NPt=zr({},Bm.default.defaultProps,{animation:!0,dialogComponentClass:_A}),BPt={$bs_modal:yn.default.shape({onHide:yn.default.func})};function jPt(e){return Nm.default.createElement(RB,zr({},e,{timeout:ho.TRANSITION_DURATION}))}function UPt(e){return Nm.default.createElement(RB,zr({},e,{timeout:ho.BACKDROP_TRANSITION_DURATION}))}var ho=function(e){ia(t,e);function t(o,c){var a;return a=e.call(this,o,c)||this,a.handleDialogBackdropMouseDown=function(){a._waitingForMouseUp=!0},a.handleMouseUp=function(g){var x=a._modal.getDialogElement();a._waitingForMouseUp&&g.target===x&&(a._ignoreBackdropClick=!0),a._waitingForMouseUp=!1},a.handleEntering=a.handleEntering.bind(xs(xs(a))),a.handleExited=a.handleExited.bind(xs(xs(a))),a.handleWindowResize=a.handleWindowResize.bind(xs(xs(a))),a.handleDialogClick=a.handleDialogClick.bind(xs(xs(a))),a.setModalRef=a.setModalRef.bind(xs(xs(a))),a.state={style:{}},a}var i=t.prototype;return i.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},i.componentWillUnmount=function(){this.handleExited()},i.setModalRef=function(c){this._modal=c},i.handleDialogClick=function(c){if(this._ignoreBackdropClick||c.target!==c.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},i.handleEntering=function(){i3.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},i.handleExited=function(){i3.default.off(window,"resize",this.handleWindowResize)},i.handleWindowResize=function(){this.updateStyle()},i.updateStyle=function(){if(o1e.default){var c=this._modal.getDialogElement(),a=c.scrollHeight,g=(0,a1e.default)(c),x=(0,l1e.default)(s1e.default.findDOMNode(this.props.container||g.body)),E=a>g.documentElement.clientHeight;this.setState({style:{paddingRight:x&&!E?(0,n3.default)():void 0,paddingLeft:!x&&E?(0,n3.default)():void 0}})}},i.render=function(){var c=this.props,a=c.backdrop,g=c.backdropClassName,x=c.animation,E=c.show,P=c.dialogComponentClass,M=c.className,O=c.style,z=c.children,oe=c.onEntering,we=c.onExited,ye=Za(c,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),te=CB(ye,Bm.default),Q=te[0],ee=te[1],xe=E&&!x&&"in";return Nm.default.createElement(Bm.default,zr({},Q,{ref:this.setModalRef,show:E,containerClassName:ul(ye,"open"),transition:x?jPt:void 0,backdrop:a,backdropTransition:x?UPt:void 0,backdropClassName:(0,r3.default)(ul(ye,"backdrop"),g,xe),onEntering:b0(oe,this.handleEntering),onExited:b0(we,this.handleExited),onMouseUp:this.handleMouseUp}),Nm.default.createElement(P,zr({},ee,{style:zr({},this.state.style,O),className:(0,r3.default)(M,xe),onClick:a===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),z))},t}(Nm.default.Component);ho.propTypes=zPt;ho.defaultProps=NPt;ho.childContextTypes=BPt;ho.Body=R0;ho.Header=D0;ho.Title=n1e;ho.Footer=k0;ho.Dialog=_A;ho.TRANSITION_DURATION=300;ho.BACKDROP_TRANSITION_DURATION=150;var a3=$o("modal",_E([Mm.LARGE,Mm.SMALL],ho));var L0=yt(Oi(),1);var c1e=({show:e,onClose:t,onDelete:i,title:o})=>Od.default.createElement(a3,{show:e,onHide:t,className:"vkf-delete-dialog"},Od.default.createElement(D0,{closeButton:!0},o),Od.default.createElement(R0,null,pr("deletemodal-body")),Od.default.createElement(k0,null,Od.default.createElement("button",{className:"btn btn-default",type:"button",onClick:t},pr("deletemodal-cancel-btn")),Od.default.createElement("button",{className:"btn btn-primary",type:"button",onClick:i},pr("deletemodal-delete-btn"))));c1e.propTypes={show:L0.default.bool,onClose:L0.default.func,onDelete:L0.default.func,title:L0.default.string};var h1e=c1e;function wA(e){let t=e.response||!1,i=e.response&&e.response.status<=404;return!(t&&i)}function VPt(e){let t={};return Object.keys(Em()).forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t}function d1e(e){let t={};return Object.keys(e).forEach(i=>{e[i]!==null&&(t[i]=e[i])}),t}function f1e(e){return Ci(this,null,function*(){try{let t=uu.getGeoreferenceApiClient(),i=`/maps/${e}`;return yield t.delete(i),lu.ok(!0)}catch(t){return wA(t)&&console.error(t),lu.error(t)}})}function SA(e){return Ci(this,null,function*(){try{let t=uu.getGeoreferenceApiClient(),i=`/maps/${e}`,o=yield t.get(i);if(o.data.map_id!==e){let a="The map id from the server does not match the given map id.";throw new Error(a)}let c=VPt(o.data);return lu.ok(c)}catch(t){return wA(t)&&console.error(t),lu.error(t)}})}function p1e(e,t){return Ci(this,null,function*(){try{let i=uu.getGeoreferenceApiClient(),o=new FormData;if(e!==void 0&&t!==null)o.append("metadata",JSON.stringify(d1e(e))),o.append("file",t);else{let E="Either the map metadata or the map image file is not set.";throw new Error(E)}let c={headers:{"Content-Type":"multipart/form-data"}},x=""+(yield i.post("/maps/",o,c)).data.map_id;return lu.ok(x)}catch(i){return wA(i)&&console.error(i),lu.error(i)}})}function m1e(e,t,i){return Ci(this,null,function*(){try{let o=uu.getGeoreferenceApiClient(),c=new FormData;t!==null&&c.append("metadata",JSON.stringify(d1e(t))),i!==null&&c.append("file",i);let a={headers:{"Content-Type":"multipart/form-data"}},g=`/maps/${e}`,x=yield o.post(g,c,a);return lu.ok(x.data.map_id)}catch(o){return wA(o)&&console.error(o),lu.error(o)}})}function TA(e){let{mapId:t,mapMetadata:i,onBack:o,onRefresh:c}=e,[a,g]=(0,Dt.useState)(null),[x,E]=(0,Dt.useState)(!1),[P,M]=(0,Dt.useState)(null),[O,z]=(0,Dt.useState)(!1),[oe,we]=(0,Dt.useState)(!1),[ye,te]=(0,Dt.useState)(null),[Q,ee]=(0,Dt.useState)(Date.now()),xe=hge({defaultValues:qn(lt({},i),{time_of_publication:i?i.time_of_publication.slice(0,4):""})}),Te=(0,Dt.useCallback)(()=>{o()},[o]),Je=wt=>{wt!==null&&(g(wt),E(!1))},Ne=xe.handleSubmit(wt=>Ci(null,null,function*(){let zt=_ge(wt);if(we(!0),E(!1),a===null&&t===null){E(!0),we(!1);return}let Kr=xge(zt,i);if(Kr&&a!==null&&t===null){let Lt=yield p1e(zt,a),Dr=Lt.data;Dr!==null?M(Dr):te(Lt.httpErrorStatusCode),we(!1);return}else if(t!==null&&Kr||a!==null){let Lt=yield m1e(t,zt,a),Dr=Lt.data;Dr!==null?M(Dr):te(Lt.httpErrorStatusCode),we(!1);return}else console.log("Currently there are not action to perform.");xe.reset()})),ut=(0,Dt.useCallback)(()=>Ci(null,null,function*(){let wt=yield SA(P||t),zt=wt.data;zt!==null?(c({mapId:P||t,metadata:zt}),M(null),g(null),te(null),ee(Date.now())):te(wt.httpErrorStatusCode)}),[P]),xt=(0,Dt.useCallback)(()=>Ci(null,null,function*(){let wt=yield f1e(t);wt.data===!0?o():te(wt.httpErrorStatusCode)}),[t]),mt=()=>{z(!0)},_r=()=>{z(!1)},kr=()=>{xt().then(()=>{z(!1)})};return Dt.default.createElement("div",{className:"container upload-view"},Dt.default.createElement("div",{className:"upload-header-container"},Dt.default.createElement(nE,{mapId:t||P,onBack:Te}),P!==null&&ye===null&&Dt.default.createElement("p",{className:"bg-success"},pr("uploadmap-success")),ye!==null&&Dt.default.createElement("div",{className:"error-messages"},ye===401&&Dt.default.createElement("p",{className:"bg-danger"},pr("common-errors-http-401")),ye===403&&Dt.default.createElement("p",{className:"bg-danger"},pr("common-errors-http-403")),ye===404&&Dt.default.createElement("p",{className:"bg-danger"},pr("uploadmap-errors-refresh-http-400")),ye>404&&Dt.default.createElement("p",{className:"bg-danger"},pr("common-errors-unexpected"))),x&&Dt.default.createElement("p",{className:"bg-danger"},pr("common-errors-upload-file"))),Dt.default.createElement("div",{className:`upload-body-container ${P!==null?"active":""}`},Dt.default.createElement(nge,lt({},xe),Dt.default.createElement("form",{className:"upload-form",id:"upload-form",onSubmit:wt=>wt.preventDefault()},Dt.default.createElement("div",{className:"left-container"},Dt.default.createElement(ea,lt({},ta.description)),Dt.default.createElement(ea,lt({},ta.license)),Dt.default.createElement(ea,lt({},ta.map_type)),Dt.default.createElement(ea,lt({},ta.map_scale)),Dt.default.createElement(ea,lt({},ta.measures)),Dt.default.createElement(ea,lt({},ta.owner)),Dt.default.createElement(ea,lt({},ta.permalink)),Dt.default.createElement(ea,lt({},ta.ppn)),Dt.default.createElement(ea,lt({},ta.technic)),Dt.default.createElement(ea,lt({},ta.time_of_publication)),Dt.default.createElement(ea,lt({},ta.allow_download)),Dt.default.createElement(ea,lt({},ta.title)),Dt.default.createElement(ea,lt({},ta.title_serie)),Dt.default.createElement(ea,lt({},ta.title_short)),Dt.default.createElement(ea,lt({},ta.type))),Dt.default.createElement("div",{className:"right-container"},Dt.default.createElement(oE,{mapMetadata:i,onFileSelect:Je,isPending:a!==null,reloadKey:Q}),Dt.default.createElement("div",null,Dt.default.createElement("div",{className:"action-buttons"},Dt.default.createElement("button",{className:"btn btn-default",type:"button",disabled:t===null,onClick:mt},pr("uploadmap-delete-btn")),Dt.default.createElement("button",{className:"btn btn-primary",type:"button",disabled:P===null&&t===null,onClick:ut},"Refresh"),Dt.default.createElement("button",{className:"btn btn-primary has-spinner",type:"button",disabled:P!==null&&t===null,title:P!==null&&t===null?pr("uploadmap-save-btn-disabled-title"):void 0,onClick:Ne},oe===!0&&Dt.default.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}),pr("uploadmap-save-btn")))))))),O&&Dt.default.createElement(h1e,{show:O,onClose:_r,onDelete:kr,title:i.title}))}TA.propTypes={onBack:jm.default.func.isRequired,onRefresh:jm.default.func.isRequired,mapId:jm.default.oneOfType([jm.default.string]),mapMetadata:jm.default.object};var ui=yt(Ar(),1),l3=yt(Oi(),1),b1e=yt(_1e(),1);var bs=yt(Ar(),1),x1e=yt(Oi(),1);function EA(e){let{onEnterId:t}=e,[i,o]=(0,bs.useState)(""),c="input-field-search",a=(0,bs.useCallback)(x=>{o(x.target.value)},[o]),g=()=>{let x=i.trim();t(x),o(x)};return bs.default.createElement("div",{className:"search-input-field"},bs.default.createElement("label",{htmlFor:c,className:"body1"},pr("searchmap-subtitle")),bs.default.createElement("div",{className:"input-wrapper"},bs.default.createElement("input",{type:"text",className:"input-field body2",id:c,placeholder:pr("searchmap-placeholder"),value:i,onChange:a,onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),g())}}),bs.default.createElement("button",{type:"button",className:"search-button",onClick:()=>g()},bs.default.createElement("span",{className:"glyphicon glyphicon-search"}))))}EA.propTypes={onEnterId:x1e.default.func.isRequired};var kd=yt(Ar(),1),F0=yt(Oi(),1);function AA(e){let{mapId:t,mapMetadata:i,onClick:o}=e;return kd.default.createElement("li",{className:"map-entry-item",onClick:o},kd.default.createElement("div",{className:"image-container"},kd.default.createElement("img",{src:i.link_thumb_small,alt:"Map Image",loading:"lazy"})),kd.default.createElement("div",{className:"metadata-container"},kd.default.createElement("p",{className:"body2"},i.title_short),kd.default.createElement("p",{className:"body1"},t)))}AA.propTypes={mapId:F0.default.oneOfType([F0.default.string]),mapMetadata:F0.default.object,onClick:F0.default.func.isRequired};function qA(e){let{onSelectMap:t,onStartUpload:i}=e,[o,c]=(0,ui.useState)({mapId:null,metadata:null}),[a,g]=(0,ui.useState)(null),x=(0,b1e.default)(E=>Ci(null,null,function*(){let P=yield SA(E),M=P.data;M!==null?(c({mapId:E,metadata:M}),g(null)):(c({mapId:null,metadata:null}),g(P.httpErrorStatusCode))}),300);return ui.default.createElement("div",{className:"container search-view"},ui.default.createElement("div",{className:"content-header"},ui.default.createElement("h3",null,pr("searchmap-title")),ui.default.createElement("button",{type:"button",className:"btn btn-primary upload-button",onClick:()=>i()},pr("searchmap-upload-button"))),ui.default.createElement("div",{className:"content-body"},ui.default.createElement(EA,{onEnterId:x}),o.mapId!==null&&ui.default.createElement("ul",{className:"map-list"},ui.default.createElement(AA,{mapId:o.mapId,mapMetadata:o.metadata,onClick:()=>t(o)})),a!==null&&ui.default.createElement("div",{className:"not-found body1"},ui.default.createElement("p",null,pr("uploadmap-p")),ui.default.createElement("ul",{className:"no-results"},a===400&&ui.default.createElement("li",null,pr("searchmap-errors-http-400")),a===401&&ui.default.createElement("li",null,pr("common-errors-http-401")),a===403&&ui.default.createElement("li",null,pr("common-errors-http-403")),a===404&&ui.default.createElement(ui.default.Fragment,null,ui.default.createElement("li",null,pr("uploadmap-li1")),ui.default.createElement("li",null,pr("uploadmap-li2")),ui.default.createElement("li",null,pr("uploadmap-li3"))),a>404&&ui.default.createElement("li",null,pr("common-errors-unexpected"))))))}qA.propTypes={onSelectMap:l3.default.func.isRequired,onStartUpload:l3.default.func.isRequired};var Um={SEARCH:"search",UPLOAD:"upload"},s2t=()=>{let[e,t]=(0,Dd.useState)(Um.SEARCH),[i,o]=(0,Dd.useState)({mapId:null,metadata:Em()}),c=x=>{o(x),t(Um.UPLOAD)},a=()=>{o({mapId:null,metadata:Em()}),t(Um.UPLOAD)},g=()=>{t(Um.SEARCH),o({mapId:null,metadata:Em()})};return Dd.default.createElement("div",{className:"vkf-plugin-upload-map"},e===Um.SEARCH&&Dd.default.createElement(qA,{onSelectMap:c,onStartUpload:a}),e===Um.UPLOAD&&Dd.default.createElement(TA,{mapId:i.mapId,mapMetadata:i.metadata,onBack:g,onRefresh:c}))},w1e=s2t;var l2t=uu;function u2t(e){T1e.default.render(S1e.default.createElement(w1e,{id:e.id}),e)}return vSe(c2t)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/