var vk2=(()=>{var G0e=Object.create;var qv=Object.defineProperty,K0e=Object.defineProperties,Z0e=Object.getOwnPropertyDescriptor,H0e=Object.getOwnPropertyDescriptors,X0e=Object.getOwnPropertyNames,Qx=Object.getOwnPropertySymbols,J0e=Object.getPrototypeOf,jE=Object.prototype.hasOwnProperty,PB=Object.prototype.propertyIsEnumerable;var e0=Math.pow,CB=(e,t,r)=>t in e?qv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,at=(e,t)=>{for(var r in t||(t={}))jE.call(t,r)&&CB(e,r,t[r]);if(Qx)for(var r of Qx(t))PB.call(t,r)&&CB(e,r,t[r]);return e},da=(e,t)=>K0e(e,H0e(t));var Av=(e,t)=>{var r={};for(var a in e)jE.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&Qx)for(var a of Qx(e))t.indexOf(a)<0&&PB.call(e,a)&&(r[a]=e[a]);return r};var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Y0e=(e,t)=>{for(var r in t)qv(e,r,{get:t[r],enumerable:!0})},MB=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of X0e(t))!jE.call(e,u)&&u!==r&&qv(e,u,{get:()=>t[u],enumerable:!(a=Z0e(t,u))||a.enumerable});return e};var vt=(e,t,r)=>(r=e!=null?G0e(J0e(e)):{},MB(t||!e||!e.__esModule?qv(r,"default",{value:e,enumerable:!0}):r,e)),Q0e=e=>MB(qv({},"__esModule",{value:!0}),e);var yi=(e,t,r)=>new Promise((a,u)=>{var s=q=>{try{x(r.next(q))}catch(T){u(T)}},m=q=>{try{x(r.throw(q))}catch(T){u(T)}},x=q=>q.done?a(q.value):Promise.resolve(q.value).then(s,m);x((r=r.apply(e,t)).next())});var VE=w((mqt,kB)=>{"use strict";var OB=Object.getOwnPropertySymbols,ebe=Object.prototype.hasOwnProperty,tbe=Object.prototype.propertyIsEnumerable;function rbe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ibe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var a=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(a.join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(s){u[s]=s}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch(s){return!1}}kB.exports=ibe()?Object.assign:function(e,t){for(var r,a=rbe(e),u,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var m in r)ebe.call(r,m)&&(a[m]=r[m]);if(OB){u=OB(r);for(var x=0;x<u.length;x++)tbe.call(r,u[x])&&(a[u[x]]=r[u[x]])}}return a}});var HB=w(lr=>{"use strict";var WE=VE(),sd=60103,LB=60106;lr.Fragment=60107;lr.StrictMode=60108;lr.Profiler=60114;var FB=60109,zB=60110,NB=60112;lr.Suspense=60113;var BB=60115,UB=60116;typeof Symbol=="function"&&Symbol.for&&(po=Symbol.for,sd=po("react.element"),LB=po("react.portal"),lr.Fragment=po("react.fragment"),lr.StrictMode=po("react.strict_mode"),lr.Profiler=po("react.profiler"),FB=po("react.provider"),zB=po("react.context"),NB=po("react.forward_ref"),lr.Suspense=po("react.suspense"),BB=po("react.memo"),UB=po("react.lazy"));var po,RB=typeof Symbol=="function"&&Symbol.iterator;function nbe(e){return e===null||typeof e!="object"?null:(e=RB&&e[RB]||e["@@iterator"],typeof e=="function"?e:null)}function Ev(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VB={};function ud(e,t,r){this.props=e,this.context=t,this.refs=VB,this.updater=r||jB}ud.prototype.isReactComponent={};ud.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Ev(85));this.updater.enqueueSetState(this,e,t,"setState")};ud.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $B(){}$B.prototype=ud.prototype;function GE(e,t,r){this.props=e,this.context=t,this.refs=VB,this.updater=r||jB}var KE=GE.prototype=new $B;KE.constructor=GE;WE(KE,ud.prototype);KE.isPureReactComponent=!0;var ZE={current:null},WB=Object.prototype.hasOwnProperty,GB={key:!0,ref:!0,__self:!0,__source:!0};function KB(e,t,r){var a,u={},s=null,m=null;if(t!=null)for(a in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(s=""+t.key),t)WB.call(t,a)&&!GB.hasOwnProperty(a)&&(u[a]=t[a]);var x=arguments.length-2;if(x===1)u.children=r;else if(1<x){for(var q=Array(x),T=0;T<x;T++)q[T]=arguments[T+2];u.children=q}if(e&&e.defaultProps)for(a in x=e.defaultProps,x)u[a]===void 0&&(u[a]=x[a]);return{$$typeof:sd,type:e,key:s,ref:m,props:u,_owner:ZE.current}}function abe(e,t){return{$$typeof:sd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function HE(e){return typeof e=="object"&&e!==null&&e.$$typeof===sd}function obe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var DB=/\/+/g;function $E(e,t){return typeof e=="object"&&e!==null&&e.key!=null?obe(""+e.key):t.toString(36)}function r0(e,t,r,a,u){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(s){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case sd:case LB:m=!0;}}if(m)return m=e,u=u(m),e=a===""?"."+$E(m,0):a,Array.isArray(u)?(r="",e!=null&&(r=e.replace(DB,"$&/")+"/"),r0(u,t,r,"",function(T){return T})):u!=null&&(HE(u)&&(u=abe(u,r+(!u.key||m&&m.key===u.key?"":(""+u.key).replace(DB,"$&/")+"/")+e)),t.push(u)),1;if(m=0,a=a===""?".":a+":",Array.isArray(e))for(var x=0;x<e.length;x++){s=e[x];var q=a+$E(s,x);m+=r0(s,t,r,q,u)}else if(q=nbe(e),typeof q=="function")for(e=q.call(e),x=0;!(s=e.next()).done;)s=s.value,q=a+$E(s,x++),m+=r0(s,t,r,q,u);else if(s==="object")throw t=""+e,Error(Ev(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return m}function t0(e,t,r){if(e==null)return e;var a=[],u=0;return r0(e,a,"","",function(s){return t.call(r,s,u++)}),a}function sbe(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var ZB={current:null};function vu(){var e=ZB.current;if(e===null)throw Error(Ev(321));return e}var ube={ReactCurrentDispatcher:ZB,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:ZE,IsSomeRendererActing:{current:!1},assign:WE};lr.Children={map:t0,forEach:function(e,t,r){t0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return t0(e,function(){t++}),t},toArray:function(e){return t0(e,function(t){return t})||[]},only:function(e){if(!HE(e))throw Error(Ev(143));return e}};lr.Component=ud;lr.PureComponent=GE;lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ube;lr.cloneElement=function(e,t,r){if(e==null)throw Error(Ev(267,e));var a=WE({},e.props),u=e.key,s=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,m=ZE.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var x=e.type.defaultProps;for(q in t)WB.call(t,q)&&!GB.hasOwnProperty(q)&&(a[q]=t[q]===void 0&&x!==void 0?x[q]:t[q])}var q=arguments.length-2;if(q===1)a.children=r;else if(1<q){x=Array(q);for(var T=0;T<q;T++)x[T]=arguments[T+2];a.children=x}return{$$typeof:sd,type:e.type,key:u,ref:s,props:a,_owner:m}};lr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:zB,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:FB,_context:e},e.Consumer=e};lr.createElement=KB;lr.createFactory=function(e){var t=KB.bind(null,e);return t.type=e,t};lr.createRef=function(){return{current:null}};lr.forwardRef=function(e){return{$$typeof:NB,render:e}};lr.isValidElement=HE;lr.lazy=function(e){return{$$typeof:UB,_payload:{_status:-1,_result:e},_init:sbe}};lr.memo=function(e,t){return{$$typeof:BB,type:e,compare:t===void 0?null:t}};lr.useCallback=function(e,t){return vu().useCallback(e,t)};lr.useContext=function(e,t){return vu().useContext(e,t)};lr.useDebugValue=function(){};lr.useEffect=function(e,t){return vu().useEffect(e,t)};lr.useImperativeHandle=function(e,t,r){return vu().useImperativeHandle(e,t,r)};lr.useLayoutEffect=function(e,t){return vu().useLayoutEffect(e,t)};lr.useMemo=function(e,t){return vu().useMemo(e,t)};lr.useReducer=function(e,t,r){return vu().useReducer(e,t,r)};lr.useRef=function(e){return vu().useRef(e)};lr.useState=function(e){return vu().useState(e)};lr.version="17.0.2"});var Mr=w((gqt,XB)=>{"use strict";XB.exports=HB()});var r3=w(br=>{"use strict";var cd,Cv,o0,rT;typeof performance=="object"&&typeof performance.now=="function"?(JB=performance,br.unstable_now=function(){return JB.now()}):(XE=Date,YB=XE.now(),br.unstable_now=function(){return XE.now()-YB});var JB,XE,YB;typeof window=="undefined"||typeof MessageChannel!="function"?(ld=null,JE=null,YE=function(){if(ld!==null)try{var e=br.unstable_now();ld(!0,e),ld=null}catch(t){throw setTimeout(YE,0),t}},cd=function(e){ld!==null?setTimeout(cd,0,e):(ld=e,setTimeout(YE,0))},Cv=function(e,t){JE=setTimeout(e,t)},o0=function(){clearTimeout(JE)},br.unstable_shouldYield=function(){return!1},rT=br.unstable_forceFrameRate=function(){}):(QB=window.setTimeout,e3=window.clearTimeout,typeof console!="undefined"&&(t3=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof t3!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Tv=!1,Iv=null,i0=-1,QE=5,eT=0,br.unstable_shouldYield=function(){return br.unstable_now()>=eT},rT=function(){},br.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):QE=0<e?Math.floor(1e3/e):5},tT=new MessageChannel,n0=tT.port2,tT.port1.onmessage=function(){if(Iv!==null){var e=br.unstable_now();eT=e+QE;try{Iv(!0,e)?n0.postMessage(null):(Tv=!1,Iv=null)}catch(t){throw n0.postMessage(null),t}}else Tv=!1},cd=function(e){Iv=e,Tv||(Tv=!0,n0.postMessage(null))},Cv=function(e,t){i0=QB(function(){e(br.unstable_now())},t)},o0=function(){e3(i0),i0=-1});var ld,JE,YE,QB,e3,t3,Tv,Iv,i0,QE,eT,tT,n0;function iT(e,t){var r=e.length;e.push(t);e:for(;;){var a=r-1>>>1,u=e[a];if(u!==void 0&&0<a0(u,t))e[a]=t,e[r]=u,r=a;else break e}}function Jo(e){return e=e[0],e===void 0?null:e}function s0(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var a=0,u=e.length;a<u;){var s=2*(a+1)-1,m=e[s],x=s+1,q=e[x];if(m!==void 0&&0>a0(m,r))q!==void 0&&0>a0(q,m)?(e[a]=q,e[x]=r,a=x):(e[a]=m,e[s]=r,a=s);else if(q!==void 0&&0>a0(q,r))e[a]=q,e[x]=r,a=x;else break e}}return t}return null}function a0(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var ws=[],kl=[],lbe=1,mo=null,En=3,u0=!1,sh=!1,Pv=!1;function nT(e){for(var t=Jo(kl);t!==null;){if(t.callback===null)s0(kl);else if(t.startTime<=e)s0(kl),t.sortIndex=t.expirationTime,iT(ws,t);else break;t=Jo(kl)}}function aT(e){if(Pv=!1,nT(e),!sh)if(Jo(ws)!==null)sh=!0,cd(oT);else{var t=Jo(kl);t!==null&&Cv(aT,t.startTime-e)}}function oT(e,t){sh=!1,Pv&&(Pv=!1,o0()),u0=!0;var r=En;try{for(nT(t),mo=Jo(ws);mo!==null&&(!(mo.expirationTime>t)||e&&!br.unstable_shouldYield());){var a=mo.callback;if(typeof a=="function"){mo.callback=null,En=mo.priorityLevel;var u=a(mo.expirationTime<=t);t=br.unstable_now(),typeof u=="function"?mo.callback=u:mo===Jo(ws)&&s0(ws),nT(t)}else s0(ws);mo=Jo(ws)}if(mo!==null)var s=!0;else{var m=Jo(kl);m!==null&&Cv(aT,m.startTime-t),s=!1}return s}finally{mo=null,En=r,u0=!1}}var cbe=rT;br.unstable_IdlePriority=5;br.unstable_ImmediatePriority=1;br.unstable_LowPriority=4;br.unstable_NormalPriority=3;br.unstable_Profiling=null;br.unstable_UserBlockingPriority=2;br.unstable_cancelCallback=function(e){e.callback=null};br.unstable_continueExecution=function(){sh||u0||(sh=!0,cd(oT))};br.unstable_getCurrentPriorityLevel=function(){return En};br.unstable_getFirstCallbackNode=function(){return Jo(ws)};br.unstable_next=function(e){switch(En){case 1:case 2:case 3:var t=3;break;default:t=En;}var r=En;En=t;try{return e()}finally{En=r}};br.unstable_pauseExecution=function(){};br.unstable_requestPaint=cbe;br.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3;}var r=En;En=e;try{return t()}finally{En=r}};br.unstable_scheduleCallback=function(e,t,r){var a=br.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?a+r:a):r=a,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3;}return u=r+u,e={id:lbe++,callback:t,priorityLevel:e,startTime:r,expirationTime:u,sortIndex:-1},r>a?(e.sortIndex=r,iT(kl,e),Jo(ws)===null&&e===Jo(kl)&&(Pv?o0():Pv=!0,Cv(aT,r-a))):(e.sortIndex=u,iT(ws,e),sh||u0||(sh=!0,cd(oT))),e};br.unstable_wrapCallback=function(e){var t=En;return function(){var r=En;En=t;try{return e.apply(this,arguments)}finally{En=r}}}});var n3=w((_qt,i3)=>{"use strict";i3.exports=r3()});var $5=w(bo=>{"use strict";var tb=Mr(),Yr=VE(),Ki=n3();function Ze(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!tb)throw Error(Ze(227));var gU=new Set,og={};function yh(e,t){Md(e,t),Md(e+"Capture",t)}function Md(e,t){for(og[e]=t,e=0;e<t.length;e++)gU.add(t[e])}var wu=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),hbe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a3=Object.prototype.hasOwnProperty,o3={},s3={};function fbe(e){return a3.call(s3,e)?!0:a3.call(o3,e)?!1:hbe.test(e)?s3[e]=!0:(o3[e]=!0,!1)}function dbe(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1;}}function pbe(e,t,r,a){if(t===null||typeof t=="undefined"||dbe(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t;}return!1}function Zn(e,t,r,a,u,s,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=m}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){un[e]=new Zn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];un[t]=new Zn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){un[e]=new Zn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){un[e]=new Zn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){un[e]=new Zn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){un[e]=new Zn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){un[e]=new Zn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){un[e]=new Zn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){un[e]=new Zn(e,5,!1,e.toLowerCase(),null,!1,!1)});var mI=/[\-:]([a-z])/g;function vI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mI,vI);un[t]=new Zn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mI,vI);un[t]=new Zn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mI,vI);un[t]=new Zn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){un[e]=new Zn(e,1,!1,e.toLowerCase(),null,!1,!1)});un.xlinkHref=new Zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){un[e]=new Zn(e,1,!1,e.toLowerCase(),null,!0,!0)});function gI(e,t,r,a){var u=un.hasOwnProperty(t)?un[t]:null,s=u!==null?u.type===0:a?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");s||(pbe(t,r,u,a)&&(r=null),a||u===null?fbe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):u.mustUseProperty?e[u.propertyName]=r===null?u.type===3?!1:"":r:(t=u.attributeName,a=u.attributeNamespace,r===null?e.removeAttribute(t):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var _h=tb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vv=60103,lh=60106,Dl=60107,yI=60108,Zv=60114,_I=60109,xI=60110,rb=60112,Hv=60113,O0=60120,ib=60115,bI=60116,wI=60121,SI=60128,yU=60129,qI=60130,CT=60131;typeof Symbol=="function"&&Symbol.for&&(Di=Symbol.for,Vv=Di("react.element"),lh=Di("react.portal"),Dl=Di("react.fragment"),yI=Di("react.strict_mode"),Zv=Di("react.profiler"),_I=Di("react.provider"),xI=Di("react.context"),rb=Di("react.forward_ref"),Hv=Di("react.suspense"),O0=Di("react.suspense_list"),ib=Di("react.memo"),bI=Di("react.lazy"),wI=Di("react.block"),Di("react.scope"),SI=Di("react.opaque.id"),yU=Di("react.debug_trace_mode"),qI=Di("react.offscreen"),CT=Di("react.legacy_hidden"));var Di,u3=typeof Symbol=="function"&&Symbol.iterator;function Mv(e){return e===null||typeof e!="object"?null:(e=u3&&e[u3]||e["@@iterator"],typeof e=="function"?e:null)}var sT;function $v(e){if(sT===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);sT=t&&t[1]||""}return`
`+sT+e}var uT=!1;function l0(e,t){if(!e||uT)return"";uT=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(q){var a=q}Reflect.construct(e,[],t)}else{try{t.call()}catch(q){a=q}e.call(t.prototype)}}else{try{throw Error()}catch(q){a=q}e()}}catch(q){if(q&&a&&typeof q.stack=="string"){for(var u=q.stack.split(`
`),s=a.stack.split(`
`),m=u.length-1,x=s.length-1;1<=m&&0<=x&&u[m]!==s[x];)x--;for(;1<=m&&0<=x;m--,x--)if(u[m]!==s[x]){if(m!==1||x!==1)do if(m--,x--,0>x||u[m]!==s[x])return`
`+u[m].replace(" at new "," at ");while(1<=m&&0<=x);break}}}finally{uT=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$v(e):""}function mbe(e){switch(e.tag){case 5:return $v(e.type);case 16:return $v("Lazy");case 13:return $v("Suspense");case 19:return $v("SuspenseList");case 0:case 2:case 15:return e=l0(e.type,!1),e;case 11:return e=l0(e.type.render,!1),e;case 22:return e=l0(e.type._render,!1),e;case 1:return e=l0(e.type,!0),e;default:return"";}}function bd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dl:return"Fragment";case lh:return"Portal";case Zv:return"Profiler";case yI:return"StrictMode";case Hv:return"Suspense";case O0:return"SuspenseList";}if(typeof e=="object")switch(e.$$typeof){case xI:return(e.displayName||"Context")+".Consumer";case _I:return(e._context.displayName||"Context")+".Provider";case rb:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case ib:return bd(e.type);case wI:return bd(e._render);case bI:t=e._payload,e=e._init;try{return bd(e(t))}catch(r){}}return null}function Kl(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return"";}}function _U(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vbe(e){var t=_U(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(m){a=""+m,s.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function c0(e){e._valueTracker||(e._valueTracker=vbe(e))}function xU(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=_U(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function k0(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function PT(e,t){var r=t.checked;return Yr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function l3(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Kl(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bU(e,t){t=t.checked,t!=null&&gI(e,"checked",t,!1)}function MT(e,t){bU(e,t);var r=Kl(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?OT(e,t.type,r):t.hasOwnProperty("defaultValue")&&OT(e,t.type,Kl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function c3(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function OT(e,t,r){(t!=="number"||k0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function gbe(e){var t="";return tb.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function kT(e,t){return e=Yr({children:void 0},t),(t=gbe(t.children))&&(e.children=t),e}function wd(e,t,r,a){if(e=e.options,t){t={};for(var u=0;u<r.length;u++)t["$"+r[u]]=!0;for(r=0;r<e.length;r++)u=t.hasOwnProperty("$"+e[r].value),e[r].selected!==u&&(e[r].selected=u),u&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Kl(r),t=null,u=0;u<e.length;u++){if(e[u].value===r){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function RT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return Yr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function h3(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ze(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Ze(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Kl(r)}}function wU(e,t){var r=Kl(t.value),a=Kl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function f3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var DT={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function SU(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function LT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?SU(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var h0,qU=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,a,u){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,u)})}:e}(function(e,t){if(e.namespaceURI!==DT.svg||"innerHTML"in e)e.innerHTML=t;else{for(h0=h0||document.createElement("div"),h0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=h0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sg(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Xv={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ybe=["Webkit","ms","Moz","O"];Object.keys(Xv).forEach(function(e){ybe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xv[t]=Xv[e]})});function AU(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Xv.hasOwnProperty(e)&&Xv[e]?(""+t).trim():t+"px"}function EU(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,u=AU(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,u):e[r]=u}}var _be=Yr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FT(e,t){if(t){if(_be[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ze(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ze(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Ze(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ze(62))}}function zT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function AI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var NT=null,Sd=null,qd=null;function d3(e){if(e=bg(e)){if(typeof NT!="function")throw Error(Ze(280));var t=e.stateNode;t&&(t=lb(t),NT(e.stateNode,e.type,t))}}function TU(e){Sd?qd?qd.push(e):qd=[e]:Sd=e}function IU(){if(Sd){var e=Sd,t=qd;if(qd=Sd=null,d3(e),t)for(e=0;e<t.length;e++)d3(t[e])}}function EI(e,t){return e(t)}function CU(e,t,r,a,u){return e(t,r,a,u)}function TI(){}var PU=EI,ch=!1,lT=!1;function II(){(Sd!==null||qd!==null)&&(TI(),IU())}function xbe(e,t,r){if(lT)return e(t,r);lT=!0;try{return PU(e,t,r)}finally{lT=!1,II()}}function ug(e,t){var r=e.stateNode;if(r===null)return null;var a=lb(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1;}if(e)return null;if(r&&typeof r!="function")throw Error(Ze(231,t,typeof r));return r}var BT=!1;if(wu)try{hd={},Object.defineProperty(hd,"passive",{get:function(){BT=!0}}),window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch(e){BT=!1}var hd;function bbe(e,t,r,a,u,s,m,x,q){var T=Array.prototype.slice.call(arguments,3);try{t.apply(r,T)}catch(I){this.onError(I)}}var Jv=!1,R0=null,D0=!1,UT=null,wbe={onError:function(e){Jv=!0,R0=e}};function Sbe(e,t,r,a,u,s,m,x,q){Jv=!1,R0=null,bbe.apply(wbe,arguments)}function qbe(e,t,r,a,u,s,m,x,q){if(Sbe.apply(this,arguments),Jv){if(Jv){var T=R0;Jv=!1,R0=null}else throw Error(Ze(198));D0||(D0=!0,UT=T)}}function xh(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function MU(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p3(e){if(xh(e)!==e)throw Error(Ze(188))}function Abe(e){var t=e.alternate;if(!t){if(t=xh(e),t===null)throw Error(Ze(188));return t!==e?null:e}for(var r=e,a=t;;){var u=r.return;if(u===null)break;var s=u.alternate;if(s===null){if(a=u.return,a!==null){r=a;continue}break}if(u.child===s.child){for(s=u.child;s;){if(s===r)return p3(u),e;if(s===a)return p3(u),t;s=s.sibling}throw Error(Ze(188))}if(r.return!==a.return)r=u,a=s;else{for(var m=!1,x=u.child;x;){if(x===r){m=!0,r=u,a=s;break}if(x===a){m=!0,a=u,r=s;break}x=x.sibling}if(!m){for(x=s.child;x;){if(x===r){m=!0,r=s,a=u;break}if(x===a){m=!0,a=s,r=u;break}x=x.sibling}if(!m)throw Error(Ze(189))}}if(r.alternate!==a)throw Error(Ze(190))}if(r.tag!==3)throw Error(Ze(188));return r.stateNode.current===r?e:t}function OU(e){if(e=Abe(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function m3(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var kU,CI,RU,DU,jT=!1,Ss=[],Nl=null,Bl=null,Ul=null,lg=new Map,cg=new Map,Ov=[],v3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VT(e,t,r,a,u){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:u,targetContainers:[a]}}function g3(e,t){switch(e){case"focusin":case"focusout":Nl=null;break;case"dragenter":case"dragleave":Bl=null;break;case"mouseover":case"mouseout":Ul=null;break;case"pointerover":case"pointerout":lg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cg.delete(t.pointerId);}}function kv(e,t,r,a,u,s){return e===null||e.nativeEvent!==s?(e=VT(t,r,a,u,s),t!==null&&(t=bg(t),t!==null&&CI(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Ebe(e,t,r,a,u){switch(t){case"focusin":return Nl=kv(Nl,e,t,r,a,u),!0;case"dragenter":return Bl=kv(Bl,e,t,r,a,u),!0;case"mouseover":return Ul=kv(Ul,e,t,r,a,u),!0;case"pointerover":var s=u.pointerId;return lg.set(s,kv(lg.get(s)||null,e,t,r,a,u)),!0;case"gotpointercapture":return s=u.pointerId,cg.set(s,kv(cg.get(s)||null,e,t,r,a,u)),!0;}return!1}function Tbe(e){var t=hh(e.target);if(t!==null){var r=xh(t);if(r!==null){if(t=r.tag,t===13){if(t=MU(r),t!==null){e.blockedOn=t,DU(e.lanePriority,function(){Ki.unstable_runWithPriority(e.priority,function(){RU(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function w0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=kI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=bg(r),t!==null&&CI(t),e.blockedOn=r,!1;t.shift()}return!0}function y3(e,t,r){w0(e)&&r.delete(t)}function Ibe(){for(jT=!1;0<Ss.length;){var e=Ss[0];if(e.blockedOn!==null){e=bg(e.blockedOn),e!==null&&kU(e);break}for(var t=e.targetContainers;0<t.length;){var r=kI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&Ss.shift()}Nl!==null&&w0(Nl)&&(Nl=null),Bl!==null&&w0(Bl)&&(Bl=null),Ul!==null&&w0(Ul)&&(Ul=null),lg.forEach(y3),cg.forEach(y3)}function Rv(e,t){e.blockedOn===t&&(e.blockedOn=null,jT||(jT=!0,Ki.unstable_scheduleCallback(Ki.unstable_NormalPriority,Ibe)))}function LU(e){function t(u){return Rv(u,e)}if(0<Ss.length){Rv(Ss[0],e);for(var r=1;r<Ss.length;r++){var a=Ss[r];a.blockedOn===e&&(a.blockedOn=null)}}for(Nl!==null&&Rv(Nl,e),Bl!==null&&Rv(Bl,e),Ul!==null&&Rv(Ul,e),lg.forEach(t),cg.forEach(t),r=0;r<Ov.length;r++)a=Ov[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ov.length&&(r=Ov[0],r.blockedOn===null);)Tbe(r),r.blockedOn===null&&Ov.shift()}function f0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var md={animationend:f0("Animation","AnimationEnd"),animationiteration:f0("Animation","AnimationIteration"),animationstart:f0("Animation","AnimationStart"),transitionend:f0("Transition","TransitionEnd")},cT={},FU={};wu&&(FU=document.createElement("div").style,"AnimationEvent"in window||(delete md.animationend.animation,delete md.animationiteration.animation,delete md.animationstart.animation),"TransitionEvent"in window||delete md.transitionend.transition);function nb(e){if(cT[e])return cT[e];if(!md[e])return e;var t=md[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in FU)return cT[e]=t[r];return e}var zU=nb("animationend"),NU=nb("animationiteration"),BU=nb("animationstart"),UU=nb("transitionend"),jU=new Map,PI=new Map,Cbe=["abort","abort",zU,"animationEnd",NU,"animationIteration",BU,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",UU,"transitionEnd","waiting","waiting"];function MI(e,t){for(var r=0;r<e.length;r+=2){var a=e[r],u=e[r+1];u="on"+(u[0].toUpperCase()+u.slice(1)),PI.set(a,t),jU.set(a,u),yh(u,[a])}}var Pbe=Ki.unstable_now;Pbe();var Lr=8;function dd(e){if(1&e)return Lr=15,1;if(2&e)return Lr=14,2;if(4&e)return Lr=13,4;var t=24&e;return t!==0?(Lr=12,t):e&32?(Lr=11,32):(t=192&e,t!==0?(Lr=10,t):e&256?(Lr=9,256):(t=3584&e,t!==0?(Lr=8,t):e&4096?(Lr=7,4096):(t=4186112&e,t!==0?(Lr=6,t):(t=62914560&e,t!==0?(Lr=5,t):e&67108864?(Lr=4,67108864):e&134217728?(Lr=3,134217728):(t=805306368&e,t!==0?(Lr=2,t):1073741824&e?(Lr=1,1073741824):(Lr=8,e))))))}function Mbe(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function Obe(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ze(358,e));}}function hg(e,t){var r=e.pendingLanes;if(r===0)return Lr=0;var a=0,u=0,s=e.expiredLanes,m=e.suspendedLanes,x=e.pingedLanes;if(s!==0)a=s,u=Lr=15;else if(s=r&134217727,s!==0){var q=s&~m;q!==0?(a=dd(q),u=Lr):(x&=s,x!==0&&(a=dd(x),u=Lr))}else s=r&~m,s!==0?(a=dd(s),u=Lr):x!==0&&(a=dd(x),u=Lr);if(a===0)return 0;if(a=31-Zl(a),a=r&((0>a?0:1<<a)<<1)-1,t!==0&&t!==a&&!(t&m)){if(dd(t),u<=Lr)return t;Lr=u}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Zl(t),u=1<<r,a|=e[r],t&=~u;return a}function VU(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function L0(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=pd(24&~t),e===0?L0(10,t):e;case 10:return e=pd(192&~t),e===0?L0(8,t):e;case 8:return e=pd(3584&~t),e===0&&(e=pd(4186112&~t),e===0&&(e=512)),e;case 2:return t=pd(805306368&~t),t===0&&(t=268435456),t;}throw Error(Ze(358,e))}function pd(e){return e&-e}function hT(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ab(e,t,r){e.pendingLanes|=t;var a=t-1;e.suspendedLanes&=a,e.pingedLanes&=a,e=e.eventTimes,t=31-Zl(t),e[t]=r}var Zl=Math.clz32?Math.clz32:Dbe,kbe=Math.log,Rbe=Math.LN2;function Dbe(e){return e===0?32:31-(kbe(e)/Rbe|0)|0}var Lbe=Ki.unstable_UserBlockingPriority,Fbe=Ki.unstable_runWithPriority,S0=!0;function zbe(e,t,r,a){ch||TI();var u=OI,s=ch;ch=!0;try{CU(u,e,t,r,a)}finally{(ch=s)||II()}}function Nbe(e,t,r,a){Fbe(Lbe,OI.bind(null,e,t,r,a))}function OI(e,t,r,a){if(S0){var u;if((u=(t&4)===0)&&0<Ss.length&&-1<v3.indexOf(e))e=VT(null,e,t,r,a),Ss.push(e);else{var s=kI(e,t,r,a);if(s===null)u&&g3(e,a);else{if(u){if(-1<v3.indexOf(e)){e=VT(s,e,t,r,a),Ss.push(e);return}if(Ebe(s,e,t,r,a))return;g3(e,a)}r5(e,t,a,null,r)}}}}function kI(e,t,r,a){var u=AI(a);if(u=hh(u),u!==null){var s=xh(u);if(s===null)u=null;else{var m=s.tag;if(m===13){if(u=MU(s),u!==null)return u;u=null}else if(m===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;u=null}else s!==u&&(u=null)}}return r5(e,t,a,u,r),null}var Ll=null,RI=null,q0=null;function $U(){if(q0)return q0;var e,t=RI,r=t.length,a,u="value"in Ll?Ll.value:Ll.textContent,s=u.length;for(e=0;e<r&&t[e]===u[e];e++);var m=r-e;for(a=1;a<=m&&t[r-a]===u[s-a];a++);return q0=u.slice(e,1<a?1-a:void 0)}function A0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function d0(){return!0}function _3(){return!1}function Ha(e){function t(r,a,u,s,m){this._reactName=r,this._targetInst=u,this.type=a,this.nativeEvent=s,this.target=m,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(r=e[x],this[x]=r?r(s):s[x]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?d0:_3,this.isPropagationStopped=_3,this}return Yr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=d0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=d0)},persist:function(){},isPersistent:d0}),t}var Dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},DI=Ha(Dd),xg=Yr({},Dd,{view:0,detail:0}),Bbe=Ha(xg),fT,dT,Dv,ob=Yr({},xg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:LI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dv&&(Dv&&e.type==="mousemove"?(fT=e.screenX-Dv.screenX,dT=e.screenY-Dv.screenY):dT=fT=0,Dv=e),fT)},movementY:function(e){return"movementY"in e?e.movementY:dT}}),x3=Ha(ob),Ube=Yr({},ob,{dataTransfer:0}),jbe=Ha(Ube),Vbe=Yr({},xg,{relatedTarget:0}),pT=Ha(Vbe),$be=Yr({},Dd,{animationName:0,elapsedTime:0,pseudoElement:0}),Wbe=Ha($be),Gbe=Yr({},Dd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kbe=Ha(Gbe),Zbe=Yr({},Dd,{data:0}),b3=Ha(Zbe),Hbe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xbe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jbe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ybe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Jbe[e])?!!t[e]:!1}function LI(){return Ybe}var Qbe=Yr({},xg,{key:function(e){if(e.key){var t=Hbe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=A0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xbe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:LI,charCode:function(e){return e.type==="keypress"?A0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?A0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),e1e=Ha(Qbe),t1e=Yr({},ob,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w3=Ha(t1e),r1e=Yr({},xg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:LI}),i1e=Ha(r1e),n1e=Yr({},Dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),a1e=Ha(n1e),o1e=Yr({},ob,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),s1e=Ha(o1e),u1e=[9,13,27,32],FI=wu&&"CompositionEvent"in window,Yv=null;wu&&"documentMode"in document&&(Yv=document.documentMode);var l1e=wu&&"TextEvent"in window&&!Yv,WU=wu&&(!FI||Yv&&8<Yv&&11>=Yv),S3=" ",q3=!1;function GU(e,t){switch(e){case"keyup":return u1e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function KU(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vd=!1;function c1e(e,t){switch(e){case"compositionend":return KU(t);case"keypress":return t.which!==32?null:(q3=!0,S3);case"textInput":return e=t.data,e===S3&&q3?null:e;default:return null;}}function h1e(e,t){if(vd)return e==="compositionend"||!FI&&GU(e,t)?(e=$U(),q0=RI=Ll=null,vd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return WU&&t.locale!=="ko"?null:t.data;default:return null;}}var f1e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!f1e[e.type]:t==="textarea"}function ZU(e,t,r,a){TU(a),t=F0(t,"onChange"),0<t.length&&(r=new DI("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Qv=null,fg=null;function d1e(e){QU(e,0)}function sb(e){var t=yd(e);if(xU(t))return e}function p1e(e,t){if(e==="change")return t}var HU=!1;wu&&(wu?(m0="oninput"in document,m0||(mT=document.createElement("div"),mT.setAttribute("oninput","return;"),m0=typeof mT.oninput=="function"),p0=m0):p0=!1,HU=p0&&(!document.documentMode||9<document.documentMode));var p0,m0,mT;function E3(){Qv&&(Qv.detachEvent("onpropertychange",XU),fg=Qv=null)}function XU(e){if(e.propertyName==="value"&&sb(fg)){var t=[];if(ZU(t,fg,e,AI(e)),e=d1e,ch)e(t);else{ch=!0;try{EI(e,t)}finally{ch=!1,II()}}}}function m1e(e,t,r){e==="focusin"?(E3(),Qv=t,fg=r,Qv.attachEvent("onpropertychange",XU)):e==="focusout"&&E3()}function v1e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sb(fg)}function g1e(e,t){if(e==="click")return sb(t)}function y1e(e,t){if(e==="input"||e==="change")return sb(t)}function _1e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vo=typeof Object.is=="function"?Object.is:_1e,x1e=Object.prototype.hasOwnProperty;function dg(e,t){if(vo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++)if(!x1e.call(t,r[a])||!vo(e[r[a]],t[r[a]]))return!1;return!0}function T3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function I3(e,t){var r=T3(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=T3(r)}}function JU(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?JU(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function C3(){for(var e=window,t=k0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(a){r=!1}if(r)e=t.contentWindow;else break;t=k0(e.document)}return t}function $T(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var b1e=wu&&"documentMode"in document&&11>=document.documentMode,gd=null,WT=null,eg=null,GT=!1;function P3(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;GT||gd==null||gd!==k0(a)||(a=gd,"selectionStart"in a&&$T(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),eg&&dg(eg,a)||(eg=a,a=F0(WT,"onSelect"),0<a.length&&(t=new DI("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=gd)))}MI("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);MI("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);MI(Cbe,2);for(vT="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),v0=0;v0<vT.length;v0++)PI.set(vT[v0],0);var vT,v0;Md("onMouseEnter",["mouseout","mouseover"]);Md("onMouseLeave",["mouseout","mouseover"]);Md("onPointerEnter",["pointerout","pointerover"]);Md("onPointerLeave",["pointerout","pointerover"]);yh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yh("onBeforeInput",["compositionend","keypress","textInput","paste"]);yh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wv));function M3(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,qbe(a,t,void 0,e),e.currentTarget=null}function QU(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],u=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var m=a.length-1;0<=m;m--){var x=a[m],q=x.instance,T=x.currentTarget;if(x=x.listener,q!==s&&u.isPropagationStopped())break e;M3(u,x,T),s=q}else for(m=0;m<a.length;m++){if(x=a[m],q=x.instance,T=x.currentTarget,x=x.listener,q!==s&&u.isPropagationStopped())break e;M3(u,x,T),s=q}}}if(D0)throw e=UT,D0=!1,UT=null,e}function $r(e,t){var r=n5(t),a=e+"__bubble";r.has(a)||(t5(t,e,2,!1),r.add(a))}var O3="_reactListening"+Math.random().toString(36).slice(2);function e5(e){e[O3]||(e[O3]=!0,gU.forEach(function(t){YU.has(t)||k3(t,!1,e,null),k3(t,!0,e,null)}))}function k3(e,t,r,a){var u=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=r;if(e==="selectionchange"&&r.nodeType!==9&&(s=r.ownerDocument),a!==null&&!t&&YU.has(e)){if(e!=="scroll")return;u|=2,s=a}var m=n5(s),x=e+"__"+(t?"capture":"bubble");m.has(x)||(t&&(u|=4),t5(s,e,u,t),m.add(x))}function t5(e,t,r,a){var u=PI.get(t);switch(u===void 0?2:u){case 0:u=zbe;break;case 1:u=Nbe;break;default:u=OI;}r=u.bind(null,t,r,e),u=void 0,!BT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,r,{capture:!0,passive:u}):e.addEventListener(t,r,!0):u!==void 0?e.addEventListener(t,r,{passive:u}):e.addEventListener(t,r,!1)}function r5(e,t,r,a,u){var s=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var m=a.tag;if(m===3||m===4){var x=a.stateNode.containerInfo;if(x===u||x.nodeType===8&&x.parentNode===u)break;if(m===4)for(m=a.return;m!==null;){var q=m.tag;if((q===3||q===4)&&(q=m.stateNode.containerInfo,q===u||q.nodeType===8&&q.parentNode===u))return;m=m.return}for(;x!==null;){if(m=hh(x),m===null)return;if(q=m.tag,q===5||q===6){a=s=m;continue e}x=x.parentNode}}a=a.return}xbe(function(){var T=s,I=AI(r),L=[];e:{var z=jU.get(e);if(z!==void 0){var Y=DI,pe=e;switch(e){case"keypress":if(A0(r)===0)break e;case"keydown":case"keyup":Y=e1e;break;case"focusin":pe="focus",Y=pT;break;case"focusout":pe="blur",Y=pT;break;case"beforeblur":case"afterblur":Y=pT;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=x3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=jbe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=i1e;break;case zU:case NU:case BU:Y=Wbe;break;case UU:Y=a1e;break;case"scroll":Y=Bbe;break;case"wheel":Y=s1e;break;case"copy":case"cut":case"paste":Y=Kbe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=w3;}var de=(t&4)!==0,Z=!de&&e==="scroll",H=de?z!==null?z+"Capture":null:z;de=[];for(var J=T,ve;J!==null;){ve=J;var be=ve.stateNode;if(ve.tag===5&&be!==null&&(ve=be,H!==null&&(be=ug(J,H),be!=null&&de.push(pg(J,be,ve)))),Z)break;J=J.return}0<de.length&&(z=new Y(z,pe,null,r,I),L.push({event:z,listeners:de}))}}if(!(t&7)){e:{if(z=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",z&&!(t&16)&&(pe=r.relatedTarget||r.fromElement)&&(hh(pe)||pe[Ld]))break e;if((Y||z)&&(z=I.window===I?I:(z=I.ownerDocument)?z.defaultView||z.parentWindow:window,Y?(pe=r.relatedTarget||r.toElement,Y=T,pe=pe?hh(pe):null,pe!==null&&(Z=xh(pe),pe!==Z||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(Y=null,pe=T),Y!==pe)){if(de=x3,be="onMouseLeave",H="onMouseEnter",J="mouse",(e==="pointerout"||e==="pointerover")&&(de=w3,be="onPointerLeave",H="onPointerEnter",J="pointer"),Z=Y==null?z:yd(Y),ve=pe==null?z:yd(pe),z=new de(be,J+"leave",Y,r,I),z.target=Z,z.relatedTarget=ve,be=null,hh(I)===T&&(de=new de(H,J+"enter",pe,r,I),de.target=ve,de.relatedTarget=Z,be=de),Z=be,Y&&pe)t:{for(de=Y,H=pe,J=0,ve=de;ve;ve=fd(ve))J++;for(ve=0,be=H;be;be=fd(be))ve++;for(;0<J-ve;)de=fd(de),J--;for(;0<ve-J;)H=fd(H),ve--;for(;J--;){if(de===H||H!==null&&de===H.alternate)break t;de=fd(de),H=fd(H)}de=null}else de=null;Y!==null&&R3(L,z,Y,de,!1),pe!==null&&Z!==null&&R3(L,Z,pe,de,!0)}}e:{if(z=T?yd(T):window,Y=z.nodeName&&z.nodeName.toLowerCase(),Y==="select"||Y==="input"&&z.type==="file")var Le=p1e;else if(A3(z)){if(HU)Le=y1e;else{Le=v1e;var Pe=m1e}}else(Y=z.nodeName)&&Y.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(Le=g1e);if(Le&&(Le=Le(e,T))){ZU(L,Le,r,I);break e}Pe&&Pe(e,z,T),e==="focusout"&&(Pe=z._wrapperState)&&Pe.controlled&&z.type==="number"&&OT(z,"number",z.value)}switch(Pe=T?yd(T):window,e){case"focusin":(A3(Pe)||Pe.contentEditable==="true")&&(gd=Pe,WT=T,eg=null);break;case"focusout":eg=WT=gd=null;break;case"mousedown":GT=!0;break;case"contextmenu":case"mouseup":case"dragend":GT=!1,P3(L,r,I);break;case"selectionchange":if(b1e)break;case"keydown":case"keyup":P3(L,r,I);}var Ge;if(FI)e:{switch(e){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e;}pt=void 0}else vd?GU(e,r)&&(pt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(pt="onCompositionStart");pt&&(WU&&r.locale!=="ko"&&(vd||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&vd&&(Ge=$U()):(Ll=I,RI="value"in Ll?Ll.value:Ll.textContent,vd=!0)),Pe=F0(T,pt),0<Pe.length&&(pt=new b3(pt,e,null,r,I),L.push({event:pt,listeners:Pe}),Ge?pt.data=Ge:(Ge=KU(r),Ge!==null&&(pt.data=Ge)))),(Ge=l1e?c1e(e,r):h1e(e,r))&&(T=F0(T,"onBeforeInput"),0<T.length&&(I=new b3("onBeforeInput","beforeinput",null,r,I),L.push({event:I,listeners:T}),I.data=Ge))}QU(L,t)})}function pg(e,t,r){return{instance:e,listener:t,currentTarget:r}}function F0(e,t){for(var r=t+"Capture",a=[];e!==null;){var u=e,s=u.stateNode;u.tag===5&&s!==null&&(u=s,s=ug(e,r),s!=null&&a.unshift(pg(e,s,u)),s=ug(e,t),s!=null&&a.push(pg(e,s,u))),e=e.return}return a}function fd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function R3(e,t,r,a,u){for(var s=t._reactName,m=[];r!==null&&r!==a;){var x=r,q=x.alternate,T=x.stateNode;if(q!==null&&q===a)break;x.tag===5&&T!==null&&(x=T,u?(q=ug(r,s),q!=null&&m.unshift(pg(r,q,x))):u||(q=ug(r,s),q!=null&&m.push(pg(r,q,x)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}function z0(){}var gT=null,yT=null;function i5(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus;}return!1}function KT(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var D3=typeof setTimeout=="function"?setTimeout:void 0,w1e=typeof clearTimeout=="function"?clearTimeout:void 0;function zI(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Ad(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function L3(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var _T=0;function S1e(e){return{$$typeof:SI,toString:e,valueOf:e}}var ub=Math.random().toString(36).slice(2),Fl="__reactFiber$"+ub,N0="__reactProps$"+ub,Ld="__reactContainer$"+ub,F3="__reactEvents$"+ub;function hh(e){var t=e[Fl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ld]||r[Fl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=L3(e);e!==null;){if(r=e[Fl])return r;e=L3(e)}return t}e=r,r=e.parentNode}return null}function bg(e){return e=e[Fl]||e[Ld],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ze(33))}function lb(e){return e[N0]||null}function n5(e){var t=e[F3];return t===void 0&&(t=e[F3]=new Set),t}var ZT=[],_d=-1;function Yl(e){return{current:e}}function Wr(e){0>_d||(e.current=ZT[_d],ZT[_d]=null,_d--)}function fi(e,t){_d++,ZT[_d]=e.current,e.current=t}var Hl={},Pn=Yl(Hl),va=Yl(!1),mh=Hl;function Od(e,t){var r=e.type.contextTypes;if(!r)return Hl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var u={},s;for(s in r)u[s]=t[s];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function ga(e){return e=e.childContextTypes,e!=null}function B0(){Wr(va),Wr(Pn)}function z3(e,t,r){if(Pn.current!==Hl)throw Error(Ze(168));fi(Pn,t),fi(va,r)}function a5(e,t,r){var a=e.stateNode;if(e=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var u in a)if(!(u in e))throw Error(Ze(108,bd(t)||"Unknown",u));return Yr({},r,a)}function E0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hl,mh=Pn.current,fi(Pn,e),fi(va,va.current),!0}function N3(e,t,r){var a=e.stateNode;if(!a)throw Error(Ze(169));r?(e=a5(e,t,mh),a.__reactInternalMemoizedMergedChildContext=e,Wr(va),Wr(Pn),fi(Pn,e)):Wr(va),fi(va,r)}var NI=null,ph=null,q1e=Ki.unstable_runWithPriority,BI=Ki.unstable_scheduleCallback,HT=Ki.unstable_cancelCallback,A1e=Ki.unstable_shouldYield,B3=Ki.unstable_requestPaint,XT=Ki.unstable_now,E1e=Ki.unstable_getCurrentPriorityLevel,cb=Ki.unstable_ImmediatePriority,o5=Ki.unstable_UserBlockingPriority,s5=Ki.unstable_NormalPriority,u5=Ki.unstable_LowPriority,l5=Ki.unstable_IdlePriority,xT={},T1e=B3!==void 0?B3:function(){},gu=null,T0=null,bT=!1,U3=XT(),In=1e4>U3?XT:function(){return XT()-U3};function kd(){switch(E1e()){case cb:return 99;case o5:return 98;case s5:return 97;case u5:return 96;case l5:return 95;default:throw Error(Ze(332));}}function c5(e){switch(e){case 99:return cb;case 98:return o5;case 97:return s5;case 96:return u5;case 95:return l5;default:throw Error(Ze(332));}}function vh(e,t){return e=c5(e),q1e(e,t)}function mg(e,t,r){return e=c5(e),BI(e,t,r)}function Is(){if(T0!==null){var e=T0;T0=null,HT(e)}h5()}function h5(){if(!bT&&gu!==null){bT=!0;var e=0;try{var t=gu;vh(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),gu=null}catch(r){throw gu!==null&&(gu=gu.slice(e+1)),BI(cb,Is),r}finally{bT=!1}}}var I1e=_h.ReactCurrentBatchConfig;function Yo(e,t){if(e&&e.defaultProps){t=Yr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var U0=Yl(null),j0=null,xd=null,V0=null;function UI(){V0=xd=j0=null}function jI(e){var t=U0.current;Wr(U0),e.type._context._currentValue=t}function f5(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Ed(e,t){j0=e,V0=xd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qo=!0),e.firstContext=null)}function _o(e,t){if(V0!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(V0=e,t=1073741823),t={context:e,observedBits:t,next:null},xd===null){if(j0===null)throw Error(Ze(308));xd=t,j0.dependencies={lanes:0,firstContext:t,responders:null}}else xd=xd.next=t;return e._currentValue}var Rl=!1;function VI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function d5(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vl(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function j3(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var u=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?u=s=m:s=s.next=m,r=r.next}while(r!==null);s===null?u=s=t:s=s.next=t}else u=s=t;r={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:s,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function vg(e,t,r,a){var u=e.updateQueue;Rl=!1;var s=u.firstBaseUpdate,m=u.lastBaseUpdate,x=u.shared.pending;if(x!==null){u.shared.pending=null;var q=x,T=q.next;q.next=null,m===null?s=T:m.next=T,m=q;var I=e.alternate;if(I!==null){I=I.updateQueue;var L=I.lastBaseUpdate;L!==m&&(L===null?I.firstBaseUpdate=T:L.next=T,I.lastBaseUpdate=q)}}if(s!==null){L=u.baseState,m=0,I=T=q=null;do{x=s.lane;var z=s.eventTime;if((a&x)===x){I!==null&&(I=I.next={eventTime:z,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var Y=e,pe=s;switch(x=t,z=r,pe.tag){case 1:if(Y=pe.payload,typeof Y=="function"){L=Y.call(z,L,x);break e}L=Y;break e;case 3:Y.flags=Y.flags&-4097|64;case 0:if(Y=pe.payload,x=typeof Y=="function"?Y.call(z,L,x):Y,x==null)break e;L=Yr({},L,x);break e;case 2:Rl=!0;}}s.callback!==null&&(e.flags|=32,x=u.effects,x===null?u.effects=[s]:x.push(s))}else z={eventTime:z,lane:x,tag:s.tag,payload:s.payload,callback:s.callback,next:null},I===null?(T=I=z,q=L):I=I.next=z,m|=x;if(s=s.next,s===null){if(x=u.shared.pending,x===null)break;s=x.next,x.next=null,u.lastBaseUpdate=x,u.shared.pending=null}}while(!0);I===null&&(q=L),u.baseState=q,u.firstBaseUpdate=T,u.lastBaseUpdate=I,Sg|=m,e.lanes=m,e.memoizedState=L}}function V3(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],u=a.callback;if(u!==null){if(a.callback=null,a=r,typeof u!="function")throw Error(Ze(191,u));u.call(a)}}}var p5=new tb.Component().refs;function $0(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:Yr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var hb={isMounted:function(e){return(e=e._reactInternals)?xh(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Za(),u=$l(e),s=jl(a,u);s.payload=t,r!=null&&(s.callback=r),Vl(e,s),Wl(e,u,a)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Za(),u=$l(e),s=jl(a,u);s.tag=1,s.payload=t,r!=null&&(s.callback=r),Vl(e,s),Wl(e,u,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Za(),a=$l(e),u=jl(r,a);u.tag=2,t!=null&&(u.callback=t),Vl(e,u),Wl(e,a,r)}};function $3(e,t,r,a,u,s,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,s,m):t.prototype&&t.prototype.isPureReactComponent?!dg(r,a)||!dg(u,s):!0}function m5(e,t,r){var a=!1,u=Hl,s=t.contextType;return typeof s=="object"&&s!==null?s=_o(s):(u=ga(t)?mh:Pn.current,a=t.contextTypes,s=(a=a!=null)?Od(e,u):Hl),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hb,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=s),t}function W3(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&hb.enqueueReplaceState(t,t.state,null)}function JT(e,t,r,a){var u=e.stateNode;u.props=r,u.state=e.memoizedState,u.refs=p5,VI(e);var s=t.contextType;typeof s=="object"&&s!==null?u.context=_o(s):(s=ga(t)?mh:Pn.current,u.context=Od(e,s)),vg(e,r,u,a),u.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&($0(e,t,s,r),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&hb.enqueueReplaceState(u,u.state,null),vg(e,r,u,a),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4)}var g0=Array.isArray;function Lv(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ze(309));var a=r.stateNode}if(!a)throw Error(Ze(147,e));var u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(s){var m=a.refs;m===p5&&(m=a.refs={}),s===null?delete m[u]:m[u]=s},t._stringRef=u,t)}if(typeof e!="string")throw Error(Ze(284));if(!r._owner)throw Error(Ze(290,e))}return e}function y0(e,t){if(e.type!=="textarea")throw Error(Ze(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function v5(e){function t(Z,H){if(e){var J=Z.lastEffect;J!==null?(J.nextEffect=H,Z.lastEffect=H):Z.firstEffect=Z.lastEffect=H,H.nextEffect=null,H.flags=8}}function r(Z,H){if(!e)return null;for(;H!==null;)t(Z,H),H=H.sibling;return null}function a(Z,H){for(Z=new Map;H!==null;)H.key!==null?Z.set(H.key,H):Z.set(H.index,H),H=H.sibling;return Z}function u(Z,H){return Z=Jl(Z,H),Z.index=0,Z.sibling=null,Z}function s(Z,H,J){return Z.index=J,e?(J=Z.alternate,J!==null?(J=J.index,J<H?(Z.flags=2,H):J):(Z.flags=2,H)):H}function m(Z){return e&&Z.alternate===null&&(Z.flags=2),Z}function x(Z,H,J,ve){return H===null||H.tag!==6?(H=ET(J,Z.mode,ve),H.return=Z,H):(H=u(H,J),H.return=Z,H)}function q(Z,H,J,ve){return H!==null&&H.elementType===J.type?(ve=u(H,J.props),ve.ref=Lv(Z,H,J),ve.return=Z,ve):(ve=M0(J.type,J.key,J.props,null,Z.mode,ve),ve.ref=Lv(Z,H,J),ve.return=Z,ve)}function T(Z,H,J,ve){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=TT(J,Z.mode,ve),H.return=Z,H):(H=u(H,J.children||[]),H.return=Z,H)}function I(Z,H,J,ve,be){return H===null||H.tag!==7?(H=Pd(J,Z.mode,ve,be),H.return=Z,H):(H=u(H,J),H.return=Z,H)}function L(Z,H,J){if(typeof H=="string"||typeof H=="number")return H=ET(""+H,Z.mode,J),H.return=Z,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Vv:return J=M0(H.type,H.key,H.props,null,Z.mode,J),J.ref=Lv(Z,null,H),J.return=Z,J;case lh:return H=TT(H,Z.mode,J),H.return=Z,H;}if(g0(H)||Mv(H))return H=Pd(H,Z.mode,J,null),H.return=Z,H;y0(Z,H)}return null}function z(Z,H,J,ve){var be=H!==null?H.key:null;if(typeof J=="string"||typeof J=="number")return be!==null?null:x(Z,H,""+J,ve);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Vv:return J.key===be?J.type===Dl?I(Z,H,J.props.children,ve,be):q(Z,H,J,ve):null;case lh:return J.key===be?T(Z,H,J,ve):null;}if(g0(J)||Mv(J))return be!==null?null:I(Z,H,J,ve,null);y0(Z,J)}return null}function Y(Z,H,J,ve,be){if(typeof ve=="string"||typeof ve=="number")return Z=Z.get(J)||null,x(H,Z,""+ve,be);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Vv:return Z=Z.get(ve.key===null?J:ve.key)||null,ve.type===Dl?I(H,Z,ve.props.children,be,ve.key):q(H,Z,ve,be);case lh:return Z=Z.get(ve.key===null?J:ve.key)||null,T(H,Z,ve,be);}if(g0(ve)||Mv(ve))return Z=Z.get(J)||null,I(H,Z,ve,be,null);y0(H,ve)}return null}function pe(Z,H,J,ve){for(var be=null,Le=null,Pe=H,Ge=H=0,pt=null;Pe!==null&&Ge<J.length;Ge++){Pe.index>Ge?(pt=Pe,Pe=null):pt=Pe.sibling;var Ve=z(Z,Pe,J[Ge],ve);if(Ve===null){Pe===null&&(Pe=pt);break}e&&Pe&&Ve.alternate===null&&t(Z,Pe),H=s(Ve,H,Ge),Le===null?be=Ve:Le.sibling=Ve,Le=Ve,Pe=pt}if(Ge===J.length)return r(Z,Pe),be;if(Pe===null){for(;Ge<J.length;Ge++)Pe=L(Z,J[Ge],ve),Pe!==null&&(H=s(Pe,H,Ge),Le===null?be=Pe:Le.sibling=Pe,Le=Pe);return be}for(Pe=a(Z,Pe);Ge<J.length;Ge++)pt=Y(Pe,Z,Ge,J[Ge],ve),pt!==null&&(e&&pt.alternate!==null&&Pe.delete(pt.key===null?Ge:pt.key),H=s(pt,H,Ge),Le===null?be=pt:Le.sibling=pt,Le=pt);return e&&Pe.forEach(function(Br){return t(Z,Br)}),be}function de(Z,H,J,ve){var be=Mv(J);if(typeof be!="function")throw Error(Ze(150));if(J=be.call(J),J==null)throw Error(Ze(151));for(var Le=be=null,Pe=H,Ge=H=0,pt=null,Ve=J.next();Pe!==null&&!Ve.done;Ge++,Ve=J.next()){Pe.index>Ge?(pt=Pe,Pe=null):pt=Pe.sibling;var Br=z(Z,Pe,Ve.value,ve);if(Br===null){Pe===null&&(Pe=pt);break}e&&Pe&&Br.alternate===null&&t(Z,Pe),H=s(Br,H,Ge),Le===null?be=Br:Le.sibling=Br,Le=Br,Pe=pt}if(Ve.done)return r(Z,Pe),be;if(Pe===null){for(;!Ve.done;Ge++,Ve=J.next())Ve=L(Z,Ve.value,ve),Ve!==null&&(H=s(Ve,H,Ge),Le===null?be=Ve:Le.sibling=Ve,Le=Ve);return be}for(Pe=a(Z,Pe);!Ve.done;Ge++,Ve=J.next())Ve=Y(Pe,Z,Ge,Ve.value,ve),Ve!==null&&(e&&Ve.alternate!==null&&Pe.delete(Ve.key===null?Ge:Ve.key),H=s(Ve,H,Ge),Le===null?be=Ve:Le.sibling=Ve,Le=Ve);return e&&Pe.forEach(function(cr){return t(Z,cr)}),be}return function(Z,H,J,ve){var be=typeof J=="object"&&J!==null&&J.type===Dl&&J.key===null;be&&(J=J.props.children);var Le=typeof J=="object"&&J!==null;if(Le)switch(J.$$typeof){case Vv:e:{for(Le=J.key,be=H;be!==null;){if(be.key===Le){switch(be.tag){case 7:if(J.type===Dl){r(Z,be.sibling),H=u(be,J.props.children),H.return=Z,Z=H;break e}break;default:if(be.elementType===J.type){r(Z,be.sibling),H=u(be,J.props),H.ref=Lv(Z,be,J),H.return=Z,Z=H;break e}}r(Z,be);break}else t(Z,be);be=be.sibling}J.type===Dl?(H=Pd(J.props.children,Z.mode,ve,J.key),H.return=Z,Z=H):(ve=M0(J.type,J.key,J.props,null,Z.mode,ve),ve.ref=Lv(Z,H,J),ve.return=Z,Z=ve)}return m(Z);case lh:e:{for(be=J.key;H!==null;){if(H.key===be){if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){r(Z,H.sibling),H=u(H,J.children||[]),H.return=Z,Z=H;break e}else{r(Z,H);break}}else t(Z,H);H=H.sibling}H=TT(J,Z.mode,ve),H.return=Z,Z=H}return m(Z);}if(typeof J=="string"||typeof J=="number")return J=""+J,H!==null&&H.tag===6?(r(Z,H.sibling),H=u(H,J),H.return=Z,Z=H):(r(Z,H),H=ET(J,Z.mode,ve),H.return=Z,Z=H),m(Z);if(g0(J))return pe(Z,H,J,ve);if(Mv(J))return de(Z,H,J,ve);if(Le&&y0(Z,J),typeof J=="undefined"&&!be)switch(Z.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ze(152,bd(Z.type)||"Component"));}return r(Z,H)}}var W0=v5(!0),g5=v5(!1),wg={},Es=Yl(wg),gg=Yl(wg),yg=Yl(wg);function fh(e){if(e===wg)throw Error(Ze(174));return e}function YT(e,t){switch(fi(yg,t),fi(gg,e),fi(Es,wg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:LT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=LT(t,e);}Wr(Es),fi(Es,t)}function Rd(){Wr(Es),Wr(gg),Wr(yg)}function G3(e){fh(yg.current);var t=fh(Es.current),r=LT(t,e.type);t!==r&&(fi(gg,e),fi(Es,r))}function $I(e){gg.current===e&&(Wr(Es),Wr(gg))}var hi=Yl(0);function G0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _u=null,zl=null,Ts=!1;function y5(e,t){var r=go(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function K3(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1;}}function QT(e){if(Ts){var t=zl;if(t){var r=t;if(!K3(e,t)){if(t=Ad(r.nextSibling),!t||!K3(e,t)){e.flags=e.flags&-1025|2,Ts=!1,_u=e;return}y5(_u,r)}_u=e,zl=Ad(t.firstChild)}else e.flags=e.flags&-1025|2,Ts=!1,_u=e}}function Z3(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_u=e}function _0(e){if(e!==_u)return!1;if(!Ts)return Z3(e),Ts=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!KT(t,e.memoizedProps))for(t=zl;t;)y5(e,t),t=Ad(t.nextSibling);if(Z3(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ze(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){zl=Ad(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}zl=null}}else zl=_u?Ad(e.stateNode.nextSibling):null;return!0}function wT(){zl=_u=null,Ts=!1}var Td=[];function WI(){for(var e=0;e<Td.length;e++)Td[e]._workInProgressVersionPrimary=null;Td.length=0}var tg=_h.ReactCurrentDispatcher,yo=_h.ReactCurrentBatchConfig,_g=0,_i=null,Tn=null,on=null,K0=!1,rg=!1;function pa(){throw Error(Ze(321))}function GI(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!vo(e[r],t[r]))return!1;return!0}function KI(e,t,r,a,u,s){if(_g=s,_i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tg.current=e===null||e.memoizedState===null?P1e:M1e,e=r(a,u),rg){s=0;do{if(rg=!1,!(25>s))throw Error(Ze(301));s+=1,on=Tn=null,t.updateQueue=null,tg.current=O1e,e=r(a,u)}while(rg)}if(tg.current=J0,t=Tn!==null&&Tn.next!==null,_g=0,on=Tn=_i=null,K0=!1,t)throw Error(Ze(300));return e}function dh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?_i.memoizedState=on=e:on=on.next=e,on}function bh(){if(Tn===null){var e=_i.alternate;e=e!==null?e.memoizedState:null}else e=Tn.next;var t=on===null?_i.memoizedState:on.next;if(t!==null)on=t,Tn=e;else{if(e===null)throw Error(Ze(310));Tn=e,e={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},on===null?_i.memoizedState=on=e:on=on.next=e}return on}function qs(e,t){return typeof t=="function"?t(e):t}function Fv(e){var t=bh(),r=t.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=e;var a=Tn,u=a.baseQueue,s=r.pending;if(s!==null){if(u!==null){var m=u.next;u.next=s.next,s.next=m}a.baseQueue=u=s,r.pending=null}if(u!==null){u=u.next,a=a.baseState;var x=m=s=null,q=u;do{var T=q.lane;if((_g&T)===T)x!==null&&(x=x.next={lane:0,action:q.action,eagerReducer:q.eagerReducer,eagerState:q.eagerState,next:null}),a=q.eagerReducer===e?q.eagerState:e(a,q.action);else{var I={lane:T,action:q.action,eagerReducer:q.eagerReducer,eagerState:q.eagerState,next:null};x===null?(m=x=I,s=a):x=x.next=I,_i.lanes|=T,Sg|=T}q=q.next}while(q!==null&&q!==u);x===null?s=a:x.next=m,vo(a,t.memoizedState)||(Qo=!0),t.memoizedState=a,t.baseState=s,t.baseQueue=x,r.lastRenderedState=a}return[t.memoizedState,r.dispatch]}function zv(e){var t=bh(),r=t.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=e;var a=r.dispatch,u=r.pending,s=t.memoizedState;if(u!==null){r.pending=null;var m=u=u.next;do s=e(s,m.action),m=m.next;while(m!==u);vo(s,t.memoizedState)||(Qo=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,a]}function H3(e,t,r){var a=t._getVersion;a=a(t._source);var u=t._workInProgressVersionPrimary;if(u!==null?e=u===a:(e=e.mutableReadLanes,(e=(_g&e)===e)&&(t._workInProgressVersionPrimary=a,Td.push(t))),e)return r(t._source);throw Td.push(t),Error(Ze(350))}function _5(e,t,r,a){var u=Kn;if(u===null)throw Error(Ze(349));var s=t._getVersion,m=s(t._source),x=tg.current,q=x.useState(function(){return H3(u,t,r)}),T=q[1],I=q[0];q=on;var L=e.memoizedState,z=L.refs,Y=z.getSnapshot,pe=L.source;L=L.subscribe;var de=_i;return e.memoizedState={refs:z,source:t,subscribe:a},x.useEffect(function(){z.getSnapshot=r,z.setSnapshot=T;var Z=s(t._source);if(!vo(m,Z)){Z=r(t._source),vo(I,Z)||(T(Z),Z=$l(de),u.mutableReadLanes|=Z&u.pendingLanes),Z=u.mutableReadLanes,u.entangledLanes|=Z;for(var H=u.entanglements,J=Z;0<J;){var ve=31-Zl(J),be=1<<ve;H[ve]|=Z,J&=~be}}},[r,t,a]),x.useEffect(function(){return a(t._source,function(){var Z=z.getSnapshot,H=z.setSnapshot;try{H(Z(t._source));var J=$l(de);u.mutableReadLanes|=J&u.pendingLanes}catch(ve){H(function(){throw ve})}})},[t,a]),vo(Y,r)&&vo(pe,t)&&vo(L,a)||(e={pending:null,dispatch:null,lastRenderedReducer:qs,lastRenderedState:I},e.dispatch=T=XI.bind(null,_i,e),q.queue=e,q.baseQueue=null,I=H3(u,t,r),q.memoizedState=q.baseState=I),I}function x5(e,t,r){var a=bh();return _5(a,e,t,r)}function Nv(e){var t=dh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},e=e.dispatch=XI.bind(null,_i,e),[t.memoizedState,e]}function Z0(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=_i.updateQueue,t===null?(t={lastEffect:null},_i.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function X3(e){var t=dh();return e={current:e},t.memoizedState=e}function H0(){return bh().memoizedState}function eI(e,t,r,a){var u=dh();_i.flags|=e,u.memoizedState=Z0(1|t,r,void 0,a===void 0?null:a)}function ZI(e,t,r,a){var u=bh();a=a===void 0?null:a;var s=void 0;if(Tn!==null){var m=Tn.memoizedState;if(s=m.destroy,a!==null&&GI(a,m.deps)){Z0(t,r,s,a);return}}_i.flags|=e,u.memoizedState=Z0(1|t,r,s,a)}function J3(e,t){return eI(516,4,e,t)}function X0(e,t){return ZI(516,4,e,t)}function b5(e,t){return ZI(4,2,e,t)}function w5(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function S5(e,t,r){return r=r!=null?r.concat([e]):null,ZI(4,2,w5.bind(null,t,e),r)}function HI(){}function q5(e,t){var r=bh();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&GI(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function A5(e,t){var r=bh();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&GI(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function C1e(e,t){var r=kd();vh(98>r?98:r,function(){e(!0)}),vh(97<r?97:r,function(){var a=yo.transition;yo.transition=1;try{e(!1),t()}finally{yo.transition=a}})}function XI(e,t,r){var a=Za(),u=$l(e),s={lane:u,action:r,eagerReducer:null,eagerState:null,next:null},m=t.pending;if(m===null?s.next=s:(s.next=m.next,m.next=s),t.pending=s,m=e.alternate,e===_i||m!==null&&m===_i)rg=K0=!0;else{if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var x=t.lastRenderedState,q=m(x,r);if(s.eagerReducer=m,s.eagerState=q,vo(q,x))return}catch(T){}finally{}Wl(e,u,a)}}var J0={readContext:_o,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useOpaqueIdentifier:pa,unstable_isNewReconciler:!1},P1e={readContext:_o,useCallback:function(e,t){return dh().memoizedState=[e,t===void 0?null:t],e},useContext:_o,useEffect:J3,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,eI(4,2,w5.bind(null,t,e),r)},useLayoutEffect:function(e,t){return eI(4,2,e,t)},useMemo:function(e,t){var r=dh();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=dh();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e=a.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=XI.bind(null,_i,e),[a.memoizedState,e]},useRef:X3,useState:Nv,useDebugValue:HI,useDeferredValue:function(e){var t=Nv(e),r=t[0],a=t[1];return J3(function(){var u=yo.transition;yo.transition=1;try{a(e)}finally{yo.transition=u}},[e]),r},useTransition:function(){var e=Nv(!1),t=e[0];return e=C1e.bind(null,e[1]),X3(e),[e,t]},useMutableSource:function(e,t,r){var a=dh();return a.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},_5(a,e,t,r)},useOpaqueIdentifier:function(){if(Ts){var e=!1,t=S1e(function(){throw e||(e=!0,r("r:"+(_T++).toString(36))),Error(Ze(355))}),r=Nv(t)[1];return!(_i.mode&2)&&(_i.flags|=516,Z0(5,function(){r("r:"+(_T++).toString(36))},void 0,null)),t}return t="r:"+(_T++).toString(36),Nv(t),t},unstable_isNewReconciler:!1},M1e={readContext:_o,useCallback:q5,useContext:_o,useEffect:X0,useImperativeHandle:S5,useLayoutEffect:b5,useMemo:A5,useReducer:Fv,useRef:H0,useState:function(){return Fv(qs)},useDebugValue:HI,useDeferredValue:function(e){var t=Fv(qs),r=t[0],a=t[1];return X0(function(){var u=yo.transition;yo.transition=1;try{a(e)}finally{yo.transition=u}},[e]),r},useTransition:function(){var e=Fv(qs)[0];return[H0().current,e]},useMutableSource:x5,useOpaqueIdentifier:function(){return Fv(qs)[0]},unstable_isNewReconciler:!1},O1e={readContext:_o,useCallback:q5,useContext:_o,useEffect:X0,useImperativeHandle:S5,useLayoutEffect:b5,useMemo:A5,useReducer:zv,useRef:H0,useState:function(){return zv(qs)},useDebugValue:HI,useDeferredValue:function(e){var t=zv(qs),r=t[0],a=t[1];return X0(function(){var u=yo.transition;yo.transition=1;try{a(e)}finally{yo.transition=u}},[e]),r},useTransition:function(){var e=zv(qs)[0];return[H0().current,e]},useMutableSource:x5,useOpaqueIdentifier:function(){return zv(qs)[0]},unstable_isNewReconciler:!1},k1e=_h.ReactCurrentOwner,Qo=!1;function ma(e,t,r,a){t.child=e===null?g5(t,null,r,a):W0(t,e.child,r,a)}function Y3(e,t,r,a,u){r=r.render;var s=t.ref;return Ed(t,u),a=KI(e,t,r,a,s,u),e!==null&&!Qo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~u,xu(e,t,u)):(t.flags|=1,ma(e,t,a,u),t.child)}function Q3(e,t,r,a,u,s){if(e===null){var m=r.type;return typeof m=="function"&&!r2(m)&&m.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=m,E5(e,t,m,a,u,s)):(e=M0(r.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}return m=e.child,!(u&s)&&(u=m.memoizedProps,r=r.compare,r=r!==null?r:dg,r(u,a)&&e.ref===t.ref)?xu(e,t,s):(t.flags|=1,e=Jl(m,a),e.ref=t.ref,e.return=t,t.child=e)}function E5(e,t,r,a,u,s){if(e!==null&&dg(e.memoizedProps,a)&&e.ref===t.ref)if(Qo=!1,(s&u)!==0)e.flags&16384&&(Qo=!0);else return t.lanes=e.lanes,xu(e,t,s);return tI(e,t,r,a,s)}function ST(e,t,r){var a=t.pendingProps,u=a.children,s=e!==null?e.memoizedState:null;if(a.mode==="hidden"||a.mode==="unstable-defer-without-hiding"){if(!(t.mode&4))t.memoizedState={baseLanes:0},b0(t,r);else if(r&1073741824)t.memoizedState={baseLanes:0},b0(t,s!==null?s.baseLanes:r);else return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},b0(t,e),null;}else s!==null?(a=s.baseLanes|r,t.memoizedState=null):a=r,b0(t,a);return ma(e,t,u,r),t.child}function T5(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function tI(e,t,r,a,u){var s=ga(r)?mh:Pn.current;return s=Od(t,s),Ed(t,u),r=KI(e,t,r,a,s,u),e!==null&&!Qo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~u,xu(e,t,u)):(t.flags|=1,ma(e,t,r,u),t.child)}function eU(e,t,r,a,u){if(ga(r)){var s=!0;E0(t)}else s=!1;if(Ed(t,u),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),m5(t,r,a),JT(t,r,a,u),a=!0;else if(e===null){var m=t.stateNode,x=t.memoizedProps;m.props=x;var q=m.context,T=r.contextType;typeof T=="object"&&T!==null?T=_o(T):(T=ga(r)?mh:Pn.current,T=Od(t,T));var I=r.getDerivedStateFromProps,L=typeof I=="function"||typeof m.getSnapshotBeforeUpdate=="function";L||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==a||q!==T)&&W3(t,m,a,T),Rl=!1;var z=t.memoizedState;m.state=z,vg(t,a,m,u),q=t.memoizedState,x!==a||z!==q||va.current||Rl?(typeof I=="function"&&($0(t,r,I,a),q=t.memoizedState),(x=Rl||$3(t,r,x,a,z,q,T))?(L||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4)):(typeof m.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=a,t.memoizedState=q),m.props=a,m.state=q,m.context=T,a=x):(typeof m.componentDidMount=="function"&&(t.flags|=4),a=!1)}else{m=t.stateNode,d5(e,t),x=t.memoizedProps,T=t.type===t.elementType?x:Yo(t.type,x),m.props=T,L=t.pendingProps,z=m.context,q=r.contextType,typeof q=="object"&&q!==null?q=_o(q):(q=ga(r)?mh:Pn.current,q=Od(t,q));var Y=r.getDerivedStateFromProps;(I=typeof Y=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==L||z!==q)&&W3(t,m,a,q),Rl=!1,z=t.memoizedState,m.state=z,vg(t,a,m,u);var pe=t.memoizedState;x!==L||z!==pe||va.current||Rl?(typeof Y=="function"&&($0(t,r,Y,a),pe=t.memoizedState),(T=Rl||$3(t,r,T,a,z,pe,q))?(I||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(a,pe,q),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(a,pe,q)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&z===e.memoizedState||(t.flags|=256),t.memoizedProps=a,t.memoizedState=pe),m.props=a,m.state=pe,m.context=q,a=T):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&z===e.memoizedState||(t.flags|=256),a=!1)}return rI(e,t,r,a,s,u)}function rI(e,t,r,a,u,s){T5(e,t);var m=(t.flags&64)!==0;if(!a&&!m)return u&&N3(t,r,!1),xu(e,t,s);a=t.stateNode,k1e.current=t;var x=m&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&m?(t.child=W0(t,e.child,null,s),t.child=W0(t,null,x,s)):ma(e,t,x,s),t.memoizedState=a.state,u&&N3(t,r,!0),t.child}function tU(e){var t=e.stateNode;t.pendingContext?z3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&z3(e,t.context,!1),YT(e,t.containerInfo)}var x0={dehydrated:null,retryLane:0};function rU(e,t,r){var a=t.pendingProps,u=hi.current,s=!1,m;return(m=(t.flags&64)!==0)||(m=e!==null&&e.memoizedState===null?!1:(u&2)!==0),m?(s=!0,t.flags&=-65):e!==null&&e.memoizedState===null||a.fallback===void 0||a.unstable_avoidThisFallback===!0||(u|=1),fi(hi,u&1),e===null?(a.fallback!==void 0&&QT(t),e=a.children,u=a.fallback,s?(e=iU(t,e,u,r),t.child.memoizedState={baseLanes:r},t.memoizedState=x0,e):typeof a.unstable_expectedLoadTime=="number"?(e=iU(t,e,u,r),t.child.memoizedState={baseLanes:r},t.memoizedState=x0,t.lanes=33554432,e):(r=i2({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?s?(a=aU(e,t,a.children,a.fallback,r),s=t.child,u=e.child.memoizedState,s.memoizedState=u===null?{baseLanes:r}:{baseLanes:u.baseLanes|r},s.childLanes=e.childLanes&~r,t.memoizedState=x0,a):(r=nU(e,t,a.children,r),t.memoizedState=null,r):s?(a=aU(e,t,a.children,a.fallback,r),s=t.child,u=e.child.memoizedState,s.memoizedState=u===null?{baseLanes:r}:{baseLanes:u.baseLanes|r},s.childLanes=e.childLanes&~r,t.memoizedState=x0,a):(r=nU(e,t,a.children,r),t.memoizedState=null,r)}function iU(e,t,r,a){var u=e.mode,s=e.child;return t={mode:"hidden",children:t},!(u&2)&&s!==null?(s.childLanes=0,s.pendingProps=t):s=i2(t,u,0,null),r=Pd(r,u,a,null),s.return=e,r.return=e,s.sibling=r,e.child=s,r}function nU(e,t,r,a){var u=e.child;return e=u.sibling,r=Jl(u,{mode:"visible",children:r}),!(t.mode&2)&&(r.lanes=a),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function aU(e,t,r,a,u){var s=t.mode,m=e.child;e=m.sibling;var x={mode:"hidden",children:r};return!(s&2)&&t.child!==m?(r=t.child,r.childLanes=0,r.pendingProps=x,m=r.lastEffect,m!==null?(t.firstEffect=r.firstEffect,t.lastEffect=m,m.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Jl(m,x),e!==null?a=Jl(e,a):(a=Pd(a,s,u,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,a}function oU(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),f5(e.return,t)}function qT(e,t,r,a,u,s){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:u,lastEffect:s}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=a,m.tail=r,m.tailMode=u,m.lastEffect=s)}function sU(e,t,r){var a=t.pendingProps,u=a.revealOrder,s=a.tail;if(ma(e,t,a.children,r),a=hi.current,a&2)a=a&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oU(e,r);else if(e.tag===19)oU(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(fi(hi,a),!(t.mode&2))t.memoizedState=null;else switch(u){case"forwards":for(r=t.child,u=null;r!==null;)e=r.alternate,e!==null&&G0(e)===null&&(u=r),r=r.sibling;r=u,r===null?(u=t.child,t.child=null):(u=r.sibling,r.sibling=null),qT(t,!1,u,r,s,t.lastEffect);break;case"backwards":for(r=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&G0(e)===null){t.child=u;break}e=u.sibling,u.sibling=r,r=u,u=e}qT(t,!0,r,null,s,t.lastEffect);break;case"together":qT(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null;}return t.child}function xu(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Sg|=t.lanes,r&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(Ze(153));if(t.child!==null){for(e=t.child,r=Jl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Jl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var I5,iI,C5,P5;I5=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};iI=function(){};C5=function(e,t,r,a){var u=e.memoizedProps;if(u!==a){e=t.stateNode,fh(Es.current);var s=null;switch(r){case"input":u=PT(e,u),a=PT(e,a),s=[];break;case"option":u=kT(e,u),a=kT(e,a),s=[];break;case"select":u=Yr({},u,{value:void 0}),a=Yr({},a,{value:void 0}),s=[];break;case"textarea":u=RT(e,u),a=RT(e,a),s=[];break;default:typeof u.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=z0);}FT(r,a);var m;r=null;for(T in u)if(!a.hasOwnProperty(T)&&u.hasOwnProperty(T)&&u[T]!=null)if(T==="style"){var x=u[T];for(m in x)x.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(og.hasOwnProperty(T)?s||(s=[]):(s=s||[]).push(T,null));for(T in a){var q=a[T];if(x=u!=null?u[T]:void 0,a.hasOwnProperty(T)&&q!==x&&(q!=null||x!=null))if(T==="style"){if(x){for(m in x)!x.hasOwnProperty(m)||q&&q.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in q)q.hasOwnProperty(m)&&x[m]!==q[m]&&(r||(r={}),r[m]=q[m])}else r||(s||(s=[]),s.push(T,r)),r=q;}else T==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,x=x?x.__html:void 0,q!=null&&x!==q&&(s=s||[]).push(T,q)):T==="children"?typeof q!="string"&&typeof q!="number"||(s=s||[]).push(T,""+q):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(og.hasOwnProperty(T)?(q!=null&&T==="onScroll"&&$r("scroll",e),s||x===q||(s=[])):typeof q=="object"&&q!==null&&q.$$typeof===SI?q.toString():(s=s||[]).push(T,q))}r&&(s=s||[]).push("style",r);var T=s;(t.updateQueue=T)&&(t.flags|=4)}};P5=function(e,t,r,a){r!==a&&(t.flags|=4)};function Bv(e,t){if(!Ts)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null;}}function R1e(e,t,r){var a=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ga(t.type)&&B0(),null;case 3:return Rd(),Wr(va),Wr(Pn),WI(),a=t.stateNode,a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(_0(t)?t.flags|=4:a.hydrate||(t.flags|=256)),iI(t),null;case 5:$I(t);var u=fh(yg.current);if(r=t.type,e!==null&&t.stateNode!=null)C5(e,t,r,a,u),e.ref!==t.ref&&(t.flags|=128);else{if(!a){if(t.stateNode===null)throw Error(Ze(166));return null}if(e=fh(Es.current),_0(t)){a=t.stateNode,r=t.type;var s=t.memoizedProps;switch(a[Fl]=t,a[N0]=s,r){case"dialog":$r("cancel",a),$r("close",a);break;case"iframe":case"object":case"embed":$r("load",a);break;case"video":case"audio":for(e=0;e<Wv.length;e++)$r(Wv[e],a);break;case"source":$r("error",a);break;case"img":case"image":case"link":$r("error",a),$r("load",a);break;case"details":$r("toggle",a);break;case"input":l3(a,s),$r("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!s.multiple},$r("invalid",a);break;case"textarea":h3(a,s),$r("invalid",a);}FT(r,s),e=null;for(var m in s)s.hasOwnProperty(m)&&(u=s[m],m==="children"?typeof u=="string"?a.textContent!==u&&(e=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(e=["children",""+u]):og.hasOwnProperty(m)&&u!=null&&m==="onScroll"&&$r("scroll",a));switch(r){case"input":c0(a),c3(a,s,!0);break;case"textarea":c0(a),f3(a);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(a.onclick=z0);}a=e,t.updateQueue=a,a!==null&&(t.flags|=4)}else{switch(m=u.nodeType===9?u:u.ownerDocument,e===DT.html&&(e=SU(r)),e===DT.html?r==="script"?(e=m.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=m.createElement(r,{is:a.is}):(e=m.createElement(r),r==="select"&&(m=e,a.multiple?m.multiple=!0:a.size&&(m.size=a.size))):e=m.createElementNS(e,r),e[Fl]=t,e[N0]=a,I5(e,t,!1,!1),t.stateNode=e,m=zT(r,a),r){case"dialog":$r("cancel",e),$r("close",e),u=a;break;case"iframe":case"object":case"embed":$r("load",e),u=a;break;case"video":case"audio":for(u=0;u<Wv.length;u++)$r(Wv[u],e);u=a;break;case"source":$r("error",e),u=a;break;case"img":case"image":case"link":$r("error",e),$r("load",e),u=a;break;case"details":$r("toggle",e),u=a;break;case"input":l3(e,a),u=PT(e,a),$r("invalid",e);break;case"option":u=kT(e,a);break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=Yr({},a,{value:void 0}),$r("invalid",e);break;case"textarea":h3(e,a),u=RT(e,a),$r("invalid",e);break;default:u=a;}FT(r,u);var x=u;for(s in x)if(x.hasOwnProperty(s)){var q=x[s];s==="style"?EU(e,q):s==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&qU(e,q)):s==="children"?typeof q=="string"?(r!=="textarea"||q!=="")&&sg(e,q):typeof q=="number"&&sg(e,""+q):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(og.hasOwnProperty(s)?q!=null&&s==="onScroll"&&$r("scroll",e):q!=null&&gI(e,s,q,m))}switch(r){case"input":c0(e),c3(e,a,!1);break;case"textarea":c0(e),f3(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Kl(a.value));break;case"select":e.multiple=!!a.multiple,s=a.value,s!=null?wd(e,!!a.multiple,s,!1):a.defaultValue!=null&&wd(e,!!a.multiple,a.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=z0);}i5(r,a)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)P5(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ze(166));r=fh(yg.current),fh(Es.current),_0(t)?(a=t.stateNode,r=t.memoizedProps,a[Fl]=t,a.nodeValue!==r&&(t.flags|=4)):(a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Fl]=t,t.stateNode=a)}return null;case 13:return Wr(hi),a=t.memoizedState,t.flags&64?(t.lanes=r,t):(a=a!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&_0(t):r=e.memoizedState!==null,a&&!r&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||hi.current&1?sn===0&&(sn=3):((sn===0||sn===3)&&(sn=4),Kn===null||!(Sg&134217727)&&!(zd&134217727)||Id(Kn,Cn))),(a||r)&&(t.flags|=4),null);case 4:return Rd(),iI(t),e===null&&e5(t.stateNode.containerInfo),null;case 10:return jI(t),null;case 17:return ga(t.type)&&B0(),null;case 19:if(Wr(hi),a=t.memoizedState,a===null)return null;if(s=(t.flags&64)!==0,m=a.rendering,m===null){if(s)Bv(a,!1);else{if(sn!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(m=G0(e),m!==null){for(t.flags|=64,Bv(a,!1),s=m.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),a.lastEffect===null&&(t.firstEffect=null),t.lastEffect=a.lastEffect,a=r,r=t.child;r!==null;)s=r,e=a,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,m=s.alternate,m===null?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=m.childLanes,s.lanes=m.lanes,s.child=m.child,s.memoizedProps=m.memoizedProps,s.memoizedState=m.memoizedState,s.updateQueue=m.updateQueue,s.type=m.type,e=m.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fi(hi,hi.current&1|2),t.child}e=e.sibling}a.tail!==null&&In()>lI&&(t.flags|=64,s=!0,Bv(a,!1),t.lanes=33554432)}}else{if(!s)if(e=G0(m),e!==null){if(t.flags|=64,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Bv(a,!0),a.tail===null&&a.tailMode==="hidden"&&!m.alternate&&!Ts)return t=t.lastEffect=a.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*In()-a.renderingStartTime>lI&&r!==1073741824&&(t.flags|=64,s=!0,Bv(a,!1),t.lanes=33554432);a.isBackwards?(m.sibling=t.child,t.child=m):(r=a.last,r!==null?r.sibling=m:t.child=m,a.last=m)}return a.tail!==null?(r=a.tail,a.rendering=r,a.tail=r.sibling,a.lastEffect=t.lastEffect,a.renderingStartTime=In(),r.sibling=null,t=hi.current,fi(hi,s?t&1|2:t&1),r):null;case 23:case 24:return t2(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&a.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null;}throw Error(Ze(156,t.tag))}function D1e(e){switch(e.tag){case 1:ga(e.type)&&B0();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Rd(),Wr(va),Wr(Pn),WI(),t=e.flags,t&64)throw Error(Ze(285));return e.flags=t&-4097|64,e;case 5:return $I(e),null;case 13:return Wr(hi),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Wr(hi),null;case 4:return Rd(),null;case 10:return jI(e),null;case 23:case 24:return t2(),null;default:return null;}}function JI(e,t){try{var r="",a=t;do r+=mbe(a),a=a.return;while(a);var u=r}catch(s){u=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:u}}function nI(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var L1e=typeof WeakMap=="function"?WeakMap:Map;function M5(e,t,r){r=jl(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Q0||(Q0=!0,cI=a),nI(e,t)},r}function O5(e,t,r){r=jl(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var u=t.value;r.payload=function(){return nI(e,t),a(u)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){typeof a!="function"&&(As===null?As=new Set([this]):As.add(this),nI(e,t));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}var F1e=typeof WeakSet=="function"?WeakSet:Set;function uU(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Gl(e,r)}else t.current=null}function z1e(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,a=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Yo(t.type,r),a),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&zI(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(Ze(163))}function N1e(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var a=e.create;e.destroy=a()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var u=e;a=u.next,u=u.tag,u&4&&u&1&&(U5(r,e),K1e(r,e)),e=a}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(a=r.elementType===r.type?t.memoizedProps:Yo(r.type,t.memoizedProps),e.componentDidUpdate(a,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&V3(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode;}V3(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&i5(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&LU(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(Ze(163))}function lU(e,t){for(var r=e;;){if(r.tag===5){var a=r.stateNode;if(t)a=a.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{a=r.stateNode;var u=r.memoizedProps.style;u=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=AU("display",u)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function cU(e,t){if(ph&&typeof ph.onCommitFiberUnmount=="function")try{ph.onCommitFiberUnmount(NI,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var a=r,u=a.destroy;if(a=a.tag,u!==void 0)if(a&4)U5(t,r);else{a=t;try{u()}catch(s){Gl(a,s)}}r=r.next}while(r!==e)}break;case 1:if(uU(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Gl(t,s)}break;case 5:uU(t);break;case 4:k5(e,t);}}function hU(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function fU(e){return e.tag===5||e.tag===3||e.tag===4}function dU(e){e:{for(var t=e.return;t!==null;){if(fU(t))break e;t=t.return}throw Error(Ze(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var a=!1;break;case 3:t=t.containerInfo,a=!0;break;case 4:t=t.containerInfo,a=!0;break;default:throw Error(Ze(161));}r.flags&16&&(sg(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||fU(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}a?aI(e,r,t):oI(e,r,t)}function aI(e,t,r){var a=e.tag,u=a===5||a===6;if(u)e=u?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=z0));else if(a!==4&&(e=e.child,e!==null))for(aI(e,t,r),e=e.sibling;e!==null;)aI(e,t,r),e=e.sibling}function oI(e,t,r){var a=e.tag,u=a===5||a===6;if(u)e=u?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(oI(e,t,r),e=e.sibling;e!==null;)oI(e,t,r),e=e.sibling}function k5(e,t){for(var r=t,a=!1,u,s;;){if(!a){a=r.return;e:for(;;){if(a===null)throw Error(Ze(160));switch(u=a.stateNode,a.tag){case 5:s=!1;break e;case 3:u=u.containerInfo,s=!0;break e;case 4:u=u.containerInfo,s=!0;break e;}a=a.return}a=!0}if(r.tag===5||r.tag===6){e:for(var m=e,x=r,q=x;;)if(cU(m,q),q.child!==null&&q.tag!==4)q.child.return=q,q=q.child;else{if(q===x)break e;for(;q.sibling===null;){if(q.return===null||q.return===x)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}s?(m=u,x=r.stateNode,m.nodeType===8?m.parentNode.removeChild(x):m.removeChild(x)):u.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){u=r.stateNode.containerInfo,s=!0,r.child.return=r,r=r.child;continue}}else if(cU(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(a=!1)}r.sibling.return=r.return,r=r.sibling}}function AT(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do(a.tag&3)===3&&(e=a.destroy,a.destroy=void 0,e!==void 0&&e()),a=a.next;while(a!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){a=t.memoizedProps;var u=e!==null?e.memoizedProps:a;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,s!==null){for(r[N0]=a,e==="input"&&a.type==="radio"&&a.name!=null&&bU(r,a),zT(e,u),t=zT(e,a),u=0;u<s.length;u+=2){var m=s[u],x=s[u+1];m==="style"?EU(r,x):m==="dangerouslySetInnerHTML"?qU(r,x):m==="children"?sg(r,x):gI(r,m,x,t)}switch(e){case"input":MT(r,a);break;case"textarea":wU(r,a);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!a.multiple,s=a.value,s!=null?wd(r,!!a.multiple,s,!1):e!==!!a.multiple&&(a.defaultValue!=null?wd(r,!!a.multiple,a.defaultValue,!0):wd(r,!!a.multiple,a.multiple?[]:"",!1));}}}return;case 6:if(t.stateNode===null)throw Error(Ze(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,LU(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(e2=In(),lU(t.child,!0)),pU(t);return;case 19:pU(t);return;case 17:return;case 23:case 24:lU(t,t.memoizedState!==null);return;}throw Error(Ze(163))}function pU(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new F1e),t.forEach(function(a){var u=X1e.bind(null,e,a);r.has(a)||(r.add(a),a.then(u,u))})}}function B1e(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var U1e=Math.ceil,Y0=_h.ReactCurrentDispatcher,YI=_h.ReactCurrentOwner,Ut=0,Kn=null,Li=null,Cn=0,gh=0,sI=Yl(0),sn=0,fb=null,Fd=0,Sg=0,zd=0,QI=0,uI=null,e2=0,lI=1/0;function Nd(){lI=In()+500}var gt=null,Q0=!1,cI=null,As=null,Xl=!1,ig=null,Gv=90,hI=[],fI=[],bu=null,ng=0,dI=null,I0=-1,yu=0,C0=0,ag=null,P0=!1;function Za(){return Ut&48?In():I0!==-1?I0:I0=In()}function $l(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return kd()===99?1:2;if(yu===0&&(yu=Fd),I1e.transition!==0){C0!==0&&(C0=uI!==null?uI.pendingLanes:0),e=yu;var t=4186112&~C0;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=kd(),Ut&4&&e===98?e=L0(12,yu):(e=Mbe(e),e=L0(e,yu)),e}function Wl(e,t,r){if(50<ng)throw ng=0,dI=null,Error(Ze(185));if(e=db(e,t),e===null)return null;ab(e,t,r),e===Kn&&(zd|=t,sn===4&&Id(e,Cn));var a=kd();t===1?Ut&8&&!(Ut&48)?pI(e):(xo(e,r),Ut===0&&(Nd(),Is())):(!(Ut&4)||a!==98&&a!==99||(bu===null?bu=new Set([e]):bu.add(e)),xo(e,r)),uI=e}function db(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function xo(e,t){for(var r=e.callbackNode,a=e.suspendedLanes,u=e.pingedLanes,s=e.expirationTimes,m=e.pendingLanes;0<m;){var x=31-Zl(m),q=1<<x,T=s[x];if(T===-1){if(!(q&a)||q&u){T=t,dd(q);var I=Lr;s[x]=10<=I?T+250:6<=I?T+5e3:-1}}else T<=t&&(e.expiredLanes|=q);m&=~q}if(a=hg(e,e===Kn?Cn:0),t=Lr,a===0)r!==null&&(r!==xT&&HT(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==xT&&HT(r)}t===15?(r=pI.bind(null,e),gu===null?(gu=[r],T0=BI(cb,h5)):gu.push(r),r=xT):t===14?r=mg(99,pI.bind(null,e)):(r=Obe(t),r=mg(r,R5.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function R5(e){if(I0=-1,C0=yu=0,Ut&48)throw Error(Ze(327));var t=e.callbackNode;if(Ql()&&e.callbackNode!==t)return null;var r=hg(e,e===Kn?Cn:0);if(r===0)return null;var a=r,u=Ut;Ut|=16;var s=z5();(Kn!==e||Cn!==a)&&(Nd(),Cd(e,a));do try{$1e();break}catch(x){F5(e,x)}while(!0);if(UI(),Y0.current=s,Ut=u,Li!==null?a=0:(Kn=null,Cn=0,a=sn),Fd&zd)Cd(e,0);else if(a!==0){if(a===2&&(Ut|=64,e.hydrate&&(e.hydrate=!1,zI(e.containerInfo)),r=VU(e),r!==0&&(a=Kv(e,r))),a===1)throw t=fb,Cd(e,0),Id(e,r),xo(e,In()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,a){case 0:case 1:throw Error(Ze(345));case 2:uh(e);break;case 3:if(Id(e,r),(r&62914560)===r&&(a=e2+500-In(),10<a)){if(hg(e,0)!==0)break;if(u=e.suspendedLanes,(u&r)!==r){Za(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=D3(uh.bind(null,e),a);break}uh(e);break;case 4:if(Id(e,r),(r&4186112)===r)break;for(a=e.eventTimes,u=-1;0<r;){var m=31-Zl(r);s=1<<m,m=a[m],m>u&&(u=m),r&=~s}if(r=u,r=In()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*U1e(r/1960))-r,10<r){e.timeoutHandle=D3(uh.bind(null,e),r);break}uh(e);break;case 5:uh(e);break;default:throw Error(Ze(329));}}return xo(e,In()),e.callbackNode===t?R5.bind(null,e):null}function Id(e,t){for(t&=~QI,t&=~zd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zl(t),a=1<<r;e[r]=-1,t&=~a}}function pI(e){if(Ut&48)throw Error(Ze(327));if(Ql(),e===Kn&&e.expiredLanes&Cn){var t=Cn,r=Kv(e,t);Fd&zd&&(t=hg(e,t),r=Kv(e,t))}else t=hg(e,0),r=Kv(e,t);if(e.tag!==0&&r===2&&(Ut|=64,e.hydrate&&(e.hydrate=!1,zI(e.containerInfo)),t=VU(e),t!==0&&(r=Kv(e,t))),r===1)throw r=fb,Cd(e,0),Id(e,t),xo(e,In()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,uh(e),xo(e,In()),null}function j1e(){if(bu!==null){var e=bu;bu=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,xo(t,In())})}Is()}function D5(e,t){var r=Ut;Ut|=1;try{return e(t)}finally{Ut=r,Ut===0&&(Nd(),Is())}}function L5(e,t){var r=Ut;Ut&=-2,Ut|=8;try{return e(t)}finally{Ut=r,Ut===0&&(Nd(),Is())}}function b0(e,t){fi(sI,gh),gh|=t,Fd|=t}function t2(){gh=sI.current,Wr(sI)}function Cd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,w1e(r)),Li!==null)for(r=Li.return;r!==null;){var a=r;switch(a.tag){case 1:a=a.type.childContextTypes,a!=null&&B0();break;case 3:Rd(),Wr(va),Wr(Pn),WI();break;case 5:$I(a);break;case 4:Rd();break;case 13:Wr(hi);break;case 19:Wr(hi);break;case 10:jI(a);break;case 23:case 24:t2();}r=r.return}Kn=e,Li=Jl(e.current,null),Cn=gh=Fd=t,sn=0,fb=null,QI=zd=Sg=0}function F5(e,t){do{var r=Li;try{if(UI(),tg.current=J0,K0){for(var a=_i.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}K0=!1}if(_g=0,on=Tn=_i=null,rg=!1,YI.current=null,r===null||r.return===null){sn=1,fb=t,Li=null;break}e:{var s=e,m=r.return,x=r,q=t;if(t=Cn,x.flags|=2048,x.firstEffect=x.lastEffect=null,q!==null&&typeof q=="object"&&typeof q.then=="function"){var T=q;if(!(x.mode&2)){var I=x.alternate;I?(x.updateQueue=I.updateQueue,x.memoizedState=I.memoizedState,x.lanes=I.lanes):(x.updateQueue=null,x.memoizedState=null)}var L=(hi.current&1)!==0,z=m;do{var Y;if(Y=z.tag===13){var pe=z.memoizedState;if(pe!==null)Y=pe.dehydrated!==null;else{var de=z.memoizedProps;Y=de.fallback===void 0?!1:de.unstable_avoidThisFallback!==!0?!0:!L}}if(Y){var Z=z.updateQueue;if(Z===null){var H=new Set;H.add(T),z.updateQueue=H}else Z.add(T);if(!(z.mode&2)){if(z.flags|=64,x.flags|=16384,x.flags&=-2981,x.tag===1)if(x.alternate===null)x.tag=17;else{var J=jl(-1,1);J.tag=2,Vl(x,J)}x.lanes|=1;break e}q=void 0,x=t;var ve=s.pingCache;if(ve===null?(ve=s.pingCache=new L1e,q=new Set,ve.set(T,q)):(q=ve.get(T),q===void 0&&(q=new Set,ve.set(T,q))),!q.has(x)){q.add(x);var be=H1e.bind(null,s,T,x);T.then(be,be)}z.flags|=4096,z.lanes=t;break e}z=z.return}while(z!==null);q=Error((bd(x.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}sn!==5&&(sn=2),q=JI(q,x),z=m;do{switch(z.tag){case 3:s=q,z.flags|=4096,t&=-t,z.lanes|=t;var Le=M5(z,s,t);j3(z,Le);break e;case 1:s=q;var Pe=z.type,Ge=z.stateNode;if(!(z.flags&64)&&(typeof Pe.getDerivedStateFromError=="function"||Ge!==null&&typeof Ge.componentDidCatch=="function"&&(As===null||!As.has(Ge)))){z.flags|=4096,t&=-t,z.lanes|=t;var pt=O5(z,s,t);j3(z,pt);break e}}z=z.return}while(z!==null)}B5(r)}catch(Ve){t=Ve,Li===r&&r!==null&&(Li=r=r.return);continue}break}while(!0)}function z5(){var e=Y0.current;return Y0.current=J0,e===null?J0:e}function Kv(e,t){var r=Ut;Ut|=16;var a=z5();Kn===e&&Cn===t||Cd(e,t);do try{V1e();break}catch(u){F5(e,u)}while(!0);if(UI(),Ut=r,Y0.current=a,Li!==null)throw Error(Ze(261));return Kn=null,Cn=0,sn}function V1e(){for(;Li!==null;)N5(Li)}function $1e(){for(;Li!==null&&!A1e();)N5(Li)}function N5(e){var t=j5(e.alternate,e,gh);e.memoizedProps=e.pendingProps,t===null?B5(e):Li=t,YI.current=null}function B5(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&2048){if(r=D1e(t),r!==null){r.flags&=2047,Li=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(r=R1e(r,t,gh),r!==null){Li=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||gh&1073741824||!(r.mode&4)){for(var a=0,u=r.child;u!==null;)a|=u.lanes|u.childLanes,u=u.sibling;r.childLanes=a}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){Li=t;return}Li=t=e}while(t!==null);sn===0&&(sn=5)}function uh(e){var t=kd();return vh(99,W1e.bind(null,e,t)),null}function W1e(e,t){do Ql();while(ig!==null);if(Ut&48)throw Error(Ze(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ze(177));e.callbackNode=null;var a=r.lanes|r.childLanes,u=a,s=e.pendingLanes&~u;e.pendingLanes=u,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=u,e.mutableReadLanes&=u,e.entangledLanes&=u,u=e.entanglements;for(var m=e.eventTimes,x=e.expirationTimes;0<s;){var q=31-Zl(s),T=1<<q;u[q]=0,m[q]=-1,x[q]=-1,s&=~T}if(bu!==null&&!(a&24)&&bu.has(e)&&bu.delete(e),e===Kn&&(Li=Kn=null,Cn=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,a=r.firstEffect):a=r:a=r.firstEffect,a!==null){if(u=Ut,Ut|=32,YI.current=null,gT=S0,m=C3(),$T(m)){if("selectionStart"in m)x={start:m.selectionStart,end:m.selectionEnd};else e:if(x=(x=m.ownerDocument)&&x.defaultView||window,(T=x.getSelection&&x.getSelection())&&T.rangeCount!==0){x=T.anchorNode,s=T.anchorOffset,q=T.focusNode,T=T.focusOffset;try{x.nodeType,q.nodeType}catch(Ve){x=null;break e}var I=0,L=-1,z=-1,Y=0,pe=0,de=m,Z=null;t:for(;;){for(var H;de!==x||s!==0&&de.nodeType!==3||(L=I+s),de!==q||T!==0&&de.nodeType!==3||(z=I+T),de.nodeType===3&&(I+=de.nodeValue.length),(H=de.firstChild)!==null;)Z=de,de=H;for(;;){if(de===m)break t;if(Z===x&&++Y===s&&(L=I),Z===q&&++pe===T&&(z=I),(H=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=H}x=L===-1||z===-1?null:{start:L,end:z}}else x=null;x=x||{start:0,end:0}}else x=null;yT={focusedElem:m,selectionRange:x},S0=!1,ag=null,P0=!1,gt=a;do try{G1e()}catch(Ve){if(gt===null)throw Error(Ze(330));Gl(gt,Ve),gt=gt.nextEffect}while(gt!==null);ag=null,gt=a;do try{for(m=e;gt!==null;){var J=gt.flags;if(J&16&&sg(gt.stateNode,""),J&128){var ve=gt.alternate;if(ve!==null){var be=ve.ref;be!==null&&(typeof be=="function"?be(null):be.current=null)}}switch(J&1038){case 2:dU(gt),gt.flags&=-3;break;case 6:dU(gt),gt.flags&=-3,AT(gt.alternate,gt);break;case 1024:gt.flags&=-1025;break;case 1028:gt.flags&=-1025,AT(gt.alternate,gt);break;case 4:AT(gt.alternate,gt);break;case 8:x=gt,k5(m,x);var Le=x.alternate;hU(x),Le!==null&&hU(Le);}gt=gt.nextEffect}}catch(Ve){if(gt===null)throw Error(Ze(330));Gl(gt,Ve),gt=gt.nextEffect}while(gt!==null);if(be=yT,ve=C3(),J=be.focusedElem,m=be.selectionRange,ve!==J&&J&&J.ownerDocument&&JU(J.ownerDocument.documentElement,J)){for(m!==null&&$T(J)&&(ve=m.start,be=m.end,be===void 0&&(be=ve),("selectionStart"in J)?(J.selectionStart=ve,J.selectionEnd=Math.min(be,J.value.length)):(be=(ve=J.ownerDocument||document)&&ve.defaultView||window,be.getSelection&&(be=be.getSelection(),x=J.textContent.length,Le=Math.min(m.start,x),m=m.end===void 0?Le:Math.min(m.end,x),!be.extend&&Le>m&&(x=m,m=Le,Le=x),x=I3(J,Le),s=I3(J,m),x&&s&&(be.rangeCount!==1||be.anchorNode!==x.node||be.anchorOffset!==x.offset||be.focusNode!==s.node||be.focusOffset!==s.offset)&&(ve=ve.createRange(),ve.setStart(x.node,x.offset),be.removeAllRanges(),Le>m?(be.addRange(ve),be.extend(s.node,s.offset)):(ve.setEnd(s.node,s.offset),be.addRange(ve)))))),ve=[],be=J;be=be.parentNode;)be.nodeType===1&&ve.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<ve.length;J++)be=ve[J],be.element.scrollLeft=be.left,be.element.scrollTop=be.top}S0=!!gT,yT=gT=null,e.current=r,gt=a;do try{for(J=e;gt!==null;){var Pe=gt.flags;if(Pe&36&&N1e(J,gt.alternate,gt),Pe&128){ve=void 0;var Ge=gt.ref;if(Ge!==null){var pt=gt.stateNode;switch(gt.tag){case 5:ve=pt;break;default:ve=pt;}typeof Ge=="function"?Ge(ve):Ge.current=ve}}gt=gt.nextEffect}}catch(Ve){if(gt===null)throw Error(Ze(330));Gl(gt,Ve),gt=gt.nextEffect}while(gt!==null);gt=null,T1e(),Ut=u}else e.current=r;if(Xl)Xl=!1,ig=e,Gv=t;else for(gt=a;gt!==null;)t=gt.nextEffect,gt.nextEffect=null,gt.flags&8&&(Pe=gt,Pe.sibling=null,Pe.stateNode=null),gt=t;if(a=e.pendingLanes,a===0&&(As=null),a===1?e===dI?ng++:(ng=0,dI=e):ng=0,r=r.stateNode,ph&&typeof ph.onCommitFiberRoot=="function")try{ph.onCommitFiberRoot(NI,r,void 0,(r.current.flags&64)===64)}catch(Ve){}if(xo(e,In()),Q0)throw Q0=!1,e=cI,cI=null,e;return Ut&8||Is(),null}function G1e(){for(;gt!==null;){var e=gt.alternate;P0||ag===null||(gt.flags&8?m3(gt,ag)&&(P0=!0):gt.tag===13&&B1e(e,gt)&&m3(gt,ag)&&(P0=!0));var t=gt.flags;t&256&&z1e(e,gt),!(t&512)||Xl||(Xl=!0,mg(97,function(){return Ql(),null})),gt=gt.nextEffect}}function Ql(){if(Gv!==90){var e=97<Gv?97:Gv;return Gv=90,vh(e,Z1e)}return!1}function K1e(e,t){hI.push(t,e),Xl||(Xl=!0,mg(97,function(){return Ql(),null}))}function U5(e,t){fI.push(t,e),Xl||(Xl=!0,mg(97,function(){return Ql(),null}))}function Z1e(){if(ig===null)return!1;var e=ig;if(ig=null,Ut&48)throw Error(Ze(331));var t=Ut;Ut|=32;var r=fI;fI=[];for(var a=0;a<r.length;a+=2){var u=r[a],s=r[a+1],m=u.destroy;if(u.destroy=void 0,typeof m=="function")try{m()}catch(q){if(s===null)throw Error(Ze(330));Gl(s,q)}}for(r=hI,hI=[],a=0;a<r.length;a+=2){u=r[a],s=r[a+1];try{var x=u.create;u.destroy=x()}catch(q){if(s===null)throw Error(Ze(330));Gl(s,q)}}for(x=e.current.firstEffect;x!==null;)e=x.nextEffect,x.nextEffect=null,x.flags&8&&(x.sibling=null,x.stateNode=null),x=e;return Ut=t,Is(),!0}function mU(e,t,r){t=JI(r,t),t=M5(e,t,1),Vl(e,t),t=Za(),e=db(e,1),e!==null&&(ab(e,1,t),xo(e,t))}function Gl(e,t){if(e.tag===3)mU(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){mU(r,e,t);break}else if(r.tag===1){var a=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(As===null||!As.has(a))){e=JI(t,e);var u=O5(r,e,1);if(Vl(r,u),u=Za(),r=db(r,1),r!==null)ab(r,1,u),xo(r,u);else if(typeof a.componentDidCatch=="function"&&(As===null||!As.has(a)))try{a.componentDidCatch(t,e)}catch(s){}break}}r=r.return}}function H1e(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=Za(),e.pingedLanes|=e.suspendedLanes&r,Kn===e&&(Cn&r)===r&&(sn===4||sn===3&&(Cn&62914560)===Cn&&500>In()-e2?Cd(e,0):QI|=r),xo(e,t)}function X1e(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(yu===0&&(yu=Fd),t=pd(62914560&~yu),t===0&&(t=4194304)):t=kd()===99?1:2:t=1),r=Za(),e=db(e,t),e!==null&&(ab(e,t,r),xo(e,r))}var j5;j5=function(e,t,r){var a=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||va.current)Qo=!0;else if(r&a)Qo=!!(e.flags&16384);else{switch(Qo=!1,t.tag){case 3:tU(t),wT();break;case 5:G3(t);break;case 1:ga(t.type)&&E0(t);break;case 4:YT(t,t.stateNode.containerInfo);break;case 10:a=t.memoizedProps.value;var u=t.type._context;fi(U0,u._currentValue),u._currentValue=a;break;case 13:if(t.memoizedState!==null)return r&t.child.childLanes?rU(e,t,r):(fi(hi,hi.current&1),t=xu(e,t,r),t!==null?t.sibling:null);fi(hi,hi.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&64){if(a)return sU(e,t,r);t.flags|=64}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),fi(hi,hi.current),a)break;return null;case 23:case 24:return t.lanes=0,ST(e,t,r);}return xu(e,t,r)}}else Qo=!1;switch(t.lanes=0,t.tag){case 2:if(a=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,u=Od(t,Pn.current),Ed(t,r),u=KI(null,t,a,e,u,r),t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ga(a)){var s=!0;E0(t)}else s=!1;t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,VI(t);var m=a.getDerivedStateFromProps;typeof m=="function"&&$0(t,a,m,e),u.updater=hb,t.stateNode=u,u._reactInternals=t,JT(t,a,e,r),t=rI(null,t,a,!0,s,r)}else t.tag=0,ma(null,t,u,r),t=t.child;return t;case 16:u=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,s=u._init,u=s(u._payload),t.type=u,s=t.tag=Y1e(u),e=Yo(u,e),s){case 0:t=tI(null,t,u,e,r);break e;case 1:t=eU(null,t,u,e,r);break e;case 11:t=Y3(null,t,u,e,r);break e;case 14:t=Q3(null,t,u,Yo(u.type,e),a,r);break e;}throw Error(Ze(306,u,""))}return t;case 0:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Yo(a,u),tI(e,t,a,u,r);case 1:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Yo(a,u),eU(e,t,a,u,r);case 3:if(tU(t),a=t.updateQueue,e===null||a===null)throw Error(Ze(282));if(a=t.pendingProps,u=t.memoizedState,u=u!==null?u.element:null,d5(e,t),vg(t,a,null,r),a=t.memoizedState.element,a===u)wT(),t=xu(e,t,r);else{if(u=t.stateNode,(s=u.hydrate)&&(zl=Ad(t.stateNode.containerInfo.firstChild),_u=t,s=Ts=!0),s){if(e=u.mutableSourceEagerHydrationData,e!=null)for(u=0;u<e.length;u+=2)s=e[u],s._workInProgressVersionPrimary=e[u+1],Td.push(s);for(r=g5(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else ma(e,t,a,r),wT();t=t.child}return t;case 5:return G3(t),e===null&&QT(t),a=t.type,u=t.pendingProps,s=e!==null?e.memoizedProps:null,m=u.children,KT(a,u)?m=null:s!==null&&KT(a,s)&&(t.flags|=16),T5(e,t),ma(e,t,m,r),t.child;case 6:return e===null&&QT(t),null;case 13:return rU(e,t,r);case 4:return YT(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=W0(t,null,a,r):ma(e,t,a,r),t.child;case 11:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Yo(a,u),Y3(e,t,a,u,r);case 7:return ma(e,t,t.pendingProps,r),t.child;case 8:return ma(e,t,t.pendingProps.children,r),t.child;case 12:return ma(e,t,t.pendingProps.children,r),t.child;case 10:e:{a=t.type._context,u=t.pendingProps,m=t.memoizedProps,s=u.value;var x=t.type._context;if(fi(U0,x._currentValue),x._currentValue=s,m!==null)if(x=m.value,s=vo(x,s)?0:(typeof a._calculateChangedBits=="function"?a._calculateChangedBits(x,s):1073741823)|0,s===0){if(m.children===u.children&&!va.current){t=xu(e,t,r);break e}}else for(x=t.child,x!==null&&(x.return=t);x!==null;){var q=x.dependencies;if(q!==null){m=x.child;for(var T=q.firstContext;T!==null;){if(T.context===a&&T.observedBits&s){x.tag===1&&(T=jl(-1,r&-r),T.tag=2,Vl(x,T)),x.lanes|=r,T=x.alternate,T!==null&&(T.lanes|=r),f5(x.return,r),q.lanes|=r;break}T=T.next}}else m=x.tag===10&&x.type===t.type?null:x.child;if(m!==null)m.return=x;else for(m=x;m!==null;){if(m===t){m=null;break}if(x=m.sibling,x!==null){x.return=m.return,m=x;break}m=m.return}x=m}ma(e,t,u.children,r),t=t.child}return t;case 9:return u=t.type,s=t.pendingProps,a=s.children,Ed(t,r),u=_o(u,s.unstable_observedBits),a=a(u),t.flags|=1,ma(e,t,a,r),t.child;case 14:return u=t.type,s=Yo(u,t.pendingProps),s=Yo(u.type,s),Q3(e,t,u,s,a,r);case 15:return E5(e,t,t.type,t.pendingProps,a,r);case 17:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Yo(a,u),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ga(a)?(e=!0,E0(t)):e=!1,Ed(t,r),m5(t,a,u),JT(t,a,u,r),rI(null,t,a,!0,e,r);case 19:return sU(e,t,r);case 23:return ST(e,t,r);case 24:return ST(e,t,r);}throw Error(Ze(156,t.tag))};function J1e(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function go(e,t,r,a){return new J1e(e,t,r,a)}function r2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Y1e(e){if(typeof e=="function")return r2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rb)return 11;if(e===ib)return 14}return 2}function Jl(e,t){var r=e.alternate;return r===null?(r=go(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function M0(e,t,r,a,u,s){var m=2;if(a=e,typeof e=="function")r2(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case Dl:return Pd(r.children,u,s,t);case yU:m=8,u|=16;break;case yI:m=8,u|=1;break;case Zv:return e=go(12,r,t,u|8),e.elementType=Zv,e.type=Zv,e.lanes=s,e;case Hv:return e=go(13,r,t,u),e.type=Hv,e.elementType=Hv,e.lanes=s,e;case O0:return e=go(19,r,t,u),e.elementType=O0,e.lanes=s,e;case qI:return i2(r,u,s,t);case CT:return e=go(24,r,t,u),e.elementType=CT,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _I:m=10;break e;case xI:m=9;break e;case rb:m=11;break e;case ib:m=14;break e;case bI:m=16,a=null;break e;case wI:m=22;break e;}throw Error(Ze(130,e==null?e:typeof e,""));}return t=go(m,r,t,u),t.elementType=e,t.type=a,t.lanes=s,t}function Pd(e,t,r,a){return e=go(7,e,a,t),e.lanes=r,e}function i2(e,t,r,a){return e=go(23,e,a,t),e.elementType=qI,e.lanes=r,e}function ET(e,t,r){return e=go(6,e,null,t),e.lanes=r,e}function TT(e,t,r){return t=go(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Q1e(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=hT(0),this.expirationTimes=hT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hT(0),this.mutableSourceEagerHydrationData=null}function ewe(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lh,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function eb(e,t,r,a){var u=t.current,s=Za(),m=$l(u);e:if(r){r=r._reactInternals;t:{if(xh(r)!==r||r.tag!==1)throw Error(Ze(170));var x=r;do{switch(x.tag){case 3:x=x.stateNode.context;break t;case 1:if(ga(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break t}}x=x.return}while(x!==null);throw Error(Ze(171))}if(r.tag===1){var q=r.type;if(ga(q)){r=a5(r,q,x);break e}}r=x}else r=Hl;return t.context===null?t.context=r:t.pendingContext=r,t=jl(s,m),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),Vl(u,t),Wl(u,m,s),m}function IT(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode;}}function vU(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function n2(e,t){vU(e,t),(e=e.alternate)&&vU(e,t)}function twe(){return null}function a2(e,t,r){var a=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new Q1e(e,t,r!=null&&r.hydrate===!0),t=go(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,VI(t),e[Ld]=r.current,e5(e.nodeType===8?e.parentNode:e),a)for(e=0;e<a.length;e++){t=a[e];var u=t._getVersion;u=u(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,u]:r.mutableSourceEagerHydrationData.push(t,u)}this._internalRoot=r}a2.prototype.render=function(e){eb(e,this._internalRoot,null,null)};a2.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;eb(null,e,null,function(){t[Ld]=null})};function qg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rwe(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new a2(e,0,t?{hydrate:!0}:void 0)}function pb(e,t,r,a,u){var s=r._reactRootContainer;if(s){var m=s._internalRoot;if(typeof u=="function"){var x=u;u=function(){var T=IT(m);x.call(T)}}eb(t,m,e,u)}else{if(s=r._reactRootContainer=rwe(r,a),m=s._internalRoot,typeof u=="function"){var q=u;u=function(){var T=IT(m);q.call(T)}}L5(function(){eb(t,m,e,u)})}return IT(m)}kU=function(e){if(e.tag===13){var t=Za();Wl(e,4,t),n2(e,4)}};CI=function(e){if(e.tag===13){var t=Za();Wl(e,67108864,t),n2(e,67108864)}};RU=function(e){if(e.tag===13){var t=Za(),r=$l(e);Wl(e,r,t),n2(e,r)}};DU=function(e,t){return t()};NT=function(e,t,r){switch(t){case"input":if(MT(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var u=lb(a);if(!u)throw Error(Ze(90));xU(a),MT(a,u)}}}break;case"textarea":wU(e,r);break;case"select":t=r.value,t!=null&&wd(e,!!r.multiple,t,!1);}};EI=D5;CU=function(e,t,r,a,u){var s=Ut;Ut|=4;try{return vh(98,e.bind(null,t,r,a,u))}finally{Ut=s,Ut===0&&(Nd(),Is())}};TI=function(){!(Ut&49)&&(j1e(),Ql())};PU=function(e,t){var r=Ut;Ut|=2;try{return e(t)}finally{Ut=r,Ut===0&&(Nd(),Is())}};function V5(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qg(t))throw Error(Ze(200));return ewe(e,t,null,r)}var iwe={Events:[bg,yd,lb,TU,IU,Ql,{current:!1}]},Uv={findFiberByHostInstance:hh,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},nwe={bundleType:Uv.bundleType,version:Uv.version,rendererPackageName:Uv.rendererPackageName,rendererConfig:Uv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_h.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=OU(e),e===null?null:e.stateNode},findFiberByHostInstance:Uv.findFiberByHostInstance||twe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(jv=__REACT_DEVTOOLS_GLOBAL_HOOK__,!jv.isDisabled&&jv.supportsFiber))try{NI=jv.inject(nwe),ph=jv}catch(e){}var jv;bo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iwe;bo.createPortal=V5;bo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ze(188)):Error(Ze(268,Object.keys(e)));return e=OU(t),e=e===null?null:e.stateNode,e};bo.flushSync=function(e,t){var r=Ut;if(r&48)return e(t);Ut|=1;try{if(e)return vh(99,e.bind(null,t))}finally{Ut=r,Is()}};bo.hydrate=function(e,t,r){if(!qg(t))throw Error(Ze(200));return pb(null,e,t,!0,r)};bo.render=function(e,t,r){if(!qg(t))throw Error(Ze(200));return pb(null,e,t,!1,r)};bo.unmountComponentAtNode=function(e){if(!qg(e))throw Error(Ze(40));return e._reactRootContainer?(L5(function(){pb(null,null,e,!1,function(){e._reactRootContainer=null,e[Ld]=null})}),!0):!1};bo.unstable_batchedUpdates=D5;bo.unstable_createPortal=function(e,t){return V5(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};bo.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!qg(r))throw Error(Ze(200));if(e==null||e._reactInternals===void 0)throw Error(Ze(38));return pb(e,t,r,!1,a)};bo.version="17.0.2"});var Su=w((bqt,G5)=>{"use strict";function W5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W5)}catch(e){console.error(e)}}W5(),G5.exports=$5()});var ct=w((K5,Z5)=>{"use strict";var mb=function(e){return e&&e.Math===Math&&e};Z5.exports=mb(typeof globalThis=="object"&&globalThis)||mb(typeof window=="object"&&window)||mb(typeof self=="object"&&self)||mb(typeof global=="object"&&global)||function(){return this}()||K5||Function("return this")()});var ze=w((wqt,H5)=>{"use strict";H5.exports=function(e){try{return!!e()}catch(t){return!0}}});var At=w((Sqt,X5)=>{"use strict";var awe=ze();X5.exports=!awe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var Bd=w((qqt,J5)=>{"use strict";var owe=ze();J5.exports=!owe(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var Qe=w((Aqt,Y5)=>{"use strict";var swe=Bd(),vb=Function.prototype.call;Y5.exports=swe?vb.bind(vb):function(){return vb.apply(vb,arguments)}});var Ag=w(t4=>{"use strict";var Q5={}.propertyIsEnumerable,e4=Object.getOwnPropertyDescriptor,uwe=e4&&!Q5.call({1:2},1);t4.f=uwe?function(t){var r=e4(this,t);return!!r&&r.enumerable}:Q5});var ya=w((Tqt,r4)=>{"use strict";r4.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var ke=w((Iqt,a4)=>{"use strict";var i4=Bd(),n4=Function.prototype,o2=n4.call,lwe=i4&&n4.bind.bind(o2,o2);a4.exports=i4?lwe:function(e){return function(){return o2.apply(e,arguments)}}});var ln=w((Cqt,s4)=>{"use strict";var o4=ke(),cwe=o4({}.toString),hwe=o4("".slice);s4.exports=function(e){return hwe(cwe(e),8,-1)}});var qu=w((Pqt,u4)=>{"use strict";var fwe=ke(),dwe=ze(),pwe=ln(),s2=Object,mwe=fwe("".split);u4.exports=dwe(function(){return!s2("z").propertyIsEnumerable(0)})?function(e){return pwe(e)==="String"?mwe(e,""):s2(e)}:s2});var xi=w((Mqt,l4)=>{"use strict";l4.exports=function(e){return e==null}});var Fr=w((Oqt,c4)=>{"use strict";var vwe=xi(),gwe=TypeError;c4.exports=function(e){if(vwe(e))throw new gwe("Can't call method on "+e);return e}});var Ii=w((kqt,h4)=>{"use strict";var ywe=qu(),_we=Fr();h4.exports=function(e){return ywe(_we(e))}});var l2=w((Rqt,f4)=>{"use strict";var u2=typeof document=="object"&&document.all,xwe=typeof u2=="undefined"&&u2!==void 0;f4.exports={all:u2,IS_HTMLDDA:xwe}});var zt=w((Dqt,p4)=>{"use strict";var d4=l2(),bwe=d4.all;p4.exports=d4.IS_HTMLDDA?function(e){return typeof e=="function"||e===bwe}:function(e){return typeof e=="function"}});var Nt=w((Lqt,g4)=>{"use strict";var m4=zt(),v4=l2(),wwe=v4.all;g4.exports=v4.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:m4(e)||e===wwe}:function(e){return typeof e=="object"?e!==null:m4(e)}});var kt=w((Fqt,y4)=>{"use strict";var c2=ct(),Swe=zt(),qwe=function(e){return Swe(e)?e:void 0};y4.exports=function(e,t){return arguments.length<2?qwe(c2[e]):c2[e]&&c2[e][t]}});var Mn=w((zqt,_4)=>{"use strict";var Awe=ke();_4.exports=Awe({}.isPrototypeOf)});var Cs=w((Nqt,x4)=>{"use strict";x4.exports=typeof navigator!="undefined"&&String(navigator.userAgent)||""});var Ps=w((Bqt,E4)=>{"use strict";var A4=ct(),h2=Cs(),b4=A4.process,w4=A4.Deno,S4=b4&&b4.versions||w4&&w4.version,q4=S4&&S4.v8,es,gb;q4&&(es=q4.split("."),gb=es[0]>0&&es[0]<4?1:+(es[0]+es[1]));!gb&&h2&&(es=h2.match(/Edge\/(\d+)/),(!es||es[1]>=74)&&(es=h2.match(/Chrome\/(\d+)/),es&&(gb=+es[1])));E4.exports=gb});var ec=w((Uqt,I4)=>{"use strict";var T4=Ps(),Ewe=ze(),Twe=ct(),Iwe=Twe.String;I4.exports=!!Object.getOwnPropertySymbols&&!Ewe(function(){var e=Symbol("symbol detection");return!Iwe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&T4&&T4<41})});var f2=w((jqt,C4)=>{"use strict";var Cwe=ec();C4.exports=Cwe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Au=w((Vqt,P4)=>{"use strict";var Pwe=kt(),Mwe=zt(),Owe=Mn(),kwe=f2(),Rwe=Object;P4.exports=kwe?function(e){return typeof e=="symbol"}:function(e){var t=Pwe("Symbol");return Mwe(t)&&Owe(t.prototype,Rwe(e))}});var tc=w(($qt,M4)=>{"use strict";var Dwe=String;M4.exports=function(e){try{return Dwe(e)}catch(t){return"Object"}}});var Rt=w((Wqt,O4)=>{"use strict";var Lwe=zt(),Fwe=tc(),zwe=TypeError;O4.exports=function(e){if(Lwe(e))return e;throw new zwe(Fwe(e)+" is not a function")}});var di=w((Gqt,k4)=>{"use strict";var Nwe=Rt(),Bwe=xi();k4.exports=function(e,t){var r=e[t];return Bwe(r)?void 0:Nwe(r)}});var v2=w((Kqt,R4)=>{"use strict";var d2=Qe(),p2=zt(),m2=Nt(),Uwe=TypeError;R4.exports=function(e,t){var r,a;if(t==="string"&&p2(r=e.toString)&&!m2(a=d2(r,e))||p2(r=e.valueOf)&&!m2(a=d2(r,e))||t!=="string"&&p2(r=e.toString)&&!m2(a=d2(r,e)))return a;throw new Uwe("Can't convert object to primitive value")}});var Zt=w((Zqt,D4)=>{"use strict";D4.exports=!1});var yb=w((Hqt,F4)=>{"use strict";var L4=ct(),jwe=Object.defineProperty;F4.exports=function(e,t){try{jwe(L4,e,{value:t,configurable:!0,writable:!0})}catch(r){L4[e]=t}return t}});var Eg=w((Xqt,N4)=>{"use strict";var Vwe=ct(),$we=yb(),z4="__core-js_shared__",Wwe=Vwe[z4]||$we(z4,{});N4.exports=Wwe});var Ms=w((Jqt,U4)=>{"use strict";var Gwe=Zt(),B4=Eg();(U4.exports=function(e,t){return B4[e]||(B4[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.33.0",mode:Gwe?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Ht=w((Yqt,j4)=>{"use strict";var Kwe=Fr(),Zwe=Object;j4.exports=function(e){return Zwe(Kwe(e))}});var $t=w((Qqt,V4)=>{"use strict";var Hwe=ke(),Xwe=Ht(),Jwe=Hwe({}.hasOwnProperty);V4.exports=Object.hasOwn||function(t,r){return Jwe(Xwe(t),r)}});var rc=w((eAt,$4)=>{"use strict";var Ywe=ke(),Qwe=0,eSe=Math.random(),tSe=Ywe(1 .toString);$4.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+tSe(++Qwe+eSe,36)}});var Et=w((tAt,G4)=>{"use strict";var rSe=ct(),iSe=Ms(),W4=$t(),nSe=rc(),aSe=ec(),oSe=f2(),Ud=rSe.Symbol,g2=iSe("wks"),sSe=oSe?Ud.for||Ud:Ud&&Ud.withoutSetter||nSe;G4.exports=function(e){return W4(g2,e)||(g2[e]=aSe&&W4(Ud,e)?Ud[e]:sSe("Symbol."+e)),g2[e]}});var Tg=w((rAt,H4)=>{"use strict";var uSe=Qe(),K4=Nt(),Z4=Au(),lSe=di(),cSe=v2(),hSe=Et(),fSe=TypeError,dSe=hSe("toPrimitive");H4.exports=function(e,t){if(!K4(e)||Z4(e))return e;var r=lSe(e,dSe),a;if(r){if(t===void 0&&(t="default"),a=uSe(r,e,t),!K4(a)||Z4(a))return a;throw new fSe("Can't convert object to primitive value")}return t===void 0&&(t="number"),cSe(e,t)}});var ts=w((iAt,X4)=>{"use strict";var pSe=Tg(),mSe=Au();X4.exports=function(e){var t=pSe(e,"string");return mSe(t)?t:t+""}});var Ig=w((nAt,Y4)=>{"use strict";var vSe=ct(),J4=Nt(),y2=vSe.document,gSe=J4(y2)&&J4(y2.createElement);Y4.exports=function(e){return gSe?y2.createElement(e):{}}});var _2=w((aAt,Q4)=>{"use strict";var ySe=At(),_Se=ze(),xSe=Ig();Q4.exports=!ySe&&!_Se(function(){return Object.defineProperty(xSe("div"),"a",{get:function(){return 7}}).a!==7})});var Fi=w(tj=>{"use strict";var bSe=At(),wSe=Qe(),SSe=Ag(),qSe=ya(),ASe=Ii(),ESe=ts(),TSe=$t(),ISe=_2(),ej=Object.getOwnPropertyDescriptor;tj.f=bSe?ej:function(t,r){if(t=ASe(t),r=ESe(r),ISe)try{return ej(t,r)}catch(a){}if(TSe(t,r))return qSe(!wSe(SSe.f,t,r),t[r])}});var x2=w((sAt,rj)=>{"use strict";var CSe=At(),PSe=ze();rj.exports=CSe&&PSe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var rt=w((uAt,ij)=>{"use strict";var MSe=Nt(),OSe=String,kSe=TypeError;ij.exports=function(e){if(MSe(e))return e;throw new kSe(OSe(e)+" is not an object")}});var Or=w(aj=>{"use strict";var RSe=At(),DSe=_2(),LSe=x2(),_b=rt(),nj=ts(),FSe=TypeError,b2=Object.defineProperty,zSe=Object.getOwnPropertyDescriptor,w2="enumerable",S2="configurable",q2="writable";aj.f=RSe?LSe?function(t,r,a){if(_b(t),r=nj(r),_b(a),typeof t=="function"&&r==="prototype"&&"value"in a&&q2 in a&&!a[q2]){var u=zSe(t,r);u&&u[q2]&&(t[r]=a.value,a={configurable:S2 in a?a[S2]:u[S2],enumerable:w2 in a?a[w2]:u[w2],writable:!1})}return b2(t,r,a)}:b2:function(t,r,a){if(_b(t),r=nj(r),_b(a),DSe)try{return b2(t,r,a)}catch(u){}if("get"in a||"set"in a)throw new FSe("Accessors not supported");return"value"in a&&(t[r]=a.value),t}});var bi=w((cAt,oj)=>{"use strict";var NSe=At(),BSe=Or(),USe=ya();oj.exports=NSe?function(e,t,r){return BSe.f(e,t,USe(1,r))}:function(e,t,r){return e[t]=r,e}});var wh=w((hAt,uj)=>{"use strict";var A2=At(),jSe=$t(),sj=Function.prototype,VSe=A2&&Object.getOwnPropertyDescriptor,E2=jSe(sj,"name"),$Se=E2&&function(){}.name==="something",WSe=E2&&(!A2||A2&&VSe(sj,"name").configurable);uj.exports={EXISTS:E2,PROPER:$Se,CONFIGURABLE:WSe}});var Cg=w((fAt,lj)=>{"use strict";var GSe=ke(),KSe=zt(),T2=Eg(),ZSe=GSe(Function.toString);KSe(T2.inspectSource)||(T2.inspectSource=function(e){return ZSe(e)});lj.exports=T2.inspectSource});var I2=w((dAt,hj)=>{"use strict";var HSe=ct(),XSe=zt(),cj=HSe.WeakMap;hj.exports=XSe(cj)&&/native code/.test(String(cj))});var Pg=w((pAt,dj)=>{"use strict";var JSe=Ms(),YSe=rc(),fj=JSe("keys");dj.exports=function(e){return fj[e]||(fj[e]=YSe(e))}});var jd=w((mAt,pj)=>{"use strict";pj.exports={}});var dr=w((vAt,gj)=>{"use strict";var QSe=I2(),vj=ct(),eqe=Nt(),tqe=bi(),C2=$t(),P2=Eg(),rqe=Pg(),iqe=jd(),mj="Object already initialized",M2=vj.TypeError,nqe=vj.WeakMap,xb,Mg,bb,aqe=function(e){return bb(e)?Mg(e):xb(e,{})},oqe=function(e){return function(t){var r;if(!eqe(t)||(r=Mg(t)).type!==e)throw new M2("Incompatible receiver, "+e+" required");return r}};QSe||P2.state?(rs=P2.state||(P2.state=new nqe),rs.get=rs.get,rs.has=rs.has,rs.set=rs.set,xb=function(e,t){if(rs.has(e))throw new M2(mj);return t.facade=e,rs.set(e,t),t},Mg=function(e){return rs.get(e)||{}},bb=function(e){return rs.has(e)}):(Sh=rqe("state"),iqe[Sh]=!0,xb=function(e,t){if(C2(e,Sh))throw new M2(mj);return t.facade=e,tqe(e,Sh,t),t},Mg=function(e){return C2(e,Sh)?e[Sh]:{}},bb=function(e){return C2(e,Sh)});var rs,Sh;gj.exports={set:xb,get:Mg,has:bb,enforce:aqe,getterFor:oqe}});var Og=w((gAt,xj)=>{"use strict";var k2=ke(),sqe=ze(),uqe=zt(),wb=$t(),O2=At(),lqe=wh().CONFIGURABLE,cqe=Cg(),_j=dr(),hqe=_j.enforce,fqe=_j.get,yj=String,Sb=Object.defineProperty,dqe=k2("".slice),pqe=k2("".replace),mqe=k2([].join),vqe=O2&&!sqe(function(){return Sb(function(){},"length",{value:8}).length!==8}),gqe=String(String).split("String"),yqe=xj.exports=function(e,t,r){dqe(yj(t),0,7)==="Symbol("&&(t="["+pqe(yj(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!wb(e,"name")||lqe&&e.name!==t)&&(O2?Sb(e,"name",{value:t,configurable:!0}):e.name=t),vqe&&r&&wb(r,"arity")&&e.length!==r.arity&&Sb(e,"length",{value:r.arity});try{r&&wb(r,"constructor")&&r.constructor?O2&&Sb(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(u){}var a=hqe(e);return wb(a,"source")||(a.source=mqe(gqe,typeof t=="string"?t:"")),e};Function.prototype.toString=yqe(function(){return uqe(this)&&fqe(this).source||cqe(this)},"toString")});var yr=w((yAt,bj)=>{"use strict";var _qe=zt(),xqe=Or(),bqe=Og(),wqe=yb();bj.exports=function(e,t,r,a){a||(a={});var u=a.enumerable,s=a.name!==void 0?a.name:t;if(_qe(r)&&bqe(r,s,a),a.global)u?e[t]=r:wqe(t,r);else{try{a.unsafe?e[t]&&(u=!0):delete e[t]}catch(m){}u?e[t]=r:xqe.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}});var R2=w((_At,wj)=>{"use strict";var Sqe=Math.ceil,qqe=Math.floor;wj.exports=Math.trunc||function(t){var r=+t;return(r>0?qqe:Sqe)(r)}});var zr=w((xAt,Sj)=>{"use strict";var Aqe=R2();Sj.exports=function(e){var t=+e;return t!==t||t===0?0:Aqe(t)}});var wo=w((bAt,qj)=>{"use strict";var Eqe=zr(),Tqe=Math.max,Iqe=Math.min;qj.exports=function(e,t){var r=Eqe(e);return r<0?Tqe(r+t,0):Iqe(r,t)}});var _a=w((wAt,Aj)=>{"use strict";var Cqe=zr(),Pqe=Math.min;Aj.exports=function(e){return e>0?Pqe(Cqe(e),9007199254740991):0}});var Yt=w((SAt,Ej)=>{"use strict";var Mqe=_a();Ej.exports=function(e){return Mqe(e.length)}});var Vd=w((qAt,Ij)=>{"use strict";var Oqe=Ii(),kqe=wo(),Rqe=Yt(),Tj=function(e){return function(t,r,a){var u=Oqe(t),s=Rqe(u),m=kqe(a,s),x;if(e&&r!==r){for(;s>m;)if(x=u[m++],x!==x)return!0}else for(;s>m;m++)if((e||m in u)&&u[m]===r)return e||m||0;return!e&&-1}};Ij.exports={includes:Tj(!0),indexOf:Tj(!1)}});var L2=w((AAt,Pj)=>{"use strict";var Dqe=ke(),D2=$t(),Lqe=Ii(),Fqe=Vd().indexOf,zqe=jd(),Cj=Dqe([].push);Pj.exports=function(e,t){var r=Lqe(e),a=0,u=[],s;for(s in r)!D2(zqe,s)&&D2(r,s)&&Cj(u,s);for(;t.length>a;)D2(r,s=t[a++])&&(~Fqe(u,s)||Cj(u,s));return u}});var qb=w((EAt,Mj)=>{"use strict";Mj.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Eu=w(Oj=>{"use strict";var Nqe=L2(),Bqe=qb(),Uqe=Bqe.concat("length","prototype");Oj.f=Object.getOwnPropertyNames||function(t){return Nqe(t,Uqe)}});var kg=w(kj=>{"use strict";kj.f=Object.getOwnPropertySymbols});var Ab=w((CAt,Rj)=>{"use strict";var jqe=kt(),Vqe=ke(),$qe=Eu(),Wqe=kg(),Gqe=rt(),Kqe=Vqe([].concat);Rj.exports=jqe("Reflect","ownKeys")||function(t){var r=$qe.f(Gqe(t)),a=Wqe.f;return a?Kqe(r,a(t)):r}});var $d=w((PAt,Lj)=>{"use strict";var Dj=$t(),Zqe=Ab(),Hqe=Fi(),Xqe=Or();Lj.exports=function(e,t,r){for(var a=Zqe(t),u=Xqe.f,s=Hqe.f,m=0;m<a.length;m++){var x=a[m];!Dj(e,x)&&!(r&&Dj(r,x))&&u(e,x,s(t,x))}}});var Wd=w((MAt,Fj)=>{"use strict";var Jqe=ze(),Yqe=zt(),Qqe=/#|\.prototype\./,Rg=function(e,t){var r=tAe[eAe(e)];return r===iAe?!0:r===rAe?!1:Yqe(t)?Jqe(t):!!t},eAe=Rg.normalize=function(e){return String(e).replace(Qqe,".").toLowerCase()},tAe=Rg.data={},rAe=Rg.NATIVE="N",iAe=Rg.POLYFILL="P";Fj.exports=Rg});var $=w((OAt,zj)=>{"use strict";var F2=ct(),nAe=Fi().f,aAe=bi(),oAe=yr(),sAe=yb(),uAe=$d(),lAe=Wd();zj.exports=function(e,t){var r=e.target,a=e.global,u=e.stat,s,m,x,q,T,I;if(a?m=F2:u?m=F2[r]||sAe(r,{}):m=(F2[r]||{}).prototype,m)for(x in t){if(T=t[x],e.dontCallGetSet?(I=nAe(m,x),q=I&&I.value):q=m[x],s=lAe(a?x:r+(u?".":"#")+x,e.forced),!s&&q!==void 0){if(typeof T==typeof q)continue;uAe(T,q)}(e.sham||q&&q.sham)&&aAe(T,"sham",!0),oAe(m,x,T,e)}}});var Eb=w((kAt,Bj)=>{"use strict";var cAe=Et(),hAe=cAe("toStringTag"),Nj={};Nj[hAe]="z";Bj.exports=String(Nj)==="[object z]"});var xa=w((RAt,Uj)=>{"use strict";var fAe=Eb(),dAe=zt(),Tb=ln(),pAe=Et(),mAe=pAe("toStringTag"),vAe=Object,gAe=Tb(function(){return arguments}())==="Arguments",yAe=function(e,t){try{return e[t]}catch(r){}};Uj.exports=fAe?Tb:function(e){var t,r,a;return e===void 0?"Undefined":e===null?"Null":typeof(r=yAe(t=vAe(e),mAe))=="string"?r:gAe?Tb(t):(a=Tb(t))==="Object"&&dAe(t.callee)?"Arguments":a}});var Lt=w((DAt,jj)=>{"use strict";var _Ae=xa(),xAe=String;jj.exports=function(e){if(_Ae(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return xAe(e)}});var qh=w((LAt,Vj)=>{"use strict";var bAe=L2(),wAe=qb();Vj.exports=Object.keys||function(t){return bAe(t,wAe)}});var Ib=w($j=>{"use strict";var SAe=At(),qAe=x2(),AAe=Or(),EAe=rt(),TAe=Ii(),IAe=qh();$j.f=SAe&&!qAe?Object.defineProperties:function(t,r){EAe(t);for(var a=TAe(r),u=IAe(r),s=u.length,m=0,x;s>m;)AAe.f(t,x=u[m++],a[x]);return t}});var z2=w((zAt,Wj)=>{"use strict";var CAe=kt();Wj.exports=CAe("document","documentElement")});var pi=w((NAt,Yj)=>{"use strict";var PAe=rt(),MAe=Ib(),Gj=qb(),OAe=jd(),kAe=z2(),RAe=Ig(),DAe=Pg(),Kj=">",Zj="<",B2="prototype",U2="script",Xj=DAe("IE_PROTO"),N2=function(){},Jj=function(e){return Zj+U2+Kj+e+Zj+"/"+U2+Kj},Hj=function(e){e.write(Jj("")),e.close();var t=e.parentWindow.Object;return e=null,t},LAe=function(){var e=RAe("iframe"),t="java"+U2+":",r;return e.style.display="none",kAe.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(Jj("document.F=Object")),r.close(),r.F},Cb,Pb=function(){try{Cb=new ActiveXObject("htmlfile")}catch(t){}Pb=typeof document!="undefined"?document.domain&&Cb?Hj(Cb):LAe():Hj(Cb);for(var e=Gj.length;e--;)delete Pb[B2][Gj[e]];return Pb()};OAe[Xj]=!0;Yj.exports=Object.create||function(t,r){var a;return t!==null?(N2[B2]=PAe(t),a=new N2,N2[B2]=null,a[Xj]=t):a=Pb(),r===void 0?a:MAe.f(a,r)}});var So=w((BAt,Qj)=>{"use strict";var FAe=ts(),zAe=Or(),NAe=ya();Qj.exports=function(e,t,r){var a=FAe(t);a in e?zAe.f(e,a,NAe(0,r)):e[a]=r}});var Ah=w((UAt,t6)=>{"use strict";var e6=wo(),BAe=Yt(),UAe=So(),jAe=Array,VAe=Math.max;t6.exports=function(e,t,r){for(var a=BAe(e),u=e6(t,a),s=e6(r===void 0?a:r,a),m=jAe(VAe(s-u,0)),x=0;u<s;u++,x++)UAe(m,x,e[u]);return m.length=x,m}});var Mb=w((jAt,n6)=>{"use strict";var $Ae=ln(),WAe=Ii(),r6=Eu().f,GAe=Ah(),i6=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],KAe=function(e){try{return r6(e)}catch(t){return GAe(i6)}};n6.exports.f=function(t){return i6&&$Ae(t)==="Window"?KAe(t):r6(WAe(t))}});var Gr=w((VAt,o6)=>{"use strict";var a6=Og(),ZAe=Or();o6.exports=function(e,t,r){return r.get&&a6(r.get,t,{getter:!0}),r.set&&a6(r.set,t,{setter:!0}),ZAe.f(e,t,r)}});var j2=w(s6=>{"use strict";var HAe=Et();s6.f=HAe});var Ob=w((WAt,u6)=>{"use strict";var XAe=ct();u6.exports=XAe});var ni=w((GAt,c6)=>{"use strict";var l6=Ob(),JAe=$t(),YAe=j2(),QAe=Or().f;c6.exports=function(e){var t=l6.Symbol||(l6.Symbol={});JAe(t,e)||QAe(t,e,{value:YAe.f(e)})}});var V2=w((KAt,h6)=>{"use strict";var eEe=Qe(),tEe=kt(),rEe=Et(),iEe=yr();h6.exports=function(){var e=tEe("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,a=rEe("toPrimitive");t&&!t[a]&&iEe(t,a,function(u){return eEe(r,this)},{arity:1})}});var ba=w((ZAt,d6)=>{"use strict";var nEe=Or().f,aEe=$t(),oEe=Et(),f6=oEe("toStringTag");d6.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!aEe(e,f6)&&nEe(e,f6,{configurable:!0,value:t})}});var Tu=w((HAt,p6)=>{"use strict";var sEe=ln(),uEe=ke();p6.exports=function(e){if(sEe(e)==="Function")return uEe(e)}});var qr=w((XAt,v6)=>{"use strict";var m6=Tu(),lEe=Rt(),cEe=Bd(),hEe=m6(m6.bind);v6.exports=function(e,t){return lEe(e),t===void 0?e:cEe?hEe(e,t):function(){return e.apply(t,arguments)}}});var is=w((JAt,g6)=>{"use strict";var fEe=ln();g6.exports=Array.isArray||function(t){return fEe(t)==="Array"}});var ns=w((YAt,w6)=>{"use strict";var dEe=ke(),pEe=ze(),y6=zt(),mEe=xa(),vEe=kt(),gEe=Cg(),_6=function(){},yEe=[],x6=vEe("Reflect","construct"),$2=/^\s*(?:class|function)\b/,_Ee=dEe($2.exec),xEe=!$2.test(_6),Dg=function(t){if(!y6(t))return!1;try{return x6(_6,yEe,t),!0}catch(r){return!1}},b6=function(t){if(!y6(t))return!1;switch(mEe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return xEe||!!_Ee($2,gEe(t))}catch(r){return!0}};b6.sham=!0;w6.exports=!x6||pEe(function(){var e;return Dg(Dg.call)||!Dg(Object)||!Dg(function(){e=!0})||e})?b6:Dg});var E6=w((QAt,A6)=>{"use strict";var S6=is(),bEe=ns(),wEe=Nt(),SEe=Et(),qEe=SEe("species"),q6=Array;A6.exports=function(e){var t;return S6(e)&&(t=e.constructor,bEe(t)&&(t===q6||S6(t.prototype))?t=void 0:wEe(t)&&(t=t[qEe],t===null&&(t=void 0))),t===void 0?q6:t}});var Gd=w((eEt,T6)=>{"use strict";var AEe=E6();T6.exports=function(e,t){return new(AEe(e))(t===0?0:t)}});var mi=w((tEt,C6)=>{"use strict";var EEe=qr(),TEe=ke(),IEe=qu(),CEe=Ht(),PEe=Yt(),MEe=Gd(),I6=TEe([].push),ic=function(e){var t=e===1,r=e===2,a=e===3,u=e===4,s=e===6,m=e===7,x=e===5||s;return function(q,T,I,L){for(var z=CEe(q),Y=IEe(z),pe=EEe(T,I),de=PEe(Y),Z=0,H=L||MEe,J=t?H(q,de):r||m?H(q,0):void 0,ve,be;de>Z;Z++)if((x||Z in Y)&&(ve=Y[Z],be=pe(ve,Z,z),e))if(t)J[Z]=be;else if(be)switch(e){case 3:return!0;case 5:return ve;case 6:return Z;case 2:I6(J,ve);}else switch(e){case 4:return!1;case 7:I6(J,ve);}return s?-1:a||u?u:J}};C6.exports={forEach:ic(0),map:ic(1),filter:ic(2),some:ic(3),every:ic(4),find:ic(5),findIndex:ic(6),filterReject:ic(7)}});var G6=w(()=>{"use strict";var kb=$(),Rb=ct(),Q2=Qe(),OEe=ke(),kEe=Zt(),Kd=At(),Zd=ec(),REe=ze(),Zi=$t(),DEe=Mn(),Z2=rt(),Db=Ii(),eC=ts(),LEe=Lt(),H2=ya(),Fg=pi(),O6=qh(),FEe=Eu(),k6=Mb(),zEe=kg(),R6=Fi(),D6=Or(),NEe=Ib(),L6=Ag(),W2=yr(),BEe=Gr(),tC=Ms(),UEe=Pg(),F6=jd(),P6=rc(),jEe=Et(),VEe=j2(),$Ee=ni(),WEe=V2(),GEe=ba(),z6=dr(),Lb=mi().forEach,wa=UEe("hidden"),Fb="Symbol",zg="prototype",KEe=z6.set,M6=z6.getterFor(Fb),qo=Object[zg],Eh=Rb.Symbol,Lg=Eh&&Eh[zg],ZEe=Rb.RangeError,HEe=Rb.TypeError,G2=Rb.QObject,N6=R6.f,Th=D6.f,B6=k6.f,XEe=L6.f,U6=OEe([].push),Iu=tC("symbols"),Ng=tC("op-symbols"),JEe=tC("wks"),X2=!G2||!G2[zg]||!G2[zg].findChild,j6=function(e,t,r){var a=N6(qo,t);a&&delete qo[t],Th(e,t,r),a&&e!==qo&&Th(qo,t,a)},J2=Kd&&REe(function(){return Fg(Th({},"a",{get:function(){return Th(this,"a",{value:7}).a}})).a!==7})?j6:Th,K2=function(e,t){var r=Iu[e]=Fg(Lg);return KEe(r,{type:Fb,tag:e,description:t}),Kd||(r.description=t),r},zb=function(t,r,a){t===qo&&zb(Ng,r,a),Z2(t);var u=eC(r);return Z2(a),Zi(Iu,u)?(a.enumerable?(Zi(t,wa)&&t[wa][u]&&(t[wa][u]=!1),a=Fg(a,{enumerable:H2(0,!1)})):(Zi(t,wa)||Th(t,wa,H2(1,{})),t[wa][u]=!0),J2(t,u,a)):Th(t,u,a)},rC=function(t,r){Z2(t);var a=Db(r),u=O6(a).concat(W6(a));return Lb(u,function(s){(!Kd||Q2(Y2,a,s))&&zb(t,s,a[s])}),t},YEe=function(t,r){return r===void 0?Fg(t):rC(Fg(t),r)},Y2=function(t){var r=eC(t),a=Q2(XEe,this,r);return this===qo&&Zi(Iu,r)&&!Zi(Ng,r)?!1:a||!Zi(this,r)||!Zi(Iu,r)||Zi(this,wa)&&this[wa][r]?a:!0},V6=function(t,r){var a=Db(t),u=eC(r);if(!(a===qo&&Zi(Iu,u)&&!Zi(Ng,u))){var s=N6(a,u);return s&&Zi(Iu,u)&&!(Zi(a,wa)&&a[wa][u])&&(s.enumerable=!0),s}},$6=function(t){var r=B6(Db(t)),a=[];return Lb(r,function(u){!Zi(Iu,u)&&!Zi(F6,u)&&U6(a,u)}),a},W6=function(e){var t=e===qo,r=B6(t?Ng:Db(e)),a=[];return Lb(r,function(u){Zi(Iu,u)&&(!t||Zi(qo,u))&&U6(a,Iu[u])}),a};Zd||(Eh=function(){if(DEe(Lg,this))throw new HEe("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:LEe(arguments[0]),r=P6(t),a=function(u){this===qo&&Q2(a,Ng,u),Zi(this,wa)&&Zi(this[wa],r)&&(this[wa][r]=!1);var s=H2(1,u);try{J2(this,r,s)}catch(m){if(!(m instanceof ZEe))throw m;j6(this,r,s)}};return Kd&&X2&&J2(qo,r,{configurable:!0,set:a}),K2(r,t)},Lg=Eh[zg],W2(Lg,"toString",function(){return M6(this).tag}),W2(Eh,"withoutSetter",function(e){return K2(P6(e),e)}),L6.f=Y2,D6.f=zb,NEe.f=rC,R6.f=V6,FEe.f=k6.f=$6,zEe.f=W6,VEe.f=function(e){return K2(jEe(e),e)},Kd&&(BEe(Lg,"description",{configurable:!0,get:function(){return M6(this).description}}),kEe||W2(qo,"propertyIsEnumerable",Y2,{unsafe:!0})));kb({global:!0,constructor:!0,wrap:!0,forced:!Zd,sham:!Zd},{Symbol:Eh});Lb(O6(JEe),function(e){$Ee(e)});kb({target:Fb,stat:!0,forced:!Zd},{useSetter:function(){X2=!0},useSimple:function(){X2=!1}});kb({target:"Object",stat:!0,forced:!Zd,sham:!Kd},{create:YEe,defineProperty:zb,defineProperties:rC,getOwnPropertyDescriptor:V6});kb({target:"Object",stat:!0,forced:!Zd},{getOwnPropertyNames:$6});WEe();GEe(Eh,Fb);F6[wa]=!0});var iC=w((nEt,K6)=>{"use strict";var QEe=ec();K6.exports=QEe&&!!Symbol.for&&!!Symbol.keyFor});var H6=w(()=>{"use strict";var eTe=$(),tTe=kt(),rTe=$t(),iTe=Lt(),Z6=Ms(),nTe=iC(),nC=Z6("string-to-symbol-registry"),aTe=Z6("symbol-to-string-registry");eTe({target:"Symbol",stat:!0,forced:!nTe},{for:function(e){var t=iTe(e);if(rTe(nC,t))return nC[t];var r=tTe("Symbol")(t);return nC[t]=r,aTe[r]=t,r}})});var J6=w(()=>{"use strict";var oTe=$(),sTe=$t(),uTe=Au(),lTe=tc(),cTe=Ms(),hTe=iC(),X6=cTe("symbol-to-string-registry");oTe({target:"Symbol",stat:!0,forced:!hTe},{keyFor:function(t){if(!uTe(t))throw new TypeError(lTe(t)+" is not a symbol");if(sTe(X6,t))return X6[t]}})});var On=w((lEt,tV)=>{"use strict";var fTe=Bd(),eV=Function.prototype,Y6=eV.apply,Q6=eV.call;tV.exports=typeof Reflect=="object"&&Reflect.apply||(fTe?Q6.bind(Y6):function(){return Q6.apply(Y6,arguments)})});var Cu=w((cEt,rV)=>{"use strict";var dTe=ke();rV.exports=dTe([].slice)});var aC=w((hEt,oV)=>{"use strict";var pTe=ke(),iV=is(),mTe=zt(),nV=ln(),vTe=Lt(),aV=pTe([].push);oV.exports=function(e){if(mTe(e))return e;if(iV(e)){for(var t=e.length,r=[],a=0;a<t;a++){var u=e[a];typeof u=="string"?aV(r,u):(typeof u=="number"||nV(u)==="Number"||nV(u)==="String")&&aV(r,vTe(u))}var s=r.length,m=!0;return function(x,q){if(m)return m=!1,q;if(iV(this))return q;for(var T=0;T<s;T++)if(r[T]===x)return q}}}});var oC=w(()=>{"use strict";var gTe=$(),pV=kt(),mV=On(),yTe=Qe(),Bg=ke(),vV=ze(),sV=zt(),uV=Au(),gV=Cu(),_Te=aC(),xTe=ec(),bTe=String,nc=pV("JSON","stringify"),Nb=Bg(/./.exec),lV=Bg("".charAt),wTe=Bg("".charCodeAt),STe=Bg("".replace),qTe=Bg(1 .toString),ATe=/[\uD800-\uDFFF]/g,cV=/^[\uD800-\uDBFF]$/,hV=/^[\uDC00-\uDFFF]$/,fV=!xTe||vV(function(){var e=pV("Symbol")("stringify detection");return nc([e])!=="[null]"||nc({a:e})!=="{}"||nc(Object(e))!=="{}"}),dV=vV(function(){return nc("\uDF06\uD834")!=="\"\\udf06\\ud834\""||nc("\uDEAD")!=="\"\\udead\""}),ETe=function(e,t){var r=gV(arguments),a=_Te(t);if(!(!sV(a)&&(e===void 0||uV(e))))return r[1]=function(u,s){if(sV(a)&&(s=yTe(a,this,bTe(u),s)),!uV(s))return s},mV(nc,null,r)},TTe=function(e,t,r){var a=lV(r,t-1),u=lV(r,t+1);return Nb(cV,e)&&!Nb(hV,u)||Nb(hV,e)&&!Nb(cV,a)?"\\u"+qTe(wTe(e,0),16):e};nc&&gTe({target:"JSON",stat:!0,arity:3,forced:fV||dV},{stringify:function(t,r,a){var u=gV(arguments),s=mV(fV?ETe:nc,null,u);return dV&&typeof s=="string"?STe(s,ATe,TTe):s}})});var _V=w(()=>{"use strict";var ITe=$(),CTe=ec(),PTe=ze(),yV=kg(),MTe=Ht(),OTe=!CTe||PTe(function(){yV.f(1)});ITe({target:"Object",stat:!0,forced:OTe},{getOwnPropertySymbols:function(t){var r=yV.f;return r?r(MTe(t)):[]}})});var xV=w(()=>{"use strict";G6();H6();J6();oC();_V()});var TV=w(()=>{"use strict";var kTe=$(),RTe=At(),DTe=ct(),Bb=ke(),LTe=$t(),FTe=zt(),zTe=Mn(),NTe=Lt(),BTe=Gr(),UTe=$d(),Pu=DTe.Symbol,Ih=Pu&&Pu.prototype;RTe&&FTe(Pu)&&(!("description"in Ih)||Pu().description!==void 0)&&(sC={},Ug=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:NTe(arguments[0]),r=zTe(Ih,this)?new Pu(t):t===void 0?Pu():Pu(t);return t===""&&(sC[r]=!0),r},UTe(Ug,Pu),Ug.prototype=Ih,Ih.constructor=Ug,bV=String(Pu("description detection"))==="Symbol(description detection)",wV=Bb(Ih.valueOf),SV=Bb(Ih.toString),qV=/^Symbol\((.*)\)[^)]+$/,AV=Bb("".replace),EV=Bb("".slice),BTe(Ih,"description",{configurable:!0,get:function(){var t=wV(this);if(LTe(sC,t))return"";var r=SV(t),a=bV?EV(r,7,-1):AV(r,qV,"$1");return a===""?void 0:a}}),kTe({global:!0,constructor:!0,forced:!0},{Symbol:Ug}));var sC,Ug,bV,wV,SV,qV,AV,EV});var IV=w(()=>{"use strict";var jTe=ni();jTe("asyncIterator")});var CV=w(()=>{"use strict";var VTe=ni();VTe("hasInstance")});var PV=w(()=>{"use strict";var $Te=ni();$Te("isConcatSpreadable")});var MV=w(()=>{"use strict";var WTe=ni();WTe("iterator")});var OV=w(()=>{"use strict";var GTe=ni();GTe("match")});var kV=w(()=>{"use strict";var KTe=ni();KTe("matchAll")});var RV=w(()=>{"use strict";var ZTe=ni();ZTe("replace")});var DV=w(()=>{"use strict";var HTe=ni();HTe("search")});var LV=w(()=>{"use strict";var XTe=ni();XTe("species")});var FV=w(()=>{"use strict";var JTe=ni();JTe("split")});var zV=w(()=>{"use strict";var YTe=ni(),QTe=V2();YTe("toPrimitive");QTe()});var NV=w(()=>{"use strict";var eIe=kt(),tIe=ni(),rIe=ba();tIe("toStringTag");rIe(eIe("Symbol"),"Symbol")});var BV=w(()=>{"use strict";var iIe=ni();iIe("unscopables")});var jg=w((GEt,UV)=>{"use strict";var nIe=ke(),aIe=Rt();UV.exports=function(e,t,r){try{return nIe(aIe(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(a){}}});var uC=w((KEt,jV)=>{"use strict";var oIe=zt(),sIe=String,uIe=TypeError;jV.exports=function(e){if(typeof e=="object"||oIe(e))return e;throw new uIe("Can't set "+sIe(e)+" as a prototype")}});var Ao=w((ZEt,VV)=>{"use strict";var lIe=jg(),cIe=rt(),hIe=uC();VV.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=lIe(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(a){}return function(u,s){return cIe(u),hIe(s),e?r(u,s):u.__proto__=s,u}}():void 0)});var lC=w((HEt,$V)=>{"use strict";var fIe=Or().f;$V.exports=function(e,t,r){r in e||fIe(e,r,{configurable:!0,get:function(){return t[r]},set:function(a){t[r]=a}})}});var Ch=w((XEt,GV)=>{"use strict";var dIe=zt(),pIe=Nt(),WV=Ao();GV.exports=function(e,t,r){var a,u;return WV&&dIe(a=t.constructor)&&a!==r&&pIe(u=a.prototype)&&u!==r.prototype&&WV(e,u),e}});var Ph=w((JEt,KV)=>{"use strict";var mIe=Lt();KV.exports=function(e,t){return e===void 0?arguments.length<2?"":t:mIe(e)}});var cC=w((YEt,ZV)=>{"use strict";var vIe=Nt(),gIe=bi();ZV.exports=function(e,t){vIe(t)&&"cause"in t&&gIe(e,"cause",t.cause)}});var Ub=w((QEt,JV)=>{"use strict";var yIe=ke(),HV=Error,_Ie=yIe("".replace),xIe=function(e){return String(new HV(e).stack)}("zxcasd"),XV=/\n\s*at [^:]*:[^\n]*/,bIe=XV.test(xIe);JV.exports=function(e,t){if(bIe&&typeof e=="string"&&!HV.prepareStackTrace)for(;t--;)e=_Ie(e,XV,"");return e}});var hC=w((eTt,YV)=>{"use strict";var wIe=ze(),SIe=ya();YV.exports=!wIe(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",SIe(1,7)),e.stack!==7):!0})});var jb=w((tTt,e8)=>{"use strict";var qIe=bi(),AIe=Ub(),EIe=hC(),QV=Error.captureStackTrace;e8.exports=function(e,t,r,a){EIe&&(QV?QV(e,t):qIe(e,"stack",AIe(r,a)))}});var fC=w((rTt,s8)=>{"use strict";var t8=kt(),TIe=$t(),r8=bi(),IIe=Mn(),i8=Ao(),n8=$d(),a8=lC(),CIe=Ch(),PIe=Ph(),MIe=cC(),OIe=jb(),kIe=At(),o8=Zt();s8.exports=function(e,t,r,a){var u="stackTraceLimit",s=a?2:1,m=e.split("."),x=m[m.length-1],q=t8.apply(null,m);if(q){var T=q.prototype;if(!o8&&TIe(T,"cause")&&delete T.cause,!r)return q;var I=t8("Error"),L=t(function(z,Y){var pe=PIe(a?Y:z,void 0),de=a?new q(z):new q;return pe!==void 0&&r8(de,"message",pe),OIe(de,L,de.stack,2),this&&IIe(T,this)&&CIe(de,this,L),arguments.length>s&&MIe(de,arguments[s]),de});if(L.prototype=T,x!=="Error"?i8?i8(L,I):n8(L,I,{name:!0}):kIe&&u in q&&(a8(L,q,u),a8(L,q,"prepareStackTrace")),n8(L,q),!o8)try{T.name!==x&&r8(T,"name",x),T.constructor=L}catch(z){}return L}}});var h8=w(()=>{"use strict";var l8=$(),RIe=ct(),Os=On(),c8=fC(),dC="WebAssembly",u8=RIe[dC],Vb=new Error("e",{cause:7}).cause!==7,Mh=function(e,t){var r={};r[e]=c8(e,t,Vb),l8({global:!0,constructor:!0,arity:1,forced:Vb},r)},pC=function(e,t){if(u8&&u8[e]){var r={};r[e]=c8(dC+"."+e,t,Vb),l8({target:dC,stat:!0,constructor:!0,arity:1,forced:Vb},r)}};Mh("Error",function(e){return function(r){return Os(e,this,arguments)}});Mh("EvalError",function(e){return function(r){return Os(e,this,arguments)}});Mh("RangeError",function(e){return function(r){return Os(e,this,arguments)}});Mh("ReferenceError",function(e){return function(r){return Os(e,this,arguments)}});Mh("SyntaxError",function(e){return function(r){return Os(e,this,arguments)}});Mh("TypeError",function(e){return function(r){return Os(e,this,arguments)}});Mh("URIError",function(e){return function(r){return Os(e,this,arguments)}});pC("CompileError",function(e){return function(r){return Os(e,this,arguments)}});pC("LinkError",function(e){return function(r){return Os(e,this,arguments)}});pC("RuntimeError",function(e){return function(r){return Os(e,this,arguments)}})});var mC=w((aTt,d8)=>{"use strict";var DIe=At(),LIe=ze(),FIe=rt(),zIe=pi(),f8=Ph(),$b=Error.prototype.toString,NIe=LIe(function(){if(DIe){var e=zIe(Object.defineProperty({},"name",{get:function(){return this===e}}));if($b.call(e)!=="true")return!0}return $b.call({message:1,name:2})!=="2: 1"||$b.call({})!=="Error"});d8.exports=NIe?function(){var t=FIe(this),r=f8(t.name,"Error"),a=f8(t.message);return r?a?r+": "+a:r:a}:$b});var v8=w(()=>{"use strict";var BIe=yr(),p8=mC(),m8=Error.prototype;m8.toString!==p8&&BIe(m8,"toString",p8)});var Wb=w((uTt,g8)=>{"use strict";var UIe=ze();g8.exports=!UIe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var wi=w((lTt,_8)=>{"use strict";var jIe=$t(),VIe=zt(),$Ie=Ht(),WIe=Pg(),GIe=Wb(),y8=WIe("IE_PROTO"),vC=Object,KIe=vC.prototype;_8.exports=GIe?vC.getPrototypeOf:function(e){var t=$Ie(e);if(jIe(t,y8))return t[y8];var r=t.constructor;return VIe(r)&&t instanceof r?r.prototype:t instanceof vC?KIe:null}});var Oh=w((cTt,x8)=>{"use strict";x8.exports={}});var Gb=w((hTt,b8)=>{"use strict";var ZIe=Et(),HIe=Oh(),XIe=ZIe("iterator"),JIe=Array.prototype;b8.exports=function(e){return e!==void 0&&(HIe.Array===e||JIe[XIe]===e)}});var Mu=w((fTt,S8)=>{"use strict";var YIe=xa(),w8=di(),QIe=xi(),e2e=Oh(),t2e=Et(),r2e=t2e("iterator");S8.exports=function(e){if(!QIe(e))return w8(e,r2e)||w8(e,"@@iterator")||e2e[YIe(e)]}});var ac=w((dTt,q8)=>{"use strict";var i2e=Qe(),n2e=Rt(),a2e=rt(),o2e=tc(),s2e=Mu(),u2e=TypeError;q8.exports=function(e,t){var r=arguments.length<2?s2e(e):t;if(n2e(r))return a2e(i2e(r,e));throw new u2e(o2e(e)+" is not iterable")}});var Ou=w((pTt,E8)=>{"use strict";var l2e=Qe(),A8=rt(),c2e=di();E8.exports=function(e,t,r){var a,u;A8(e);try{if(a=c2e(e,"return"),!a){if(t==="throw")throw r;return r}a=l2e(a,e)}catch(s){u=!0,a=s}if(t==="throw")throw r;if(u)throw a;return A8(a),r}});var ai=w((mTt,P8)=>{"use strict";var h2e=qr(),f2e=Qe(),d2e=rt(),p2e=tc(),m2e=Gb(),v2e=Yt(),T8=Mn(),g2e=ac(),y2e=Mu(),I8=Ou(),_2e=TypeError,Kb=function(e,t){this.stopped=e,this.result=t},C8=Kb.prototype;P8.exports=function(e,t,r){var a=r&&r.that,u=!!(r&&r.AS_ENTRIES),s=!!(r&&r.IS_RECORD),m=!!(r&&r.IS_ITERATOR),x=!!(r&&r.INTERRUPTED),q=h2e(t,a),T,I,L,z,Y,pe,de,Z=function(J){return T&&I8(T,"normal",J),new Kb(!0,J)},H=function(J){return u?(d2e(J),x?q(J[0],J[1],Z):q(J[0],J[1])):x?q(J,Z):q(J)};if(s)T=e.iterator;else if(m)T=e;else{if(I=y2e(e),!I)throw new _2e(p2e(e)+" is not iterable");if(m2e(I)){for(L=0,z=v2e(e);z>L;L++)if(Y=H(e[L]),Y&&T8(C8,Y))return Y;return new Kb(!1)}T=g2e(e,I)}for(pe=s?e.next:T.next;!(de=f2e(pe,T)).done;){try{Y=H(de.value)}catch(J){I8(T,"throw",J)}if(typeof Y=="object"&&Y&&T8(C8,Y))return Y}return new Kb(!1)}});var O8=w(()=>{"use strict";var x2e=$(),b2e=Mn(),w2e=wi(),Zb=Ao(),S2e=$d(),M8=pi(),gC=bi(),yC=ya(),q2e=cC(),A2e=jb(),E2e=ai(),T2e=Ph(),I2e=Et(),C2e=I2e("toStringTag"),Hb=Error,P2e=[].push,Hd=function(t,r){var a=b2e(_C,this),u;Zb?u=Zb(new Hb,a?w2e(this):_C):(u=a?this:M8(_C),gC(u,C2e,"Error")),r!==void 0&&gC(u,"message",T2e(r)),A2e(u,Hd,u.stack,1),arguments.length>2&&q2e(u,arguments[2]);var s=[];return E2e(t,P2e,{that:s}),gC(u,"errors",s),u};Zb?Zb(Hd,Hb):S2e(Hd,Hb,{name:!0});var _C=Hd.prototype=M8(Hb.prototype,{constructor:yC(1,Hd),message:yC(1,""),name:yC(1,"AggregateError")});x2e({global:!0,constructor:!0,arity:2},{AggregateError:Hd})});var xC=w(()=>{"use strict";O8()});var L8=w(()=>{"use strict";var M2e=$(),O2e=kt(),k2e=On(),k8=ze(),R2e=fC(),bC="AggregateError",R8=O2e(bC),D8=!k8(function(){return R8([1]).errors[0]!==1})&&k8(function(){return R8([1],bC,{cause:7}).cause!==7});M2e({global:!0,constructor:!0,arity:2,forced:D8},{AggregateError:R2e(bC,function(e){return function(r,a){return k2e(e,this,arguments)}},D8,!0)})});var Qr=w((wTt,F8)=>{"use strict";var D2e=Et(),L2e=pi(),F2e=Or().f,wC=D2e("unscopables"),SC=Array.prototype;SC[wC]===void 0&&F2e(SC,wC,{configurable:!0,value:L2e(null)});F8.exports=function(e){SC[wC][e]=!0}});var qC=w(()=>{"use strict";var z2e=$(),N2e=Ht(),B2e=Yt(),U2e=zr(),j2e=Qr();z2e({target:"Array",proto:!0},{at:function(t){var r=N2e(this),a=B2e(r),u=U2e(t),s=u>=0?u:a+u;return s<0||s>=a?void 0:r[s]}});j2e("at")});var oc=w((ATt,z8)=>{"use strict";var V2e=TypeError,$2e=9007199254740991;z8.exports=function(e){if(e>$2e)throw V2e("Maximum allowed index exceeded");return e}});var Xd=w((ETt,N8)=>{"use strict";var W2e=ze(),G2e=Et(),K2e=Ps(),Z2e=G2e("species");N8.exports=function(e){return K2e>=51||!W2e(function(){var t=[],r=t.constructor={};return r[Z2e]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var V8=w(()=>{"use strict";var H2e=$(),X2e=ze(),J2e=is(),Y2e=Nt(),Q2e=Ht(),eCe=Yt(),B8=oc(),U8=So(),tCe=Gd(),rCe=Xd(),iCe=Et(),nCe=Ps(),j8=iCe("isConcatSpreadable"),aCe=nCe>=51||!X2e(function(){var e=[];return e[j8]=!1,e.concat()[0]!==e}),oCe=function(e){if(!Y2e(e))return!1;var t=e[j8];return t!==void 0?!!t:J2e(e)},sCe=!aCe||!rCe("concat");H2e({target:"Array",proto:!0,arity:1,forced:sCe},{concat:function(t){var r=Q2e(this),a=tCe(r,0),u=0,s,m,x,q,T;for(s=-1,x=arguments.length;s<x;s++)if(T=s===-1?r:arguments[s],oCe(T))for(q=eCe(T),B8(u+q),m=0;m<q;m++,u++)m in T&&U8(a,u,T[m]);else B8(u+1),U8(a,u++,T);return a.length=u,a}})});var Vg=w((CTt,W8)=>{"use strict";var $8=tc(),uCe=TypeError;W8.exports=function(e,t){if(!delete e[t])throw new uCe("Cannot delete property "+$8(t)+" of "+$8(e))}});var EC=w((PTt,G8)=>{"use strict";var lCe=Ht(),AC=wo(),cCe=Yt(),hCe=Vg(),fCe=Math.min;G8.exports=[].copyWithin||function(t,r){var a=lCe(this),u=cCe(a),s=AC(t,u),m=AC(r,u),x=arguments.length>2?arguments[2]:void 0,q=fCe((x===void 0?u:AC(x,u))-m,u-s),T=1;for(m<s&&s<m+q&&(T=-1,m+=q-1,s+=q-1);q-->0;)m in a?a[s]=a[m]:hCe(a,s),s+=T,m+=T;return a}});var K8=w(()=>{"use strict";var dCe=$(),pCe=EC(),mCe=Qr();dCe({target:"Array",proto:!0},{copyWithin:pCe});mCe("copyWithin")});var Eo=w((kTt,Z8)=>{"use strict";var vCe=ze();Z8.exports=function(e,t){var r=[][e];return!!r&&vCe(function(){r.call(null,t||function(){return 1},1)})}});var H8=w(()=>{"use strict";var gCe=$(),yCe=mi().every,_Ce=Eo(),xCe=_Ce("every");gCe({target:"Array",proto:!0,forced:!xCe},{every:function(t){return yCe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Xb=w((LTt,J8)=>{"use strict";var bCe=Ht(),X8=wo(),wCe=Yt();J8.exports=function(t){for(var r=bCe(this),a=wCe(r),u=arguments.length,s=X8(u>1?arguments[1]:void 0,a),m=u>2?arguments[2]:void 0,x=m===void 0?a:X8(m,a);x>s;)r[s++]=t;return r}});var Y8=w(()=>{"use strict";var SCe=$(),qCe=Xb(),ACe=Qr();SCe({target:"Array",proto:!0},{fill:qCe});ACe("fill")});var Q8=w(()=>{"use strict";var ECe=$(),TCe=mi().filter,ICe=Xd(),CCe=ICe("filter");ECe({target:"Array",proto:!0,forced:!CCe},{filter:function(t){return TCe(this,t,arguments.length>1?arguments[1]:void 0)}})});var t$=w(()=>{"use strict";var PCe=$(),MCe=mi().find,OCe=Qr(),TC="find",e$=!0;TC in[]&&Array(1)[TC](function(){e$=!1});PCe({target:"Array",proto:!0,forced:e$},{find:function(t){return MCe(this,t,arguments.length>1?arguments[1]:void 0)}});OCe(TC)});var i$=w(()=>{"use strict";var kCe=$(),RCe=mi().findIndex,DCe=Qr(),IC="findIndex",r$=!0;IC in[]&&Array(1)[IC](function(){r$=!1});kCe({target:"Array",proto:!0,forced:r$},{findIndex:function(t){return RCe(this,t,arguments.length>1?arguments[1]:void 0)}});DCe(IC)});var $g=w((WTt,a$)=>{"use strict";var LCe=qr(),FCe=qu(),zCe=Ht(),NCe=Yt(),n$=function(e){var t=e===1;return function(r,a,u){for(var s=zCe(r),m=FCe(s),x=LCe(a,u),q=NCe(m),T,I;q-->0;)if(T=m[q],I=x(T,q,s),I)switch(e){case 0:return T;case 1:return q;}return t?-1:void 0}};a$.exports={findLast:n$(0),findLastIndex:n$(1)}});var CC=w(()=>{"use strict";var BCe=$(),UCe=$g().findLast,jCe=Qr();BCe({target:"Array",proto:!0},{findLast:function(t){return UCe(this,t,arguments.length>1?arguments[1]:void 0)}});jCe("findLast")});var PC=w(()=>{"use strict";var VCe=$(),$Ce=$g().findLastIndex,WCe=Qr();VCe({target:"Array",proto:!0},{findLastIndex:function(t){return $Ce(this,t,arguments.length>1?arguments[1]:void 0)}});WCe("findLastIndex")});var MC=w((XTt,s$)=>{"use strict";var GCe=is(),KCe=Yt(),ZCe=oc(),HCe=qr(),o$=function(e,t,r,a,u,s,m,x){for(var q=u,T=0,I=m?HCe(m,x):!1,L,z;T<a;)T in r&&(L=I?I(r[T],T,t):r[T],s>0&&GCe(L)?(z=KCe(L),q=o$(e,t,L,z,q,s-1)-1):(ZCe(q+1),e[q]=L),q++),T++;return q};s$.exports=o$});var u$=w(()=>{"use strict";var XCe=$(),JCe=MC(),YCe=Ht(),QCe=Yt(),ePe=zr(),tPe=Gd();XCe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=YCe(this),a=QCe(r),u=tPe(r,0);return u.length=JCe(u,r,r,a,0,t===void 0?1:ePe(t)),u}})});var l$=w(()=>{"use strict";var rPe=$(),iPe=MC(),nPe=Rt(),aPe=Ht(),oPe=Yt(),sPe=Gd();rPe({target:"Array",proto:!0},{flatMap:function(t){var r=aPe(this),a=oPe(r),u;return nPe(t),u=sPe(r,0),u.length=iPe(u,r,r,a,0,1,t,arguments.length>1?arguments[1]:void 0),u}})});var OC=w((tIt,c$)=>{"use strict";var uPe=mi().forEach,lPe=Eo(),cPe=lPe("forEach");c$.exports=cPe?[].forEach:function(t){return uPe(this,t,arguments.length>1?arguments[1]:void 0)}});var f$=w(()=>{"use strict";var hPe=$(),h$=OC();hPe({target:"Array",proto:!0,forced:[].forEach!==h$},{forEach:h$})});var Jb=w((nIt,d$)=>{"use strict";var fPe=rt(),dPe=Ou();d$.exports=function(e,t,r,a){try{return a?t(fPe(r)[0],r[1]):t(r)}catch(u){dPe(e,"throw",u)}}});var kC=w((aIt,v$)=>{"use strict";var pPe=qr(),mPe=Qe(),vPe=Ht(),gPe=Jb(),yPe=Gb(),_Pe=ns(),xPe=Yt(),p$=So(),bPe=ac(),wPe=Mu(),m$=Array;v$.exports=function(t){var r=vPe(t),a=_Pe(this),u=arguments.length,s=u>1?arguments[1]:void 0,m=s!==void 0;m&&(s=pPe(s,u>2?arguments[2]:void 0));var x=wPe(r),q=0,T,I,L,z,Y,pe;if(x&&!(this===m$&&yPe(x)))for(z=bPe(r,x),Y=z.next,I=a?new this:[];!(L=mPe(Y,z)).done;q++)pe=m?gPe(z,s,[L.value,q],!0):L.value,p$(I,q,pe);else for(T=xPe(r),I=a?new this(T):m$(T);T>q;q++)pe=m?s(r[q],q):r[q],p$(I,q,pe);return I.length=q,I}});var Wg=w((oIt,x$)=>{"use strict";var SPe=Et(),y$=SPe("iterator"),_$=!1;try{g$=0,RC={next:function(){return{done:!!g$++}},return:function(){_$=!0}},RC[y$]=function(){return this},Array.from(RC,function(){throw 2})}catch(e){}var g$,RC;x$.exports=function(e,t){try{if(!t&&!_$)return!1}catch(u){return!1}var r=!1;try{var a={};a[y$]=function(){return{next:function(){return{done:r=!0}}}},e(a)}catch(u){}return r}});var b$=w(()=>{"use strict";var qPe=$(),APe=kC(),EPe=Wg(),TPe=!EPe(function(e){Array.from(e)});qPe({target:"Array",stat:!0,forced:TPe},{from:APe})});var w$=w(()=>{"use strict";var IPe=$(),CPe=Vd().includes,PPe=ze(),MPe=Qr(),OPe=PPe(function(){return!Array(1).includes()});IPe({target:"Array",proto:!0,forced:OPe},{includes:function(t){return CPe(this,t,arguments.length>1?arguments[1]:void 0)}});MPe("includes")});var q$=w(()=>{"use strict";var kPe=$(),RPe=Tu(),DPe=Vd().indexOf,LPe=Eo(),DC=RPe([].indexOf),S$=!!DC&&1/DC([1],1,-0)<0,FPe=S$||!LPe("indexOf");kPe({target:"Array",proto:!0,forced:FPe},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return S$?DC(this,t,r)||0:DPe(this,t,r)}})});var A$=w(()=>{"use strict";var zPe=$(),NPe=is();zPe({target:"Array",stat:!0},{isArray:NPe})});var kh=w((mIt,I$)=>{"use strict";var BPe=ze(),UPe=zt(),jPe=Nt(),VPe=pi(),E$=wi(),$Pe=yr(),WPe=Et(),GPe=Zt(),zC=WPe("iterator"),T$=!1,ku,LC,FC;[].keys&&(FC=[].keys(),"next"in FC?(LC=E$(E$(FC)),LC!==Object.prototype&&(ku=LC)):T$=!0);var KPe=!jPe(ku)||BPe(function(){var e={};return ku[zC].call(e)!==e});KPe?ku={}:GPe&&(ku=VPe(ku));UPe(ku[zC])||$Pe(ku,zC,function(){return this});I$.exports={IteratorPrototype:ku,BUGGY_SAFARI_ITERATORS:T$}});var sc=w((vIt,C$)=>{"use strict";var ZPe=kh().IteratorPrototype,HPe=pi(),XPe=ya(),JPe=ba(),YPe=Oh(),QPe=function(){return this};C$.exports=function(e,t,r,a){var u=t+" Iterator";return e.prototype=HPe(ZPe,{next:XPe(+!a,r)}),JPe(e,u,!1,!0),YPe[u]=QPe,e}});var e1=w((gIt,N$)=>{"use strict";var eMe=$(),tMe=Qe(),Yb=Zt(),F$=wh(),rMe=zt(),iMe=sc(),P$=wi(),M$=Ao(),nMe=ba(),aMe=bi(),NC=yr(),oMe=Et(),O$=Oh(),z$=kh(),sMe=F$.PROPER,uMe=F$.CONFIGURABLE,k$=z$.IteratorPrototype,Qb=z$.BUGGY_SAFARI_ITERATORS,Gg=oMe("iterator"),R$="keys",Kg="values",D$="entries",L$=function(){return this};N$.exports=function(e,t,r,a,u,s,m){iMe(r,t,a);var x=function(H){if(H===u&&z)return z;if(!Qb&&H&&H in I)return I[H];switch(H){case R$:return function(){return new r(this,H)};case Kg:return function(){return new r(this,H)};case D$:return function(){return new r(this,H)};}return function(){return new r(this)}},q=t+" Iterator",T=!1,I=e.prototype,L=I[Gg]||I["@@iterator"]||u&&I[u],z=!Qb&&L||x(u),Y=t==="Array"&&I.entries||L,pe,de,Z;if(Y&&(pe=P$(Y.call(new e)),pe!==Object.prototype&&pe.next&&(!Yb&&P$(pe)!==k$&&(M$?M$(pe,k$):rMe(pe[Gg])||NC(pe,Gg,L$)),nMe(pe,q,!0,!0),Yb&&(O$[q]=L$))),sMe&&u===Kg&&L&&L.name!==Kg&&(!Yb&&uMe?aMe(I,"name",Kg):(T=!0,z=function(){return tMe(L,this)})),u)if(de={values:x(Kg),keys:s?z:x(R$),entries:x(D$)},m)for(Z in de)(Qb||T||!(Z in I))&&NC(I,Z,de[Z]);else eMe({target:t,proto:!0,forced:Qb||T},de);return(!Yb||m)&&I[Gg]!==z&&NC(I,Gg,z,{name:u}),O$[t]=z,de}});var cn=w((yIt,B$)=>{"use strict";B$.exports=function(e,t){return{value:e,done:t}}});var Zg=w((_It,W$)=>{"use strict";var lMe=Ii(),BC=Qr(),U$=Oh(),V$=dr(),cMe=Or().f,hMe=e1(),t1=cn(),fMe=Zt(),dMe=At(),$$="Array Iterator",pMe=V$.set,mMe=V$.getterFor($$);W$.exports=hMe(Array,"Array",function(e,t){pMe(this,{type:$$,target:lMe(e),index:0,kind:t})},function(){var e=mMe(this),t=e.target,r=e.kind,a=e.index++;if(!t||a>=t.length)return e.target=void 0,t1(void 0,!0);switch(r){case"keys":return t1(a,!1);case"values":return t1(t[a],!1);}return t1([a,t[a]],!1)},"values");var j$=U$.Arguments=U$.Array;BC("keys");BC("values");BC("entries");if(!fMe&&dMe&&j$.name!=="values")try{cMe(j$,"name",{value:"values"})}catch(e){}});var G$=w(()=>{"use strict";var vMe=$(),gMe=ke(),yMe=qu(),_Me=Ii(),xMe=Eo(),bMe=gMe([].join),wMe=yMe!==Object,SMe=wMe||!xMe("join",",");vMe({target:"Array",proto:!0,forced:SMe},{join:function(t){return bMe(_Me(this),t===void 0?",":t)}})});var jC=w((wIt,Z$)=>{"use strict";var qMe=On(),AMe=Ii(),EMe=zr(),TMe=Yt(),IMe=Eo(),CMe=Math.min,UC=[].lastIndexOf,K$=!!UC&&1/[1].lastIndexOf(1,-0)<0,PMe=IMe("lastIndexOf"),MMe=K$||!PMe;Z$.exports=MMe?function(t){if(K$)return qMe(UC,this,arguments)||0;var r=AMe(this),a=TMe(r),u=a-1;for(arguments.length>1&&(u=CMe(u,EMe(arguments[1]))),u<0&&(u=a+u);u>=0;u--)if(u in r&&r[u]===t)return u||0;return-1}:UC});var X$=w(()=>{"use strict";var OMe=$(),H$=jC();OMe({target:"Array",proto:!0,forced:H$!==[].lastIndexOf},{lastIndexOf:H$})});var J$=w(()=>{"use strict";var kMe=$(),RMe=mi().map,DMe=Xd(),LMe=DMe("map");kMe({target:"Array",proto:!0,forced:!LMe},{map:function(t){return RMe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Q$=w(()=>{"use strict";var FMe=$(),zMe=ze(),NMe=ns(),BMe=So(),Y$=Array,UMe=zMe(function(){function e(){}return!(Y$.of.call(e)instanceof e)});FMe({target:"Array",stat:!0,forced:UMe},{of:function(){for(var t=0,r=arguments.length,a=new(NMe(this)?this:Y$)(r);r>t;)BMe(a,t,arguments[t++]);return a.length=r,a}})});var r1=w((CIt,eW)=>{"use strict";var jMe=At(),VMe=is(),$Me=TypeError,WMe=Object.getOwnPropertyDescriptor,GMe=jMe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();eW.exports=GMe?function(e,t){if(VMe(e)&&!WMe(e,"length").writable)throw new $Me("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var tW=w(()=>{"use strict";var KMe=$(),ZMe=Ht(),HMe=Yt(),XMe=r1(),JMe=oc(),YMe=ze(),QMe=YMe(function(){return[].push.call({length:4294967296},1)!==4294967297}),eOe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},tOe=QMe||!eOe();KMe({target:"Array",proto:!0,arity:1,forced:tOe},{push:function(t){var r=ZMe(this),a=HMe(r),u=arguments.length;JMe(a+u);for(var s=0;s<u;s++)r[a]=arguments[s],a++;return XMe(r,a),a}})});var Hg=w((OIt,iW)=>{"use strict";var rOe=Rt(),iOe=Ht(),nOe=qu(),aOe=Yt(),oOe=TypeError,rW=function(e){return function(t,r,a,u){rOe(r);var s=iOe(t),m=nOe(s),x=aOe(s),q=e?x-1:0,T=e?-1:1;if(a<2)for(;;){if(q in m){u=m[q],q+=T;break}if(q+=T,e?q<0:x<=q)throw new oOe("Reduce of empty array with no initial value")}for(;e?q>=0:x>q;q+=T)q in m&&(u=r(u,m[q],q,s));return u}};iW.exports={left:rW(!1),right:rW(!0)}});var ks=w((kIt,nW)=>{"use strict";var sOe=ct(),uOe=ln();nW.exports=uOe(sOe.process)==="process"});var oW=w(()=>{"use strict";var lOe=$(),cOe=Hg().left,hOe=Eo(),aW=Ps(),fOe=ks(),dOe=!fOe&&aW>79&&aW<83,pOe=dOe||!hOe("reduce");lOe({target:"Array",proto:!0,forced:pOe},{reduce:function(t){var r=arguments.length;return cOe(this,t,r,r>1?arguments[1]:void 0)}})});var uW=w(()=>{"use strict";var mOe=$(),vOe=Hg().right,gOe=Eo(),sW=Ps(),yOe=ks(),_Oe=!yOe&&sW>79&&sW<83,xOe=_Oe||!gOe("reduceRight");mOe({target:"Array",proto:!0,forced:xOe},{reduceRight:function(t){return vOe(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var cW=w(()=>{"use strict";var bOe=$(),wOe=ke(),SOe=is(),qOe=wOe([].reverse),lW=[1,2];bOe({target:"Array",proto:!0,forced:String(lW)===String(lW.reverse())},{reverse:function(){return SOe(this)&&(this.length=this.length),qOe(this)}})});var dW=w(()=>{"use strict";var AOe=$(),hW=is(),EOe=ns(),TOe=Nt(),fW=wo(),IOe=Yt(),COe=Ii(),POe=So(),MOe=Et(),OOe=Xd(),kOe=Cu(),ROe=OOe("slice"),DOe=MOe("species"),VC=Array,LOe=Math.max;AOe({target:"Array",proto:!0,forced:!ROe},{slice:function(t,r){var a=COe(this),u=IOe(a),s=fW(t,u),m=fW(r===void 0?u:r,u),x,q,T;if(hW(a)&&(x=a.constructor,EOe(x)&&(x===VC||hW(x.prototype))?x=void 0:TOe(x)&&(x=x[DOe],x===null&&(x=void 0)),x===VC||x===void 0))return kOe(a,s,m);for(q=new(x===void 0?VC:x)(LOe(m-s,0)),T=0;s<m;s++,T++)s in a&&POe(q,T,a[s]);return q.length=T,q}})});var pW=w(()=>{"use strict";var FOe=$(),zOe=mi().some,NOe=Eo(),BOe=NOe("some");FOe({target:"Array",proto:!0,forced:!BOe},{some:function(t){return zOe(this,t,arguments.length>1?arguments[1]:void 0)}})});var i1=w(($It,vW)=>{"use strict";var mW=Ah(),UOe=Math.floor,$C=function(e,t){var r=e.length,a=UOe(r/2);return r<8?jOe(e,t):VOe(e,$C(mW(e,0,a),t),$C(mW(e,a),t),t)},jOe=function(e,t){for(var r=e.length,a=1,u,s;a<r;){for(s=a,u=e[a];s&&t(e[s-1],u)>0;)e[s]=e[--s];s!==a++&&(e[s]=u)}return e},VOe=function(e,t,r,a){for(var u=t.length,s=r.length,m=0,x=0;m<u||x<s;)e[m+x]=m<u&&x<s?a(t[m],r[x])<=0?t[m++]:r[x++]:m<u?t[m++]:r[x++];return e};vW.exports=$C});var WC=w((WIt,yW)=>{"use strict";var $Oe=Cs(),gW=$Oe.match(/firefox\/(\d+)/i);yW.exports=!!gW&&+gW[1]});var GC=w((GIt,_W)=>{"use strict";var WOe=Cs();_W.exports=/MSIE|Trident/.test(WOe)});var n1=w((KIt,bW)=>{"use strict";var GOe=Cs(),xW=GOe.match(/AppleWebKit\/(\d+)\./);bW.exports=!!xW&&+xW[1]});var PW=w(()=>{"use strict";var KOe=$(),IW=ke(),ZOe=Rt(),HOe=Ht(),wW=Yt(),XOe=Vg(),SW=Lt(),KC=ze(),JOe=i1(),YOe=Eo(),qW=WC(),QOe=GC(),AW=Ps(),EW=n1(),uc=[],TW=IW(uc.sort),eke=IW(uc.push),tke=KC(function(){uc.sort(void 0)}),rke=KC(function(){uc.sort(null)}),ike=YOe("sort"),CW=!KC(function(){if(AW)return AW<70;if(!(qW&&qW>3)){if(QOe)return!0;if(EW)return EW<603;var e="",t,r,a,u;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2;}for(u=0;u<47;u++)uc.push({k:r+u,v:a})}for(uc.sort(function(s,m){return m.v-s.v}),u=0;u<uc.length;u++)r=uc[u].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),nke=tke||!rke||!ike||!CW,ake=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:SW(t)>SW(r)?1:-1}};KOe({target:"Array",proto:!0,forced:nke},{sort:function(t){t!==void 0&&ZOe(t);var r=HOe(this);if(CW)return t===void 0?TW(r):TW(r,t);var a=[],u=wW(r),s,m;for(m=0;m<u;m++)m in r&&eke(a,r[m]);for(JOe(a,ake(t)),s=wW(a),m=0;m<s;)r[m]=a[m++];for(;m<u;)XOe(r,m++);return r}})});var lc=w((XIt,OW)=>{"use strict";var oke=kt(),ske=Gr(),uke=Et(),lke=At(),MW=uke("species");OW.exports=function(e){var t=oke(e);lke&&t&&!t[MW]&&ske(t,MW,{configurable:!0,get:function(){return this}})}});var kW=w(()=>{"use strict";var cke=lc();cke("Array")});var RW=w(()=>{"use strict";var hke=$(),fke=Ht(),dke=wo(),pke=zr(),mke=Yt(),vke=r1(),gke=oc(),yke=Gd(),_ke=So(),ZC=Vg(),xke=Xd(),bke=xke("splice"),wke=Math.max,Ske=Math.min;hke({target:"Array",proto:!0,forced:!bke},{splice:function(t,r){var a=fke(this),u=mke(a),s=dke(t,u),m=arguments.length,x,q,T,I,L,z;for(m===0?x=q=0:m===1?(x=0,q=u-s):(x=m-2,q=Ske(wke(pke(r),0),u-s)),gke(u+x-q),T=yke(a,q),I=0;I<q;I++)L=s+I,L in a&&_ke(T,I,a[L]);if(T.length=q,x<q){for(I=s;I<u-q;I++)L=I+q,z=I+x,L in a?a[z]=a[L]:ZC(a,z);for(I=u;I>u-q+x;I--)ZC(a,I-1)}else if(x>q)for(I=u-q;I>s;I--)L=I+q-1,z=I+x-1,L in a?a[z]=a[L]:ZC(a,z);for(I=0;I<x;I++)a[I+s]=arguments[I+2];return vke(a,u-q+x),T}})});var HC=w((t2t,DW)=>{"use strict";var qke=Yt();DW.exports=function(e,t){for(var r=qke(e),a=new t(r),u=0;u<r;u++)a[u]=e[r-u-1];return a}});var XC=w(()=>{"use strict";var Ake=$(),Eke=HC(),Tke=Ii(),Ike=Qr(),Cke=Array;Ake({target:"Array",proto:!0},{toReversed:function(){return Eke(Tke(this),Cke)}});Ike("toReversed")});var Rh=w((n2t,LW)=>{"use strict";var Pke=Yt();LW.exports=function(e,t){for(var r=0,a=Pke(t),u=new e(a);a>r;)u[r]=t[r++];return u}});var JC=w((a2t,FW)=>{"use strict";var Mke=ct();FW.exports=function(e){return Mke[e].prototype}});var YC=w(()=>{"use strict";var Oke=$(),kke=ke(),Rke=Rt(),Dke=Ii(),Lke=Rh(),Fke=JC(),zke=Qr(),Nke=Array,Bke=kke(Fke("Array").sort);Oke({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&Rke(t);var r=Dke(this),a=Lke(Nke,r);return Bke(a,t)}});zke("toSorted")});var QC=w(()=>{"use strict";var Uke=$(),jke=Qr(),Vke=oc(),$ke=Yt(),Wke=wo(),Gke=Ii(),Kke=zr(),Zke=Array,Hke=Math.max,Xke=Math.min;Uke({target:"Array",proto:!0},{toSpliced:function(t,r){var a=Gke(this),u=$ke(a),s=Wke(t,u),m=arguments.length,x=0,q,T,I,L;for(m===0?q=T=0:m===1?(q=0,T=u-s):(q=m-2,T=Xke(Hke(Kke(r),0),u-s)),I=Vke(u+q-T),L=Zke(I);x<s;x++)L[x]=a[x];for(;x<s+q;x++)L[x]=arguments[x-s+2];for(;x<I;x++)L[x]=a[x+T-q];return L}});jke("toSpliced")});var zW=w(()=>{"use strict";var Jke=Qr();Jke("flat")});var NW=w(()=>{"use strict";var Yke=Qr();Yke("flatMap")});var BW=w(()=>{"use strict";var Qke=$(),eRe=Ht(),tRe=Yt(),rRe=r1(),iRe=Vg(),nRe=oc(),aRe=[].unshift(0)!==1,oRe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},sRe=aRe||!oRe();Qke({target:"Array",proto:!0,arity:1,forced:sRe},{unshift:function(t){var r=eRe(this),a=tRe(r),u=arguments.length;if(u){nRe(a+u);for(var s=a;s--;){var m=s+u;s in r?r[m]=r[s]:iRe(r,m)}for(var x=0;x<u;x++)r[x]=arguments[x]}return rRe(r,a+u)}})});var eP=w((v2t,UW)=>{"use strict";var uRe=Yt(),lRe=zr(),cRe=RangeError;UW.exports=function(e,t,r,a){var u=uRe(e),s=lRe(r),m=s<0?u+s:s;if(m>=u||m<0)throw new cRe("Incorrect index");for(var x=new t(u),q=0;q<u;q++)x[q]=q===m?a:e[q];return x}});var tP=w(()=>{"use strict";var hRe=$(),fRe=eP(),dRe=Ii(),pRe=Array;hRe({target:"Array",proto:!0},{with:function(e,t){return fRe(dRe(this),pRe,e,t)}})});var a1=w((_2t,jW)=>{"use strict";jW.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var To=w((x2t,VW)=>{"use strict";var mRe=yr();VW.exports=function(e,t,r){for(var a in t)mRe(e,a,t[a],r);return e}});var kn=w((b2t,$W)=>{"use strict";var vRe=Mn(),gRe=TypeError;$W.exports=function(e,t){if(vRe(t,e))return e;throw new gRe("Incorrect invocation")}});var Jd=w((w2t,WW)=>{"use strict";var yRe=zr(),_Re=_a(),xRe=RangeError;WW.exports=function(e){if(e===void 0)return 0;var t=yRe(e),r=_Re(t);if(t!==r)throw new xRe("Wrong length or index");return r}});var o1=w((S2t,GW)=>{"use strict";GW.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var rP=w((q2t,HW)=>{"use strict";var bRe=o1(),wRe=Math.abs,ZW=2220446049250313e-31,KW=1/ZW,SRe=function(e){return e+KW-KW};HW.exports=function(e,t,r,a){var u=+e,s=wRe(u),m=bRe(u);if(s<a)return m*SRe(s/a/t)*a*t;var x=(1+t/ZW)*s,q=x-(x-s);return q>r||q!==q?m*(1/0):m*q}});var s1=w((A2t,XW)=>{"use strict";var qRe=rP(),ARe=1.1920928955078125e-7,ERe=34028234663852886e22,TRe=11754943508222875e-54;XW.exports=Math.fround||function(t){return qRe(t,ARe,ERe,TRe)}});var u1=w((E2t,JW)=>{"use strict";var IRe=Array,CRe=Math.abs,Ru=Math.pow,PRe=Math.floor,MRe=Math.log,ORe=Math.LN2,kRe=function(e,t,r){var a=IRe(r),u=r*8-t-1,s=(1<<u)-1,m=s>>1,x=t===23?Ru(2,-24)-Ru(2,-77):0,q=e<0||e===0&&1/e<0?1:0,T=0,I,L,z;for(e=CRe(e),e!==e||e===1/0?(L=e!==e?1:0,I=s):(I=PRe(MRe(e)/ORe),z=Ru(2,-I),e*z<1&&(I--,z*=2),I+m>=1?e+=x/z:e+=x*Ru(2,1-m),e*z>=2&&(I++,z/=2),I+m>=s?(L=0,I=s):I+m>=1?(L=(e*z-1)*Ru(2,t),I+=m):(L=e*Ru(2,m-1)*Ru(2,t),I=0));t>=8;)a[T++]=L&255,L/=256,t-=8;for(I=I<<t|L,u+=t;u>0;)a[T++]=I&255,I/=256,u-=8;return a[--T]|=q*128,a},RRe=function(e,t){var r=e.length,a=r*8-t-1,u=(1<<a)-1,s=u>>1,m=a-7,x=r-1,q=e[x--],T=q&127,I;for(q>>=7;m>0;)T=T*256+e[x--],m-=8;for(I=T&(1<<-m)-1,T>>=-m,m+=t;m>0;)I=I*256+e[x--],m-=8;if(T===0)T=1-s;else{if(T===u)return I?NaN:q?-1/0:1/0;I+=Ru(2,t),T-=s}return(q?-1:1)*I*Ru(2,T-t)};JW.exports={pack:kRe,unpack:RRe}});var Yg=w((T2t,m7)=>{"use strict";var p1=ct(),lP=ke(),iP=At(),DRe=a1(),c7=wh(),YW=bi(),LRe=Gr(),QW=To(),nP=ze(),l1=kn(),FRe=zr(),zRe=_a(),f1=Jd(),NRe=s1(),h7=u1(),BRe=wi(),e7=Ao(),URe=Eu().f,jRe=Xb(),VRe=Ah(),f7=ba(),cP=dr(),$Re=c7.PROPER,t7=c7.CONFIGURABLE,Qd="ArrayBuffer",m1="DataView",ep="prototype",WRe="Wrong length",d7="Wrong index",r7=cP.getterFor(Qd),Jg=cP.getterFor(m1),i7=cP.set,Io=p1[Qd],Xa=Io,Yd=Xa&&Xa[ep],Rs=p1[m1],Dh=Rs&&Rs[ep],n7=Object.prototype,GRe=p1.Array,d1=p1.RangeError,KRe=lP(jRe),ZRe=lP([].reverse),p7=h7.pack,a7=h7.unpack,o7=function(e){return[e&255]},s7=function(e){return[e&255,e>>8&255]},u7=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},l7=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},HRe=function(e){return p7(NRe(e),23,4)},XRe=function(e){return p7(e,52,8)},c1=function(e,t,r){LRe(e[ep],t,{configurable:!0,get:function(){return r(this)[t]}})},cc=function(e,t,r,a){var u=Jg(e),s=f1(r),m=!!a;if(s+t>u.byteLength)throw new d1(d7);var x=u.bytes,q=s+u.byteOffset,T=VRe(x,q,q+t);return m?T:ZRe(T)},hc=function(e,t,r,a,u,s){var m=Jg(e),x=f1(r),q=a(+u),T=!!s;if(x+t>m.byteLength)throw new d1(d7);for(var I=m.bytes,L=x+m.byteOffset,z=0;z<t;z++)I[L+z]=q[T?z:t-z-1]};if(!DRe)Xa=function(t){l1(this,Yd);var r=f1(t);i7(this,{type:Qd,bytes:KRe(GRe(r),0),byteLength:r}),iP||(this.byteLength=r,this.detached=!1)},Yd=Xa[ep],Rs=function(t,r,a){l1(this,Dh),l1(t,Yd);var u=r7(t),s=u.byteLength,m=FRe(r);if(m<0||m>s)throw new d1("Wrong offset");if(a=a===void 0?s-m:zRe(a),m+a>s)throw new d1(WRe);i7(this,{type:m1,buffer:t,byteLength:a,byteOffset:m,bytes:u.bytes}),iP||(this.buffer=t,this.byteLength=a,this.byteOffset=m)},Dh=Rs[ep],iP&&(c1(Xa,"byteLength",r7),c1(Rs,"buffer",Jg),c1(Rs,"byteLength",Jg),c1(Rs,"byteOffset",Jg)),QW(Dh,{getInt8:function(t){return cc(this,1,t)[0]<<24>>24},getUint8:function(t){return cc(this,1,t)[0]},getInt16:function(t){var r=cc(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=cc(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return l7(cc(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return l7(cc(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return a7(cc(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return a7(cc(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){hc(this,1,t,o7,r)},setUint8:function(t,r){hc(this,1,t,o7,r)},setInt16:function(t,r){hc(this,2,t,s7,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){hc(this,2,t,s7,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){hc(this,4,t,u7,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){hc(this,4,t,u7,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){hc(this,4,t,HRe,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){hc(this,8,t,XRe,r,arguments.length>2?arguments[2]:!1)}});else{if(aP=$Re&&Io.name!==Qd,!nP(function(){Io(1)})||!nP(function(){new Io(-1)})||nP(function(){return new Io,new Io(1.5),new Io(NaN),Io.length!==1||aP&&!t7})){for(Xa=function(t){return l1(this,Yd),new Io(f1(t))},Xa[ep]=Yd,oP=URe(Io),sP=0;oP.length>sP;)(h1=oP[sP++])in Xa||YW(Xa,h1,Io[h1]);Yd.constructor=Xa}else aP&&t7&&YW(Io,"name",Qd);e7&&BRe(Dh)!==n7&&e7(Dh,n7),Xg=new Rs(new Xa(2)),uP=lP(Dh.setInt8),Xg.setInt8(0,2147483648),Xg.setInt8(1,2147483649),(Xg.getInt8(0)||!Xg.getInt8(1))&&QW(Dh,{setInt8:function(t,r){uP(this,t,r<<24>>24)},setUint8:function(t,r){uP(this,t,r<<24>>24)}},{unsafe:!0})}var aP,oP,sP,h1,Xg,uP;f7(Xa,Qd);f7(Rs,m1);m7.exports={ArrayBuffer:Xa,DataView:Rs}});var g7=w(()=>{"use strict";var JRe=$(),YRe=ct(),QRe=Yg(),eDe=lc(),hP="ArrayBuffer",v7=QRe[hP],tDe=YRe[hP];JRe({global:!0,constructor:!0,forced:tDe!==v7},{ArrayBuffer:v7});eDe(hP)});var Wt=w((P2t,T7)=>{"use strict";var rDe=a1(),mP=At(),Hn=ct(),b7=zt(),y1=Nt(),dc=$t(),vP=xa(),iDe=tc(),nDe=bi(),fP=yr(),aDe=Gr(),oDe=Mn(),_1=wi(),rp=Ao(),sDe=Et(),uDe=rc(),w7=dr(),S7=w7.enforce,lDe=w7.get,v1=Hn.Int8Array,dP=v1&&v1.prototype,y7=Hn.Uint8ClampedArray,_7=y7&&y7.prototype,Ds=v1&&_1(v1),as=dP&&_1(dP),cDe=Object.prototype,gP=Hn.TypeError,x7=sDe("toStringTag"),pP=uDe("TYPED_ARRAY_TAG"),g1="TypedArrayConstructor",Du=rDe&&!!rp&&vP(Hn.opera)!=="Opera",q7=!1,Sa,fc,tp,Lu={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},yP={BigInt64Array:8,BigUint64Array:8},hDe=function(t){if(!y1(t))return!1;var r=vP(t);return r==="DataView"||dc(Lu,r)||dc(yP,r)},A7=function(e){var t=_1(e);if(y1(t)){var r=lDe(t);return r&&dc(r,g1)?r[g1]:A7(t)}},E7=function(e){if(!y1(e))return!1;var t=vP(e);return dc(Lu,t)||dc(yP,t)},fDe=function(e){if(E7(e))return e;throw new gP("Target is not a typed array")},dDe=function(e){if(b7(e)&&(!rp||oDe(Ds,e)))return e;throw new gP(iDe(e)+" is not a typed array constructor")},pDe=function(e,t,r,a){if(mP){if(r)for(var u in Lu){var s=Hn[u];if(s&&dc(s.prototype,e))try{delete s.prototype[e]}catch(m){try{s.prototype[e]=t}catch(x){}}}(!as[e]||r)&&fP(as,e,r?t:Du&&dP[e]||t,a)}},mDe=function(e,t,r){var a,u;if(mP){if(rp){if(r){for(a in Lu)if(u=Hn[a],u&&dc(u,e))try{delete u[e]}catch(s){}}if(!Ds[e]||r)try{return fP(Ds,e,r?t:Du&&Ds[e]||t)}catch(s){}else return}for(a in Lu)u=Hn[a],u&&(!u[e]||r)&&fP(u,e,t)}};for(Sa in Lu)fc=Hn[Sa],tp=fc&&fc.prototype,tp?S7(tp)[g1]=fc:Du=!1;for(Sa in yP)fc=Hn[Sa],tp=fc&&fc.prototype,tp&&(S7(tp)[g1]=fc);if((!Du||!b7(Ds)||Ds===Function.prototype)&&(Ds=function(){throw new gP("Incorrect invocation")},Du))for(Sa in Lu)Hn[Sa]&&rp(Hn[Sa],Ds);if((!Du||!as||as===cDe)&&(as=Ds.prototype,Du))for(Sa in Lu)Hn[Sa]&&rp(Hn[Sa].prototype,as);Du&&_1(_7)!==as&&rp(_7,as);if(mP&&!dc(as,x7)){q7=!0,aDe(as,x7,{configurable:!0,get:function(){return y1(this)?this[pP]:void 0}});for(Sa in Lu)Hn[Sa]&&nDe(Hn[Sa],pP,Sa)}T7.exports={NATIVE_ARRAY_BUFFER_VIEWS:Du,TYPED_ARRAY_TAG:q7&&pP,aTypedArray:fDe,aTypedArrayConstructor:dDe,exportTypedArrayMethod:pDe,exportTypedArrayStaticMethod:mDe,getTypedArrayConstructor:A7,isView:hDe,isTypedArray:E7,TypedArray:Ds,TypedArrayPrototype:as}});var C7=w(()=>{"use strict";var vDe=$(),I7=Wt(),gDe=I7.NATIVE_ARRAY_BUFFER_VIEWS;vDe({target:"ArrayBuffer",stat:!0,forced:!gDe},{isView:I7.isView})});var ip=w((k2t,P7)=>{"use strict";var yDe=ns(),_De=tc(),xDe=TypeError;P7.exports=function(e){if(yDe(e))return e;throw new xDe(_De(e)+" is not a constructor")}});var Lh=w((R2t,O7)=>{"use strict";var M7=rt(),bDe=ip(),wDe=xi(),SDe=Et(),qDe=SDe("species");O7.exports=function(e,t){var r=M7(e).constructor,a;return r===void 0||wDe(a=M7(r)[qDe])?t:bDe(a)}});var z7=w(()=>{"use strict";var ADe=$(),xP=Tu(),EDe=ze(),L7=Yg(),k7=rt(),R7=wo(),TDe=_a(),IDe=Lh(),bP=L7.ArrayBuffer,_P=L7.DataView,F7=_P.prototype,D7=xP(bP.prototype.slice),CDe=xP(F7.getUint8),PDe=xP(F7.setUint8),MDe=EDe(function(){return!new bP(2).slice(1,void 0).byteLength});ADe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:MDe},{slice:function(t,r){if(D7&&r===void 0)return D7(k7(this),t);for(var a=k7(this).byteLength,u=R7(t,a),s=R7(r===void 0?a:r,a),m=new(IDe(this,bP))(TDe(s-u)),x=new _P(this),q=new _P(m),T=0;u<s;)PDe(q,T++,CDe(x,u++));return m}})});var N7=w(()=>{"use strict";var ODe=$(),kDe=Yg(),RDe=a1();ODe({global:!0,constructor:!0,forced:!RDe},{DataView:kDe.DataView})});var B7=w(()=>{"use strict";N7()});var U7=w(()=>{"use strict";var DDe=$(),LDe=ke(),FDe=ze(),zDe=FDe(function(){return new Date(16e11).getYear()!==120}),NDe=LDe(Date.prototype.getFullYear);DDe({target:"Date",proto:!0,forced:zDe},{getYear:function(){return NDe(this)-1900}})});var V7=w(()=>{"use strict";var BDe=$(),UDe=ke(),j7=Date,jDe=UDe(j7.prototype.getTime);BDe({target:"Date",stat:!0},{now:function(){return jDe(new j7)}})});var G7=w(()=>{"use strict";var VDe=$(),$7=ke(),$De=zr(),W7=Date.prototype,WDe=$7(W7.getTime),GDe=$7(W7.setFullYear);VDe({target:"Date",proto:!0},{setYear:function(t){WDe(this);var r=$De(t),a=r>=0&&r<=99?r+1900:r;return GDe(this,a)}})});var K7=w(()=>{"use strict";var KDe=$();KDe({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var Qg=w((H2t,Z7)=>{"use strict";var ZDe=zr(),HDe=Lt(),XDe=Fr(),JDe=RangeError;Z7.exports=function(t){var r=HDe(XDe(this)),a="",u=ZDe(t);if(u<0||u===1/0)throw new JDe("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(r+=r))u&1&&(a+=r);return a}});var x1=w((X2t,Y7)=>{"use strict";var J7=ke(),YDe=_a(),H7=Lt(),QDe=Qg(),eLe=Fr(),tLe=J7(QDe),rLe=J7("".slice),iLe=Math.ceil,X7=function(e){return function(t,r,a){var u=H7(eLe(t)),s=YDe(r),m=u.length,x=a===void 0?" ":H7(a),q,T;return s<=m||x===""?u:(q=s-m,T=tLe(x,iLe(q/x.length)),T.length>q&&(T=rLe(T,0,q)),e?u+T:T+u)}};Y7.exports={start:X7(!1),end:X7(!0)}});var tG=w((J2t,eG)=>{"use strict";var pc=ke(),Q7=ze(),Fh=x1().start,nLe=RangeError,aLe=isFinite,oLe=Math.abs,Fu=Date.prototype,wP=Fu.toISOString,sLe=pc(Fu.getTime),uLe=pc(Fu.getUTCDate),lLe=pc(Fu.getUTCFullYear),cLe=pc(Fu.getUTCHours),hLe=pc(Fu.getUTCMilliseconds),fLe=pc(Fu.getUTCMinutes),dLe=pc(Fu.getUTCMonth),pLe=pc(Fu.getUTCSeconds);eG.exports=Q7(function(){return wP.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!Q7(function(){wP.call(new Date(NaN))})?function(){if(!aLe(sLe(this)))throw new nLe("Invalid time value");var t=this,r=lLe(t),a=hLe(t),u=r<0?"-":r>9999?"+":"";return u+Fh(oLe(r),u?6:4,0)+"-"+Fh(dLe(t)+1,2,0)+"-"+Fh(uLe(t),2,0)+"T"+Fh(cLe(t),2,0)+":"+Fh(fLe(t),2,0)+":"+Fh(pLe(t),2,0)+"."+Fh(a,3,0)+"Z"}:wP});var iG=w(()=>{"use strict";var mLe=$(),rG=tG();mLe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==rG},{toISOString:rG})});var nG=w(()=>{"use strict";var vLe=$(),gLe=ze(),yLe=Ht(),_Le=Tg(),xLe=gLe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});vLe({target:"Date",proto:!0,arity:1,forced:xLe},{toJSON:function(t){var r=yLe(this),a=_Le(r,"number");return typeof a=="number"&&!isFinite(a)?null:r.toISOString()}})});var oG=w((rCt,aG)=>{"use strict";var bLe=rt(),wLe=v2(),SLe=TypeError;aG.exports=function(e){if(bLe(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new SLe("Incorrect hint");return wLe(this,e)}});var lG=w(()=>{"use strict";var qLe=$t(),ALe=yr(),ELe=oG(),TLe=Et(),sG=TLe("toPrimitive"),uG=Date.prototype;qLe(uG,sG)||ALe(uG,sG,ELe)});var dG=w(()=>{"use strict";var hG=ke(),ILe=yr(),SP=Date.prototype,cG="Invalid Date",fG="toString",CLe=hG(SP[fG]),PLe=hG(SP.getTime);String(new Date(NaN))!==cG&&ILe(SP,fG,function(){var t=PLe(this);return t===t?CLe(this):cG})});var mG=w(()=>{"use strict";var MLe=$(),ey=ke(),OLe=Lt(),kLe=ey("".charAt),RLe=ey("".charCodeAt),DLe=ey(/./.exec),LLe=ey(1 .toString),FLe=ey("".toUpperCase),zLe=/[\w*+\-./@]/,pG=function(e,t){for(var r=LLe(e,16);r.length<t;)r="0"+r;return r};MLe({global:!0},{escape:function(t){for(var r=OLe(t),a="",u=r.length,s=0,m,x;s<u;)m=kLe(r,s++),DLe(zLe,m)?a+=m:(x=RLe(m,0),x<256?a+="%"+pG(x,2):a+="%u"+FLe(pG(x,4)));return a}})});var AP=w((lCt,_G)=>{"use strict";var gG=ke(),NLe=Rt(),BLe=Nt(),ULe=$t(),vG=Cu(),jLe=Bd(),yG=Function,VLe=gG([].concat),$Le=gG([].join),qP={},WLe=function(e,t,r){if(!ULe(qP,t)){for(var a=[],u=0;u<t;u++)a[u]="a["+u+"]";qP[t]=yG("C,a","return new C("+$Le(a,",")+")")}return qP[t](e,r)};_G.exports=jLe?yG.bind:function(t){var r=NLe(this),a=r.prototype,u=vG(arguments,1),s=function(){var x=VLe(u,vG(arguments));return this instanceof s?WLe(r,x.length,x):r.apply(t,x)};return BLe(a)&&(s.prototype=a),s}});var bG=w(()=>{"use strict";var GLe=$(),xG=AP();GLe({target:"Function",proto:!0,forced:Function.bind!==xG},{bind:xG})});var qG=w(()=>{"use strict";var KLe=zt(),wG=Nt(),ZLe=Or(),HLe=wi(),XLe=Et(),JLe=Og(),EP=XLe("hasInstance"),SG=Function.prototype;EP in SG||ZLe.f(SG,EP,{value:JLe(function(e){if(!KLe(this)||!wG(e))return!1;var t=this.prototype;if(!wG(t))return e instanceof this;for(;e=HLe(e);)if(t===e)return!0;return!1},EP)})});var IG=w(()=>{"use strict";var YLe=At(),QLe=wh().EXISTS,AG=ke(),eFe=Gr(),EG=Function.prototype,tFe=AG(EG.toString),TG=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,rFe=AG(TG.exec),iFe="name";YLe&&!QLe&&eFe(EG,iFe,{configurable:!0,get:function(){try{return rFe(TG,tFe(this))[1]}catch(e){return""}}})});var IP=w(()=>{"use strict";var nFe=$(),TP=ct();nFe({global:!0,forced:TP.globalThis!==TP},{globalThis:TP})});var CG=w(()=>{"use strict";var aFe=ct(),oFe=ba();oFe(aFe.JSON,"JSON",!0)});var b1=w((xCt,PG)=>{"use strict";var sFe=ze();PG.exports=sFe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var S1=w((bCt,OG)=>{"use strict";var uFe=ze(),lFe=Nt(),cFe=ln(),MG=b1(),w1=Object.isExtensible,hFe=uFe(function(){w1(1)});OG.exports=hFe||MG?function(t){return!lFe(t)||MG&&cFe(t)==="ArrayBuffer"?!1:w1?w1(t):!0}:w1});var zu=w((wCt,kG)=>{"use strict";var fFe=ze();kG.exports=!fFe(function(){return Object.isExtensible(Object.preventExtensions({}))})});var mc=w((SCt,LG)=>{"use strict";var dFe=$(),pFe=ke(),mFe=jd(),vFe=Nt(),CP=$t(),gFe=Or().f,RG=Eu(),yFe=Mb(),PP=S1(),_Fe=rc(),xFe=zu(),DG=!1,Nu=_Fe("meta"),bFe=0,MP=function(e){gFe(e,Nu,{value:{objectID:"O"+bFe++,weakData:{}}})},wFe=function(e,t){if(!vFe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!CP(e,Nu)){if(!PP(e))return"F";if(!t)return"E";MP(e)}return e[Nu].objectID},SFe=function(e,t){if(!CP(e,Nu)){if(!PP(e))return!0;if(!t)return!1;MP(e)}return e[Nu].weakData},qFe=function(e){return xFe&&DG&&PP(e)&&!CP(e,Nu)&&MP(e),e},AFe=function(){EFe.enable=function(){},DG=!0;var e=RG.f,t=pFe([].splice),r={};r[Nu]=1,e(r).length&&(RG.f=function(a){for(var u=e(a),s=0,m=u.length;s<m;s++)if(u[s]===Nu){t(u,s,1);break}return u},dFe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:yFe.f}))},EFe=LG.exports={enable:AFe,fastKey:wFe,getWeakData:SFe,onFreeze:qFe};mFe[Nu]=!0});var ty=w((qCt,zG)=>{"use strict";var TFe=$(),IFe=ct(),CFe=ke(),FG=Wd(),PFe=yr(),MFe=mc(),OFe=ai(),kFe=kn(),RFe=zt(),DFe=xi(),OP=Nt(),kP=ze(),LFe=Wg(),FFe=ba(),zFe=Ch();zG.exports=function(e,t,r){var a=e.indexOf("Map")!==-1,u=e.indexOf("Weak")!==-1,s=a?"set":"add",m=IFe[e],x=m&&m.prototype,q=m,T={},I=function(H){var J=CFe(x[H]);PFe(x,H,H==="add"?function(be){return J(this,be===0?0:be),this}:H==="delete"?function(ve){return u&&!OP(ve)?!1:J(this,ve===0?0:ve)}:H==="get"?function(be){return u&&!OP(be)?void 0:J(this,be===0?0:be)}:H==="has"?function(be){return u&&!OP(be)?!1:J(this,be===0?0:be)}:function(be,Le){return J(this,be===0?0:be,Le),this})},L=FG(e,!RFe(m)||!(u||x.forEach&&!kP(function(){new m().entries().next()})));if(L)q=r.getConstructor(t,e,a,s),MFe.enable();else if(FG(e,!0)){var z=new q,Y=z[s](u?{}:-0,1)!==z,pe=kP(function(){z.has(1)}),de=LFe(function(H){new m(H)}),Z=!u&&kP(function(){for(var H=new m,J=5;J--;)H[s](J,J);return!H.has(-0)});de||(q=t(function(H,J){kFe(H,x);var ve=zFe(new m,H,q);return DFe(J)||OFe(J,ve[s],{that:ve,AS_ENTRIES:a}),ve}),q.prototype=x,x.constructor=q),(pe||Z)&&(I("delete"),I("has"),a&&I("get")),(Z||Y)&&I(s),u&&x.clear&&delete x.clear}return T[e]=q,TFe({global:!0,constructor:!0,forced:q!==m},T),FFe(q,e),u||r.setStrong(q,e,a),q}});var DP=w((ACt,VG)=>{"use strict";var NFe=pi(),BFe=Gr(),NG=To(),UFe=qr(),jFe=kn(),VFe=xi(),$Fe=ai(),WFe=e1(),q1=cn(),GFe=lc(),ry=At(),BG=mc().fastKey,jG=dr(),UG=jG.set,RP=jG.getterFor;VG.exports={getConstructor:function(e,t,r,a){var u=e(function(T,I){jFe(T,s),UG(T,{type:t,index:NFe(null),first:void 0,last:void 0,size:0}),ry||(T.size=0),VFe(I)||$Fe(I,T[a],{that:T,AS_ENTRIES:r})}),s=u.prototype,m=RP(t),x=function(T,I,L){var z=m(T),Y=q(T,I),pe,de;return Y?Y.value=L:(z.last=Y={index:de=BG(I,!0),key:I,value:L,previous:pe=z.last,next:void 0,removed:!1},z.first||(z.first=Y),pe&&(pe.next=Y),ry?z.size++:T.size++,de!=="F"&&(z.index[de]=Y)),T},q=function(T,I){var L=m(T),z=BG(I),Y;if(z!=="F")return L.index[z];for(Y=L.first;Y;Y=Y.next)if(Y.key===I)return Y};return NG(s,{clear:function(){for(var I=this,L=m(I),z=L.index,Y=L.first;Y;)Y.removed=!0,Y.previous&&(Y.previous=Y.previous.next=void 0),delete z[Y.index],Y=Y.next;L.first=L.last=void 0,ry?L.size=0:I.size=0},delete:function(T){var I=this,L=m(I),z=q(I,T);if(z){var Y=z.next,pe=z.previous;delete L.index[z.index],z.removed=!0,pe&&(pe.next=Y),Y&&(Y.previous=pe),L.first===z&&(L.first=Y),L.last===z&&(L.last=pe),ry?L.size--:I.size--}return!!z},forEach:function(I){for(var L=m(this),z=UFe(I,arguments.length>1?arguments[1]:void 0),Y;Y=Y?Y.next:L.first;)for(z(Y.value,Y.key,this);Y&&Y.removed;)Y=Y.previous},has:function(I){return!!q(this,I)}}),NG(s,r?{get:function(I){var L=q(this,I);return L&&L.value},set:function(I,L){return x(this,I===0?0:I,L)}}:{add:function(I){return x(this,I=I===0?0:I,I)}}),ry&&BFe(s,"size",{configurable:!0,get:function(){return m(this).size}}),u},setStrong:function(e,t,r){var a=t+" Iterator",u=RP(t),s=RP(a);WFe(e,t,function(m,x){UG(this,{type:a,target:m,state:u(m),kind:x,last:void 0})},function(){for(var m=s(this),x=m.kind,q=m.last;q&&q.removed;)q=q.previous;return!m.target||!(m.last=q=q?q.next:m.state.first)?(m.target=void 0,q1(void 0,!0)):q1(x==="keys"?q.key:x==="values"?q.value:[q.key,q.value],!1)},r?"entries":"values",!r,!0),GFe(t)}}});var $G=w(()=>{"use strict";var KFe=ty(),ZFe=DP();KFe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},ZFe)});var A1=w(()=>{"use strict";$G()});var LP=w((PCt,WG)=>{"use strict";var HFe=Math.log;WG.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:HFe(1+r)}});var KG=w(()=>{"use strict";var XFe=$(),JFe=LP(),FP=Math.acosh,YFe=Math.log,GG=Math.sqrt,QFe=Math.LN2,eze=!FP||Math.floor(FP(Number.MAX_VALUE))!==710||FP(1/0)!==1/0;XFe({target:"Math",stat:!0,forced:eze},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?YFe(r)+QFe:JFe(r-1+GG(r-1)*GG(r+1))}})});var XG=w(()=>{"use strict";var tze=$(),ZG=Math.asinh,rze=Math.log,ize=Math.sqrt;function HG(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-HG(-t):rze(t+ize(t*t+1))}var nze=!(ZG&&1/ZG(0)>0);tze({target:"Math",stat:!0,forced:nze},{asinh:HG})});var YG=w(()=>{"use strict";var aze=$(),JG=Math.atanh,oze=Math.log,sze=!(JG&&1/JG(-0)<0);aze({target:"Math",stat:!0,forced:sze},{atanh:function(t){var r=+t;return r===0?r:oze((1+r)/(1-r))/2}})});var QG=w(()=>{"use strict";var uze=$(),lze=o1(),cze=Math.abs,hze=Math.pow;uze({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return lze(r)*hze(cze(r),1/3)}})});var eK=w(()=>{"use strict";var fze=$(),dze=Math.floor,pze=Math.log,mze=Math.LOG2E;fze({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-dze(pze(r+.5)*mze):32}})});var ny=w((UCt,tK)=>{"use strict";var iy=Math.expm1,vze=Math.exp;tK.exports=!iy||iy(10)>22025.465794806718||iy(10)<22025.465794806718||iy(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:vze(r)-1}:iy});var iK=w(()=>{"use strict";var gze=$(),yze=ny(),rK=Math.cosh,_ze=Math.abs,zP=Math.E,xze=!rK||rK(710)===1/0;gze({target:"Math",stat:!0,forced:xze},{cosh:function(t){var r=yze(_ze(t)-1)+1;return(r+1/(r*zP*zP))*(zP/2)}})});var aK=w(()=>{"use strict";var bze=$(),nK=ny();bze({target:"Math",stat:!0,forced:nK!==Math.expm1},{expm1:nK})});var oK=w(()=>{"use strict";var wze=$(),Sze=s1();wze({target:"Math",stat:!0},{fround:Sze})});var uK=w(()=>{"use strict";var qze=$(),sK=Math.hypot,Aze=Math.abs,Eze=Math.sqrt,Tze=!!sK&&sK(1/0,NaN)!==1/0;qze({target:"Math",stat:!0,arity:2,forced:Tze},{hypot:function(t,r){for(var a=0,u=0,s=arguments.length,m=0,x,q;u<s;)x=Aze(arguments[u++]),m<x?(q=m/x,a=a*q*q+1,m=x):x>0?(q=x/m,a+=q*q):a+=x;return m===1/0?1/0:m*Eze(a)}})});var cK=w(()=>{"use strict";var Ize=$(),Cze=ze(),lK=Math.imul,Pze=Cze(function(){return lK(4294967295,5)!==-5||lK.length!==2});Ize({target:"Math",stat:!0,forced:Pze},{imul:function(t,r){var a=65535,u=+t,s=+r,m=a&u,x=a&s;return 0|m*x+((a&u>>>16)*x+m*(a&s>>>16)<<16>>>0)}})});var NP=w((YCt,hK)=>{"use strict";var Mze=Math.log,Oze=Math.LOG10E;hK.exports=Math.log10||function(t){return Mze(t)*Oze}});var fK=w(()=>{"use strict";var kze=$(),Rze=NP();kze({target:"Math",stat:!0},{log10:Rze})});var dK=w(()=>{"use strict";var Dze=$(),Lze=LP();Dze({target:"Math",stat:!0},{log1p:Lze})});var pK=w(()=>{"use strict";var Fze=$(),zze=Math.log,Nze=Math.LN2;Fze({target:"Math",stat:!0},{log2:function(t){return zze(t)/Nze}})});var mK=w(()=>{"use strict";var Bze=$(),Uze=o1();Bze({target:"Math",stat:!0},{sign:Uze})});var yK=w(()=>{"use strict";var jze=$(),Vze=ze(),vK=ny(),$ze=Math.abs,gK=Math.exp,Wze=Math.E,Gze=Vze(function(){return Math.sinh(-2e-17)!==-2e-17});jze({target:"Math",stat:!0,forced:Gze},{sinh:function(t){var r=+t;return $ze(r)<1?(vK(r)-vK(-r))/2:(gK(r-1)-gK(-r-1))*(Wze/2)}})});var bK=w(()=>{"use strict";var Kze=$(),_K=ny(),xK=Math.exp;Kze({target:"Math",stat:!0},{tanh:function(t){var r=+t,a=_K(r),u=_K(-r);return a===1/0?1:u===1/0?-1:(a-u)/(xK(r)+xK(-r))}})});var wK=w(()=>{"use strict";var Zze=ba();Zze(Math,"Math",!0)});var SK=w(()=>{"use strict";var Hze=$(),Xze=R2();Hze({target:"Math",stat:!0},{trunc:Xze})});var ay=w((mPt,qK)=>{"use strict";var Jze=ke();qK.exports=Jze(1 .valueOf)});var zh=w((vPt,AK)=>{"use strict";AK.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var Nh=w((gPt,TK)=>{"use strict";var Yze=ke(),Qze=Fr(),eNe=Lt(),UP=zh(),EK=Yze("".replace),tNe=RegExp("^["+UP+"]+"),rNe=RegExp("(^|[^"+UP+"])["+UP+"]+$"),BP=function(e){return function(t){var r=eNe(Qze(t));return e&1&&(r=EK(r,tNe,"")),e&2&&(r=EK(r,rNe,"$1")),r}};TK.exports={start:BP(1),end:BP(2),trim:BP(3)}});var RK=w(()=>{"use strict";var iNe=$(),jP=Zt(),nNe=At(),PK=ct(),VP=Ob(),MK=ke(),aNe=Wd(),IK=$t(),oNe=Ch(),sNe=Mn(),uNe=Au(),OK=Tg(),lNe=ze(),cNe=Eu().f,hNe=Fi().f,fNe=Or().f,dNe=ay(),pNe=Nh().trim,oy="Number",np=PK[oy],CK=VP[oy],$P=np.prototype,mNe=PK.TypeError,vNe=MK("".slice),E1=MK("".charCodeAt),gNe=function(e){var t=OK(e,"number");return typeof t=="bigint"?t:yNe(t)},yNe=function(e){var t=OK(e,"number"),r,a,u,s,m,x,q,T;if(uNe(t))throw new mNe("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=pNe(t),r=E1(t,0),r===43||r===45){if(a=E1(t,2),a===88||a===120)return NaN}else if(r===48){switch(E1(t,1)){case 66:case 98:u=2,s=49;break;case 79:case 111:u=8,s=55;break;default:return+t;}for(m=vNe(t,2),x=m.length,q=0;q<x;q++)if(T=E1(m,q),T<48||T>s)return NaN;return parseInt(m,u)}}return+t},WP=aNe(oy,!np(" 0o1")||!np("0b1")||np("+0x1")),_Ne=function(e){return sNe($P,e)&&lNe(function(){dNe(e)})},T1=function(t){var r=arguments.length<1?0:np(gNe(t));return _Ne(this)?oNe(Object(r),this,T1):r};T1.prototype=$P;WP&&!jP&&($P.constructor=T1);iNe({global:!0,constructor:!0,wrap:!0,forced:WP},{Number:T1});var kK=function(e,t){for(var r=nNe?cNe(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),a=0,u;r.length>a;a++)IK(t,u=r[a])&&!IK(e,u)&&fNe(e,u,hNe(t,u))};jP&&CK&&kK(VP[oy],CK);(WP||jP)&&kK(VP[oy],np)});var DK=w(()=>{"use strict";var xNe=$();xNe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var GP=w((wPt,LK)=>{"use strict";var bNe=ct(),wNe=bNe.isFinite;LK.exports=Number.isFinite||function(t){return typeof t=="number"&&wNe(t)}});var FK=w(()=>{"use strict";var SNe=$(),qNe=GP();SNe({target:"Number",stat:!0},{isFinite:qNe})});var I1=w((APt,zK)=>{"use strict";var ANe=Nt(),ENe=Math.floor;zK.exports=Number.isInteger||function(t){return!ANe(t)&&isFinite(t)&&ENe(t)===t}});var NK=w(()=>{"use strict";var TNe=$(),INe=I1();TNe({target:"Number",stat:!0},{isInteger:INe})});var BK=w(()=>{"use strict";var CNe=$();CNe({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var UK=w(()=>{"use strict";var PNe=$(),MNe=I1(),ONe=Math.abs;PNe({target:"Number",stat:!0},{isSafeInteger:function(t){return MNe(t)&&ONe(t)<=9007199254740991}})});var jK=w(()=>{"use strict";var kNe=$();kNe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var VK=w(()=>{"use strict";var RNe=$();RNe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var KP=w((LPt,KK)=>{"use strict";var GK=ct(),DNe=ze(),LNe=ke(),FNe=Lt(),zNe=Nh().trim,NNe=zh(),BNe=LNe("".charAt),C1=GK.parseFloat,$K=GK.Symbol,WK=$K&&$K.iterator,UNe=1/C1(NNe+"-0")!==-1/0||WK&&!DNe(function(){C1(Object(WK))});KK.exports=UNe?function(t){var r=zNe(FNe(t)),a=C1(r);return a===0&&BNe(r,0)==="-"?-0:a}:C1});var HK=w(()=>{"use strict";var jNe=$(),ZK=KP();jNe({target:"Number",stat:!0,forced:Number.parseFloat!==ZK},{parseFloat:ZK})});var P1=w((NPt,tZ)=>{"use strict";var QK=ct(),VNe=ze(),$Ne=ke(),WNe=Lt(),GNe=Nh().trim,XK=zh(),sy=QK.parseInt,JK=QK.Symbol,YK=JK&&JK.iterator,eZ=/^[+-]?0x/i,KNe=$Ne(eZ.exec),ZNe=sy(XK+"08")!==8||sy(XK+"0x16")!==22||YK&&!VNe(function(){sy(Object(YK))});tZ.exports=ZNe?function(t,r){var a=GNe(WNe(t));return sy(a,r>>>0||(KNe(eZ,a)?16:10))}:sy});var iZ=w(()=>{"use strict";var HNe=$(),rZ=P1();HNe({target:"Number",stat:!0,forced:Number.parseInt!==rZ},{parseInt:rZ})});var uZ=w(()=>{"use strict";var XNe=$(),HP=ke(),JNe=zr(),YNe=ay(),QNe=Qg(),eBe=NP(),ZP=ze(),tBe=RangeError,nZ=String,rBe=isFinite,iBe=Math.abs,nBe=Math.floor,aZ=Math.pow,aBe=Math.round,Ls=HP(1 .toExponential),oBe=HP(QNe),oZ=HP("".slice),sZ=Ls(-69e-12,4)==="-6.9000e-11"&&Ls(1.255,2)==="1.25e+0"&&Ls(12345,3)==="1.235e+4"&&Ls(25,0)==="3e+1",sBe=function(){return ZP(function(){Ls(1,1/0)})&&ZP(function(){Ls(1,-1/0)})},uBe=function(){return!ZP(function(){Ls(1/0,1/0),Ls(NaN,1/0)})},lBe=!sZ||!sBe()||!uBe();XNe({target:"Number",proto:!0,forced:lBe},{toExponential:function(t){var r=YNe(this);if(t===void 0)return Ls(r);var a=JNe(t);if(!rBe(r))return String(r);if(a<0||a>20)throw new tBe("Incorrect fraction digits");if(sZ)return Ls(r,a);var u="",s="",m=0,x="",q="";if(r<0&&(u="-",r=-r),r===0)m=0,s=oBe("0",a+1);else{var T=eBe(r);m=nBe(T);var I=0,L=aZ(10,m-a);I=aBe(r/L),2*r>=(2*I+1)*L&&(I+=1),I>=aZ(10,a+1)&&(I/=10,m+=1),s=nZ(I)}return a!==0&&(s=oZ(s,0,1)+"."+oZ(s,1)),m===0?(x="+",q="0"):(x=m>0?"+":"-",q=nZ(iBe(m))),s+="e"+x+q,u+s}})});var pZ=w(()=>{"use strict";var cBe=$(),YP=ke(),hBe=zr(),fBe=ay(),dBe=Qg(),lZ=ze(),pBe=RangeError,fZ=String,dZ=Math.floor,JP=YP(dBe),cZ=YP("".slice),uy=YP(1 .toFixed),op=function(e,t,r){return t===0?r:t%2===1?op(e,t-1,r*e):op(e*e,t/2,r)},mBe=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},ap=function(e,t,r){for(var a=-1,u=r;++a<6;)u+=t*e[a],e[a]=u%1e7,u=dZ(u/1e7)},XP=function(e,t){for(var r=6,a=0;--r>=0;)a+=e[r],e[r]=dZ(a/t),a=a%t*1e7},hZ=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var a=fZ(e[t]);r=r===""?a:r+JP("0",7-a.length)+a}return r},vBe=lZ(function(){return uy(8e-5,3)!=="0.000"||uy(.9,0)!=="1"||uy(1.255,2)!=="1.25"||uy(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!lZ(function(){uy({})});cBe({target:"Number",proto:!0,forced:vBe},{toFixed:function(t){var r=fBe(this),a=hBe(t),u=[0,0,0,0,0,0],s="",m="0",x,q,T,I;if(a<0||a>20)throw new pBe("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return fZ(r);if(r<0&&(s="-",r=-r),r>1e-21)if(x=mBe(r*op(2,69,1))-69,q=x<0?r*op(2,-x,1):r/op(2,x,1),q*=4503599627370496,x=52-x,x>0){for(ap(u,0,q),T=a;T>=7;)ap(u,1e7,0),T-=7;for(ap(u,op(10,T,1),0),T=x-1;T>=23;)XP(u,1<<23),T-=23;XP(u,1<<T),ap(u,1,1),XP(u,2),m=hZ(u)}else ap(u,0,q),ap(u,1<<-x,0),m=hZ(u)+JP("0",a);return a>0?(I=m.length,m=s+(I<=a?"0."+JP("0",a-I)+m:cZ(m,0,I-a)+"."+cZ(m,I-a))):m=s+m,m}})});var gZ=w(()=>{"use strict";var gBe=$(),yBe=ke(),mZ=ze(),vZ=ay(),M1=yBe(1 .toPrecision),_Be=mZ(function(){return M1(1,void 0)!=="1"})||!mZ(function(){M1({})});gBe({target:"Number",proto:!0,forced:_Be},{toPrecision:function(t){return t===void 0?M1(vZ(this)):M1(vZ(this),t)}})});var eM=w((ZPt,xZ)=>{"use strict";var yZ=At(),xBe=ke(),bBe=Qe(),wBe=ze(),QP=qh(),SBe=kg(),qBe=Ag(),ABe=Ht(),EBe=qu(),sp=Object.assign,_Z=Object.defineProperty,TBe=xBe([].concat);xZ.exports=!sp||wBe(function(){if(yZ&&sp({b:1},sp(_Z({},"a",{enumerable:!0,get:function(){_Z(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),a="abcdefghijklmnopqrst";return e[r]=7,a.split("").forEach(function(u){t[u]=u}),sp({},e)[r]!==7||QP(sp({},t)).join("")!==a})?function(t,r){for(var a=ABe(t),u=arguments.length,s=1,m=SBe.f,x=qBe.f;u>s;)for(var q=EBe(arguments[s++]),T=m?TBe(QP(q),m(q)):QP(q),I=T.length,L=0,z;I>L;)z=T[L++],(!yZ||bBe(x,q,z))&&(a[z]=q[z]);return a}:sp});var wZ=w(()=>{"use strict";var IBe=$(),bZ=eM();IBe({target:"Object",stat:!0,arity:2,forced:Object.assign!==bZ},{assign:bZ})});var SZ=w(()=>{"use strict";var CBe=$(),PBe=At(),MBe=pi();CBe({target:"Object",stat:!0,sham:!PBe},{create:MBe})});var ly=w((QPt,AZ)=>{"use strict";var OBe=Zt(),kBe=ct(),RBe=ze(),qZ=n1();AZ.exports=OBe||!RBe(function(){if(!(qZ&&qZ<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete kBe[e]}})});var EZ=w(()=>{"use strict";var DBe=$(),LBe=At(),FBe=ly(),zBe=Rt(),NBe=Ht(),BBe=Or();LBe&&DBe({target:"Object",proto:!0,forced:FBe},{__defineGetter__:function(t,r){BBe.f(NBe(this),t,{get:zBe(r),enumerable:!0,configurable:!0})}})});var IZ=w(()=>{"use strict";var UBe=$(),jBe=At(),TZ=Ib().f;UBe({target:"Object",stat:!0,forced:Object.defineProperties!==TZ,sham:!jBe},{defineProperties:TZ})});var PZ=w(()=>{"use strict";var VBe=$(),$Be=At(),CZ=Or().f;VBe({target:"Object",stat:!0,forced:Object.defineProperty!==CZ,sham:!$Be},{defineProperty:CZ})});var MZ=w(()=>{"use strict";var WBe=$(),GBe=At(),KBe=ly(),ZBe=Rt(),HBe=Ht(),XBe=Or();GBe&&WBe({target:"Object",proto:!0,forced:KBe},{__defineSetter__:function(t,r){XBe.f(HBe(this),t,{set:ZBe(r),enumerable:!0,configurable:!0})}})});var tM=w((uMt,LZ)=>{"use strict";var kZ=At(),JBe=ze(),RZ=ke(),YBe=wi(),QBe=qh(),e3e=Ii(),t3e=Ag().f,DZ=RZ(t3e),r3e=RZ([].push),i3e=kZ&&JBe(function(){var e=Object.create(null);return e[2]=2,!DZ(e,2)}),OZ=function(e){return function(t){for(var r=e3e(t),a=QBe(r),u=i3e&&YBe(r)===null,s=a.length,m=0,x=[],q;s>m;)q=a[m++],(!kZ||(u?q in r:DZ(r,q)))&&r3e(x,e?[q,r[q]]:r[q]);return x}};LZ.exports={entries:OZ(!0),values:OZ(!1)}});var FZ=w(()=>{"use strict";var n3e=$(),a3e=tM().entries;n3e({target:"Object",stat:!0},{entries:function(t){return a3e(t)}})});var zZ=w(()=>{"use strict";var o3e=$(),s3e=zu(),u3e=ze(),l3e=Nt(),c3e=mc().onFreeze,rM=Object.freeze,h3e=u3e(function(){rM(1)});o3e({target:"Object",stat:!0,forced:h3e,sham:!s3e},{freeze:function(t){return rM&&l3e(t)?rM(c3e(t)):t}})});var NZ=w(()=>{"use strict";var f3e=$(),d3e=ai(),p3e=So();f3e({target:"Object",stat:!0},{fromEntries:function(t){var r={};return d3e(t,function(a,u){p3e(r,a,u)},{AS_ENTRIES:!0}),r}})});var jZ=w(()=>{"use strict";var m3e=$(),v3e=ze(),g3e=Ii(),BZ=Fi().f,UZ=At(),y3e=!UZ||v3e(function(){BZ(1)});m3e({target:"Object",stat:!0,forced:y3e,sham:!UZ},{getOwnPropertyDescriptor:function(t,r){return BZ(g3e(t),r)}})});var VZ=w(()=>{"use strict";var _3e=$(),x3e=At(),b3e=Ab(),w3e=Ii(),S3e=Fi(),q3e=So();_3e({target:"Object",stat:!0,sham:!x3e},{getOwnPropertyDescriptors:function(t){for(var r=w3e(t),a=S3e.f,u=b3e(r),s={},m=0,x,q;u.length>m;)q=a(r,x=u[m++]),q!==void 0&&q3e(s,x,q);return s}})});var $Z=w(()=>{"use strict";var A3e=$(),E3e=ze(),T3e=Mb().f,I3e=E3e(function(){return!Object.getOwnPropertyNames(1)});A3e({target:"Object",stat:!0,forced:I3e},{getOwnPropertyNames:T3e})});var GZ=w(()=>{"use strict";var C3e=$(),P3e=ze(),M3e=Ht(),WZ=wi(),O3e=Wb(),k3e=P3e(function(){WZ(1)});C3e({target:"Object",stat:!0,forced:k3e,sham:!O3e},{getPrototypeOf:function(t){return WZ(M3e(t))}})});var iM=w(()=>{"use strict";var R3e=$(),D3e=$t();R3e({target:"Object",stat:!0},{hasOwn:D3e})});var nM=w((AMt,KZ)=>{"use strict";KZ.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var ZZ=w(()=>{"use strict";var L3e=$(),F3e=nM();L3e({target:"Object",stat:!0},{is:F3e})});var XZ=w(()=>{"use strict";var z3e=$(),HZ=S1();z3e({target:"Object",stat:!0,forced:Object.isExtensible!==HZ},{isExtensible:HZ})});var YZ=w(()=>{"use strict";var N3e=$(),B3e=ze(),U3e=Nt(),j3e=ln(),JZ=b1(),aM=Object.isFrozen,V3e=JZ||B3e(function(){aM(1)});N3e({target:"Object",stat:!0,forced:V3e},{isFrozen:function(t){return!U3e(t)||JZ&&j3e(t)==="ArrayBuffer"?!0:aM?aM(t):!1}})});var eH=w(()=>{"use strict";var $3e=$(),W3e=ze(),G3e=Nt(),K3e=ln(),QZ=b1(),oM=Object.isSealed,Z3e=QZ||W3e(function(){oM(1)});$3e({target:"Object",stat:!0,forced:Z3e},{isSealed:function(t){return!G3e(t)||QZ&&K3e(t)==="ArrayBuffer"?!0:oM?oM(t):!1}})});var rH=w(()=>{"use strict";var H3e=$(),X3e=Ht(),tH=qh(),J3e=ze(),Y3e=J3e(function(){tH(1)});H3e({target:"Object",stat:!0,forced:Y3e},{keys:function(t){return tH(X3e(t))}})});var iH=w(()=>{"use strict";var Q3e=$(),eUe=At(),tUe=ly(),rUe=Ht(),iUe=ts(),nUe=wi(),aUe=Fi().f;eUe&&Q3e({target:"Object",proto:!0,forced:tUe},{__lookupGetter__:function(t){var r=rUe(this),a=iUe(t),u;do if(u=aUe(r,a))return u.get;while(r=nUe(r))}})});var nH=w(()=>{"use strict";var oUe=$(),sUe=At(),uUe=ly(),lUe=Ht(),cUe=ts(),hUe=wi(),fUe=Fi().f;sUe&&oUe({target:"Object",proto:!0,forced:uUe},{__lookupSetter__:function(t){var r=lUe(this),a=cUe(t),u;do if(u=fUe(r,a))return u.set;while(r=hUe(r))}})});var aH=w(()=>{"use strict";var dUe=$(),pUe=Nt(),mUe=mc().onFreeze,vUe=zu(),gUe=ze(),sM=Object.preventExtensions,yUe=gUe(function(){sM(1)});dUe({target:"Object",stat:!0,forced:yUe,sham:!vUe},{preventExtensions:function(t){return sM&&pUe(t)?sM(mUe(t)):t}})});var hH=w(()=>{"use strict";var _Ue=At(),xUe=Gr(),oH=Nt(),bUe=Ht(),wUe=Fr(),sH=Object.getPrototypeOf,uH=Object.setPrototypeOf,lH=Object.prototype,cH="__proto__";if(_Ue&&sH&&uH&&!(cH in lH))try{xUe(lH,cH,{configurable:!0,get:function(){return sH(bUe(this))},set:function(t){var r=wUe(this);!oH(t)&&t!==null||!oH(r)||uH(r,t)}})}catch(e){}});var fH=w(()=>{"use strict";var SUe=$(),qUe=Nt(),AUe=mc().onFreeze,EUe=zu(),TUe=ze(),uM=Object.seal,IUe=TUe(function(){uM(1)});SUe({target:"Object",stat:!0,forced:IUe,sham:!EUe},{seal:function(t){return uM&&qUe(t)?uM(AUe(t)):t}})});var dH=w(()=>{"use strict";var CUe=$(),PUe=Ao();CUe({target:"Object",stat:!0},{setPrototypeOf:PUe})});var mH=w((ZMt,pH)=>{"use strict";var MUe=Eb(),OUe=xa();pH.exports=MUe?{}.toString:function(){return"[object "+OUe(this)+"]"}});var vH=w(()=>{"use strict";var kUe=Eb(),RUe=yr(),DUe=mH();kUe||RUe(Object.prototype,"toString",DUe,{unsafe:!0})});var gH=w(()=>{"use strict";var LUe=$(),FUe=tM().values;LUe({target:"Object",stat:!0},{values:function(t){return FUe(t)}})});var _H=w(()=>{"use strict";var zUe=$(),yH=KP();zUe({global:!0,forced:parseFloat!==yH},{parseFloat:yH})});var bH=w(()=>{"use strict";var NUe=$(),xH=P1();NUe({global:!0,forced:parseInt!==xH},{parseInt:xH})});var Co=w((iOt,wH)=>{"use strict";var BUe=TypeError;wH.exports=function(e,t){if(e<t)throw new BUe("Not enough arguments");return e}});var lM=w((nOt,SH)=>{"use strict";var UUe=Cs();SH.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(UUe)});var fy=w((aOt,OH)=>{"use strict";var Ja=ct(),jUe=On(),VUe=qr(),qH=zt(),$Ue=$t(),MH=ze(),AH=z2(),WUe=Cu(),EH=Ig(),GUe=Co(),KUe=lM(),ZUe=ks(),mM=Ja.setImmediate,vM=Ja.clearImmediate,HUe=Ja.process,cM=Ja.Dispatch,XUe=Ja.Function,TH=Ja.MessageChannel,JUe=Ja.String,hM=0,cy={},IH="onreadystatechange",hy,Bh,fM,dM;MH(function(){hy=Ja.location});var gM=function(e){if($Ue(cy,e)){var t=cy[e];delete cy[e],t()}},pM=function(e){return function(){gM(e)}},CH=function(e){gM(e.data)},PH=function(e){Ja.postMessage(JUe(e),hy.protocol+"//"+hy.host)};(!mM||!vM)&&(mM=function(t){GUe(arguments.length,1);var r=qH(t)?t:XUe(t),a=WUe(arguments,1);return cy[++hM]=function(){jUe(r,void 0,a)},Bh(hM),hM},vM=function(t){delete cy[t]},ZUe?Bh=function(e){HUe.nextTick(pM(e))}:cM&&cM.now?Bh=function(e){cM.now(pM(e))}:TH&&!KUe?(fM=new TH,dM=fM.port2,fM.port1.onmessage=CH,Bh=VUe(dM.postMessage,dM)):Ja.addEventListener&&qH(Ja.postMessage)&&!Ja.importScripts&&hy&&hy.protocol!=="file:"&&!MH(PH)?(Bh=PH,Ja.addEventListener("message",CH,!1)):IH in EH("script")?Bh=function(e){AH.appendChild(EH("script"))[IH]=function(){AH.removeChild(this),gM(e)}}:Bh=function(e){setTimeout(pM(e),0)});OH.exports={set:mM,clear:vM}});var yM=w((oOt,RH)=>{"use strict";var kH=function(){this.head=null,this.tail=null};kH.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};RH.exports=kH});var LH=w((sOt,DH)=>{"use strict";var YUe=Cs();DH.exports=/ipad|iphone|ipod/i.test(YUe)&&typeof Pebble!="undefined"});var zH=w((uOt,FH)=>{"use strict";var QUe=Cs();FH.exports=/web0s(?!.*chrome)/i.test(QUe)});var qM=w((lOt,WH)=>{"use strict";var Uh=ct(),NH=qr(),e5e=Fi().f,_M=fy().set,t5e=yM(),r5e=lM(),i5e=LH(),n5e=zH(),xM=ks(),BH=Uh.MutationObserver||Uh.WebKitMutationObserver,UH=Uh.document,jH=Uh.process,O1=Uh.Promise,VH=e5e(Uh,"queueMicrotask"),SM=VH&&VH.value,up,bM,wM,k1,$H;SM||(dy=new t5e,py=function(){var e,t;for(xM&&(e=jH.domain)&&e.exit();t=dy.get();)try{t()}catch(r){throw dy.head&&up(),r}e&&e.enter()},!r5e&&!xM&&!n5e&&BH&&UH?(bM=!0,wM=UH.createTextNode(""),new BH(py).observe(wM,{characterData:!0}),up=function(){wM.data=bM=!bM}):!i5e&&O1&&O1.resolve?(k1=O1.resolve(void 0),k1.constructor=O1,$H=NH(k1.then,k1),up=function(){$H(py)}):xM?up=function(){jH.nextTick(py)}:(_M=NH(_M,Uh),up=function(){_M(py)}),SM=function(e){dy.head||up(),dy.add(e)});var dy,py;WH.exports=SM});var AM=w((cOt,GH)=>{"use strict";GH.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var vc=w((hOt,KH)=>{"use strict";KH.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var jh=w((fOt,ZH)=>{"use strict";var a5e=ct();ZH.exports=a5e.Promise});var R1=w((dOt,HH)=>{"use strict";HH.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"});var EM=w((pOt,XH)=>{"use strict";var o5e=R1(),s5e=ks();XH.exports=!o5e&&!s5e&&typeof window=="object"&&typeof document=="object"});var lp=w((mOt,QH)=>{"use strict";var u5e=ct(),my=jh(),l5e=zt(),c5e=Wd(),h5e=Cg(),f5e=Et(),d5e=EM(),p5e=R1(),m5e=Zt(),TM=Ps(),JH=my&&my.prototype,v5e=f5e("species"),IM=!1,YH=l5e(u5e.PromiseRejectionEvent),g5e=c5e("Promise",function(){var e=h5e(my),t=e!==String(my);if(!t&&TM===66||m5e&&!(JH.catch&&JH.finally))return!0;if(!TM||TM<51||!/native code/.test(e)){var r=new my(function(s){s(1)}),a=function(s){s(function(){},function(){})},u=r.constructor={};if(u[v5e]=a,IM=r.then(function(){})instanceof a,!IM)return!0}return!t&&(d5e||p5e)&&!YH});QH.exports={CONSTRUCTOR:g5e,REJECTION_EVENT:YH,SUBCLASSING:IM}});var Fs=w((vOt,t9)=>{"use strict";var e9=Rt(),y5e=TypeError,_5e=function(e){var t,r;this.promise=new e(function(a,u){if(t!==void 0||r!==void 0)throw new y5e("Bad Promise constructor");t=a,r=u}),this.resolve=e9(t),this.reject=e9(r)};t9.exports.f=function(e){return new _5e(e)}});var x9=w(()=>{"use strict";var x5e=$(),b5e=Zt(),z1=ks(),gc=ct(),dp=Qe(),r9=yr(),i9=Ao(),w5e=ba(),S5e=lc(),q5e=Rt(),F1=zt(),A5e=Nt(),E5e=kn(),T5e=Lh(),u9=fy().set,kM=qM(),I5e=AM(),C5e=vc(),P5e=yM(),l9=dr(),N1=jh(),RM=lp(),c9=Fs(),B1="Promise",h9=RM.CONSTRUCTOR,M5e=RM.REJECTION_EVENT,O5e=RM.SUBCLASSING,CM=l9.getterFor(B1),k5e=l9.set,cp=N1&&N1.prototype,Vh=N1,D1=cp,f9=gc.TypeError,PM=gc.document,DM=gc.process,MM=c9.f,R5e=MM,D5e=!!(PM&&PM.createEvent&&gc.dispatchEvent),d9="unhandledrejection",L5e="rejectionhandled",n9=0,p9=1,F5e=2,LM=1,m9=2,L1,a9,z5e,o9,v9=function(e){var t;return A5e(e)&&F1(t=e.then)?t:!1},g9=function(e,t){var r=t.value,a=t.state===p9,u=a?e.ok:e.fail,s=e.resolve,m=e.reject,x=e.domain,q,T,I;try{u?(a||(t.rejection===m9&&B5e(t),t.rejection=LM),u===!0?q=r:(x&&x.enter(),q=u(r),x&&(x.exit(),I=!0)),q===e.promise?m(new f9("Promise-chain cycle")):(T=v9(q))?dp(T,q,s,m):s(q)):m(r)}catch(L){x&&!I&&x.exit(),m(L)}},y9=function(e,t){e.notified||(e.notified=!0,kM(function(){for(var r=e.reactions,a;a=r.get();)g9(a,e);e.notified=!1,t&&!e.rejection&&N5e(e)}))},_9=function(e,t,r){var a,u;D5e?(a=PM.createEvent("Event"),a.promise=t,a.reason=r,a.initEvent(e,!1,!0),gc.dispatchEvent(a)):a={promise:t,reason:r},!M5e&&(u=gc["on"+e])?u(a):e===d9&&I5e("Unhandled promise rejection",r)},N5e=function(e){dp(u9,gc,function(){var t=e.facade,r=e.value,a=s9(e),u;if(a&&(u=C5e(function(){z1?DM.emit("unhandledRejection",r,t):_9(d9,t,r)}),e.rejection=z1||s9(e)?m9:LM,u.error))throw u.value})},s9=function(e){return e.rejection!==LM&&!e.parent},B5e=function(e){dp(u9,gc,function(){var t=e.facade;z1?DM.emit("rejectionHandled",t):_9(L5e,t,e.value)})},hp=function(e,t,r){return function(a){e(t,a,r)}},fp=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=F5e,y9(e,!0))},OM=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new f9("Promise can't be resolved itself");var a=v9(t);a?kM(function(){var u={done:!1};try{dp(a,t,hp(OM,u,e),hp(fp,u,e))}catch(s){fp(u,s,e)}}):(e.value=t,e.state=p9,y9(e,!1))}catch(u){fp({done:!1},u,e)}}};if(h9&&(Vh=function(t){E5e(this,D1),q5e(t),dp(L1,this);var r=CM(this);try{t(hp(OM,r),hp(fp,r))}catch(a){fp(r,a)}},D1=Vh.prototype,L1=function(t){k5e(this,{type:B1,done:!1,notified:!1,parent:!1,reactions:new P5e,rejection:!1,state:n9,value:void 0})},L1.prototype=r9(D1,"then",function(t,r){var a=CM(this),u=MM(T5e(this,Vh));return a.parent=!0,u.ok=F1(t)?t:!0,u.fail=F1(r)&&r,u.domain=z1?DM.domain:void 0,a.state===n9?a.reactions.add(u):kM(function(){g9(u,a)}),u.promise}),a9=function(){var e=new L1,t=CM(e);this.promise=e,this.resolve=hp(OM,t),this.reject=hp(fp,t)},c9.f=MM=function(e){return e===Vh||e===z5e?new a9(e):R5e(e)},!b5e&&F1(N1)&&cp!==Object.prototype)){o9=cp.then,O5e||r9(cp,"then",function(t,r){var a=this;return new Vh(function(u,s){dp(o9,a,u,s)}).then(t,r)},{unsafe:!0});try{delete cp.constructor}catch(e){}i9&&i9(cp,D1)}x5e({global:!0,constructor:!0,wrap:!0,forced:h9},{Promise:Vh});w5e(Vh,B1,!1,!0);S5e(B1)});var vy=w((_Ot,b9)=>{"use strict";var U5e=jh(),j5e=Wg(),V5e=lp().CONSTRUCTOR;b9.exports=V5e||!j5e(function(e){U5e.all(e).then(void 0,function(){})})});var w9=w(()=>{"use strict";var $5e=$(),W5e=Qe(),G5e=Rt(),K5e=Fs(),Z5e=vc(),H5e=ai(),X5e=vy();$5e({target:"Promise",stat:!0,forced:X5e},{all:function(t){var r=this,a=K5e.f(r),u=a.resolve,s=a.reject,m=Z5e(function(){var x=G5e(r.resolve),q=[],T=0,I=1;H5e(t,function(L){var z=T++,Y=!1;I++,W5e(x,r,L).then(function(pe){Y||(Y=!0,q[z]=pe,--I||u(q))},s)}),--I||u(q)});return m.error&&s(m.value),a.promise}})});var q9=w(()=>{"use strict";var J5e=$(),Y5e=Zt(),Q5e=lp().CONSTRUCTOR,zM=jh(),e4e=kt(),t4e=zt(),r4e=yr(),S9=zM&&zM.prototype;J5e({target:"Promise",proto:!0,forced:Q5e,real:!0},{catch:function(e){return this.then(void 0,e)}});!Y5e&&t4e(zM)&&(FM=e4e("Promise").prototype.catch,S9.catch!==FM&&r4e(S9,"catch",FM,{unsafe:!0}));var FM});var A9=w(()=>{"use strict";var i4e=$(),n4e=Qe(),a4e=Rt(),o4e=Fs(),s4e=vc(),u4e=ai(),l4e=vy();i4e({target:"Promise",stat:!0,forced:l4e},{race:function(t){var r=this,a=o4e.f(r),u=a.reject,s=s4e(function(){var m=a4e(r.resolve);u4e(t,function(x){n4e(m,r,x).then(a.resolve,u)})});return s.error&&u(s.value),a.promise}})});var E9=w(()=>{"use strict";var c4e=$(),h4e=Qe(),f4e=Fs(),d4e=lp().CONSTRUCTOR;c4e({target:"Promise",stat:!0,forced:d4e},{reject:function(t){var r=f4e.f(this);return h4e(r.reject,void 0,t),r.promise}})});var NM=w((IOt,T9)=>{"use strict";var p4e=rt(),m4e=Nt(),v4e=Fs();T9.exports=function(e,t){if(p4e(e),m4e(t)&&t.constructor===e)return t;var r=v4e.f(e),a=r.resolve;return a(t),r.promise}});var P9=w(()=>{"use strict";var g4e=$(),y4e=kt(),I9=Zt(),_4e=jh(),C9=lp().CONSTRUCTOR,x4e=NM(),b4e=y4e("Promise"),w4e=I9&&!C9;g4e({target:"Promise",stat:!0,forced:I9||C9},{resolve:function(t){return x4e(w4e&&this===b4e?_4e:this,t)}})});var M9=w(()=>{"use strict";x9();w9();q9();A9();E9();P9()});var BM=w(()=>{"use strict";var S4e=$(),q4e=Qe(),A4e=Rt(),E4e=Fs(),T4e=vc(),I4e=ai(),C4e=vy();S4e({target:"Promise",stat:!0,forced:C4e},{allSettled:function(t){var r=this,a=E4e.f(r),u=a.resolve,s=a.reject,m=T4e(function(){var x=A4e(r.resolve),q=[],T=0,I=1;I4e(t,function(L){var z=T++,Y=!1;I++,q4e(x,r,L).then(function(pe){Y||(Y=!0,q[z]={status:"fulfilled",value:pe},--I||u(q))},function(pe){Y||(Y=!0,q[z]={status:"rejected",reason:pe},--I||u(q))})}),--I||u(q)});return m.error&&s(m.value),a.promise}})});var UM=w(()=>{"use strict";var P4e=$(),M4e=Qe(),O4e=Rt(),k4e=kt(),R4e=Fs(),D4e=vc(),L4e=ai(),F4e=vy(),O9="No one promise resolved";P4e({target:"Promise",stat:!0,forced:F4e},{any:function(t){var r=this,a=k4e("AggregateError"),u=R4e.f(r),s=u.resolve,m=u.reject,x=D4e(function(){var q=O4e(r.resolve),T=[],I=0,L=1,z=!1;L4e(t,function(Y){var pe=I++,de=!1;L++,M4e(q,r,Y).then(function(Z){de||z||(z=!0,s(Z))},function(Z){de||z||(de=!0,T[pe]=Z,--L||m(new a(T,O9)))})}),--L||m(new a(T,O9))});return x.error&&m(x.value),u.promise}})});var L9=w(()=>{"use strict";var z4e=$(),N4e=Zt(),U1=jh(),B4e=ze(),R9=kt(),D9=zt(),U4e=Lh(),k9=NM(),j4e=yr(),VM=U1&&U1.prototype,V4e=!!U1&&B4e(function(){VM.finally.call({then:function(){}},function(){})});z4e({target:"Promise",proto:!0,real:!0,forced:V4e},{finally:function(e){var t=U4e(this,R9("Promise")),r=D9(e);return this.then(r?function(a){return k9(t,e()).then(function(){return a})}:e,r?function(a){return k9(t,e()).then(function(){throw a})}:e)}});!N4e&&D9(U1)&&(jM=R9("Promise").prototype.finally,VM.finally!==jM&&j4e(VM,"finally",jM,{unsafe:!0}));var jM});var F9=w(()=>{"use strict";var $4e=$(),W4e=On(),G4e=Rt(),K4e=rt(),Z4e=ze(),H4e=!Z4e(function(){Reflect.apply(function(){})});$4e({target:"Reflect",stat:!0,forced:H4e},{apply:function(t,r,a){return W4e(G4e(t),r,K4e(a))}})});var $9=w(()=>{"use strict";var X4e=$(),J4e=kt(),$M=On(),Y4e=AP(),z9=ip(),Q4e=rt(),N9=Nt(),eje=pi(),U9=ze(),WM=J4e("Reflect","construct"),tje=Object.prototype,rje=[].push,j9=U9(function(){function e(){}return!(WM(function(){},[],e)instanceof e)}),V9=!U9(function(){WM(function(){})}),B9=j9||V9;X4e({target:"Reflect",stat:!0,forced:B9,sham:B9},{construct:function(t,r){z9(t),Q4e(r);var a=arguments.length<3?t:z9(arguments[2]);if(V9&&!j9)return WM(t,r,a);if(t===a){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);}var u=[null];return $M(rje,u,r),new($M(Y4e,t,u))}var s=a.prototype,m=eje(N9(s)?s:tje),x=$M(t,m,r);return N9(x)?x:m}})});var K9=w(()=>{"use strict";var ije=$(),nje=At(),W9=rt(),aje=ts(),G9=Or(),oje=ze(),sje=oje(function(){Reflect.defineProperty(G9.f({},1,{value:1}),1,{value:2})});ije({target:"Reflect",stat:!0,forced:sje,sham:!nje},{defineProperty:function(t,r,a){W9(t);var u=aje(r);W9(a);try{return G9.f(t,u,a),!0}catch(s){return!1}}})});var Z9=w(()=>{"use strict";var uje=$(),lje=rt(),cje=Fi().f;uje({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var a=cje(lje(t),r);return a&&!a.configurable?!1:delete t[r]}})});var GM=w((KOt,X9)=>{"use strict";var H9=$t();X9.exports=function(e){return e!==void 0&&(H9(e,"value")||H9(e,"writable"))}});var Y9=w(()=>{"use strict";var hje=$(),fje=Qe(),dje=Nt(),pje=rt(),mje=GM(),vje=Fi(),gje=wi();function J9(e,t){var r=arguments.length<3?e:arguments[2],a,u;if(pje(e)===r)return e[t];if(a=vje.f(e,t),a)return mje(a)?a.value:a.get===void 0?void 0:fje(a.get,r);if(dje(u=gje(e)))return J9(u,t,r)}hje({target:"Reflect",stat:!0},{get:J9})});var Q9=w(()=>{"use strict";var yje=$(),_je=At(),xje=rt(),bje=Fi();yje({target:"Reflect",stat:!0,sham:!_je},{getOwnPropertyDescriptor:function(t,r){return bje.f(xje(t),r)}})});var eX=w(()=>{"use strict";var wje=$(),Sje=rt(),qje=wi(),Aje=Wb();wje({target:"Reflect",stat:!0,sham:!Aje},{getPrototypeOf:function(t){return qje(Sje(t))}})});var tX=w(()=>{"use strict";var Eje=$();Eje({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var rX=w(()=>{"use strict";var Tje=$(),Ije=rt(),Cje=S1();Tje({target:"Reflect",stat:!0},{isExtensible:function(t){return Ije(t),Cje(t)}})});var iX=w(()=>{"use strict";var Pje=$(),Mje=Ab();Pje({target:"Reflect",stat:!0},{ownKeys:Mje})});var nX=w(()=>{"use strict";var Oje=$(),kje=kt(),Rje=rt(),Dje=zu();Oje({target:"Reflect",stat:!0,sham:!Dje},{preventExtensions:function(t){Rje(t);try{var r=kje("Object","preventExtensions");return r&&r(t),!0}catch(a){return!1}}})});var lX=w(()=>{"use strict";var Lje=$(),Fje=Qe(),zje=rt(),aX=Nt(),Nje=GM(),Bje=ze(),KM=Or(),oX=Fi(),Uje=wi(),sX=ya();function uX(e,t,r){var a=arguments.length<4?e:arguments[3],u=oX.f(zje(e),t),s,m,x;if(!u){if(aX(m=Uje(e)))return uX(m,t,r,a);u=sX(0)}if(Nje(u)){if(u.writable===!1||!aX(a))return!1;if(s=oX.f(a,t)){if(s.get||s.set||s.writable===!1)return!1;s.value=r,KM.f(a,t,s)}else KM.f(a,t,sX(0,r))}else{if(x=u.set,x===void 0)return!1;Fje(x,a,r)}return!0}var jje=Bje(function(){var e=function(){},t=KM.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});Lje({target:"Reflect",stat:!0,forced:jje},{set:uX})});var hX=w(()=>{"use strict";var Vje=$(),$je=rt(),Wje=uC(),cX=Ao();cX&&Vje({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){$je(t),Wje(r);try{return cX(t,r),!0}catch(a){return!1}}})});var fX=w(()=>{"use strict";var Gje=$(),Kje=ct(),Zje=ba();Gje({global:!0},{Reflect:{}});Zje(Kje.Reflect,"Reflect",!0)});var pp=w((pkt,dX)=>{"use strict";var Hje=Nt(),Xje=ln(),Jje=Et(),Yje=Jje("match");dX.exports=function(e){var t;return Hje(e)&&((t=e[Yje])!==void 0?!!t:Xje(e)==="RegExp")}});var j1=w((mkt,pX)=>{"use strict";var Qje=rt();pX.exports=function(){var e=Qje(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var mp=w((vkt,vX)=>{"use strict";var e6e=Qe(),t6e=$t(),r6e=Mn(),i6e=j1(),mX=RegExp.prototype;vX.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in mX)&&!t6e(e,"flags")&&r6e(mX,e)?e6e(i6e,e):t}});var gy=w((gkt,gX)=>{"use strict";var ZM=ze(),n6e=ct(),HM=n6e.RegExp,XM=ZM(function(){var e=HM("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),a6e=XM||ZM(function(){return!HM("a","y").sticky}),o6e=XM||ZM(function(){var e=HM("^r","gy");return e.lastIndex=2,e.exec("str")!==null});gX.exports={BROKEN_CARET:o6e,MISSED_STICKY:a6e,UNSUPPORTED_Y:XM}});var V1=w((ykt,yX)=>{"use strict";var s6e=ze(),u6e=ct(),l6e=u6e.RegExp;yX.exports=s6e(function(){var e=l6e(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var JM=w((_kt,_X)=>{"use strict";var c6e=ze(),h6e=ct(),f6e=h6e.RegExp;_X.exports=c6e(function(){var e=f6e("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var IX=w(()=>{"use strict";var d6e=At(),tO=ct(),yy=ke(),p6e=Wd(),m6e=Ch(),v6e=bi(),g6e=Eu().f,xX=Mn(),y6e=pp(),bX=Lt(),_6e=mp(),qX=gy(),x6e=lC(),b6e=yr(),w6e=ze(),S6e=$t(),q6e=dr().enforce,A6e=lc(),E6e=Et(),AX=V1(),EX=JM(),T6e=E6e("match"),_c=tO.RegExp,vp=_c.prototype,I6e=tO.SyntaxError,C6e=yy(vp.exec),$1=yy("".charAt),wX=yy("".replace),SX=yy("".indexOf),P6e=yy("".slice),M6e=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$h=/a/g,YM=/a/g,O6e=new _c($h)!==$h,TX=qX.MISSED_STICKY,k6e=qX.UNSUPPORTED_Y,R6e=d6e&&(!O6e||TX||AX||EX||w6e(function(){return YM[T6e]=!1,_c($h)!==$h||_c(YM)===YM||String(_c($h,"i"))!=="/a/i"})),D6e=function(e){for(var t=e.length,r=0,a="",u=!1,s;r<=t;r++){if(s=$1(e,r),s==="\\"){a+=s+$1(e,++r);continue}!u&&s==="."?a+="[\\s\\S]":(s==="["?u=!0:s==="]"&&(u=!1),a+=s)}return a},L6e=function(e){for(var t=e.length,r=0,a="",u=[],s={},m=!1,x=!1,q=0,T="",I;r<=t;r++){if(I=$1(e,r),I==="\\")I+=$1(e,++r);else if(I==="]")m=!1;else if(!m)switch(!0){case I==="[":m=!0;break;case I==="(":C6e(M6e,P6e(e,r+1))&&(r+=2,x=!0),a+=I,q++;continue;case I===">"&&x:if(T===""||S6e(s,T))throw new I6e("Invalid capture group name");s[T]=!0,u[u.length]=[T,q],x=!1,T="";continue;}x?T+=I:a+=I}return[a,u]};if(p6e("RegExp",R6e)){for(yc=function(t,r){var a=xX(vp,this),u=y6e(t),s=r===void 0,m=[],x=t,q,T,I,L,z,Y;if(!a&&u&&s&&t.constructor===yc)return t;if((u||xX(vp,t))&&(t=t.source,s&&(r=_6e(x))),t=t===void 0?"":bX(t),r=r===void 0?"":bX(r),x=t,AX&&("dotAll"in $h)&&(T=!!r&&SX(r,"s")>-1,T&&(r=wX(r,/s/g,""))),q=r,TX&&("sticky"in $h)&&(I=!!r&&SX(r,"y")>-1,I&&k6e&&(r=wX(r,/y/g,""))),EX&&(L=L6e(t),t=L[0],m=L[1]),z=m6e(_c(t,r),a?this:vp,yc),(T||I||m.length)&&(Y=q6e(z),T&&(Y.dotAll=!0,Y.raw=yc(D6e(t),q)),I&&(Y.sticky=!0),m.length&&(Y.groups=m)),t!==x)try{v6e(z,"source",x===""?"(?:)":x)}catch(pe){}return z},QM=g6e(_c),eO=0;QM.length>eO;)x6e(yc,_c,QM[eO++]);vp.constructor=yc,yc.prototype=vp,b6e(tO,"RegExp",yc,{constructor:!0})}var yc,QM,eO;A6e("RegExp")});var PX=w(()=>{"use strict";var F6e=At(),z6e=V1(),N6e=ln(),B6e=Gr(),U6e=dr().get,CX=RegExp.prototype,j6e=TypeError;F6e&&z6e&&B6e(CX,"dotAll",{configurable:!0,get:function(){if(this!==CX){if(N6e(this)==="RegExp")return!!U6e(this).dotAll;throw new j6e("Incompatible receiver, RegExp required")}}})});var _y=w((qkt,OX)=>{"use strict";var gp=Qe(),G1=ke(),V6e=Lt(),$6e=j1(),W6e=gy(),G6e=Ms(),K6e=pi(),Z6e=dr().get,H6e=V1(),X6e=JM(),J6e=G6e("native-string-replace",String.prototype.replace),W1=RegExp.prototype.exec,iO=W1,Y6e=G1("".charAt),Q6e=G1("".indexOf),eVe=G1("".replace),rO=G1("".slice),nO=function(){var e=/a/,t=/b*/g;return gp(W1,e,"a"),gp(W1,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),MX=W6e.BROKEN_CARET,aO=/()??/.exec("")[1]!==void 0,tVe=nO||aO||MX||H6e||X6e;tVe&&(iO=function(t){var r=this,a=Z6e(r),u=V6e(t),s=a.raw,m,x,q,T,I,L,z;if(s)return s.lastIndex=r.lastIndex,m=gp(iO,s,u),r.lastIndex=s.lastIndex,m;var Y=a.groups,pe=MX&&r.sticky,de=gp($6e,r),Z=r.source,H=0,J=u;if(pe&&(de=eVe(de,"y",""),Q6e(de,"g")===-1&&(de+="g"),J=rO(u,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&Y6e(u,r.lastIndex-1)!==`
`)&&(Z="(?: "+Z+")",J=" "+J,H++),x=new RegExp("^(?:"+Z+")",de)),aO&&(x=new RegExp("^"+Z+"$(?!\\s)",de)),nO&&(q=r.lastIndex),T=gp(W1,pe?x:r,J),pe?T?(T.input=rO(T.input,H),T[0]=rO(T[0],H),T.index=r.lastIndex,r.lastIndex+=T[0].length):r.lastIndex=0:nO&&T&&(r.lastIndex=r.global?T.index+T[0].length:q),aO&&T&&T.length>1&&gp(J6e,T[0],x,function(){for(I=1;I<arguments.length-2;I++)arguments[I]===void 0&&(T[I]=void 0)}),T&&Y)for(T.groups=L=K6e(null),I=0;I<Y.length;I++)z=Y[I],L[z[0]]=T[z[1]];return T});OX.exports=iO});var K1=w(()=>{"use strict";var rVe=$(),kX=_y();rVe({target:"RegExp",proto:!0,forced:/./.exec!==kX},{exec:kX})});var LX=w(()=>{"use strict";var iVe=ct(),nVe=At(),aVe=Gr(),oVe=j1(),sVe=ze(),RX=iVe.RegExp,DX=RX.prototype,uVe=nVe&&sVe(function(){var e=!0;try{RX(".","d")}catch(q){e=!1}var t={},r="",a=e?"dgimsy":"gimsy",u=function(q,T){Object.defineProperty(t,q,{get:function(){return r+=T,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(s.hasIndices="d");for(var m in s)u(m,s[m]);var x=Object.getOwnPropertyDescriptor(DX,"flags").get.call(t);return x!==a||r!==a});uVe&&aVe(DX,"flags",{configurable:!0,get:oVe})});var zX=w(()=>{"use strict";var lVe=At(),cVe=gy().MISSED_STICKY,hVe=ln(),fVe=Gr(),dVe=dr().get,FX=RegExp.prototype,pVe=TypeError;lVe&&cVe&&fVe(FX,"sticky",{configurable:!0,get:function(){if(this!==FX){if(hVe(this)==="RegExp")return!!dVe(this).sticky;throw new pVe("Incompatible receiver, RegExp required")}}})});var UX=w(()=>{"use strict";K1();var mVe=$(),NX=Qe(),vVe=zt(),BX=rt(),gVe=Lt(),yVe=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),_Ve=/./.test;mVe({target:"RegExp",proto:!0,forced:!yVe},{test:function(e){var t=BX(this),r=gVe(e),a=t.exec;if(!vVe(a))return NX(_Ve,t,r);var u=NX(a,t,r);return u===null?!1:(BX(u),!0)}})});var $X=w(()=>{"use strict";var xVe=wh().PROPER,bVe=yr(),wVe=rt(),jX=Lt(),SVe=ze(),qVe=mp(),oO="toString",AVe=RegExp.prototype,VX=AVe[oO],EVe=SVe(function(){return VX.call({source:"a",flags:"b"})!=="/a/b"}),TVe=xVe&&VX.name!==oO;(EVe||TVe)&&bVe(RegExp.prototype,oO,function(){var t=wVe(this),r=jX(t.source),a=jX(qVe(t));return"/"+r+"/"+a},{unsafe:!0})});var WX=w(()=>{"use strict";var IVe=ty(),CVe=DP();IVe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},CVe)});var GX=w(()=>{"use strict";WX()});var KX=w(()=>{"use strict";var PVe=$(),MVe=ke(),OVe=Fr(),kVe=zr(),RVe=Lt(),DVe=ze(),LVe=MVe("".charAt),FVe=DVe(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});PVe({target:"String",proto:!0,forced:FVe},{at:function(t){var r=RVe(OVe(this)),a=r.length,u=kVe(t),s=u>=0?u:a+u;return s<0||s>=a?void 0:LVe(r,s)}})});var Wh=w((Ukt,XX)=>{"use strict";var sO=ke(),zVe=zr(),NVe=Lt(),BVe=Fr(),UVe=sO("".charAt),ZX=sO("".charCodeAt),jVe=sO("".slice),HX=function(e){return function(t,r){var a=NVe(BVe(t)),u=zVe(r),s=a.length,m,x;return u<0||u>=s?e?"":void 0:(m=ZX(a,u),m<55296||m>56319||u+1===s||(x=ZX(a,u+1))<56320||x>57343?e?UVe(a,u):m:e?jVe(a,u,u+2):(m-55296<<10)+(x-56320)+65536)}};XX.exports={codeAt:HX(!1),charAt:HX(!0)}});var JX=w(()=>{"use strict";var VVe=$(),$Ve=Wh().codeAt;VVe({target:"String",proto:!0},{codePointAt:function(t){return $Ve(this,t)}})});var Z1=w(($kt,YX)=>{"use strict";var WVe=pp(),GVe=TypeError;YX.exports=function(e){if(WVe(e))throw new GVe("The method doesn't accept regular expressions");return e}});var H1=w((Wkt,QX)=>{"use strict";var KVe=Et(),ZVe=KVe("match");QX.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[ZVe]=!1,"/./"[e](t)}catch(a){}}return!1}});var nJ=w(()=>{"use strict";var HVe=$(),rJ=Tu(),XVe=Fi().f,JVe=_a(),eJ=Lt(),YVe=Z1(),QVe=Fr(),e8e=H1(),t8e=Zt(),tJ=rJ("".endsWith),r8e=rJ("".slice),i8e=Math.min,iJ=e8e("endsWith"),n8e=!t8e&&!iJ&&!!function(){var e=XVe(String.prototype,"endsWith");return e&&!e.writable}();HVe({target:"String",proto:!0,forced:!n8e&&!iJ},{endsWith:function(t){var r=eJ(QVe(this));YVe(t);var a=arguments.length>1?arguments[1]:void 0,u=r.length,s=a===void 0?u:i8e(JVe(a),u),m=eJ(t);return tJ?tJ(r,m,s):r8e(r,s-m.length,s)===m}})});var sJ=w(()=>{"use strict";var a8e=$(),o8e=ke(),s8e=wo(),u8e=RangeError,aJ=String.fromCharCode,oJ=String.fromCodePoint,l8e=o8e([].join),c8e=!!oJ&&oJ.length!==1;a8e({target:"String",stat:!0,arity:1,forced:c8e},{fromCodePoint:function(t){for(var r=[],a=arguments.length,u=0,s;a>u;){if(s=+arguments[u++],s8e(s,1114111)!==s)throw new u8e(s+" is not a valid code point");r[u]=s<65536?aJ(s):aJ(((s-=65536)>>10)+55296,s%1024+56320)}return l8e(r,"")}})});var lJ=w(()=>{"use strict";var h8e=$(),f8e=ke(),d8e=Z1(),p8e=Fr(),uJ=Lt(),m8e=H1(),v8e=f8e("".indexOf);h8e({target:"String",proto:!0,forced:!m8e("includes")},{includes:function(t){return!!~v8e(uJ(p8e(this)),uJ(d8e(t)),arguments.length>1?arguments[1]:void 0)}})});var uO=w(()=>{"use strict";var g8e=$(),y8e=ke(),_8e=Fr(),x8e=Lt(),cJ=y8e("".charCodeAt);g8e({target:"String",proto:!0},{isWellFormed:function(){for(var t=x8e(_8e(this)),r=t.length,a=0;a<r;a++){var u=cJ(t,a);if((u&63488)===55296&&(u>=56320||++a>=r||(cJ(t,a)&64512)!==56320))return!1}return!0}})});var lO=w(()=>{"use strict";var b8e=Wh().charAt,w8e=Lt(),fJ=dr(),S8e=e1(),hJ=cn(),dJ="String Iterator",q8e=fJ.set,A8e=fJ.getterFor(dJ);S8e(String,"String",function(e){q8e(this,{type:dJ,string:w8e(e),index:0})},function(){var t=A8e(this),r=t.string,a=t.index,u;return a>=r.length?hJ(void 0,!0):(u=b8e(r,a),t.index+=u.length,hJ(u,!1))})});var xy=w((rRt,yJ)=>{"use strict";K1();var pJ=Tu(),mJ=yr(),E8e=_y(),vJ=ze(),gJ=Et(),T8e=bi(),I8e=gJ("species"),cO=RegExp.prototype;yJ.exports=function(e,t,r,a){var u=gJ(e),s=!vJ(function(){var T={};return T[u]=function(){return 7},""[e](T)!==7}),m=s&&!vJ(function(){var T=!1,I=/a/;return e==="split"&&(I={},I.constructor={},I.constructor[I8e]=function(){return I},I.flags="",I[u]=/./[u]),I.exec=function(){return T=!0,null},I[u](""),!T});if(!s||!m||r){var x=pJ(/./[u]),q=t(u,""[e],function(T,I,L,z,Y){var pe=pJ(T),de=I.exec;return de===E8e||de===cO.exec?s&&!Y?{done:!0,value:x(I,L,z)}:{done:!0,value:pe(L,I,z)}:{done:!1}});mJ(String.prototype,e,q[0]),mJ(cO,u,q[1])}a&&T8e(cO[u],"sham",!0)}});var by=w((iRt,_J)=>{"use strict";var C8e=Wh().charAt;_J.exports=function(e,t,r){return t+(r?C8e(e,t).length:1)}});var yp=w((nRt,bJ)=>{"use strict";var xJ=Qe(),P8e=rt(),M8e=zt(),O8e=ln(),k8e=_y(),R8e=TypeError;bJ.exports=function(e,t){var r=e.exec;if(M8e(r)){var a=xJ(r,e,t);return a!==null&&P8e(a),a}if(O8e(e)==="RegExp")return xJ(k8e,e,t);throw new R8e("RegExp#exec called on incompatible receiver")}});var SJ=w(()=>{"use strict";var D8e=Qe(),L8e=xy(),F8e=rt(),z8e=xi(),N8e=_a(),hO=Lt(),B8e=Fr(),U8e=di(),j8e=by(),wJ=yp();L8e("match",function(e,t,r){return[function(u){var s=B8e(this),m=z8e(u)?void 0:U8e(u,e);return m?D8e(m,u,s):new RegExp(u)[e](hO(s))},function(a){var u=F8e(this),s=hO(a),m=r(t,u,s);if(m.done)return m.value;if(!u.global)return wJ(u,s);var x=u.unicode;u.lastIndex=0;for(var q=[],T=0,I;(I=wJ(u,s))!==null;){var L=hO(I[0]);q[T]=L,L===""&&(u.lastIndex=j8e(s,N8e(u.lastIndex),x)),T++}return T===0?null:q}]})});var vO=w(()=>{"use strict";var V8e=$(),qJ=Qe(),TJ=Tu(),$8e=sc(),X1=cn(),AJ=Fr(),IJ=_a(),wy=Lt(),W8e=rt(),G8e=xi(),K8e=ln(),Z8e=pp(),CJ=mp(),H8e=di(),X8e=yr(),J8e=ze(),Y8e=Et(),Q8e=Lh(),e$e=by(),t$e=yp(),PJ=dr(),dO=Zt(),J1=Y8e("matchAll"),MJ="RegExp String",OJ=MJ+" Iterator",r$e=PJ.set,i$e=PJ.getterFor(OJ),EJ=RegExp.prototype,n$e=TypeError,pO=TJ("".indexOf),Y1=TJ("".matchAll),fO=!!Y1&&!J8e(function(){Y1("a",/./)}),a$e=$8e(function(t,r,a,u){r$e(this,{type:OJ,regexp:t,string:r,global:a,unicode:u,done:!1})},MJ,function(){var t=i$e(this);if(t.done)return X1(void 0,!0);var r=t.regexp,a=t.string,u=t$e(r,a);return u===null?(t.done=!0,X1(void 0,!0)):t.global?(wy(u[0])===""&&(r.lastIndex=e$e(a,IJ(r.lastIndex),t.unicode)),X1(u,!1)):(t.done=!0,X1(u,!1))}),mO=function(e){var t=W8e(this),r=wy(e),a=Q8e(t,RegExp),u=wy(CJ(t)),s,m,x;return s=new a(a===RegExp?t.source:t,u),m=!!~pO(u,"g"),x=!!~pO(u,"u"),s.lastIndex=IJ(t.lastIndex),new a$e(s,r,m,x)};V8e({target:"String",proto:!0,forced:fO},{matchAll:function(t){var r=AJ(this),a,u,s,m;if(G8e(t)){if(fO)return Y1(r,t)}else{if(Z8e(t)&&(a=wy(AJ(CJ(t))),!~pO(a,"g")))throw new n$e("`.matchAll` does not allow non-global regexes");if(fO)return Y1(r,t);if(s=H8e(t,J1),s===void 0&&dO&&K8e(t)==="RegExp"&&(s=mO),s)return qJ(s,t,r)}return u=wy(r),m=new RegExp(t,"g"),dO?qJ(mO,m,u):m[J1](u)}});dO||J1 in EJ||X8e(EJ,J1,mO)});var gO=w((lRt,kJ)=>{"use strict";var o$e=Cs();kJ.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o$e)});var RJ=w(()=>{"use strict";var s$e=$(),u$e=x1().end,l$e=gO();s$e({target:"String",proto:!0,forced:l$e},{padEnd:function(t){return u$e(this,t,arguments.length>1?arguments[1]:void 0)}})});var DJ=w(()=>{"use strict";var c$e=$(),h$e=x1().start,f$e=gO();c$e({target:"String",proto:!0,forced:f$e},{padStart:function(t){return h$e(this,t,arguments.length>1?arguments[1]:void 0)}})});var NJ=w(()=>{"use strict";var d$e=$(),zJ=ke(),p$e=Ii(),m$e=Ht(),LJ=Lt(),v$e=Yt(),FJ=zJ([].push),g$e=zJ([].join);d$e({target:"String",stat:!0},{raw:function(t){var r=p$e(m$e(t).raw),a=v$e(r);if(!a)return"";for(var u=arguments.length,s=[],m=0;;){if(FJ(s,LJ(r[m++])),m===a)return g$e(s,"");m<u&&FJ(s,LJ(arguments[m]))}}})});var BJ=w(()=>{"use strict";var y$e=$(),_$e=Qg();y$e({target:"String",proto:!0},{repeat:_$e})});var bO=w((yRt,UJ)=>{"use strict";var xO=ke(),x$e=Ht(),b$e=Math.floor,yO=xO("".charAt),w$e=xO("".replace),_O=xO("".slice),S$e=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,q$e=/\$([$&'`]|\d{1,2})/g;UJ.exports=function(e,t,r,a,u,s){var m=r+e.length,x=a.length,q=q$e;return u!==void 0&&(u=x$e(u),q=S$e),w$e(s,q,function(T,I){var L;switch(yO(I,0)){case"$":return"$";case"&":return e;case"`":return _O(t,0,r);case"'":return _O(t,m);case"<":L=u[_O(I,1,-1)];break;default:var z=+I;if(z===0)return T;if(z>x){var Y=b$e(z/10);return Y===0?T:Y<=x?a[Y-1]===void 0?yO(I,1):a[Y-1]+yO(I,1):T}L=a[z-1];}return L===void 0?"":L})}});var GJ=w(()=>{"use strict";var A$e=On(),jJ=Qe(),Q1=ke(),E$e=xy(),T$e=ze(),I$e=rt(),C$e=zt(),P$e=xi(),M$e=zr(),O$e=_a(),_p=Lt(),k$e=Fr(),R$e=by(),D$e=di(),L$e=bO(),F$e=yp(),z$e=Et(),SO=z$e("replace"),N$e=Math.max,B$e=Math.min,U$e=Q1([].concat),wO=Q1([].push),VJ=Q1("".indexOf),$J=Q1("".slice),j$e=function(e){return e===void 0?e:String(e)},V$e=function(){return"a".replace(/./,"$0")==="$0"}(),WJ=function(){return /./[SO]?/./[SO]("a","$0")==="":!1}(),$$e=!T$e(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});E$e("replace",function(e,t,r){var a=WJ?"$":"$0";return[function(s,m){var x=k$e(this),q=P$e(s)?void 0:D$e(s,SO);return q?jJ(q,s,x,m):jJ(t,_p(x),s,m)},function(u,s){var m=I$e(this),x=_p(u);if(typeof s=="string"&&VJ(s,a)===-1&&VJ(s,"$<")===-1){var q=r(t,m,x,s);if(q.done)return q.value}var T=C$e(s);T||(s=_p(s));var I=m.global,L;I&&(L=m.unicode,m.lastIndex=0);for(var z=[],Y;Y=F$e(m,x),!(Y===null||(wO(z,Y),!I));){var pe=_p(Y[0]);pe===""&&(m.lastIndex=R$e(x,O$e(m.lastIndex),L))}for(var de="",Z=0,H=0;H<z.length;H++){Y=z[H];for(var J=_p(Y[0]),ve=N$e(B$e(M$e(Y.index),x.length),0),be=[],Le,Pe=1;Pe<Y.length;Pe++)wO(be,j$e(Y[Pe]));var Ge=Y.groups;if(T){var pt=U$e([J],be,ve,x);Ge!==void 0&&wO(pt,Ge),Le=_p(A$e(s,void 0,pt))}else Le=L$e(J,x,ve,be,Ge,s);ve>=Z&&(de+=$J(x,Z,ve)+Le,Z=ve+J.length)}return de+$J(x,Z)}]},!$$e||!V$e||WJ)});var AO=w(()=>{"use strict";var W$e=$(),G$e=Qe(),qO=ke(),KJ=Fr(),K$e=zt(),Z$e=xi(),H$e=pp(),xp=Lt(),X$e=di(),J$e=mp(),Y$e=bO(),Q$e=Et(),eWe=Zt(),tWe=Q$e("replace"),rWe=TypeError,XJ=qO("".indexOf),iWe=qO("".replace),ZJ=qO("".slice),nWe=Math.max,HJ=function(e,t,r){return r>e.length?-1:t===""?r:XJ(e,t,r)};W$e({target:"String",proto:!0},{replaceAll:function(t,r){var a=KJ(this),u,s,m,x,q,T,I,L,z,Y=0,pe=0,de="";if(!Z$e(t)){if(u=H$e(t),u&&(s=xp(KJ(J$e(t))),!~XJ(s,"g")))throw new rWe("`.replaceAll` does not allow non-global regexes");if(m=X$e(t,tWe),m)return G$e(m,t,a,r);if(eWe&&u)return iWe(xp(a),t,r)}for(x=xp(a),q=xp(t),T=K$e(r),T||(r=xp(r)),I=q.length,L=nWe(1,I),Y=HJ(x,q,0);Y!==-1;)z=T?xp(r(q,Y,x)):Y$e(q,x,Y,[],void 0,r),de+=ZJ(x,pe,Y)+z,pe=Y+I,Y=HJ(x,q,Y+L);return pe<x.length&&(de+=ZJ(x,pe)),de}})});var QJ=w(()=>{"use strict";var aWe=Qe(),oWe=xy(),sWe=rt(),uWe=xi(),lWe=Fr(),JJ=nM(),YJ=Lt(),cWe=di(),hWe=yp();oWe("search",function(e,t,r){return[function(u){var s=lWe(this),m=uWe(u)?void 0:cWe(u,e);return m?aWe(m,u,s):new RegExp(u)[e](YJ(s))},function(a){var u=sWe(this),s=YJ(a),m=r(t,u,s);if(m.done)return m.value;var x=u.lastIndex;JJ(x,0)||(u.lastIndex=0);var q=hWe(u,s);return JJ(u.lastIndex,x)||(u.lastIndex=x),q===null?-1:q.index}]})});var aY=w(()=>{"use strict";var fWe=On(),Sy=Qe(),TO=ke(),dWe=xy(),pWe=rt(),mWe=xi(),vWe=pp(),eY=Fr(),gWe=Lh(),yWe=by(),_We=_a(),EO=Lt(),xWe=di(),tY=Ah(),rY=yp(),bWe=_y(),wWe=gy(),SWe=ze(),bp=wWe.UNSUPPORTED_Y,iY=4294967295,qWe=Math.min,nY=[].push,AWe=TO(/./.exec),wp=TO(nY),qy=TO("".slice),EWe=!SWe(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"});dWe("split",function(e,t,r){var a;return"abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length?a=function(u,s){var m=EO(eY(this)),x=s===void 0?iY:s>>>0;if(x===0)return[];if(u===void 0)return[m];if(!vWe(u))return Sy(t,m,u,x);for(var q=[],T=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(u.sticky?"y":""),I=0,L=new RegExp(u.source,T+"g"),z,Y,pe;(z=Sy(bWe,L,m))&&(Y=L.lastIndex,!(Y>I&&(wp(q,qy(m,I,z.index)),z.length>1&&z.index<m.length&&fWe(nY,q,tY(z,1)),pe=z[0].length,I=Y,q.length>=x)));)L.lastIndex===z.index&&L.lastIndex++;return I===m.length?(pe||!AWe(L,""))&&wp(q,""):wp(q,qy(m,I)),q.length>x?tY(q,0,x):q}:"0".split(void 0,0).length?a=function(u,s){return u===void 0&&s===0?[]:Sy(t,this,u,s)}:a=t,[function(s,m){var x=eY(this),q=mWe(s)?void 0:xWe(s,e);return q?Sy(q,s,x,m):Sy(a,EO(x),s,m)},function(u,s){var m=pWe(this),x=EO(u),q=r(a,m,x,s,a!==t);if(q.done)return q.value;var T=gWe(m,RegExp),I=m.unicode,L=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(bp?"g":"y"),z=new T(bp?"^(?:"+m.source+")":m,L),Y=s===void 0?iY:s>>>0;if(Y===0)return[];if(x.length===0)return rY(z,x)===null?[x]:[];for(var pe=0,de=0,Z=[];de<x.length;){z.lastIndex=bp?0:de;var H=rY(z,bp?qy(x,de):x),J;if(H===null||(J=qWe(_We(z.lastIndex+(bp?de:0)),x.length))===pe)de=yWe(x,de,I);else{if(wp(Z,qy(x,pe,de)),Z.length===Y)return Z;for(var ve=1;ve<=H.length-1;ve++)if(wp(Z,H[ve]),Z.length===Y)return Z;de=pe=J}}return wp(Z,qy(x,pe)),Z}]},!EWe,bp)});var cY=w(()=>{"use strict";var TWe=$(),uY=Tu(),IWe=Fi().f,CWe=_a(),oY=Lt(),PWe=Z1(),MWe=Fr(),OWe=H1(),kWe=Zt(),sY=uY("".startsWith),RWe=uY("".slice),DWe=Math.min,lY=OWe("startsWith"),LWe=!kWe&&!lY&&!!function(){var e=IWe(String.prototype,"startsWith");return e&&!e.writable}();TWe({target:"String",proto:!0,forced:!LWe&&!lY},{startsWith:function(t){var r=oY(MWe(this));PWe(t);var a=CWe(DWe(arguments.length>1?arguments[1]:void 0,r.length)),u=oY(t);return sY?sY(r,u,a):RWe(r,a,a+u.length)===u}})});var fY=w(()=>{"use strict";var FWe=$(),zWe=ke(),NWe=Fr(),hY=zr(),BWe=Lt(),UWe=zWe("".slice),jWe=Math.max,VWe=Math.min,$We=!"".substr||"ab".substr(-1)!=="b";FWe({target:"String",proto:!0,forced:$We},{substr:function(t,r){var a=BWe(NWe(this)),u=a.length,s=hY(t),m,x;return s===1/0&&(s=0),s<0&&(s=jWe(u+s,0)),m=r===void 0?u:hY(r),m<=0||m===1/0?"":(x=VWe(s+m,u),s>=x?"":UWe(a,s,x))}})});var MO=w(()=>{"use strict";var WWe=$(),mY=Qe(),PO=ke(),GWe=Fr(),KWe=Lt(),ZWe=ze(),HWe=Array,IO=PO("".charAt),dY=PO("".charCodeAt),XWe=PO([].join),CO="".toWellFormed,JWe="\uFFFD",pY=CO&&ZWe(function(){return mY(CO,1)!=="1"});WWe({target:"String",proto:!0,forced:pY},{toWellFormed:function(){var t=KWe(GWe(this));if(pY)return mY(CO,t);for(var r=t.length,a=HWe(r),u=0;u<r;u++){var s=dY(t,u);(s&63488)!==55296?a[u]=IO(t,u):s>=56320||u+1>=r||(dY(t,u+1)&64512)!==56320?a[u]=JWe:(a[u]=IO(t,u),a[++u]=IO(t,u))}return XWe(a,"")}})});var ew=w((kRt,yY)=>{"use strict";var YWe=wh().PROPER,QWe=ze(),vY=zh(),gY="\u200B\x85\u180E";yY.exports=function(e){return QWe(function(){return!!vY[e]()||gY[e]()!==gY||YWe&&vY[e].name!==e})}});var _Y=w(()=>{"use strict";var e7e=$(),t7e=Nh().trim,r7e=ew();e7e({target:"String",proto:!0,forced:r7e("trim")},{trim:function(){return t7e(this)}})});var OO=w((LRt,xY)=>{"use strict";var i7e=Nh().end,n7e=ew();xY.exports=n7e("trimEnd")?function(){return i7e(this)}:"".trimEnd});var wY=w(()=>{"use strict";var a7e=$(),bY=OO();a7e({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==bY},{trimRight:bY})});var qY=w(()=>{"use strict";wY();var o7e=$(),SY=OO();o7e({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==SY},{trimEnd:SY})});var kO=w((URt,AY)=>{"use strict";var s7e=Nh().start,u7e=ew();AY.exports=u7e("trimStart")?function(){return s7e(this)}:"".trimStart});var TY=w(()=>{"use strict";var l7e=$(),EY=kO();l7e({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==EY},{trimLeft:EY})});var CY=w(()=>{"use strict";TY();var c7e=$(),IY=kO();c7e({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==IY},{trimStart:IY})});var qa=w((GRt,MY)=>{"use strict";var h7e=ke(),f7e=Fr(),PY=Lt(),d7e=/"/g,p7e=h7e("".replace);MY.exports=function(e,t,r,a){var u=PY(f7e(e)),s="<"+t;return r!==""&&(s+=" "+r+"=\""+p7e(PY(a),d7e,"&quot;")+"\""),s+">"+u+"</"+t+">"}});var Aa=w((KRt,OY)=>{"use strict";var m7e=ze();OY.exports=function(e){return m7e(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var kY=w(()=>{"use strict";var v7e=$(),g7e=qa(),y7e=Aa();v7e({target:"String",proto:!0,forced:y7e("anchor")},{anchor:function(t){return g7e(this,"a","name",t)}})});var RY=w(()=>{"use strict";var _7e=$(),x7e=qa(),b7e=Aa();_7e({target:"String",proto:!0,forced:b7e("big")},{big:function(){return x7e(this,"big","","")}})});var DY=w(()=>{"use strict";var w7e=$(),S7e=qa(),q7e=Aa();w7e({target:"String",proto:!0,forced:q7e("blink")},{blink:function(){return S7e(this,"blink","","")}})});var LY=w(()=>{"use strict";var A7e=$(),E7e=qa(),T7e=Aa();A7e({target:"String",proto:!0,forced:T7e("bold")},{bold:function(){return E7e(this,"b","","")}})});var FY=w(()=>{"use strict";var I7e=$(),C7e=qa(),P7e=Aa();I7e({target:"String",proto:!0,forced:P7e("fixed")},{fixed:function(){return C7e(this,"tt","","")}})});var zY=w(()=>{"use strict";var M7e=$(),O7e=qa(),k7e=Aa();M7e({target:"String",proto:!0,forced:k7e("fontcolor")},{fontcolor:function(t){return O7e(this,"font","color",t)}})});var NY=w(()=>{"use strict";var R7e=$(),D7e=qa(),L7e=Aa();R7e({target:"String",proto:!0,forced:L7e("fontsize")},{fontsize:function(t){return D7e(this,"font","size",t)}})});var BY=w(()=>{"use strict";var F7e=$(),z7e=qa(),N7e=Aa();F7e({target:"String",proto:!0,forced:N7e("italics")},{italics:function(){return z7e(this,"i","","")}})});var UY=w(()=>{"use strict";var B7e=$(),U7e=qa(),j7e=Aa();B7e({target:"String",proto:!0,forced:j7e("link")},{link:function(t){return U7e(this,"a","href",t)}})});var jY=w(()=>{"use strict";var V7e=$(),$7e=qa(),W7e=Aa();V7e({target:"String",proto:!0,forced:W7e("small")},{small:function(){return $7e(this,"small","","")}})});var VY=w(()=>{"use strict";var G7e=$(),K7e=qa(),Z7e=Aa();G7e({target:"String",proto:!0,forced:Z7e("strike")},{strike:function(){return K7e(this,"strike","","")}})});var $Y=w(()=>{"use strict";var H7e=$(),X7e=qa(),J7e=Aa();H7e({target:"String",proto:!0,forced:J7e("sub")},{sub:function(){return X7e(this,"sub","","")}})});var WY=w(()=>{"use strict";var Y7e=$(),Q7e=qa(),eGe=Aa();Y7e({target:"String",proto:!0,forced:eGe("sup")},{sup:function(){return Q7e(this,"sup","","")}})});var tw=w((xDt,KY)=>{"use strict";var GY=ct(),RO=ze(),tGe=Wg(),rGe=Wt().NATIVE_ARRAY_BUFFER_VIEWS,iGe=GY.ArrayBuffer,Gh=GY.Int8Array;KY.exports=!rGe||!RO(function(){Gh(1)})||!RO(function(){new Gh(-1)})||!tGe(function(e){new Gh,new Gh(null),new Gh(1.5),new Gh(e)},!0)||RO(function(){return new Gh(new iGe(2),1,void 0).length!==1})});var Sp=w((bDt,ZY)=>{"use strict";var nGe=zr(),aGe=RangeError;ZY.exports=function(e){var t=nGe(e);if(t<0)throw new aGe("The argument can't be less than 0");return t}});var DO=w((wDt,HY)=>{"use strict";var oGe=Sp(),sGe=RangeError;HY.exports=function(e,t){var r=oGe(e);if(r%t)throw new sGe("Wrong offset");return r}});var LO=w((SDt,XY)=>{"use strict";var uGe=Math.round;XY.exports=function(e){var t=uGe(e);return t<0?0:t>255?255:t&255}});var rw=w((qDt,JY)=>{"use strict";var lGe=xa();JY.exports=function(e){var t=lGe(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var Ay=w((ADt,YY)=>{"use strict";var cGe=Tg(),hGe=TypeError;YY.exports=function(e){var t=cGe(e,"number");if(typeof t=="number")throw new hGe("Can't convert number to bigint");return BigInt(t)}});var FO=w((EDt,QY)=>{"use strict";var fGe=qr(),dGe=Qe(),pGe=ip(),mGe=Ht(),vGe=Yt(),gGe=ac(),yGe=Mu(),_Ge=Gb(),xGe=rw(),bGe=Wt().aTypedArrayConstructor,wGe=Ay();QY.exports=function(t){var r=pGe(this),a=mGe(t),u=arguments.length,s=u>1?arguments[1]:void 0,m=s!==void 0,x=yGe(a),q,T,I,L,z,Y,pe,de;if(x&&!_Ge(x))for(pe=gGe(a,x),de=pe.next,a=[];!(Y=dGe(de,pe)).done;)a.push(Y.value);for(m&&u>2&&(s=fGe(s,arguments[2])),T=vGe(a),I=new(bGe(r))(T),L=xGe(I),q=0;T>q;q++)z=m?s(a[q],q):a[q],I[q]=L?wGe(z):+z;return I}});var zs=w((TDt,$O)=>{"use strict";var eQ=$(),hQ=ct(),tQ=Qe(),SGe=At(),qGe=tw(),qp=Wt(),fQ=Yg(),rQ=kn(),AGe=ya(),Ey=bi(),EGe=I1(),TGe=_a(),iQ=Jd(),zO=DO(),IGe=LO(),dQ=ts(),Ty=$t(),CGe=xa(),UO=Nt(),PGe=Au(),MGe=pi(),OGe=Mn(),iw=Ao(),kGe=Eu().f,nQ=FO(),RGe=mi().forEach,DGe=lc(),LGe=Gr(),pQ=Or(),mQ=Fi(),WO=dr(),FGe=Ch(),jO=WO.get,zGe=WO.set,NGe=WO.enforce,vQ=pQ.f,BGe=mQ.f,NO=hQ.RangeError,gQ=fQ.ArrayBuffer,UGe=gQ.prototype,jGe=fQ.DataView,nw=qp.NATIVE_ARRAY_BUFFER_VIEWS,aQ=qp.TYPED_ARRAY_TAG,oQ=qp.TypedArray,Iy=qp.TypedArrayPrototype,VGe=qp.aTypedArrayConstructor,VO=qp.isTypedArray,aw="BYTES_PER_ELEMENT",BO="Wrong length",sQ=function(e,t){VGe(e);for(var r=0,a=t.length,u=new e(a);a>r;)u[r]=t[r++];return u},ow=function(e,t){LGe(e,t,{configurable:!0,get:function(){return jO(this)[t]}})},uQ=function(e){var t;return OGe(UGe,e)||(t=CGe(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},yQ=function(e,t){return VO(e)&&!PGe(t)&&t in e&&EGe(+t)&&t>=0},lQ=function(t,r){return r=dQ(r),yQ(t,r)?AGe(2,t[r]):BGe(t,r)},cQ=function(t,r,a){return r=dQ(r),yQ(t,r)&&UO(a)&&Ty(a,"value")&&!Ty(a,"get")&&!Ty(a,"set")&&!a.configurable&&(!Ty(a,"writable")||a.writable)&&(!Ty(a,"enumerable")||a.enumerable)?(t[r]=a.value,t):vQ(t,r,a)};SGe?(nw||(mQ.f=lQ,pQ.f=cQ,ow(Iy,"buffer"),ow(Iy,"byteOffset"),ow(Iy,"byteLength"),ow(Iy,"length")),eQ({target:"Object",stat:!0,forced:!nw},{getOwnPropertyDescriptor:lQ,defineProperty:cQ}),$O.exports=function(e,t,r){var a=e.match(/\d+/)[0]/8,u=e+(r?"Clamped":"")+"Array",s="get"+e,m="set"+e,x=hQ[u],q=x,T=q&&q.prototype,I={},L=function(de,Z){var H=jO(de);return H.view[s](Z*a+H.byteOffset,!0)},z=function(de,Z,H){var J=jO(de);J.view[m](Z*a+J.byteOffset,r?IGe(H):H,!0)},Y=function(de,Z){vQ(de,Z,{get:function(){return L(this,Z)},set:function(H){return z(this,Z,H)},enumerable:!0})};nw?qGe&&(q=t(function(de,Z,H,J){return rQ(de,T),FGe(function(){return UO(Z)?uQ(Z)?J!==void 0?new x(Z,zO(H,a),J):H!==void 0?new x(Z,zO(H,a)):new x(Z):VO(Z)?sQ(q,Z):tQ(nQ,q,Z):new x(iQ(Z))}(),de,q)}),iw&&iw(q,oQ),RGe(kGe(x),function(de){de in q||Ey(q,de,x[de])}),q.prototype=T):(q=t(function(de,Z,H,J){rQ(de,T);var ve=0,be=0,Le,Pe,Ge;if(!UO(Z))Ge=iQ(Z),Pe=Ge*a,Le=new gQ(Pe);else if(uQ(Z)){Le=Z,be=zO(H,a);var pt=Z.byteLength;if(J===void 0){if(pt%a)throw new NO(BO);if(Pe=pt-be,Pe<0)throw new NO(BO)}else if(Pe=TGe(J)*a,Pe+be>pt)throw new NO(BO);Ge=Pe/a}else return VO(Z)?sQ(q,Z):tQ(nQ,q,Z);for(zGe(de,{buffer:Le,byteOffset:be,byteLength:Pe,length:Ge,view:new jGe(Le)});ve<Ge;)Y(de,ve++)}),iw&&iw(q,oQ),T=q.prototype=MGe(Iy)),T.constructor!==q&&Ey(T,"constructor",q),NGe(T).TypedArrayConstructor=q,aQ&&Ey(T,aQ,u);var pe=q!==x;I[u]=q,eQ({global:!0,constructor:!0,forced:pe,sham:!nw},I),aw in q||Ey(q,aw,a),aw in T||Ey(T,aw,a),DGe(u)}):$O.exports=function(){}});var _Q=w(()=>{"use strict";var $Ge=zs();$Ge("Float32",function(e){return function(r,a,u){return e(this,r,a,u)}})});var xQ=w(()=>{"use strict";var WGe=zs();WGe("Float64",function(e){return function(r,a,u){return e(this,r,a,u)}})});var bQ=w(()=>{"use strict";var GGe=zs();GGe("Int8",function(e){return function(r,a,u){return e(this,r,a,u)}})});var wQ=w(()=>{"use strict";var KGe=zs();KGe("Int16",function(e){return function(r,a,u){return e(this,r,a,u)}})});var SQ=w(()=>{"use strict";var ZGe=zs();ZGe("Int32",function(e){return function(r,a,u){return e(this,r,a,u)}})});var qQ=w(()=>{"use strict";var HGe=zs();HGe("Uint8",function(e){return function(r,a,u){return e(this,r,a,u)}})});var AQ=w(()=>{"use strict";var XGe=zs();XGe("Uint8",function(e){return function(r,a,u){return e(this,r,a,u)}},!0)});var EQ=w(()=>{"use strict";var JGe=zs();JGe("Uint16",function(e){return function(r,a,u){return e(this,r,a,u)}})});var TQ=w(()=>{"use strict";var YGe=zs();YGe("Uint32",function(e){return function(r,a,u){return e(this,r,a,u)}})});var GO=w(()=>{"use strict";var IQ=Wt(),QGe=Yt(),eKe=zr(),tKe=IQ.aTypedArray,rKe=IQ.exportTypedArrayMethod;rKe("at",function(t){var r=tKe(this),a=QGe(r),u=eKe(t),s=u>=0?u:a+u;return s<0||s>=a?void 0:r[s]})});var PQ=w(()=>{"use strict";var iKe=ke(),CQ=Wt(),nKe=EC(),aKe=iKe(nKe),oKe=CQ.aTypedArray,sKe=CQ.exportTypedArrayMethod;sKe("copyWithin",function(t,r){return aKe(oKe(this),t,r,arguments.length>2?arguments[2]:void 0)})});var OQ=w(()=>{"use strict";var MQ=Wt(),uKe=mi().every,lKe=MQ.aTypedArray,cKe=MQ.exportTypedArrayMethod;cKe("every",function(t){return uKe(lKe(this),t,arguments.length>1?arguments[1]:void 0)})});var RQ=w(()=>{"use strict";var kQ=Wt(),hKe=Xb(),fKe=Ay(),dKe=xa(),pKe=Qe(),mKe=ke(),vKe=ze(),gKe=kQ.aTypedArray,yKe=kQ.exportTypedArrayMethod,_Ke=mKe("".slice),xKe=vKe(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});yKe("fill",function(t){var r=arguments.length;gKe(this);var a=_Ke(dKe(this),0,3)==="Big"?fKe(t):+t;return pKe(hKe,this,a,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},xKe)});var Ap=w((eLt,LQ)=>{"use strict";var DQ=Wt(),bKe=Lh(),wKe=DQ.aTypedArrayConstructor,SKe=DQ.getTypedArrayConstructor;LQ.exports=function(e){return wKe(bKe(e,SKe(e)))}});var sw=w((tLt,FQ)=>{"use strict";var qKe=Rh(),AKe=Ap();FQ.exports=function(e,t){return qKe(AKe(e),t)}});var NQ=w(()=>{"use strict";var zQ=Wt(),EKe=mi().filter,TKe=sw(),IKe=zQ.aTypedArray,CKe=zQ.exportTypedArrayMethod;CKe("filter",function(t){var r=EKe(IKe(this),t,arguments.length>1?arguments[1]:void 0);return TKe(this,r)})});var UQ=w(()=>{"use strict";var BQ=Wt(),PKe=mi().find,MKe=BQ.aTypedArray,OKe=BQ.exportTypedArrayMethod;OKe("find",function(t){return PKe(MKe(this),t,arguments.length>1?arguments[1]:void 0)})});var VQ=w(()=>{"use strict";var jQ=Wt(),kKe=mi().findIndex,RKe=jQ.aTypedArray,DKe=jQ.exportTypedArrayMethod;DKe("findIndex",function(t){return kKe(RKe(this),t,arguments.length>1?arguments[1]:void 0)})});var KO=w(()=>{"use strict";var $Q=Wt(),LKe=$g().findLast,FKe=$Q.aTypedArray,zKe=$Q.exportTypedArrayMethod;zKe("findLast",function(t){return LKe(FKe(this),t,arguments.length>1?arguments[1]:void 0)})});var ZO=w(()=>{"use strict";var WQ=Wt(),NKe=$g().findLastIndex,BKe=WQ.aTypedArray,UKe=WQ.exportTypedArrayMethod;UKe("findLastIndex",function(t){return NKe(BKe(this),t,arguments.length>1?arguments[1]:void 0)})});var KQ=w(()=>{"use strict";var GQ=Wt(),jKe=mi().forEach,VKe=GQ.aTypedArray,$Ke=GQ.exportTypedArrayMethod;$Ke("forEach",function(t){jKe(VKe(this),t,arguments.length>1?arguments[1]:void 0)})});var ZQ=w(()=>{"use strict";var WKe=tw(),GKe=Wt().exportTypedArrayStaticMethod,KKe=FO();GKe("from",KKe,WKe)});var XQ=w(()=>{"use strict";var HQ=Wt(),ZKe=Vd().includes,HKe=HQ.aTypedArray,XKe=HQ.exportTypedArrayMethod;XKe("includes",function(t){return ZKe(HKe(this),t,arguments.length>1?arguments[1]:void 0)})});var YQ=w(()=>{"use strict";var JQ=Wt(),JKe=Vd().indexOf,YKe=JQ.aTypedArray,QKe=JQ.exportTypedArrayMethod;QKe("indexOf",function(t){return JKe(YKe(this),t,arguments.length>1?arguments[1]:void 0)})});var iee=w(()=>{"use strict";var eZe=ct(),tZe=ze(),HO=ke(),eee=Wt(),XO=Zg(),rZe=Et(),JO=rZe("iterator"),QQ=eZe.Uint8Array,iZe=HO(XO.values),nZe=HO(XO.keys),aZe=HO(XO.entries),YO=eee.aTypedArray,uw=eee.exportTypedArrayMethod,Ep=QQ&&QQ.prototype,lw=!tZe(function(){Ep[JO].call([1])}),tee=!!Ep&&Ep.values&&Ep[JO]===Ep.values&&Ep.values.name==="values",ree=function(){return iZe(YO(this))};uw("entries",function(){return aZe(YO(this))},lw);uw("keys",function(){return nZe(YO(this))},lw);uw("values",ree,lw||!tee,{name:"values"});uw(JO,ree,lw||!tee,{name:"values"})});var aee=w(()=>{"use strict";var nee=Wt(),oZe=ke(),sZe=nee.aTypedArray,uZe=nee.exportTypedArrayMethod,lZe=oZe([].join);uZe("join",function(t){return lZe(sZe(this),t)})});var see=w(()=>{"use strict";var oee=Wt(),cZe=On(),hZe=jC(),fZe=oee.aTypedArray,dZe=oee.exportTypedArrayMethod;dZe("lastIndexOf",function(t){var r=arguments.length;return cZe(hZe,fZe(this),r>1?[t,arguments[1]]:[t])})});var lee=w(()=>{"use strict";var uee=Wt(),pZe=mi().map,mZe=Ap(),vZe=uee.aTypedArray,gZe=uee.exportTypedArrayMethod;gZe("map",function(t){return pZe(vZe(this),t,arguments.length>1?arguments[1]:void 0,function(r,a){return new(mZe(r))(a)})})});var hee=w(()=>{"use strict";var cee=Wt(),yZe=tw(),_Ze=cee.aTypedArrayConstructor,xZe=cee.exportTypedArrayStaticMethod;xZe("of",function(){for(var t=0,r=arguments.length,a=new(_Ze(this))(r);r>t;)a[t]=arguments[t++];return a},yZe)});var dee=w(()=>{"use strict";var fee=Wt(),bZe=Hg().left,wZe=fee.aTypedArray,SZe=fee.exportTypedArrayMethod;SZe("reduce",function(t){var r=arguments.length;return bZe(wZe(this),t,r,r>1?arguments[1]:void 0)})});var mee=w(()=>{"use strict";var pee=Wt(),qZe=Hg().right,AZe=pee.aTypedArray,EZe=pee.exportTypedArrayMethod;EZe("reduceRight",function(t){var r=arguments.length;return qZe(AZe(this),t,r,r>1?arguments[1]:void 0)})});var gee=w(()=>{"use strict";var vee=Wt(),TZe=vee.aTypedArray,IZe=vee.exportTypedArrayMethod,CZe=Math.floor;IZe("reverse",function(){for(var t=this,r=TZe(t).length,a=CZe(r/2),u=0,s;u<a;)s=t[u],t[u++]=t[--r],t[r]=s;return t})});var See=w(()=>{"use strict";var _ee=ct(),xee=Qe(),tk=Wt(),PZe=Yt(),MZe=DO(),OZe=Ht(),bee=ze(),kZe=_ee.RangeError,QO=_ee.Int8Array,yee=QO&&QO.prototype,wee=yee&&yee.set,RZe=tk.aTypedArray,DZe=tk.exportTypedArrayMethod,ek=!bee(function(){var e=new Uint8ClampedArray(2);return xee(wee,e,{length:1,0:3},1),e[1]!==3}),LZe=ek&&tk.NATIVE_ARRAY_BUFFER_VIEWS&&bee(function(){var e=new QO(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});DZe("set",function(t){RZe(this);var r=MZe(arguments.length>1?arguments[1]:void 0,1),a=OZe(t);if(ek)return xee(wee,this,a,r);var u=this.length,s=PZe(a),m=0;if(s+r>u)throw new kZe("Wrong length");for(;m<s;)this[r+m]=a[m++]},!ek||LZe)});var Aee=w(()=>{"use strict";var qee=Wt(),FZe=Ap(),zZe=ze(),NZe=Cu(),BZe=qee.aTypedArray,UZe=qee.exportTypedArrayMethod,jZe=zZe(function(){new Int8Array(1).slice()});UZe("slice",function(t,r){for(var a=NZe(BZe(this),t,r),u=FZe(this),s=0,m=a.length,x=new u(m);m>s;)x[s]=a[s++];return x},jZe)});var Tee=w(()=>{"use strict";var Eee=Wt(),VZe=mi().some,$Ze=Eee.aTypedArray,WZe=Eee.exportTypedArrayMethod;WZe("some",function(t){return VZe($Ze(this),t,arguments.length>1?arguments[1]:void 0)})});var kee=w(()=>{"use strict";var GZe=ct(),KZe=Tu(),rk=ze(),ZZe=Rt(),HZe=i1(),Oee=Wt(),Iee=WC(),XZe=GC(),Cee=Ps(),Pee=n1(),JZe=Oee.aTypedArray,YZe=Oee.exportTypedArrayMethod,Cy=GZe.Uint16Array,Tp=Cy&&KZe(Cy.prototype.sort),QZe=!!Tp&&!(rk(function(){Tp(new Cy(2),null)})&&rk(function(){Tp(new Cy(2),{})})),Mee=!!Tp&&!rk(function(){if(Cee)return Cee<74;if(Iee)return Iee<67;if(XZe)return!0;if(Pee)return Pee<602;var e=new Cy(516),t=Array(516),r,a;for(r=0;r<516;r++)a=r%4,e[r]=515-r,t[r]=r-2*a+3;for(Tp(e,function(u,s){return(u/4|0)-(s/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),eHe=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};YZe("sort",function(t){return t!==void 0&&ZZe(t),Mee?Tp(this,t):HZe(JZe(this),eHe(t))},!Mee||QZe)});var Lee=w(()=>{"use strict";var Dee=Wt(),tHe=_a(),Ree=wo(),rHe=Ap(),iHe=Dee.aTypedArray,nHe=Dee.exportTypedArrayMethod;nHe("subarray",function(t,r){var a=iHe(this),u=a.length,s=Ree(t,u),m=rHe(a);return new m(a.buffer,a.byteOffset+s*a.BYTES_PER_ELEMENT,tHe((r===void 0?u:Ree(r,u))-s))})});var Uee=w(()=>{"use strict";var aHe=ct(),oHe=On(),Nee=Wt(),ik=ze(),Fee=Cu(),cw=aHe.Int8Array,zee=Nee.aTypedArray,sHe=Nee.exportTypedArrayMethod,Bee=[].toLocaleString,uHe=!!cw&&ik(function(){Bee.call(new cw(1))}),lHe=ik(function(){return[1,2].toLocaleString()!==new cw([1,2]).toLocaleString()})||!ik(function(){cw.prototype.toLocaleString.call([1,2])});sHe("toLocaleString",function(){return oHe(Bee,uHe?Fee(zee(this)):zee(this),Fee(arguments))},lHe)});var ak=w(()=>{"use strict";var cHe=HC(),nk=Wt(),hHe=nk.aTypedArray,fHe=nk.exportTypedArrayMethod,dHe=nk.getTypedArrayConstructor;fHe("toReversed",function(){return cHe(hHe(this),dHe(this))})});var ok=w(()=>{"use strict";var hw=Wt(),pHe=ke(),mHe=Rt(),vHe=Rh(),gHe=hw.aTypedArray,yHe=hw.getTypedArrayConstructor,_He=hw.exportTypedArrayMethod,xHe=pHe(hw.TypedArrayPrototype.sort);_He("toSorted",function(t){t!==void 0&&mHe(t);var r=gHe(this),a=vHe(yHe(r),r);return xHe(a,t)})});var Vee=w(()=>{"use strict";var bHe=Wt().exportTypedArrayMethod,wHe=ze(),SHe=ct(),qHe=ke(),jee=SHe.Uint8Array,AHe=jee&&jee.prototype||{},fw=[].toString,EHe=qHe([].join);wHe(function(){fw.call({})})&&(fw=function(){return EHe(this)});var THe=AHe.toString!==fw;bHe("toString",fw,THe)});var uk=w(()=>{"use strict";var IHe=eP(),sk=Wt(),CHe=rw(),PHe=zr(),MHe=Ay(),OHe=sk.aTypedArray,kHe=sk.getTypedArrayConstructor,RHe=sk.exportTypedArrayMethod,DHe=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();RHe("with",function(e,t){var r=OHe(this),a=PHe(e),u=CHe(r)?MHe(t):+t;return IHe(r,kHe(r),a,u)},!DHe)});var Zee=w(()=>{"use strict";var LHe=$(),lk=ke(),FHe=Lt(),$ee=String.fromCharCode,Wee=lk("".charAt),Gee=lk(/./.exec),Kee=lk("".slice),zHe=/^[\da-f]{2}$/i,NHe=/^[\da-f]{4}$/i;LHe({global:!0},{unescape:function(t){for(var r=FHe(t),a="",u=r.length,s=0,m,x;s<u;){if(m=Wee(r,s++),m==="%"){if(Wee(r,s)==="u"){if(x=Kee(r,s+1,s+5),Gee(NHe,x)){a+=$ee(parseInt(x,16)),s+=5;continue}}else if(x=Kee(r,s,s+2),Gee(zHe,x)){a+=$ee(parseInt(x,16)),s+=2;continue}}a+=m}return a}})});var fk=w((nFt,ete)=>{"use strict";var BHe=ke(),Hee=To(),dw=mc().getWeakData,UHe=kn(),jHe=rt(),VHe=xi(),ck=Nt(),$He=ai(),Jee=mi(),Xee=$t(),Yee=dr(),WHe=Yee.set,GHe=Yee.getterFor,KHe=Jee.find,ZHe=Jee.findIndex,HHe=BHe([].splice),XHe=0,pw=function(e){return e.frozen||(e.frozen=new Qee)},Qee=function(){this.entries=[]},hk=function(e,t){return KHe(e.entries,function(r){return r[0]===t})};Qee.prototype={get:function(e){var t=hk(this,e);if(t)return t[1]},has:function(e){return!!hk(this,e)},set:function(e,t){var r=hk(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=ZHe(this.entries,function(r){return r[0]===e});return~t&&HHe(this.entries,t,1),!!~t}};ete.exports={getConstructor:function(e,t,r,a){var u=e(function(q,T){UHe(q,s),WHe(q,{type:t,id:XHe++,frozen:void 0}),VHe(T)||$He(T,q[a],{that:q,AS_ENTRIES:r})}),s=u.prototype,m=GHe(t),x=function(q,T,I){var L=m(q),z=dw(jHe(T),!0);return z===!0?pw(L).set(T,I):z[L.id]=I,q};return Hee(s,{delete:function(q){var T=m(this);if(!ck(q))return!1;var I=dw(q);return I===!0?pw(T).delete(q):I&&Xee(I,T.id)&&delete I[T.id]},has:function(T){var I=m(this);if(!ck(T))return!1;var L=dw(T);return L===!0?pw(I).has(T):L&&Xee(L,I.id)}}),Hee(s,r?{get:function(T){var I=m(this);if(ck(T)){var L=dw(T);return L===!0?pw(I).get(T):L?L[I.id]:void 0}},set:function(T,I){return x(this,T,I)}}:{add:function(T){return x(this,T,!0)}}),u}}});var cte=w(()=>{"use strict";var JHe=zu(),tte=ct(),yw=ke(),rte=To(),YHe=mc(),QHe=ty(),ate=fk(),mw=Nt(),vw=dr().enforce,e9e=ze(),t9e=I2(),Oy=Object,r9e=Array.isArray,gw=Oy.isExtensible,ote=Oy.isFrozen,i9e=Oy.isSealed,ste=Oy.freeze,n9e=Oy.seal,ite={},nte={},a9e=!tte.ActiveXObject&&"ActiveXObject"in tte,Py,ute=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},lte=QHe("WeakMap",ute,ate),Ip=lte.prototype,_w=yw(Ip.set),o9e=function(){return JHe&&e9e(function(){var e=ste([]);return _w(new lte,e,1),!ote(e)})};t9e&&(a9e?(Py=ate.getConstructor(ute,"WeakMap",!0),YHe.enable(),dk=yw(Ip.delete),My=yw(Ip.has),pk=yw(Ip.get),rte(Ip,{delete:function(e){if(mw(e)&&!gw(e)){var t=vw(this);return t.frozen||(t.frozen=new Py),dk(this,e)||t.frozen.delete(e)}return dk(this,e)},has:function(t){if(mw(t)&&!gw(t)){var r=vw(this);return r.frozen||(r.frozen=new Py),My(this,t)||r.frozen.has(t)}return My(this,t)},get:function(t){if(mw(t)&&!gw(t)){var r=vw(this);return r.frozen||(r.frozen=new Py),My(this,t)?pk(this,t):r.frozen.get(t)}return pk(this,t)},set:function(t,r){if(mw(t)&&!gw(t)){var a=vw(this);a.frozen||(a.frozen=new Py),My(this,t)?_w(this,t,r):a.frozen.set(t,r)}else _w(this,t,r);return this}})):o9e()&&rte(Ip,{set:function(t,r){var a;return r9e(t)&&(ote(t)?a=ite:i9e(t)&&(a=nte)),_w(this,t,r),a===ite&&ste(t),a===nte&&n9e(t),this}}));var dk,My,pk});var xw=w(()=>{"use strict";cte()});var hte=w(()=>{"use strict";var s9e=ty(),u9e=fk();s9e("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},u9e)});var fte=w(()=>{"use strict";hte()});var dte=w(()=>{"use strict";xC()});var mte=w(()=>{"use strict";var l9e=$(),c9e=Mn(),h9e=wi(),ww=Ao(),f9e=$d(),pte=pi(),bw=bi(),mk=ya(),d9e=jb(),p9e=Ph(),m9e=Et(),v9e=m9e("toStringTag"),Sw=Error,Cp=function(t,r,a){var u=c9e(vk,this),s;return ww?s=ww(new Sw,u?h9e(this):vk):(s=u?this:pte(vk),bw(s,v9e,"Error")),a!==void 0&&bw(s,"message",p9e(a)),d9e(s,Cp,s.stack,1),bw(s,"error",t),bw(s,"suppressed",r),s};ww?ww(Cp,Sw):f9e(Cp,Sw,{name:!0});var vk=Cp.prototype=pte(Sw.prototype,{constructor:mk(1,Cp),message:mk(1,""),name:mk(1,"SuppressedError")});l9e({global:!0,constructor:!0,arity:3},{SuppressedError:Cp})});var Pp=w((gFt,Ste)=>{"use strict";var xte=ct(),bte=Eg(),wte=zt(),g9e=pi(),qw=wi(),y9e=yr(),_9e=Et(),x9e=Zt(),vte="USE_FUNCTION_CONSTRUCTOR",gte=_9e("asyncIterator"),yte=xte.AsyncIterator,_te=bte.AsyncIteratorPrototype,Ns,gk;if(_te)Ns=_te;else if(wte(yte))Ns=yte.prototype;else if(bte[vte]||xte[vte])try{gk=qw(qw(qw(Function("return async function*(){}()")()))),qw(gk)===Object.prototype&&(Ns=gk)}catch(e){}Ns?x9e&&(Ns=g9e(Ns)):Ns={};wte(Ns[gte])||y9e(Ns,gte,function(){return this});Ste.exports=Ns});var ky=w((yFt,Ote)=>{"use strict";var qte=Qe(),Ate=rt(),b9e=pi(),w9e=di(),S9e=To(),Ite=dr(),q9e=kt(),A9e=Pp(),Cte=cn(),yk=q9e("Promise"),Pte="AsyncFromSyncIterator",E9e=Ite.set,Ete=Ite.getterFor(Pte),Tte=function(e,t,r){var a=e.done;yk.resolve(e.value).then(function(u){t(Cte(u,a))},r)},Mte=function(t){t.type=Pte,E9e(this,t)};Mte.prototype=S9e(b9e(A9e),{next:function(){var t=Ete(this);return new yk(function(r,a){var u=Ate(qte(t.next,t.iterator));Tte(u,r,a)})},return:function(){var e=Ete(this).iterator;return new yk(function(t,r){var a=w9e(e,"return");if(a===void 0)return t(Cte(void 0,!0));var u=Ate(qte(a,e));Tte(u,t,r)})}});Ote.exports=Mte});var Kr=w((_Ft,kte)=>{"use strict";kte.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var Dte=w((xFt,Rte)=>{"use strict";var T9e=Qe(),I9e=ky(),C9e=rt(),P9e=ac(),M9e=Kr(),O9e=di(),k9e=Et(),R9e=k9e("asyncIterator");Rte.exports=function(e,t){var r=arguments.length<2?O9e(e,R9e):t;return r?C9e(T9e(r,e)):new I9e(M9e(P9e(e)))}});var Mp=w((bFt,Lte)=>{"use strict";var D9e=Qe(),L9e=kt(),F9e=di();Lte.exports=function(e,t,r,a){try{var u=F9e(e,"return");if(u)return L9e("Promise").resolve(D9e(u,e)).then(function(){t(r)},function(s){a(s)})}catch(s){return a(s)}t(r)}});var Kh=w((wFt,Fte)=>{"use strict";var z9e=Qe(),N9e=Rt(),_k=rt(),B9e=Nt(),U9e=oc(),j9e=kt(),V9e=Kr(),xk=Mp(),Ry=function(e){var t=e===0,r=e===1,a=e===2,u=e===3;return function(s,m,x){_k(s);var q=m!==void 0;(q||!t)&&N9e(m);var T=V9e(s),I=j9e("Promise"),L=T.iterator,z=T.next,Y=0;return new I(function(pe,de){var Z=function(J){xk(L,de,J,de)},H=function(){try{if(q)try{U9e(Y)}catch(J){Z(J)}I.resolve(_k(z9e(z,L))).then(function(J){try{if(_k(J).done)t?(x.length=Y,pe(x)):pe(u?!1:a||void 0);else{var ve=J.value;try{if(q){var be=m(ve,Y),Le=function(Pe){if(r)H();else if(a)Pe?H():xk(L,pe,!1,de);else if(t)try{x[Y++]=Pe,H()}catch(Ge){Z(Ge)}else Pe?xk(L,pe,u||ve,de):H()};B9e(be)?I.resolve(be).then(Le,Z):Le(be)}else x[Y++]=ve,H()}catch(Pe){Z(Pe)}}}catch(Pe){de(Pe)}},de)}catch(J){de(J)}};H()})}};Fte.exports={toArray:Ry(0),forEach:Ry(1),every:Ry(2),some:Ry(3),find:Ry(4)}});var bk=w((SFt,Ute)=>{"use strict";var $9e=qr(),zte=ke(),W9e=Ht(),G9e=ns(),K9e=Dte(),Z9e=ac(),H9e=Kr(),X9e=Mu(),J9e=di(),Y9e=JC(),Q9e=kt(),eXe=Et(),tXe=ky(),rXe=Kh().toArray,iXe=eXe("asyncIterator"),Nte=zte(Y9e("Array").values),nXe=zte(Nte([]).next),aXe=function(){return new Bte(this)},Bte=function(e){this.iterator=Nte(e)};Bte.prototype.next=function(){return nXe(this.iterator)};Ute.exports=function(t){var r=this,a=arguments.length,u=a>1?arguments[1]:void 0,s=a>2?arguments[2]:void 0;return new(Q9e("Promise"))(function(m){var x=W9e(t);u!==void 0&&(u=$9e(u,s));var q=J9e(x,iXe),T=q?void 0:X9e(x)||aXe,I=G9e(r)?new r:[],L=q?K9e(x,q):new tXe(H9e(Z9e(x,T)));m(rXe(L,u,I))})}});var jte=w(()=>{"use strict";var oXe=$(),sXe=bk();oXe({target:"Array",stat:!0},{fromAsync:sXe})});var Vte=w(()=>{"use strict";qC()});var $te=w(()=>{"use strict";var uXe=$(),lXe=mi().filterReject,cXe=Qr();uXe({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return lXe(this,t,arguments.length>1?arguments[1]:void 0)}});cXe("filterOut")});var Wte=w(()=>{"use strict";var hXe=$(),fXe=mi().filterReject,dXe=Qr();hXe({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return fXe(this,t,arguments.length>1?arguments[1]:void 0)}});dXe("filterReject")});var Gte=w(()=>{"use strict";CC()});var Kte=w(()=>{"use strict";PC()});var Aw=w((LFt,Zte)=>{"use strict";var pXe=qr(),mXe=ke(),vXe=qu(),gXe=Ht(),yXe=ts(),_Xe=Yt(),xXe=pi(),bXe=Rh(),wXe=Array,SXe=mXe([].push);Zte.exports=function(e,t,r,a){for(var u=gXe(e),s=vXe(u),m=pXe(t,r),x=xXe(null),q=_Xe(s),T=0,I,L,z;q>T;T++)z=s[T],L=yXe(m(z,T,u)),L in x?SXe(x[L],z):x[L]=[z];if(a&&(I=a(u),I!==wXe))for(L in x)x[L]=bXe(I,x[L]);return x}});var Hte=w(()=>{"use strict";var qXe=$(),AXe=Aw(),EXe=Qr();qXe({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return AXe(this,t,r)}});EXe("group")});var Xte=w(()=>{"use strict";var TXe=$(),IXe=Aw(),CXe=Eo(),PXe=Qr();TXe({target:"Array",proto:!0,forced:!CXe("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return IXe(this,t,r)}});PXe("groupBy")});var Xn=w((UFt,Jte)=>{"use strict";var Ew=ke(),Dy=Map.prototype;Jte.exports={Map,set:Ew(Dy.set),get:Ew(Dy.get),has:Ew(Dy.has),remove:Ew(Dy.delete),proto:Dy}});var wk=w((jFt,Yte)=>{"use strict";var MXe=qr(),OXe=ke(),kXe=qu(),RXe=Ht(),DXe=Yt(),Tw=Xn(),LXe=Tw.Map,FXe=Tw.get,zXe=Tw.has,NXe=Tw.set,BXe=OXe([].push);Yte.exports=function(t){for(var r=RXe(this),a=kXe(r),u=MXe(t,arguments.length>1?arguments[1]:void 0),s=new LXe,m=DXe(a),x=0,q,T;m>x;x++)T=a[x],q=u(T,x,r),zXe(s,q)?BXe(FXe(s,q),T):NXe(s,q,[T]);return s}});var Qte=w(()=>{"use strict";var UXe=$(),jXe=Eo(),VXe=Qr(),$Xe=wk(),WXe=Zt();UXe({target:"Array",proto:!0,name:"groupToMap",forced:WXe||!jXe("groupByToMap")},{groupByToMap:$Xe});VXe("groupByToMap")});var ere=w(()=>{"use strict";var GXe=$(),KXe=Qr(),ZXe=wk(),HXe=Zt();GXe({target:"Array",proto:!0,forced:HXe},{groupToMap:ZXe});KXe("groupToMap")});var ire=w(()=>{"use strict";var XXe=$(),JXe=is(),tre=Object.isFrozen,rre=function(e,t){if(!tre||!JXe(e)||!tre(e))return!1;for(var r=0,a=e.length,u;r<a;)if(u=e[r++],!(typeof u=="string"||t&&u===void 0))return!1;return a!==0};XXe({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!rre(t,!0))return!1;var r=t.raw;return r.length===t.length&&rre(r,!1)}})});var nre=w(()=>{"use strict";var YXe=At(),QXe=Qr(),eJe=Ht(),tJe=Yt(),rJe=Gr();YXe&&(rJe(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=eJe(this),r=tJe(t);return r===0?0:r-1}}),QXe("lastIndex"))});var sre=w(()=>{"use strict";var iJe=At(),nJe=Qr(),are=Ht(),ore=Yt(),aJe=Gr();iJe&&(aJe(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=are(this),r=ore(t);return r===0?void 0:t[r-1]},set:function(t){var r=are(this),a=ore(r);return r[a===0?0:a-1]=t}}),nJe("lastItem"))});var ure=w(()=>{"use strict";XC()});var lre=w(()=>{"use strict";YC()});var cre=w(()=>{"use strict";QC()});var Bu=w((azt,hre)=>{"use strict";var oJe=Qe();hre.exports=function(e,t,r){for(var a=r?e:e.iterator,u=e.next,s,m;!(s=oJe(u,a)).done;)if(m=t(s.value),m!==void 0)return m}});var Po=w((ozt,vre)=>{"use strict";var fre=ke(),sJe=Bu(),dre=Xn(),uJe=dre.Map,pre=dre.proto,lJe=fre(pre.forEach),mre=fre(pre.entries),cJe=mre(new uJe).next;vre.exports=function(e,t,r){return r?sJe({iterator:mre(e),next:cJe},function(a){return t(a[1],a[0])}):lJe(e,t)}});var Iw=w((szt,gre)=>{"use strict";var hJe=ke(),fJe=Rt(),dJe=xi(),pJe=Yt(),mJe=Ht(),Sk=Xn(),vJe=Po(),gJe=Sk.Map,yJe=Sk.has,_Je=Sk.set,xJe=hJe([].push);gre.exports=function(t){var r=mJe(this),a=pJe(r),u=[],s=new gJe,m=dJe(t)?function(I){return I}:fJe(t),x,q,T;for(x=0;x<a;x++)q=r[x],T=m(q),yJe(s,T)||_Je(s,T,q);return vJe(s,function(I){xJe(u,I)}),u}});var yre=w(()=>{"use strict";var bJe=$(),wJe=Qr(),SJe=Iw();bJe({target:"Array",proto:!0,forced:!0},{uniqueBy:SJe});wJe("uniqueBy")});var _re=w(()=>{"use strict";tP()});var qk=w((fzt,xre)=>{"use strict";var qJe=jg(),AJe=ln(),EJe=TypeError;xre.exports=qJe(ArrayBuffer.prototype,"byteLength","get")||function(e){if(AJe(e)!=="ArrayBuffer")throw new EJe("ArrayBuffer expected");return e.byteLength}});var Ak=w((dzt,bre)=>{"use strict";var TJe=ke(),IJe=qk(),CJe=TJe(ArrayBuffer.prototype.slice);bre.exports=function(e){if(IJe(e)!==0)return!1;try{return CJe(e,0,0),!1}catch(t){return!0}}});var Sre=w(()=>{"use strict";var PJe=At(),MJe=Gr(),OJe=Ak(),wre=ArrayBuffer.prototype;PJe&&!("detached"in wre)&&MJe(wre,"detached",{configurable:!0,get:function(){return OJe(this)}})});var Ek=w((vzt,qre)=>{"use strict";var kJe=ks();qre.exports=function(e){try{if(kJe)return Function("return require(\""+e+"\")")()}catch(t){}}});var Cw=w((gzt,Ere)=>{"use strict";var RJe=ct(),DJe=ze(),Tk=Ps(),LJe=EM(),FJe=R1(),zJe=ks(),Are=RJe.structuredClone;Ere.exports=!!Are&&!DJe(function(){if(FJe&&Tk>92||zJe&&Tk>94||LJe&&Tk>97)return!1;var e=new ArrayBuffer(8),t=Are(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var Pre=w((yzt,Cre)=>{"use strict";var Mk=ct(),NJe=Ek(),BJe=Cw(),UJe=Mk.structuredClone,Tre=Mk.ArrayBuffer,Pw=Mk.MessageChannel,Pk=!1,Ik,Ire,Mw,Ck;if(BJe)Pk=function(e){UJe(e,{transfer:[e]})};else if(Tre)try{Pw||(Ik=NJe("worker_threads"),Ik&&(Pw=Ik.MessageChannel)),Pw&&(Ire=new Pw,Mw=new Tre(2),Ck=function(e){Ire.port1.postMessage(null,[e])},Mw.byteLength===2&&(Ck(Mw),Mw.byteLength===0&&(Pk=Ck)))}catch(e){}Cre.exports=Pk});var kw=w((_zt,Fre)=>{"use strict";var Ow=ct(),Rk=ke(),Rre=jg(),jJe=Jd(),VJe=Ak(),$Je=qk(),Mre=Pre(),Ok=Cw(),WJe=Ow.structuredClone,Dre=Ow.ArrayBuffer,kk=Ow.DataView,GJe=Ow.TypeError,KJe=Math.min,Dk=Dre.prototype,Lre=kk.prototype,ZJe=Rk(Dk.slice),Ore=Rre(Dk,"resizable","get"),kre=Rre(Dk,"maxByteLength","get"),HJe=Rk(Lre.getInt8),XJe=Rk(Lre.setInt8);Fre.exports=(Ok||Mre)&&function(e,t,r){var a=$Je(e),u=t===void 0?a:jJe(t),s=!Ore||!Ore(e),m;if(VJe(e))throw new GJe("ArrayBuffer is detached");if(Ok&&(e=WJe(e,{transfer:[e]}),a===u&&(r||s)))return e;if(a>=u&&(!r||s))m=ZJe(e,0,u);else{var x=r&&!s&&kre?{maxByteLength:kre(e)}:void 0;m=new Dre(u,x);for(var q=new kk(e),T=new kk(m),I=KJe(u,a),L=0;L<I;L++)XJe(T,L,HJe(q,L))}return Ok||Mre(e),m}});var Nre=w(()=>{"use strict";var JJe=$(),zre=kw();zre&&JJe({target:"ArrayBuffer",proto:!0},{transfer:function(){return zre(this,arguments.length?arguments[0]:void 0,!0)}})});var Ure=w(()=>{"use strict";var YJe=$(),Bre=kw();Bre&&YJe({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return Bre(this,arguments.length?arguments[0]:void 0,!1)}})});var Fk=w((qzt,Gre)=>{"use strict";var QJe=Qe(),eYe=ke(),tYe=qr(),rYe=rt(),iYe=Rt(),$re=xi(),Lk=di(),Wre=Et(),nYe=Wre("asyncDispose"),jre=Wre("dispose"),aYe=eYe([].push),oYe=function(e,t){if(t==="async-dispose"){var r=Lk(e,nYe);return r!==void 0?r:(r=Lk(e,jre),function(){QJe(r,this)})}return Lk(e,jre)},Vre=function(e,t,r){return arguments.length<3&&!$re(e)&&(r=iYe(oYe(rYe(e),t))),r===void 0?function(){}:tYe(r,e)};Gre.exports=function(e,t,r,a){var u;if(arguments.length<4){if($re(t)&&r==="sync-dispose")return;u=Vre(t,r)}else u=Vre(void 0,r,a);aYe(e.stack,u)}});var Qre=w(()=>{"use strict";var sYe=$(),Dw=At(),Hre=kt(),Kre=Rt(),uYe=kn(),Xre=yr(),lYe=To(),cYe=Gr(),Jre=Et(),Yre=dr(),zk=Fk(),Zre=Hre("Promise"),hYe=Hre("SuppressedError"),fYe=ReferenceError,dYe=Jre("asyncDispose"),pYe=Jre("toStringTag"),Fw="AsyncDisposableStack",mYe=Yre.set,Lw=Yre.getterFor(Fw),Nk="async-dispose",Ly="disposed",vYe="pending",Rw=function(e){var t=Lw(e);if(t.state===Ly)throw new fYe(Fw+" already disposed");return t},Bk=function(){mYe(uYe(this,Op),{type:Fw,state:vYe,stack:[]}),Dw||(this.disposed=!1)},Op=Bk.prototype;lYe(Op,{disposeAsync:function(){var t=this;return new Zre(function(r,a){var u=Lw(t);if(u.state===Ly)return r(void 0);u.state=Ly,Dw||(t.disposed=!0);var s=u.stack,m=s.length,x=!1,q,T=function(L){x?q=new hYe(L,q):(x=!0,q=L),I()},I=function(){if(m){var L=s[--m];s[m]=null;try{Zre.resolve(L()).then(I,T)}catch(z){T(z)}}else u.stack=null,x?a(q):r(void 0)};I()})},use:function(t){return zk(Rw(this),t,Nk),t},adopt:function(t,r){var a=Rw(this);return Kre(r),zk(a,void 0,Nk,function(){return r(t)}),t},defer:function(t){var r=Rw(this);Kre(t),zk(r,void 0,Nk,t)},move:function(){var t=Rw(this),r=new Bk;return Lw(r).stack=t.stack,t.stack=[],t.state=Ly,Dw||(this.disposed=!0),r}});Dw&&cYe(Op,"disposed",{configurable:!0,get:function(){return Lw(this).state===Ly}});Xre(Op,dYe,Op.disposeAsync,{name:"disposeAsync"});Xre(Op,pYe,Fw,{nonWritable:!0});sYe({global:!0,constructor:!0},{AsyncDisposableStack:Bk})});var nie=w(()=>{"use strict";var gYe=$(),yYe=kn(),_Ye=wi(),tie=bi(),rie=$t(),xYe=Et(),xc=Pp(),iie=Zt(),eie=xYe("toStringTag"),bYe=TypeError,Uk=function(){if(yYe(this,xc),_Ye(this)===xc)throw new bYe("Abstract class AsyncIterator not directly constructable")};Uk.prototype=xc;rie(xc,eie)||tie(xc,eie,"AsyncIterator");(iie||!rie(xc,"constructor")||xc.constructor===Object)&&tie(xc,"constructor",Uk);gYe({global:!0,constructor:!0,forced:iie},{AsyncIterator:Uk})});var Zh=w((Czt,fie)=>{"use strict";var wYe=Qe(),zw=vc(),aie=rt(),SYe=pi(),qYe=bi(),AYe=To(),EYe=Et(),sie=dr(),TYe=kt(),IYe=di(),CYe=Pp(),jk=cn(),oie=Ou(),Bs=TYe("Promise"),PYe=EYe("toStringTag"),uie="AsyncIteratorHelper",lie="WrapForValidAsyncIterator",MYe=sie.set,cie=function(e){var t=!e,r=sie.getterFor(e?lie:uie),a=function(u){var s=zw(function(){return r(u)}),m=s.error,x=s.value;return m||t&&x.done?{exit:!0,value:m?Bs.reject(x):Bs.resolve(jk(void 0,!0))}:{exit:!1,value:x}};return AYe(SYe(CYe),{next:function(){var s=a(this),m=s.value;if(s.exit)return m;var x=zw(function(){return aie(m.nextHandler(Bs))}),q=x.error,T=x.value;return q&&(m.done=!0),q?Bs.reject(T):Bs.resolve(T)},return:function(){var u=a(this),s=u.value;if(u.exit)return s;s.done=!0;var m=s.iterator,x,q,T=zw(function(){if(s.inner)try{oie(s.inner.iterator,"normal")}catch(I){return oie(m,"throw",I)}return IYe(m,"return")});return x=q=T.value,T.error?Bs.reject(q):x===void 0?Bs.resolve(jk(void 0,!0)):(T=zw(function(){return wYe(x,m)}),q=T.value,T.error?Bs.reject(q):e?Bs.resolve(q):Bs.resolve(q).then(function(I){return aie(I),jk(void 0,!0)}))}})},OYe=cie(!0),hie=cie(!1);qYe(hie,PYe,"Async Iterator Helper");fie.exports=function(e,t){var r=function(u,s){s?(s.iterator=u.iterator,s.next=u.next):s=u,s.type=t?lie:uie,s.nextHandler=e,s.counter=0,s.done=!1,MYe(this,s)};return r.prototype=t?OYe:hie,r}});var $k=w((Pzt,pie)=>{"use strict";var kYe=Qe(),RYe=Rt(),Vk=rt(),DYe=Nt(),LYe=Kr(),FYe=Zh(),die=cn(),zYe=Mp(),NYe=FYe(function(e){var t=this,r=t.iterator,a=t.mapper;return new e(function(u,s){var m=function(q){t.done=!0,s(q)},x=function(q){zYe(r,m,q,m)};e.resolve(Vk(kYe(t.next,r))).then(function(q){try{if(Vk(q).done)t.done=!0,u(die(void 0,!0));else{var T=q.value;try{var I=a(T,t.counter++),L=function(z){u(die(z,!1))};DYe(I)?e.resolve(I).then(L,x):L(I)}catch(z){x(z)}}}catch(z){m(z)}},m)})});pie.exports=function(t){return Vk(this),RYe(t),new NYe(LYe(this),{mapper:t})}});var Wk=w((Mzt,mie)=>{"use strict";var BYe=Qe(),UYe=$k(),jYe=function(e,t){return[t,e]};mie.exports=function(){return BYe(UYe,this,jYe)}});var vie=w(()=>{"use strict";var VYe=$(),$Ye=Wk();VYe({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:$Ye})});var xie=w(()=>{"use strict";var WYe=Qe(),GYe=yr(),KYe=kt(),ZYe=di(),HYe=$t(),XYe=Et(),gie=Pp(),yie=XYe("asyncDispose"),_ie=KYe("Promise");HYe(gie,yie)||GYe(gie,yie,function(){var e=this;return new _ie(function(t,r){var a=ZYe(e,"return");a?_ie.resolve(WYe(a,e)).then(function(){t(void 0)},r):t(void 0)})})});var Fy=w((Lzt,bie)=>{"use strict";var JYe=RangeError;bie.exports=function(e){if(e===e)return e;throw new JYe("NaN is not allowed")}});var Sie=w(()=>{"use strict";var YYe=$(),QYe=Qe(),Gk=rt(),eQe=Kr(),tQe=Fy(),rQe=Sp(),iQe=Zh(),wie=cn(),nQe=Zt(),aQe=iQe(function(e){var t=this;return new e(function(r,a){var u=function(m){t.done=!0,a(m)},s=function(){try{e.resolve(Gk(QYe(t.next,t.iterator))).then(function(m){try{Gk(m).done?(t.done=!0,r(wie(void 0,!0))):t.remaining?(t.remaining--,s()):r(wie(m.value,!1))}catch(x){u(x)}},u)}catch(m){u(m)}};s()})});YYe({target:"AsyncIterator",proto:!0,real:!0,forced:nQe},{drop:function(t){Gk(this);var r=rQe(tQe(+t));return new aQe(eQe(this),{remaining:r})}})});var qie=w(()=>{"use strict";var oQe=$(),sQe=Kh().every;oQe({target:"AsyncIterator",proto:!0,real:!0},{every:function(t){return sQe(this,t)}})});var Eie=w(()=>{"use strict";var uQe=$(),lQe=Qe(),cQe=Rt(),Kk=rt(),hQe=Nt(),fQe=Kr(),dQe=Zh(),Aie=cn(),pQe=Mp(),mQe=Zt(),vQe=dQe(function(e){var t=this,r=t.iterator,a=t.predicate;return new e(function(u,s){var m=function(T){t.done=!0,s(T)},x=function(T){pQe(r,m,T,m)},q=function(){try{e.resolve(Kk(lQe(t.next,r))).then(function(T){try{if(Kk(T).done)t.done=!0,u(Aie(void 0,!0));else{var I=T.value;try{var L=a(I,t.counter++),z=function(Y){Y?u(Aie(I,!1)):q()};hQe(L)?e.resolve(L).then(z,x):z(L)}catch(Y){x(Y)}}}catch(Y){m(Y)}},m)}catch(T){m(T)}};q()})});uQe({target:"AsyncIterator",proto:!0,real:!0,forced:mQe},{filter:function(t){return Kk(this),cQe(t),new vQe(fQe(this),{predicate:t})}})});var Tie=w(()=>{"use strict";var gQe=$(),yQe=Kh().find;gQe({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return yQe(this,t)}})});var Zk=w((Wzt,Pie)=>{"use strict";var _Qe=Qe(),xQe=zt(),Iie=rt(),Cie=Kr(),bQe=Mu(),wQe=di(),SQe=Et(),qQe=ky(),AQe=SQe("asyncIterator");Pie.exports=function(t){var r=Iie(t),a=!0,u=wQe(r,AQe),s;return xQe(u)||(u=bQe(r),a=!1),u!==void 0?s=_Qe(u,r):(s=r,a=!0),Iie(s),Cie(a?s:new qQe(Cie(s)))}});var kie=w(()=>{"use strict";var EQe=$(),Mie=Qe(),TQe=Rt(),zy=rt(),IQe=Nt(),CQe=Kr(),PQe=Zh(),Oie=cn(),MQe=Zk(),OQe=Mp(),kQe=Zt(),RQe=PQe(function(e){var t=this,r=t.iterator,a=t.mapper;return new e(function(u,s){var m=function(I){t.done=!0,s(I)},x=function(I){OQe(r,m,I,m)},q=function(){try{e.resolve(zy(Mie(t.next,r))).then(function(I){try{if(zy(I).done)t.done=!0,u(Oie(void 0,!0));else{var L=I.value;try{var z=a(L,t.counter++),Y=function(pe){try{t.inner=MQe(pe),T()}catch(de){x(de)}};IQe(z)?e.resolve(z).then(Y,x):Y(z)}catch(pe){x(pe)}}}catch(pe){m(pe)}},m)}catch(I){m(I)}},T=function(){var I=t.inner;if(I)try{e.resolve(zy(Mie(I.next,I.iterator))).then(function(L){try{zy(L).done?(t.inner=null,q()):u(Oie(L.value,!1))}catch(z){x(z)}},x)}catch(L){x(L)}else q()};T()})});EQe({target:"AsyncIterator",proto:!0,real:!0,forced:kQe},{flatMap:function(t){return zy(this),TQe(t),new RQe(CQe(this),{mapper:t,inner:null})}})});var Rie=w(()=>{"use strict";var DQe=$(),LQe=Kh().forEach;DQe({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return LQe(this,t)}})});var Hk=w((Xzt,Die)=>{"use strict";var FQe=Qe(),zQe=Zh();Die.exports=zQe(function(){return FQe(this.next,this.iterator)},!0)});var Lie=w(()=>{"use strict";var NQe=$(),BQe=Ht(),UQe=Mn(),jQe=Zk(),VQe=Pp(),$Qe=Hk(),WQe=Zt();NQe({target:"AsyncIterator",stat:!0,forced:WQe},{from:function(t){var r=jQe(typeof t=="string"?BQe(t):t);return UQe(VQe,r.iterator)?r.iterator:new $Qe(r)}})});var Fie=w(()=>{"use strict";var GQe=$(),KQe=Wk();GQe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:KQe})});var zie=w(()=>{"use strict";var ZQe=$(),HQe=$k(),XQe=Zt();ZQe({target:"AsyncIterator",proto:!0,real:!0,forced:XQe},{map:HQe})});var Nie=w(()=>{"use strict";var JQe=$(),YQe=Qe(),QQe=Rt(),Xk=rt(),eet=Nt(),tet=kt(),ret=Kr(),iet=Mp(),Jk=tet("Promise"),net=TypeError;JQe({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){Xk(this),QQe(t);var r=ret(this),a=r.iterator,u=r.next,s=arguments.length<2,m=s?void 0:arguments[1],x=0;return new Jk(function(q,T){var I=function(z){iet(a,T,z,T)},L=function(){try{Jk.resolve(Xk(YQe(u,a))).then(function(z){try{if(Xk(z).done)s?T(new net("Reduce of empty iterator with no initial value")):q(m);else{var Y=z.value;if(s)s=!1,m=Y,L();else try{var pe=t(m,Y,x),de=function(Z){m=Z,L()};eet(pe)?Jk.resolve(pe).then(de,I):de(pe)}catch(Z){I(Z)}}x++}catch(Z){T(Z)}},T)}catch(z){T(z)}};L()})}})});var Bie=w(()=>{"use strict";var aet=$(),oet=Kh().some;aet({target:"AsyncIterator",proto:!0,real:!0},{some:function(t){return oet(this,t)}})});var Vie=w(()=>{"use strict";var set=$(),Uie=Qe(),jie=rt(),uet=Kr(),cet=Fy(),het=Sp(),fet=Zh(),Yk=cn(),det=Zt(),pet=fet(function(e){var t=this,r=t.iterator,a;if(!t.remaining--){var u=Yk(void 0,!0);return t.done=!0,a=r.return,a!==void 0?e.resolve(Uie(a,r,void 0)).then(function(){return u}):u}return e.resolve(Uie(t.next,r)).then(function(s){return jie(s).done?(t.done=!0,Yk(void 0,!0)):Yk(s.value,!1)}).then(null,function(s){throw t.done=!0,s})});set({target:"AsyncIterator",proto:!0,real:!0,forced:det},{take:function(t){jie(this);var r=het(cet(+t));return new pet(uet(this),{remaining:r})}})});var $ie=w(()=>{"use strict";var met=$(),vet=Kh().toArray;met({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return vet(this,void 0,[])}})});var Bw=w((hNt,Xie)=>{"use strict";var Gie=dr(),get=sc(),Qk=cn(),yet=xi(),_et=Nt(),xet=Gr(),Kie=At(),Ny="Incorrect Iterator.range arguments",tR="NumericRangeIterator",bet=Gie.set,Zie=Gie.getterFor(tR),Wie=RangeError,eR=TypeError,Hie=get(function(t,r,a,u,s,m){if(typeof t!=u||r!==1/0&&r!==-1/0&&typeof r!=u)throw new eR(Ny);if(t===1/0||t===-1/0)throw new Wie(Ny);var x=r>t,q=!1,T;if(a===void 0)T=void 0;else if(_et(a))T=a.step,q=!!a.inclusive;else if(typeof a==u)T=a;else throw new eR(Ny);if(yet(T)&&(T=x?m:-m),typeof T!=u)throw new eR(Ny);if(T===1/0||T===-1/0||T===s&&t!==r)throw new Wie(Ny);var I=t!==t||r!==r||T!==T||r>t!=T>s;bet(this,{type:tR,start:t,end:r,step:T,inclusive:q,hitsEnd:I,currentCount:s,zero:s}),Kie||(this.start=t,this.end=r,this.step=T,this.inclusive=q)},tR,function(){var t=Zie(this);if(t.hitsEnd)return Qk(void 0,!0);var r=t.start,a=t.end,u=t.step,s=r+u*t.currentCount++;s===a&&(t.hitsEnd=!0);var m=t.inclusive,x;return a>r?x=m?s>a:s>=a:x=m?a>s:a>=s,x?(t.hitsEnd=!0,Qk(void 0,!0)):Qk(s,!1)}),Nw=function(e){xet(Hie.prototype,e,{get:function(){return Zie(this)[e]},set:function(){},configurable:!0,enumerable:!1})};Kie&&(Nw("start"),Nw("end"),Nw("inclusive"),Nw("step"));Xie.exports=Hie});var Jie=w(()=>{"use strict";var wet=$(),qet=Bw();typeof BigInt=="function"&&wet({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,a){return new qet(t,r,a,"bigint",BigInt(0),BigInt(1))}})});var rR=w((pNt,tne)=>{"use strict";A1();xw();var ene=kt(),Aet=pi(),Yie=Nt(),Eet=Object,Tet=TypeError,Iet=ene("Map"),Cet=ene("WeakMap"),Uw=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=Aet(null)};Uw.prototype.get=function(e,t){return this[e]||(this[e]=t())};Uw.prototype.next=function(e,t,r){var a=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new Cet):this.primitives||(this.primitives=new Iet),u=a.get(t);return u||a.set(t,u=new Uw),u};var Qie=new Uw;tne.exports=function(){var e=Qie,t=arguments.length,r,a;for(r=0;r<t;r++)Yie(a=arguments[r])&&(e=e.next(r,a,!0));if(this===Eet&&e===Qie)throw new Tet("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)Yie(a=arguments[r])||(e=e.next(r,a,!1));return e}});var ine=w(()=>{"use strict";var Pet=$(),Met=On(),Oet=rR(),ket=kt(),rne=pi(),Ret=Object,Det=function(){var e=ket("Object","freeze");return e?e(rne(null)):rne(null)};Pet({global:!0,forced:!0},{compositeKey:function(){return Met(Oet,Ret,arguments).get("object",Det)}})});var ane=w(()=>{"use strict";var Let=$(),Fet=rR(),nne=kt(),zet=On();Let({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?nne("Symbol").for(arguments[0]):zet(Fet,null,arguments).get("symbol",nne("Symbol"))}})});var one=w(()=>{"use strict";var Net=$(),Bet=ke(),Uet=u1().unpack,jet=Bet(DataView.prototype.getUint16);Net({target:"DataView",proto:!0},{getFloat16:function(t){var r=jet(this,t,arguments.length>1?arguments[1]:!1);return Uet([r&255,r>>8&255],10)}})});var sne=w(()=>{"use strict";var Vet=$(),$et=ke(),Wet=$et(DataView.prototype.getUint8);Vet({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return Wet(this,t)}})});var iR=w((SNt,une)=>{"use strict";var Get=rP(),Ket=.0009765625,Zet=65504,Het=6103515625e-14;une.exports=Math.f16round||function(t){return Get(t,Ket,Zet,Het)}});var lne=w(()=>{"use strict";var Xet=$(),Jet=ke(),Yet=xa(),Qet=Jd(),ett=u1().pack,ttt=iR(),rtt=TypeError,itt=Jet(DataView.prototype.setUint16);Xet({target:"DataView",proto:!0},{setFloat16:function(t,r){if(Yet(this)!=="DataView")throw new rtt("Incorrect receiver");var a=Qet(t),u=ett(ttt(r),10,2);return itt(this,a,u[1]<<8|u[0],arguments.length>2?arguments[2]:!1)}})});var cne=w(()=>{"use strict";var ntt=$(),att=ke(),ott=xa(),stt=Jd(),utt=LO(),ltt=TypeError,ctt=att(DataView.prototype.setUint8);ntt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){if(ott(this)!=="DataView")throw new ltt("Incorrect receiver");var a=stt(t);return ctt(this,a,utt(r))}})});var mne=w(()=>{"use strict";var htt=$(),Vw=At(),ftt=kt(),hne=Rt(),dtt=kn(),fne=yr(),ptt=To(),mtt=Gr(),dne=Et(),pne=dr(),nR=Fk(),vtt=ftt("SuppressedError"),gtt=ReferenceError,ytt=dne("dispose"),_tt=dne("toStringTag"),Ww="DisposableStack",xtt=pne.set,$w=pne.getterFor(Ww),aR="sync-dispose",By="disposed",btt="pending",jw=function(e){var t=$w(e);if(t.state===By)throw new gtt(Ww+" already disposed");return t},oR=function(){xtt(dtt(this,kp),{type:Ww,state:btt,stack:[]}),Vw||(this.disposed=!1)},kp=oR.prototype;ptt(kp,{dispose:function(){var t=$w(this);if(t.state!==By){t.state=By,Vw||(this.disposed=!0);for(var r=t.stack,a=r.length,u=!1,s;a;){var m=r[--a];r[a]=null;try{m()}catch(x){u?s=new vtt(x,s):(u=!0,s=x)}}if(t.stack=null,u)throw s}},use:function(t){return nR(jw(this),t,aR),t},adopt:function(t,r){var a=jw(this);return hne(r),nR(a,void 0,aR,function(){r(t)}),t},defer:function(t){var r=jw(this);hne(t),nR(r,void 0,aR,t)},move:function(){var t=jw(this),r=new oR;return $w(r).stack=t.stack,t.stack=[],t.state=By,Vw||(this.disposed=!0),r}});Vw&&mtt(kp,"disposed",{configurable:!0,get:function(){return $w(this).state===By}});fne(kp,ytt,kp.dispose,{name:"dispose"});fne(kp,_tt,Ww,{nonWritable:!0});htt({global:!0,constructor:!0},{DisposableStack:oR})});var sR=w((PNt,vne)=>{"use strict";var wtt=ke(),Stt=Rt();vne.exports=function(){return wtt(Stt(this))}});var gne=w(()=>{"use strict";var qtt=$(),Att=sR();qtt({target:"Function",proto:!0,forced:!0},{demethodize:Att})});var _ne=w(()=>{"use strict";var Ett=$(),Ttt=ke(),Itt=zt(),Ctt=Cg(),Ptt=$t(),Mtt=At(),Ott=Object.getOwnPropertyDescriptor,yne=/^\s*class\b/,ktt=Ttt(yne.exec),Rtt=function(e){try{if(!Mtt||!ktt(yne,Ctt(e)))return!1}catch(r){}var t=Ott(e,"prototype");return!!t&&Ptt(t,"writable")&&!t.writable};Ett({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return Itt(t)&&!Rtt(t)}})});var xne=w(()=>{"use strict";var Dtt=$(),Ltt=ns();Dtt({target:"Function",stat:!0,forced:!0},{isConstructor:Ltt})});var Sne=w(()=>{"use strict";var Ftt=Et(),ztt=Or().f,bne=Ftt("metadata"),wne=Function.prototype;wne[bne]===void 0&&ztt(wne,bne,{value:null})});var qne=w(()=>{"use strict";var Ntt=$(),Btt=sR();Ntt({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:Btt})});var Ane=w(()=>{"use strict";IP()});var Pne=w(()=>{"use strict";var Utt=$(),jtt=ct(),Vtt=kn(),$tt=zt(),Wtt=wi(),Tne=bi(),Gtt=ze(),Ine=$t(),Ktt=Et(),Uu=kh().IteratorPrototype,Ztt=Zt(),Ene=Ktt("toStringTag"),Htt=TypeError,uR=jtt.Iterator,Cne=Ztt||!$tt(uR)||uR.prototype!==Uu||!Gtt(function(){uR({})}),lR=function(){if(Vtt(this,Uu),Wtt(this)===Uu)throw new Htt("Abstract class Iterator not directly constructable")};Ine(Uu,Ene)||Tne(Uu,Ene,"Iterator");(Cne||!Ine(Uu,"constructor")||Uu.constructor===Object)&&Tne(Uu,"constructor",lR);lR.prototype=Uu;Utt({global:!0,constructor:!0,forced:Cne},{Iterator:lR})});var Hh=w((WNt,Lne)=>{"use strict";var Xtt=Qe(),Jtt=pi(),Ytt=bi(),Qtt=To(),ert=Et(),Mne=dr(),trt=di(),rrt=kh().IteratorPrototype,cR=cn(),hR=Ou(),irt=ert("toStringTag"),One="IteratorHelper",kne="WrapForValidIterator",nrt=Mne.set,Rne=function(e){var t=Mne.getterFor(e?kne:One);return Qtt(Jtt(rrt),{next:function(){var a=t(this);if(e)return a.nextHandler();try{var u=a.done?void 0:a.nextHandler();return cR(u,a.done)}catch(s){throw a.done=!0,s}},return:function(){var r=t(this),a=r.iterator;if(r.done=!0,e){var u=trt(a,"return");return u?Xtt(u,a):cR(void 0,!0)}if(r.inner)try{hR(r.inner.iterator,"normal")}catch(s){return hR(a,"throw",s)}return hR(a,"normal"),cR(void 0,!0)}})},art=Rne(!0),Dne=Rne(!1);Ytt(Dne,irt,"Iterator Helper");Lne.exports=function(e,t){var r=function(u,s){s?(s.iterator=u.iterator,s.next=u.next):s=u,s.type=t?kne:One,s.nextHandler=e,s.counter=0,s.done=!1,nrt(this,s)};return r.prototype=t?art:Dne,r}});var fR=w((GNt,zne)=>{"use strict";var ort=Qe(),srt=Rt(),Fne=rt(),urt=Kr(),lrt=Hh(),crt=Jb(),hrt=lrt(function(){var e=this.iterator,t=Fne(ort(this.next,e)),r=this.done=!!t.done;if(!r)return crt(e,this.mapper,[t.value,this.counter++],!0)});zne.exports=function(t){return Fne(this),srt(t),new hrt(urt(this),{mapper:t})}});var dR=w((KNt,Nne)=>{"use strict";var frt=Qe(),drt=fR(),prt=function(e,t){return[t,e]};Nne.exports=function(){return frt(drt,this,prt)}});var Bne=w(()=>{"use strict";var mrt=$(),vrt=dR();mrt({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:vrt})});var Vne=w(()=>{"use strict";var grt=Qe(),yrt=yr(),_rt=di(),xrt=$t(),brt=Et(),Une=kh().IteratorPrototype,jne=brt("dispose");xrt(Une,jne)||yrt(Une,jne,function(){var e=_rt(this,"return");e&&grt(e,this)})});var Wne=w(()=>{"use strict";var wrt=$(),$ne=Qe(),pR=rt(),Srt=Kr(),qrt=Fy(),Art=Sp(),Ert=Hh(),Trt=Zt(),Irt=Ert(function(){for(var e=this.iterator,t=this.next,r,a;this.remaining;)if(this.remaining--,r=pR($ne(t,e)),a=this.done=!!r.done,a)return;if(r=pR($ne(t,e)),a=this.done=!!r.done,!a)return r.value});wrt({target:"Iterator",proto:!0,real:!0,forced:Trt},{drop:function(t){pR(this);var r=Art(qrt(+t));return new Irt(Srt(this),{remaining:r})}})});var Gne=w(()=>{"use strict";var Crt=$(),Prt=ai(),Mrt=Rt(),Ort=rt(),krt=Kr();Crt({target:"Iterator",proto:!0,real:!0},{every:function(t){Ort(this),Mrt(t);var r=krt(this),a=0;return!Prt(r,function(u,s){if(!t(u,a++))return s()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var Zne=w(()=>{"use strict";var Rrt=$(),Drt=Qe(),Lrt=Rt(),Kne=rt(),Frt=Kr(),zrt=Hh(),Nrt=Jb(),Brt=Zt(),Urt=zrt(function(){for(var e=this.iterator,t=this.predicate,r=this.next,a,u,s;;){if(a=Kne(Drt(r,e)),u=this.done=!!a.done,u)return;if(s=a.value,Nrt(e,t,[s,this.counter++],!0))return s}});Rrt({target:"Iterator",proto:!0,real:!0,forced:Brt},{filter:function(t){return Kne(this),Lrt(t),new Urt(Frt(this),{predicate:t})}})});var Hne=w(()=>{"use strict";var jrt=$(),Vrt=ai(),$rt=Rt(),Wrt=rt(),Grt=Kr();jrt({target:"Iterator",proto:!0,real:!0},{find:function(t){Wrt(this),$rt(t);var r=Grt(this),a=0;return Vrt(r,function(u,s){if(t(u,a++))return s(u)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var mR=w((oBt,Jne)=>{"use strict";var Krt=Qe(),Xne=rt(),Zrt=Kr(),Hrt=Mu();Jne.exports=function(e,t){(!t||typeof e!="string")&&Xne(e);var r=Hrt(e);return Zrt(Xne(r!==void 0?Krt(r,e):e))}});var eae=w(()=>{"use strict";var Xrt=$(),Yne=Qe(),Jrt=Rt(),vR=rt(),Yrt=Kr(),Qrt=mR(),eit=Hh(),Qne=Ou(),tit=Zt(),rit=eit(function(){for(var e=this.iterator,t=this.mapper,r,a;;){if(a=this.inner)try{if(r=vR(Yne(a.next,a.iterator)),!r.done)return r.value;this.inner=null}catch(u){Qne(e,"throw",u)}if(r=vR(Yne(this.next,e)),this.done=!!r.done)return;try{this.inner=Qrt(t(r.value,this.counter++),!1)}catch(u){Qne(e,"throw",u)}}});Xrt({target:"Iterator",proto:!0,real:!0,forced:tit},{flatMap:function(t){return vR(this),Jrt(t),new rit(Yrt(this),{mapper:t,inner:null})}})});var tae=w(()=>{"use strict";var iit=$(),nit=ai(),ait=Rt(),oit=rt(),sit=Kr();iit({target:"Iterator",proto:!0,real:!0},{forEach:function(t){oit(this),ait(t);var r=sit(this),a=0;nit(r,function(u){t(u,a++)},{IS_RECORD:!0})}})});var rae=w(()=>{"use strict";var uit=$(),lit=Qe(),cit=Ht(),hit=Mn(),fit=kh().IteratorPrototype,dit=Hh(),pit=mR(),mit=Zt(),vit=dit(function(){return lit(this.next,this.iterator)},!0);uit({target:"Iterator",stat:!0,forced:mit},{from:function(t){var r=pit(typeof t=="string"?cit(t):t,!0);return hit(fit,r.iterator)?r.iterator:new vit(r)}})});var iae=w(()=>{"use strict";var git=$(),yit=dR();git({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:yit})});var nae=w(()=>{"use strict";var _it=$(),xit=fR(),bit=Zt();_it({target:"Iterator",proto:!0,real:!0,forced:bit},{map:xit})});var oae=w(()=>{"use strict";var wit=$(),aae=Bw(),Sit=TypeError;wit({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,a){if(typeof t=="number")return new aae(t,r,a,"number",0,1);if(typeof t=="bigint")return new aae(t,r,a,"bigint",BigInt(0),BigInt(1));throw new Sit("Incorrect Iterator.range arguments")}})});var sae=w(()=>{"use strict";var qit=$(),Ait=ai(),Eit=Rt(),Tit=rt(),Iit=Kr(),Cit=TypeError;qit({target:"Iterator",proto:!0,real:!0},{reduce:function(t){Tit(this),Eit(t);var r=Iit(this),a=arguments.length<2,u=a?void 0:arguments[1],s=0;if(Ait(r,function(m){a?(a=!1,u=m):u=t(u,m,s),s++},{IS_RECORD:!0}),a)throw new Cit("Reduce of empty iterator with no initial value");return u}})});var uae=w(()=>{"use strict";var Pit=$(),Mit=ai(),Oit=Rt(),kit=rt(),Rit=Kr();Pit({target:"Iterator",proto:!0,real:!0},{some:function(t){kit(this),Oit(t);var r=Rit(this),a=0;return Mit(r,function(u,s){if(t(u,a++))return s()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var cae=w(()=>{"use strict";var Dit=$(),Lit=Qe(),lae=rt(),Fit=Kr(),zit=Fy(),Nit=Sp(),Bit=Hh(),Uit=Ou(),jit=Zt(),Vit=Bit(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,Uit(e,"normal",void 0);var t=lae(Lit(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});Dit({target:"Iterator",proto:!0,real:!0,forced:jit},{take:function(t){lae(this);var r=Nit(zit(+t));return new Vit(Fit(this),{remaining:r})}})});var hae=w(()=>{"use strict";var $it=$(),Wit=rt(),Git=ai(),Kit=Kr(),Zit=[].push;$it({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return Git(Kit(Wit(this)),Zit,{that:t,IS_RECORD:!0}),t}})});var dae=w(()=>{"use strict";var Hit=$(),Xit=rt(),Jit=ky(),Yit=Hk(),fae=Kr(),Qit=Zt();Hit({target:"Iterator",proto:!0,real:!0,forced:Qit},{toAsync:function(){return new Yit(fae(new Jit(fae(Xit(this)))))}})});var gR=w((CBt,pae)=>{"use strict";var ent=ze();pae.exports=!ent(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var yR=w((PBt,mae)=>{"use strict";var tnt=Nt(),rnt=dr().get;mae.exports=function(t){if(!tnt(t))return!1;var r=rnt(t);return!!r&&r.type==="RawJSON"}});var vae=w(()=>{"use strict";var int=$(),nnt=gR(),ant=yR();int({target:"JSON",stat:!0,forced:!nnt},{isRawJSON:ant})});var xR=w((kBt,xae)=>{"use strict";var _R=ke(),ont=$t(),Gw=SyntaxError,snt=parseInt,unt=String.fromCharCode,lnt=_R("".charAt),gae=_R("".slice),yae=_R(/./.exec),_ae={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},cnt=/^[\da-f]{4}$/i,hnt=/^[\u0000-\u001F]$/;xae.exports=function(e,t){for(var r=!0,a="";t<e.length;){var u=lnt(e,t);if(u==="\\"){var s=gae(e,t,t+2);if(ont(_ae,s))a+=_ae[s],t+=2;else if(s==="\\u"){t+=2;var m=gae(e,t,t+4);if(!yae(cnt,m))throw new Gw("Bad Unicode escape at: "+t);a+=unt(snt(m,16)),t+=4}else throw new Gw("Unknown escape sequence: \""+s+"\"")}else if(u==="\""){r=!1,t++;break}else{if(yae(hnt,u))throw new Gw("Bad control character in string literal at: "+t);a+=u,t++}}if(r)throw new Gw("Unterminated string at: "+t);return{value:a,end:t}}});var Iae=w(()=>{"use strict";var fnt=$(),dnt=At(),IR=ct(),pnt=kt(),Kw=ke(),mnt=Qe(),Eae=zt(),vnt=Nt(),gnt=is(),ynt=$t(),_nt=Lt(),bae=Yt(),AR=So(),Tae=ze(),xnt=xR(),bnt=ec(),wae=IR.JSON,wnt=IR.Number,Rp=IR.SyntaxError,CR=wae&&wae.parse,Snt=pnt("Object","keys"),qnt=Object.getOwnPropertyDescriptor,hn=Kw("".charAt),bR=Kw("".slice),wR=Kw(/./.exec),Sae=Kw([].push),SR=/^\d$/,Ant=/^[1-9]$/,Ent=/^(?:-|\d)$/,Uy=/^[\t\n\r ]$/,qR=0,qae=1,Tnt=function(e,t){e=_nt(e);var r=new TR(e,0,""),a=r.parse(),u=a.value,s=r.skip(Uy,a.end);if(s<e.length)throw new Rp("Unexpected extra character: \""+hn(e,s)+"\" after the parsed data at: "+s);return Eae(t)?ER({"":u},"",t,a):u},ER=function(e,t,r,a){var u=e[t],s=a&&u===a.value,m=s&&typeof a.source=="string"?{source:a.source}:{},x,q,T,I,L;if(vnt(u)){var z=gnt(u),Y=s?a.nodes:z?[]:{};if(z)for(x=Y.length,T=bae(u),I=0;I<T;I++)Aae(u,I,ER(u,""+I,r,I<x?Y[I]:void 0));else for(q=Snt(u),T=bae(q),I=0;I<T;I++)L=q[I],Aae(u,L,ER(u,L,r,ynt(Y,L)?Y[L]:void 0))}return mnt(r,e,t,u,m)},Aae=function(e,t,r){if(dnt){var a=qnt(e,t);if(a&&!a.configurable)return}r===void 0?delete e[t]:AR(e,t,r)},Int=function(e,t,r,a){this.value=e,this.end=t,this.source=r,this.nodes=a},TR=function(e,t){this.source=e,this.index=t};TR.prototype={fork:function(e){return new TR(this.source,e)},parse:function(){var e=this.source,t=this.skip(Uy,this.index),r=this.fork(t),a=hn(e,t);if(wR(Ent,a))return r.number();switch(a){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null);}throw new Rp("Unexpected character: \""+a+"\" at: "+t)},node:function(e,t,r,a,u){return new Int(t,a,e?null:bR(this.source,r,a),u)},object:function(){for(var e=this.source,t=this.index+1,r=!1,a={},u={};t<e.length;){if(t=this.until(["\"","}"],t),hn(e,t)==="}"&&!r){t++;break}var s=this.fork(t).string(),m=s.value;t=s.end,t=this.until([":"],t)+1,t=this.skip(Uy,t),s=this.fork(t).parse(),AR(u,m,s),AR(a,m,s.value),t=this.until([",","}"],s.end);var x=hn(e,t);if(x===",")r=!0,t++;else if(x==="}"){t++;break}}return this.node(qae,a,this.index,t,u)},array:function(){for(var e=this.source,t=this.index+1,r=!1,a=[],u=[];t<e.length;){if(t=this.skip(Uy,t),hn(e,t)==="]"&&!r){t++;break}var s=this.fork(t).parse();if(Sae(u,s),Sae(a,s.value),t=this.until([",","]"],s.end),hn(e,t)===",")r=!0,t++;else if(hn(e,t)==="]"){t++;break}}return this.node(qae,a,this.index,t,u)},string:function(){var e=this.index,t=xnt(this.source,this.index+1);return this.node(qR,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(hn(e,r)==="-"&&r++,hn(e,r)==="0")r++;else if(wR(Ant,hn(e,r)))r=this.skip(SR,++r);else throw new Rp("Failed to parse number at: "+r);if(hn(e,r)==="."&&(r=this.skip(SR,++r)),hn(e,r)==="e"||hn(e,r)==="E"){r++,(hn(e,r)==="+"||hn(e,r)==="-")&&r++;var a=r;if(r=this.skip(SR,r),a===r)throw new Rp("Failed to parse number's exponent value at: "+r)}return this.node(qR,wnt(bR(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,a=r+t.length;if(bR(this.source,r,a)!==t)throw new Rp("Failed to parse value at: "+r);return this.node(qR,e,r,a)},skip:function(e,t){for(var r=this.source;t<r.length&&wR(e,hn(r,t));t++);return t},until:function(e,t){t=this.skip(Uy,t);for(var r=hn(this.source,t),a=0;a<e.length;a++)if(e[a]===r)return t;throw new Rp("Unexpected character: \""+r+"\" at: "+t)}};var Cnt=Tae(function(){var e="9007199254740993",t;return CR(e,function(r,a,u){t=u.source}),t!==e}),Pnt=bnt&&!Tae(function(){return 1/CR("-0 \t")!==-1/0});fnt({target:"JSON",stat:!0,forced:Cnt},{parse:function(t,r){return Pnt&&!Eae(r)?CR(t):Tnt(t,r)}})});var Fae=w(()=>{"use strict";var Dae=$(),Mnt=zu(),Lae=gR(),Zw=kt(),Ont=Qe(),Hw=ke(),knt=zt(),Rnt=yR(),Dnt=Lt(),Lnt=So(),Fnt=xR(),znt=aC(),Nnt=rc(),Bnt=dr().set,Unt=String,Cae=SyntaxError,jnt=Zw("JSON","parse"),Pae=Zw("JSON","stringify"),Vnt=Zw("Object","create"),$nt=Zw("Object","freeze"),MR=Hw("".charAt),PR=Hw("".slice),Mae=Hw(/./.exec),Wnt=Hw([].push),OR=Nnt(),Oae=OR.length,kae="Unacceptable as raw JSON",Rae=/^[\t\n\r ]$/;Dae({target:"JSON",stat:!0,forced:!Lae},{rawJSON:function(t){var r=Dnt(t);if(r===""||Mae(Rae,MR(r,0))||Mae(Rae,MR(r,r.length-1)))throw new Cae(kae);var a=jnt(r);if(typeof a=="object"&&a!==null)throw new Cae(kae);var u=Vnt(null);return Bnt(u,{type:"RawJSON"}),Lnt(u,"rawJSON",r),Mnt?$nt(u):u}});Pae&&Dae({target:"JSON",stat:!0,arity:3,forced:!Lae},{stringify:function(t,r,a){var u=znt(r),s=[],m=Pae(t,function(Y,pe){var de=knt(u)?Ont(u,this,Unt(Y),pe):pe;return Rnt(de)?OR+(Wnt(s,de.rawJSON)-1):de},a);if(typeof m!="string")return m;for(var x="",q=m.length,T=0;T<q;T++){var I=MR(m,T);if(I==="\""){var L=Fnt(m,++T).end-1,z=PR(m,T,L);x+=PR(z,0,Oae)===OR?s[PR(z,Oae)]:"\""+z+"\"",T=L}else x+=I}return x}})});var Jn=w((zBt,zae)=>{"use strict";var Gnt=Xn().has;zae.exports=function(e){return Gnt(e),e}});var Nae=w(()=>{"use strict";var Knt=$(),Znt=Jn(),Hnt=Xn().remove;Knt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Znt(this),r=!0,a,u=0,s=arguments.length;u<s;u++)a=Hnt(t,arguments[u]),r=r&&a;return!!r}})});var Uae=w(()=>{"use strict";var Xnt=$(),Jnt=Jn(),kR=Xn(),Ynt=kR.get,Qnt=kR.has,Bae=kR.set;Xnt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var a=Jnt(this),u,s;return Qnt(a,t)?(u=Ynt(a,t),"update"in r&&(u=r.update(u,t,a),Bae(a,t,u)),u):(s=r.insert(t,a),Bae(a,t,s),s)}})});var jae=w(()=>{"use strict";var eat=$(),tat=qr(),rat=Jn(),iat=Po();eat({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=rat(this),a=tat(t,arguments.length>1?arguments[1]:void 0);return iat(r,function(u,s){if(!a(u,s,r))return!1},!0)!==!1}})});var $ae=w(()=>{"use strict";var nat=$(),aat=qr(),oat=Jn(),Vae=Xn(),sat=Po(),uat=Vae.Map,lat=Vae.set;nat({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=oat(this),a=aat(t,arguments.length>1?arguments[1]:void 0),u=new uat;return sat(r,function(s,m){a(s,m,r)&&lat(u,m,s)}),u}})});var Wae=w(()=>{"use strict";var cat=$(),hat=qr(),fat=Jn(),dat=Po();cat({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=fat(this),a=hat(t,arguments.length>1?arguments[1]:void 0),u=dat(r,function(s,m){if(a(s,m,r))return{value:s}},!0);return u&&u.value}})});var Gae=w(()=>{"use strict";var pat=$(),mat=qr(),vat=Jn(),gat=Po();pat({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=vat(this),a=mat(t,arguments.length>1?arguments[1]:void 0),u=gat(r,function(s,m){if(a(s,m,r))return{key:m}},!0);return u&&u.key}})});var jy=w((JBt,Hae)=>{"use strict";var yat=qr(),_at=Qe(),xat=Rt(),bat=ip(),wat=xi(),Kae=ai(),Zae=[].push;Hae.exports=function(t){var r=arguments.length,a=r>1?arguments[1]:void 0,u,s,m,x;return bat(this),u=a!==void 0,u&&xat(a),wat(t)?new this:(s=[],u?(m=0,x=yat(a,r>2?arguments[2]:void 0),Kae(t,function(q){_at(Zae,s,x(q,m++))})):Kae(t,Zae,{that:s}),new this(s))}});var Xae=w(()=>{"use strict";var Sat=$(),qat=jy();Sat({target:"Map",stat:!0,forced:!0},{from:qat})});var Jae=w(()=>{"use strict";var Aat=$(),Eat=ke(),Tat=Rt(),Iat=Fr(),Cat=ai(),Xw=Xn(),Pat=Zt(),Mat=Xw.Map,Oat=Xw.has,kat=Xw.get,Rat=Xw.set,Dat=Eat([].push);Aat({target:"Map",stat:!0,forced:Pat},{groupBy:function(t,r){Iat(t),Tat(r);var a=new Mat,u=0;return Cat(t,function(s){var m=r(s,u++);Oat(a,m)?Dat(kat(a,m),s):Rat(a,m,[s])}),a}})});var Qae=w((r3t,Yae)=>{"use strict";Yae.exports=function(e,t){return e===t||e!==e&&t!==t}});var eoe=w(()=>{"use strict";var Lat=$(),Fat=Qae(),zat=Jn(),Nat=Po();Lat({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return Nat(zat(this),function(r){if(Fat(r,t))return!0},!0)===!0}})});var roe=w(()=>{"use strict";var Bat=$(),Uat=Qe(),jat=ai(),Vat=zt(),toe=Rt(),$at=Xn().Map;Bat({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var a=Vat(this)?this:$at,u=new a;toe(r);var s=toe(u.set);return jat(t,function(m){Uat(s,u,r(m),m)}),u}})});var ioe=w(()=>{"use strict";var Wat=$(),Gat=Jn(),Kat=Po();Wat({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=Kat(Gat(this),function(a,u){if(a===t)return{key:u}},!0);return r&&r.key}})});var aoe=w(()=>{"use strict";var Zat=$(),Hat=qr(),Xat=Jn(),noe=Xn(),Jat=Po(),Yat=noe.Map,Qat=noe.set;Zat({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=Xat(this),a=Hat(t,arguments.length>1?arguments[1]:void 0),u=new Yat;return Jat(r,function(s,m){Qat(u,a(s,m,r),s)}),u}})});var soe=w(()=>{"use strict";var eot=$(),tot=qr(),rot=Jn(),ooe=Xn(),iot=Po(),not=ooe.Map,aot=ooe.set;eot({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=rot(this),a=tot(t,arguments.length>1?arguments[1]:void 0),u=new not;return iot(r,function(s,m){aot(u,m,a(s,m,r))}),u}})});var uoe=w(()=>{"use strict";var oot=$(),sot=Jn(),uot=ai(),lot=Xn().set;oot({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=sot(this),a=arguments.length,u=0;u<a;)uot(arguments[u++],function(s,m){lot(r,s,m)},{AS_ENTRIES:!0});return r}})});var Vy=w((m3t,loe)=>{"use strict";var cot=Cu();loe.exports=function(){return new this(cot(arguments))}});var coe=w(()=>{"use strict";var hot=$(),fot=Vy();hot({target:"Map",stat:!0,forced:!0},{of:fot})});var hoe=w(()=>{"use strict";var dot=$(),pot=Rt(),mot=Jn(),vot=Po(),got=TypeError;dot({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=mot(this),a=arguments.length<2,u=a?void 0:arguments[1];if(pot(t),vot(r,function(s,m){a?(a=!1,u=s):u=t(u,s,m,r)}),a)throw new got("Reduce of empty map with no initial value");return u}})});var foe=w(()=>{"use strict";var yot=$(),_ot=qr(),xot=Jn(),bot=Po();yot({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=xot(this),a=_ot(t,arguments.length>1?arguments[1]:void 0);return bot(r,function(u,s){if(a(u,s,r))return!0},!0)===!0}})});var poe=w(()=>{"use strict";var wot=$(),doe=Rt(),Sot=Jn(),RR=Xn(),qot=TypeError,Aot=RR.get,Eot=RR.has,Tot=RR.set;wot({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var a=Sot(this),u=arguments.length;doe(r);var s=Eot(a,t);if(!s&&u<3)throw new qot("Updating absent value");var m=s?Aot(a,t):doe(u>2?arguments[2]:void 0)(t,a);return Tot(a,t,r(m,t,a)),a}})});var Qw=w((q3t,moe)=>{"use strict";var Jw=Qe(),DR=Rt(),Yw=zt(),Iot=rt(),Cot=TypeError;moe.exports=function(t,r){var a=Iot(this),u=DR(a.get),s=DR(a.has),m=DR(a.set),x=arguments.length>2?arguments[2]:void 0,q;if(!Yw(r)&&!Yw(x))throw new Cot("At least one callback required");return Jw(s,a,t)?(q=Jw(u,a,t),Yw(r)&&(q=r(q),Jw(m,a,t,q))):Yw(x)&&(q=x(),Jw(m,a,t,q)),q}});var voe=w(()=>{"use strict";var Pot=$(),Mot=Qw();Pot({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Mot})});var goe=w(()=>{"use strict";var Oot=$(),kot=Qw();Oot({target:"Map",proto:!0,real:!0,forced:!0},{upsert:kot})});var yoe=w(()=>{"use strict";var Rot=$(),Dot=Math.min,Lot=Math.max;Rot({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,a){return Dot(a,Lot(r,t))}})});var _oe=w(()=>{"use strict";var Fot=$();Fot({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var xoe=w(()=>{"use strict";var zot=$(),Not=180/Math.PI;zot({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*Not}})});var LR=w((D3t,boe)=>{"use strict";boe.exports=Math.scale||function(t,r,a,u,s){var m=+t,x=+r,q=+a,T=+u,I=+s;return m!==m||x!==x||q!==q||T!==T||I!==I?NaN:m===1/0||m===-1/0?m:(m-x)*(I-T)/(q-x)+T}});var woe=w(()=>{"use strict";var Bot=$(),Uot=LR(),jot=s1();Bot({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,a,u,s){return jot(Uot(t,r,a,u,s))}})});var Soe=w(()=>{"use strict";var Vot=$(),$ot=iR();Vot({target:"Math",stat:!0},{f16round:$ot})});var qoe=w(()=>{"use strict";var Wot=$();Wot({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,a,u){var s=t>>>0,m=r>>>0,x=a>>>0;return m+(u>>>0)+((s&x|(s|x)&~(s+x>>>0))>>>31)|0}})});var Aoe=w(()=>{"use strict";var Got=$();Got({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var a=65535,u=+t,s=+r,m=u&a,x=s&a,q=u>>16,T=s>>16,I=(q*x>>>0)+(m*x>>>16);return q*T+(I>>16)+((m*T>>>0)+(I&a)>>16)}})});var Eoe=w(()=>{"use strict";var Kot=$();Kot({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,a,u){var s=t>>>0,m=r>>>0,x=a>>>0;return m-(u>>>0)-((~s&x|~(s^x)&s-x>>>0)>>>31)|0}})});var Toe=w(()=>{"use strict";var Zot=$();Zot({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var Ioe=w(()=>{"use strict";var Hot=$(),Xot=Math.PI/180;Hot({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*Xot}})});var Coe=w(()=>{"use strict";var Jot=$(),Yot=LR();Jot({target:"Math",stat:!0,forced:!0},{scale:Yot})});var koe=w(()=>{"use strict";var Qot=$(),est=rt(),tst=GP(),rst=sc(),ist=cn(),Poe=dr(),Moe="Seeded Random",Ooe=Moe+" Generator",nst="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",ast=Poe.set,ost=Poe.getterFor(Ooe),sst=TypeError,ust=rst(function(t){ast(this,{type:Ooe,seed:t%2147483647})},Moe,function(){var t=ost(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return ist((r&1073741823)/1073741823,!1)});Qot({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=est(t).seed;if(!tst(r))throw new sst(nst);return new ust(r)}})});var Roe=w(()=>{"use strict";var lst=$();lst({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var Doe=w(()=>{"use strict";var cst=$();cst({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var a=65535,u=+t,s=+r,m=u&a,x=s&a,q=u>>>16,T=s>>>16,I=(q*x>>>0)+(m*x>>>16);return q*T+(I>>>16)+((m*T>>>0)+(I&a)>>>16)}})});var Foe=w(()=>{"use strict";var hst=$(),tS=ke(),fst=zr(),dst=P1(),eS="Invalid number representation",pst="Invalid radix",mst=RangeError,FR=SyntaxError,vst=TypeError,Loe=/^[\da-z]+$/,gst=tS("".charAt),yst=tS(Loe.exec),_st=tS(1 .toString),xst=tS("".slice);hst({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var a=1,u,s;if(typeof t!="string")throw new vst(eS);if(!t.length)throw new FR(eS);if(gst(t,0)==="-"&&(a=-1,t=xst(t,1),!t.length))throw new FR(eS);if(u=r===void 0?10:fst(r),u<2||u>36)throw new mst(pst);if(!yst(Loe,t)||_st(s=dst(t,u),u)!==t)throw new FR(eS);return a*s}})});var zoe=w(()=>{"use strict";var bst=$(),wst=Bw();bst({target:"Number",stat:!0,forced:!0},{range:function(t,r,a){return new wst(t,r,a,"number",0,1)}})});var Noe=w(()=>{"use strict";iM()});var iS=w((cUt,joe)=>{"use strict";var Boe=dr(),Sst=sc(),rS=cn(),qst=$t(),Ast=qh(),Est=Ht(),Uoe="Object Iterator",Tst=Boe.set,Ist=Boe.getterFor(Uoe);joe.exports=Sst(function(t,r){var a=Est(t);Tst(this,{type:Uoe,mode:r,object:a,keys:Ast(a),index:0})},"Object",function(){for(var t=Ist(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,rS(void 0,!0);var a=r[t.index++],u=t.object;if(qst(u,a)){switch(t.mode){case"keys":return rS(a,!1);case"values":return rS(u[a],!1);}return rS([a,u[a]],!1)}}})});var Voe=w(()=>{"use strict";var Cst=$(),Pst=iS();Cst({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new Pst(t,"entries")}})});var $oe=w(()=>{"use strict";var Mst=$(),Ost=iS();Mst({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new Ost(t,"keys")}})});var Woe=w(()=>{"use strict";var kst=$(),Rst=iS();kst({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new Rst(t,"values")}})});var Goe=w(()=>{"use strict";var Dst=$(),Lst=kt(),Fst=ke(),zst=Rt(),Nst=Fr(),Bst=ts(),Ust=ai(),jst=Lst("Object","create"),Vst=Fst([].push);Dst({target:"Object",stat:!0},{groupBy:function(t,r){Nst(t),zst(r);var a=jst(null),u=0;return Ust(t,function(s){var m=Bst(r(s,u++));m in a?Vst(a[m],s):a[m]=[s]}),a}})});var rse=w(()=>{"use strict";var $st=$(),nS=Qe(),$y=At(),Wst=lc(),Koe=Rt(),Gst=rt(),Kst=kn(),Zoe=zt(),Zst=xi(),Hst=Nt(),aS=di(),Xst=yr(),zR=To(),Hoe=Gr(),Dp=AM(),Jst=Et(),Xoe=dr(),Yst=Jst("observable"),NR="Observable",Joe="Subscription",Yoe="SubscriptionObserver",BR=Xoe.getterFor,UR=Xoe.set,Qst=BR(NR),Qoe=BR(Joe),oS=BR(Yoe),ese=function(e){this.observer=Gst(e),this.cleanup=void 0,this.subscriptionObserver=void 0};ese.prototype={type:Joe,clean:function(){var e=this.cleanup;if(e){this.cleanup=void 0;try{e()}catch(t){Dp(t)}}},close:function(){if(!$y){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=void 0},isClosed:function(){return this.observer===void 0}};var jR=function(e,t){var r=UR(this,new ese(e)),a;$y||(this.closed=!1);try{(a=aS(e,"start"))&&nS(a,e,this)}catch(x){Dp(x)}if(!r.isClosed()){var u=r.subscriptionObserver=new VR(r);try{var s=t(u),m=s;Zst(s)||(r.cleanup=Zoe(s.unsubscribe)?function(){m.unsubscribe()}:Koe(s))}catch(x){u.error(x);return}r.isClosed()&&r.clean()}};jR.prototype=zR({},{unsubscribe:function(){var t=Qoe(this);t.isClosed()||(t.close(),t.clean())}});$y&&Hoe(jR.prototype,"closed",{configurable:!0,get:function(){return Qoe(this).isClosed()}});var VR=function(e){UR(this,{type:Yoe,subscriptionState:e}),$y||(this.closed=!1)};VR.prototype=zR({},{next:function(t){var r=oS(this).subscriptionState;if(!r.isClosed()){var a=r.observer;try{var u=aS(a,"next");u&&nS(u,a,t)}catch(s){Dp(s)}}},error:function(t){var r=oS(this).subscriptionState;if(!r.isClosed()){var a=r.observer;r.close();try{var u=aS(a,"error");u?nS(u,a,t):Dp(t)}catch(s){Dp(s)}r.clean()}},complete:function(){var t=oS(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var a=aS(r,"complete");a&&nS(a,r)}catch(u){Dp(u)}t.clean()}}});$y&&Hoe(VR.prototype,"closed",{configurable:!0,get:function(){return oS(this).subscriptionState.isClosed()}});var tse=function(t){Kst(this,$R),UR(this,{type:NR,subscriber:Koe(t)})},$R=tse.prototype;zR($R,{subscribe:function(t){var r=arguments.length;return new jR(Zoe(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:Hst(t)?t:{},Qst(this).subscriber)}});Xst($R,Yst,function(){return this});$st({global:!0,constructor:!0,forced:!0},{Observable:tse});Wst(NR)});var nse=w(()=>{"use strict";var eut=$(),tut=kt(),rut=Qe(),ise=rt(),iut=ns(),nut=ac(),aut=di(),out=ai(),sut=Et(),uut=sut("observable");eut({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=iut(this)?this:tut("Observable"),a=aut(ise(t),uut);if(a){var u=ise(rut(a,t));return u.constructor===r?u:new r(function(m){return u.subscribe(m)})}var s=nut(t);return new r(function(m){out(s,function(x,q){if(m.next(x),m.closed)return q()},{IS_ITERATOR:!0,INTERRUPTED:!0}),m.complete()})}})});var ose=w(()=>{"use strict";var lut=$(),ase=kt(),cut=ns(),hut=ase("Array");lut({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=cut(this)?this:ase("Observable"),r=arguments.length,a=hut(r),u=0;u<r;)a[u]=arguments[u++];return new t(function(s){for(var m=0;m<r;m++)if(s.next(a[m]),s.closed)return;s.complete()})}})});var sse=w(()=>{"use strict";rse();nse();ose()});var use=w(()=>{"use strict";BM()});var lse=w(()=>{"use strict";UM()});var cse=w(()=>{"use strict";var fut=$(),dut=Fs(),put=vc();fut({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=dut.f(this),r=put(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}})});var hse=w(()=>{"use strict";var mut=$(),vut=Fs();mut({target:"Promise",stat:!0},{withResolvers:function(){var t=vut.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var Us=w((DUt,mse)=>{"use strict";A1();xw();var pse=kt(),gut=ke(),yut=Ms(),fse=pse("Map"),_ut=pse("WeakMap"),xut=gut([].push),dse=yut("metadata"),WR=dse.store||(dse.store=new _ut),Wy=function(e,t,r){var a=WR.get(e);if(!a){if(!r)return;WR.set(e,a=new fse)}var u=a.get(t);if(!u){if(!r)return;a.set(t,u=new fse)}return u},but=function(e,t,r){var a=Wy(t,r,!1);return a===void 0?!1:a.has(e)},wut=function(e,t,r){var a=Wy(t,r,!1);return a===void 0?void 0:a.get(e)},Sut=function(e,t,r,a){Wy(r,a,!0).set(e,t)},qut=function(e,t){var r=Wy(e,t,!1),a=[];return r&&r.forEach(function(u,s){xut(a,s)}),a},Aut=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};mse.exports={store:WR,getMap:Wy,has:but,get:wut,set:Sut,keys:qut,toKey:Aut}});var gse=w(()=>{"use strict";var Eut=$(),vse=Us(),Tut=rt(),Iut=vse.toKey,Cut=vse.set;Eut({target:"Reflect",stat:!0},{defineMetadata:function(t,r,a){var u=arguments.length<4?void 0:Iut(arguments[3]);Cut(t,r,Tut(a),u)}})});var _se=w(()=>{"use strict";var Put=$(),GR=Us(),Mut=rt(),Out=GR.toKey,kut=GR.getMap,yse=GR.store;Put({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var a=arguments.length<3?void 0:Out(arguments[2]),u=kut(Mut(r),a,!1);if(u===void 0||!u.delete(t))return!1;if(u.size)return!0;var s=yse.get(r);return s.delete(a),!!s.size||yse.delete(r)}})});var bse=w(()=>{"use strict";var Rut=$(),KR=Us(),Dut=rt(),Lut=wi(),Fut=KR.has,zut=KR.get,Nut=KR.toKey,xse=function(e,t,r){var a=Fut(e,t,r);if(a)return zut(e,t,r);var u=Lut(t);return u!==null?xse(e,u,r):void 0};Rut({target:"Reflect",stat:!0},{getMetadata:function(t,r){var a=arguments.length<3?void 0:Nut(arguments[2]);return xse(t,Dut(r),a)}})});var Ase=w(()=>{"use strict";var But=$(),wse=ke(),Sse=Us(),Uut=rt(),jut=wi(),Vut=Iw(),$ut=wse(Vut),Wut=wse([].concat),Gut=Sse.keys,Kut=Sse.toKey,qse=function(e,t){var r=Gut(e,t),a=jut(e);if(a===null)return r;var u=qse(a,t);return u.length?r.length?$ut(Wut(r,u)):u:r};But({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:Kut(arguments[1]);return qse(Uut(t),r)}})});var Tse=w(()=>{"use strict";var Zut=$(),Ese=Us(),Hut=rt(),Xut=Ese.get,Jut=Ese.toKey;Zut({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var a=arguments.length<3?void 0:Jut(arguments[2]);return Xut(t,Hut(r),a)}})});var Cse=w(()=>{"use strict";var Yut=$(),Ise=Us(),Qut=rt(),elt=Ise.keys,tlt=Ise.toKey;Yut({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:tlt(arguments[1]);return elt(Qut(t),r)}})});var Ose=w(()=>{"use strict";var rlt=$(),Pse=Us(),ilt=rt(),nlt=wi(),alt=Pse.has,olt=Pse.toKey,Mse=function(e,t,r){var a=alt(e,t,r);if(a)return!0;var u=nlt(t);return u!==null?Mse(e,u,r):!1};rlt({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var a=arguments.length<3?void 0:olt(arguments[2]);return Mse(t,ilt(r),a)}})});var Rse=w(()=>{"use strict";var slt=$(),kse=Us(),ult=rt(),llt=kse.has,clt=kse.toKey;slt({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var a=arguments.length<3?void 0:clt(arguments[2]);return llt(t,ult(r),a)}})});var Lse=w(()=>{"use strict";var hlt=$(),Dse=Us(),flt=rt(),dlt=Dse.toKey,plt=Dse.set;hlt({target:"Reflect",stat:!0},{metadata:function(t,r){return function(u,s){plt(t,r,flt(u),dlt(s))}}})});var zse=w(()=>{"use strict";var mlt=$(),Fse=ke(),vlt=Lt(),glt=zh(),ylt=Fse("".charCodeAt),_lt=Fse("".replace),xlt=RegExp("[!\"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^`{|}~"+glt+"]","g");mlt({target:"RegExp",stat:!0,forced:!0},{escape:function(t){var r=vlt(t),a=ylt(r,0);return(a>47&&a<58?"\\x3":"")+_lt(r,xlt,"\\$&")}})});var Rn=w((r5t,Nse)=>{"use strict";var ZR=ke(),sS=Set.prototype;Nse.exports={Set,add:ZR(sS.add),has:ZR(sS.has),remove:ZR(sS.delete),proto:sS}});var fn=w((i5t,Bse)=>{"use strict";var blt=Rn().has;Bse.exports=function(e){return blt(e),e}});var Use=w(()=>{"use strict";var wlt=$(),Slt=fn(),qlt=Rn().add;wlt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Slt(this),r=0,a=arguments.length;r<a;r++)qlt(t,arguments[r]);return t}})});var jse=w(()=>{"use strict";var Alt=$(),Elt=fn(),Tlt=Rn().remove;Alt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Elt(this),r=!0,a,u=0,s=arguments.length;u<s;u++)a=Tlt(t,arguments[u]),r=r&&a;return!!r}})});var Ya=w((u5t,Kse)=>{"use strict";var Vse=ke(),Ilt=Bu(),$se=Rn(),Clt=$se.Set,Wse=$se.proto,Plt=Vse(Wse.forEach),Gse=Vse(Wse.keys),Mlt=Gse(new Clt).next;Kse.exports=function(e,t,r){return r?Ilt({iterator:Gse(e),next:Mlt},t):Plt(e,t)}});var uS=w((l5t,Hse)=>{"use strict";var Zse=Rn(),Olt=Ya(),klt=Zse.Set,Rlt=Zse.add;Hse.exports=function(e){var t=new klt;return Olt(e,function(r){Rlt(t,r)}),t}});var Lp=w((c5t,Xse)=>{"use strict";var Dlt=jg(),Llt=Rn();Xse.exports=Dlt(Llt.proto,"size","get")||function(e){return e.size}});var bc=w((h5t,rue)=>{"use strict";var Jse=Rt(),eue=rt(),Yse=Qe(),Flt=zr(),zlt=Kr(),Qse="Invalid size",Nlt=RangeError,Blt=TypeError,Ult=Math.max,tue=function(e,t,r,a){this.set=e,this.size=t,this.has=r,this.keys=a};tue.prototype={getIterator:function(){return zlt(eue(Yse(this.keys,this.set)))},includes:function(e){return Yse(this.has,this.set,e)}};rue.exports=function(e){eue(e);var t=+e.size;if(t!==t)throw new Blt(Qse);var r=Flt(t);if(r<0)throw new Nlt(Qse);return new tue(e,Ult(r,0),Jse(e.has),Jse(e.keys))}});var HR=w((f5t,aue)=>{"use strict";var jlt=fn(),nue=Rn(),Vlt=uS(),$lt=Lp(),Wlt=bc(),Glt=Ya(),Klt=Bu(),Zlt=nue.has,iue=nue.remove;aue.exports=function(t){var r=jlt(this),a=Wlt(t),u=Vlt(r);return $lt(r)<=a.size?Glt(r,function(s){a.includes(s)&&iue(u,s)}):Klt(a.getIterator(),function(s){Zlt(r,s)&&iue(u,s)}),u}});var wc=w((d5t,sue)=>{"use strict";var Hlt=kt(),oue=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};sue.exports=function(e){var t=Hlt("Set");try{new t()[e](oue(0));try{return new t()[e](oue(-1)),!1}catch(r){return!0}}catch(r){return!1}}});var uue=w(()=>{"use strict";var Xlt=$(),Jlt=HR(),Ylt=wc();Xlt({target:"Set",proto:!0,real:!0,forced:!Ylt("difference")},{difference:Jlt})});var cue=w((v5t,lue)=>{"use strict";var Qlt=xa(),ect=$t(),tct=xi(),rct=Et(),ict=Oh(),nct=rct("iterator"),act=Object;lue.exports=function(e){if(tct(e))return!1;var t=act(e);return t[nct]!==void 0||"@@iterator"in t||ect(ict,Qlt(t))}});var Sc=w((g5t,fue)=>{"use strict";var oct=kt(),hue=zt(),sct=cue(),uct=Nt(),lct=oct("Set"),cct=function(e){return uct(e)&&typeof e.size=="number"&&hue(e.has)&&hue(e.keys)};fue.exports=function(e){return cct(e)?e:sct(e)?new lct(e):e}});var due=w(()=>{"use strict";var hct=$(),fct=Qe(),dct=Sc(),pct=HR();hct({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return fct(pct,this,dct(t))}})});var pue=w(()=>{"use strict";var mct=$(),vct=qr(),gct=fn(),yct=Ya();mct({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=gct(this),a=vct(t,arguments.length>1?arguments[1]:void 0);return yct(r,function(u){if(!a(u,u,r))return!1},!0)!==!1}})});var vue=w(()=>{"use strict";var _ct=$(),xct=qr(),bct=fn(),mue=Rn(),wct=Ya(),Sct=mue.Set,qct=mue.add;_ct({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=bct(this),a=xct(t,arguments.length>1?arguments[1]:void 0),u=new Sct;return wct(r,function(s){a(s,s,r)&&qct(u,s)}),u}})});var gue=w(()=>{"use strict";var Act=$(),Ect=qr(),Tct=fn(),Ict=Ya();Act({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=Tct(this),a=Ect(t,arguments.length>1?arguments[1]:void 0),u=Ict(r,function(s){if(a(s,s,r))return{value:s}},!0);return u&&u.value}})});var yue=w(()=>{"use strict";var Cct=$(),Pct=jy();Cct({target:"Set",stat:!0,forced:!0},{from:Pct})});var JR=w((I5t,xue)=>{"use strict";var Mct=fn(),XR=Rn(),Oct=Lp(),kct=bc(),Rct=Ya(),Dct=Bu(),Lct=XR.Set,_ue=XR.add,Fct=XR.has;xue.exports=function(t){var r=Mct(this),a=kct(t),u=new Lct;return Oct(r)>a.size?Dct(a.getIterator(),function(s){Fct(r,s)&&_ue(u,s)}):Rct(r,function(s){a.includes(s)&&_ue(u,s)}),u}});var bue=w(()=>{"use strict";var zct=$(),Nct=ze(),Bct=JR(),Uct=wc(),jct=!Uct("intersection")||Nct(function(){return Array.from(new Set([1,2,3]).intersection(new Set([3,2])))!=="3,2"});zct({target:"Set",proto:!0,real:!0,forced:jct},{intersection:Bct})});var wue=w(()=>{"use strict";var Vct=$(),$ct=Qe(),Wct=Sc(),Gct=JR();Vct({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return $ct(Gct,this,Wct(t))}})});var YR=w((k5t,Sue)=>{"use strict";var Kct=fn(),Zct=Rn().has,Hct=Lp(),Xct=bc(),Jct=Ya(),Yct=Bu(),Qct=Ou();Sue.exports=function(t){var r=Kct(this),a=Xct(t);if(Hct(r)<=a.size)return Jct(r,function(s){if(a.includes(s))return!1},!0)!==!1;var u=a.getIterator();return Yct(u,function(s){if(Zct(r,s))return Qct(u,"normal",!1)})!==!1}});var que=w(()=>{"use strict";var eht=$(),tht=YR(),rht=wc();eht({target:"Set",proto:!0,real:!0,forced:!rht("isDisjointFrom")},{isDisjointFrom:tht})});var Aue=w(()=>{"use strict";var iht=$(),nht=Qe(),aht=Sc(),oht=YR();iht({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return nht(oht,this,aht(t))}})});var QR=w((z5t,Eue)=>{"use strict";var sht=fn(),uht=Lp(),lht=Ya(),cht=bc();Eue.exports=function(t){var r=sht(this),a=cht(t);return uht(r)>a.size?!1:lht(r,function(u){if(!a.includes(u))return!1},!0)!==!1}});var Tue=w(()=>{"use strict";var hht=$(),fht=QR(),dht=wc();hht({target:"Set",proto:!0,real:!0,forced:!dht("isSubsetOf")},{isSubsetOf:fht})});var Iue=w(()=>{"use strict";var pht=$(),mht=Qe(),vht=Sc(),ght=QR();pht({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return mht(ght,this,vht(t))}})});var eD=w((V5t,Cue)=>{"use strict";var yht=fn(),_ht=Rn().has,xht=Lp(),bht=bc(),wht=Bu(),Sht=Ou();Cue.exports=function(t){var r=yht(this),a=bht(t);if(xht(r)<a.size)return!1;var u=a.getIterator();return wht(u,function(s){if(!_ht(r,s))return Sht(u,"normal",!1)})!==!1}});var Pue=w(()=>{"use strict";var qht=$(),Aht=eD(),Eht=wc();qht({target:"Set",proto:!0,real:!0,forced:!Eht("isSupersetOf")},{isSupersetOf:Aht})});var Mue=w(()=>{"use strict";var Tht=$(),Iht=Qe(),Cht=Sc(),Pht=eD();Tht({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return Iht(Pht,this,Cht(t))}})});var kue=w(()=>{"use strict";var Mht=$(),Oue=ke(),Oht=fn(),kht=Ya(),Rht=Lt(),Dht=Oue([].join),Lht=Oue([].push);Mht({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=Oht(this),a=t===void 0?",":Rht(t),u=[];return kht(r,function(s){Lht(u,s)}),Dht(u,a)}})});var Due=w(()=>{"use strict";var Fht=$(),zht=qr(),Nht=fn(),Rue=Rn(),Bht=Ya(),Uht=Rue.Set,jht=Rue.add;Fht({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=Nht(this),a=zht(t,arguments.length>1?arguments[1]:void 0),u=new Uht;return Bht(r,function(s){jht(u,a(s,s,r))}),u}})});var Lue=w(()=>{"use strict";var Vht=$(),$ht=Vy();Vht({target:"Set",stat:!0,forced:!0},{of:$ht})});var Fue=w(()=>{"use strict";var Wht=$(),Ght=Rt(),Kht=fn(),Zht=Ya(),Hht=TypeError;Wht({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=Kht(this),a=arguments.length<2,u=a?void 0:arguments[1];if(Ght(t),Zht(r,function(s){a?(a=!1,u=s):u=t(u,s,s,r)}),a)throw new Hht("Reduce of empty set with no initial value");return u}})});var zue=w(()=>{"use strict";var Xht=$(),Jht=qr(),Yht=fn(),Qht=Ya();Xht({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=Yht(this),a=Jht(t,arguments.length>1?arguments[1]:void 0);return Qht(r,function(u){if(a(u,u,r))return!0},!0)===!0}})});var rD=w((n4t,Nue)=>{"use strict";var eft=fn(),tD=Rn(),tft=uS(),rft=bc(),ift=Bu(),nft=tD.add,aft=tD.has,oft=tD.remove;Nue.exports=function(t){var r=eft(this),a=rft(t).getIterator(),u=tft(r);return ift(a,function(s){aft(r,s)?oft(u,s):nft(u,s)}),u}});var Bue=w(()=>{"use strict";var sft=$(),uft=rD(),lft=wc();sft({target:"Set",proto:!0,real:!0,forced:!lft("symmetricDifference")},{symmetricDifference:uft})});var Uue=w(()=>{"use strict";var cft=$(),hft=Qe(),fft=Sc(),dft=rD();cft({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return hft(dft,this,fft(t))}})});var iD=w((l4t,jue)=>{"use strict";var pft=fn(),mft=Rn().add,vft=uS(),gft=bc(),yft=Bu();jue.exports=function(t){var r=pft(this),a=gft(t).getIterator(),u=vft(r);return yft(a,function(s){mft(u,s)}),u}});var Vue=w(()=>{"use strict";var _ft=$(),xft=iD(),bft=wc();_ft({target:"Set",proto:!0,real:!0,forced:!bft("union")},{union:xft})});var $ue=w(()=>{"use strict";var wft=$(),Sft=Qe(),qft=Sc(),Aft=iD();wft({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return Sft(Aft,this,qft(t))}})});var Wue=w(()=>{"use strict";var Eft=$(),Tft=Wh().charAt,Ift=Fr(),Cft=zr(),Pft=Lt();Eft({target:"String",proto:!0,forced:!0},{at:function(t){var r=Pft(Ift(this)),a=r.length,u=Cft(t),s=u>=0?u:a+u;return s<0||s>=a?void 0:Tft(r,s)}})});var nD=w((v4t,Hue)=>{"use strict";var Zue=ke(),Mft=Ii(),Gue=Lt(),Oft=Yt(),kft=TypeError,Kue=Zue([].push),Rft=Zue([].join);Hue.exports=function(t){var r=Mft(t),a=Oft(r);if(!a)return"";for(var u=arguments.length,s=[],m=0;;){var x=r[m++];if(x===void 0)throw new kft("Incorrect template");if(Kue(s,Gue(x)),m===a)return Rft(s,"");m<u&&Kue(s,Gue(arguments[m]))}}});var Xue=w(()=>{"use strict";var Dft=$(),Lft=nD();Dft({target:"String",stat:!0,forced:!0},{cooked:Lft})});var tle=w(()=>{"use strict";var Fft=$(),zft=sc(),Jue=cn(),Nft=Fr(),Bft=Lt(),Yue=dr(),Que=Wh(),Uft=Que.codeAt,jft=Que.charAt,ele="String Iterator",Vft=Yue.set,$ft=Yue.getterFor(ele),Wft=zft(function(t){Vft(this,{type:ele,string:t,index:0})},"String",function(){var t=$ft(this),r=t.string,a=t.index,u;return a>=r.length?Jue(void 0,!0):(u=jft(r,a),t.index+=u.length,Jue({codePoint:Uft(u,0),position:a},!1))});Fft({target:"String",proto:!0,forced:!0},{codePoints:function(){return new Wft(Bft(Nft(this)))}})});var cle=w((b4t,lle)=>{"use strict";var Gft=kt(),lS=ke(),Kft=String.fromCharCode,Zft=Gft("String","fromCodePoint"),aD=lS("".charAt),sle=lS("".charCodeAt),rle=lS("".indexOf),ile=lS("".slice),sD=48,ule=57,nle=97,Hft=102,ale=65,Xft=70,ole=function(e,t){var r=sle(e,t);return r>=sD&&r<=ule},oD=function(e,t,r){if(r>=e.length)return-1;for(var a=0;t<r;t++){var u=Jft(sle(e,t));if(u===-1)return-1;a=a*16+u}return a},Jft=function(e){return e>=sD&&e<=ule?e-sD:e>=nle&&e<=Hft?e-nle+10:e>=ale&&e<=Xft?e-ale+10:-1};lle.exports=function(e){for(var t="",r=0,a=0,u;(a=rle(e,"\\",a))>-1;){if(t+=ile(e,r,a),++a===e.length)return;var s=aD(e,a++);switch(s){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":a<e.length&&aD(e,a)===`
`&&++a;case`
`:case"\u2028":case"\u2029":break;case"0":if(ole(e,a))return;t+="\0";break;case"x":if(u=oD(e,a,a+2),u===-1)return;a+=2,t+=Kft(u);break;case"u":if(a<e.length&&aD(e,a)==="{"){var m=rle(e,"}",++a);if(m===-1)return;u=oD(e,a,m),a=m+1}else u=oD(e,a,a+4),a+=4;if(u===-1||u>1114111)return;t+=Zft(u);break;default:if(ole(s,0))return;t+=s;}r=a}return t+ile(e,r)}});var xle=w(()=>{"use strict";var Yft=zu(),Qft=$(),edt=Ms(),tdt=kt(),rdt=Og(),cS=ke(),mle=On(),vle=rt(),idt=Ht(),ndt=zt(),adt=Yt(),odt=Or().f,sdt=Ah(),udt=nD(),ldt=cle(),gle=zh(),cdt=tdt("WeakMap"),ju=edt("GlobalDedentRegistry",new cdt);ju.has=ju.has;ju.get=ju.get;ju.set=ju.set;var uD=Array,Gy=TypeError,hle=Object.freeze||Object,hdt=Object.isFrozen,fdt=Math.min,fle=cS("".charAt),yle=cS("".slice),ddt=cS("".split),dle=cS(/./.exec),pdt=/([\n\u2028\u2029]|\r\n?)/g,mdt=RegExp("^["+gle+"]*"),vdt=RegExp("[^"+gle+"]"),ple="Invalid tag",gdt="Invalid opening line",ydt="Invalid closing line",_dt=function(e){var t=e.raw;if(Yft&&!hdt(t))throw new Gy("Raw template should be frozen");if(ju.has(t))return ju.get(t);var r=xdt(t),a=wdt(r);return odt(a,"raw",{value:hle(r)}),hle(a),ju.set(t,a),a},xdt=function(e){var t=idt(e),r=adt(t),a=uD(r),u=uD(r),s=0,m,x,q,T;if(!r)throw new Gy(ple);for(;s<r;s++){var I=t[s];if(typeof I=="string")a[s]=ddt(I,pdt);else throw new Gy(ple)}for(s=0;s<r;s++){var L=s+1===r;if(m=a[s],s===0){if(m.length===1||m[0].length>0)throw new Gy(gdt);m[1]=""}if(L){if(m.length===1||dle(vdt,m[m.length-1]))throw new Gy(ydt);m[m.length-2]="",m[m.length-1]=""}for(var z=2;z<m.length;z+=2){var Y=m[z],pe=z+1===m.length&&!L,de=dle(mdt,Y)[0];if(!pe&&de.length===Y.length){m[z]="";continue}x=bdt(de,x)}}var Z=x?x.length:0;for(s=0;s<r;s++){for(m=a[s],q=m[0],T=1;T<m.length;T+=2)q+=m[T]+yle(m[T+1],Z);u[s]=q}return u},bdt=function(e,t){if(t===void 0||e===t)return e;for(var r=0,a=fdt(e.length,t.length);r<a&&fle(e,r)===fle(t,r);r++);return yle(e,0,r)},wdt=function(e){for(var t=0,r=e.length,a=uD(r);t<r;t++)a[t]=ldt(e[t]);return a},_le=function(e){return rdt(function(t){var r=sdt(arguments);return r[0]=_dt(vle(t)),mle(e,this,r)},"")},Sdt=_le(udt);Qft({target:"String",stat:!0,forced:!0},{dedent:function(t){return vle(t),ndt(t)?_le(t):mle(Sdt,this,arguments)}})});var ble=w(()=>{"use strict";uO()});var wle=w(()=>{"use strict";vO()});var Sle=w(()=>{"use strict";AO()});var qle=w(()=>{"use strict";MO()});var Ale=w(()=>{"use strict";var qdt=ct(),Adt=ni(),Edt=Or().f,Tdt=Fi().f,lD=qdt.Symbol;Adt("asyncDispose");lD&&(Ky=Tdt(lD,"asyncDispose"),Ky.enumerable&&Ky.configurable&&Ky.writable&&Edt(lD,"asyncDispose",{value:Ky.value,enumerable:!1,configurable:!1,writable:!1}));var Ky});var Ele=w(()=>{"use strict";var Idt=ct(),Cdt=ni(),Pdt=Or().f,Mdt=Fi().f,cD=Idt.Symbol;Cdt("dispose");cD&&(Zy=Mdt(cD,"dispose"),Zy.enumerable&&Zy.configurable&&Zy.writable&&Pdt(cD,"dispose",{value:Zy.value,enumerable:!1,configurable:!1,writable:!1}));var Zy});var fD=w((L4t,Tle)=>{"use strict";var Odt=kt(),kdt=ke(),hD=Odt("Symbol"),Rdt=hD.keyFor,Ddt=kdt(hD.prototype.valueOf);Tle.exports=hD.isRegisteredSymbol||function(t){try{return Rdt(Ddt(t))!==void 0}catch(r){return!1}}});var Ile=w(()=>{"use strict";var Ldt=$(),Fdt=fD();Ldt({target:"Symbol",stat:!0},{isRegisteredSymbol:Fdt})});var Cle=w(()=>{"use strict";var zdt=$(),Ndt=fD();zdt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Ndt})});var mD=w((U4t,Dle)=>{"use strict";var Bdt=Ms(),kle=kt(),Udt=ke(),jdt=Au(),Vdt=Et(),fS=kle("Symbol"),Ple=fS.isWellKnownSymbol,Rle=kle("Object","getOwnPropertyNames"),$dt=Udt(fS.prototype.valueOf),Mle=Bdt("wks");for(hS=0,dD=Rle(fS),Ole=dD.length;hS<Ole;hS++)try{pD=dD[hS],jdt(fS[pD])&&Vdt(pD)}catch(e){}var pD,hS,dD,Ole;Dle.exports=function(t){if(Ple&&Ple(t))return!0;try{for(var r=$dt(t),a=0,u=Rle(Mle),s=u.length;a<s;a++)if(Mle[u[a]]==r)return!0}catch(m){}return!1}});var Lle=w(()=>{"use strict";var Wdt=$(),Gdt=mD();Wdt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Gdt})});var Fle=w(()=>{"use strict";var Kdt=$(),Zdt=mD();Kdt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Zdt})});var zle=w(()=>{"use strict";var Hdt=ni();Hdt("matcher")});var Nle=w(()=>{"use strict";var Xdt=ni();Xdt("metadata")});var Ble=w(()=>{"use strict";var Jdt=ni();Jdt("metadataKey")});var Ule=w(()=>{"use strict";var Ydt=ni();Ydt("observable")});var jle=w(()=>{"use strict";var Qdt=ni();Qdt("patternMatch")});var Vle=w(()=>{"use strict";var ept=ni();ept("replaceAll")});var Wle=w(()=>{"use strict";var tpt=kt(),rpt=ip(),ipt=bk(),$le=Wt(),npt=Rh(),apt=$le.aTypedArrayConstructor,opt=$le.exportTypedArrayStaticMethod;opt("fromAsync",function(t){var r=this,a=arguments.length,u=a>1?arguments[1]:void 0,s=a>2?arguments[2]:void 0;return new(tpt("Promise"))(function(m){rpt(r),m(ipt(t,u,s))}).then(function(m){return npt(apt(r),m)})},!0)});var Gle=w(()=>{"use strict";GO()});var Zle=w(()=>{"use strict";var Kle=Wt(),spt=mi().filterReject,upt=sw(),lpt=Kle.aTypedArray,cpt=Kle.exportTypedArrayMethod;cpt("filterOut",function(t){var r=spt(lpt(this),t,arguments.length>1?arguments[1]:void 0);return upt(this,r)},!0)});var Xle=w(()=>{"use strict";var Hle=Wt(),hpt=mi().filterReject,fpt=sw(),dpt=Hle.aTypedArray,ppt=Hle.exportTypedArrayMethod;ppt("filterReject",function(t){var r=hpt(dpt(this),t,arguments.length>1?arguments[1]:void 0);return fpt(this,r)},!0)});var Jle=w(()=>{"use strict";KO()});var Yle=w(()=>{"use strict";ZO()});var ece=w(()=>{"use strict";var Qle=Wt(),mpt=Aw(),vpt=Ap(),gpt=Qle.aTypedArray,ypt=Qle.exportTypedArrayMethod;ypt("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return mpt(gpt(this),t,r,vpt)},!0)});var tce=w(()=>{"use strict";ak()});var rce=w(()=>{"use strict";ok()});var ice=w(()=>{"use strict";var vD=Wt(),_pt=Yt(),xpt=rw(),bpt=wo(),wpt=Ay(),Spt=zr(),qpt=ze(),Apt=vD.aTypedArray,Ept=vD.getTypedArrayConstructor,Tpt=vD.exportTypedArrayMethod,Ipt=Math.max,Cpt=Math.min,Ppt=!qpt(function(){var e=new Int8Array([1]),t=e.toSpliced(1,0,{valueOf:function(){return e[0]=2,3}});return t[0]!==2||t[1]!==3});Tpt("toSpliced",function(t,r){var a=Apt(this),u=Ept(a),s=_pt(a),m=bpt(t,s),x=arguments.length,q=0,T,I,L,z,Y,pe,de;if(x===0)T=I=0;else if(x===1)T=0,I=s-m;else if(I=Cpt(Ipt(Spt(r),0),s-m),T=x-2,T){z=new u(T),L=xpt(z);for(var Z=2;Z<x;Z++)Y=arguments[Z],z[Z-2]=L?wpt(Y):+Y}for(pe=s+T-I,de=new u(pe);q<m;q++)de[q]=a[q];for(;q<m+T;q++)de[q]=z[q-m];for(;q<pe;q++)de[q]=a[q+I-T];return de},!Ppt)});var nce=w(()=>{"use strict";var Mpt=ke(),gD=Wt(),Opt=Rh(),kpt=Iw(),Rpt=gD.aTypedArray,Dpt=gD.getTypedArrayConstructor,Lpt=gD.exportTypedArrayMethod,Fpt=Mpt(kpt);Lpt("uniqueBy",function(t){return Rpt(this),Opt(Dpt(this),Fpt(this,t))},!0)});var ace=w(()=>{"use strict";uk()});var mS=w((Ijt,oce)=>{"use strict";var dS=ke(),pS=WeakMap.prototype;oce.exports={WeakMap,set:dS(pS.set),get:dS(pS.get),has:dS(pS.has),remove:dS(pS.delete)}});var yD=w((Cjt,sce)=>{"use strict";var zpt=mS().has;sce.exports=function(e){return zpt(e),e}});var uce=w(()=>{"use strict";var Npt=$(),Bpt=yD(),Upt=mS().remove;Npt({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Bpt(this),r=!0,a,u=0,s=arguments.length;u<s;u++)a=Upt(t,arguments[u]),r=r&&a;return!!r}})});var lce=w(()=>{"use strict";var jpt=$(),Vpt=jy();jpt({target:"WeakMap",stat:!0,forced:!0},{from:Vpt})});var cce=w(()=>{"use strict";var $pt=$(),Wpt=Vy();$pt({target:"WeakMap",stat:!0,forced:!0},{of:Wpt})});var fce=w(()=>{"use strict";var Gpt=$(),Kpt=yD(),_D=mS(),Zpt=_D.get,Hpt=_D.has,hce=_D.set;Gpt({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var a=Kpt(this),u,s;return Hpt(a,t)?(u=Zpt(a,t),"update"in r&&(u=r.update(u,t,a),hce(a,t,u)),u):(s=r.insert(t,a),hce(a,t,s),s)}})});var dce=w(()=>{"use strict";var Xpt=$(),Jpt=Qw();Xpt({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Jpt})});var vS=w((Bjt,pce)=>{"use strict";var xD=ke(),bD=WeakSet.prototype;pce.exports={WeakSet,add:xD(bD.add),has:xD(bD.has),remove:xD(bD.delete)}});var wD=w((Ujt,mce)=>{"use strict";var Ypt=vS().has;mce.exports=function(e){return Ypt(e),e}});var vce=w(()=>{"use strict";var Qpt=$(),emt=wD(),tmt=vS().add;Qpt({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=emt(this),r=0,a=arguments.length;r<a;r++)tmt(t,arguments[r]);return t}})});var gce=w(()=>{"use strict";var rmt=$(),imt=wD(),nmt=vS().remove;rmt({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=imt(this),r=!0,a,u=0,s=arguments.length;u<s;u++)a=nmt(t,arguments[u]),r=r&&a;return!!r}})});var yce=w(()=>{"use strict";var amt=$(),omt=jy();amt({target:"WeakSet",stat:!0,forced:!0},{from:omt})});var _ce=w(()=>{"use strict";var smt=$(),umt=Vy();smt({target:"WeakSet",stat:!0,forced:!0},{of:umt})});var SD=w((Xjt,wce)=>{"use strict";var xce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bce={};for(Hy=0;Hy<66;Hy++)bce[xce.charAt(Hy)]=Hy;var Hy;wce.exports={itoc:xce,ctoi:bce}});var Ice=w(()=>{"use strict";var lmt=$(),cmt=ct(),Ece=kt(),AD=ke(),hmt=Qe(),ED=ze(),fmt=Lt(),dmt=$t(),pmt=Co(),qD=SD().ctoi,Tce=/[^\d+/a-z]/i,mmt=/[\t\n\f\r ]+/g,vmt=/[=]{1,2}$/,Xy=Ece("atob"),gmt=String.fromCharCode,ymt=AD("".charAt),Sce=AD("".replace),_mt=AD(Tce.exec),TD=ED(function(){return Xy(" ")!==""}),ID=!ED(function(){Xy("a")}),qce=!TD&&!ID&&!ED(function(){Xy()}),Ace=!TD&&!ID&&Xy.length!==1;lmt({global:!0,bind:!0,enumerable:!0,forced:TD||ID||qce||Ace},{atob:function(t){if(pmt(arguments.length,1),qce||Ace)return hmt(Xy,cmt,t);var r=Sce(fmt(t),mmt,""),a="",u=0,s=0,m,x;if(r.length%4===0&&(r=Sce(r,vmt,"")),r.length%4===1||_mt(Tce,r))throw new(Ece("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;m=ymt(r,u++);)dmt(qD,m)&&(x=s%4?x*64+qD[m]:qD[m],s++%4&&(a+=gmt(255&x>>(-2*s&6))));return a}})});var Fce=w(()=>{"use strict";var xmt=$(),bmt=ct(),Rce=kt(),Dce=ke(),wmt=Qe(),Lce=ze(),Cce=Lt(),Smt=Co(),qmt=SD().itoc,Xh=Rce("btoa"),Pce=Dce("".charAt),Amt=Dce("".charCodeAt),Mce=!!Xh&&!Lce(function(){Xh()}),Oce=!!Xh&&Lce(function(){return Xh(null)!=="bnVsbA=="}),kce=!!Xh&&Xh.length!==1;xmt({global:!0,bind:!0,enumerable:!0,forced:Mce||Oce||kce},{btoa:function(t){if(Smt(arguments.length,1),Mce||Oce||kce)return wmt(Xh,bmt,Cce(t));for(var r=Cce(t),a="",u=0,s=qmt,m,x;Pce(r,u)||(s="=",u%1);){if(x=Amt(r,u+=3/4),x>255)throw new(Rce("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");m=m<<8|x,a+=Pce(s,63&m>>8-u%1*8)}return a}})});var CD=w((t6t,zce)=>{"use strict";zce.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var MD=w((r6t,Bce)=>{"use strict";var Emt=Ig(),PD=Emt("span").classList,Nce=PD&&PD.constructor&&PD.constructor.prototype;Bce.exports=Nce===Object.prototype?void 0:Nce});var $ce=w(()=>{"use strict";var Uce=ct(),jce=CD(),Tmt=MD(),OD=OC(),Imt=bi(),Vce=function(e){if(e&&e.forEach!==OD)try{Imt(e,"forEach",OD)}catch(t){e.forEach=OD}};for(gS in jce)jce[gS]&&Vce(Uce[gS]&&Uce[gS].prototype);var gS;Vce(Tmt)});var Xce=w(()=>{"use strict";var Wce=ct(),Kce=CD(),Cmt=MD(),Jy=Zg(),kD=bi(),Zce=Et(),RD=Zce("iterator"),Gce=Zce("toStringTag"),DD=Jy.values,Hce=function(e,t){if(e){if(e[RD]!==DD)try{kD(e,RD,DD)}catch(a){e[RD]=DD}if(e[Gce]||kD(e,Gce,t),Kce[t]){for(var r in Jy)if(e[r]!==Jy[r])try{kD(e,r,Jy[r])}catch(a){e[r]=Jy[r]}}}};for(yS in Kce)Hce(Wce[yS]&&Wce[yS].prototype,yS);var yS;Hce(Cmt,"DOMTokenList")});var LD=w((s6t,Jce)=>{"use strict";Jce.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var uhe=w(()=>{"use strict";var Pmt=$(),Mmt=Ek(),bS=kt(),jD=ze(),Omt=pi(),VD=ya(),wS=Or().f,kmt=yr(),_S=Gr(),xS=$t(),Rmt=kn(),Dmt=rt(),ehe=mC(),Yce=Ph(),Fp=LD(),Lmt=Ub(),the=dr(),$D=At(),rhe=Zt(),zp="DOMException",UD="DATA_CLONE_ERR",qS=bS("Error"),Vu=bS(zp)||function(){try{var e=bS("MessageChannel")||Mmt("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===UD&&t.code===25)return t.constructor}}(),Fmt=Vu&&Vu.prototype,ihe=qS.prototype,zmt=the.set,Nmt=the.getterFor(zp),Bmt="stack"in new qS(zp),nhe=function(e){return xS(Fp,e)&&Fp[e].m?Fp[e].c:0},WD=function(){Rmt(this,Qy);var t=arguments.length,r=Yce(t<1?void 0:arguments[0]),a=Yce(t<2?void 0:arguments[1],"Error"),u=nhe(a);if(zmt(this,{type:zp,name:a,message:r,code:u}),$D||(this.name=a,this.message=r,this.code=u),Bmt){var s=new qS(r);s.name=zp,wS(this,"stack",VD(1,Lmt(s.stack,1)))}},Qy=WD.prototype=Omt(ihe),ahe=function(e){return{enumerable:!0,configurable:!0,get:e}},FD=function(e){return ahe(function(){return Nmt(this)[e]})};$D&&(_S(Qy,"code",FD("code")),_S(Qy,"message",FD("message")),_S(Qy,"name",FD("name")));wS(Qy,"constructor",VD(1,WD));var AS=jD(function(){return!(new Vu instanceof qS)}),ohe=AS||jD(function(){return ihe.toString!==ehe||String(new Vu(1,2))!=="2: 1"}),she=AS||jD(function(){return new Vu(1,"DataCloneError").code!==25}),Umt=AS||Vu[UD]!==25||Fmt[UD]!==25,Qce=rhe?ohe||she||Umt:AS;Pmt({global:!0,constructor:!0,forced:Qce},{DOMException:Qce?WD:Vu});var e_=bS(zp),SS=e_.prototype;ohe&&(rhe||Vu===e_)&&kmt(SS,"toString",ehe);she&&$D&&Vu===e_&&_S(SS,"code",ahe(function(){return nhe(Dmt(this).name)}));for(zD in Fp)xS(Fp,zD)&&(ND=Fp[zD],Yy=ND.s,BD=VD(6,ND.c),xS(e_,Yy)||wS(e_,Yy,BD),xS(SS,Yy)||wS(SS,Yy,BD));var ND,Yy,BD,zD});var mhe=w(()=>{"use strict";var jmt=$(),Vmt=ct(),QD=kt(),JD=ya(),YD=Or().f,lhe=$t(),$mt=kn(),Wmt=Ch(),che=Ph(),GD=LD(),Gmt=Ub(),Kmt=At(),dhe=Zt(),r_="DOMException",phe=QD("Error"),i_=QD(r_),eL=function(){$mt(this,Zmt);var t=arguments.length,r=che(t<1?void 0:arguments[0]),a=che(t<2?void 0:arguments[1],"Error"),u=new i_(r,a),s=new phe(r);return s.name=r_,YD(u,"stack",JD(1,Gmt(s.stack,1))),Wmt(u,this,eL),u},Zmt=eL.prototype=i_.prototype,Hmt="stack"in new phe(r_),Xmt="stack"in new i_(1,2),KD=i_&&Kmt&&Object.getOwnPropertyDescriptor(Vmt,r_),Jmt=!!KD&&!(KD.writable&&KD.configurable),hhe=Hmt&&!Jmt&&!Xmt;jmt({global:!0,constructor:!0,forced:dhe||hhe},{DOMException:hhe?eL:i_});var t_=QD(r_),fhe=t_.prototype;if(fhe.constructor!==t_){dhe||YD(fhe,"constructor",JD(1,t_));for(ZD in GD)lhe(GD,ZD)&&(HD=GD[ZD],XD=HD.s,lhe(t_,XD)||YD(t_,XD,JD(6,HD.c)))}var HD,XD,ZD});var ghe=w(()=>{"use strict";var Ymt=kt(),Qmt=ba(),vhe="DOMException";Qmt(Ymt(vhe),vhe)});var _he=w(()=>{"use strict";var evt=$(),tvt=ct(),yhe=fy().clear;evt({global:!0,bind:!0,enumerable:!0,forced:tvt.clearImmediate!==yhe},{clearImmediate:yhe})});var bhe=w((v6t,xhe)=>{"use strict";xhe.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"});var ES=w((g6t,She)=>{"use strict";var whe=ct(),rvt=On(),ivt=zt(),nvt=bhe(),avt=Cs(),ovt=Cu(),svt=Co(),uvt=whe.Function,lvt=/MSIE .\./.test(avt)||nvt&&function(){var e=whe.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();She.exports=function(e,t){var r=t?2:1;return lvt?function(a,u){var s=svt(arguments.length,1)>r,m=ivt(a)?a:uvt(a),x=s?ovt(arguments,r):[],q=s?function(){rvt(m,this,x)}:m;return t?e(q,u):e(q)}:e}});var The=w(()=>{"use strict";var cvt=$(),Ehe=ct(),qhe=fy().set,hvt=ES(),Ahe=Ehe.setImmediate?hvt(qhe,!1):qhe;cvt({global:!0,bind:!0,enumerable:!0,forced:Ehe.setImmediate!==Ahe},{setImmediate:Ahe})});var Ihe=w(()=>{"use strict";_he();The()});var Che=w(()=>{"use strict";var fvt=$(),dvt=ct(),pvt=qM(),mvt=Rt(),vvt=Co(),gvt=ks(),yvt=dvt.process;fvt({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(t){vvt(arguments.length,1),mvt(t);var r=gvt&&yvt.domain;pvt(r?r.bind(t):t)}})});var Mhe=w(()=>{"use strict";var _vt=$(),qc=ct(),xvt=Gr(),bvt=At(),wvt=TypeError,Svt=Object.defineProperty,Phe=qc.self!==qc;try{bvt?(TS=Object.getOwnPropertyDescriptor(qc,"self"),(Phe||!TS||!TS.get||!TS.enumerable)&&xvt(qc,"self",{get:function(){return qc},set:function(t){if(this!==qc)throw new wvt("Illegal invocation");Svt(qc,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):_vt({global:!0,simple:!0,forced:Phe},{self:qc})}catch(e){}var TS});var Khe=w(()=>{"use strict";var qvt=Zt(),Avt=$(),oi=ct(),oL=kt(),s_=ke(),sL=ze(),Evt=rc(),CS=zt(),Tvt=ns(),Ivt=xi(),PS=Nt(),Cvt=Au(),Pvt=ai(),Dhe=rt(),a_=xa(),Lhe=$t(),Mvt=So(),tL=bi(),Jh=Yt(),Ovt=Co(),kvt=mp(),MS=Xn(),Fhe=Rn(),Ohe=kw(),zhe=hC(),Nhe=Cw(),n_=oi.Object,Rvt=oi.Array,Bhe=oi.Date,u_=oi.Error,Dvt=oi.EvalError,Lvt=oi.RangeError,Fvt=oi.ReferenceError,zvt=oi.SyntaxError,Uhe=oi.TypeError,Nvt=oi.URIError,Bvt=oi.PerformanceMark,Bp=oi.WebAssembly,Uvt=Bp&&Bp.CompileError||u_,jvt=Bp&&Bp.LinkError||u_,Vvt=Bp&&Bp.RuntimeError||u_,Ec=oL("DOMException"),o_=MS.Map,l_=MS.has,uL=MS.get,Yh=MS.set,jhe=Fhe.Set,Vhe=Fhe.add,$he=oL("Object","keys"),khe=s_([].push),$vt=s_((!0).valueOf),Wvt=s_(1 .valueOf),Gvt=s_("".valueOf),Kvt=s_(Bhe.prototype.getTime),nL=Evt("structuredClone"),Up="DataCloneError",IS="Transferring",Whe=function(e){return!sL(function(){var t=new oi.Set([7]),r=e(t),a=e(n_(7));return r===t||!r.has(7)||typeof a!="object"||+a!=7})&&e},Rhe=function(e,t){return!sL(function(){var r=new t,a=e({a:r,b:r});return!(a&&a.a===a.b&&a.a instanceof t&&a.a.stack===r.stack)})},Zvt=function(e){return!sL(function(){var t=e(new oi.AggregateError([1],nL,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==nL||t.cause!==3})},Np=oi.structuredClone,Hvt=qvt||!Rhe(Np,u_)||!Rhe(Np,Ec)||!Zvt(Np),Xvt=!Np&&Whe(function(e){return new Bvt(nL,{detail:e}).detail}),Ac=Whe(Np)||Xvt,rL=function(e){throw new Ec("Uncloneable type: "+e,Up)},Ea=function(e,t){throw new Ec((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",Up)},iL=function(e,t){return Ac||Ea(t),Ac(e)},Jvt=function(){var e;try{e=new oi.DataTransfer}catch(t){try{e=new oi.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},lL=function(e,t,r){if(l_(t,e))return uL(t,e);var a=r||a_(e),u,s,m,x,q,T;if(a==="SharedArrayBuffer")Ac?u=Ac(e):u=e;else{var I=oi.DataView;!I&&typeof e.slice!="function"&&Ea("ArrayBuffer");try{if(typeof e.slice=="function"&&!e.resizable)u=e.slice(0);else for(s=e.byteLength,m=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,u=new ArrayBuffer(s,m),x=new I(e),q=new I(u),T=0;T<s;T++)q.setUint8(T,x.getUint8(T))}catch(L){throw new Ec("ArrayBuffer is detached",Up)}}return Yh(t,e,u),u},Ghe=function(e,t,r,a,u){var s=oi[t];return PS(s)||Ea(t),new s(lL(e.buffer,u),r,a)},aL=function(e,t,r){this.object=e,this.type=t,this.metadata=r},Yn=function(e,t,r){if(Cvt(e)&&rL("Symbol"),!PS(e))return e;if(t){if(l_(t,e))return uL(t,e)}else t=new o_;var a=a_(e),u,s,m,x,q,T,I,L;switch(a){case"Array":m=Rvt(Jh(e));break;case"Object":m={};break;case"Map":m=new o_;break;case"Set":m=new jhe;break;case"RegExp":m=new RegExp(e.source,kvt(e));break;case"Error":switch(s=e.name,s){case"AggregateError":m=new(oL("AggregateError"))([]);break;case"EvalError":m=new Dvt;break;case"RangeError":m=new Lvt;break;case"ReferenceError":m=new Fvt;break;case"SyntaxError":m=new zvt;break;case"TypeError":m=new Uhe;break;case"URIError":m=new Nvt;break;case"CompileError":m=new Uvt;break;case"LinkError":m=new jvt;break;case"RuntimeError":m=new Vvt;break;default:m=new u_;}break;case"DOMException":m=new Ec(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":m=r?new aL(e,a):lL(e,t,a);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":T=a==="DataView"?e.byteLength:e.length,m=r?new aL(e,a,{offset:e.byteOffset,length:T}):Ghe(e,a,e.byteOffset,T,t);break;case"DOMQuad":try{m=new DOMQuad(Yn(e.p1,t,r),Yn(e.p2,t,r),Yn(e.p3,t,r),Yn(e.p4,t,r))}catch(z){m=iL(e,a)}break;case"File":if(Ac)try{m=Ac(e),a_(m)!==a&&(m=void 0)}catch(z){}if(!m)try{m=new File([e],e.name,e)}catch(z){}m||Ea(a);break;case"FileList":if(x=Jvt(),x){for(q=0,T=Jh(e);q<T;q++)x.items.add(Yn(e[q],t,r));m=x.files}else m=iL(e,a);break;case"ImageData":try{m=new ImageData(Yn(e.data,t,r),e.width,e.height,{colorSpace:e.colorSpace})}catch(z){m=iL(e,a)}break;default:if(Ac)m=Ac(e);else switch(a){case"BigInt":m=n_(e.valueOf());break;case"Boolean":m=n_($vt(e));break;case"Number":m=n_(Wvt(e));break;case"String":m=n_(Gvt(e));break;case"Date":m=new Bhe(Kvt(e));break;case"Blob":try{m=e.slice(0,e.size,e.type)}catch(z){Ea(a)}break;case"DOMPoint":case"DOMPointReadOnly":u=oi[a];try{m=u.fromPoint?u.fromPoint(e):new u(e.x,e.y,e.z,e.w)}catch(z){Ea(a)}break;case"DOMRect":case"DOMRectReadOnly":u=oi[a];try{m=u.fromRect?u.fromRect(e):new u(e.x,e.y,e.width,e.height)}catch(z){Ea(a)}break;case"DOMMatrix":case"DOMMatrixReadOnly":u=oi[a];try{m=u.fromMatrix?u.fromMatrix(e):new u(e)}catch(z){Ea(a)}break;case"AudioData":case"VideoFrame":CS(e.clone)||Ea(a);try{m=e.clone()}catch(z){rL(a)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Ea(a);default:rL(a);}}switch(Yh(t,e,m),a){case"Array":case"Object":for(I=$he(e),q=0,T=Jh(I);q<T;q++)L=I[q],Mvt(m,L,Yn(e[L],t,r));break;case"Map":e.forEach(function(z,Y){Yh(m,Yn(Y,t,r),Yn(z,t,r))});break;case"Set":e.forEach(function(z){Vhe(m,Yn(z,t,r))});break;case"Error":tL(m,"message",Yn(e.message,t,r)),Lhe(e,"cause")&&tL(m,"cause",Yn(e.cause,t,r)),s==="AggregateError"&&(m.errors=Yn(e.errors,t,r));case"DOMException":zhe&&tL(m,"stack",Yn(e.stack,t,r));}return m},$u=function(e,t){if(!PS(e))return e;if(l_(t,e))return uL(t,e);var r,a,u,s,m,x,q,T;if(e instanceof aL)switch(r=e.type,a=e.object,r){case"ArrayBuffer":case"SharedArrayBuffer":T=lL(a,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":u=e.metadata,T=Ghe(a,r,u.offset,u.length,t);}else switch(a_(e)){case"Array":case"Object":for(x=$he(e),s=0,m=Jh(x);s<m;s++)q=x[s],e[q]=$u(e[q],t);break;case"Map":T=new o_,e.forEach(function(I,L){Yh(T,$u(L,t),$u(I,t))});break;case"Set":T=new jhe,e.forEach(function(I){Vhe(T,$u(I,t))});break;case"Error":e.message=$u(e.message,t),Lhe(e,"cause")&&(e.cause=$u(e.cause,t)),e.name==="AggregateError"&&(e.errors=$u(e.errors,t));case"DOMException":zhe&&(e.stack=$u(e.stack,t));}return Yh(t,e,T||e),T||e},Yvt=function(e,t){if(!PS(e))throw new Uhe("Transfer option cannot be converted to a sequence");var r=[];Pvt(e,function(z){khe(r,Dhe(z))});for(var a=0,u=Jh(r),s=[],m,x,q,T,I,L;a<u;){if(m=r[a++],x=a_(m),x==="ArrayBuffer"){khe(s,m);continue}if(l_(t,m))throw new Ec("Duplicate transferable",Up);if(Nhe)T=Np(m,{transfer:[m]});else switch(x){case"ImageBitmap":q=oi.OffscreenCanvas,Tvt(q)||Ea(x,IS);try{I=new q(m.width,m.height),L=I.getContext("bitmaprenderer"),L.transferFromImageBitmap(m),T=I.transferToImageBitmap()}catch(z){}break;case"AudioData":case"VideoFrame":(!CS(m.clone)||!CS(m.close))&&Ea(x,IS);try{T=m.clone(),m.close()}catch(z){}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":Ea(x,IS);}if(T===void 0)throw new Ec("This object cannot be transferred: "+x,Up);Yh(t,m,T)}return s},Qvt=function(e,t){for(var r=0,a=Jh(e),u,s;r<a;){if(u=e[r++],l_(t,u))throw new Ec("Duplicate transferable",Up);Ohe?s=Ohe(u,void 0,!0):(CS(u.transfer)||Ea("ArrayBuffer",IS),s=u.transfer()),Yh(t,u,s)}};Avt({global:!0,enumerable:!0,sham:!Nhe,forced:Hvt},{structuredClone:function(t){var r=Ovt(arguments.length,1)>1&&!Ivt(arguments[1])?Dhe(arguments[1]):void 0,a=r?r.transfer:void 0,u=!1,s,m;a!==void 0&&(s=new o_,m=Yvt(a,s),u=!!Jh(m));var x=Yn(t,s,u);return u&&(s=new o_,Qvt(a,s),x=$u(x,s)),x}})});var Xhe=w(()=>{"use strict";var egt=$(),Hhe=ct(),tgt=ES(),Zhe=tgt(Hhe.setInterval,!0);egt({global:!0,bind:!0,forced:Hhe.setInterval!==Zhe},{setInterval:Zhe})});var Qhe=w(()=>{"use strict";var rgt=$(),Yhe=ct(),igt=ES(),Jhe=igt(Yhe.setTimeout,!0);rgt({global:!0,bind:!0,forced:Yhe.setTimeout!==Jhe},{setTimeout:Jhe})});var efe=w(()=>{"use strict";Xhe();Qhe()});var OS=w((R6t,rfe)=>{"use strict";var ngt=ze(),agt=Et(),ogt=At(),tfe=Zt(),sgt=agt("iterator");rfe.exports=!ngt(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),a="";return e.pathname="c%20d",t.forEach(function(u,s){t.delete("b"),a+=s+u}),r.delete("a",2),r.delete("b",void 0),tfe&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(tfe||!ogt)||!t.sort||e.href!=="http://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[sgt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||a!=="a1c3"||new URL("http://x",void 0).host!=="x"})});var hfe=w((D6t,cfe)=>{"use strict";var Qh=ke(),cL=2147483647,c_=36,sfe=1,dL=26,ugt=38,lgt=700,cgt=72,hgt=128,fgt="-",dgt=/[^\0-\u007E]/,ufe=/[.\u3002\uFF0E\uFF61]/g,ife="Overflow: input needs wider integers to process",hL=c_-sfe,nfe=RangeError,pgt=Qh(ufe.exec),jp=Math.floor,fL=String.fromCharCode,afe=Qh("".charCodeAt),lfe=Qh([].join),Tc=Qh([].push),mgt=Qh("".replace),vgt=Qh("".split),ggt=Qh("".toLowerCase),ygt=function(e){for(var t=[],r=0,a=e.length;r<a;){var u=afe(e,r++);if(u>=55296&&u<=56319&&r<a){var s=afe(e,r++);(s&64512)===56320?Tc(t,((u&1023)<<10)+(s&1023)+65536):(Tc(t,u),r--)}else Tc(t,u)}return t},ofe=function(e){return e+22+75*(e<26)},_gt=function(e,t,r){var a=0;for(e=r?jp(e/lgt):e>>1,e+=jp(e/t);e>hL*dL>>1;)e=jp(e/hL),a+=c_;return jp(a+(hL+1)*e/(e+ugt))},xgt=function(e){var t=[];e=ygt(e);var r=e.length,a=hgt,u=0,s=cgt,m,x;for(m=0;m<e.length;m++)x=e[m],x<128&&Tc(t,fL(x));var q=t.length,T=q;for(q&&Tc(t,fgt);T<r;){var I=cL;for(m=0;m<e.length;m++)x=e[m],x>=a&&x<I&&(I=x);var L=T+1;if(I-a>jp((cL-u)/L))throw new nfe(ife);for(u+=(I-a)*L,a=I,m=0;m<e.length;m++){if(x=e[m],x<a&&++u>cL)throw new nfe(ife);if(x===a){for(var z=u,Y=c_;;){var pe=Y<=s?sfe:Y>=s+dL?dL:Y-s;if(z<pe)break;var de=z-pe,Z=c_-pe;Tc(t,fL(ofe(pe+de%Z))),z=jp(de/Z),Y+=c_}Tc(t,fL(ofe(z))),s=_gt(u,L,T===q),u=0,T++}}u++,a++}return lfe(t,"")};cfe.exports=function(e){var t=[],r=vgt(mgt(ggt(e),ufe,"."),"."),a,u;for(a=0;a<r.length;a++)u=r[a],Tc(t,pgt(dgt,u)?"xn--"+xgt(u):u);return lfe(t,".")}});var SL=w((L6t,Mfe)=>{"use strict";Zg();var yL=$(),Wp=ct(),kS=Qe(),js=ke(),$p=At(),Sfe=OS(),qfe=yr(),bgt=Gr(),wgt=To(),Sgt=ba(),qgt=sc(),bL=dr(),Afe=kn(),pL=zt(),Agt=$t(),Egt=qr(),Tgt=xa(),Igt=rt(),Efe=Nt(),Qn=Lt(),Cgt=pi(),ffe=ya(),_L=ac(),Pgt=Mu(),Vp=Co(),Mgt=Et(),Ogt=i1(),kgt=Mgt("iterator"),f_="URLSearchParams",Tfe=f_+"Iterator",Ife=bL.set,Mo=bL.getterFor(f_),Rgt=bL.getterFor(Tfe),Dgt=Object.getOwnPropertyDescriptor,wL=function(e){if(!$p)return Wp[e];var t=Dgt(Wp,e);return t&&t.value},dfe=wL("fetch"),DS=wL("Request"),h_=wL("Headers"),mL=DS&&DS.prototype,pfe=h_&&h_.prototype,Lgt=Wp.RegExp,Fgt=Wp.TypeError,Cfe=Wp.decodeURIComponent,zgt=Wp.encodeURIComponent,Ngt=js("".charAt),mfe=js([].join),ef=js([].push),xL=js("".replace),Bgt=js([].shift),vfe=js([].splice),gfe=js("".split),Ugt=js("".slice),jgt=/\+/g,yfe=Array(4),Vgt=function(e){return yfe[e-1]||(yfe[e-1]=Lgt("((?:%[\\da-f]{2}){"+e+"})","gi"))},$gt=function(e){try{return Cfe(e)}catch(t){return e}},_fe=function(e){var t=xL(e,jgt," "),r=4;try{return Cfe(t)}catch(a){for(;r;)t=xL(t,Vgt(r--),$gt);return t}},Wgt=/[!'()~]|%20/g,Ggt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Kgt=function(e){return Ggt[e]},xfe=function(e){return xL(zgt(e),Wgt,Kgt)},vL=qgt(function(t,r){Ife(this,{type:Tfe,iterator:_L(Mo(t).entries),kind:r})},"Iterator",function(){var t=Rgt(this),r=t.kind,a=t.iterator.next(),u=a.value;return a.done||(a.value=r==="keys"?u.key:r==="values"?u.value:[u.key,u.value]),a},!0),Pfe=function(e){this.entries=[],this.url=null,e!==void 0&&(Efe(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?Ngt(e,0)==="?"?Ugt(e,1):e:Qn(e)))};Pfe.prototype={type:f_,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=Pgt(e),r,a,u,s,m,x,q;if(t)for(r=_L(e,t),a=r.next;!(u=kS(a,r)).done;){if(s=_L(Igt(u.value)),m=s.next,(x=kS(m,s)).done||(q=kS(m,s)).done||!kS(m,s).done)throw new Fgt("Expected sequence with length 2");ef(this.entries,{key:Qn(x.value),value:Qn(q.value)})}else for(var T in e)Agt(e,T)&&ef(this.entries,{key:T,value:Qn(e[T])})},parseQuery:function(e){if(e)for(var t=gfe(e,"&"),r=0,a,u;r<t.length;)a=t[r++],a.length&&(u=gfe(a,"="),ef(this.entries,{key:_fe(Bgt(u)),value:_fe(mfe(u,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,a;r<e.length;)a=e[r++],ef(t,xfe(a.key)+"="+xfe(a.value));return mfe(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var LS=function(){Afe(this,Gp);var t=arguments.length>0?arguments[0]:void 0,r=Ife(this,new Pfe(t));$p||(this.size=r.entries.length)},Gp=LS.prototype;wgt(Gp,{append:function(t,r){var a=Mo(this);Vp(arguments.length,2),ef(a.entries,{key:Qn(t),value:Qn(r)}),$p||this.length++,a.updateURL()},delete:function(e){for(var t=Mo(this),r=Vp(arguments.length,1),a=t.entries,u=Qn(e),s=r<2?void 0:arguments[1],m=s===void 0?s:Qn(s),x=0;x<a.length;){var q=a[x];if(q.key===u&&(m===void 0||q.value===m)){if(vfe(a,x,1),m!==void 0)break}else x++}$p||(this.size=a.length),t.updateURL()},get:function(t){var r=Mo(this).entries;Vp(arguments.length,1);for(var a=Qn(t),u=0;u<r.length;u++)if(r[u].key===a)return r[u].value;return null},getAll:function(t){var r=Mo(this).entries;Vp(arguments.length,1);for(var a=Qn(t),u=[],s=0;s<r.length;s++)r[s].key===a&&ef(u,r[s].value);return u},has:function(t){for(var r=Mo(this).entries,a=Vp(arguments.length,1),u=Qn(t),s=a<2?void 0:arguments[1],m=s===void 0?s:Qn(s),x=0;x<r.length;){var q=r[x++];if(q.key===u&&(m===void 0||q.value===m))return!0}return!1},set:function(t,r){var a=Mo(this);Vp(arguments.length,1);for(var u=a.entries,s=!1,m=Qn(t),x=Qn(r),q=0,T;q<u.length;q++)T=u[q],T.key===m&&(s?vfe(u,q--,1):(s=!0,T.value=x));s||ef(u,{key:m,value:x}),$p||(this.size=u.length),a.updateURL()},sort:function(){var t=Mo(this);Ogt(t.entries,function(r,a){return r.key>a.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=Mo(this).entries,a=Egt(t,arguments.length>1?arguments[1]:void 0),u=0,s;u<r.length;)s=r[u++],a(s.value,s.key,this)},keys:function(){return new vL(this,"keys")},values:function(){return new vL(this,"values")},entries:function(){return new vL(this,"entries")}},{enumerable:!0});qfe(Gp,kgt,Gp.entries,{name:"entries"});qfe(Gp,"toString",function(){return Mo(this).serialize()},{enumerable:!0});$p&&bgt(Gp,"size",{get:function(){return Mo(this).entries.length},configurable:!0,enumerable:!0});Sgt(LS,f_);yL({global:!0,constructor:!0,forced:!Sfe},{URLSearchParams:LS});!Sfe&&pL(h_)&&(bfe=js(pfe.has),wfe=js(pfe.set),gL=function(e){if(Efe(e)){var t=e.body,r;if(Tgt(t)===f_)return r=e.headers?new h_(e.headers):new h_,bfe(r,"content-type")||wfe(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Cgt(e,{body:ffe(0,Qn(t)),headers:ffe(0,r)})}return e},pL(dfe)&&yL({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return dfe(t,arguments.length>1?gL(arguments[1]):{})}}),pL(DS)&&(RS=function(t){return Afe(this,mL),new DS(t,arguments.length>1?gL(arguments[1]):{})},mL.constructor=RS,RS.prototype=mL,yL({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:RS})));var bfe,wfe,gL,RS;Mfe.exports={URLSearchParams:LS,getState:Mo}});var Hfe=w(()=>{"use strict";lO();var Zgt=$(),BL=At(),Hgt=OS(),UL=ct(),Ofe=qr(),Lo=ke(),US=yr(),Oo=Gr(),Xgt=kn(),FL=$t(),jL=eM(),Kp=kC(),os=Ah(),Jgt=Wh().codeAt,Ygt=hfe(),Gu=Lt(),Qgt=ba(),eyt=Co(),Vfe=SL(),$fe=dr(),tyt=$fe.set,jS=$fe.getterFor("URL"),ryt=Vfe.URLSearchParams,iyt=Vfe.getState,d_=UL.URL,zL=UL.TypeError,VS=UL.parseInt,nyt=Math.floor,kfe=Math.pow,Do=Lo("".charAt),ss=Lo(/./.exec),m_=Lo([].join),ayt=Lo(1 .toString),oyt=Lo([].pop),Hp=Lo([].push),qL=Lo("".replace),syt=Lo([].shift),uyt=Lo("".split),g_=Lo("".slice),$S=Lo("".toLowerCase),lyt=Lo([].unshift),cyt="Invalid authority",AL="Invalid scheme",tf="Invalid host",Rfe="Invalid port",Wfe=/[a-z]/i,hyt=/[\d+-.a-z]/i,NL=/\d/,fyt=/^0x/i,dyt=/^[0-7]+$/,pyt=/^\d+$/,Gfe=/^[\da-f]+$/i,myt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,vyt=/[\0\t\n\r #/:<>?@[\\\]^|]/,gyt=/^[\u0000-\u0020]+/,yyt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,_yt=/[\t\n\r]/g,ko,xyt=function(e){var t=uyt(e,"."),r,a,u,s,m,x,q;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(a=[],u=0;u<r;u++){if(s=t[u],s==="")return e;if(m=10,s.length>1&&Do(s,0)==="0"&&(m=ss(fyt,s)?16:8,s=g_(s,m===8?1:2)),s==="")x=0;else{if(!ss(m===10?pyt:m===8?dyt:Gfe,s))return e;x=VS(s,m)}Hp(a,x)}for(u=0;u<r;u++)if(x=a[u],u===r-1){if(x>=kfe(256,5-r))return null}else if(x>255)return null;for(q=oyt(a),u=0;u<a.length;u++)q+=a[u]*kfe(256,3-u);return q},byt=function(e){var t=[0,0,0,0,0,0,0,0],r=0,a=null,u=0,s,m,x,q,T,I,L,z=function(){return Do(e,u)};if(z()===":"){if(Do(e,1)!==":")return;u+=2,r++,a=r}for(;z();){if(r===8)return;if(z()===":"){if(a!==null)return;u++,r++,a=r;continue}for(s=m=0;m<4&&ss(Gfe,z());)s=s*16+VS(z(),16),u++,m++;if(z()==="."){if(m===0||(u-=m,r>6))return;for(x=0;z();){if(q=null,x>0)if(z()==="."&&x<4)u++;else return;if(!ss(NL,z()))return;for(;ss(NL,z());){if(T=VS(z(),10),q===null)q=T;else{if(q===0)return;q=q*10+T}if(q>255)return;u++}t[r]=t[r]*256+q,x++,(x===2||x===4)&&r++}if(x!==4)return;break}else if(z()===":"){if(u++,!z())return}else if(z())return;t[r++]=s}if(a!==null)for(I=r-a,r=7;r!==0&&I>0;)L=t[r],t[r--]=t[a+I-1],t[a+--I]=L;else if(r!==8)return;return t},wyt=function(e){for(var t=null,r=1,a=null,u=0,s=0;s<8;s++)e[s]!==0?(u>r&&(t=a,r=u),a=null,u=0):(a===null&&(a=s),++u);return u>r&&(t=a,r=u),t},p_=function(e){var t,r,a,u;if(typeof e=="number"){for(t=[],r=0;r<4;r++)lyt(t,e%256),e=nyt(e/256);return m_(t,".")}else if(typeof e=="object"){for(t="",a=wyt(e),r=0;r<8;r++)u&&e[r]===0||(u&&(u=!1),a===r?(t+=r?":":"::",u=!0):(t+=ayt(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},BS={},Kfe=jL({},BS,{" ":1,"\"":1,"<":1,">":1,"`":1}),Zfe=jL({},Kfe,{"#":1,"?":1,"{":1,"}":1}),EL=jL({},Zfe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ic=function(e,t){var r=Jgt(e,0);return r>32&&r<127&&!FL(t,e)?e:encodeURIComponent(e)},FS={ftp:21,file:null,http:80,https:443,ws:80,wss:443},v_=function(e,t){var r;return e.length===2&&ss(Wfe,Do(e,0))&&((r=Do(e,1))===":"||!t&&r==="|")},Dfe=function(e){var t;return e.length>1&&v_(g_(e,0,2))&&(e.length===2||(t=Do(e,2))==="/"||t==="\\"||t==="?"||t==="#")},Syt=function(e){return e==="."||$S(e)==="%2e"},qyt=function(e){return e=$S(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},TL={},Lfe={},IL={},Ffe={},zfe={},CL={},Nfe={},Bfe={},zS={},NS={},PL={},ML={},OL={},kL={},Ufe={},RL={},Zp={},Vs={},jfe={},rf={},Wu={},VL=function(e,t,r){var a=Gu(e),u,s,m;if(t){if(s=this.parse(a),s)throw new zL(s);this.searchParams=null}else{if(r!==void 0&&(u=new VL(r,!0)),s=this.parse(a,null,u),s)throw new zL(s);m=iyt(new ryt),m.bindURL(this),this.searchParams=m}};VL.prototype={type:"URL",parse:function(e,t,r){var a=this,u=t||TL,s=0,m="",x=!1,q=!1,T=!1,I,L,z,Y;for(e=Gu(e),t||(a.scheme="",a.username="",a.password="",a.host=null,a.port=null,a.path=[],a.query=null,a.fragment=null,a.cannotBeABaseURL=!1,e=qL(e,gyt,""),e=qL(e,yyt,"$1")),e=qL(e,_yt,""),I=Kp(e);s<=I.length;){switch(L=I[s],u){case TL:if(L&&ss(Wfe,L))m+=$S(L),u=Lfe;else{if(t)return AL;u=IL;continue}break;case Lfe:if(L&&(ss(hyt,L)||L==="+"||L==="-"||L==="."))m+=$S(L);else if(L===":"){if(t&&(a.isSpecial()!==FL(FS,m)||m==="file"&&(a.includesCredentials()||a.port!==null)||a.scheme==="file"&&!a.host))return;if(a.scheme=m,t){a.isSpecial()&&FS[a.scheme]===a.port&&(a.port=null);return}m="",a.scheme==="file"?u=kL:a.isSpecial()&&r&&r.scheme===a.scheme?u=Ffe:a.isSpecial()?u=Bfe:I[s+1]==="/"?(u=zfe,s++):(a.cannotBeABaseURL=!0,Hp(a.path,""),u=jfe)}else{if(t)return AL;m="",u=IL,s=0;continue}break;case IL:if(!r||r.cannotBeABaseURL&&L!=="#")return AL;if(r.cannotBeABaseURL&&L==="#"){a.scheme=r.scheme,a.path=os(r.path),a.query=r.query,a.fragment="",a.cannotBeABaseURL=!0,u=Wu;break}u=r.scheme==="file"?kL:CL;continue;case Ffe:if(L==="/"&&I[s+1]==="/")u=zS,s++;else{u=CL;continue}break;case zfe:if(L==="/"){u=NS;break}else{u=Vs;continue}case CL:if(a.scheme=r.scheme,L===ko)a.username=r.username,a.password=r.password,a.host=r.host,a.port=r.port,a.path=os(r.path),a.query=r.query;else if(L==="/"||L==="\\"&&a.isSpecial())u=Nfe;else if(L==="?")a.username=r.username,a.password=r.password,a.host=r.host,a.port=r.port,a.path=os(r.path),a.query="",u=rf;else if(L==="#")a.username=r.username,a.password=r.password,a.host=r.host,a.port=r.port,a.path=os(r.path),a.query=r.query,a.fragment="",u=Wu;else{a.username=r.username,a.password=r.password,a.host=r.host,a.port=r.port,a.path=os(r.path),a.path.length--,u=Vs;continue}break;case Nfe:if(a.isSpecial()&&(L==="/"||L==="\\"))u=zS;else if(L==="/")u=NS;else{a.username=r.username,a.password=r.password,a.host=r.host,a.port=r.port,u=Vs;continue}break;case Bfe:if(u=zS,L!=="/"||Do(m,s+1)!=="/")continue;s++;break;case zS:if(L!=="/"&&L!=="\\"){u=NS;continue}break;case NS:if(L==="@"){x&&(m="%40"+m),x=!0,z=Kp(m);for(var pe=0;pe<z.length;pe++){var de=z[pe];if(de===":"&&!T){T=!0;continue}var Z=Ic(de,EL);T?a.password+=Z:a.username+=Z}m=""}else if(L===ko||L==="/"||L==="?"||L==="#"||L==="\\"&&a.isSpecial()){if(x&&m==="")return cyt;s-=Kp(m).length+1,m="",u=PL}else m+=L;break;case PL:case ML:if(t&&a.scheme==="file"){u=RL;continue}else if(L===":"&&!q){if(m==="")return tf;if(Y=a.parseHost(m),Y)return Y;if(m="",u=OL,t===ML)return}else if(L===ko||L==="/"||L==="?"||L==="#"||L==="\\"&&a.isSpecial()){if(a.isSpecial()&&m==="")return tf;if(t&&m===""&&(a.includesCredentials()||a.port!==null))return;if(Y=a.parseHost(m),Y)return Y;if(m="",u=Zp,t)return;continue}else L==="["?q=!0:L==="]"&&(q=!1),m+=L;break;case OL:if(ss(NL,L))m+=L;else if(L===ko||L==="/"||L==="?"||L==="#"||L==="\\"&&a.isSpecial()||t){if(m!==""){var H=VS(m,10);if(H>65535)return Rfe;a.port=a.isSpecial()&&H===FS[a.scheme]?null:H,m=""}if(t)return;u=Zp;continue}else return Rfe;break;case kL:if(a.scheme="file",L==="/"||L==="\\")u=Ufe;else if(r&&r.scheme==="file")switch(L){case ko:a.host=r.host,a.path=os(r.path),a.query=r.query;break;case"?":a.host=r.host,a.path=os(r.path),a.query="",u=rf;break;case"#":a.host=r.host,a.path=os(r.path),a.query=r.query,a.fragment="",u=Wu;break;default:Dfe(m_(os(I,s),""))||(a.host=r.host,a.path=os(r.path),a.shortenPath()),u=Vs;continue;}else{u=Vs;continue}break;case Ufe:if(L==="/"||L==="\\"){u=RL;break}r&&r.scheme==="file"&&!Dfe(m_(os(I,s),""))&&(v_(r.path[0],!0)?Hp(a.path,r.path[0]):a.host=r.host),u=Vs;continue;case RL:if(L===ko||L==="/"||L==="\\"||L==="?"||L==="#"){if(!t&&v_(m))u=Vs;else if(m===""){if(a.host="",t)return;u=Zp}else{if(Y=a.parseHost(m),Y)return Y;if(a.host==="localhost"&&(a.host=""),t)return;m="",u=Zp}continue}else m+=L;break;case Zp:if(a.isSpecial()){if(u=Vs,L!=="/"&&L!=="\\")continue}else if(!t&&L==="?")a.query="",u=rf;else if(!t&&L==="#")a.fragment="",u=Wu;else if(L!==ko&&(u=Vs,L!=="/"))continue;break;case Vs:if(L===ko||L==="/"||L==="\\"&&a.isSpecial()||!t&&(L==="?"||L==="#")){if(qyt(m)?(a.shortenPath(),L!=="/"&&!(L==="\\"&&a.isSpecial())&&Hp(a.path,"")):Syt(m)?L!=="/"&&!(L==="\\"&&a.isSpecial())&&Hp(a.path,""):(a.scheme==="file"&&!a.path.length&&v_(m)&&(a.host&&(a.host=""),m=Do(m,0)+":"),Hp(a.path,m)),m="",a.scheme==="file"&&(L===ko||L==="?"||L==="#"))for(;a.path.length>1&&a.path[0]==="";)syt(a.path);L==="?"?(a.query="",u=rf):L==="#"&&(a.fragment="",u=Wu)}else m+=Ic(L,Zfe);break;case jfe:L==="?"?(a.query="",u=rf):L==="#"?(a.fragment="",u=Wu):L!==ko&&(a.path[0]+=Ic(L,BS));break;case rf:!t&&L==="#"?(a.fragment="",u=Wu):L!==ko&&(L==="'"&&a.isSpecial()?a.query+="%27":L==="#"?a.query+="%23":a.query+=Ic(L,BS));break;case Wu:L!==ko&&(a.fragment+=Ic(L,Kfe));break;}s++}},parseHost:function(e){var t,r,a;if(Do(e,0)==="["){if(Do(e,e.length-1)!=="]"||(t=byt(g_(e,1,-1)),!t))return tf;this.host=t}else if(this.isSpecial()){if(e=Ygt(e),ss(myt,e)||(t=xyt(e),t===null))return tf;this.host=t}else{if(ss(vyt,e))return tf;for(t="",r=Kp(e),a=0;a<r.length;a++)t+=Ic(r[a],BS);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return FL(FS,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!v_(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,a=e.password,u=e.host,s=e.port,m=e.path,x=e.query,q=e.fragment,T=t+":";return u!==null?(T+="//",e.includesCredentials()&&(T+=r+(a?":"+a:"")+"@"),T+=p_(u),s!==null&&(T+=":"+s)):t==="file"&&(T+="//"),T+=e.cannotBeABaseURL?m[0]:m.length?"/"+m_(m,"/"):"",x!==null&&(T+="?"+x),q!==null&&(T+="#"+q),T},setHref:function(e){var t=this.parse(e);if(t)throw new zL(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Xp(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+p_(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Gu(e)+":",TL)},getUsername:function(){return this.username},setUsername:function(e){var t=Kp(Gu(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Ic(t[r],EL)}},getPassword:function(){return this.password},setPassword:function(e){var t=Kp(Gu(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Ic(t[r],EL)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?p_(e):p_(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,PL)},getHostname:function(){var e=this.host;return e===null?"":p_(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,ML)},getPort:function(){var e=this.port;return e===null?"":Gu(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Gu(e),e===""?this.port=null:this.parse(e,OL))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+m_(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Zp))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Gu(e),e===""?this.query=null:(Do(e,0)==="?"&&(e=g_(e,1)),this.query="",this.parse(e,rf)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Gu(e),e===""){this.fragment=null;return}Do(e,0)==="#"&&(e=g_(e,1)),this.fragment="",this.parse(e,Wu)},update:function(){this.query=this.searchParams.serialize()||null}};var Xp=function(t){var r=Xgt(this,ea),a=eyt(arguments.length,1)>1?arguments[1]:void 0,u=tyt(r,new VL(t,!1,a));BL||(r.href=u.serialize(),r.origin=u.getOrigin(),r.protocol=u.getProtocol(),r.username=u.getUsername(),r.password=u.getPassword(),r.host=u.getHost(),r.hostname=u.getHostname(),r.port=u.getPort(),r.pathname=u.getPathname(),r.search=u.getSearch(),r.searchParams=u.getSearchParams(),r.hash=u.getHash())},ea=Xp.prototype,Ro=function(e,t){return{get:function(){return jS(this)[e]()},set:t&&function(r){return jS(this)[t](r)},configurable:!0,enumerable:!0}};BL&&(Oo(ea,"href",Ro("serialize","setHref")),Oo(ea,"origin",Ro("getOrigin")),Oo(ea,"protocol",Ro("getProtocol","setProtocol")),Oo(ea,"username",Ro("getUsername","setUsername")),Oo(ea,"password",Ro("getPassword","setPassword")),Oo(ea,"host",Ro("getHost","setHost")),Oo(ea,"hostname",Ro("getHostname","setHostname")),Oo(ea,"port",Ro("getPort","setPort")),Oo(ea,"pathname",Ro("getPathname","setPathname")),Oo(ea,"search",Ro("getSearch","setSearch")),Oo(ea,"searchParams",Ro("getSearchParams")),Oo(ea,"hash",Ro("getHash","setHash")));US(ea,"toJSON",function(){return jS(this).serialize()},{enumerable:!0});US(ea,"toString",function(){return jS(this).serialize()},{enumerable:!0});d_&&(DL=d_.createObjectURL,LL=d_.revokeObjectURL,DL&&US(Xp,"createObjectURL",Ofe(DL,d_)),LL&&US(Xp,"revokeObjectURL",Ofe(LL,d_)));var DL,LL;Qgt(Xp,"URL");Zgt({global:!0,constructor:!0,forced:!Hgt,sham:!BL},{URL:Xp})});var Xfe=w(()=>{"use strict";Hfe()});var Qfe=w(()=>{"use strict";var Ayt=$(),Eyt=kt(),Tyt=ze(),Iyt=Co(),Jfe=Lt(),Cyt=OS(),Yfe=Eyt("URL"),Pyt=Cyt&&Tyt(function(){Yfe.canParse()});Ayt({target:"URL",stat:!0,forced:!Pyt},{canParse:function(t){var r=Iyt(arguments.length,1),a=Jfe(t),u=r<2||arguments[1]===void 0?void 0:Jfe(arguments[1]);try{return!!new Yfe(a,u)}catch(s){return!1}}})});var ede=w(()=>{"use strict";var Myt=$(),Oyt=Qe();Myt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Oyt(URL.prototype.toString,this)}})});var tde=w(()=>{"use strict";SL()});var ade=w(()=>{"use strict";var kyt=yr(),WS=ke(),rde=Lt(),Ryt=Co(),nde=URLSearchParams,GS=nde.prototype,Dyt=WS(GS.append),ide=WS(GS.delete),Lyt=WS(GS.forEach),Fyt=WS([].push),$L=new nde("a=1&a=2&b=3");$L.delete("a",1);$L.delete("b",void 0);$L+""!="a=2"&&kyt(GS,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return ide(this,e);var a=[];Lyt(this,function(L,z){Fyt(a,{key:z,value:L})}),Ryt(t,1);for(var u=rde(e),s=rde(r),m=0,x=0,q=!1,T=a.length,I;m<T;)I=a[m++],q||I.key===u?(q=!0,ide(this,I.key)):x++;for(;x<T;)I=a[x++],I.key===u&&I.value===s||Dyt(this,I.key,I.value)},{enumerable:!0,unsafe:!0})});var lde=w(()=>{"use strict";var zyt=yr(),sde=ke(),Nyt=Lt(),Byt=Co(),ude=URLSearchParams,WL=ude.prototype,Uyt=sde(WL.getAll),jyt=sde(WL.has),ode=new ude("a=1");(ode.has("a",2)||!ode.has("a",void 0))&&zyt(WL,"has",function(t){var r=arguments.length,a=r<2?void 0:arguments[1];if(r&&a===void 0)return jyt(this,t);var u=Uyt(this,t);Byt(r,1);for(var s=Nyt(a),m=0;m<u.length;)if(u[m++]===s)return!0;return!1},{enumerable:!0,unsafe:!0})});var cde=w(()=>{"use strict";var Vyt=At(),$yt=ke(),Wyt=Gr(),GL=URLSearchParams.prototype,Gyt=$yt(GL.forEach);Vyt&&!("size"in GL)&&Wyt(GL,"size",{get:function(){var t=0;return Gyt(this,function(){t++}),t},configurable:!0,enumerable:!0})});var fde=w((Q6t,hde)=>{"use strict";xV();TV();IV();CV();PV();MV();OV();kV();RV();DV();LV();FV();zV();NV();BV();h8();v8();xC();L8();qC();V8();K8();H8();Y8();Q8();t$();i$();CC();PC();u$();l$();f$();b$();w$();q$();A$();Zg();G$();X$();J$();Q$();tW();oW();uW();cW();dW();pW();PW();kW();RW();XC();YC();QC();zW();NW();BW();tP();g7();C7();z7();B7();U7();V7();G7();K7();iG();nG();lG();dG();mG();bG();qG();IG();IP();oC();CG();A1();KG();XG();YG();QG();eK();iK();aK();oK();uK();cK();fK();dK();pK();mK();yK();bK();wK();SK();RK();DK();FK();NK();BK();UK();jK();VK();HK();iZ();uZ();pZ();gZ();wZ();SZ();EZ();IZ();PZ();MZ();FZ();zZ();NZ();jZ();VZ();$Z();GZ();iM();ZZ();XZ();YZ();eH();rH();iH();nH();aH();hH();fH();dH();vH();gH();_H();bH();M9();BM();UM();L9();F9();$9();K9();Z9();Y9();Q9();eX();tX();rX();iX();nX();lX();hX();fX();IX();PX();K1();LX();zX();UX();$X();GX();KX();JX();nJ();sJ();lJ();uO();lO();SJ();vO();RJ();DJ();NJ();BJ();GJ();AO();QJ();aY();cY();fY();MO();_Y();qY();CY();kY();RY();DY();LY();FY();zY();NY();BY();UY();jY();VY();$Y();WY();_Q();xQ();bQ();wQ();SQ();qQ();AQ();EQ();TQ();GO();PQ();OQ();RQ();NQ();UQ();VQ();KO();ZO();KQ();ZQ();XQ();YQ();iee();aee();see();lee();hee();dee();mee();gee();See();Aee();Tee();kee();Lee();Uee();ak();ok();Vee();uk();Zee();xw();fte();dte();mte();jte();Vte();$te();Wte();Gte();Kte();Hte();Xte();Qte();ere();ire();nre();sre();ure();lre();cre();yre();_re();Sre();Nre();Ure();Qre();nie();vie();xie();Sie();qie();Eie();Tie();kie();Rie();Lie();Fie();zie();Nie();Bie();Vie();$ie();Jie();ine();ane();one();sne();lne();cne();mne();gne();_ne();xne();Sne();qne();Ane();Pne();Bne();Vne();Wne();Gne();Zne();Hne();eae();tae();rae();iae();nae();oae();sae();uae();cae();hae();dae();vae();Iae();Fae();Nae();Uae();jae();$ae();Wae();Gae();Xae();Jae();eoe();roe();ioe();aoe();soe();uoe();coe();hoe();foe();poe();voe();goe();yoe();_oe();xoe();woe();Soe();qoe();Aoe();Eoe();Toe();Ioe();Coe();koe();Roe();Doe();Foe();zoe();Noe();Voe();$oe();Woe();Goe();sse();use();lse();cse();hse();gse();_se();bse();Ase();Tse();Cse();Ose();Rse();Lse();zse();Use();jse();uue();due();pue();vue();gue();yue();bue();wue();que();Aue();Tue();Iue();Pue();Mue();kue();Due();Lue();Fue();zue();Bue();Uue();Vue();$ue();Wue();Xue();tle();xle();ble();wle();Sle();qle();Ale();Ele();Ile();Cle();Lle();Fle();zle();Nle();Ble();Ule();jle();Vle();Wle();Gle();Zle();Xle();Jle();Yle();ece();tce();rce();ice();nce();ace();uce();lce();cce();fce();dce();vce();gce();yce();_ce();Ice();Fce();$ce();Xce();uhe();mhe();ghe();Ihe();Che();Mhe();Khe();efe();Xfe();Qfe();ede();tde();ade();lde();cde();hde.exports=Ob()});var pde=w((eVt,dde)=>{"use strict";dde.exports=fde()});var Fde=w((nVt,Lde)=>{"use strict";var d_t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Lde.exports=d_t});var Ude=w((aVt,Bde)=>{"use strict";var p_t=Fde();function zde(){}function Nde(){}Nde.resetWarningCache=zde;Bde.exports=function(){function e(a,u,s,m,x,q){if(q!==p_t){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Nde,resetWarningCache:zde};return r.PropTypes=r,r}});var Si=w((uVt,jde)=>{jde.exports=Ude()();var oVt,sVt});var Hde=w((iF,nF)=>{(function(e,t){typeof iF=="object"&&typeof nF!="undefined"?nF.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(iF,function(){"use strict";var e={},t={};function r(u,s,m){if(t[u]=m,u==="index"){var x="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",q={};return t.shared(q),t.index(e,q),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))),e}}r("shared",["exports"],function(u){"use strict";function s(o,n,l,h){return new(l||(l=Promise))(function(p,y){function _(P){try{A(h.next(P))}catch(M){y(M)}}function b(P){try{A(h.throw(P))}catch(M){y(M)}}function A(P){var M;P.done?p(P.value):(M=P.value,M instanceof l?M:new l(function(k){k(M)})).then(_,b)}A((h=h.apply(o,n||[])).next())})}function m(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var x=q;function q(o,n){this.x=o,this.y=n}q.prototype={clone:function(){return new q(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,l=o.y-this.y;return n*n+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),l=Math.sin(o),h=l*this.x+n*this.y;return this.x=n*this.x-l*this.y,this.y=h,this},_rotateAround:function(o,n){var l=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+l*(this.y-n.y);return this.x=n.x+l*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},q.convert=function(o){return o instanceof q?o:Array.isArray(o)?new q(o[0],o[1]):o};var T=m(x),I=L;function L(o,n,l,h){this.cx=3*o,this.bx=3*(l-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=l,this.p2y=h}L.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var l=o,h=0;h<8;h++){var p=this.sampleCurveX(l)-o;if(Math.abs(p)<n)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=p/y}var _=0,b=1;for(l=o,h=0;h<20&&(p=this.sampleCurveX(l),!(Math.abs(p-o)<n));h++)o>p?_=l:b=l,l=.5*(b-_)+_;return l},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var z=m(I);let Y,pe;function de(){return Y==null&&(Y=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function Z(){if(pe==null&&(pe=!1,de())){let n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){let p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}let l=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){pe=!0;break}}}return pe||!1}function H(o,n,l,h){let p=new z(o,n,l,h);return y=>p.solve(y)}let J=H(.25,.1,.25,1);function ve(o,n,l){return Math.min(l,Math.max(n,o))}function be(o,n,l){let h=l-n,p=((o-n)%h+h)%h+n;return p===n?l:p}function Le(o,...n){for(let l of n)for(let h in l)o[h]=l[h];return o}let Pe=1;function Ge(o,n,l){let h={};for(let p in o)h[p]=n.call(this,o[p],p,o);return h}function pt(o,n,l){let h={};for(let p in o)n.call(this,o[p],p,o)&&(h[p]=o[p]);return h}function Ve(o){return Array.isArray(o)?o.map(Ve):typeof o=="object"&&o?Ge(o,Ve):o}let Br={};function cr(o){Br[o]||(typeof console!="undefined"&&console.warn(o),Br[o]=!0)}function yt(o,n,l){return(l.y-o.y)*(n.x-o.x)>(n.y-o.y)*(l.x-o.x)}function Ct(o){return typeof WorkerGlobalScope!="undefined"&&o!==void 0&&o instanceof WorkerGlobalScope}let pr=null;function _r(o){return typeof ImageBitmap!="undefined"&&o instanceof ImageBitmap}let Ur="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Dr(o,n,l,h,p){return s(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let y=new VideoFrame(o,{timestamp:0});try{let _=y==null?void 0:y.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);let b=_.startsWith("BGR"),A=new Uint8ClampedArray(h*p*4);if(yield y.copyTo(A,function(P,M,k,F,U){let V=4*Math.max(-M,0),W=(Math.max(0,k)-k)*F*4+V,ee=4*F,ne=Math.max(0,M),xe=Math.max(0,k);return{rect:{x:ne,y:xe,width:Math.min(P.width,M+F)-ne,height:Math.min(P.height,k+U)-xe},layout:[{offset:W,stride:ee}]}}(o,n,l,h,p)),b)for(let P=0;P<A.length;P+=4){let M=A[P];A[P]=A[P+2],A[P+2]=M}return A}finally{y.close()}})}let Pi,si,Mi="AbortError";function jo(){return new Error(Mi)}let Oa={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ia(o){return Oa.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}let Vo="global-dispatcher";class Ji extends Error{constructor(n,l,h,p){super(`AJAXError: ${l} (${n}): ${h}`),this.status=n,this.statusText=l,this.url=h,this.body=p}}let Yi=()=>Ct(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ro=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){let h=ia(o.url);if(h)return h(o,n);if(Ct(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:Vo},n)}if(!(/^file:/.test(l=o.url)||/^file:/.test(Yi())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return s(this,void 0,void 0,function*(){let y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:Yi(),signal:p.signal});h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");let _=yield fetch(y);if(!_.ok){let P=yield _.blob();throw new Ji(_.status,_.statusText,h.url,P)}let b;b=h.type==="arrayBuffer"||h.type==="image"?_.arrayBuffer():h.type==="json"?_.json():_.text();let A=yield b;if(p.signal.aborted)throw jo();return{data:A,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}})}(o,n);if(Ct(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:Vo},n)}var l;return function(h,p){return new Promise((y,_)=>{var b;let A=new XMLHttpRequest;A.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(A.responseType="arraybuffer");for(let P in h.headers)A.setRequestHeader(P,h.headers[P]);h.type==="json"&&(A.responseType="text",!((b=h.headers)===null||b===void 0)&&b.Accept||A.setRequestHeader("Accept","application/json")),A.withCredentials=h.credentials==="include",A.onerror=()=>{_(new Error(A.statusText))},A.onload=()=>{if(!p.signal.aborted)if((A.status>=200&&A.status<300||A.status===0)&&A.response!==null){let P=A.response;if(h.type==="json")try{P=JSON.parse(A.response)}catch(M){return void _(M)}y({data:P,cacheControl:A.getResponseHeader("Cache-Control"),expires:A.getResponseHeader("Expires")})}else{let P=new Blob([A.response],{type:A.getResponseHeader("Content-Type")});_(new Ji(A.status,A.statusText,h.url,P))}},p.signal.addEventListener("abort",()=>{A.abort(),_(jo())}),A.send(h.body)})}(o,n)};function ka(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;let n=new URL(o),l=window.location;return n.protocol===l.protocol&&n.host===l.host}function hs(o,n,l){l[o]&&l[o].indexOf(n)!==-1||(l[o]=l[o]||[],l[o].push(n))}function na(o,n,l){if(l&&l[o]){let h=l[o].indexOf(n);h!==-1&&l[o].splice(h,1)}}class io{constructor(n,l={}){Le(this,l),this.type=n}}class Ra extends io{constructor(n,l={}){super("error",Le({error:n},l))}}class $o{on(n,l){return this._listeners=this._listeners||{},hs(n,l,this._listeners),this}off(n,l){return na(n,l,this._listeners),na(n,l,this._oneTimeListeners),this}once(n,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},hs(n,l,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,l){typeof n=="string"&&(n=new io(n,l||{}));let h=n.type;if(this.listens(h)){n.target=this;let p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let b of p)b.call(this,n);let y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let b of y)na(h,b,this._oneTimeListeners),b.call(this,n);let _=this._eventedParent;_&&(Le(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof Ra&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,l){return this._eventedParent=n,this._eventedParentData=l,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let fs=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Yu(o,n){let l={};for(let h in o)h!=="ref"&&(l[h]=o[h]);return fs.forEach(h=>{h in n&&(l[h]=n[h])}),l}function ue(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let l=0;l<o.length;l++)if(!ue(o[l],n[l]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(let l in o)if(!ue(o[l],n[l]))return!1;return!0}return o===n}function Se(o,n){o.push(n)}function Oe(o,n,l){Se(l,{command:"addSource",args:[o,n[o]]})}function _t(o,n,l){Se(n,{command:"removeSource",args:[o]}),l[o]=!0}function et(o,n,l,h){_t(o,l,h),Oe(o,n,l)}function Je(o,n,l){let h;for(h in o[l])if(Object.prototype.hasOwnProperty.call(o[l],h)&&h!=="data"&&!ue(o[l][h],n[l][h]))return!1;for(h in n[l])if(Object.prototype.hasOwnProperty.call(n[l],h)&&h!=="data"&&!ue(o[l][h],n[l][h]))return!1;return!0}function mt(o,n,l,h,p,y){o=o||{},n=n||{};for(let _ in o)Object.prototype.hasOwnProperty.call(o,_)&&(ue(o[_],n[_])||l.push({command:y,args:[h,_,n[_],p]}));for(let _ in n)Object.prototype.hasOwnProperty.call(n,_)&&!Object.prototype.hasOwnProperty.call(o,_)&&(ue(o[_],n[_])||l.push({command:y,args:[h,_,n[_],p]}))}function Qt(o){return o.id}function ar(o,n){return o[n.id]=n,o}class Re{constructor(n,l,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),l!=null&&l.__line__&&(this.line=l.__line__)}}function Qi(o,...n){for(let l of n)for(let h in l)o[h]=l[h];return o}class Zr extends Error{constructor(n,l){super(l),this.message=l,this.key=n}}class vi{constructor(n,l=[]){this.parent=n,this.bindings={};for(let[h,p]of l)this.bindings[h]=p}concat(n){return new vi(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}let no={kind:"null"},Ne={kind:"number"},Ft={kind:"string"},qt={kind:"boolean"},gn={kind:"color"},Da={kind:"object"},Ot={kind:"value"},ao={kind:"collator"},Wo={kind:"formatted"},ds={kind:"padding"},oo={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function B(o,n){return{kind:"array",itemType:o,N:n}}function N(o){if(o.kind==="array"){let n=N(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}let K=[no,Ne,Ft,qt,gn,Wo,Da,B(Ot),ds,oo,ie];function te(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!te(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(let l of K)if(!te(l,n))return null}}return`Expected ${N(o)} but found ${N(n)} instead.`}function he(o,n){return n.some(l=>l.kind===o.kind)}function me(o,n){return n.some(l=>l==="null"?o===null:l==="array"?Array.isArray(o):l==="object"?o&&!Array.isArray(o)&&typeof o=="object":l===typeof o)}function _e(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}let se=.96422,Te=.82521,Me=4/29,qe=6/29,Be=3*qe*qe,dt=qe*qe*qe,xt=Math.PI/180,er=180/Math.PI;function Dt(o){return(o%=360)<0&&(o+=360),o}function tr([o,n,l,h]){let p,y,_=ui((.2225045*(o=Gt(o))+.7168786*(n=Gt(n))+.0606169*(l=Gt(l)))/1);o===n&&n===l?p=y=_:(p=ui((.4360747*o+.3850649*n+.1430804*l)/se),y=ui((.0139322*o+.0971045*n+.7141733*l)/Te));let b=116*_-16;return[b<0?0:b,500*(p-_),200*(_-y),h]}function Gt(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function ui(o){return o>dt?Math.pow(o,1/3):o/Be+Me}function jr([o,n,l,h]){let p=(o+16)/116,y=isNaN(n)?p:p+n/500,_=isNaN(l)?p:p-l/200;return p=1*hr(p),y=se*hr(y),_=Te*hr(_),[jt(3.1338561*y-1.6168667*p-.4906146*_),jt(-.9787684*y+1.9161415*p+.033454*_),jt(.0719453*y-.2289914*p+1.4052427*_),h]}function jt(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function hr(o){return o>qe?o*o*o:Be*(o-Me)}function Rr(o){return parseInt(o.padEnd(2,o),16)/255}function qi(o,n){return Oi(n?o/100:o,0,1)}function Oi(o,n,l){return Math.min(Math.max(n,o),l)}function en(o){return!o.some(Number.isNaN)}let Qu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class fr{constructor(n,l,h,p=1,y=!0){this.r=n,this.g=l,this.b=h,this.a=p,y||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,l,h,p]))}static parse(n){if(n instanceof fr)return n;if(typeof n!="string")return;let l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let p=Qu[h];if(p){let[_,b,A]=p;return[_/255,b/255,A/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let _=h.length<6?1:2,b=1;return[Rr(h.slice(b,b+=_)),Rr(h.slice(b,b+=_)),Rr(h.slice(b,b+=_)),Rr(h.slice(b,b+_)||"ff")]}if(h.startsWith("rgb")){let _=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){let[b,A,P,M,k,F,U,V,W,ee,ne,xe]=_,ce=[M||" ",U||" ",ee].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){let ye=[P,F,W].join(""),Ee=ye==="%%%"?100:ye===""?255:0;if(Ee){let De=[Oi(+A/Ee,0,1),Oi(+k/Ee,0,1),Oi(+V/Ee,0,1),ne?qi(+ne,xe):1];if(en(De))return De}}return}}let y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[_,b,A,P,M,k,F,U,V]=y,W=[A||" ",M||" ",F].join("");if(W==="  "||W==="  /"||W===",,"||W===",,,"){let ee=[+b,Oi(+P,0,100),Oi(+k,0,100),U?qi(+U,V):1];if(en(ee))return function([ne,xe,ce,ye]){function Ee(De){let Ye=(De+ne/30)%12,bt=xe*Math.min(ce,1-ce);return ce-bt*Math.max(-1,Math.min(Ye-3,9-Ye,1))}return ne=Dt(ne),xe/=100,ce/=100,[Ee(0),Ee(8),Ee(4),ye]}(ee)}}}(n);return l?new fr(...l,!1):void 0}get rgb(){let{r:n,g:l,b:h,a:p}=this,y=p||1/0;return this.overwriteGetter("rgb",[n/y,l/y,h/y,p])}get hcl(){return this.overwriteGetter("hcl",function(n){let[l,h,p,y]=tr(n),_=Math.sqrt(h*h+p*p);return[Math.round(1e4*_)?Dt(Math.atan2(p,h)*er):NaN,_,l,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",tr(this.rgb))}overwriteGetter(n,l){return Object.defineProperty(this,n,{value:l}),l}toString(){let[n,l,h,p]=this.rgb;return`rgba(${[n,l,h].map(y=>Math.round(255*y)).join(",")},${p})`}}fr.black=new fr(0,0,0,1),fr.white=new fr(1,1,1,1),fr.transparent=new fr(0,0,0,0),fr.red=new fr(1,0,0,1);class vm{constructor(n,l,h){this.sensitivity=n?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,l){return this.collator.compare(n,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class gm{constructor(n,l,h,p,y){this.text=n,this.image=l,this.scale=h,this.fontStack=p,this.textColor=y}}class Nn{constructor(n){this.sections=n}static fromString(n){return new Nn([new gm(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Nn?n:Nn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Bn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Bn)return n;if(typeof n=="number")return new Bn([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(let l of n)if(typeof l!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]];}return new Bn(n)}}toString(){return JSON.stringify(this.values)}}let TA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class aa{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof aa)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let l=0;l<n.length;l+=2){let h=n[l],p=n[l+1];if(typeof h!="string"||!TA.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new aa(n)}}toString(){return JSON.stringify(this.values)}}class Un{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Un({name:n,available:!1}):null}}function el(o,n,l,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,l,h]:[o,n,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qs(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof fr||o instanceof vm||o instanceof Nn||o instanceof Bn||o instanceof aa||o instanceof Un)return!0;if(Array.isArray(o)){for(let n of o)if(!Qs(n))return!1;return!0}if(typeof o=="object"){for(let n in o)if(!Qs(o[n]))return!1;return!0}return!1}function li(o){if(o===null)return no;if(typeof o=="string")return Ft;if(typeof o=="boolean")return qt;if(typeof o=="number")return Ne;if(o instanceof fr)return gn;if(o instanceof vm)return ao;if(o instanceof Nn)return Wo;if(o instanceof Bn)return ds;if(o instanceof aa)return ie;if(o instanceof Un)return oo;if(Array.isArray(o)){let n=o.length,l;for(let h of o){let p=li(h);if(l){if(l===p)continue;l=Ot;break}l=p}return B(l||Ot,n)}return Da}function Dc(o){let n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof fr||o instanceof Nn||o instanceof Bn||o instanceof aa||o instanceof Un?o.toString():JSON.stringify(o)}class La{constructor(n,l){this.type=n,this.value=l}static parse(n,l){if(n.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Qs(n[1]))return l.error("invalid value");let h=n[1],p=li(h),y=l.expectedType;return p.kind!=="array"||p.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(p=y),new La(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ri{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}let df={string:Ft,number:Ne,boolean:qt,object:Da};class Fa{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h,p=1,y=n[0];if(y==="array"){let b,A;if(n.length>2){let P=n[1];if(typeof P!="string"||!(P in df)||P==="object")return l.error("The item type argument of \"array\" must be one of string, number, boolean",1);b=df[P],p++}else b=Ot;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return l.error("The length argument to \"array\" must be a positive integer literal",2);A=n[2],p++}h=B(b,A)}else{if(!df[y])throw new Error(`Types doesn't contain name = ${y}`);h=df[y]}let _=[];for(;p<n.length;p++){let b=l.parse(n[p],p,Ot);if(!b)return null;_.push(b)}return new Fa(h,_)}evaluate(n){for(let l=0;l<this.args.length;l++){let h=this.args[l].evaluate(n);if(!te(this.type,li(h)))return h;if(l===this.args.length-1)throw new ri(`Expected value to be of type ${N(this.type)}, but found ${N(li(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let ym={"to-boolean":qt,"to-color":gn,"to-number":Ne,"to-string":Ft};class za{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h=n[0];if(!ym[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return l.error("Expected one argument.");let p=ym[h],y=[];for(let _=1;_<n.length;_++){let b=l.parse(n[_],_,Ot);if(!b)return null;y.push(b)}return new za(p,y)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let l,h;for(let p of this.args){if(l=p.evaluate(n),h=null,l instanceof fr)return l;if(typeof l=="string"){let y=n.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:el(l[0],l[1],l[2],l[3]),!h))return new fr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new ri(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(let h of this.args){l=h.evaluate(n);let p=Bn.parse(l);if(p)return p}throw new ri(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(let h of this.args){l=h.evaluate(n);let p=aa.parse(l);if(p)return p}throw new ri(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(let h of this.args){if(l=h.evaluate(n),l===null)return 0;let p=Number(l);if(!isNaN(p))return p}throw new ri(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Nn.fromString(Dc(this.args[0].evaluate(n)));case"resolvedImage":return Un.fromString(Dc(this.args[0].evaluate(n)));default:return Dc(this.args[0].evaluate(n));}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let IA=["Unknown","Point","LineString","Polygon"];class pf{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?IA[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let l=this._parseColorCache[n];return l||(l=this._parseColorCache[n]=fr.parse(n)),l}}class eu{constructor(n,l,h=[],p,y=new vi,_=[]){this.registry=n,this.path=h,this.key=h.map(b=>`[${b}]`).join(""),this.scope=y,this.errors=_,this.expectedType=p,this._isConstant=l}parse(n,l,h,p,y={}){return l?this.concat(l,h,p)._parse(n,y):this._parse(n,y)}_parse(n,l){function h(p,y,_){return _==="assert"?new Fa(y,[p]):_==="coerce"?new za(y,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let y=this.registry[p];if(y){let _=y.parse(n,this);if(!_)return null;if(this.expectedType){let b=this.expectedType,A=_.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||A.kind!=="value"){if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(b.kind!=="padding"||A.kind!=="value"&&A.kind!=="number"&&A.kind!=="array"){if(b.kind!=="variableAnchorOffsetCollection"||A.kind!=="value"&&A.kind!=="array"){if(this.checkSubtype(b,A))return null}else _=h(_,b,l.typeAnnotation||"coerce");}else _=h(_,b,l.typeAnnotation||"coerce");}else _=h(_,b,l.typeAnnotation||"coerce");}else _=h(_,b,l.typeAnnotation||"assert")}if(!(_ instanceof La)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){let b=new pf;try{_=new La(_.type,_.evaluate(b))}catch(A){return this.error(A.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof n} instead.`)}concat(n,l,h){let p=typeof n=="number"?this.path.concat(n):this.path,y=h?this.scope.concat(h):this.scope;return new eu(this.registry,this._isConstant,p,l||null,y,this.errors)}error(n,...l){let h=`${this.key}${l.map(p=>`[${p}]`).join("")}`;this.errors.push(new Zr(h,n))}checkSubtype(n,l){let h=te(n,l);return h&&this.error(h),h}}class ps{constructor(n,l){this.type=l.type,this.bindings=[].concat(n),this.result=l}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(let l of this.bindings)n(l[1]);n(this.result)}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);let h=[];for(let y=1;y<n.length-1;y+=2){let _=n[y];if(typeof _!="string")return l.error(`Expected string, but found ${typeof _} instead.`,y);if(/[^a-zA-Z0-9_]/.test(_))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);let b=l.parse(n[y+1],y+1);if(!b)return null;h.push([_,b])}let p=l.parse(n[n.length-1],n.length-1,l.expectedType,h);return p?new ps(h,p):null}outputDefined(){return this.result.outputDefined()}}class or{constructor(n,l){this.type=l.type,this.name=n,this.boundExpression=l}static parse(n,l){if(n.length!==2||typeof n[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");let h=n[1];return l.scope.has(h)?new or(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class _m{constructor(n,l,h){this.type=n,this.index=l,this.input=h}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Ne),p=l.parse(n[2],2,B(l.expectedType||Ot));return h&&p?new _m(p.type.itemType,h,p):null}evaluate(n){let l=this.index.evaluate(n),h=this.input.evaluate(n);if(l<0)throw new ri(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new ri(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new ri(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class xm{constructor(n,l){this.type=qt,this.needle=n,this.haystack=l}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Ot),p=l.parse(n[2],2,Ot);return h&&p?he(h.type,[qt,Ft,Ne,no,Ot])?new xm(h,p):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${N(h.type)} instead`):null}evaluate(n){let l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!me(l,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${N(li(l))} instead.`);if(!me(h,["string","array"]))throw new ri(`Expected second argument to be of type array or string, but found ${N(li(h))} instead.`);return h.indexOf(l)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class tl{constructor(n,l,h){this.type=Ne,this.needle=n,this.haystack=l,this.fromIndex=h}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Ot),p=l.parse(n[2],2,Ot);if(!h||!p)return null;if(!he(h.type,[qt,Ft,Ne,no,Ot]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${N(h.type)} instead`);if(n.length===4){let y=l.parse(n[3],3,Ne);return y?new tl(h,p,y):null}return new tl(h,p)}evaluate(n){let l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!me(l,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${N(li(l))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(n)),me(h,["string"])){let y=h.indexOf(l,p);return y===-1?-1:[...h.slice(0,y)].length}if(me(h,["array"]))return h.indexOf(l,p);throw new ri(`Expected second argument to be of type array or string, but found ${N(li(h))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class bm{constructor(n,l,h,p,y,_){this.inputType=n,this.type=l,this.input=h,this.cases=p,this.outputs=y,this.otherwise=_}static parse(n,l){if(n.length<5)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return l.error("Expected an even number of arguments.");let h,p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);let y={},_=[];for(let P=2;P<n.length-1;P+=2){let M=n[P],k=n[P+1];Array.isArray(M)||(M=[M]);let F=l.concat(P);if(M.length===0)return F.error("Expected at least one branch label.");for(let V of M){if(typeof V!="number"&&typeof V!="string")return F.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return F.error("Numeric branch labels must be integer values.");if(h){if(F.checkSubtype(h,li(V)))return null}else h=li(V);if(y[String(V)]!==void 0)return F.error("Branch labels must be unique.");y[String(V)]=_.length}let U=l.parse(k,P,p);if(!U)return null;p=p||U.type,_.push(U)}let b=l.parse(n[1],1,Ot);if(!b)return null;let A=l.parse(n[n.length-1],n.length-1,p);return A?b.type.kind!=="value"&&l.concat(1).checkSubtype(h,b.type)?null:new bm(h,p,b,y,_,A):null}evaluate(n){let l=this.input.evaluate(n);return(li(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class mf{constructor(n,l,h){this.type=n,this.branches=l,this.otherwise=h}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);let p=[];for(let _=1;_<n.length-1;_+=2){let b=l.parse(n[_],_,qt);if(!b)return null;let A=l.parse(n[_+1],_+1,h);if(!A)return null;p.push([b,A]),h=h||A.type}let y=l.parse(n[n.length-1],n.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new mf(h,p,y)}evaluate(n){for(let[l,h]of this.branches)if(l.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(let[l,h]of this.branches)n(l),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Lc{constructor(n,l,h,p){this.type=n,this.input=l,this.beginIndex=h,this.endIndex=p}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Ot),p=l.parse(n[2],2,Ne);if(!h||!p)return null;if(!he(h.type,[B(Ot),Ft,Ot]))return l.error(`Expected first argument to be of type array or string, but found ${N(h.type)} instead`);if(n.length===4){let y=l.parse(n[3],3,Ne);return y?new Lc(h.type,h,p,y):null}return new Lc(h.type,h,p)}evaluate(n){let l=this.input.evaluate(n),h=this.beginIndex.evaluate(n),p;if(this.endIndex&&(p=this.endIndex.evaluate(n)),me(l,["string"]))return[...l].slice(h,p).join("");if(me(l,["array"]))return l.slice(h,p);throw new ri(`Expected first argument to be of type array or string, but found ${N(li(l))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function vf(o,n){let l=o.length-1,h,p,y=0,_=l,b=0;for(;y<=_;)if(b=Math.floor((y+_)/2),h=o[b],p=o[b+1],h<=n){if(b===l||n<p)return b;y=b+1}else{if(!(h>n))throw new ri("Input is not a number.");_=b-1}return 0}class rl{constructor(n,l,h){this.type=n,this.input=l,this.labels=[],this.outputs=[];for(let[p,y]of h)this.labels.push(p),this.outputs.push(y)}static parse(n,l){if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");let h=l.parse(n[1],1,Ne);if(!h)return null;let p=[],y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let _=1;_<n.length;_+=2){let b=_===1?-1/0:n[_],A=n[_+1],P=_,M=_+1;if(typeof b!="number")return l.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",P);if(p.length&&p[p.length-1][0]>=b)return l.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",P);let k=l.parse(A,M,y);if(!k)return null;y=y||k.type,p.push([b,k])}return new rl(y,h,p)}evaluate(n){let l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);let p=this.input.evaluate(n);if(p<=l[0])return h[0].evaluate(n);let y=l.length;return p>=l[y-1]?h[y-1].evaluate(n):h[vf(l,p)].evaluate(n)}eachChild(n){n(this.input);for(let l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function J_(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var CA=Y_;function Y_(o,n,l,h){this.cx=3*o,this.bx=3*(l-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=l,this.p2y=h}Y_.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var l=o,h=0;h<8;h++){var p=this.sampleCurveX(l)-o;if(Math.abs(p)<n)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=p/y}var _=0,b=1;for(l=o,h=0;h<20&&(p=this.sampleCurveX(l),!(Math.abs(p-o)<n));h++)o>p?_=l:b=l,l=.5*(b-_)+_;return l},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var PA=J_(CA);function tu(o,n,l){return o+l*(n-o)}function Fc(o,n,l){return o.map((h,p)=>tu(h,n[p],l))}let yn={number:tu,color:function(o,n,l,h="rgb"){switch(h){case"rgb":{let[p,y,_,b]=Fc(o.rgb,n.rgb,l);return new fr(p,y,_,b,!1)}case"hcl":{let[p,y,_,b]=o.hcl,[A,P,M,k]=n.hcl,F,U;if(isNaN(p)||isNaN(A))isNaN(p)?isNaN(A)?F=NaN:(F=A,_!==1&&_!==0||(U=P)):(F=p,M!==1&&M!==0||(U=y));else{let xe=A-p;A>p&&xe>180?xe-=360:A<p&&p-A>180&&(xe+=360),F=p+l*xe}let[V,W,ee,ne]=function([xe,ce,ye,Ee]){return xe=isNaN(xe)?0:xe*xt,jr([ye,Math.cos(xe)*ce,Math.sin(xe)*ce,Ee])}([F,U!=null?U:tu(y,P,l),tu(_,M,l),tu(b,k,l)]);return new fr(V,W,ee,ne,!1)}case"lab":{let[p,y,_,b]=jr(Fc(o.lab,n.lab,l));return new fr(p,y,_,b,!1)}}},array:Fc,padding:function(o,n,l){return new Bn(Fc(o.values,n.values,l))},variableAnchorOffsetCollection:function(o,n,l){let h=o.values,p=n.values;if(h.length!==p.length)throw new ri(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);let y=[];for(let _=0;_<h.length;_+=2){if(h[_]!==p[_])throw new ri(`Cannot interpolate values containing mismatched anchors. from[${_}]: ${h[_]}, to[${_}]: ${p[_]}`);y.push(h[_]);let[b,A]=h[_+1],[P,M]=p[_+1];y.push([tu(b,P,l),tu(A,M,l)])}return new aa(y)}};class _n{constructor(n,l,h,p,y){this.type=n,this.operator=l,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(let[_,b]of y)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(n,l,h,p){let y=0;if(n.name==="exponential")y=gf(l,n.base,h,p);else if(n.name==="linear")y=gf(l,1,h,p);else if(n.name==="cubic-bezier"){let _=n.controlPoints;y=new PA(_[0],_[1],_[2],_[3]).solve(gf(l,1,h,p))}return y}static parse(n,l){let[h,p,y,..._]=n;if(!Array.isArray(p)||p.length===0)return l.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){let P=p[1];if(typeof P!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:P}}else{if(p[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(p[0])}`,1,0);{let P=p.slice(1);if(P.length!==4||P.some(M=>typeof M!="number"||M<0||M>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:P}}}if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,Ne),!y)return null;let b=[],A=null;h==="interpolate-hcl"||h==="interpolate-lab"?A=gn:l.expectedType&&l.expectedType.kind!=="value"&&(A=l.expectedType);for(let P=0;P<_.length;P+=2){let M=_[P],k=_[P+1],F=P+3,U=P+4;if(typeof M!="number")return l.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",F);if(b.length&&b[b.length-1][0]>=M)return l.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",F);let V=l.parse(k,U,A);if(!V)return null;A=A||V.type,b.push([M,V])}return _e(A,Ne)||_e(A,gn)||_e(A,ds)||_e(A,ie)||_e(A,B(Ne))?new _n(A,h,p,y,b):l.error(`Type ${N(A)} is not interpolatable.`)}evaluate(n){let l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);let p=this.input.evaluate(n);if(p<=l[0])return h[0].evaluate(n);let y=l.length;if(p>=l[y-1])return h[y-1].evaluate(n);let _=vf(l,p),b=_n.interpolationFactor(this.interpolation,p,l[_],l[_+1]),A=h[_].evaluate(n),P=h[_+1].evaluate(n);switch(this.operator){case"interpolate":return yn[this.type.kind](A,P,b);case"interpolate-hcl":return yn.color(A,P,b,"hcl");case"interpolate-lab":return yn.color(A,P,b,"lab");}}eachChild(n){n(this.input);for(let l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function gf(o,n,l,h){let p=h-l,y=o-l;return p===0?0:n===1?y/p:(Math.pow(n,y)-1)/(Math.pow(n,p)-1)}class yf{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expectected at least one argument.");let h=null,p=l.expectedType;p&&p.kind!=="value"&&(h=p);let y=[];for(let b of n.slice(1)){let A=l.parse(b,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!A)return null;h=h||A.type,y.push(A)}if(!h)throw new Error("No output type");let _=p&&y.some(b=>te(p,b.type));return new yf(_?Ot:h,y)}evaluate(n){let l,h=null,p=0;for(let y of this.args)if(p++,h=y.evaluate(n),h&&h instanceof Un&&!h.available&&(l||(l=h.name),h=null,p===this.args.length&&(h=l)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function _f(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Q_(o,n,l,h){return h.compare(n,l)===0}function il(o,n,l){let h=o!=="=="&&o!=="!=";return class Zde{constructor(y,_,b){this.type=qt,this.lhs=y,this.rhs=_,this.collator=b,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}static parse(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");let b=y[0],A=_.parse(y[1],1,Ot);if(!A)return null;if(!_f(b,A.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${N(A.type)}'.`);let P=_.parse(y[2],2,Ot);if(!P)return null;if(!_f(b,P.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${N(P.type)}'.`);if(A.type.kind!==P.type.kind&&A.type.kind!=="value"&&P.type.kind!=="value")return _.error(`Cannot compare types '${N(A.type)}' and '${N(P.type)}'.`);h&&(A.type.kind==="value"&&P.type.kind!=="value"?A=new Fa(P.type,[A]):A.type.kind!=="value"&&P.type.kind==="value"&&(P=new Fa(A.type,[P])));let M=null;if(y.length===4){if(A.type.kind!=="string"&&P.type.kind!=="string"&&A.type.kind!=="value"&&P.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(M=_.parse(y[3],3,ao),!M)return null}return new Zde(A,P,M)}evaluate(y){let _=this.lhs.evaluate(y),b=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){let A=li(_),P=li(b);if(A.kind!==P.kind||A.kind!=="string"&&A.kind!=="number")throw new ri(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${A.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let A=li(_),P=li(b);if(A.kind!=="string"||P.kind!=="string")return n(y,_,b)}return this.collator?l(y,_,b,this.collator.evaluate(y)):n(y,_,b)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}let MA=il("==",function(o,n,l){return n===l},Q_),ex=il("!=",function(o,n,l){return n!==l},function(o,n,l,h){return!Q_(0,n,l,h)}),tx=il("<",function(o,n,l){return n<l},function(o,n,l,h){return h.compare(n,l)<0}),OA=il(">",function(o,n,l){return n>l},function(o,n,l,h){return h.compare(n,l)>0}),kA=il("<=",function(o,n,l){return n<=l},function(o,n,l,h){return h.compare(n,l)<=0}),rx=il(">=",function(o,n,l){return n>=l},function(o,n,l,h){return h.compare(n,l)>=0});class zc{constructor(n,l,h){this.type=ao,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=l}static parse(n,l){if(n.length!==2)return l.error("Expected one argument.");let h=n[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");let p=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,qt);if(!p)return null;let y=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,qt);if(!y)return null;let _=null;return h.locale&&(_=l.parse(h.locale,1,Ft),!_)?null:new zc(p,y,_)}evaluate(n){return new vm(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class wm{constructor(n,l,h,p,y){this.type=Ft,this.number=n,this.locale=l,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=y}static parse(n,l){if(n.length!==3)return l.error("Expected two arguments.");let h=l.parse(n[1],1,Ne);if(!h)return null;let p=n[2];if(typeof p!="object"||Array.isArray(p))return l.error("NumberFormat options argument must be an object.");let y=null;if(p.locale&&(y=l.parse(p.locale,1,Ft),!y))return null;let _=null;if(p.currency&&(_=l.parse(p.currency,1,Ft),!_))return null;let b=null;if(p["min-fraction-digits"]&&(b=l.parse(p["min-fraction-digits"],1,Ne),!b))return null;let A=null;return p["max-fraction-digits"]&&(A=l.parse(p["max-fraction-digits"],1,Ne),!A)?null:new wm(h,y,_,b,A)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class xf{constructor(n){this.type=Wo,this.sections=n}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h=n[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");let p=[],y=!1;for(let _=1;_<=n.length-1;++_){let b=n[_];if(y&&typeof b=="object"&&!Array.isArray(b)){y=!1;let A=null;if(b["font-scale"]&&(A=l.parse(b["font-scale"],1,Ne),!A))return null;let P=null;if(b["text-font"]&&(P=l.parse(b["text-font"],1,B(Ft)),!P))return null;let M=null;if(b["text-color"]&&(M=l.parse(b["text-color"],1,gn),!M))return null;let k=p[p.length-1];k.scale=A,k.font=P,k.textColor=M}else{let A=l.parse(n[_],1,Ot);if(!A)return null;let P=A.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,p.push({content:A,scale:null,font:null,textColor:null})}}return new xf(p)}evaluate(n){return new Nn(this.sections.map(l=>{let h=l.content.evaluate(n);return li(h)===oo?new gm("",h,null,null,null):new gm(Dc(h),null,l.scale?l.scale.evaluate(n):null,l.font?l.font.evaluate(n).join(","):null,l.textColor?l.textColor.evaluate(n):null)}))}eachChild(n){for(let l of this.sections)n(l.content),l.scale&&n(l.scale),l.font&&n(l.font),l.textColor&&n(l.textColor)}outputDefined(){return!1}}class Sm{constructor(n){this.type=oo,this.input=n}static parse(n,l){if(n.length!==2)return l.error("Expected two arguments.");let h=l.parse(n[1],1,Ft);return h?new Sm(h):l.error("No image name provided.")}evaluate(n){let l=this.input.evaluate(n),h=Un.fromString(l);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(l)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class qm{constructor(n){this.type=Ne,this.input=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);let h=l.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${N(h.type)} instead.`):new qm(h):null}evaluate(n){let l=this.input.evaluate(n);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new ri(`Expected value to be of type string or array, but found ${N(li(l))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}let so=8192;function RA(o,n){let l=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(l*p*so),Math.round(h*p*so)]}function Am(o,n){let l=Math.pow(2,n.z);return[(p=(o[0]/so+n.x)/l,360*p-180),(h=(o[1]/so+n.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function ru(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function ms(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function ur(o,n,l){let h=o[0]-n[0],p=o[1]-n[1],y=o[0]-l[0],_=o[1]-l[1];return h*_-y*p==0&&h*y<=0&&p*_<=0}function bf(o,n,l,h){return(p=[h[0]-l[0],h[1]-l[1]])[0]*(y=[n[0]-o[0],n[1]-o[1]])[1]-p[1]*y[0]!=0&&!(!nx(o,n,l,h)||!nx(l,h,o,n));var p,y}function DA(o,n,l){for(let h of l)for(let p=0;p<h.length-1;++p)if(bf(o,n,h[p],h[p+1]))return!0;return!1}function nl(o,n,l=!1){let h=!1;for(let b of n)for(let A=0;A<b.length-1;A++){if(ur(o,b[A],b[A+1]))return l;(y=b[A])[1]>(p=o)[1]!=(_=b[A+1])[1]>p[1]&&p[0]<(_[0]-y[0])*(p[1]-y[1])/(_[1]-y[1])+y[0]&&(h=!h)}var p,y,_;return h}function LA(o,n){for(let l of n)if(nl(o,l))return!0;return!1}function ix(o,n){for(let l of o)if(!nl(l,n))return!1;for(let l=0;l<o.length-1;++l)if(DA(o[l],o[l+1],n))return!1;return!0}function FA(o,n){for(let l of n)if(ix(o,l))return!0;return!1}function nx(o,n,l,h){let p=h[0]-l[0],y=h[1]-l[1],_=(o[0]-l[0])*y-p*(o[1]-l[1]),b=(n[0]-l[0])*y-p*(n[1]-l[1]);return _>0&&b<0||_<0&&b>0}function Em(o,n,l){let h=[];for(let p=0;p<o.length;p++){let y=[];for(let _=0;_<o[p].length;_++){let b=RA(o[p][_],l);ru(n,b),y.push(b)}h.push(y)}return h}function ax(o,n,l){let h=[];for(let p=0;p<o.length;p++){let y=Em(o[p],n,l);h.push(y)}return h}function ox(o,n,l,h){if(o[0]<l[0]||o[0]>l[2]){let p=.5*h,y=o[0]-l[0]>p?-h:l[0]-o[0]>p?h:0;y===0&&(y=o[0]-l[2]>p?-h:l[2]-o[0]>p?h:0),o[0]+=y}ru(n,o)}function sx(o,n,l,h){let p=Math.pow(2,h.z)*so,y=[h.x*so,h.y*so],_=[];for(let b of o)for(let A of b){let P=[A.x+y[0],A.y+y[1]];ox(P,n,l,p),_.push(P)}return _}function ux(o,n,l,h){let p=Math.pow(2,h.z)*so,y=[h.x*so,h.y*so],_=[];for(let A of o){let P=[];for(let M of A){let k=[M.x+y[0],M.y+y[1]];ru(n,k),P.push(k)}_.push(P)}if(n[2]-n[0]<=p/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(let A of _)for(let P of A)ox(P,n,l,p)}var b;return _}class iu{constructor(n,l){this.type=qt,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Qs(n[1])){let h=n[1];if(h.type==="FeatureCollection"){let p=[];for(let y of h.features){let{type:_,coordinates:b}=y.geometry;_==="Polygon"&&p.push(b),_==="MultiPolygon"&&p.push(...b)}if(p.length)return new iu(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){let p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new iu(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new iu(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,h){let p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(h.type==="Polygon"){let b=Em(h.coordinates,y,_),A=sx(l.geometry(),p,y,_);if(!ms(p,y))return!1;for(let P of A)if(!nl(P,b))return!1}if(h.type==="MultiPolygon"){let b=ax(h.coordinates,y,_),A=sx(l.geometry(),p,y,_);if(!ms(p,y))return!1;for(let P of A)if(!LA(P,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,h){let p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(h.type==="Polygon"){let b=Em(h.coordinates,y,_),A=ux(l.geometry(),p,y,_);if(!ms(p,y))return!1;for(let P of A)if(!ix(P,b))return!1}if(h.type==="MultiPolygon"){let b=ax(h.coordinates,y,_),A=ux(l.geometry(),p,y,_);if(!ms(p,y))return!1;for(let P of A)if(!FA(P,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let lx=class{constructor(o=[],n=(l,h)=>l<h?-1:l>h?1:0){if(this.data=o,this.length=this.data.length,this.compare=n,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;let o=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),o}peek(){return this.data[0]}_up(o){let{data:n,compare:l}=this,h=n[o];for(;o>0;){let p=o-1>>1,y=n[p];if(l(h,y)>=0)break;n[o]=y,o=p}n[o]=h}_down(o){let{data:n,compare:l}=this,h=this.length>>1,p=n[o];for(;o<h;){let y=1+(o<<1),_=y+1;if(_<this.length&&l(n[_],n[y])<0&&(y=_),l(n[y],p)>=0)break;n[o]=n[y],o=y}n[o]=p}};function zA(o,n,l,h,p){cx(o,n,l,h||o.length-1,p||NA)}function cx(o,n,l,h,p){for(;h>l;){if(h-l>600){var y=h-l+1,_=n-l+1,b=Math.log(y),A=.5*Math.exp(2*b/3),P=.5*Math.sqrt(b*A*(y-A)/y)*(_-y/2<0?-1:1);cx(o,n,Math.max(l,Math.floor(n-_*A/y+P)),Math.min(h,Math.floor(n+(y-_)*A/y+P)),p)}var M=o[n],k=l,F=h;for(Nc(o,l,n),p(o[h],M)>0&&Nc(o,l,h);k<F;){for(Nc(o,k,F),k++,F--;p(o[k],M)<0;)k++;for(;p(o[F],M)>0;)F--}p(o[l],M)===0?Nc(o,l,F):Nc(o,++F,h),F<=n&&(l=F+1),n<=F&&(h=F-1)}}function Nc(o,n,l){var h=o[n];o[n]=o[l],o[l]=h}function NA(o,n){return o<n?-1:o>n?1:0}function wf(o,n){if(o.length<=1)return[o];let l=[],h,p;for(let y of o){let _=UA(y);_!==0&&(y.area=Math.abs(_),p===void 0&&(p=_<0),p===_<0?(h&&l.push(h),h=[y]):h.push(y))}if(h&&l.push(h),n>1)for(let y=0;y<l.length;y++)l[y].length<=n||(zA(l[y],n,1,l[y].length-1,BA),l[y]=l[y].slice(0,n));return l}function BA(o,n){return n.area-o.area}function UA(o){let n=0;for(let l,h,p=0,y=o.length,_=y-1;p<y;_=p++)l=o[p],h=o[_],n+=(h.x-l.x)*(l.y+h.y);return n}let hx=1/298.257223563,fx=hx*(2-hx),dx=Math.PI/180;class Tm{constructor(n){let l=6378.137*dx*1e3,h=Math.cos(n*dx),p=1/(1-fx*(1-h*h)),y=Math.sqrt(p);this.kx=l*y*h,this.ky=l*y*p*(1-fx)}distance(n,l){let h=this.wrap(n[0]-l[0])*this.kx,p=(n[1]-l[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(n,l){let h,p,y,_,b=1/0;for(let A=0;A<n.length-1;A++){let P=n[A][0],M=n[A][1],k=this.wrap(n[A+1][0]-P)*this.kx,F=(n[A+1][1]-M)*this.ky,U=0;k===0&&F===0||(U=(this.wrap(l[0]-P)*this.kx*k+(l[1]-M)*this.ky*F)/(k*k+F*F),U>1?(P=n[A+1][0],M=n[A+1][1]):U>0&&(P+=k/this.kx*U,M+=F/this.ky*U)),k=this.wrap(l[0]-P)*this.kx,F=(l[1]-M)*this.ky;let V=k*k+F*F;V<b&&(b=V,h=P,p=M,y=A,_=U)}return{point:[h,p],index:y,t:Math.max(0,Math.min(1,_))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function px(o,n){return n[0]-o[0]}function Sf(o){return o[1]-o[0]+1}function Go(o,n){return o[1]>=o[0]&&o[1]<n}function Im(o,n){if(o[0]>o[1])return[null,null];let l=Sf(o);if(n){if(l===2)return[o,null];let p=Math.floor(l/2);return[[o[0],o[0]+p],[o[0]+p,o[1]]]}if(l===1)return[o,null];let h=Math.floor(l/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function Cm(o,n){if(!Go(n,o.length))return[1/0,1/0,-1/0,-1/0];let l=[1/0,1/0,-1/0,-1/0];for(let h=n[0];h<=n[1];++h)ru(l,o[h]);return l}function Pm(o){let n=[1/0,1/0,-1/0,-1/0];for(let l of o)for(let h of l)ru(n,h);return n}function qf(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function Mm(o,n,l){if(!qf(o)||!qf(n))return NaN;let h=0,p=0;return o[2]<n[0]&&(h=n[0]-o[2]),o[0]>n[2]&&(h=o[0]-n[2]),o[1]>n[3]&&(p=o[1]-n[3]),o[3]<n[1]&&(p=n[1]-o[3]),l.distance([0,0],[h,p])}function nu(o,n,l){let h=l.pointOnLine(n,o);return l.distance(o,h.point)}function Om(o,n,l,h,p){let y=Math.min(nu(o,[l,h],p),nu(n,[l,h],p)),_=Math.min(nu(l,[o,n],p),nu(h,[o,n],p));return Math.min(y,_)}function jA(o,n,l,h,p){if(!Go(n,o.length)||!Go(h,l.length))return 1/0;let y=1/0;for(let _=n[0];_<n[1];++_){let b=o[_],A=o[_+1];for(let P=h[0];P<h[1];++P){let M=l[P],k=l[P+1];if(bf(b,A,M,k))return 0;y=Math.min(y,Om(b,A,M,k,p))}}return y}function Hr(o,n,l,h,p){if(!Go(n,o.length)||!Go(h,l.length))return NaN;let y=1/0;for(let _=n[0];_<=n[1];++_)for(let b=h[0];b<=h[1];++b)if(y=Math.min(y,p.distance(o[_],l[b])),y===0)return y;return y}function VA(o,n,l){if(nl(o,n,!0))return 0;let h=1/0;for(let p of n){let y=p[0],_=p[p.length-1];if(y!==_&&(h=Math.min(h,nu(o,[_,y],l)),h===0))return h;let b=l.pointOnLine(p,o);if(h=Math.min(h,l.distance(o,b.point)),h===0)return h}return h}function Vt(o,n,l,h){if(!Go(n,o.length))return NaN;for(let y=n[0];y<=n[1];++y)if(nl(o[y],l,!0))return 0;let p=1/0;for(let y=n[0];y<n[1];++y){let _=o[y],b=o[y+1];for(let A of l)for(let P=0,M=A.length,k=M-1;P<M;k=P++){let F=A[k],U=A[P];if(bf(_,b,F,U))return 0;p=Math.min(p,Om(_,b,F,U,h))}}return p}function Af(o,n){for(let l of o)for(let h of l)if(nl(h,n,!0))return!0;return!1}function wr(o,n,l,h=1/0){let p=Pm(o),y=Pm(n);if(h!==1/0&&Mm(p,y,l)>=h)return h;if(ms(p,y)){if(Af(o,n))return 0}else if(Af(n,o))return 0;let _=1/0;for(let b of o)for(let A=0,P=b.length,M=P-1;A<P;M=A++){let k=b[M],F=b[A];for(let U of n)for(let V=0,W=U.length,ee=W-1;V<W;ee=V++){let ne=U[ee],xe=U[V];if(bf(k,F,ne,xe))return 0;_=Math.min(_,Om(k,F,ne,xe,l))}}return _}function mr(o,n,l,h,p,y){if(!y)return;let _=Mm(Cm(h,y),p,l);_<n&&o.push([_,y,[0,0]])}function au(o,n,l,h,p,y,_){if(!y||!_)return;let b=Mm(Cm(h,y),Cm(p,_),l);b<n&&o.push([b,y,_])}function Bc(o,n,l,h,p=1/0){let y=Math.min(h.distance(o[0],l[0][0]),p);if(y===0)return y;let _=new lx([[0,[0,o.length-1],[0,0]]],px),b=Pm(l);for(;_.length>0;){let A=_.pop();if(A[0]>=y)continue;let P=A[1],M=n?50:100;if(Sf(P)<=M){if(!Go(P,o.length))return NaN;if(n){let k=Vt(o,P,l,h);if(isNaN(k)||k===0)return k;y=Math.min(y,k)}else for(let k=P[0];k<=P[1];++k){let F=VA(o[k],l,h);if(y=Math.min(y,F),y===0)return 0}}else{let k=Im(P,n);mr(_,y,h,o,b,k[0]),mr(_,y,h,o,b,k[1])}}return y}function Uc(o,n,l,h,p,y=1/0){let _=Math.min(y,p.distance(o[0],l[0]));if(_===0)return _;let b=new lx([[0,[0,o.length-1],[0,l.length-1]]],px);for(;b.length>0;){let A=b.pop();if(A[0]>=_)continue;let P=A[1],M=A[2],k=n?50:100,F=h?50:100;if(Sf(P)<=k&&Sf(M)<=F){if(!Go(P,o.length)&&Go(M,l.length))return NaN;let U;if(n&&h)U=jA(o,P,l,M,p),_=Math.min(_,U);else if(n&&!h){let V=o.slice(P[0],P[1]+1);for(let W=M[0];W<=M[1];++W)if(U=nu(l[W],V,p),_=Math.min(_,U),_===0)return _}else if(!n&&h){let V=l.slice(M[0],M[1]+1);for(let W=P[0];W<=P[1];++W)if(U=nu(o[W],V,p),_=Math.min(_,U),_===0)return _}else U=Hr(o,P,l,M,p),_=Math.min(_,U)}else{let U=Im(P,n),V=Im(M,h);au(b,_,p,o,l,U[0],V[0]),au(b,_,p,o,l,U[0],V[1]),au(b,_,p,o,l,U[1],V[0]),au(b,_,p,o,l,U[1],V[1])}}return _}function km(o){return o.type==="MultiPolygon"?o.coordinates.map(n=>({type:"Polygon",coordinates:n})):o.type==="MultiLineString"?o.coordinates.map(n=>({type:"LineString",coordinates:n})):o.type==="MultiPoint"?o.coordinates.map(n=>({type:"Point",coordinates:n})):[o]}class ou{constructor(n,l){this.type=Ne,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Qs(n[1])){let h=n[1];if(h.type==="FeatureCollection")return new ou(h,h.features.map(p=>km(p.geometry)).flat());if(h.type==="Feature")return new ou(h,km(h.geometry));if("type"in h&&"coordinates"in h)return new ou(h,km(h))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,h){let p=l.geometry(),y=p.flat().map(A=>Am([A.x,A.y],l.canonical));if(p.length===0)return NaN;let _=new Tm(y[0][1]),b=1/0;for(let A of h){switch(A.type){case"Point":b=Math.min(b,Uc(y,!1,[A.coordinates],!1,_,b));break;case"LineString":b=Math.min(b,Uc(y,!1,A.coordinates,!0,_,b));break;case"Polygon":b=Math.min(b,Bc(y,!1,A.coordinates,_,b));}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,h){let p=l.geometry(),y=p.flat().map(A=>Am([A.x,A.y],l.canonical));if(p.length===0)return NaN;let _=new Tm(y[0][1]),b=1/0;for(let A of h){switch(A.type){case"Point":b=Math.min(b,Uc(y,!0,[A.coordinates],!1,_,b));break;case"LineString":b=Math.min(b,Uc(y,!0,A.coordinates,!0,_,b));break;case"Polygon":b=Math.min(b,Bc(y,!0,A.coordinates,_,b));}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="Polygon")return function(l,h){let p=l.geometry();if(p.length===0||p[0].length===0)return NaN;let y=wf(p,0).map(A=>A.map(P=>P.map(M=>Am([M.x,M.y],l.canonical)))),_=new Tm(y[0][0][0][1]),b=1/0;for(let A of h)for(let P of y){switch(A.type){case"Point":b=Math.min(b,Bc([A.coordinates],!1,P,_,b));break;case"LineString":b=Math.min(b,Bc(A.coordinates,!0,P,_,b));break;case"Polygon":b=Math.min(b,wr(P,A.coordinates,_,b));}if(b===0)return b}return b}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let al={"==":MA,"!=":ex,">":OA,"<":tx,">=":rx,"<=":kA,array:Fa,at:_m,boolean:Fa,case:mf,coalesce:yf,collator:zc,format:xf,image:Sm,in:xm,"index-of":tl,interpolate:_n,"interpolate-hcl":_n,"interpolate-lab":_n,length:qm,let:ps,literal:La,match:bm,number:Fa,"number-format":wm,object:Fa,slice:Lc,step:rl,string:Fa,"to-boolean":za,"to-color":za,"to-number":za,"to-string":za,var:or,within:iu,distance:ou};class oa{constructor(n,l,h,p){this.name=n,this.type=l,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,l){let h=n[0],p=oa.definitions[h];if(!p)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let y=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,b=_.filter(([P])=>!Array.isArray(P)||P.length===n.length-1),A=null;for(let[P,M]of b){A=new eu(l.registry,jc,l.path,null,l.scope);let k=[],F=!1;for(let U=1;U<n.length;U++){let V=n[U],W=Array.isArray(P)?P[U-1]:P.type,ee=A.parse(V,1+k.length,W);if(!ee){F=!0;break}k.push(ee)}if(!F)if(Array.isArray(P)&&P.length!==k.length)A.error(`Expected ${P.length} arguments, but found ${k.length} instead.`);else{for(let U=0;U<k.length;U++){let V=Array.isArray(P)?P[U]:P.type,W=k[U];A.concat(U+1).checkSubtype(V,W.type)}if(A.errors.length===0)return new oa(h,y,M,k)}}if(b.length===1)l.errors.push(...A.errors);else{let P=(b.length?b:_).map(([k])=>{return F=k,Array.isArray(F)?`(${F.map(N).join(", ")})`:`(${N(F.type)}...)`;var F}).join(" | "),M=[];for(let k=1;k<n.length;k++){let F=l.parse(n[k],1+M.length);if(!F)return null;M.push(N(F.type))}l.error(`Expected arguments of type ${P}, but found (${M.join(", ")}) instead.`)}return null}static register(n,l){oa.definitions=l;for(let h in l)n[h]=oa}}function Rm(o,[n,l,h,p]){n=n.evaluate(o),l=l.evaluate(o),h=h.evaluate(o);let y=p?p.evaluate(o):1,_=el(n,l,h,y);if(_)throw new ri(_);return new fr(n/255,l/255,h/255,y,!1)}function Dm(o,n){return o in n}function Lm(o,n){let l=n[o];return l===void 0?null:l}function su(o){return{type:o}}function jc(o){if(o instanceof or)return jc(o.boundExpression);if(o instanceof oa&&o.name==="error"||o instanceof zc||o instanceof iu||o instanceof ou)return!1;let n=o instanceof za||o instanceof Fa,l=!0;return o.eachChild(h=>{l=n?l&&jc(h):l&&h instanceof La}),!!l&&Vc(o)&&$c(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Vc(o){if(o instanceof oa&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof iu||o instanceof ou)return!1;let n=!0;return o.eachChild(l=>{n&&!Vc(l)&&(n=!1)}),n}function ol(o){if(o instanceof oa&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(l=>{n&&!ol(l)&&(n=!1)}),n}function $c(o,n){if(o instanceof oa&&n.indexOf(o.name)>=0)return!1;let l=!0;return o.eachChild(h=>{l&&!$c(h,n)&&(l=!1)}),l}function Ef(o){return{result:"success",value:o}}function sl(o){return{result:"error",value:o}}function ul(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function mx(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Fm(o){return!!o.expression&&o.expression.interpolated}function ir(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Tf(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function $A(o){return o}function vx(o,n){let l=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),y=o.type||(Fm(n)?"exponential":"interval");if(l||n.type==="padding"){let M=l?fr.parse:Bn.parse;(o=Qi({},o)).stops&&(o.stops=o.stops.map(k=>[k[0],M(k[1])])),o.default=M(o.default?o.default:n.default)}if(o.colorSpace&&(_=o.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var _;let b,A,P;if(y==="exponential")b=yx;else if(y==="interval")b=If;else if(y==="categorical"){b=gx,A=Object.create(null);for(let M of o.stops)A[M[0]]=M[1];P=typeof o.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);b=_x}if(h){let M={},k=[];for(let V=0;V<o.stops.length;V++){let W=o.stops[V],ee=W[0].zoom;M[ee]===void 0&&(M[ee]={zoom:ee,type:o.type,property:o.property,default:o.default,stops:[]},k.push(ee)),M[ee].stops.push([W[0].value,W[1]])}let F=[];for(let V of k)F.push([M[V].zoom,vx(M[V],n)]);let U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:_n.interpolationFactor.bind(void 0,U),zoomStops:F.map(V=>V[0]),evaluate:({zoom:V},W)=>yx({stops:F,base:o.base},n,V).evaluate(V,W)}}if(p){let M=y==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:_n.interpolationFactor.bind(void 0,M),zoomStops:o.stops.map(k=>k[0]),evaluate:({zoom:k})=>b(o,n,k,A,P)}}return{kind:"source",evaluate(M,k){let F=k&&k.properties?k.properties[o.property]:void 0;return F===void 0?ll(o.default,n.default):b(o,n,F,A,P)}}}function ll(o,n,l){return o!==void 0?o:n!==void 0?n:l!==void 0?l:void 0}function gx(o,n,l,h,p){return ll(typeof l===p?h[l]:void 0,o.default,n.default)}function If(o,n,l){if(ir(l)!=="number")return ll(o.default,n.default);let h=o.stops.length;if(h===1||l<=o.stops[0][0])return o.stops[0][1];if(l>=o.stops[h-1][0])return o.stops[h-1][1];let p=vf(o.stops.map(y=>y[0]),l);return o.stops[p][1]}function yx(o,n,l){let h=o.base!==void 0?o.base:1;if(ir(l)!=="number")return ll(o.default,n.default);let p=o.stops.length;if(p===1||l<=o.stops[0][0])return o.stops[0][1];if(l>=o.stops[p-1][0])return o.stops[p-1][1];let y=vf(o.stops.map(M=>M[0]),l),_=function(M,k,F,U){let V=U-F,W=M-F;return V===0?0:k===1?W/V:(Math.pow(k,W)-1)/(Math.pow(k,V)-1)}(l,h,o.stops[y][0],o.stops[y+1][0]),b=o.stops[y][1],A=o.stops[y+1][1],P=yn[n.type]||$A;return typeof b.evaluate=="function"?{evaluate(...M){let k=b.evaluate.apply(void 0,M),F=A.evaluate.apply(void 0,M);if(k!==void 0&&F!==void 0)return P(k,F,_,o.colorSpace)}}:P(b,A,_,o.colorSpace)}function _x(o,n,l){switch(n.type){case"color":l=fr.parse(l);break;case"formatted":l=Nn.fromString(l.toString());break;case"resolvedImage":l=Un.fromString(l.toString());break;case"padding":l=Bn.parse(l);break;default:ir(l)===n.type||n.type==="enum"&&n.values[l]||(l=void 0);}return ll(l,o.default,n.default)}oa.register(al,{error:[{kind:"error"},[Ft],(o,[n])=>{throw new ri(n.evaluate(o))}],typeof:[Ft,[Ot],(o,[n])=>N(li(n.evaluate(o)))],"to-rgba":[B(Ne,4),[gn],(o,[n])=>{let[l,h,p,y]=n.evaluate(o).rgb;return[255*l,255*h,255*p,y]}],rgb:[gn,[Ne,Ne,Ne],Rm],rgba:[gn,[Ne,Ne,Ne,Ne],Rm],has:{type:qt,overloads:[[[Ft],(o,[n])=>Dm(n.evaluate(o),o.properties())],[[Ft,Da],(o,[n,l])=>Dm(n.evaluate(o),l.evaluate(o))]]},get:{type:Ot,overloads:[[[Ft],(o,[n])=>Lm(n.evaluate(o),o.properties())],[[Ft,Da],(o,[n,l])=>Lm(n.evaluate(o),l.evaluate(o))]]},"feature-state":[Ot,[Ft],(o,[n])=>Lm(n.evaluate(o),o.featureState||{})],properties:[Da,[],o=>o.properties()],"geometry-type":[Ft,[],o=>o.geometryType()],id:[Ot,[],o=>o.id()],zoom:[Ne,[],o=>o.globals.zoom],"heatmap-density":[Ne,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ne,[],o=>o.globals.lineProgress||0],accumulated:[Ot,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ne,su(Ne),(o,n)=>{let l=0;for(let h of n)l+=h.evaluate(o);return l}],"*":[Ne,su(Ne),(o,n)=>{let l=1;for(let h of n)l*=h.evaluate(o);return l}],"-":{type:Ne,overloads:[[[Ne,Ne],(o,[n,l])=>n.evaluate(o)-l.evaluate(o)],[[Ne],(o,[n])=>-n.evaluate(o)]]},"/":[Ne,[Ne,Ne],(o,[n,l])=>n.evaluate(o)/l.evaluate(o)],"%":[Ne,[Ne,Ne],(o,[n,l])=>n.evaluate(o)%l.evaluate(o)],ln2:[Ne,[],()=>Math.LN2],pi:[Ne,[],()=>Math.PI],e:[Ne,[],()=>Math.E],"^":[Ne,[Ne,Ne],(o,[n,l])=>Math.pow(n.evaluate(o),l.evaluate(o))],sqrt:[Ne,[Ne],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[Ne,[Ne],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[Ne,[Ne],(o,[n])=>Math.log(n.evaluate(o))],log2:[Ne,[Ne],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[Ne,[Ne],(o,[n])=>Math.sin(n.evaluate(o))],cos:[Ne,[Ne],(o,[n])=>Math.cos(n.evaluate(o))],tan:[Ne,[Ne],(o,[n])=>Math.tan(n.evaluate(o))],asin:[Ne,[Ne],(o,[n])=>Math.asin(n.evaluate(o))],acos:[Ne,[Ne],(o,[n])=>Math.acos(n.evaluate(o))],atan:[Ne,[Ne],(o,[n])=>Math.atan(n.evaluate(o))],min:[Ne,su(Ne),(o,n)=>Math.min(...n.map(l=>l.evaluate(o)))],max:[Ne,su(Ne),(o,n)=>Math.max(...n.map(l=>l.evaluate(o)))],abs:[Ne,[Ne],(o,[n])=>Math.abs(n.evaluate(o))],round:[Ne,[Ne],(o,[n])=>{let l=n.evaluate(o);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ne,[Ne],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[Ne,[Ne],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[qt,[Ft,Ot],(o,[n,l])=>o.properties()[n.value]===l.value],"filter-id-==":[qt,[Ot],(o,[n])=>o.id()===n.value],"filter-type-==":[qt,[Ft],(o,[n])=>o.geometryType()===n.value],"filter-<":[qt,[Ft,Ot],(o,[n,l])=>{let h=o.properties()[n.value],p=l.value;return typeof h==typeof p&&h<p}],"filter-id-<":[qt,[Ot],(o,[n])=>{let l=o.id(),h=n.value;return typeof l==typeof h&&l<h}],"filter->":[qt,[Ft,Ot],(o,[n,l])=>{let h=o.properties()[n.value],p=l.value;return typeof h==typeof p&&h>p}],"filter-id->":[qt,[Ot],(o,[n])=>{let l=o.id(),h=n.value;return typeof l==typeof h&&l>h}],"filter-<=":[qt,[Ft,Ot],(o,[n,l])=>{let h=o.properties()[n.value],p=l.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[qt,[Ot],(o,[n])=>{let l=o.id(),h=n.value;return typeof l==typeof h&&l<=h}],"filter->=":[qt,[Ft,Ot],(o,[n,l])=>{let h=o.properties()[n.value],p=l.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[qt,[Ot],(o,[n])=>{let l=o.id(),h=n.value;return typeof l==typeof h&&l>=h}],"filter-has":[qt,[Ot],(o,[n])=>n.value in o.properties()],"filter-has-id":[qt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[qt,[B(Ft)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[qt,[B(Ot)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[qt,[Ft,B(Ot)],(o,[n,l])=>l.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[qt,[Ft,B(Ot)],(o,[n,l])=>function(h,p,y,_){for(;y<=_;){let b=y+_>>1;if(p[b]===h)return!0;p[b]>h?_=b-1:y=b+1}return!1}(o.properties()[n.value],l.value,0,l.value.length-1)],all:{type:qt,overloads:[[[qt,qt],(o,[n,l])=>n.evaluate(o)&&l.evaluate(o)],[su(qt),(o,n)=>{for(let l of n)if(!l.evaluate(o))return!1;return!0}]]},any:{type:qt,overloads:[[[qt,qt],(o,[n,l])=>n.evaluate(o)||l.evaluate(o)],[su(qt),(o,n)=>{for(let l of n)if(l.evaluate(o))return!0;return!1}]]},"!":[qt,[qt],(o,[n])=>!n.evaluate(o)],"is-supported-script":[qt,[Ft],(o,[n])=>{let l=o.globals&&o.globals.isSupportedScript;return!l||l(n.evaluate(o))}],upcase:[Ft,[Ft],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Ft,[Ft],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Ft,su(Ot),(o,n)=>n.map(l=>Dc(l.evaluate(o))).join("")],"resolved-locale":[Ft,[ao],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Cf{constructor(n,l){var h;this.expression=n,this._warningHistory={},this._evaluator=new pf,this._defaultValue=l?(h=l).type==="color"&&Tf(h.default)?new fr(0,0,0,0):h.type==="color"?fr.parse(h.default)||null:h.type==="padding"?Bn.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?aa.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(n,l,h,p,y,_){return this._evaluator.globals=n,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,l,h,p,y,_){this._evaluator.globals=n,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_||null;try{let b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new ri(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console!="undefined"&&console.warn(b.message)),this._defaultValue}}}function Pf(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in al}function cl(o,n){let l=new eu(al,jc,[],n?function(p){let y={color:gn,string:Ft,number:Ne,enum:Ft,boolean:qt,formatted:Wo,padding:ds,resolvedImage:oo,variableAnchorOffsetCollection:ie};return p.type==="array"?B(y[p.value]||Ot,p.length):y[p.type]}(n):void 0),h=l.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Ef(new Cf(h,n)):sl(l.errors)}class hl{constructor(n,l){this.kind=n,this._styleExpression=l,this.isStateDependent=n!=="constant"&&!ol(l.expression)}evaluateWithoutErrorHandling(n,l,h,p,y,_){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,p,y,_)}evaluate(n,l,h,p,y,_){return this._styleExpression.evaluate(n,l,h,p,y,_)}}class fl{constructor(n,l,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=n!=="camera"&&!ol(l.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,l,h,p,y,_){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,p,y,_)}evaluate(n,l,h,p,y,_){return this._styleExpression.evaluate(n,l,h,p,y,_)}interpolationFactor(n,l,h){return this.interpolationType?_n.interpolationFactor(this.interpolationType,n,l,h):0}}function zm(o,n){let l=cl(o,n);if(l.result==="error")return l;let h=l.value.expression,p=Vc(h);if(!p&&!ul(n))return sl([new Zr("","data expressions not supported")]);let y=$c(h,["zoom"]);if(!y&&!mx(n))return sl([new Zr("","zoom expressions not supported")]);let _=Wc(h);return _||y?_ instanceof Zr?sl([_]):_ instanceof _n&&!Fm(n)?sl([new Zr("","\"interpolate\" expressions cannot be used with this property")]):Ef(_?new fl(p?"camera":"composite",l.value,_.labels,_ instanceof _n?_.interpolation:void 0):new hl(p?"constant":"source",l.value)):sl([new Zr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class dl{constructor(n,l){this._parameters=n,this._specification=l,Qi(this,vx(this._parameters,this._specification))}static deserialize(n){return new dl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Wc(o){let n=null;if(o instanceof ps)n=Wc(o.result);else if(o instanceof yf){for(let l of o.args)if(n=Wc(l),n)break}else(o instanceof rl||o instanceof _n)&&o.input instanceof oa&&o.input.name==="zoom"&&(n=o);return n instanceof Zr||o.eachChild(l=>{let h=Wc(l);h instanceof Zr?n=h:!n&&h?n=new Zr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):n&&h&&n!==h&&(n=new Zr("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),n}function Mf(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(let n of o.slice(1))if(!Mf(n)&&typeof n!="boolean")return!1;return!0;default:return!0;}}let Of={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nm(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Mf(o)||(o=kf(o));let n=cl(o,Of);if(n.result==="error")throw new Error(n.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,p)=>n.value.evaluate(l,h,{},p),needGeometry:xx(o)}}function WA(o,n){return o<n?-1:o>n?1:0}function xx(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let n=1;n<o.length;n++)if(xx(o[n]))return!0;return!1}function kf(o){if(!o)return!0;let n=o[0];return o.length<=1?n!=="any":n==="=="?Bm(o[1],o[2],"=="):n==="!="?Ni(Bm(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Bm(o[1],o[2],n):n==="any"?(l=o.slice(1),["any"].concat(l.map(kf))):n==="all"?["all"].concat(o.slice(1).map(kf)):n==="none"?["all"].concat(o.slice(1).map(kf).map(Ni)):n==="in"?Gc(o[1],o.slice(2)):n==="!in"?Ni(Gc(o[1],o.slice(2))):n==="has"?Kc(o[1]):n!=="!has"||Ni(Kc(o[1]));var l}function Bm(o,n,l){switch(o){case"$type":return[`filter-type-${l}`,n];case"$id":return[`filter-id-${l}`,n];default:return[`filter-${l}`,o,n];}}function Gc(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(l=>typeof l!=typeof n[0])?["filter-in-large",o,["literal",n.sort(WA)]]:["filter-in-small",o,["literal",n]];}}function Kc(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o];}}function Ni(o){return["!",o]}function uu(o){let n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(let y of o)p+=`${uu(y)},`;return`${p}]`}let l=Object.keys(o).sort(),h="{";for(let p=0;p<l.length;p++)h+=`${JSON.stringify(l[p])}:${uu(o[l[p]])},`;return`${h}}`}function bx(o){let n="";for(let l of fs)n+=`/${uu(o[l])}`;return n}function wx(o){let n=o.value;return n?[new Re(o.key,n,"constants have been deprecated as of v8")]:[]}function Xr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Na(o){if(Array.isArray(o))return o.map(Na);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){let n={};for(let l in o)n[l]=Na(o[l]);return n}return Xr(o)}function jn(o){let n=o.key,l=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},y=o.style,_=o.styleSpec,b=o.validateSpec,A=[],P=ir(l);if(P!=="object")return[new Re(n,l,`object expected, ${P} found`)];for(let M in l){let k=M.split(".")[0],F=h[k]||h["*"],U;if(p[k])U=p[k];else if(h[k])U=b;else if(p["*"])U=p["*"];else{if(!h["*"]){A.push(new Re(n,l[M],`unknown property "${M}"`));continue}U=b}A=A.concat(U({key:(n&&`${n}.`)+M,value:l[M],valueSpec:F,style:y,styleSpec:_,object:l,objectKey:M,validateSpec:b},l))}for(let M in h)p[M]||h[M].required&&h[M].default===void 0&&l[M]===void 0&&A.push(new Re(n,l,`missing required property "${M}"`));return A}function Zc(o){let n=o.value,l=o.valueSpec,h=o.style,p=o.styleSpec,y=o.key,_=o.arrayElementValidator||o.validateSpec;if(ir(n)!=="array")return[new Re(y,n,`array expected, ${ir(n)} found`)];if(l.length&&n.length!==l.length)return[new Re(y,n,`array length ${l.length} expected, length ${n.length} found`)];if(l["min-length"]&&n.length<l["min-length"])return[new Re(y,n,`array length at least ${l["min-length"]} expected, length ${n.length} found`)];let b={type:l.value,values:l.values};p.$version<7&&(b.function=l.function),ir(l.value)==="object"&&(b=l.value);let A=[];for(let P=0;P<n.length;P++)A=A.concat(_({array:n,arrayIndex:P,value:n[P],valueSpec:b,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${y}[${P}]`}));return A}function Um(o){let n=o.key,l=o.value,h=o.valueSpec,p=ir(l);return p==="number"&&l!=l&&(p="NaN"),p!=="number"?[new Re(n,l,`number expected, ${p} found`)]:"minimum"in h&&l<h.minimum?[new Re(n,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new Re(n,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function Rf(o){let n=o.valueSpec,l=Xr(o.value.type),h,p,y,_={},b=l!=="categorical"&&o.value.property===void 0,A=!b,P=ir(o.value.stops)==="array"&&ir(o.value.stops[0])==="array"&&ir(o.value.stops[0][0])==="object",M=jn({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(U){if(l==="identity")return[new Re(U.key,U.value,"identity function may not have a \"stops\" property")];let V=[],W=U.value;return V=V.concat(Zc({key:U.key,value:W,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:k})),ir(W)==="array"&&W.length===0&&V.push(new Re(U.key,W,"array must have at least one stop")),V},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:n,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return l==="identity"&&b&&M.push(new Re(o.key,o.value,"missing required property \"property\"")),l==="identity"||o.value.stops||M.push(new Re(o.key,o.value,"missing required property \"stops\"")),l==="exponential"&&o.valueSpec.expression&&!Fm(o.valueSpec)&&M.push(new Re(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(A&&!ul(o.valueSpec)?M.push(new Re(o.key,o.value,"property functions not supported")):b&&!mx(o.valueSpec)&&M.push(new Re(o.key,o.value,"zoom functions not supported"))),l!=="categorical"&&!P||o.value.property!==void 0||M.push(new Re(o.key,o.value,"\"property\" property is required")),M;function k(U){let V=[],W=U.value,ee=U.key;if(ir(W)!=="array")return[new Re(ee,W,`array expected, ${ir(W)} found`)];if(W.length!==2)return[new Re(ee,W,`array length 2 expected, length ${W.length} found`)];if(P){if(ir(W[0])!=="object")return[new Re(ee,W,`object expected, ${ir(W[0])} found`)];if(W[0].zoom===void 0)return[new Re(ee,W,"object stop key must have zoom")];if(W[0].value===void 0)return[new Re(ee,W,"object stop key must have value")];if(y&&y>Xr(W[0].zoom))return[new Re(ee,W[0].zoom,"stop zoom values must appear in ascending order")];Xr(W[0].zoom)!==y&&(y=Xr(W[0].zoom),p=void 0,_={}),V=V.concat(jn({key:`${ee}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Um,value:F}}))}else V=V.concat(F({key:`${ee}[0]`,value:W[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},W));return Pf(Na(W[1]))?V.concat([new Re(`${ee}[1]`,W[1],"expressions are not allowed in function stops.")]):V.concat(U.validateSpec({key:`${ee}[1]`,value:W[1],valueSpec:n,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function F(U,V){let W=ir(U.value),ee=Xr(U.value),ne=U.value!==null?U.value:V;if(h){if(W!==h)return[new Re(U.key,ne,`${W} stop domain type must match previous stop domain type ${h}`)]}else h=W;if(W!=="number"&&W!=="string"&&W!=="boolean")return[new Re(U.key,ne,"stop domain value must be a number, string, or boolean")];if(W!=="number"&&l!=="categorical"){let xe=`number expected, ${W} found`;return ul(n)&&l===void 0&&(xe+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Re(U.key,ne,xe)]}return l!=="categorical"||W!=="number"||isFinite(ee)&&Math.floor(ee)===ee?l!=="categorical"&&W==="number"&&p!==void 0&&ee<p?[new Re(U.key,ne,"stop domain values must appear in ascending order")]:(p=ee,l==="categorical"&&ee in _?[new Re(U.key,ne,"stop domain values must be unique")]:(_[ee]=!0,[])):[new Re(U.key,ne,`integer expected, found ${ee}`)]}}function pl(o){let n=(o.expressionContext==="property"?zm:cl)(Na(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new Re(`${o.key}${h.key}`,o.value,h.message));let l=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!l.outputDefined())return[new Re(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ol(l))return[new Re(o.key,o.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(o.expressionContext==="filter"&&!ol(l))return[new Re(o.key,o.value,"\"feature-state\" data expressions are not supported with filters.")];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!$c(l,["zoom","feature-state"]))return[new Re(o.key,o.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(o.expressionContext==="cluster-initial"&&!Vc(l))return[new Re(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ko(o){let n=o.key,l=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Xr(l))===-1&&p.push(new Re(n,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(Xr(l))===-1&&p.push(new Re(n,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),p}function jm(o){return Mf(Na(o.value))?pl(Qi({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Df(o)}function Df(o){let n=o.value,l=o.key;if(ir(n)!=="array")return[new Re(l,n,`array expected, ${ir(n)} found`)];let h=o.styleSpec,p,y=[];if(n.length<1)return[new Re(l,n,"filter array must have at least 1 element")];switch(y=y.concat(Ko({key:`${l}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Xr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Xr(n[1])==="$type"&&y.push(new Re(l,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&y.push(new Re(l,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=ir(n[1]),p!=="string"&&y.push(new Re(`${l}[1]`,n[1],`string expected, ${p} found`)));for(let _=2;_<n.length;_++)p=ir(n[_]),Xr(n[1])==="$type"?y=y.concat(Ko({key:`${l}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&y.push(new Re(`${l}[${_}]`,n[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)y=y.concat(Df({key:`${l}[${_}]`,value:n[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=ir(n[1]),n.length!==2?y.push(new Re(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&y.push(new Re(`${l}[1]`,n[1],`string expected, ${p} found`));}return y}function Vm(o,n){let l=o.key,h=o.validateSpec,p=o.style,y=o.styleSpec,_=o.value,b=o.objectKey,A=y[`${n}_${o.layerType}`];if(!A)return[];let P=b.match(/^(.*)-transition$/);if(n==="paint"&&P&&A[P[1]]&&A[P[1]].transition)return h({key:l,value:_,valueSpec:y.transition,style:p,styleSpec:y});let M=o.valueSpec||A[b];if(!M)return[new Re(l,_,`unknown property "${b}"`)];let k;if(ir(_)==="string"&&ul(M)&&!M.tokens&&(k=/^{([^}]+)}$/.exec(_)))return[new Re(l,_,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(k[1])} }\`.`)];let F=[];return o.layerType==="symbol"&&(b==="text-field"&&p&&!p.glyphs&&F.push(new Re(l,_,"use of \"text-field\" requires a style \"glyphs\" property")),b==="text-font"&&Tf(Na(_))&&Xr(_.type)==="identity"&&F.push(new Re(l,_,"\"text-font\" does not support identity functions"))),F.concat(h({key:o.key,value:_,valueSpec:M,style:p,styleSpec:y,expressionContext:"property",propertyType:n,propertyKey:b}))}function Lf(o){return Vm(o,"paint")}function $m(o){return Vm(o,"layout")}function Wm(o){let n=[],l=o.value,h=o.key,p=o.style,y=o.styleSpec;l.type||l.ref||n.push(new Re(h,l,"either \"type\" or \"ref\" is required"));let _=Xr(l.type),b=Xr(l.ref);if(l.id){let A=Xr(l.id);for(let P=0;P<o.arrayIndex;P++){let M=p.layers[P];Xr(M.id)===A&&n.push(new Re(h,l.id,`duplicate layer id "${l.id}", previously used at line ${M.id.__line__}`))}}if("ref"in l){let A;["type","source","source-layer","filter","layout"].forEach(P=>{P in l&&n.push(new Re(h,l[P],`"${P}" is prohibited for ref layers`))}),p.layers.forEach(P=>{Xr(P.id)===b&&(A=P)}),A?A.ref?n.push(new Re(h,l.ref,"ref cannot reference another ref layer")):_=Xr(A.type):n.push(new Re(h,l.ref,`ref layer "${b}" not found`))}else if(_!=="background")if(l.source){let A=p.sources&&p.sources[l.source],P=A&&Xr(A.type);A?P==="vector"&&_==="raster"?n.push(new Re(h,l.source,`layer "${l.id}" requires a raster source`)):P!=="raster-dem"&&_==="hillshade"?n.push(new Re(h,l.source,`layer "${l.id}" requires a raster-dem source`)):P==="raster"&&_!=="raster"?n.push(new Re(h,l.source,`layer "${l.id}" requires a vector source`)):P!=="vector"||l["source-layer"]?P==="raster-dem"&&_!=="hillshade"?n.push(new Re(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!l.paint||!l.paint["line-gradient"]||P==="geojson"&&A.lineMetrics||n.push(new Re(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Re(h,l,`layer "${l.id}" must specify a "source-layer"`)):n.push(new Re(h,l.source,`source "${l.source}" not found`))}else n.push(new Re(h,l,"missing required property \"source\""));return n=n.concat(jn({key:h,value:l,valueSpec:y.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:l.type,valueSpec:y.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:l,objectKey:"type"}),filter:jm,layout:A=>jn({layer:l,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":P=>$m(Qi({layerType:_},P))}}),paint:A=>jn({layer:l,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":P=>Lf(Qi({layerType:_},P))}})}})),n}function lu(o){let n=o.value,l=o.key,h=ir(n);return h!=="string"?[new Re(l,n,`string expected, ${h} found`)]:[]}let Ff={promoteId:function({key:o,value:n}){if(ir(n)==="string")return lu({key:o,value:n});{let l=[];for(let h in n)l.push(...lu({key:`${o}.${h}`,value:n[h]}));return l}}};function Hc(o){let n=o.value,l=o.key,h=o.styleSpec,p=o.style,y=o.validateSpec;if(!n.type)return[new Re(l,n,"\"type\" is required")];let _=Xr(n.type),b;switch(_){case"vector":case"raster":return b=jn({key:l,value:n,valueSpec:h[`source_${_.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Ff,validateSpec:y}),b;case"raster-dem":return b=function(A){var P;let M=(P=A.sourceName)!==null&&P!==void 0?P:"",k=A.value,F=A.styleSpec,U=F.source_raster_dem,V=A.style,W=[],ee=ir(k);if(k===void 0)return W;if(ee!=="object")return W.push(new Re("source_raster_dem",k,`object expected, ${ee} found`)),W;let ne=Xr(k.encoding)==="custom",xe=["redFactor","greenFactor","blueFactor","baseShift"],ce=A.value.encoding?`"${A.value.encoding}"`:"Default";for(let ye in k)!ne&&xe.includes(ye)?W.push(new Re(ye,k[ye],`In "${M}": "${ye}" is only valid when "encoding" is set to "custom". ${ce} encoding found`)):U[ye]?W=W.concat(A.validateSpec({key:ye,value:k[ye],valueSpec:U[ye],validateSpec:A.validateSpec,style:V,styleSpec:F})):W.push(new Re(ye,k[ye],`unknown property "${ye}"`));return W}({sourceName:l,value:n,style:o.style,styleSpec:h,validateSpec:y}),b;case"geojson":if(b=jn({key:l,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:y,objectElementValidators:Ff}),n.cluster)for(let A in n.clusterProperties){let[P,M]=n.clusterProperties[A],k=typeof P=="string"?[P,["accumulated"],["get",A]]:P;b.push(...pl({key:`${l}.${A}.map`,value:M,validateSpec:y,expressionContext:"cluster-map"})),b.push(...pl({key:`${l}.${A}.reduce`,value:k,validateSpec:y,expressionContext:"cluster-reduce"}))}return b;case"video":return jn({key:l,value:n,valueSpec:h.source_video,style:p,validateSpec:y,styleSpec:h});case"image":return jn({key:l,value:n,valueSpec:h.source_image,style:p,validateSpec:y,styleSpec:h});case"canvas":return[new Re(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ko({key:`${l}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:y,styleSpec:h});}}function Gm(o){let n=o.value,l=o.styleSpec,h=l.light,p=o.style,y=[],_=ir(n);if(n===void 0)return y;if(_!=="object")return y=y.concat([new Re("light",n,`object expected, ${_} found`)]),y;for(let b in n){let A=b.match(/^(.*)-transition$/);y=y.concat(A&&h[A[1]]&&h[A[1]].transition?o.validateSpec({key:b,value:n[b],valueSpec:l.transition,validateSpec:o.validateSpec,style:p,styleSpec:l}):h[b]?o.validateSpec({key:b,value:n[b],valueSpec:h[b],validateSpec:o.validateSpec,style:p,styleSpec:l}):[new Re(b,n[b],`unknown property "${b}"`)])}return y}function Km(o){let n=o.value,l=o.styleSpec,h=l.sky,p=o.style,y=ir(n);if(n===void 0)return[];if(y!=="object")return[new Re("sky",n,`object expected, ${y} found`)];let _=[];for(let b in n)_=_.concat(h[b]?o.validateSpec({key:b,value:n[b],valueSpec:h[b],style:p,styleSpec:l}):[new Re(b,n[b],`unknown property "${b}"`)]);return _}function Zm(o){let n=o.value,l=o.styleSpec,h=l.terrain,p=o.style,y=[],_=ir(n);if(n===void 0)return y;if(_!=="object")return y=y.concat([new Re("terrain",n,`object expected, ${_} found`)]),y;for(let b in n)y=y.concat(h[b]?o.validateSpec({key:b,value:n[b],valueSpec:h[b],validateSpec:o.validateSpec,style:p,styleSpec:l}):[new Re(b,n[b],`unknown property "${b}"`)]);return y}function Hm(o){let n=[],l=o.value,h=o.key;if(Array.isArray(l)){let p=[],y=[];for(let _ in l)l[_].id&&p.includes(l[_].id)&&n.push(new Re(h,l,`all the sprites' ids must be unique, but ${l[_].id} is duplicated`)),p.push(l[_].id),l[_].url&&y.includes(l[_].url)&&n.push(new Re(h,l,`all the sprites' URLs must be unique, but ${l[_].url} is duplicated`)),y.push(l[_].url),n=n.concat(jn({key:`${h}[${_}]`,value:l[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return lu({key:h,value:l})}let zf={"*":()=>[],array:Zc,boolean:function(o){let n=o.value,l=o.key,h=ir(n);return h!=="boolean"?[new Re(l,n,`boolean expected, ${h} found`)]:[]},number:Um,color:function(o){let n=o.key,l=o.value,h=ir(l);return h!=="string"?[new Re(n,l,`color expected, ${h} found`)]:fr.parse(String(l))?[]:[new Re(n,l,`color expected, "${l}" found`)]},constants:wx,enum:Ko,filter:jm,function:Rf,layer:Wm,object:jn,source:Hc,light:Gm,sky:Km,terrain:Zm,projection:function(o){let n=o.value,l=o.styleSpec,h=l.projection,p=o.style,y=ir(n);if(n===void 0)return[];if(y!=="object")return[new Re("projection",n,`object expected, ${y} found`)];let _=[];for(let b in n)_=_.concat(h[b]?o.validateSpec({key:b,value:n[b],valueSpec:h[b],style:p,styleSpec:l}):[new Re(b,n[b],`unknown property "${b}"`)]);return _},string:lu,formatted:function(o){return lu(o).length===0?[]:pl(o)},resolvedImage:function(o){return lu(o).length===0?[]:pl(o)},padding:function(o){let n=o.key,l=o.value;if(ir(l)==="array"){if(l.length<1||l.length>4)return[new Re(n,l,`padding requires 1 to 4 values; ${l.length} values found`)];let h={type:"number"},p=[];for(let y=0;y<l.length;y++)p=p.concat(o.validateSpec({key:`${n}[${y}]`,value:l[y],validateSpec:o.validateSpec,valueSpec:h}));return p}return Um({key:n,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(o){let n=o.key,l=o.value,h=ir(l),p=o.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new Re(n,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let _=0;_<l.length;_+=2)y=y.concat(Ko({key:`${n}[${_}]`,value:l[_],valueSpec:p.layout_symbol["text-anchor"]})),y=y.concat(Zc({key:`${n}[${_+1}]`,value:l[_+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return y},sprite:Hm};function ml(o){let n=o.value,l=o.valueSpec,h=o.styleSpec;return o.validateSpec=ml,l.expression&&Tf(Xr(n))?Rf(o):l.expression&&Pf(Na(n))?pl(o):l.type&&zf[l.type]?zf[l.type](o):jn(Qi({},o,{valueSpec:l.type?h[l.type]:l}))}function Sx(o){let n=o.value,l=o.key,h=lu(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Re(l,n,"\"glyphs\" url must include a \"{fontstack}\" token")),n.indexOf("{range}")===-1&&h.push(new Re(l,n,"\"glyphs\" url must include a \"{range}\" token"))),h}function sa(o,n=Ae){let l=[];return l=l.concat(ml({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:ml,objectElementValidators:{glyphs:Sx,"*":()=>[]}})),o.constants&&(l=l.concat(wx({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:ml}))),Xm(l)}function uo(o){return function(n){return o(da(at({},n),{validateSpec:ml}))}}function Xm(o){return[].concat(o).sort((n,l)=>n.line-l.line)}function Ba(o){return function(...n){return Xm(o.apply(this,n))}}sa.source=Ba(uo(Hc)),sa.sprite=Ba(uo(Hm)),sa.glyphs=Ba(uo(Sx)),sa.light=Ba(uo(Gm)),sa.sky=Ba(uo(Km)),sa.terrain=Ba(uo(Zm)),sa.layer=Ba(uo(Wm)),sa.filter=Ba(uo(jm)),sa.paintProperty=Ba(uo(Lf)),sa.layoutProperty=Ba(uo($m));let cu=sa,GA=cu.light,KA=cu.sky,qx=cu.paintProperty,Ax=cu.layoutProperty;function Jm(o,n){let l=!1;if(n&&n.length)for(let h of n)o.fire(new Ra(new Error(h.message))),l=!0;return l}class vl{constructor(n,l,h){let p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;let _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(l=_[1])+2*(h=_[2]);for(let A=0;A<this.d*this.d;A++){let P=_[3+A],M=_[3+A+1];p.push(P===M?null:_.subarray(P,M))}let b=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],b),this.bboxes=_.subarray(b),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=n,this.padding=h,this.scale=l/n,this.uid=0;let y=h/l*n;this.min=-y,this.max=n+y}insert(n,l,h,p,y){this._forEachCell(l,h,p,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,l,h,p,y,_){this.cells[y].push(_)}query(n,l,h,p,y){let _=this.min,b=this.max;if(n<=_&&l<=_&&b<=h&&b<=p&&!y)return Array.prototype.slice.call(this.keys);{let A=[];return this._forEachCell(n,l,h,p,this._queryCell,A,{},y),A}}_queryCell(n,l,h,p,y,_,b,A){let P=this.cells[y];if(P!==null){let M=this.keys,k=this.bboxes;for(let F=0;F<P.length;F++){let U=P[F];if(b[U]===void 0){let V=4*U;(A?A(k[V+0],k[V+1],k[V+2],k[V+3]):n<=k[V+2]&&l<=k[V+3]&&h>=k[V+0]&&p>=k[V+1])?(b[U]=!0,_.push(M[U])):b[U]=!1}}}}_forEachCell(n,l,h,p,y,_,b,A){let P=this._convertToCellCoord(n),M=this._convertToCellCoord(l),k=this._convertToCellCoord(h),F=this._convertToCellCoord(p);for(let U=P;U<=k;U++)for(let V=M;V<=F;V++){let W=this.d*V+U;if((!A||A(this._convertFromCellCoord(U),this._convertFromCellCoord(V),this._convertFromCellCoord(U+1),this._convertFromCellCoord(V+1)))&&y.call(this,n,l,h,p,W,_,b,A))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let n=this.cells,l=3+this.cells.length+1+1,h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;let p=new Int32Array(l+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let y=l;for(let _=0;_<n.length;_++){let b=n[_];p[3+_]=y,p.set(b,y),y+=b.length}return p[3+n.length]=y,p.set(this.keys,y),y+=this.keys.length,p[3+n.length+1]=y,p.set(this.bboxes,y),y+=this.bboxes.length,p.buffer}static serialize(n,l){let h=n.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(n){return new vl(n.buffer)}}let ua={};function nt(o,n,l={}){if(ua[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),ua[o]={klass:n,omit:l.omit||[],shallow:l.shallow||[]}}nt("Object",Object),nt("TransferableGridIndex",vl),nt("Color",fr),nt("Error",Error),nt("AJAXError",Ji),nt("ResolvedImage",Un),nt("StylePropertyFunction",dl),nt("StyleExpression",Cf,{omit:["_evaluator"]}),nt("ZoomDependentExpression",fl),nt("ZoomConstantExpression",hl),nt("CompoundExpression",oa,{omit:["_evaluate"]});for(let o in al)al[o]._classRegistryKey||nt(`Expression_${o}`,al[o]);function Nf(o){return o&&typeof ArrayBuffer!="undefined"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Ym(o){return o.$name||o.constructor._classRegistryKey}function Ex(o){return!function(n){if(n===null||typeof n!="object")return!1;let l=Ym(n);return!(!l||l==="Object")}(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||Nf(o)||_r(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function gl(o,n){if(Ex(o))return(Nf(o)||_r(o))&&n&&n.push(o),ArrayBuffer.isView(o)&&n&&n.push(o.buffer),o instanceof ImageData&&n&&n.push(o.data.buffer),o;if(Array.isArray(o)){let y=[];for(let _ of o)y.push(gl(_,n));return y}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);let l=Ym(o);if(!l)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!ua[l])throw new Error(`${l} is not registered.`);let{klass:h}=ua[l],p=h.serialize?h.serialize(o,n):{};if(h.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let y in o){if(!o.hasOwnProperty(y)||ua[l].omit.indexOf(y)>=0)continue;let _=o[y];p[y]=ua[l].shallow.indexOf(y)>=0?_:gl(_,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(p.$name=l),p}function yl(o){if(Ex(o))return o;if(Array.isArray(o))return o.map(yl);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);let n=Ym(o)||"Object";if(!ua[n])throw new Error(`can't deserialize unregistered class ${n}`);let{klass:l}=ua[n];if(!l)throw new Error(`can't deserialize unregistered class ${n}`);if(l.deserialize)return l.deserialize(o);let h=Object.create(l.prototype);for(let p of Object.keys(o)){if(p==="$name")continue;let y=o[p];h[p]=ua[n].shallow.indexOf(p)>=0?y:yl(y)}return h}class Qm{constructor(){this.first=!0}update(n,l){let h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}let Xt={"Latin-1 Supplement":o=>o>=128&&o<=255,"Hangul Jamo":o=>o>=4352&&o<=4607,Khmer:o=>o>=6016&&o<=6143,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Katakana:o=>o>=12448&&o<=12543,Kanbun:o=>o>=12688&&o<=12703,"CJK Strokes":o=>o>=12736&&o<=12783,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"Private Use Area":o=>o>=57344&&o<=63743,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function ev(o){for(let n of o)if(rv(n.charCodeAt(0)))return!0;return!1}function ZA(o){for(let n of o)if(!_l(n.charCodeAt(0)))return!1;return!0}function tv(o){let n=o.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch(h){return null}}).filter(l=>l);return new RegExp(n.join("|"),"u")}let HA=tv(["Arab","Dupl","Mong","Ougr","Syrc"]);function _l(o){return!HA.test(String.fromCodePoint(o))}let Tx=tv(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function rv(o){return!(o!==746&&o!==747&&(o<4352||!(Xt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Xt["CJK Compatibility"](o)||Xt["CJK Strokes"](o)||!(!Xt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Xt["Enclosed CJK Letters and Months"](o)||Xt["Ideographic Description Characters"](o)||Xt.Kanbun(o)||Xt.Katakana(o)&&o!==12540||!(!Xt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Xt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Xt["Vertical Forms"](o)||Xt["Yijing Hexagram Symbols"](o)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(o))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(o))||Tx.test(String.fromCodePoint(o)))))}function Ix(o){return!(rv(o)||function(n){return!!(Xt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Xt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Xt["Letterlike Symbols"](n)||Xt["Number Forms"](n)||Xt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Xt["Control Pictures"](n)&&n!==9251||Xt["Optical Character Recognition"](n)||Xt["Enclosed Alphanumerics"](n)||Xt["Geometric Shapes"](n)||Xt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Xt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Xt["CJK Symbols and Punctuation"](n)||Xt.Katakana(n)||Xt["Private Use Area"](n)||Xt["CJK Compatibility Forms"](n)||Xt["Small Form Variants"](n)||Xt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}let XA=tv(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function iv(o){return XA.test(String.fromCodePoint(o))}function JA(o,n){return!(!n&&iv(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Xt.Khmer(o))}function YA(o){for(let n of o)if(iv(n.charCodeAt(0)))return!0;return!1}let Vn=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Er{constructor(n,l){this.zoom=n,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Qm,this.transition={})}isSupportedScript(n){return function(l,h){for(let p of l)if(!JA(p.charCodeAt(0),h))return!1;return!0}(n,Vn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let n=this.zoom,l=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class xl{constructor(n,l){this.property=n,this.value=l,this.expression=function(h,p){if(Tf(h))return new dl(h,p);if(Pf(h)){let y=zm(h,p);if(y.result==="error")throw new Error(y.value.map(_=>`${_.key}: ${_.message}`).join(", "));return y.value}{let y=h;return p.type==="color"&&typeof h=="string"?y=fr.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(y=aa.parse(h)):y=Bn.parse(h),{kind:"constant",evaluate:()=>y}}}(l===void 0?n.specification.default:l,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,l,h){return this.property.possiblyEvaluate(this,n,l,h)}}class Bf{constructor(n){this.property=n,this.value=new xl(n,void 0)}transitioned(n,l){return new Cx(this.property,this.value,l,Le({},n.transition,this.transition),n.now)}untransitioned(){return new Cx(this.property,this.value,null,{},0)}}class Uf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Ve(this._values[n].value.value)}setValue(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Bf(this._values[n].property)),this._values[n].value=new xl(this._values[n].property,l===null?void 0:Ve(l))}getTransition(n){return Ve(this._values[n].transition)}setTransition(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Bf(this._values[n].property)),this._values[n].transition=Ve(l)||void 0}serialize(){let n={};for(let l of Object.keys(this._values)){let h=this.getValue(l);h!==void 0&&(n[l]=h);let p=this.getTransition(l);p!==void 0&&(n[`${l}-transition`]=p)}return n}transitioned(n,l){let h=new Xc(this._properties);for(let p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,l._values[p]);return h}untransitioned(){let n=new Xc(this._properties);for(let l of Object.keys(this._values))n._values[l]=this._values[l].untransitioned();return n}}class Cx{constructor(n,l,h,p,y){this.property=n,this.value=l,this.begin=y+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,l,h){let p=n.now||0,y=this.value.possiblyEvaluate(n,l,h),_=this.prior;if(_){if(p>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(p<this.begin)return _.possiblyEvaluate(n,l,h);{let b=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,l,h),y,function(A){if(A<=0)return 0;if(A>=1)return 1;let P=A*A,M=P*A;return 4*(A<.5?M:3*(A-P)+M-.75)}(b))}}return y}}class Xc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,l,h){let p=new Yc(this._properties);for(let y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(n,l,h);return p}hasTransition(){for(let n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Jc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Ve(this._values[n].value)}setValue(n,l){this._values[n]=new xl(this._values[n].property,l===null?void 0:Ve(l))}serialize(){let n={};for(let l of Object.keys(this._values)){let h=this.getValue(l);h!==void 0&&(n[l]=h)}return n}possiblyEvaluate(n,l,h){let p=new Yc(this._properties);for(let y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(n,l,h);return p}}class lo{constructor(n,l,h){this.property=n,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,l,h,p){return this.property.evaluate(this.value,this.parameters,n,l,h,p)}}class Yc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class st{constructor(n){this.specification=n}possiblyEvaluate(n,l){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(l)}interpolate(n,l,h){let p=yn[this.specification.type];return p?p(n,l,h):n}}class St{constructor(n,l){this.specification=n,this.overrides=l}possiblyEvaluate(n,l,h,p){return new lo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(l,null,{},h,p)}:n.expression,l)}interpolate(n,l,h){if(n.value.kind!=="constant"||l.value.kind!=="constant")return n;if(n.value.value===void 0||l.value.value===void 0)return new lo(this,{kind:"constant",value:void 0},n.parameters);let p=yn[this.specification.type];if(p){let y=p(n.value.value,l.value.value,h);return new lo(this,{kind:"constant",value:y},n.parameters)}return n}evaluate(n,l,h,p,y,_){return n.kind==="constant"?n.value:n.evaluate(l,h,p,y,_)}}class jf extends St{possiblyEvaluate(n,l,h,p){if(n.value===void 0)return new lo(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){let y=n.expression.evaluate(l,null,{},h,p),_=n.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,b=this._calculate(_,_,_,l);return new lo(this,{kind:"constant",value:b},l)}if(n.expression.kind==="camera"){let y=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new lo(this,{kind:"constant",value:y},l)}return new lo(this,n.expression,l)}evaluate(n,l,h,p,y,_){if(n.kind==="source"){let b=n.evaluate(l,h,p,y,_);return this._calculate(b,b,b,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},h,p),n.evaluate({zoom:Math.floor(l.zoom)},h,p),n.evaluate({zoom:Math.floor(l.zoom)+1},h,p),l):n.value}_calculate(n,l,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class Vf{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){let y=n.expression.evaluate(l,null,{},h,p);return this._calculate(y,y,y,l)}return this._calculate(n.expression.evaluate(new Er(Math.floor(l.zoom-1),l)),n.expression.evaluate(new Er(Math.floor(l.zoom),l)),n.expression.evaluate(new Er(Math.floor(l.zoom+1),l)),l)}}_calculate(n,l,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class nv{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,p){return!!n.expression.evaluate(l,null,{},h,p)}interpolate(){return!1}}class g{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let l in n){let h=n[l];h.specification.overridable&&this.overridableProperties.push(l);let p=this.defaultPropertyValues[l]=new xl(h,void 0),y=this.defaultTransitionablePropertyValues[l]=new Bf(h);this.defaultTransitioningPropertyValues[l]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=p.possiblyEvaluate({})}}}nt("DataDrivenProperty",St),nt("DataConstantProperty",st),nt("CrossFadedDataDrivenProperty",jf),nt("CrossFadedProperty",Vf),nt("ColorRampProperty",nv);let i="-transition";class c extends $o{constructor(n,l){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new Jc(l.layout)),l.paint)){this._transitionablePaint=new Uf(l.paint);for(let h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(let h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yc(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,l,h={}){l!=null&&this._validate(Ax,`layers.${this.id}.layout.${n}`,n,l,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)}getPaintProperty(n){return n.endsWith(i)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,l,h={}){if(l!=null&&this._validate(qx,`layers.${this.id}.paint.${n}`,n,l,h))return!1;if(n.endsWith(i))return this._transitionablePaint.setTransition(n.slice(0,-11),l||void 0),!1;{let p=this._transitionablePaint._values[n],y=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),b=p.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);let A=this._transitionablePaint._values[n].value;return A.isDataDriven()||_||y||this._handleOverridablePaintPropertyUpdate(n,b,A)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,l,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)}serialize(){let n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),pt(n,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(n,l,h,p,y={}){return(!y||y.validate!==!1)&&Jm(this,n.call(cu,{key:l,layerType:this.type,objectKey:h,value:p,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let n in this.paint._values){let l=this.paint.get(n);if(l instanceof lo&&ul(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}let f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class d{constructor(n,l){this._structArray=n,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,l){return n._trim(),l&&(n.isTransferred=!0,l.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){let l=Object.create(this.prototype);return l.arrayBuffer=n.arrayBuffer,l.length=n.length,l.capacity=n.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function S(o,n=1){let l=0,h=0;return{members:o.map(p=>{let y=f[p.type].BYTES_PER_ELEMENT,_=l=E(l,Math.max(n,y)),b=p.components||1;return h=Math.max(h,y),l+=y*b,{name:p.name,type:p.type,components:b,offset:_}}),size:E(l,Math.max(h,n)),alignment:n}}function E(o,n){return Math.ceil(o/n)*n}class C extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l){let h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){let p=2*n;return this.int16[p+0]=l,this.int16[p+1]=h,n}}C.prototype.bytesPerElement=4,nt("StructArrayLayout2i4",C);class O extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=p,n}}O.prototype.bytesPerElement=6,nt("StructArrayLayout3i6",O);class R extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p){let y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,p)}emplace(n,l,h,p,y){let _=4*n;return this.int16[_+0]=l,this.int16[_+1]=h,this.int16[_+2]=p,this.int16[_+3]=y,n}}R.prototype.bytesPerElement=8,nt("StructArrayLayout4i8",R);class D extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let b=this.length;return this.resize(b+1),this.emplace(b,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,b){let A=6*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=p,this.int16[A+3]=y,this.int16[A+4]=_,this.int16[A+5]=b,n}}D.prototype.bytesPerElement=12,nt("StructArrayLayout2i4i12",D);class j extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let b=this.length;return this.resize(b+1),this.emplace(b,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,b){let A=4*n,P=8*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.uint8[P+4]=p,this.uint8[P+5]=y,this.uint8[P+6]=_,this.uint8[P+7]=b,n}}j.prototype.bytesPerElement=8,nt("StructArrayLayout2i4ub8",j);class G extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l){let h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){let p=2*n;return this.float32[p+0]=l,this.float32[p+1]=h,n}}G.prototype.bytesPerElement=8,nt("StructArrayLayout2f8",G);class X extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,b,A,P,M){let k=this.length;return this.resize(k+1),this.emplace(k,n,l,h,p,y,_,b,A,P,M)}emplace(n,l,h,p,y,_,b,A,P,M,k){let F=10*n;return this.uint16[F+0]=l,this.uint16[F+1]=h,this.uint16[F+2]=p,this.uint16[F+3]=y,this.uint16[F+4]=_,this.uint16[F+5]=b,this.uint16[F+6]=A,this.uint16[F+7]=P,this.uint16[F+8]=M,this.uint16[F+9]=k,n}}X.prototype.bytesPerElement=20,nt("StructArrayLayout10ui20",X);class re extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,b,A,P,M,k,F){let U=this.length;return this.resize(U+1),this.emplace(U,n,l,h,p,y,_,b,A,P,M,k,F)}emplace(n,l,h,p,y,_,b,A,P,M,k,F,U){let V=12*n;return this.int16[V+0]=l,this.int16[V+1]=h,this.int16[V+2]=p,this.int16[V+3]=y,this.uint16[V+4]=_,this.uint16[V+5]=b,this.uint16[V+6]=A,this.uint16[V+7]=P,this.int16[V+8]=M,this.int16[V+9]=k,this.int16[V+10]=F,this.int16[V+11]=U,n}}re.prototype.bytesPerElement=24,nt("StructArrayLayout4i4ui4i24",re);class ae extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=p,n}}ae.prototype.bytesPerElement=12,nt("StructArrayLayout3f12",ae);class oe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){let l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint32[1*n+0]=l,n}}oe.prototype.bytesPerElement=4,nt("StructArrayLayout1ul4",oe);class le extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,b,A,P){let M=this.length;return this.resize(M+1),this.emplace(M,n,l,h,p,y,_,b,A,P)}emplace(n,l,h,p,y,_,b,A,P,M){let k=10*n,F=5*n;return this.int16[k+0]=l,this.int16[k+1]=h,this.int16[k+2]=p,this.int16[k+3]=y,this.int16[k+4]=_,this.int16[k+5]=b,this.uint32[F+3]=A,this.uint16[k+8]=P,this.uint16[k+9]=M,n}}le.prototype.bytesPerElement=20,nt("StructArrayLayout6i1ul2ui20",le);class Q extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let b=this.length;return this.resize(b+1),this.emplace(b,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,b){let A=6*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=p,this.int16[A+3]=y,this.int16[A+4]=_,this.int16[A+5]=b,n}}Q.prototype.bytesPerElement=12,nt("StructArrayLayout2i2i2i12",Q);class fe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y){let _=this.length;return this.resize(_+1),this.emplace(_,n,l,h,p,y)}emplace(n,l,h,p,y,_){let b=4*n,A=8*n;return this.float32[b+0]=l,this.float32[b+1]=h,this.float32[b+2]=p,this.int16[A+6]=y,this.int16[A+7]=_,n}}fe.prototype.bytesPerElement=16,nt("StructArrayLayout2f1f2i16",fe);class ge extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let b=this.length;return this.resize(b+1),this.emplace(b,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,b){let A=16*n,P=4*n,M=8*n;return this.uint8[A+0]=l,this.uint8[A+1]=h,this.float32[P+1]=p,this.float32[P+2]=y,this.int16[M+6]=_,this.int16[M+7]=b,n}}ge.prototype.bytesPerElement=16,nt("StructArrayLayout2ub2f2i16",ge);class we extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=p,n}}we.prototype.bytesPerElement=6,nt("StructArrayLayout3ui6",we);class Ce extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,b,A,P,M,k,F,U,V,W,ee,ne){let xe=this.length;return this.resize(xe+1),this.emplace(xe,n,l,h,p,y,_,b,A,P,M,k,F,U,V,W,ee,ne)}emplace(n,l,h,p,y,_,b,A,P,M,k,F,U,V,W,ee,ne,xe){let ce=24*n,ye=12*n,Ee=48*n;return this.int16[ce+0]=l,this.int16[ce+1]=h,this.uint16[ce+2]=p,this.uint16[ce+3]=y,this.uint32[ye+2]=_,this.uint32[ye+3]=b,this.uint32[ye+4]=A,this.uint16[ce+10]=P,this.uint16[ce+11]=M,this.uint16[ce+12]=k,this.float32[ye+7]=F,this.float32[ye+8]=U,this.uint8[Ee+36]=V,this.uint8[Ee+37]=W,this.uint8[Ee+38]=ee,this.uint32[ye+10]=ne,this.int16[ce+22]=xe,n}}Ce.prototype.bytesPerElement=48,nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ce);class Fe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,b,A,P,M,k,F,U,V,W,ee,ne,xe,ce,ye,Ee,De,Ye,bt,He,We,ht,ot){let it=this.length;return this.resize(it+1),this.emplace(it,n,l,h,p,y,_,b,A,P,M,k,F,U,V,W,ee,ne,xe,ce,ye,Ee,De,Ye,bt,He,We,ht,ot)}emplace(n,l,h,p,y,_,b,A,P,M,k,F,U,V,W,ee,ne,xe,ce,ye,Ee,De,Ye,bt,He,We,ht,ot,it){let Ie=32*n,ft=16*n;return this.int16[Ie+0]=l,this.int16[Ie+1]=h,this.int16[Ie+2]=p,this.int16[Ie+3]=y,this.int16[Ie+4]=_,this.int16[Ie+5]=b,this.int16[Ie+6]=A,this.int16[Ie+7]=P,this.uint16[Ie+8]=M,this.uint16[Ie+9]=k,this.uint16[Ie+10]=F,this.uint16[Ie+11]=U,this.uint16[Ie+12]=V,this.uint16[Ie+13]=W,this.uint16[Ie+14]=ee,this.uint16[Ie+15]=ne,this.uint16[Ie+16]=xe,this.uint16[Ie+17]=ce,this.uint16[Ie+18]=ye,this.uint16[Ie+19]=Ee,this.uint16[Ie+20]=De,this.uint16[Ie+21]=Ye,this.uint16[Ie+22]=bt,this.uint32[ft+12]=He,this.float32[ft+13]=We,this.float32[ft+14]=ht,this.uint16[Ie+30]=ot,this.uint16[Ie+31]=it,n}}Fe.prototype.bytesPerElement=64,nt("StructArrayLayout8i15ui1ul2f2ui64",Fe);class Ke extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){let l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.float32[1*n+0]=l,n}}Ke.prototype.bytesPerElement=4,nt("StructArrayLayout1f4",Ke);class tt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.uint16[6*n+0]=l,this.float32[y+1]=h,this.float32[y+2]=p,n}}tt.prototype.bytesPerElement=12,nt("StructArrayLayout1ui2f12",tt);class je extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=4*n;return this.uint32[2*n+0]=l,this.uint16[y+2]=h,this.uint16[y+3]=p,n}}je.prototype.bytesPerElement=8,nt("StructArrayLayout1ul2ui8",je);class Ue extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l){let h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){let p=2*n;return this.uint16[p+0]=l,this.uint16[p+1]=h,n}}Ue.prototype.bytesPerElement=4,nt("StructArrayLayout2ui4",Ue);class ut extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){let l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint16[1*n+0]=l,n}}ut.prototype.bytesPerElement=2,nt("StructArrayLayout1ui2",ut);class Pt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,p){let y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,p)}emplace(n,l,h,p,y){let _=4*n;return this.float32[_+0]=l,this.float32[_+1]=h,this.float32[_+2]=p,this.float32[_+3]=y,n}}Pt.prototype.bytesPerElement=16,nt("StructArrayLayout4f16",Pt);class $e extends d{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}$e.prototype.size=20;class Xe extends le{get(n){return new $e(this,n)}}nt("CollisionBoxArray",Xe);class Tt extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Tt.prototype.size=48;class Tr extends Ce{get(n){return new Tt(this,n)}}nt("PlacedSymbolArray",Tr);class Bt extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Bt.prototype.size=64;class Kt extends Fe{get(n){return new Bt(this,n)}}nt("SymbolInstanceArray",Kt);class Ir extends Ke{getoffsetX(n){return this.float32[1*n+0]}}nt("GlyphOffsetArray",Ir);class Bi extends O{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}nt("SymbolLineVertexArray",Bi);class Ua extends d{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ua.prototype.size=12;class Cr extends tt{get(n){return new Ua(this,n)}}nt("TextAnchorOffsetArray",Cr);class xn extends d{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}xn.prototype.size=8;class tn extends je{get(n){return new xn(this,n)}}nt("FeatureIndexArray",tn);class Ui extends C{}class rn extends C{}class co extends C{}class bl extends D{}class $f extends j{}class wl extends G{}class la extends X{}class Wf extends re{}class av extends ae{}class ca extends oe{}class ha extends Q{}class vs extends ge{}class ja extends we{}class ki extends Ue{}let ji=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:$n}=ji;class Jt{constructor(n=[]){this.segments=n}prepareSegment(n,l,h,p){let y=this.segments[this.segments.length-1];return n>Jt.MAX_VERTEX_ARRAY_LENGTH&&cr(`Max vertices per segment is ${Jt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!y||y.vertexLength+n>Jt.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==p)&&(y={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(y.sortKey=p),this.segments.push(y)),y}get(){return this.segments}destroy(){for(let n of this.segments)for(let l in n.vaos)n.vaos[l].destroy()}static simpleSegment(n,l,h,p){return new Jt([{vertexOffset:n,primitiveOffset:l,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function hu(o,n){return 256*(o=ve(Math.floor(o),0,255))+ve(Math.floor(n),0,255)}Jt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,nt("SegmentVector",Jt);let Sl=S([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ql={exports:{}},Px={exports:{}};Px.exports=function(o,n){var l,h,p,y,_,b,A,P;for(h=o.length-(l=3&o.length),p=n,_=3432918353,b=461845907,P=0;P<h;)A=255&o.charCodeAt(P)|(255&o.charCodeAt(++P))<<8|(255&o.charCodeAt(++P))<<16|(255&o.charCodeAt(++P))<<24,++P,p=27492+(65535&(y=5*(65535&(p=(p^=A=(65535&(A=(A=(65535&A)*_+(((A>>>16)*_&65535)<<16)&4294967295)<<15|A>>>17))*b+(((A>>>16)*b&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(A=0,l){case 3:A^=(255&o.charCodeAt(P+2))<<16;case 2:A^=(255&o.charCodeAt(P+1))<<8;case 1:p^=A=(65535&(A=(A=(65535&(A^=255&o.charCodeAt(P)))*_+(((A>>>16)*_&65535)<<16)&4294967295)<<15|A>>>17))*b+(((A>>>16)*b&65535)<<16)&4294967295;}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var QA=Px.exports,Mx={exports:{}};Mx.exports=function(o,n){for(var l,h=o.length,p=n^h,y=0;h>=4;)l=1540483477*(65535&(l=255&o.charCodeAt(y)|(255&o.charCodeAt(++y))<<8|(255&o.charCodeAt(++y))<<16|(255&o.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:p^=(255&o.charCodeAt(y+2))<<16;case 2:p^=(255&o.charCodeAt(y+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(y)))+((1540483477*(p>>>16)&65535)<<16);}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var gs=QA,Ox=Mx.exports;ql.exports=gs,ql.exports.murmur3=gs,ql.exports.murmur2=Ox;var Gf=m(ql.exports);class Qc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,l,h,p){this.ids.push(Kf(n)),this.positions.push(l,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let l=Kf(n),h=0,p=this.ids.length-1;for(;h<p;){let _=h+p>>1;this.ids[_]>=l?p=_:h=_+1}let y=[];for(;this.ids[h]===l;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(n,l){let h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return Zf(h,p,0,h.length-1),l&&l.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){let l=new Qc;return l.ids=n.ids,l.positions=n.positions,l.indexed=!0,l}}function Kf(o){let n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Gf(String(o))}function Zf(o,n,l,h){for(;l<h;){let p=o[l+h>>1],y=l-1,_=h+1;for(;;){do y++;while(o[y]<p);do _--;while(o[_]>p);if(y>=_)break;Al(o,y,_),Al(n,3*y,3*_),Al(n,3*y+1,3*_+1),Al(n,3*y+2,3*_+2)}_-l<h-_?(Zf(o,n,l,_),l=_+1):(Zf(o,n,_+1,h),h=_)}}function Al(o,n,l){let h=o[n];o[n]=o[l],o[l]=h}nt("FeaturePositionMap",Qc);class eh{constructor(n,l){this.gl=n.gl,this.location=l}}class kx extends eh{constructor(n,l){super(n,l),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Gz extends eh{constructor(n,l){super(n,l),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Kz extends eh{constructor(n,l){super(n,l),this.current=fr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}let exe=new Float32Array(16);function eE(o){return[hu(255*o.r,255*o.g),hu(255*o.b,255*o.a)]}class ov{constructor(n,l,h){this.value=n,this.uniformNames=l.map(p=>`u_${p}`),this.type=h}setUniform(n,l,h){n.set(h.constantOr(this.value))}getBinding(n,l,h){return this.type==="color"?new Kz(n,l):new kx(n,l)}}class Hf{constructor(n,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=n.tlbr}setUniform(n,l,h,p){let y=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&n.set(y)}getBinding(n,l,h){return h.substr(0,9)==="u_pattern"?new Gz(n,l):new kx(n,l)}}class fu{constructor(n,l,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,l,h,p,y){let _=this.paintVertexArray.length,b=this.expression.evaluate(new Er(0),l,{},p,[],y);this.paintVertexArray.resize(n),this._setPaintValue(_,n,b)}updatePaintArray(n,l,h,p){let y=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,l,y)}_setPaintValue(n,l,h){if(this.type==="color"){let p=eE(h);for(let y=n;y<l;y++)this.paintVertexArray.emplace(y,p[0],p[1])}else{for(let p=n;p<l;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zo{constructor(n,l,h,p,y,_){this.expression=n,this.uniformNames=l.map(b=>`u_${b}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,l,h,p,y){let _=this.expression.evaluate(new Er(this.zoom),l,{},p,[],y),b=this.expression.evaluate(new Er(this.zoom+1),l,{},p,[],y),A=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(A,n,_,b)}updatePaintArray(n,l,h,p){let y=this.expression.evaluate({zoom:this.zoom},h,p),_=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,l,y,_)}_setPaintValue(n,l,h,p){if(this.type==="color"){let y=eE(h),_=eE(p);for(let b=n;b<l;b++)this.paintVertexArray.emplace(b,y[0],y[1],_[0],_[1])}else{for(let y=n;y<l;y++)this.paintVertexArray.emplace(y,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,l){let h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,p=ve(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,l,h){return new kx(n,l)}}class El{constructor(n,l,h,p,y,_){this.expression=n,this.type=l,this.useIntegerZoom=h,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(n,l,h){let p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(n,l,h,p,y){this._setPaintValues(n,l,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(n,l,h,p){if(!p||!h)return;let{min:y,mid:_,max:b}=h,A=p[y],P=p[_],M=p[b];if(A&&P&&M)for(let k=n;k<l;k++)this.zoomInPaintVertexArray.emplace(k,P.tl[0],P.tl[1],P.br[0],P.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],P.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(k,P.tl[0],P.tl[1],P.br[0],P.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],P.pixelRatio,M.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Sl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Sl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Zz{constructor(n,l,h){this.binders={},this._buffers=[];let p=[];for(let y in n.paint._values){if(!h(y))continue;let _=n.paint.get(y);if(!(_ instanceof lo&&ul(_.property.specification)))continue;let b=txe(y,n.type),A=_.value,P=_.property.specification.type,M=_.property.useIntegerZoom,k=_.property.specification["property-type"],F=k==="cross-faded"||k==="cross-faded-data-driven";if(A.kind==="constant")this.binders[y]=F?new Hf(A.value,b):new ov(A.value,b,P),p.push(`/u_${y}`);else if(A.kind==="source"||F){let U=Hz(y,P,"source");this.binders[y]=F?new El(A,P,M,l,U,n.id):new fu(A,b,P,U),p.push(`/a_${y}`)}else{let U=Hz(y,P,"composite");this.binders[y]=new Zo(A,b,P,M,l,U),p.push(`/z_${y}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){let l=this.binders[n];return l instanceof fu||l instanceof Zo?l.maxValue:0}populatePaintArrays(n,l,h,p,y){for(let _ in this.binders){let b=this.binders[_];(b instanceof fu||b instanceof Zo||b instanceof El)&&b.populatePaintArray(n,l,h,p,y)}}setConstantPatternPositions(n,l){for(let h in this.binders){let p=this.binders[h];p instanceof Hf&&p.setConstantPatternPositions(n,l)}}updatePaintArrays(n,l,h,p,y){let _=!1;for(let b in n){let A=l.getPositions(b);for(let P of A){let M=h.feature(P.index);for(let k in this.binders){let F=this.binders[k];if((F instanceof fu||F instanceof Zo||F instanceof El)&&F.expression.isStateDependent===!0){let U=p.paint.get(k);F.expression=U.value,F.updatePaintArray(P.start,P.end,M,n[b],y),_=!0}}}}return _}defines(){let n=[];for(let l in this.binders){let h=this.binders[l];(h instanceof ov||h instanceof Hf)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){let n=[];for(let l in this.binders){let h=this.binders[l];if(h instanceof fu||h instanceof Zo)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof El)for(let p=0;p<Sl.members.length;p++)n.push(Sl.members[p].name)}return n}getBinderUniforms(){let n=[];for(let l in this.binders){let h=this.binders[l];if(h instanceof ov||h instanceof Hf||h instanceof Zo)for(let p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,l){let h=[];for(let p in this.binders){let y=this.binders[p];if(y instanceof ov||y instanceof Hf||y instanceof Zo){for(let _ of y.uniformNames)if(l[_]){let b=y.getBinding(n,l[_],_);h.push({name:_,property:p,binding:b})}}}return h}setUniforms(n,l,h,p){for(let{name:y,property:_,binding:b}of l)this.binders[_].setUniform(b,p,h.get(_),y)}updatePaintBuffers(n){this._buffers=[];for(let l in this.binders){let h=this.binders[l];if(n&&h instanceof El){let p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof fu||h instanceof Zo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(let l in this.binders){let h=this.binders[l];(h instanceof fu||h instanceof Zo||h instanceof El)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(let n in this.binders){let l=this.binders[n];(l instanceof fu||l instanceof Zo||l instanceof El)&&l.destroy()}}}class th{constructor(n,l,h=()=>!0){this.programConfigurations={};for(let p of n)this.programConfigurations[p.id]=new Zz(p,l,h);this.needsUpload=!1,this._featureMap=new Qc,this._bufferOffset=0}populatePaintArrays(n,l,h,p,y,_){for(let b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,l,p,y,_);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,l,h,p){for(let y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(n,this._featureMap,l,y,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(let l in this.programConfigurations)this.programConfigurations[l].upload(n);this.needsUpload=!1}}destroy(){for(let n in this.programConfigurations)this.programConfigurations[n].destroy()}}function txe(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Hz(o,n,l){let h={color:{source:G,composite:Pt},number:{source:Ke,composite:G}},p=function(y){return{"line-pattern":{source:la,composite:la},"fill-pattern":{source:la,composite:la},"fill-extrusion-pattern":{source:la,composite:la}}[y]}(o);return p&&p[l]||h[n][l]}nt("ConstantBinder",ov),nt("CrossFadedConstantBinder",Hf),nt("SourceExpressionBinder",fu),nt("CrossFadedCompositeBinder",El),nt("CompositeExpressionBinder",Zo),nt("ProgramConfiguration",Zz,{omit:["_buffers"]}),nt("ProgramConfigurationSet",th);let ci=8192,tE=Math.pow(2,14)-1,Xz=-tE-1;function rh(o){let n=ci/o.extent,l=o.loadGeometry();for(let h=0;h<l.length;h++){let p=l[h];for(let y=0;y<p.length;y++){let _=p[y],b=Math.round(_.x*n),A=Math.round(_.y*n);_.x=ve(b,Xz,tE),_.y=ve(A,Xz,tE),(b<_.x||b>_.x+1||A<_.y||A>_.y+1)&&cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function ih(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?rh(o):[]}}function Rx(o,n,l,h,p){o.emplaceBack(2*n+(h+1)/2,2*l+(p+1)/2)}class rE{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new rn,this.indexArray=new ja,this.segments=new Jt,this.programConfigurations=new th(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){let p=this.layers[0],y=[],_=null,b=!1;p.type==="circle"&&(_=p.layout.get("circle-sort-key"),b=!_.isConstant());for(let{feature:A,id:P,index:M,sourceLayerIndex:k}of n){let F=this.layers[0]._featureFilter.needGeometry,U=ih(A,F);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),U,h))continue;let V=b?_.evaluate(U,{},h):void 0,W={id:P,properties:A.properties,type:A.type,sourceLayerIndex:k,index:M,geometry:F?U.geometry:rh(A),patterns:{},sortKey:V};y.push(W)}b&&y.sort((A,P)=>A.sortKey-P.sortKey);for(let A of y){let{geometry:P,index:M,sourceLayerIndex:k}=A,F=n[M].feature;this.addFeature(A,P,M,h),l.featureIndex.insert(F,P,M,k,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,$n),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,l,h,p){for(let y of l)for(let _ of y){let b=_.x,A=_.y;if(b<0||b>=ci||A<0||A>=ci)continue;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),M=P.vertexLength;Rx(this.layoutVertexArray,b,A,-1,-1),Rx(this.layoutVertexArray,b,A,1,-1),Rx(this.layoutVertexArray,b,A,1,1),Rx(this.layoutVertexArray,b,A,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function Jz(o,n){for(let l=0;l<o.length;l++)if(Xf(n,o[l]))return!0;for(let l=0;l<n.length;l++)if(Xf(o,n[l]))return!0;return!!iE(o,n)}function rxe(o,n,l){return!!Xf(o,n)||!!nE(n,o,l)}function Yz(o,n){if(o.length===1)return eN(n,o[0]);for(let l=0;l<n.length;l++){let h=n[l];for(let p=0;p<h.length;p++)if(Xf(o,h[p]))return!0}for(let l=0;l<o.length;l++)if(eN(n,o[l]))return!0;for(let l=0;l<n.length;l++)if(iE(o,n[l]))return!0;return!1}function ixe(o,n,l){if(o.length>1){if(iE(o,n))return!0;for(let h=0;h<n.length;h++)if(nE(n[h],o,l))return!0}for(let h=0;h<o.length;h++)if(nE(o[h],n,l))return!0;return!1}function iE(o,n){if(o.length===0||n.length===0)return!1;for(let l=0;l<o.length-1;l++){let h=o[l],p=o[l+1];for(let y=0;y<n.length-1;y++)if(nxe(h,p,n[y],n[y+1]))return!0}return!1}function nxe(o,n,l,h){return yt(o,l,h)!==yt(n,l,h)&&yt(o,n,l)!==yt(o,n,h)}function nE(o,n,l){let h=l*l;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(Qz(o,n[p-1],n[p])<h)return!0;return!1}function Qz(o,n,l){let h=n.distSqr(l);if(h===0)return o.distSqr(n);let p=((o.x-n.x)*(l.x-n.x)+(o.y-n.y)*(l.y-n.y))/h;return o.distSqr(p<0?n:p>1?l:l.sub(n)._mult(p)._add(n))}function eN(o,n){let l,h,p,y=!1;for(let _=0;_<o.length;_++){l=o[_];for(let b=0,A=l.length-1;b<l.length;A=b++)h=l[b],p=l[A],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(y=!y)}return y}function Xf(o,n){let l=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){let y=o[h],_=o[p];y.y>n.y!=_.y>n.y&&n.x<(_.x-y.x)*(n.y-y.y)/(_.y-y.y)+y.x&&(l=!l)}return l}function axe(o,n,l){let h=l[0],p=l[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;let y=yt(o,n,l[0]);return y!==yt(o,n,l[1])||y!==yt(o,n,l[2])||y!==yt(o,n,l[3])}function sv(o,n,l){let h=n.paint.get(o).value;return h.kind==="constant"?h.value:l.programConfigurations.get(n.id).getMaxValue(o)}function Dx(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Lx(o,n,l,h,p){if(!n[0]&&!n[1])return o;let y=T.convert(n)._mult(p);l==="viewport"&&y._rotate(-h);let _=[];for(let b=0;b<o.length;b++)_.push(o[b].sub(y));return _}let tN,rN;nt("CircleBucket",rE,{omit:["layers"]});var oxe={get paint(){return rN=rN||new g({"circle-radius":new St(Ae.paint_circle["circle-radius"]),"circle-color":new St(Ae.paint_circle["circle-color"]),"circle-blur":new St(Ae.paint_circle["circle-blur"]),"circle-opacity":new St(Ae.paint_circle["circle-opacity"]),"circle-translate":new st(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new st(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new st(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new st(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new St(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new St(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new St(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return tN=tN||new g({"circle-sort-key":new St(Ae.layout_circle["circle-sort-key"])})}},bn=1e-6,Jf=typeof Float32Array!="undefined"?Float32Array:Array;function aE(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function iN(o,n,l){var h=n[0],p=n[1],y=n[2],_=n[3],b=n[4],A=n[5],P=n[6],M=n[7],k=n[8],F=n[9],U=n[10],V=n[11],W=n[12],ee=n[13],ne=n[14],xe=n[15],ce=l[0],ye=l[1],Ee=l[2],De=l[3];return o[0]=ce*h+ye*b+Ee*k+De*W,o[1]=ce*p+ye*A+Ee*F+De*ee,o[2]=ce*y+ye*P+Ee*U+De*ne,o[3]=ce*_+ye*M+Ee*V+De*xe,o[4]=(ce=l[4])*h+(ye=l[5])*b+(Ee=l[6])*k+(De=l[7])*W,o[5]=ce*p+ye*A+Ee*F+De*ee,o[6]=ce*y+ye*P+Ee*U+De*ne,o[7]=ce*_+ye*M+Ee*V+De*xe,o[8]=(ce=l[8])*h+(ye=l[9])*b+(Ee=l[10])*k+(De=l[11])*W,o[9]=ce*p+ye*A+Ee*F+De*ee,o[10]=ce*y+ye*P+Ee*U+De*ne,o[11]=ce*_+ye*M+Ee*V+De*xe,o[12]=(ce=l[12])*h+(ye=l[13])*b+(Ee=l[14])*k+(De=l[15])*W,o[13]=ce*p+ye*A+Ee*F+De*ee,o[14]=ce*y+ye*P+Ee*U+De*ne,o[15]=ce*_+ye*M+Ee*V+De*xe,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var uv,sxe=iN;function Fx(o,n,l){var h=n[0],p=n[1],y=n[2],_=n[3];return o[0]=l[0]*h+l[4]*p+l[8]*y+l[12]*_,o[1]=l[1]*h+l[5]*p+l[9]*y+l[13]*_,o[2]=l[2]*h+l[6]*p+l[10]*y+l[14]*_,o[3]=l[3]*h+l[7]*p+l[11]*y+l[15]*_,o}uv=new Jf(4),Jf!=Float32Array&&(uv[0]=0,uv[1]=0,uv[2]=0,uv[3]=0);class uxe extends c{constructor(n){super(n,oxe)}createBucket(n){return new rE(n)}queryRadius(n){let l=n;return sv("circle-radius",this,l)+sv("circle-stroke-width",this,l)+Dx(this.paint.get("circle-translate"))}queryIntersectsFeature(n,l,h,p,y,_,b,A){let P=Lx(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,b),M=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),k=this.paint.get("circle-pitch-alignment")==="map",F=k?P:function(V,W){return V.map(ee=>nN(ee,W))}(P,A),U=k?M*b:M;for(let V of p)for(let W of V){let ee=k?W:nN(W,A),ne=U,xe=Fx([],[W.x,W.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ne*=xe[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ne*=_.cameraToCenterDistance/xe[3]),rxe(F,ee,ne))return!0}return!1}}function nN(o,n){let l=Fx([],[o.x,o.y,0,1],n);return new T(l[0]/l[3],l[1]/l[3])}class aN extends rE{}let oN;nt("HeatmapBucket",aN,{omit:["layers"]});var lxe={get paint(){return oN=oN||new g({"heatmap-radius":new St(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new St(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new st(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nv(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new st(Ae.paint_heatmap["heatmap-opacity"])})}};function oE(o,{width:n,height:l},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*l*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*l*h}`)}else p=new Uint8Array(n*l*h);return o.width=n,o.height=l,o.data=p,o}function sN(o,{width:n,height:l},h){if(n===o.width&&l===o.height)return;let p=oE({},{width:n,height:l},h);sE(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,l)},h),o.width=n,o.height=l,o.data=p.data}function sE(o,n,l,h,p,y){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||l.x>o.width-p.width||l.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");let _=o.data,b=n.data;if(_===b)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<p.height;A++){let P=((l.y+A)*o.width+l.x)*y,M=((h.y+A)*n.width+h.x)*y;for(let k=0;k<p.width*y;k++)b[M+k]=_[P+k]}return n}class lv{constructor(n,l){oE(this,n,1,l)}resize(n){sN(this,n,1)}clone(){return new lv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,p,y){sE(n,l,h,p,y,1)}}class Va{constructor(n,l){oE(this,n,4,l)}resize(n){sN(this,n,4)}replace(n,l){l?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Va({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,p,y){sE(n,l,h,p,y,4)}}function uN(o){let n={},l=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new Va({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);let y=(_,b,A)=>{n[o.evaluationKey]=A;let P=o.expression.evaluate(n);p.data[_+b+0]=Math.floor(255*P.r/P.a),p.data[_+b+1]=Math.floor(255*P.g/P.a),p.data[_+b+2]=Math.floor(255*P.b/P.a),p.data[_+b+3]=Math.floor(255*P.a)};if(o.clips)for(let _=0,b=0;_<h;++_,b+=4*l)for(let A=0,P=0;A<l;A++,P+=4){let M=A/(l-1),{start:k,end:F}=o.clips[_];y(b,P,k*(1-M)+F*M)}else for(let _=0,b=0;_<l;_++,b+=4)y(0,b,_/(l-1));return p}nt("AlphaImage",lv),nt("RGBAImage",Va);let uE="big-fb";class cxe extends c{createBucket(n){return new aN(n)}constructor(n){super(n,lxe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=uN({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(uE)&&this.heatmapFbos.delete(uE)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let lN;var hxe={get paint(){return lN=lN||new g({"hillshade-illumination-direction":new st(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new st(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new st(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new st(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new st(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new st(Ae.paint_hillshade["hillshade-accent-color"])})}};class fxe extends c{constructor(n){super(n,hxe)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let dxe=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:pxe}=dxe;function cN(o,n,l=2){let h=n&&n.length,p=h?n[0]*l:o.length,y=hN(o,0,p,l,!0),_=[];if(!y||y.next===y.prev)return _;let b,A,P;if(h&&(y=function(M,k,F,U){let V=[];for(let W=0,ee=k.length;W<ee;W++){let ne=hN(M,k[W]*U,W<ee-1?k[W+1]*U:M.length,U,!1);ne===ne.next&&(ne.steiner=!0),V.push(wxe(ne))}V.sort(_xe);for(let W=0;W<V.length;W++)F=xxe(V[W],F);return F}(o,n,y,l)),o.length>80*l){b=1/0,A=1/0;let M=-1/0,k=-1/0;for(let F=l;F<p;F+=l){let U=o[F],V=o[F+1];U<b&&(b=U),V<A&&(A=V),U>M&&(M=U),V>k&&(k=V)}P=Math.max(M-b,k-A),P=P!==0?32767/P:0}return cv(y,_,l,b,A,P,0),_}function hN(o,n,l,h,p){let y;if(p===function(_,b,A,P){let M=0;for(let k=b,F=A-P;k<A;k+=P)M+=(_[F]-_[k])*(_[k+1]+_[F+1]),F=k;return M}(o,n,l,h)>0)for(let _=n;_<l;_+=h)y=pN(_/h|0,o[_],o[_+1],y);else for(let _=l-h;_>=n;_-=h)y=pN(_/h|0,o[_],o[_+1],y);return y&&zx(y,y.next)&&(fv(y),y=y.next),y}function nh(o,n){if(!o)return o;n||(n=o);let l,h=o;do if(l=!1,h.steiner||!zx(h,h.next)&&ii(h.prev,h,h.next)!==0)h=h.next;else{if(fv(h),h=n=h.prev,h===h.next)break;l=!0}while(l||h!==n);return n}function cv(o,n,l,h,p,y,_){if(!o)return;!_&&y&&function(A,P,M,k){let F=A;do F.z===0&&(F.z=lE(F.x,F.y,P,M,k)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==A);F.prevZ.nextZ=null,F.prevZ=null,function(U){let V,W=1;do{let ee,ne=U;U=null;let xe=null;for(V=0;ne;){V++;let ce=ne,ye=0;for(let De=0;De<W&&(ye++,ce=ce.nextZ,ce);De++);let Ee=W;for(;ye>0||Ee>0&&ce;)ye!==0&&(Ee===0||!ce||ne.z<=ce.z)?(ee=ne,ne=ne.nextZ,ye--):(ee=ce,ce=ce.nextZ,Ee--),xe?xe.nextZ=ee:U=ee,ee.prevZ=xe,xe=ee;ne=ce}xe.nextZ=null,W*=2}while(V>1)}(F)}(o,h,p,y);let b=o;for(;o.prev!==o.next;){let A=o.prev,P=o.next;if(y?vxe(o,h,p,y):mxe(o))n.push(A.i,o.i,P.i),fv(o),o=P.next,b=P.next;else if((o=P)===b){_?_===1?cv(o=gxe(nh(o),n),n,l,h,p,y,2):_===2&&yxe(o,n,l,h,p,y):cv(nh(o),n,l,h,p,y,1);break}}}function mxe(o){let n=o.prev,l=o,h=o.next;if(ii(n,l,h)>=0)return!1;let p=n.x,y=l.x,_=h.x,b=n.y,A=l.y,P=h.y,M=p<y?p<_?p:_:y<_?y:_,k=b<A?b<P?b:P:A<P?A:P,F=p>y?p>_?p:_:y>_?y:_,U=b>A?b>P?b:P:A>P?A:P,V=h.next;for(;V!==n;){if(V.x>=M&&V.x<=F&&V.y>=k&&V.y<=U&&Yf(p,b,y,A,_,P,V.x,V.y)&&ii(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function vxe(o,n,l,h){let p=o.prev,y=o,_=o.next;if(ii(p,y,_)>=0)return!1;let b=p.x,A=y.x,P=_.x,M=p.y,k=y.y,F=_.y,U=b<A?b<P?b:P:A<P?A:P,V=M<k?M<F?M:F:k<F?k:F,W=b>A?b>P?b:P:A>P?A:P,ee=M>k?M>F?M:F:k>F?k:F,ne=lE(U,V,n,l,h),xe=lE(W,ee,n,l,h),ce=o.prevZ,ye=o.nextZ;for(;ce&&ce.z>=ne&&ye&&ye.z<=xe;){if(ce.x>=U&&ce.x<=W&&ce.y>=V&&ce.y<=ee&&ce!==p&&ce!==_&&Yf(b,M,A,k,P,F,ce.x,ce.y)&&ii(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,ye.x>=U&&ye.x<=W&&ye.y>=V&&ye.y<=ee&&ye!==p&&ye!==_&&Yf(b,M,A,k,P,F,ye.x,ye.y)&&ii(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;ce&&ce.z>=ne;){if(ce.x>=U&&ce.x<=W&&ce.y>=V&&ce.y<=ee&&ce!==p&&ce!==_&&Yf(b,M,A,k,P,F,ce.x,ce.y)&&ii(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;ye&&ye.z<=xe;){if(ye.x>=U&&ye.x<=W&&ye.y>=V&&ye.y<=ee&&ye!==p&&ye!==_&&Yf(b,M,A,k,P,F,ye.x,ye.y)&&ii(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function gxe(o,n){let l=o;do{let h=l.prev,p=l.next.next;!zx(h,p)&&fN(h,l,l.next,p)&&hv(h,p)&&hv(p,h)&&(n.push(h.i,l.i,p.i),fv(l),fv(l.next),l=o=p),l=l.next}while(l!==o);return nh(l)}function yxe(o,n,l,h,p,y){let _=o;do{let b=_.next.next;for(;b!==_.prev;){if(_.i!==b.i&&Sxe(_,b)){let A=dN(_,b);return _=nh(_,_.next),A=nh(A,A.next),cv(_,n,l,h,p,y,0),void cv(A,n,l,h,p,y,0)}b=b.next}_=_.next}while(_!==o)}function _xe(o,n){return o.x-n.x}function xxe(o,n){let l=function(p,y){let _=y,b=p.x,A=p.y,P,M=-1/0;do{if(A<=_.y&&A>=_.next.y&&_.next.y!==_.y){let W=_.x+(A-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(W<=b&&W>M&&(M=W,P=_.x<_.next.x?_:_.next,W===b))return P}_=_.next}while(_!==y);if(!P)return null;let k=P,F=P.x,U=P.y,V=1/0;_=P;do{if(b>=_.x&&_.x>=F&&b!==_.x&&Yf(A<U?b:M,A,F,U,A<U?M:b,A,_.x,_.y)){let W=Math.abs(A-_.y)/(b-_.x);hv(_,p)&&(W<V||W===V&&(_.x>P.x||_.x===P.x&&bxe(P,_)))&&(P=_,V=W)}_=_.next}while(_!==k);return P}(o,n);if(!l)return n;let h=dN(l,o);return nh(h,h.next),nh(l,l.next)}function bxe(o,n){return ii(o.prev,o,n.prev)<0&&ii(n.next,o,o.next)<0}function lE(o,n,l,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-l)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function wxe(o){let n=o,l=o;do(n.x<l.x||n.x===l.x&&n.y<l.y)&&(l=n),n=n.next;while(n!==o);return l}function Yf(o,n,l,h,p,y,_,b){return(p-_)*(n-b)>=(o-_)*(y-b)&&(o-_)*(h-b)>=(l-_)*(n-b)&&(l-_)*(y-b)>=(p-_)*(h-b)}function Sxe(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(l,h){let p=l;do{if(p.i!==l.i&&p.next.i!==l.i&&p.i!==h.i&&p.next.i!==h.i&&fN(p,p.next,l,h))return!0;p=p.next}while(p!==l);return!1}(o,n)&&(hv(o,n)&&hv(n,o)&&function(l,h){let p=l,y=!1,_=(l.x+h.x)/2,b=(l.y+h.y)/2;do p.y>b!=p.next.y>b&&p.next.y!==p.y&&_<(p.next.x-p.x)*(b-p.y)/(p.next.y-p.y)+p.x&&(y=!y),p=p.next;while(p!==l);return y}(o,n)&&(ii(o.prev,o,n.prev)||ii(o,n.prev,n))||zx(o,n)&&ii(o.prev,o,o.next)>0&&ii(n.prev,n,n.next)>0)}function ii(o,n,l){return(n.y-o.y)*(l.x-n.x)-(n.x-o.x)*(l.y-n.y)}function zx(o,n){return o.x===n.x&&o.y===n.y}function fN(o,n,l,h){let p=Bx(ii(o,n,l)),y=Bx(ii(o,n,h)),_=Bx(ii(l,h,o)),b=Bx(ii(l,h,n));return p!==y&&_!==b||!(p!==0||!Nx(o,l,n))||!(y!==0||!Nx(o,h,n))||!(_!==0||!Nx(l,o,h))||!(b!==0||!Nx(l,n,h))}function Nx(o,n,l){return n.x<=Math.max(o.x,l.x)&&n.x>=Math.min(o.x,l.x)&&n.y<=Math.max(o.y,l.y)&&n.y>=Math.min(o.y,l.y)}function Bx(o){return o>0?1:o<0?-1:0}function hv(o,n){return ii(o.prev,o,o.next)<0?ii(o,n,o.next)>=0&&ii(o,o.prev,n)>=0:ii(o,n,o.prev)<0||ii(o,o.next,n)<0}function dN(o,n){let l=cE(o.i,o.x,o.y),h=cE(n.i,n.x,n.y),p=o.next,y=n.prev;return o.next=n,n.prev=o,l.next=p,p.prev=l,h.next=l,l.prev=h,y.next=h,h.prev=y,h}function pN(o,n,l,h){let p=cE(o,n,l);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function fv(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function cE(o,n,l){return{i:o,x:n,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function hE(o,n,l){let h=l.patternDependencies,p=!1;for(let y of n){let _=y.paint.get(`${o}-pattern`);_.isConstant()||(p=!0);let b=_.constantOr(null);b&&(p=!0,h[b.to]=!0,h[b.from]=!0)}return p}function fE(o,n,l,h,p){let y=p.patternDependencies;for(let _ of n){let b=_.paint.get(`${o}-pattern`).value;if(b.kind!=="constant"){let A=b.evaluate({zoom:h-1},l,{},p.availableImages),P=b.evaluate({zoom:h},l,{},p.availableImages),M=b.evaluate({zoom:h+1},l,{},p.availableImages);A=A&&A.name?A.name:A,P=P&&P.name?P.name:P,M=M&&M.name?M.name:M,y[A]=!0,y[P]=!0,y[M]=!0,l.patterns[_.id]={min:A,mid:P,max:M}}}return l}class dE{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new co,this.indexArray=new ja,this.indexArray2=new ki,this.programConfigurations=new th(n.layers,n.zoom),this.segments=new Jt,this.segments2=new Jt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=hE("fill",this.layers,l);let p=this.layers[0].layout.get("fill-sort-key"),y=!p.isConstant(),_=[];for(let{feature:b,id:A,index:P,sourceLayerIndex:M}of n){let k=this.layers[0]._featureFilter.needGeometry,F=ih(b,k);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),F,h))continue;let U=y?p.evaluate(F,{},h,l.availableImages):void 0,V={id:A,properties:b.properties,type:b.type,sourceLayerIndex:M,index:P,geometry:k?F.geometry:rh(b),patterns:{},sortKey:U};_.push(V)}y&&_.sort((b,A)=>b.sortKey-A.sortKey);for(let b of _){let{geometry:A,index:P,sourceLayerIndex:M}=b;if(this.hasPattern){let k=fE("fill",this.layers,b,this.zoom,l);this.patternFeatures.push(k)}else this.addFeature(b,A,P,h,{});l.featureIndex.insert(n[P].feature,A,P,M,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,pxe),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,l,h,p,y){for(let _ of wf(l,500)){let b=0;for(let U of _)b+=U.length;let A=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),P=A.vertexLength,M=[],k=[];for(let U of _){if(U.length===0)continue;U!==_[0]&&k.push(M.length/2);let V=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),W=V.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(W+U.length-1,W),M.push(U[0].x),M.push(U[0].y);for(let ee=1;ee<U.length;ee++)this.layoutVertexArray.emplaceBack(U[ee].x,U[ee].y),this.indexArray2.emplaceBack(W+ee-1,W+ee),M.push(U[ee].x),M.push(U[ee].y);V.vertexLength+=U.length,V.primitiveLength+=U.length}let F=cN(M,k);for(let U=0;U<F.length;U+=3)this.indexArray.emplaceBack(P+F[U],P+F[U+1],P+F[U+2]);A.vertexLength+=b,A.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,p)}}let mN,vN;nt("FillBucket",dE,{omit:["layers","patternFeatures"]});var qxe={get paint(){return vN=vN||new g({"fill-antialias":new st(Ae.paint_fill["fill-antialias"]),"fill-opacity":new St(Ae.paint_fill["fill-opacity"]),"fill-color":new St(Ae.paint_fill["fill-color"]),"fill-outline-color":new St(Ae.paint_fill["fill-outline-color"]),"fill-translate":new st(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new st(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new jf(Ae.paint_fill["fill-pattern"])})},get layout(){return mN=mN||new g({"fill-sort-key":new St(Ae.layout_fill["fill-sort-key"])})}};class Axe extends c{constructor(n){super(n,qxe)}recalculate(n,l){super.recalculate(n,l);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new dE(n)}queryRadius(){return Dx(this.paint.get("fill-translate"))}queryIntersectsFeature(n,l,h,p,y,_,b){return Yz(Lx(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,b),p)}isTileClipped(){return!0}}let Exe=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Txe=S([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ixe}=Exe;var Tl={},Cxe=x,gN=Qf;function Qf(o,n,l,h,p){this.properties={},this.extent=l,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(Pxe,this,n)}function Pxe(o,n,l){o==1?n.id=l.readVarint():o==2?function(h,p){for(var y=h.readVarint()+h.pos;h.pos<y;){var _=p._keys[h.readVarint()],b=p._values[h.readVarint()];p.properties[_]=b}}(l,n):o==3?n.type=l.readVarint():o==4&&(n._geometry=l.pos)}function Mxe(o){for(var n,l,h=0,p=0,y=o.length,_=y-1;p<y;_=p++)h+=((l=o[_]).x-(n=o[p]).x)*(n.y+l.y);return h}Qf.types=["Unknown","Point","LineString","Polygon"],Qf.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,l=o.readVarint()+o.pos,h=1,p=0,y=0,_=0,b=[];o.pos<l;){if(p<=0){var A=o.readVarint();h=7&A,p=A>>3}if(p--,h===1||h===2)y+=o.readSVarint(),_+=o.readSVarint(),h===1&&(n&&b.push(n),n=[]),n.push(new Cxe(y,_));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&b.push(n),b},Qf.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,l=1,h=0,p=0,y=0,_=1/0,b=-1/0,A=1/0,P=-1/0;o.pos<n;){if(h<=0){var M=o.readVarint();l=7&M,h=M>>3}if(h--,l===1||l===2)(p+=o.readSVarint())<_&&(_=p),p>b&&(b=p),(y+=o.readSVarint())<A&&(A=y),y>P&&(P=y);else if(l!==7)throw new Error("unknown command "+l)}return[_,A,b,P]},Qf.prototype.toGeoJSON=function(o,n,l){var h,p,y=this.extent*Math.pow(2,l),_=this.extent*o,b=this.extent*n,A=this.loadGeometry(),P=Qf.types[this.type];function M(U){for(var V=0;V<U.length;V++){var W=U[V];U[V]=[360*(W.x+_)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(W.y+b)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var k=[];for(h=0;h<A.length;h++)k[h]=A[h][0];M(A=k);break;case 2:for(h=0;h<A.length;h++)M(A[h]);break;case 3:for(A=function(U){var V=U.length;if(V<=1)return[U];for(var W,ee,ne=[],xe=0;xe<V;xe++){var ce=Mxe(U[xe]);ce!==0&&(ee===void 0&&(ee=ce<0),ee===ce<0?(W&&ne.push(W),W=[U[xe]]):W.push(U[xe]))}return W&&ne.push(W),ne}(A),h=0;h<A.length;h++)for(p=0;p<A[h].length;p++)M(A[h][p]);}A.length===1?A=A[0]:P="Multi"+P;var F={type:"Feature",geometry:{type:P,coordinates:A},properties:this.properties};return"id"in this&&(F.id=this.id),F};var Oxe=gN,yN=_N;function _N(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(kxe,this,n),this.length=this._features.length}function kxe(o,n,l){o===15?n.version=l.readVarint():o===1?n.name=l.readString():o===5?n.extent=l.readVarint():o===2?n._features.push(l.pos):o===3?n._keys.push(l.readString()):o===4&&n._values.push(function(h){for(var p=null,y=h.readVarint()+h.pos;h.pos<y;){var _=h.readVarint()>>3;p=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return p}(l))}_N.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new Oxe(this._pbf,n,this.extent,this._keys,this._values)};var Rxe=yN;function Dxe(o,n,l){if(o===3){var h=new Rxe(l,l.readVarint()+l.pos);h.length&&(n[h.name]=h)}}Tl.VectorTile=function(o,n){this.layers=o.readFields(Dxe,{},n)},Tl.VectorTileFeature=gN,Tl.VectorTileLayer=yN;let Lxe=Tl.VectorTileFeature.types,pE=Math.pow(2,13);function dv(o,n,l,h,p,y,_,b){o.emplaceBack(n,l,2*Math.floor(h*pE)+_,p*pE*2,y*pE*2,Math.round(b))}class mE{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new bl,this.centroidVertexArray=new Ui,this.indexArray=new ja,this.programConfigurations=new th(n.layers,n.zoom),this.segments=new Jt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.features=[],this.hasPattern=hE("fill-extrusion",this.layers,l);for(let{feature:p,id:y,index:_,sourceLayerIndex:b}of n){let A=this.layers[0]._featureFilter.needGeometry,P=ih(p,A);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),P,h))continue;let M={id:y,sourceLayerIndex:b,index:_,geometry:A?P.geometry:rh(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(fE("fill-extrusion",this.layers,M,this.zoom,l)):this.addFeature(M,M.geometry,_,h,{}),l.featureIndex.insert(p,M.geometry,_,b,this.index,!0)}}addFeatures(n,l,h){for(let p of this.features){let{geometry:y}=p;this.addFeature(p,y,p.index,l,h)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ixe),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Txe.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,l,h,p,y){for(let _ of wf(l,500)){let b={x:0,y:0,vertexCount:0},A=0;for(let V of _)A+=V.length;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let V of _){if(V.length===0||zxe(V))continue;let W=0;for(let ee=0;ee<V.length;ee++){let ne=V[ee];if(ee>=1){let xe=V[ee-1];if(!Fxe(ne,xe)){P.vertexLength+4>Jt.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let ce=ne.sub(xe)._perp()._unit(),ye=xe.dist(ne);W+ye>32768&&(W=0),dv(this.layoutVertexArray,ne.x,ne.y,ce.x,ce.y,0,0,W),dv(this.layoutVertexArray,ne.x,ne.y,ce.x,ce.y,0,1,W),b.x+=2*ne.x,b.y+=2*ne.y,b.vertexCount+=2,W+=ye,dv(this.layoutVertexArray,xe.x,xe.y,ce.x,ce.y,0,0,W),dv(this.layoutVertexArray,xe.x,xe.y,ce.x,ce.y,0,1,W),b.x+=2*xe.x,b.y+=2*xe.y,b.vertexCount+=2;let Ee=P.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),P.vertexLength+=4,P.primitiveLength+=2}}}}if(P.vertexLength+A>Jt.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),Lxe[n.type]!=="Polygon")continue;let M=[],k=[],F=P.vertexLength;for(let V of _)if(V.length!==0){V!==_[0]&&k.push(M.length/2);for(let W=0;W<V.length;W++){let ee=V[W];dv(this.layoutVertexArray,ee.x,ee.y,0,0,1,1,0),b.x+=ee.x,b.y+=ee.y,b.vertexCount+=1,M.push(ee.x),M.push(ee.y)}}let U=cN(M,k);for(let V=0;V<U.length;V+=3)this.indexArray.emplaceBack(F+U[V],F+U[V+2],F+U[V+1]);P.primitiveLength+=U.length/3,P.vertexLength+=A;for(let V=0;V<b.vertexCount;V++){let W=Math.floor(b.x/b.vertexCount),ee=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(W,ee)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,p)}}function Fxe(o,n){return o.x===n.x&&(o.x<0||o.x>ci)||o.y===n.y&&(o.y<0||o.y>ci)}function zxe(o){return o.every(n=>n.x<0)||o.every(n=>n.x>ci)||o.every(n=>n.y<0)||o.every(n=>n.y>ci)}let xN;nt("FillExtrusionBucket",mE,{omit:["layers","features"]});var Nxe={get paint(){return xN=xN||new g({"fill-extrusion-opacity":new st(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new St(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new st(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new st(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new jf(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new St(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new St(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new st(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Bxe extends c{constructor(n){super(n,Nxe)}createBucket(n){return new mE(n)}queryRadius(){return Dx(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,l,h,p,y,_,b,A){let P=Lx(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,b),M=this.paint.get("fill-extrusion-height").evaluate(l,h),k=this.paint.get("fill-extrusion-base").evaluate(l,h),F=function(V,W,ee,ne){let xe=[];for(let ce of V){let ye=[ce.x,ce.y,0,1];Fx(ye,ye,W),xe.push(new T(ye[0]/ye[3],ye[1]/ye[3]))}return xe}(P,A),U=function(V,W,ee,ne){let xe=[],ce=[],ye=ne[8]*W,Ee=ne[9]*W,De=ne[10]*W,Ye=ne[11]*W,bt=ne[8]*ee,He=ne[9]*ee,We=ne[10]*ee,ht=ne[11]*ee;for(let ot of V){let it=[],Ie=[];for(let ft of ot){let lt=ft.x,It=ft.y,xr=ne[0]*lt+ne[4]*It+ne[12],gr=ne[1]*lt+ne[5]*It+ne[13],Ai=ne[2]*lt+ne[6]*It+ne[14],ho=ne[3]*lt+ne[7]*It+ne[15],$i=Ai+De,Ei=ho+Ye,wn=xr+bt,Sn=gr+He,qn=Ai+We,Jr=ho+ht,Ti=new T((xr+ye)/Ei,(gr+Ee)/Ei);Ti.z=$i/Ei,it.push(Ti);let nn=new T(wn/Jr,Sn/Jr);nn.z=qn/Jr,Ie.push(nn)}xe.push(it),ce.push(Ie)}return[xe,ce]}(p,k,M,A);return function(V,W,ee){let ne=1/0;Yz(ee,W)&&(ne=bN(ee,W[0]));for(let xe=0;xe<W.length;xe++){let ce=W[xe],ye=V[xe];for(let Ee=0;Ee<ce.length-1;Ee++){let De=ce[Ee],Ye=[De,ce[Ee+1],ye[Ee+1],ye[Ee],De];Jz(ee,Ye)&&(ne=Math.min(ne,bN(ee,Ye)))}}return ne!==1/0&&ne}(U[0],U[1],F)}}function pv(o,n){return o.x*n.x+o.y*n.y}function bN(o,n){if(o.length===1){let l=0,h=n[l++],p;for(;!p||h.equals(p);)if(p=n[l++],!p)return 1/0;for(;l<n.length;l++){let y=n[l],_=o[0],b=p.sub(h),A=y.sub(h),P=_.sub(h),M=pv(b,b),k=pv(b,A),F=pv(A,A),U=pv(P,b),V=pv(P,A),W=M*F-k*k,ee=(F*U-k*V)/W,ne=(M*V-k*U)/W,xe=h.z*(1-ee-ne)+p.z*ee+y.z*ne;if(isFinite(xe))return xe}return 1/0}{let l=1/0;for(let h of n)l=Math.min(l,h.z);return l}}let Uxe=S([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:jxe}=Uxe,Vxe=S([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$xe}=Vxe,Wxe=Tl.VectorTileFeature.types,Gxe=Math.cos(Math.PI/180*37.5),wN=Math.pow(2,14)/.5;class vE{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new $f,this.layoutVertexArray2=new wl,this.indexArray=new ja,this.programConfigurations=new th(n.layers,n.zoom),this.segments=new Jt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=hE("line",this.layers,l);let p=this.layers[0].layout.get("line-sort-key"),y=!p.isConstant(),_=[];for(let{feature:b,id:A,index:P,sourceLayerIndex:M}of n){let k=this.layers[0]._featureFilter.needGeometry,F=ih(b,k);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),F,h))continue;let U=y?p.evaluate(F,{},h):void 0,V={id:A,properties:b.properties,type:b.type,sourceLayerIndex:M,index:P,geometry:k?F.geometry:rh(b),patterns:{},sortKey:U};_.push(V)}y&&_.sort((b,A)=>b.sortKey-A.sortKey);for(let b of _){let{geometry:A,index:P,sourceLayerIndex:M}=b;if(this.hasPattern){let k=fE("line",this.layers,b,this.zoom,l);this.patternFeatures.push(k)}else this.addFeature(b,A,P,h,{});l.featureIndex.insert(n[P].feature,A,P,M,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,$xe)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,jxe),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,l,h,p,y){let _=this.layers[0].layout,b=_.get("line-join").evaluate(n,{}),A=_.get("line-cap"),P=_.get("line-miter-limit"),M=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(let k of l)this.addLine(k,n,b,A,P,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,p)}addLine(n,l,h,p,y,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ne=0;ne<n.length-1;ne++)this.totalDistance+=n[ne].dist(n[ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let b=Wxe[l.type]==="Polygon",A=n.length;for(;A>=2&&n[A-1].equals(n[A-2]);)A--;let P=0;for(;P<A-1&&n[P].equals(n[P+1]);)P++;if(A<(b?3:2))return;h==="bevel"&&(y=1.05);let M=this.overscaling<=16?15*ci/(512*this.overscaling):0,k=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),F,U,V,W,ee;this.e1=this.e2=-1,b&&(F=n[A-2],ee=n[P].sub(F)._unit()._perp());for(let ne=P;ne<A;ne++){if(V=ne===A-1?b?n[P+1]:void 0:n[ne+1],V&&n[ne].equals(V))continue;ee&&(W=ee),F&&(U=F),F=n[ne],ee=V?V.sub(F)._unit()._perp():W,W=W||ee;let xe=W.add(ee);xe.x===0&&xe.y===0||xe._unit();let ce=W.x*ee.x+W.y*ee.y,ye=xe.x*ee.x+xe.y*ee.y,Ee=ye!==0?1/ye:1/0,De=2*Math.sqrt(2-2*ye),Ye=ye<Gxe&&U&&V,bt=W.x*ee.y-W.y*ee.x>0;if(Ye&&ne>P){let ht=F.dist(U);if(ht>2*M){let ot=F.sub(F.sub(U)._mult(M/ht)._round());this.updateDistance(U,ot),this.addCurrentVertex(ot,W,0,0,k),U=ot}}let He=U&&V,We=He?h:b?"butt":p;if(He&&We==="round"&&(Ee<_?We="miter":Ee<=2&&(We="fakeround")),We==="miter"&&Ee>y&&(We="bevel"),We==="bevel"&&(Ee>2&&(We="flipbevel"),Ee<y&&(We="miter")),U&&this.updateDistance(U,F),We==="miter")xe._mult(Ee),this.addCurrentVertex(F,xe,0,0,k);else if(We==="flipbevel"){if(Ee>100)xe=ee.mult(-1);else{let ht=Ee*W.add(ee).mag()/W.sub(ee).mag();xe._perp()._mult(ht*(bt?-1:1))}this.addCurrentVertex(F,xe,0,0,k),this.addCurrentVertex(F,xe.mult(-1),0,0,k)}else if(We==="bevel"||We==="fakeround"){let ht=-Math.sqrt(Ee*Ee-1),ot=bt?ht:0,it=bt?0:ht;if(U&&this.addCurrentVertex(F,W,ot,it,k),We==="fakeround"){let Ie=Math.round(180*De/Math.PI/20);for(let ft=1;ft<Ie;ft++){let lt=ft/Ie;if(lt!==.5){let xr=lt-.5;lt+=lt*xr*(lt-1)*((1.0904+ce*(ce*(3.55645-1.43519*ce)-3.2452))*xr*xr+(.848013+ce*(.215638*ce-1.06021)))}let It=ee.sub(W)._mult(lt)._add(W)._unit()._mult(bt?-1:1);this.addHalfVertex(F,It.x,It.y,!1,bt,0,k)}}V&&this.addCurrentVertex(F,ee,-ot,-it,k)}else if(We==="butt")this.addCurrentVertex(F,xe,0,0,k);else if(We==="square"){let ht=U?1:-1;this.addCurrentVertex(F,xe,ht,ht,k)}else We==="round"&&(U&&(this.addCurrentVertex(F,W,0,0,k),this.addCurrentVertex(F,W,1,1,k,!0)),V&&(this.addCurrentVertex(F,ee,-1,-1,k,!0),this.addCurrentVertex(F,ee,0,0,k)));if(Ye&&ne<A-1){let ht=F.dist(V);if(ht>2*M){let ot=F.add(V.sub(F)._mult(M/ht)._round());this.updateDistance(F,ot),this.addCurrentVertex(ot,ee,0,0,k),F=ot}}}}addCurrentVertex(n,l,h,p,y,_=!1){let b=l.y*p-l.x,A=-l.y-l.x*p;this.addHalfVertex(n,l.x+l.y*h,l.y-l.x*h,_,!1,h,y),this.addHalfVertex(n,b,A,_,!0,-p,y),this.distance>wN/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,l,h,p,y,_))}addHalfVertex({x:n,y:l},h,p,y,_,b,A){let P=.5*(this.lineClips?this.scaledDistance*(wN-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(y?1:0),(l<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(b===0?0:b<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let M=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),A.primitiveLength++),_?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,l){this.distance+=n.dist(l),this.updateScaledDistance()}}let SN,qN;nt("LineBucket",vE,{omit:["layers","patternFeatures"]});var AN={get paint(){return qN=qN||new g({"line-opacity":new St(Ae.paint_line["line-opacity"]),"line-color":new St(Ae.paint_line["line-color"]),"line-translate":new st(Ae.paint_line["line-translate"]),"line-translate-anchor":new st(Ae.paint_line["line-translate-anchor"]),"line-width":new St(Ae.paint_line["line-width"]),"line-gap-width":new St(Ae.paint_line["line-gap-width"]),"line-offset":new St(Ae.paint_line["line-offset"]),"line-blur":new St(Ae.paint_line["line-blur"]),"line-dasharray":new Vf(Ae.paint_line["line-dasharray"]),"line-pattern":new jf(Ae.paint_line["line-pattern"]),"line-gradient":new nv(Ae.paint_line["line-gradient"])})},get layout(){return SN=SN||new g({"line-cap":new st(Ae.layout_line["line-cap"]),"line-join":new St(Ae.layout_line["line-join"]),"line-miter-limit":new st(Ae.layout_line["line-miter-limit"]),"line-round-limit":new st(Ae.layout_line["line-round-limit"]),"line-sort-key":new St(Ae.layout_line["line-sort-key"])})}};class Kxe extends St{possiblyEvaluate(n,l){return l=new Er(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(n,l)}evaluate(n,l,h,p){return l=Le({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(n,l,h,p)}}let Ux;class Zxe extends c{constructor(n){super(n,AN),this.gradientVersion=0,Ux||(Ux=new Kxe(AN.paint.properties["line-width"].specification),Ux.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){let l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof rl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,l){super.recalculate(n,l),this.paint._values["line-floorwidth"]=Ux.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new vE(n)}queryRadius(n){let l=n,h=EN(sv("line-width",this,l),sv("line-gap-width",this,l)),p=sv("line-offset",this,l);return h/2+Math.abs(p)+Dx(this.paint.get("line-translate"))}queryIntersectsFeature(n,l,h,p,y,_,b){let A=Lx(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,b),P=b/2*EN(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),M=this.paint.get("line-offset").evaluate(l,h);return M&&(p=function(k,F){let U=[];for(let V=0;V<k.length;V++){let W=k[V],ee=[];for(let ne=0;ne<W.length;ne++){let xe=W[ne-1],ce=W[ne],ye=W[ne+1],Ee=ne===0?new T(0,0):ce.sub(xe)._unit()._perp(),De=ne===W.length-1?new T(0,0):ye.sub(ce)._unit()._perp(),Ye=Ee._add(De)._unit(),bt=Ye.x*De.x+Ye.y*De.y;bt!==0&&Ye._mult(1/bt),ee.push(Ye._mult(F)._add(ce))}U.push(ee)}return U}(p,M*b)),function(k,F,U){for(let V=0;V<F.length;V++){let W=F[V];if(k.length>=3){for(let ee=0;ee<W.length;ee++)if(Xf(k,W[ee]))return!0}if(ixe(k,W,U))return!0}return!1}(A,p,P)}isTileClipped(){return!0}}function EN(o,n){return n>0?n+2*o:o}let Hxe=S([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Xxe=S([{name:"a_projected_pos",components:3,type:"Float32"}],4);S([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Jxe=S([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);S([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let TN=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Yxe=S([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Qxe(o,n,l){return o.sections.forEach(h=>{h.text=function(p,y,_){let b=y.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?p=p.toLocaleUpperCase():b==="lowercase"&&(p=p.toLocaleLowerCase()),Vn.applyArabicShaping&&(p=Vn.applyArabicShaping(p)),p}(h.text,n,l)}),o}S([{name:"triangle",components:3,type:"Uint16"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),S([{type:"Float32",name:"offsetX"}]),S([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),S([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let mv={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var gi=24,IN=vr,CN=function(o,n,l,h,p){var y,_,b=8*p-h-1,A=(1<<b)-1,P=A>>1,M=-7,k=l?p-1:0,F=l?-1:1,U=o[n+k];for(k+=F,y=U&(1<<-M)-1,U>>=-M,M+=b;M>0;y=256*y+o[n+k],k+=F,M-=8);for(_=y&(1<<-M)-1,y>>=-M,M+=h;M>0;_=256*_+o[n+k],k+=F,M-=8);if(y===0)y=1-P;else{if(y===A)return _?NaN:1/0*(U?-1:1);_+=Math.pow(2,h),y-=P}return(U?-1:1)*_*Math.pow(2,y-h)},PN=function(o,n,l,h,p,y){var _,b,A,P=8*y-p-1,M=(1<<P)-1,k=M>>1,F=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=h?0:y-1,V=h?1:-1,W=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,_=M):(_=Math.floor(Math.log(n)/Math.LN2),n*(A=Math.pow(2,-_))<1&&(_--,A*=2),(n+=_+k>=1?F/A:F*Math.pow(2,1-k))*A>=2&&(_++,A/=2),_+k>=M?(b=0,_=M):_+k>=1?(b=(n*A-1)*Math.pow(2,p),_+=k):(b=n*Math.pow(2,k-1)*Math.pow(2,p),_=0));p>=8;o[l+U]=255&b,U+=V,b/=256,p-=8);for(_=_<<p|b,P+=p;P>0;o[l+U]=255&_,U+=V,_/=256,P-=8);o[l+U-V]|=128*W};function vr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}vr.Varint=0,vr.Fixed64=1,vr.Bytes=2,vr.Fixed32=5;var gE=4294967296,MN=1/gE,ON=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function du(o){return o.type===vr.Bytes?o.readVarint()+o.pos:o.pos+1}function ed(o,n,l){return l?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function kN(o,n,l){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));l.realloc(h);for(var p=l.pos-1;p>=o;p--)l.buf[p+h]=l.buf[p]}function e0e(o,n){for(var l=0;l<o.length;l++)n.writeVarint(o[l])}function t0e(o,n){for(var l=0;l<o.length;l++)n.writeSVarint(o[l])}function r0e(o,n){for(var l=0;l<o.length;l++)n.writeFloat(o[l])}function i0e(o,n){for(var l=0;l<o.length;l++)n.writeDouble(o[l])}function n0e(o,n){for(var l=0;l<o.length;l++)n.writeBoolean(o[l])}function a0e(o,n){for(var l=0;l<o.length;l++)n.writeFixed32(o[l])}function o0e(o,n){for(var l=0;l<o.length;l++)n.writeSFixed32(o[l])}function s0e(o,n){for(var l=0;l<o.length;l++)n.writeFixed64(o[l])}function u0e(o,n){for(var l=0;l<o.length;l++)n.writeSFixed64(o[l])}function jx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function td(o,n,l){o[l]=n,o[l+1]=n>>>8,o[l+2]=n>>>16,o[l+3]=n>>>24}function RN(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}vr.prototype={destroy:function(){this.buf=null},readFields:function(o,n,l){for(l=l||this.length;this.pos<l;){var h=this.readVarint(),p=h>>3,y=this.pos;this.type=7&h,o(p,n,this),this.pos===y&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=jx(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=RN(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=jx(this.buf,this.pos)+jx(this.buf,this.pos+4)*gE;return this.pos+=8,o},readSFixed64:function(){var o=jx(this.buf,this.pos)+RN(this.buf,this.pos+4)*gE;return this.pos+=8,o},readFloat:function(){var o=CN(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=CN(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,l,h=this.buf;return n=127&(l=h[this.pos++]),l<128?n:(n|=(127&(l=h[this.pos++]))<<7,l<128?n:(n|=(127&(l=h[this.pos++]))<<14,l<128?n:(n|=(127&(l=h[this.pos++]))<<21,l<128?n:function(p,y,_){var b,A,P=_.buf;if(b=(112&(A=P[_.pos++]))>>4,A<128||(b|=(127&(A=P[_.pos++]))<<3,A<128)||(b|=(127&(A=P[_.pos++]))<<10,A<128)||(b|=(127&(A=P[_.pos++]))<<17,A<128)||(b|=(127&(A=P[_.pos++]))<<24,A<128)||(b|=(1&(A=P[_.pos++]))<<31,A<128))return ed(p,b,y);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(l=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&ON?function(l,h,p){return ON.decode(l.subarray(h,p))}(this.buf,n,o):function(l,h,p){for(var y="",_=h;_<p;){var b,A,P,M=l[_],k=null,F=M>239?4:M>223?3:M>191?2:1;if(_+F>p)break;F===1?M<128&&(k=M):F===2?(192&(b=l[_+1]))==128&&(k=(31&M)<<6|63&b)<=127&&(k=null):F===3?(A=l[_+2],(192&(b=l[_+1]))==128&&(192&A)==128&&((k=(15&M)<<12|(63&b)<<6|63&A)<=2047||k>=55296&&k<=57343)&&(k=null)):F===4&&(A=l[_+2],P=l[_+3],(192&(b=l[_+1]))==128&&(192&A)==128&&(192&P)==128&&((k=(15&M)<<18|(63&b)<<12|(63&A)<<6|63&P)<=65535||k>=1114112)&&(k=null)),k===null?(k=65533,F=1):k>65535&&(k-=65536,y+=String.fromCharCode(k>>>10&1023|55296),k=56320|1023&k),y+=String.fromCharCode(k),_+=F}return y}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==vr.Bytes)return o.push(this.readVarint(n));var l=du(this);for(o=o||[];this.pos<l;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==vr.Bytes)return o.push(this.readSVarint());var n=du(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==vr.Bytes)return o.push(this.readBoolean());var n=du(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==vr.Bytes)return o.push(this.readFloat());var n=du(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==vr.Bytes)return o.push(this.readDouble());var n=du(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==vr.Bytes)return o.push(this.readFixed32());var n=du(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==vr.Bytes)return o.push(this.readSFixed32());var n=du(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==vr.Bytes)return o.push(this.readFixed64());var n=du(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==vr.Bytes)return o.push(this.readSFixed64());var n=du(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===vr.Varint)for(;this.buf[this.pos++]>127;);else if(n===vr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===vr.Fixed32)this.pos+=4;else{if(n!==vr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var l=new Uint8Array(n);l.set(this.buf),this.buf=l,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),td(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),td(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),td(this.buf,-1&o,this.pos),td(this.buf,Math.floor(o*MN),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),td(this.buf,-1&o,this.pos),td(this.buf,Math.floor(o*MN),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,l){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(y,_,b){b.buf[b.pos++]=127&y|128,y>>>=7,b.buf[b.pos++]=127&y|128,y>>>=7,b.buf[b.pos++]=127&y|128,y>>>=7,b.buf[b.pos++]=127&y|128,b.buf[b.pos]=127&(y>>>=7)}(h,0,l),function(y,_){var b=(7&y)<<4;_.buf[_.pos++]|=b|((y>>>=3)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y)))))}(p,l)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,y){for(var _,b,A=0;A<p.length;A++){if((_=p.charCodeAt(A))>55295&&_<57344){if(!b){_>56319||A+1===p.length?(h[y++]=239,h[y++]=191,h[y++]=189):b=_;continue}if(_<56320){h[y++]=239,h[y++]=191,h[y++]=189,b=_;continue}_=b-55296<<10|_-56320|65536,b=null}else b&&(h[y++]=239,h[y++]=191,h[y++]=189,b=null);_<128?h[y++]=_:(_<2048?h[y++]=_>>6|192:(_<65536?h[y++]=_>>12|224:(h[y++]=_>>18|240,h[y++]=_>>12&63|128),h[y++]=_>>6&63|128),h[y++]=63&_|128)}return y}(this.buf,o,this.pos);var l=this.pos-n;l>=128&&kN(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeFloat:function(o){this.realloc(4),PN(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),PN(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var l=0;l<n;l++)this.buf[this.pos++]=o[l]},writeRawMessage:function(o,n){this.pos++;var l=this.pos;o(n,this);var h=this.pos-l;h>=128&&kN(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,l){this.writeTag(o,vr.Bytes),this.writeRawMessage(n,l)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,e0e,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,t0e,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,n0e,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,r0e,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,i0e,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,a0e,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,o0e,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,s0e,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,u0e,n)},writeBytesField:function(o,n){this.writeTag(o,vr.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,vr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,vr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,vr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,vr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,vr.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,vr.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,vr.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,vr.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,vr.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var yE=m(IN);let _E=3;function l0e(o,n,l){o===1&&l.readMessage(c0e,n)}function c0e(o,n,l){if(o===3){let{id:h,bitmap:p,width:y,height:_,left:b,top:A,advance:P}=l.readMessage(h0e,{});n.push({id:h,bitmap:new lv({width:y+2*_E,height:_+2*_E},p),metrics:{width:y,height:_,left:b,top:A,advance:P}})}}function h0e(o,n,l){o===1?n.id=l.readVarint():o===2?n.bitmap=l.readBytes():o===3?n.width=l.readVarint():o===4?n.height=l.readVarint():o===5?n.left=l.readSVarint():o===6?n.top=l.readSVarint():o===7&&(n.advance=l.readVarint())}let DN=_E;function LN(o){let n=0,l=0;for(let _ of o)n+=_.w*_.h,l=Math.max(l,_.w);o.sort((_,b)=>b.h-_.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),l),h:1/0}],p=0,y=0;for(let _ of o)for(let b=h.length-1;b>=0;b--){let A=h[b];if(!(_.w>A.w||_.h>A.h)){if(_.x=A.x,_.y=A.y,y=Math.max(y,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===A.w&&_.h===A.h){let P=h.pop();b<h.length&&(h[b]=P)}else _.h===A.h?(A.x+=_.w,A.w-=_.w):_.w===A.w?(A.y+=_.h,A.h-=_.h):(h.push({x:A.x+_.w,y:A.y,w:A.w-_.w,h:_.h}),A.y+=_.h,A.h-=_.h);break}}return{w:p,h:y,fill:n/(p*y)||0}}let Wn=1;class xE{constructor(n,{pixelRatio:l,version:h,stretchX:p,stretchY:y,content:_,textFitWidth:b,textFitHeight:A}){this.paddedRect=n,this.pixelRatio=l,this.stretchX=p,this.stretchY=y,this.content=_,this.version=h,this.textFitWidth=b,this.textFitHeight=A}get tl(){return[this.paddedRect.x+Wn,this.paddedRect.y+Wn]}get br(){return[this.paddedRect.x+this.paddedRect.w-Wn,this.paddedRect.y+this.paddedRect.h-Wn]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Wn)/this.pixelRatio,(this.paddedRect.h-2*Wn)/this.pixelRatio]}}class FN{constructor(n,l){let h={},p={};this.haveRenderCallbacks=[];let y=[];this.addImages(n,h,y),this.addImages(l,p,y);let{w:_,h:b}=LN(y),A=new Va({width:_||1,height:b||1});for(let P in n){let M=n[P],k=h[P].paddedRect;Va.copy(M.data,A,{x:0,y:0},{x:k.x+Wn,y:k.y+Wn},M.data)}for(let P in l){let M=l[P],k=p[P].paddedRect,F=k.x+Wn,U=k.y+Wn,V=M.data.width,W=M.data.height;Va.copy(M.data,A,{x:0,y:0},{x:F,y:U},M.data),Va.copy(M.data,A,{x:0,y:W-1},{x:F,y:U-1},{width:V,height:1}),Va.copy(M.data,A,{x:0,y:0},{x:F,y:U+W},{width:V,height:1}),Va.copy(M.data,A,{x:V-1,y:0},{x:F-1,y:U},{width:1,height:W}),Va.copy(M.data,A,{x:0,y:0},{x:F+V,y:U},{width:1,height:W})}this.image=A,this.iconPositions=h,this.patternPositions=p}addImages(n,l,h){for(let p in n){let y=n[p],_={x:0,y:0,w:y.data.width+2*Wn,h:y.data.height+2*Wn};h.push(_),l[p]=new xE(_,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,l){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),l)}patchUpdatedImage(n,l,h){if(!n||!l||n.version===l.version)return;n.version=l.version;let[p,y]=n.tl;h.update(l.data,void 0,{x:p,y})}}var Il;nt("ImagePosition",xE),nt("ImageAtlas",FN),u.ah=void 0,(Il=u.ah||(u.ah={}))[Il.none=0]="none",Il[Il.horizontal=1]="horizontal",Il[Il.vertical=2]="vertical",Il[Il.horizontalOnly=3]="horizontalOnly";let vv=-17;class gv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,l){let h=new gv;return h.scale=n||1,h.fontStack=l,h}static forImage(n){let l=new gv;return l.imageName=n,l}}class rd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,l){let h=new rd;for(let p=0;p<n.sections.length;p++){let y=n.sections[p];y.image?h.addImageSection(y):h.addTextSection(y,l)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let l="";for(let h=0;h<n.length;h++){let p=n.charCodeAt(h+1)||null,y=n.charCodeAt(h-1)||null;l+=p&&Ix(p)&&!mv[n[h+1]]||y&&Ix(y)&&!mv[n[h-1]]||!mv[n[h]]?n[h]:mv[n[h]]}return l}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&$x[this.text.charCodeAt(h)];h++)n++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&$x[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(n,l),this.sectionIndex=this.sectionIndex.slice(n,l)}substring(n,l){let h=new rd;return h.text=this.text.substring(n,l),h.sectionIndex=this.sectionIndex.slice(n,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,l)=>Math.max(n,this.sections[l].scale),0)}addTextSection(n,l){this.text+=n.text,this.sections.push(gv.forText(n.scale,n.fontStack||l));let h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){let l=n.image?n.image.name:"";if(l.length===0)return void cr("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(gv.forImage(l)),this.sectionIndex.push(this.sections.length-1)):cr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vx(o,n,l,h,p,y,_,b,A,P,M,k,F,U,V){let W=rd.fromFeature(o,p),ee;k===u.ah.vertical&&W.verticalizePunctuation();let{processBidirectionalText:ne,processStyledBidirectionalText:xe}=Vn;if(ne&&W.sections.length===1){ee=[];let Ee=ne(W.toString(),bE(W,P,y,n,h,U));for(let De of Ee){let Ye=new rd;Ye.text=De,Ye.sections=W.sections;for(let bt=0;bt<De.length;bt++)Ye.sectionIndex.push(0);ee.push(Ye)}}else if(xe){ee=[];let Ee=xe(W.text,W.sectionIndex,bE(W,P,y,n,h,U));for(let De of Ee){let Ye=new rd;Ye.text=De[0],Ye.sectionIndex=De[1],Ye.sections=W.sections,ee.push(Ye)}}else ee=function(Ee,De){let Ye=[],bt=Ee.text,He=0;for(let We of De)Ye.push(Ee.substring(He,We)),He=We;return He<bt.length&&Ye.push(Ee.substring(He,bt.length)),Ye}(W,bE(W,P,y,n,h,U));let ce=[],ye={positionedLines:ce,text:W.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:k,iconsInText:!1,verticalizable:!1};return function(Ee,De,Ye,bt,He,We,ht,ot,it,Ie,ft,lt){let It=0,xr=vv,gr=0,Ai=0,ho=ot==="right"?1:ot==="left"?0:.5,$i=0;for(let Jr of He){Jr.trim();let Ti=Jr.getMaxScale(),nn=(Ti-1)*gi,Wi={positionedGlyphs:[],lineOffset:0};Ee.positionedLines[$i]=Wi;let An=Wi.positionedGlyphs,Gi=0;if(!Jr.length()){xr+=We,++$i;continue}for(let Gn=0;Gn<Jr.length();Gn++){let nr=Jr.getSection(Gn),Sr=Jr.getSectionIndex(Gn),Pr=Jr.getCharCode(Gn),fa=0,Vr=null,od=null,_s=null,xs=gi,fo=!(it===u.ah.horizontal||!ft&&!rv(Pr)||ft&&($x[Pr]||(Ei=Pr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Ei)))));if(nr.imageName){let Ga=bt[nr.imageName];if(!Ga)continue;_s=nr.imageName,Ee.iconsInText=Ee.iconsInText||!0,od=Ga.paddedRect;let Ri=Ga.displaySize;nr.scale=nr.scale*gi/lt,Vr={width:Ri[0],height:Ri[1],left:Wn,top:-DN,advance:fo?Ri[1]:Ri[0]},fa=nn+(gi-Ri[1]*nr.scale),xs=Vr.advance;let pu=fo?Ri[0]*nr.scale-gi*Ti:Ri[1]*nr.scale-gi*Ti;pu>0&&pu>Gi&&(Gi=pu)}else{let Ga=Ye[nr.fontStack],Ri=Ga&&Ga[Pr];if(Ri&&Ri.rect)od=Ri.rect,Vr=Ri.metrics;else{let pu=De[nr.fontStack],Sv=pu&&pu[Pr];if(!Sv)continue;Vr=Sv.metrics}fa=(Ti-nr.scale)*gi}fo?(Ee.verticalizable=!0,An.push({glyph:Pr,imageName:_s,x:It,y:xr+fa,vertical:fo,scale:nr.scale,fontStack:nr.fontStack,sectionIndex:Sr,metrics:Vr,rect:od}),It+=xs*nr.scale+Ie):(An.push({glyph:Pr,imageName:_s,x:It,y:xr+fa,vertical:fo,scale:nr.scale,fontStack:nr.fontStack,sectionIndex:Sr,metrics:Vr,rect:od}),It+=Vr.advance*nr.scale+Ie)}An.length!==0&&(gr=Math.max(It-Ie,gr),m0e(An,0,An.length-1,ho,Gi)),It=0;let Wa=We*Ti+Gi;Wi.lineOffset=Math.max(Gi,nn),xr+=Wa,Ai=Math.max(Wa,Ai),++$i}var Ei;let wn=xr-vv,{horizontalAlign:Sn,verticalAlign:qn}=wE(ht);(function(Jr,Ti,nn,Wi,An,Gi,Wa,Gn,nr){let Sr=(Ti-nn)*An,Pr=0;Pr=Gi!==Wa?-Gn*Wi-vv:(-Wi*nr+.5)*Wa;for(let fa of Jr)for(let Vr of fa.positionedGlyphs)Vr.x+=Sr,Vr.y+=Pr})(Ee.positionedLines,ho,Sn,qn,gr,Ai,We,wn,He.length),Ee.top+=-qn*wn,Ee.bottom=Ee.top+wn,Ee.left+=-Sn*gr,Ee.right=Ee.left+gr}(ye,n,l,h,ee,_,b,A,k,P,F,V),!function(Ee){for(let De of Ee)if(De.positionedGlyphs.length!==0)return!1;return!0}(ce)&&ye}let $x={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},f0e={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},d0e={40:!0};function zN(o,n,l,h,p,y){if(n.imageName){let _=h[n.imageName];return _?_.displaySize[0]*n.scale*gi/y+p:0}{let _=l[n.fontStack],b=_&&_[o];return b?b.metrics.advance*n.scale+p:0}}function NN(o,n,l,h){let p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(l)*l}function p0e(o,n,l){let h=0;return o===10&&(h-=1e4),l&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function BN(o,n,l,h,p,y){let _=null,b=NN(n,l,p,y);for(let A of h){let P=NN(n-A.x,l,p,y)+A.badness;P<=b&&(_=A,b=P)}return{index:o,x:n,priorBreak:_,badness:b}}function UN(o){return o?UN(o.priorBreak).concat(o.index):[]}function bE(o,n,l,h,p,y){if(!o)return[];let _=[],b=function(k,F,U,V,W,ee){let ne=0;for(let xe=0;xe<k.length();xe++){let ce=k.getSection(xe);ne+=zN(k.getCharCode(xe),ce,V,W,F,ee)}return ne/Math.max(1,Math.ceil(ne/U))}(o,n,l,h,p,y),A=o.text.indexOf("\u200B")>=0,P=0;for(let k=0;k<o.length();k++){let F=o.getSection(k),U=o.getCharCode(k);if($x[U]||(P+=zN(U,F,h,p,n,y)),k<o.length()-1){let V=!((M=U)<11904)&&(!!Xt["CJK Compatibility Forms"](M)||!!Xt["CJK Compatibility"](M)||!!Xt["CJK Strokes"](M)||!!Xt["CJK Symbols and Punctuation"](M)||!!Xt["Enclosed CJK Letters and Months"](M)||!!Xt["Halfwidth and Fullwidth Forms"](M)||!!Xt["Ideographic Description Characters"](M)||!!Xt["Vertical Forms"](M)||Tx.test(String.fromCodePoint(M)));(f0e[U]||V||F.imageName||k!==o.length()-2&&d0e[o.getCharCode(k+1)])&&_.push(BN(k+1,P,b,_,p0e(U,o.getCharCode(k+1),V&&A),!1))}}var M;return UN(BN(o.length(),P,b,_,0,!0))}function wE(o){let n=.5,l=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0;}switch(o){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0;}return{horizontalAlign:n,verticalAlign:l}}function m0e(o,n,l,h,p){if(!h&&!p)return;let y=o[l],_=(o[l].x+y.metrics.advance*y.scale)*h;for(let b=n;b<=l;b++)o[b].x-=_,o[b].y+=p}function v0e(o,n,l){let{horizontalAlign:h,verticalAlign:p}=wE(l),y=n[0]-o.displaySize[0]*h,_=n[1]-o.displaySize[1]*p;return{image:o,top:_,bottom:_+o.displaySize[1],left:y,right:y+o.displaySize[0]}}function jN(o){var n,l;let h=o.left,p=o.top,y=o.right-h,_=o.bottom-p,b=(n=o.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",A=(l=o.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",P=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(A==="proportional"){if(b==="stretchOnly"&&y/_<P||b==="proportional"){let M=Math.ceil(_*P);h*=M/y,y=M}}else if(b==="proportional"&&A==="stretchOnly"&&P!==0&&y/_>P){let M=Math.ceil(y/P);p*=M/_,_=M}return{x1:h,y1:p,x2:h+y,y2:p+_}}function VN(o,n,l,h,p,y){let _=o.image,b;if(_.content){let ee=_.content,ne=_.pixelRatio||1;b=[ee[0]/ne,ee[1]/ne,_.displaySize[0]-ee[2]/ne,_.displaySize[1]-ee[3]/ne]}let A=n.left*y,P=n.right*y,M,k,F,U;l==="width"||l==="both"?(U=p[0]+A-h[3],k=p[0]+P+h[1]):(U=p[0]+(A+P-_.displaySize[0])/2,k=U+_.displaySize[0]);let V=n.top*y,W=n.bottom*y;return l==="height"||l==="both"?(M=p[1]+V-h[0],F=p[1]+W+h[2]):(M=p[1]+(V+W-_.displaySize[1])/2,F=M+_.displaySize[1]),{image:_,top:M,right:k,bottom:F,left:U,collisionPadding:b}}let yv=255,ys=128,Cl=yv*ys;function $N(o,n){let{expression:l}=n;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Er(o+1))};if(l.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:p}=l,y=0;for(;y<h.length&&h[y]<=o;)y++;y=Math.max(0,y-1);let _=y;for(;_<h.length&&h[_]<o+1;)_++;_=Math.min(h.length-1,_);let b=h[y],A=h[_];return l.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:A,interpolationType:p}:{kind:"camera",minZoom:b,maxZoom:A,minSize:l.evaluate(new Er(b)),maxSize:l.evaluate(new Er(A)),interpolationType:p}}}function SE(o,n,l){let h="never",p=o.get(n);return p?h=p:o.get(l)&&(h="always"),h}let g0e=Tl.VectorTileFeature.types,y0e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wx(o,n,l,h,p,y,_,b,A,P,M,k,F){let U=b?Math.min(Cl,Math.round(b[0])):0,V=b?Math.min(Cl,Math.round(b[1])):0;o.emplaceBack(n,l,Math.round(32*h),Math.round(32*p),y,_,(U<<1)+(A?1:0),V,16*P,16*M,256*k,256*F)}function qE(o,n,l){o.emplaceBack(n.x,n.y,l),o.emplaceBack(n.x,n.y,l),o.emplaceBack(n.x,n.y,l),o.emplaceBack(n.x,n.y,l)}function _0e(o){for(let n of o.sections)if(YA(n.text))return!0;return!1}class AE{constructor(n){this.layoutVertexArray=new Wf,this.indexArray=new ja,this.programConfigurations=n,this.segments=new Jt,this.dynamicLayoutVertexArray=new av,this.opacityVertexArray=new ca,this.hasVisibleVertices=!1,this.placedSymbolArray=new Tr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,l,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Hxe.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Xxe.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,y0e,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}nt("SymbolBuffers",AE);class EE{constructor(n,l,h){this.layoutVertexArray=new n,this.layoutAttributes=l,this.indexArray=new h,this.segments=new Jt,this.collisionVertexArray=new vs}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Jxe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}nt("CollisionBuffers",EE);class id{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=aE([]),this.placementViewportMatrix=aE([]);let l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$N(this.zoom,l["text-size"]),this.iconSizeData=$N(this.zoom,l["icon-size"]);let h=this.layers[0].layout,p=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=SE(h,"text-overlap","text-allow-overlap")!=="never"||SE(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>u.ah[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new AE(new th(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new AE(new th(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ir,this.lineVertexArray=new Bi,this.symbolInstances=new Kt,this.textAnchorOffsets=new Cr}calculateGlyphDependencies(n,l,h,p,y){for(let _=0;_<n.length;_++)if(l[n.charCodeAt(_)]=!0,(h||p)&&y){let b=mv[n.charAt(_)];b&&(l[b.charCodeAt(0)]=!0)}}populate(n,l,h){let p=this.layers[0],y=p.layout,_=y.get("text-font"),b=y.get("text-field"),A=y.get("icon-image"),P=(b.value.kind!=="constant"||b.value.value instanceof Nn&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),M=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,k=y.get("symbol-sort-key");if(this.features=[],!P&&!M)return;let F=l.iconDependencies,U=l.glyphDependencies,V=l.availableImages,W=new Er(this.zoom);for(let{feature:ee,id:ne,index:xe,sourceLayerIndex:ce}of n){let ye=p._featureFilter.needGeometry,Ee=ih(ee,ye);if(!p._featureFilter.filter(W,Ee,h))continue;let De,Ye;if(ye||(Ee.geometry=rh(ee)),P){let He=p.getValueAndResolveTokens("text-field",Ee,h,V),We=Nn.factory(He),ht=this.hasRTLText=this.hasRTLText||_0e(We);(!ht||Vn.getRTLTextPluginStatus()==="unavailable"||ht&&Vn.isParsed())&&(De=Qxe(We,p,Ee))}if(M){let He=p.getValueAndResolveTokens("icon-image",Ee,h,V);Ye=He instanceof Un?He:Un.fromString(He)}if(!De&&!Ye)continue;let bt=this.sortFeaturesByKey?k.evaluate(Ee,{},h):void 0;if(this.features.push({id:ne,text:De,icon:Ye,index:xe,sourceLayerIndex:ce,geometry:Ee.geometry,properties:ee.properties,type:g0e[ee.type],sortKey:bt}),Ye&&(F[Ye.name]=!0),De){let He=_.evaluate(Ee,{},h).join(","),We=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ah.vertical)>=0;for(let ht of De.sections)if(ht.image)F[ht.image.name]=!0;else{let ot=ev(De.toString()),it=ht.fontStack||He,Ie=U[it]=U[it]||{};this.calculateGlyphDependencies(ht.text,Ie,We,this.allowVerticalPlacement,ot)}}}y.get("symbol-placement")==="line"&&(this.features=function(ee){let ne={},xe={},ce=[],ye=0;function Ee(He){ce.push(ee[He]),ye++}function De(He,We,ht){let ot=xe[He];return delete xe[He],xe[We]=ot,ce[ot].geometry[0].pop(),ce[ot].geometry[0]=ce[ot].geometry[0].concat(ht[0]),ot}function Ye(He,We,ht){let ot=ne[We];return delete ne[We],ne[He]=ot,ce[ot].geometry[0].shift(),ce[ot].geometry[0]=ht[0].concat(ce[ot].geometry[0]),ot}function bt(He,We,ht){let ot=ht?We[0][We[0].length-1]:We[0][0];return`${He}:${ot.x}:${ot.y}`}for(let He=0;He<ee.length;He++){let We=ee[He],ht=We.geometry,ot=We.text?We.text.toString():null;if(!ot){Ee(He);continue}let it=bt(ot,ht),Ie=bt(ot,ht,!0);if(it in xe&&Ie in ne&&xe[it]!==ne[Ie]){let ft=Ye(it,Ie,ht),lt=De(it,Ie,ce[ft].geometry);delete ne[it],delete xe[Ie],xe[bt(ot,ce[lt].geometry,!0)]=lt,ce[ft].geometry=null}else it in xe?De(it,Ie,ht):Ie in ne?Ye(it,Ie,ht):(Ee(He),ne[it]=ye-1,xe[Ie]=ye-1)}return ce.filter(He=>He.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ee,ne)=>ee.sortKey-ne.sortKey)}update(n,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,l){let h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(l[n.segment+1]),y=n.dist(l[n.segment]),_={};for(let b=n.segment+1;b<l.length;b++)_[b]={x:l[b].x,y:l[b].y,tileUnitDistanceFromAnchor:p},b<l.length-1&&(p+=l[b+1].dist(l[b]));for(let b=n.segment||0;b>=0;b--)_[b]={x:l[b].x,y:l[b].y,tileUnitDistanceFromAnchor:y},b>0&&(y+=l[b-1].dist(l[b]));for(let b=0;b<l.length;b++){let A=_[b];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,l,h,p,y,_,b,A,P,M,k,F){let U=n.indexArray,V=n.layoutVertexArray,W=n.segments.prepareSegment(4*l.length,V,U,this.canOverlap?_.sortKey:void 0),ee=this.glyphOffsetArray.length,ne=W.vertexLength,xe=this.allowVerticalPlacement&&b===u.ah.vertical?Math.PI/2:0,ce=_.text&&_.text.sections;for(let ye=0;ye<l.length;ye++){let{tl:Ee,tr:De,bl:Ye,br:bt,tex:He,pixelOffsetTL:We,pixelOffsetBR:ht,minFontScaleX:ot,minFontScaleY:it,glyphOffset:Ie,isSDF:ft,sectionIndex:lt}=l[ye],It=W.vertexLength,xr=Ie[1];Wx(V,A.x,A.y,Ee.x,xr+Ee.y,He.x,He.y,h,ft,We.x,We.y,ot,it),Wx(V,A.x,A.y,De.x,xr+De.y,He.x+He.w,He.y,h,ft,ht.x,We.y,ot,it),Wx(V,A.x,A.y,Ye.x,xr+Ye.y,He.x,He.y+He.h,h,ft,We.x,ht.y,ot,it),Wx(V,A.x,A.y,bt.x,xr+bt.y,He.x+He.w,He.y+He.h,h,ft,ht.x,ht.y,ot,it),qE(n.dynamicLayoutVertexArray,A,xe),U.emplaceBack(It,It+1,It+2),U.emplaceBack(It+1,It+2,It+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ie[0]),ye!==l.length-1&&lt===l[ye+1].sectionIndex||n.programConfigurations.populatePaintArrays(V.length,_,_.index,{},F,ce&&ce[lt])}n.placedSymbolArray.emplaceBack(A.x,A.y,ee,this.glyphOffsetArray.length-ee,ne,P,M,A.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],b,0,!1,0,k)}_addCollisionDebugVertex(n,l,h,p,y,_){return l.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,y,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,l,h,p,y,_,b){let A=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),P=A.vertexLength,M=y.layoutVertexArray,k=y.collisionVertexArray,F=b.anchorX,U=b.anchorY;this._addCollisionDebugVertex(M,k,_,F,U,new T(n,l)),this._addCollisionDebugVertex(M,k,_,F,U,new T(h,l)),this._addCollisionDebugVertex(M,k,_,F,U,new T(h,p)),this._addCollisionDebugVertex(M,k,_,F,U,new T(n,p)),A.vertexLength+=4;let V=y.indexArray;V.emplaceBack(P,P+1),V.emplaceBack(P+1,P+2),V.emplaceBack(P+2,P+3),V.emplaceBack(P+3,P),A.primitiveLength+=4}addDebugCollisionBoxes(n,l,h,p){for(let y=n;y<l;y++){let _=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new EE(ha,TN.members,ki),this.iconCollisionBox=new EE(ha,TN.members,ki);for(let n=0;n<this.symbolInstances.length;n++){let l=this.symbolInstances.get(n);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(n,l,h,p,y,_,b,A,P){let M={};for(let k=l;k<h;k++){let F=n.get(k);M.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.textFeatureIndex=F.featureIndex;break}for(let k=p;k<y;k++){let F=n.get(k);M.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalTextFeatureIndex=F.featureIndex;break}for(let k=_;k<b;k++){let F=n.get(k);M.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.iconFeatureIndex=F.featureIndex;break}for(let k=A;k<P;k++){let F=n.get(k);M.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalIconFeatureIndex=F.featureIndex;break}return M}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){let h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,l){let h=n.placedSymbolArray.get(l),p=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<p;y+=4)n.indexArray.emplaceBack(y,y+1,y+2),n.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let l=Math.sin(n),h=Math.cos(n),p=[],y=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);let A=this.symbolInstances.get(b);p.push(0|Math.round(l*A.anchorX+h*A.anchorY)),y.push(A.featureIndex)}return _.sort((b,A)=>p[b]-p[A]||y[A]-y[b]),_}addToSortKeyRanges(n,l){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let l of this.symbolInstanceIndexes){let h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,y,_)=>{p>=0&&_.indexOf(p)===y&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let WN,GN;nt("SymbolBucket",id,{omit:["layers","collisionBoxArray","features","compareText"]}),id.MAX_GLYPHS=65535,id.addDynamicAttributes=qE;var TE={get paint(){return GN=GN||new g({"icon-opacity":new St(Ae.paint_symbol["icon-opacity"]),"icon-color":new St(Ae.paint_symbol["icon-color"]),"icon-halo-color":new St(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new St(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new St(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new st(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new st(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new St(Ae.paint_symbol["text-opacity"]),"text-color":new St(Ae.paint_symbol["text-color"],{runtimeType:gn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new St(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new St(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new St(Ae.paint_symbol["text-halo-blur"]),"text-translate":new st(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new st(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return WN=WN||new g({"symbol-placement":new st(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new st(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new st(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new St(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new st(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new st(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new st(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new st(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new st(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new st(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new St(Ae.layout_symbol["icon-size"]),"icon-text-fit":new st(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new st(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new St(Ae.layout_symbol["icon-image"]),"icon-rotate":new St(Ae.layout_symbol["icon-rotate"]),"icon-padding":new St(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new st(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new St(Ae.layout_symbol["icon-offset"]),"icon-anchor":new St(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new st(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new st(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new st(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new St(Ae.layout_symbol["text-field"]),"text-font":new St(Ae.layout_symbol["text-font"]),"text-size":new St(Ae.layout_symbol["text-size"]),"text-max-width":new St(Ae.layout_symbol["text-max-width"]),"text-line-height":new st(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new St(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new St(Ae.layout_symbol["text-justify"]),"text-radial-offset":new St(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new st(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new St(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new St(Ae.layout_symbol["text-anchor"]),"text-max-angle":new st(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new st(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new St(Ae.layout_symbol["text-rotate"]),"text-padding":new st(Ae.layout_symbol["text-padding"]),"text-keep-upright":new st(Ae.layout_symbol["text-keep-upright"]),"text-transform":new St(Ae.layout_symbol["text-transform"]),"text-offset":new St(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new st(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new st(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new st(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new st(Ae.layout_symbol["text-optional"])})}};class KN{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:no,this.defaultValue=n}evaluate(n){if(n.formattedSection){let l=this.defaultValue.property.overrides;if(l&&l.hasOverride(n.formattedSection))return l.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}nt("FormatSectionOverride",KN,{omit:["defaultValue"]});class Gx extends c{constructor(n){super(n,TE)}recalculate(n,l){if(super.recalculate(n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let p=[];for(let y of h)p.indexOf(y)<0&&p.push(y);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,l,h,p){let y=this.layout.get(n).evaluate(l,{},h,p),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||Pf(_.value)||!y?y:function(b,A){return A.replace(/{([^{}]+)}/g,(P,M)=>b&&M in b?String(b[M]):"")}(l.properties,y)}createBucket(n){return new id(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let n of TE.paint.overridableProperties){if(!Gx.hasPaintOverride(this.layout,n))continue;let l=this.paint.get(n),h=new KN(l),p=new Cf(h,l.property.specification),y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new hl("source",p):new fl("composite",p,l.value.zoomStops),this.paint._values[n]=new lo(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(n,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Gx.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,l){let h=n.get("text-field"),p=TE.paint.properties[l],y=!1,_=b=>{for(let A of b)if(p.overrides&&p.overrides.hasOverride(A))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Nn)_(h.value.value.sections);else if(h.value.kind==="source"){let b=P=>{y||(P instanceof La&&li(P.value)===Wo?_(P.value.sections):P instanceof xf?_(P.sections):P.eachChild(b))},A=h.value;A._styleExpression&&b(A._styleExpression.expression)}return y}}let ZN;var x0e={get paint(){return ZN=ZN||new g({"background-color":new st(Ae.paint_background["background-color"]),"background-pattern":new Vf(Ae.paint_background["background-pattern"]),"background-opacity":new st(Ae.paint_background["background-opacity"])})}};class b0e extends c{constructor(n){super(n,x0e)}}let HN;var w0e={get paint(){return HN=HN||new g({"raster-opacity":new st(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new st(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new st(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new st(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new st(Ae.paint_raster["raster-saturation"]),"raster-contrast":new st(Ae.paint_raster["raster-contrast"]),"raster-resampling":new st(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new st(Ae.paint_raster["raster-fade-duration"])})}};class S0e extends c{constructor(n){super(n,w0e)}}class q0e extends c{constructor(n){super(n,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class A0e{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let IE=6371008.8;class Pl{constructor(n,l){if(isNaN(n)||isNaN(l))throw new Error(`Invalid LngLat object: (${n}, ${l})`);if(this.lng=+n,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pl(be(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){let l=Math.PI/180,h=this.lat*l,p=n.lat*l,y=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*l);return IE*Math.acos(Math.min(y,1))}static convert(n){if(n instanceof Pl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Pl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Pl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let XN=2*Math.PI*IE;function JN(o){return XN*Math.cos(o*Math.PI/180)}function YN(o){return(180+o)/360}function QN(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function eB(o,n){return o/JN(n)}function CE(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class _v{constructor(n,l,h=0){this.x=+n,this.y=+l,this.z=+h}static fromLngLat(n,l=0){let h=Pl.convert(n);return new _v(YN(h.lng),QN(h.lat),eB(l,h.lat))}toLngLat(){return new Pl(360*this.x-180,CE(this.y))}toAltitude(){return this.z*JN(CE(this.y))}meterInMercatorCoordinateUnits(){return 1/XN*(n=CE(this.y),1/Math.cos(n*Math.PI/180));var n}}function tB(o,n,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class PE{constructor(n,l,h){if(!function(p,y,_){return!(p<0||p>25||_<0||_>=Math.pow(2,p)||y<0||y>=Math.pow(2,p))}(n,l,h))throw new Error(`x=${l}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=l,this.y=h,this.key=xv(0,n,n,l,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,l,h){let p=(_=this.y,b=this.z,A=tB(256*(y=this.x),256*(_=Math.pow(2,b)-_-1),b),P=tB(256*(y+1),256*(_+1),b),A[0]+","+A[1]+","+P[0]+","+P[1]);var y,_,b,A,P;let M=function(k,F,U){let V,W="";for(let ee=k;ee>0;ee--)V=1<<ee-1,W+=(F&V?1:0)+(U&V?2:0);return W}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){let l=this.z-n.z;return l>0&&n.x===this.x>>l&&n.y===this.y>>l}getTilePoint(n){let l=Math.pow(2,this.z);return new T((n.x*l-this.x)*ci,(n.y*l-this.y)*ci)}toString(){return`${this.z}/${this.x}/${this.y}`}}class rB{constructor(n,l){this.wrap=n,this.canonical=l,this.key=xv(n,l.z,l.z,l.x,l.y)}}class $a{constructor(n,l,h,p,y){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=l,this.canonical=new PE(h,+p,+y),this.key=xv(l,n,h,p,y)}clone(){return new $a(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let l=this.canonical.z-n;return n>this.canonical.z?new $a(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new $a(n,this.wrap,n,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(n,l){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-n;return n>this.canonical.z?xv(this.wrap*+l,n,this.canonical.z,this.canonical.x,this.canonical.y):xv(this.wrap*+l,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;let l=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>l&&n.canonical.y===this.canonical.y>>l}children(n){if(this.overscaledZ>=n)return[new $a(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let l=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new $a(l,this.wrap,l,h,p),new $a(l,this.wrap,l,h+1,p),new $a(l,this.wrap,l,h,p+1),new $a(l,this.wrap,l,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new $a(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new $a(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new rB(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new _v(n.x-this.wrap,n.y))}}function xv(o,n,l,h,p){(o*=2)<0&&(o=-1*o-1);let y=1<<l;return(y*y*o+y*p+h).toString(36)+l.toString(36)+n.toString(36)}nt("CanonicalTileID",PE),nt("OverscaledTileID",$a,{omit:["posMatrix"]});class iB{constructor(n,l,h,p=1,y=1,_=1,b=0){if(this.uid=n,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void cr(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;let A=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=y,this.blueFactor=_,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let P=0;P<A;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(A,P)]=this.data[this._idx(A-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,A)]=this.data[this._idx(P,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<A;P++)for(let M=0;M<A;M++){let k=this.get(P,M);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(n,l){let h=new Uint8Array(this.data.buffer),p=4*this._idx(n,l);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,l){if(n<-1||n>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(n+1)}unpack(n,l,h){return n*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Va({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,l,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=l*this.dim,y=l*this.dim+this.dim,_=h*this.dim,b=h*this.dim+this.dim;switch(l){case-1:p=y-1;break;case 1:y=p+1;}switch(h){case-1:_=b-1;break;case 1:b=_+1;}let A=-l*this.dim,P=-h*this.dim;for(let M=_;M<b;M++)for(let k=p;k<y;k++)this.data[this._idx(k,M)]=n.data[this._idx(k+A,M+P)]}}nt("DEMData",iB);class nB{constructor(n){this._stringToNumber={},this._numberToString=[];for(let l=0;l<n.length;l++){let h=n[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class aB{constructor(n,l,h,p,y){this.type="Feature",this._vectorTileFeature=n,n._z=l,n._x=h,n._y=p,this.properties=n.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){let n={geometry:this.geometry};for(let l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(n[l]=this[l]);return n}}class oB{constructor(n,l){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new vl(ci,16,0),this.grid3D=new vl(ci,16,0),this.featureIndexArray=new tn,this.promoteId=l}insert(n,l,h,p,y,_){let b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,y);let A=_?this.grid3D:this.grid;for(let P=0;P<l.length;P++){let M=l[P],k=[1/0,1/0,-1/0,-1/0];for(let F=0;F<M.length;F++){let U=M[F];k[0]=Math.min(k[0],U.x),k[1]=Math.min(k[1],U.y),k[2]=Math.max(k[2],U.x),k[3]=Math.max(k[3],U.y)}k[0]<ci&&k[1]<ci&&k[2]>=0&&k[3]>=0&&A.insert(b,k[0],k[1],k[2],k[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Tl.VectorTile(new yE(this.rawTileData)).layers,this.sourceLayerCoder=new nB(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,l,h,p){this.loadVTLayers();let y=n.params||{},_=ci/n.tileSize/n.scale,b=Nm(y.filter),A=n.queryGeometry,P=n.queryPadding*_,M=uB(A),k=this.grid.query(M.minX-P,M.minY-P,M.maxX+P,M.maxY+P),F=uB(n.cameraQueryGeometry),U=this.grid3D.query(F.minX-P,F.minY-P,F.maxX+P,F.maxY+P,(ee,ne,xe,ce)=>function(ye,Ee,De,Ye,bt){for(let We of ye)if(Ee<=We.x&&De<=We.y&&Ye>=We.x&&bt>=We.y)return!0;let He=[new T(Ee,De),new T(Ee,bt),new T(Ye,bt),new T(Ye,De)];if(ye.length>2){for(let We of He)if(Xf(ye,We))return!0}for(let We=0;We<ye.length-1;We++)if(axe(ye[We],ye[We+1],He))return!0;return!1}(n.cameraQueryGeometry,ee-P,ne-P,xe+P,ce+P));for(let ee of U)k.push(ee);k.sort(E0e);let V={},W;for(let ee=0;ee<k.length;ee++){let ne=k[ee];if(ne===W)continue;W=ne;let xe=this.featureIndexArray.get(ne),ce=null;this.loadMatchingFeature(V,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,b,y.layers,y.availableImages,l,h,p,(ye,Ee,De)=>(ce||(ce=rh(ye)),Ee.queryIntersectsFeature(A,ye,De,ce,this.z,n.transform,_,n.pixelPosMatrix)))}return V}loadMatchingFeature(n,l,h,p,y,_,b,A,P,M,k){let F=this.bucketLayerIDs[l];if(_&&!function(ee,ne){for(let xe=0;xe<ee.length;xe++)if(ne.indexOf(ee[xe])>=0)return!0;return!1}(_,F))return;let U=this.sourceLayerCoder.decode(h),V=this.vtLayers[U].feature(p);if(y.needGeometry){let ee=ih(V,!0);if(!y.filter(new Er(this.tileID.overscaledZ),ee,this.tileID.canonical))return}else if(!y.filter(new Er(this.tileID.overscaledZ),V))return;let W=this.getId(V,U);for(let ee=0;ee<F.length;ee++){let ne=F[ee];if(_&&_.indexOf(ne)<0)continue;let xe=A[ne];if(!xe)continue;let ce={};W&&M&&(ce=M.getState(xe.sourceLayer||"_geojsonTileLayer",W));let ye=Le({},P[ne]);ye.paint=sB(ye.paint,xe.paint,V,ce,b),ye.layout=sB(ye.layout,xe.layout,V,ce,b);let Ee=!k||k(V,xe,ce);if(!Ee)continue;let De=new aB(V,this.z,this.x,this.y,W);De.layer=ye;let Ye=n[ne];Ye===void 0&&(Ye=n[ne]=[]),Ye.push({featureIndex:p,feature:De,intersectionZ:Ee})}}lookupSymbolFeatures(n,l,h,p,y,_,b,A){let P={};this.loadVTLayers();let M=Nm(y);for(let k of n)this.loadMatchingFeature(P,h,p,k,M,_,b,A,l);return P}hasLayer(n){for(let l of this.bucketLayerIDs)for(let h of l)if(n===h)return!0;return!1}getId(n,l){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof h=="boolean"&&(h=Number(h))),h}}function sB(o,n,l,h,p){return Ge(o,(y,_)=>{let b=n instanceof Yc?n.get(_):null;return b&&b.evaluate?b.evaluate(l,h,p):b})}function uB(o){let n=1/0,l=1/0,h=-1/0,p=-1/0;for(let y of o)n=Math.min(n,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),p=Math.max(p,y.y);return{minX:n,minY:l,maxX:h,maxY:p}}function E0e(o,n){return n-o}function lB(o,n,l,h,p){let y=[];for(let _=0;_<o.length;_++){let b=o[_],A;for(let P=0;P<b.length-1;P++){let M=b[P],k=b[P+1];M.x<n&&k.x<n||(M.x<n?M=new T(n,M.y+(n-M.x)/(k.x-M.x)*(k.y-M.y))._round():k.x<n&&(k=new T(n,M.y+(n-M.x)/(k.x-M.x)*(k.y-M.y))._round()),M.y<l&&k.y<l||(M.y<l?M=new T(M.x+(l-M.y)/(k.y-M.y)*(k.x-M.x),l)._round():k.y<l&&(k=new T(M.x+(l-M.y)/(k.y-M.y)*(k.x-M.x),l)._round()),M.x>=h&&k.x>=h||(M.x>=h?M=new T(h,M.y+(h-M.x)/(k.x-M.x)*(k.y-M.y))._round():k.x>=h&&(k=new T(h,M.y+(h-M.x)/(k.x-M.x)*(k.y-M.y))._round()),M.y>=p&&k.y>=p||(M.y>=p?M=new T(M.x+(p-M.y)/(k.y-M.y)*(k.x-M.x),p)._round():k.y>=p&&(k=new T(M.x+(p-M.y)/(k.y-M.y)*(k.x-M.x),p)._round()),A&&M.equals(A[A.length-1])||(A=[M],y.push(A)),A.push(k)))))}}return y}nt("FeatureIndex",oB,{omit:["rawTileData","sourceLayerCoder"]});class Ml extends T{constructor(n,l,h,p){super(n,l),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new Ml(this.x,this.y,this.angle,this.segment)}}function cB(o,n,l,h,p){if(n.segment===void 0||l===0)return!0;let y=n,_=n.segment+1,b=0;for(;b>-l/2;){if(_--,_<0)return!1;b-=o[_].dist(y),y=o[_]}b+=o[_].dist(o[_+1]),_++;let A=[],P=0;for(;b<l/2;){let M=o[_],k=o[_+1];if(!k)return!1;let F=o[_-1].angleTo(M)-M.angleTo(k);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:b,angleDelta:F}),P+=F;b-A[0].distance>h;)P-=A.shift().angleDelta;if(P>p)return!1;_++,b+=M.dist(k)}return!0}function hB(o){let n=0;for(let l=0;l<o.length-1;l++)n+=o[l].dist(o[l+1]);return n}function fB(o,n,l){return o?.6*n*l:0}function dB(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function T0e(o,n,l,h,p,y){let _=fB(l,p,y),b=dB(l,h)*y,A=0,P=hB(o)/2;for(let M=0;M<o.length-1;M++){let k=o[M],F=o[M+1],U=k.dist(F);if(A+U>P){let V=(P-A)/U,W=yn.number(k.x,F.x,V),ee=yn.number(k.y,F.y,V),ne=new Ml(W,ee,F.angleTo(k),M);return ne._round(),!_||cB(o,ne,b,_,n)?ne:void 0}A+=U}}function I0e(o,n,l,h,p,y,_,b,A){let P=fB(h,y,_),M=dB(h,p),k=M*_,F=o[0].x===0||o[0].x===A||o[0].y===0||o[0].y===A;return n-k<n/4&&(n=k+n/4),pB(o,F?n/2*b%n:(M/2+2*y)*_*b%n,n,P,l,k,F,!1,A)}function pB(o,n,l,h,p,y,_,b,A){let P=y/2,M=hB(o),k=0,F=n-l,U=[];for(let V=0;V<o.length-1;V++){let W=o[V],ee=o[V+1],ne=W.dist(ee),xe=ee.angleTo(W);for(;F+l<k+ne;){F+=l;let ce=(F-k)/ne,ye=yn.number(W.x,ee.x,ce),Ee=yn.number(W.y,ee.y,ce);if(ye>=0&&ye<A&&Ee>=0&&Ee<A&&F-P>=0&&F+P<=M){let De=new Ml(ye,Ee,xe,V);De._round(),h&&!cB(o,De,y,h,p)||U.push(De)}}k+=ne}return b||U.length||_||(U=pB(o,k/2,l,h,p,y,_,!0,A)),U}nt("Anchor",Ml);let nd=Wn;function mB(o,n,l,h){let p=[],y=o.image,_=y.pixelRatio,b=y.paddedRect.w-2*nd,A=y.paddedRect.h-2*nd,P={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom},M=y.stretchX||[[0,b]],k=y.stretchY||[[0,A]],F=(Ie,ft)=>Ie+ft[1]-ft[0],U=M.reduce(F,0),V=k.reduce(F,0),W=b-U,ee=A-V,ne=0,xe=U,ce=0,ye=V,Ee=0,De=W,Ye=0,bt=ee;if(y.content&&h){let Ie=y.content,ft=Ie[2]-Ie[0],lt=Ie[3]-Ie[1];(y.textFitWidth||y.textFitHeight)&&(P=jN(o)),ne=Kx(M,0,Ie[0]),ce=Kx(k,0,Ie[1]),xe=Kx(M,Ie[0],Ie[2]),ye=Kx(k,Ie[1],Ie[3]),Ee=Ie[0]-ne,Ye=Ie[1]-ce,De=ft-xe,bt=lt-ye}let He=P.x1,We=P.y1,ht=P.x2-He,ot=P.y2-We,it=(Ie,ft,lt,It)=>{let xr=Zx(Ie.stretch-ne,xe,ht,He),gr=Hx(Ie.fixed-Ee,De,Ie.stretch,U),Ai=Zx(ft.stretch-ce,ye,ot,We),ho=Hx(ft.fixed-Ye,bt,ft.stretch,V),$i=Zx(lt.stretch-ne,xe,ht,He),Ei=Hx(lt.fixed-Ee,De,lt.stretch,U),wn=Zx(It.stretch-ce,ye,ot,We),Sn=Hx(It.fixed-Ye,bt,It.stretch,V),qn=new T(xr,Ai),Jr=new T($i,Ai),Ti=new T($i,wn),nn=new T(xr,wn),Wi=new T(gr/_,ho/_),An=new T(Ei/_,Sn/_),Gi=n*Math.PI/180;if(Gi){let nr=Math.sin(Gi),Sr=Math.cos(Gi),Pr=[Sr,-nr,nr,Sr];qn._matMult(Pr),Jr._matMult(Pr),nn._matMult(Pr),Ti._matMult(Pr)}let Wa=Ie.stretch+Ie.fixed,Gn=ft.stretch+ft.fixed;return{tl:qn,tr:Jr,bl:nn,br:Ti,tex:{x:y.paddedRect.x+nd+Wa,y:y.paddedRect.y+nd+Gn,w:lt.stretch+lt.fixed-Wa,h:It.stretch+It.fixed-Gn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wi,pixelOffsetBR:An,minFontScaleX:De/_/ht,minFontScaleY:bt/_/ot,isSDF:l}};if(h&&(y.stretchX||y.stretchY)){let Ie=vB(M,W,U),ft=vB(k,ee,V);for(let lt=0;lt<Ie.length-1;lt++){let It=Ie[lt],xr=Ie[lt+1];for(let gr=0;gr<ft.length-1;gr++)p.push(it(It,ft[gr],xr,ft[gr+1]))}}else p.push(it({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:A+1}));return p}function Kx(o,n,l){let h=0;for(let p of o)h+=Math.max(n,Math.min(l,p[1]))-Math.max(n,Math.min(l,p[0]));return h}function vB(o,n,l){let h=[{fixed:-nd,stretch:0}];for(let[p,y]of o){let _=h[h.length-1];h.push({fixed:p-_.stretch,stretch:_.stretch}),h.push({fixed:p-_.stretch,stretch:_.stretch+(y-p)})}return h.push({fixed:n+nd,stretch:l}),h}function Zx(o,n,l,h){return o/n*l+h}function Hx(o,n,l,h){return o-n*l/h}class Xx{constructor(n,l,h,p,y,_,b,A,P,M){var k;if(this.boxStartIndex=n.length,P){let F=_.top,U=_.bottom,V=_.collisionPadding;V&&(F-=V[1],U+=V[3]);let W=U-F;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{let F=!((k=_.image)===null||k===void 0)&&k.content&&(_.image.textFitWidth||_.image.textFitHeight)?jN(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};F.y1=F.y1*b-A[0],F.y2=F.y2*b+A[2],F.x1=F.x1*b-A[3],F.x2=F.x2*b+A[1];let U=_.collisionPadding;if(U&&(F.x1-=U[0]*b,F.y1-=U[1]*b,F.x2+=U[2]*b,F.y2+=U[3]*b),M){let V=new T(F.x1,F.y1),W=new T(F.x2,F.y1),ee=new T(F.x1,F.y2),ne=new T(F.x2,F.y2),xe=M*Math.PI/180;V._rotate(xe),W._rotate(xe),ee._rotate(xe),ne._rotate(xe),F.x1=Math.min(V.x,W.x,ee.x,ne.x),F.x2=Math.max(V.x,W.x,ee.x,ne.x),F.y1=Math.min(V.y,W.y,ee.y,ne.y),F.y2=Math.max(V.y,W.y,ee.y,ne.y)}n.emplaceBack(l.x,l.y,F.x1,F.y1,F.x2,F.y2,h,p,y)}this.boxEndIndex=n.length}}class C0e{constructor(n=[],l=(h,p)=>h<p?-1:h>p?1:0){if(this.data=n,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;let n=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),n}peek(){return this.data[0]}_up(n){let{data:l,compare:h}=this,p=l[n];for(;n>0;){let y=n-1>>1,_=l[y];if(h(p,_)>=0)break;l[n]=_,n=y}l[n]=p}_down(n){let{data:l,compare:h}=this,p=this.length>>1,y=l[n];for(;n<p;){let _=1+(n<<1),b=_+1;if(b<this.length&&h(l[b],l[_])<0&&(_=b),h(l[_],y)>=0)break;l[n]=l[_],n=_}l[n]=y}}function P0e(o,n=1,l=!1){let h=1/0,p=1/0,y=-1/0,_=-1/0,b=o[0];for(let U=0;U<b.length;U++){let V=b[U];(!U||V.x<h)&&(h=V.x),(!U||V.y<p)&&(p=V.y),(!U||V.x>y)&&(y=V.x),(!U||V.y>_)&&(_=V.y)}let A=Math.min(y-h,_-p),P=A/2,M=new C0e([],M0e);if(A===0)return new T(h,p);for(let U=h;U<y;U+=A)for(let V=p;V<_;V+=A)M.push(new ad(U+P,V+P,P,o));let k=function(U){let V=0,W=0,ee=0,ne=U[0];for(let xe=0,ce=ne.length,ye=ce-1;xe<ce;ye=xe++){let Ee=ne[xe],De=ne[ye],Ye=Ee.x*De.y-De.x*Ee.y;W+=(Ee.x+De.x)*Ye,ee+=(Ee.y+De.y)*Ye,V+=3*Ye}return new ad(W/V,ee/V,0,U)}(o),F=M.length;for(;M.length;){let U=M.pop();(U.d>k.d||!k.d)&&(k=U,l&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,F)),U.max-k.d<=n||(P=U.h/2,M.push(new ad(U.p.x-P,U.p.y-P,P,o)),M.push(new ad(U.p.x+P,U.p.y-P,P,o)),M.push(new ad(U.p.x-P,U.p.y+P,P,o)),M.push(new ad(U.p.x+P,U.p.y+P,P,o)),F+=4)}return l&&(console.log(`num probes: ${F}`),console.log(`best distance: ${k.d}`)),k.p}function M0e(o,n){return n.max-o.max}function ad(o,n,l,h){this.p=new T(o,n),this.h=l,this.d=function(p,y){let _=!1,b=1/0;for(let A=0;A<y.length;A++){let P=y[A];for(let M=0,k=P.length,F=k-1;M<k;F=M++){let U=P[M],V=P[F];U.y>p.y!=V.y>p.y&&p.x<(V.x-U.x)*(p.y-U.y)/(V.y-U.y)+U.x&&(_=!_),b=Math.min(b,Qz(p,U,V))}}return(_?1:-1)*Math.sqrt(b)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Vi;u.aq=void 0,(Vi=u.aq||(u.aq={}))[Vi.center=1]="center",Vi[Vi.left=2]="left",Vi[Vi.right=3]="right",Vi[Vi.top=4]="top",Vi[Vi.bottom=5]="bottom",Vi[Vi["top-left"]=6]="top-left",Vi[Vi["top-right"]=7]="top-right",Vi[Vi["bottom-left"]=8]="bottom-left",Vi[Vi["bottom-right"]=9]="bottom-right";let Ol=7,ME=Number.POSITIVE_INFINITY;function gB(o,n){return n[1]!==ME?function(l,h,p){let y=0,_=0;switch(h=Math.abs(h),p=Math.abs(p),l){case"top-right":case"top-left":case"top":_=p-Ol;break;case"bottom-right":case"bottom-left":case"bottom":_=-p+Ol;}switch(l){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h;}return[y,_]}(o,n[0],n[1]):function(l,h){let p=0,y=0;h<0&&(h=0);let _=h/Math.SQRT2;switch(l){case"top-right":case"top-left":y=_-Ol;break;case"bottom-right":case"bottom-left":y=-_+Ol;break;case"bottom":y=-h+Ol;break;case"top":y=h-Ol;}switch(l){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=h;break;case"right":p=-h;}return[p,y]}(o,n[0])}function yB(o,n,l){var h;let p=o.layout,y=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},l);if(y){let b=y.values,A=[];for(let P=0;P<b.length;P+=2){let M=A[P]=b[P],k=b[P+1].map(F=>F*gi);M.startsWith("top")?k[1]-=Ol:M.startsWith("bottom")&&(k[1]+=Ol),A[P+1]=k}return new aa(A)}let _=p.get("text-variable-anchor");if(_){let b;b=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},l)*gi,ME]:p.get("text-offset").evaluate(n,{},l).map(P=>P*gi);let A=[];for(let P of _)A.push(P,gB(P,b));return new aa(A)}return null}function OE(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function O0e(o,n,l,h,p,y,_,b,A,P,M){let k=y.textMaxSize.evaluate(n,{});k===void 0&&(k=_);let F=o.layers[0].layout,U=F.get("icon-offset").evaluate(n,{},M),V=xB(l.horizontal),W=_/24,ee=o.tilePixelRatio*W,ne=o.tilePixelRatio*k/24,xe=o.tilePixelRatio*b,ce=o.tilePixelRatio*F.get("symbol-spacing"),ye=F.get("text-padding")*o.tilePixelRatio,Ee=function(Ie,ft,lt,It=1){let xr=Ie.get("icon-padding").evaluate(ft,{},lt),gr=xr&&xr.values;return[gr[0]*It,gr[1]*It,gr[2]*It,gr[3]*It]}(F,n,M,o.tilePixelRatio),De=F.get("text-max-angle")/180*Math.PI,Ye=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",bt=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",He=F.get("symbol-placement"),We=ce/2,ht=F.get("icon-text-fit"),ot;h&&ht!=="none"&&(o.allowVerticalPlacement&&l.vertical&&(ot=VN(h,l.vertical,ht,F.get("icon-text-fit-padding"),U,W)),V&&(h=VN(h,V,ht,F.get("icon-text-fit-padding"),U,W)));let it=(Ie,ft)=>{ft.x<0||ft.x>=ci||ft.y<0||ft.y>=ci||function(lt,It,xr,gr,Ai,ho,$i,Ei,wn,Sn,qn,Jr,Ti,nn,Wi,An,Gi,Wa,Gn,nr,Sr,Pr,fa,Vr,od){let _s=lt.addToLineVertexArray(It,xr),xs,fo,Ga,Ri,pu=0,Sv=0,qB=0,AB=0,BE=-1,UE=-1,mu={},EB=Gf("");if(lt.allowVerticalPlacement&&gr.vertical){let an=Ei.layout.get("text-rotate").evaluate(Sr,{},Vr)+90;Ga=new Xx(wn,It,Sn,qn,Jr,gr.vertical,Ti,nn,Wi,an),$i&&(Ri=new Xx(wn,It,Sn,qn,Jr,$i,Gi,Wa,Wi,an))}if(Ai){let an=Ei.layout.get("icon-rotate").evaluate(Sr,{}),Ka=Ei.layout.get("icon-text-fit")!=="none",ah=mB(Ai,an,fa,Ka),Xo=$i?mB($i,an,fa,Ka):void 0;fo=new Xx(wn,It,Sn,qn,Jr,Ai,Gi,Wa,!1,an),pu=4*ah.length;let oh=lt.iconSizeData,bs=null;oh.kind==="source"?(bs=[ys*Ei.layout.get("icon-size").evaluate(Sr,{})],bs[0]>Cl&&cr(`${lt.layerIds[0]}: Value for "icon-size" is >= ${yv}. Reduce your "icon-size".`)):oh.kind==="composite"&&(bs=[ys*Pr.compositeIconSizes[0].evaluate(Sr,{},Vr),ys*Pr.compositeIconSizes[1].evaluate(Sr,{},Vr)],(bs[0]>Cl||bs[1]>Cl)&&cr(`${lt.layerIds[0]}: Value for "icon-size" is >= ${yv}. Reduce your "icon-size".`)),lt.addSymbols(lt.icon,ah,bs,nr,Gn,Sr,u.ah.none,It,_s.lineStartIndex,_s.lineLength,-1,Vr),BE=lt.icon.placedSymbolArray.length-1,Xo&&(Sv=4*Xo.length,lt.addSymbols(lt.icon,Xo,bs,nr,Gn,Sr,u.ah.vertical,It,_s.lineStartIndex,_s.lineLength,-1,Vr),UE=lt.icon.placedSymbolArray.length-1)}let TB=Object.keys(gr.horizontal);for(let an of TB){let Ka=gr.horizontal[an];if(!xs){EB=Gf(Ka.text);let Xo=Ei.layout.get("text-rotate").evaluate(Sr,{},Vr);xs=new Xx(wn,It,Sn,qn,Jr,Ka,Ti,nn,Wi,Xo)}let ah=Ka.positionedLines.length===1;if(qB+=_B(lt,It,Ka,ho,Ei,Wi,Sr,An,_s,gr.vertical?u.ah.horizontal:u.ah.horizontalOnly,ah?TB:[an],mu,BE,Pr,Vr),ah)break}gr.vertical&&(AB+=_B(lt,It,gr.vertical,ho,Ei,Wi,Sr,An,_s,u.ah.vertical,["vertical"],mu,UE,Pr,Vr));let D0e=xs?xs.boxStartIndex:lt.collisionBoxArray.length,L0e=xs?xs.boxEndIndex:lt.collisionBoxArray.length,F0e=Ga?Ga.boxStartIndex:lt.collisionBoxArray.length,z0e=Ga?Ga.boxEndIndex:lt.collisionBoxArray.length,N0e=fo?fo.boxStartIndex:lt.collisionBoxArray.length,B0e=fo?fo.boxEndIndex:lt.collisionBoxArray.length,U0e=Ri?Ri.boxStartIndex:lt.collisionBoxArray.length,j0e=Ri?Ri.boxEndIndex:lt.collisionBoxArray.length,Ho=-1,Yx=(an,Ka)=>an&&an.circleDiameter?Math.max(an.circleDiameter,Ka):Ka;Ho=Yx(xs,Ho),Ho=Yx(Ga,Ho),Ho=Yx(fo,Ho),Ho=Yx(Ri,Ho);let IB=Ho>-1?1:0;IB&&(Ho*=od/gi),lt.glyphOffsetArray.length>=id.MAX_GLYPHS&&cr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Sr.sortKey!==void 0&&lt.addToSortKeyRanges(lt.symbolInstances.length,Sr.sortKey);let V0e=yB(Ei,Sr,Vr),[$0e,W0e]=function(an,Ka){let ah=an.length,Xo=Ka==null?void 0:Ka.values;if((Xo==null?void 0:Xo.length)>0)for(let oh=0;oh<Xo.length;oh+=2){let bs=Xo[oh+1];an.emplaceBack(u.aq[Xo[oh]],bs[0],bs[1])}return[ah,an.length]}(lt.textAnchorOffsets,V0e);lt.symbolInstances.emplaceBack(It.x,It.y,mu.right>=0?mu.right:-1,mu.center>=0?mu.center:-1,mu.left>=0?mu.left:-1,mu.vertical||-1,BE,UE,EB,D0e,L0e,F0e,z0e,N0e,B0e,U0e,j0e,Sn,qB,AB,pu,Sv,IB,0,Ti,Ho,$0e,W0e)}(o,ft,Ie,l,h,p,ot,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,ee,[ye,ye,ye,ye],Ye,A,xe,Ee,bt,U,n,y,P,M,_)};if(He==="line")for(let Ie of lB(n.geometry,0,0,ci,ci)){let ft=I0e(Ie,ce,De,l.vertical||V,h,24,ne,o.overscaling,ci);for(let lt of ft)V&&k0e(o,V.text,We,lt)||it(Ie,lt)}else if(He==="line-center"){for(let Ie of n.geometry)if(Ie.length>1){let ft=T0e(Ie,De,l.vertical||V,h,24,ne);ft&&it(Ie,ft)}}else if(n.type==="Polygon")for(let Ie of wf(n.geometry,0)){let ft=P0e(Ie,16);it(Ie[0],new Ml(ft.x,ft.y,0))}else if(n.type==="LineString")for(let Ie of n.geometry)it(Ie,new Ml(Ie[0].x,Ie[0].y,0));else if(n.type==="Point")for(let Ie of n.geometry)for(let ft of Ie)it([ft],new Ml(ft.x,ft.y,0))}function _B(o,n,l,h,p,y,_,b,A,P,M,k,F,U,V){let W=function(xe,ce,ye,Ee,De,Ye,bt,He){let We=Ee.layout.get("text-rotate").evaluate(Ye,{})*Math.PI/180,ht=[];for(let ot of ce.positionedLines)for(let it of ot.positionedGlyphs){if(!it.rect)continue;let Ie=it.rect||{},ft=DN+1,lt=!0,It=1,xr=0,gr=(De||He)&&it.vertical,Ai=it.metrics.advance*it.scale/2;if(He&&ce.verticalizable&&(xr=ot.lineOffset/2-(it.imageName?-(gi-it.metrics.width*it.scale)/2:(it.scale-1)*gi)),it.imageName){let nr=bt[it.imageName];lt=nr.sdf,It=nr.pixelRatio,ft=Wn/It}let ho=De?[it.x+Ai,it.y]:[0,0],$i=De?[0,0]:[it.x+Ai+ye[0],it.y+ye[1]-xr],Ei=[0,0];gr&&(Ei=$i,$i=[0,0]);let wn=it.metrics.isDoubleResolution?2:1,Sn=(it.metrics.left-ft)*it.scale-Ai+$i[0],qn=(-it.metrics.top-ft)*it.scale+$i[1],Jr=Sn+Ie.w/wn*it.scale/It,Ti=qn+Ie.h/wn*it.scale/It,nn=new T(Sn,qn),Wi=new T(Jr,qn),An=new T(Sn,Ti),Gi=new T(Jr,Ti);if(gr){let nr=new T(-Ai,Ai-vv),Sr=-Math.PI/2,Pr=gi/2-Ai,fa=new T(5-vv-Pr,-(it.imageName?Pr:0)),Vr=new T(...Ei);nn._rotateAround(Sr,nr)._add(fa)._add(Vr),Wi._rotateAround(Sr,nr)._add(fa)._add(Vr),An._rotateAround(Sr,nr)._add(fa)._add(Vr),Gi._rotateAround(Sr,nr)._add(fa)._add(Vr)}if(We){let nr=Math.sin(We),Sr=Math.cos(We),Pr=[Sr,-nr,nr,Sr];nn._matMult(Pr),Wi._matMult(Pr),An._matMult(Pr),Gi._matMult(Pr)}let Wa=new T(0,0),Gn=new T(0,0);ht.push({tl:nn,tr:Wi,bl:An,br:Gi,tex:Ie,writingMode:ce.writingMode,glyphOffset:ho,sectionIndex:it.sectionIndex,isSDF:lt,pixelOffsetTL:Wa,pixelOffsetBR:Gn,minFontScaleX:0,minFontScaleY:0})}return ht}(0,l,b,p,y,_,h,o.allowVerticalPlacement),ee=o.textSizeData,ne=null;ee.kind==="source"?(ne=[ys*p.layout.get("text-size").evaluate(_,{})],ne[0]>Cl&&cr(`${o.layerIds[0]}: Value for "text-size" is >= ${yv}. Reduce your "text-size".`)):ee.kind==="composite"&&(ne=[ys*U.compositeTextSizes[0].evaluate(_,{},V),ys*U.compositeTextSizes[1].evaluate(_,{},V)],(ne[0]>Cl||ne[1]>Cl)&&cr(`${o.layerIds[0]}: Value for "text-size" is >= ${yv}. Reduce your "text-size".`)),o.addSymbols(o.text,W,ne,b,y,_,P,n,A.lineStartIndex,A.lineLength,F,V);for(let xe of M)k[xe]=o.text.placedSymbolArray.length-1;return 4*W.length}function xB(o){for(let n in o)return o[n];return null}function k0e(o,n,l,h){let p=o.compareText;if(n in p){let y=p[n];for(let _=y.length-1;_>=0;_--)if(h.dist(y[_])<l)return!0}else p[n]=[];return p[n].push(h),!1}let bB=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class kE{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[l,h]=new Uint8Array(n,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");let p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);let y=bB[15&h];if(!y)throw new Error("Unrecognized array type.");let[_]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new kE(b,_,y,n)}constructor(n,l=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;let y=bB.indexOf(this.ArrayType),_=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-b%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+A,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+A),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+A,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=n)}add(n,l){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=l,h}finish(){let n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return RE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,l,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:y,coords:_,nodeSize:b}=this,A=[0,y.length-1,0],P=[];for(;A.length;){let M=A.pop()||0,k=A.pop()||0,F=A.pop()||0;if(k-F<=b){for(let ee=F;ee<=k;ee++){let ne=_[2*ee],xe=_[2*ee+1];ne>=n&&ne<=h&&xe>=l&&xe<=p&&P.push(y[ee])}continue}let U=F+k>>1,V=_[2*U],W=_[2*U+1];V>=n&&V<=h&&W>=l&&W<=p&&P.push(y[U]),(M===0?n<=V:l<=W)&&(A.push(F),A.push(U-1),A.push(1-M)),(M===0?h>=V:p>=W)&&(A.push(U+1),A.push(k),A.push(1-M))}return P}within(n,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:p,coords:y,nodeSize:_}=this,b=[0,p.length-1,0],A=[],P=h*h;for(;b.length;){let M=b.pop()||0,k=b.pop()||0,F=b.pop()||0;if(k-F<=_){for(let ee=F;ee<=k;ee++)SB(y[2*ee],y[2*ee+1],n,l)<=P&&A.push(p[ee]);continue}let U=F+k>>1,V=y[2*U],W=y[2*U+1];SB(V,W,n,l)<=P&&A.push(p[U]),(M===0?n-h<=V:l-h<=W)&&(b.push(F),b.push(U-1),b.push(1-M)),(M===0?n+h>=V:l+h>=W)&&(b.push(U+1),b.push(k),b.push(1-M))}return A}}function RE(o,n,l,h,p,y){if(p-h<=l)return;let _=h+p>>1;wB(o,n,_,h,p,y),RE(o,n,l,h,_-1,1-y),RE(o,n,l,_+1,p,1-y)}function wB(o,n,l,h,p,y){for(;p>h;){if(p-h>600){let P=p-h+1,M=l-h+1,k=Math.log(P),F=.5*Math.exp(2*k/3),U=.5*Math.sqrt(k*F*(P-F)/P)*(M-P/2<0?-1:1);wB(o,n,l,Math.max(h,Math.floor(l-M*F/P+U)),Math.min(p,Math.floor(l+(P-M)*F/P+U)),y)}let _=n[2*l+y],b=h,A=p;for(bv(o,n,h,l),n[2*p+y]>_&&bv(o,n,h,p);b<A;){for(bv(o,n,b,A),b++,A--;n[2*b+y]<_;)b++;for(;n[2*A+y]>_;)A--}n[2*h+y]===_?bv(o,n,h,A):(A++,bv(o,n,A,p)),A<=l&&(h=A+1),l<=A&&(p=A-1)}}function bv(o,n,l,h){DE(o,l,h),DE(n,2*l,2*h),DE(n,2*l+1,2*h+1)}function DE(o,n,l){let h=o[n];o[n]=o[l],o[l]=h}function SB(o,n,l,h){let p=o-l,y=n-h;return p*p+y*y}var LE;u.bg=void 0,(LE=u.bg||(u.bg={})).create="create",LE.load="load",LE.fullLoad="fullLoad";let Jx=null,wv=[],FE=1e3/60,zE="loadTime",NE="fullLoadTime",R0e={mark(o){performance.mark(o)},frame(o){let n=o;Jx!=null&&wv.push(n-Jx),Jx=n},clearMetrics(){Jx=null,wv=[],performance.clearMeasures(zE),performance.clearMeasures(NE);for(let o in u.bg)performance.clearMarks(u.bg[o])},getPerformanceMetrics(){performance.measure(zE,u.bg.create,u.bg.load),performance.measure(NE,u.bg.create,u.bg.fullLoad);let o=performance.getEntriesByName(zE)[0].duration,n=performance.getEntriesByName(NE)[0].duration,l=wv.length,h=1/(wv.reduce((y,_)=>y+_,0)/l/1e3),p=wv.filter(y=>y>FE).reduce((y,_)=>y+(_-FE)/FE,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(l+p)*100,totalFrames:l}}};u.$=class extends R{},u.A=Jf,u.B=KA,u.C=function(o){if(pr==null){let n=o.navigator?o.navigator.userAgent:null;pr=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return pr},u.D=st,u.E=$o,u.F=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new A0e(()=>this.process()),this.subscription=function(l,h,p,y){return l.addEventListener(h,p,!1),{unsubscribe:()=>{l.removeEventListener(h,p,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=Ct(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((l,h)=>{let p=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[p]={resolve:l,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[p];let b={id:p,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});let y=[],_=Object.assign(Object.assign({},o),{id:p,sourceMapId:this.mapId,origin:location.origin,data:gl(o.data,y)});this.target.postMessage(_,{transfer:y})})}receive(o){let n=o.data,l=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[l];let h=this.abortControllers[l];return delete this.abortControllers[l],void(h&&h.abort())}if(Ct(self)||n.mustQueue)return this.tasks[l]=n,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,n)}}process(){if(this.taskQueue.length===0)return;let o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return s(this,void 0,void 0,function*(){if(n.type==="<response>"){let p=this.resolveRejects[o];return delete this.resolveRejects[o],p?void(n.error?p.reject(yl(n.error)):p.resolve(yl(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let l=yl(n.data),h=new AbortController;this.abortControllers[o]=h;try{let p=yield this.messageHandlers[n.type](n.sourceMapId,l,h);this.completeTask(o,null,p)}catch(p){this.completeTask(o,p)}})}completeTask(o,n,l){let h=[];delete this.abortControllers[o];let p={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?gl(n):null,data:gl(l,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.G=Vo,u.H=function(){var o=new Jf(16);return Jf!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},u.I=xE,u.J=function(o,n,l){var h,p,y,_,b,A,P,M,k,F,U,V,W=l[0],ee=l[1],ne=l[2];return n===o?(o[12]=n[0]*W+n[4]*ee+n[8]*ne+n[12],o[13]=n[1]*W+n[5]*ee+n[9]*ne+n[13],o[14]=n[2]*W+n[6]*ee+n[10]*ne+n[14],o[15]=n[3]*W+n[7]*ee+n[11]*ne+n[15]):(p=n[1],y=n[2],_=n[3],b=n[4],A=n[5],P=n[6],M=n[7],k=n[8],F=n[9],U=n[10],V=n[11],o[0]=h=n[0],o[1]=p,o[2]=y,o[3]=_,o[4]=b,o[5]=A,o[6]=P,o[7]=M,o[8]=k,o[9]=F,o[10]=U,o[11]=V,o[12]=h*W+b*ee+k*ne+n[12],o[13]=p*W+A*ee+F*ne+n[13],o[14]=y*W+P*ee+U*ne+n[14],o[15]=_*W+M*ee+V*ne+n[15]),o},u.K=function(o,n,l){var h=l[0],p=l[1],y=l[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*y,o[9]=n[9]*y,o[10]=n[10]*y,o[11]=n[11]*y,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},u.L=iN,u.M=function(o,n){let l={};for(let h=0;h<n.length;h++){let p=n[h];p in o&&(l[p]=o[p])}return l},u.N=Pl,u.O=YN,u.P=T,u.Q=QN,u.R=Va,u.S=$a,u.T=Uf,u.U=de,u.V=Z,u.W=Dr,u.X=ci,u.Y=S,u.Z=_v,u._=s,u.a=Oa,u.a$=function(o,n){var l=o[0],h=o[1],p=o[2],y=o[3],_=o[4],b=o[5],A=o[6],P=o[7],M=o[8],k=o[9],F=o[10],U=o[11],V=o[12],W=o[13],ee=o[14],ne=o[15],xe=n[0],ce=n[1],ye=n[2],Ee=n[3],De=n[4],Ye=n[5],bt=n[6],He=n[7],We=n[8],ht=n[9],ot=n[10],it=n[11],Ie=n[12],ft=n[13],lt=n[14],It=n[15];return Math.abs(l-xe)<=bn*Math.max(1,Math.abs(l),Math.abs(xe))&&Math.abs(h-ce)<=bn*Math.max(1,Math.abs(h),Math.abs(ce))&&Math.abs(p-ye)<=bn*Math.max(1,Math.abs(p),Math.abs(ye))&&Math.abs(y-Ee)<=bn*Math.max(1,Math.abs(y),Math.abs(Ee))&&Math.abs(_-De)<=bn*Math.max(1,Math.abs(_),Math.abs(De))&&Math.abs(b-Ye)<=bn*Math.max(1,Math.abs(b),Math.abs(Ye))&&Math.abs(A-bt)<=bn*Math.max(1,Math.abs(A),Math.abs(bt))&&Math.abs(P-He)<=bn*Math.max(1,Math.abs(P),Math.abs(He))&&Math.abs(M-We)<=bn*Math.max(1,Math.abs(M),Math.abs(We))&&Math.abs(k-ht)<=bn*Math.max(1,Math.abs(k),Math.abs(ht))&&Math.abs(F-ot)<=bn*Math.max(1,Math.abs(F),Math.abs(ot))&&Math.abs(U-it)<=bn*Math.max(1,Math.abs(U),Math.abs(it))&&Math.abs(V-Ie)<=bn*Math.max(1,Math.abs(V),Math.abs(Ie))&&Math.abs(W-ft)<=bn*Math.max(1,Math.abs(W),Math.abs(ft))&&Math.abs(ee-lt)<=bn*Math.max(1,Math.abs(ee),Math.abs(lt))&&Math.abs(ne-It)<=bn*Math.max(1,Math.abs(ne),Math.abs(It))},u.a0=Jt,u.a1=PE,u.a2=Re,u.a3=o=>{let n=window.document.createElement("video");return n.muted=!0,new Promise(l=>{n.onloadstart=()=>{l(n)};for(let h of o){let p=window.document.createElement("source");ka(h)||(n.crossOrigin="Anonymous"),p.src=h,n.appendChild(p)}})},u.a4=function(){return Pe++},u.a5=Xe,u.a6=id,u.a7=Nm,u.a8=ih,u.a9=aB,u.aA=function(o){if(o.type==="custom")return new q0e(o);switch(o.type){case"background":return new b0e(o);case"circle":return new uxe(o);case"fill":return new Axe(o);case"fill-extrusion":return new Bxe(o);case"heatmap":return new cxe(o);case"hillshade":return new fxe(o);case"line":return new Zxe(o);case"raster":return new S0e(o);case"symbol":return new Gx(o);}},u.aB=Ve,u.aC=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let l=[];try{if(!ue(o.version,n.version))return[{command:"setStyle",args:[n]}];ue(o.center,n.center)||l.push({command:"setCenter",args:[n.center]}),ue(o.zoom,n.zoom)||l.push({command:"setZoom",args:[n.zoom]}),ue(o.bearing,n.bearing)||l.push({command:"setBearing",args:[n.bearing]}),ue(o.pitch,n.pitch)||l.push({command:"setPitch",args:[n.pitch]}),ue(o.sprite,n.sprite)||l.push({command:"setSprite",args:[n.sprite]}),ue(o.glyphs,n.glyphs)||l.push({command:"setGlyphs",args:[n.glyphs]}),ue(o.transition,n.transition)||l.push({command:"setTransition",args:[n.transition]}),ue(o.light,n.light)||l.push({command:"setLight",args:[n.light]}),ue(o.terrain,n.terrain)||l.push({command:"setTerrain",args:[n.terrain]}),ue(o.sky,n.sky)||l.push({command:"setSky",args:[n.sky]}),ue(o.projection,n.projection)||l.push({command:"setProjection",args:[n.projection]});let h={},p=[];(function(_,b,A,P){let M;for(M in b=b||{},_=_||{})Object.prototype.hasOwnProperty.call(_,M)&&(Object.prototype.hasOwnProperty.call(b,M)||_t(M,A,P));for(M in b)Object.prototype.hasOwnProperty.call(b,M)&&(Object.prototype.hasOwnProperty.call(_,M)?ue(_[M],b[M])||(_[M].type==="geojson"&&b[M].type==="geojson"&&Je(_,b,M)?Se(A,{command:"setGeoJSONSourceData",args:[M,b[M].data]}):et(M,b,A,P)):Oe(M,b,A))})(o.sources,n.sources,p,h);let y=[];o.layers&&o.layers.forEach(_=>{"source"in _&&h[_.source]?l.push({command:"removeLayer",args:[_.id]}):y.push(_)}),l=l.concat(p),function(_,b,A){b=b||[];let P=(_=_||[]).map(Qt),M=b.map(Qt),k=_.reduce(ar,{}),F=b.reduce(ar,{}),U=P.slice(),V=Object.create(null),W,ee,ne,xe,ce;for(let ye=0,Ee=0;ye<P.length;ye++)W=P[ye],Object.prototype.hasOwnProperty.call(F,W)?Ee++:(Se(A,{command:"removeLayer",args:[W]}),U.splice(U.indexOf(W,Ee),1));for(let ye=0,Ee=0;ye<M.length;ye++)W=M[M.length-1-ye],U[U.length-1-ye]!==W&&(Object.prototype.hasOwnProperty.call(k,W)?(Se(A,{command:"removeLayer",args:[W]}),U.splice(U.lastIndexOf(W,U.length-Ee),1)):Ee++,xe=U[U.length-ye],Se(A,{command:"addLayer",args:[F[W],xe]}),U.splice(U.length-ye,0,W),V[W]=!0);for(let ye=0;ye<M.length;ye++)if(W=M[ye],ee=k[W],ne=F[W],!V[W]&&!ue(ee,ne))if(ue(ee.source,ne.source)&&ue(ee["source-layer"],ne["source-layer"])&&ue(ee.type,ne.type)){for(ce in mt(ee.layout,ne.layout,A,W,null,"setLayoutProperty"),mt(ee.paint,ne.paint,A,W,null,"setPaintProperty"),ue(ee.filter,ne.filter)||Se(A,{command:"setFilter",args:[W,ne.filter]}),ue(ee.minzoom,ne.minzoom)&&ue(ee.maxzoom,ne.maxzoom)||Se(A,{command:"setLayerZoomRange",args:[W,ne.minzoom,ne.maxzoom]}),ee)Object.prototype.hasOwnProperty.call(ee,ce)&&ce!=="layout"&&ce!=="paint"&&ce!=="filter"&&ce!=="metadata"&&ce!=="minzoom"&&ce!=="maxzoom"&&(ce.indexOf("paint.")===0?mt(ee[ce],ne[ce],A,W,ce.slice(6),"setPaintProperty"):ue(ee[ce],ne[ce])||Se(A,{command:"setLayerProperty",args:[W,ce,ne[ce]]}));for(ce in ne)Object.prototype.hasOwnProperty.call(ne,ce)&&!Object.prototype.hasOwnProperty.call(ee,ce)&&ce!=="layout"&&ce!=="paint"&&ce!=="filter"&&ce!=="metadata"&&ce!=="minzoom"&&ce!=="maxzoom"&&(ce.indexOf("paint.")===0?mt(ee[ce],ne[ce],A,W,ce.slice(6),"setPaintProperty"):ue(ee[ce],ne[ce])||Se(A,{command:"setLayerProperty",args:[W,ce,ne[ce]]}))}else Se(A,{command:"removeLayer",args:[W]}),xe=U[U.lastIndexOf(W)+1],Se(A,{command:"addLayer",args:[ne,xe]})}(y,n.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:"setStyle",args:[n]}]}return l},u.aD=function(o){let n=[],l=o.id;return l===void 0&&n.push({message:`layers.${l}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${l}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),n},u.aE=function o(n,l){if(Array.isArray(n)){if(!Array.isArray(l)||n.length!==l.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],l[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&l!==null){if(typeof l!="object"||Object.keys(n).length!==Object.keys(l).length)return!1;for(let h in n)if(!o(n[h],l[h]))return!1;return!0}return n===l},u.aF=Ge,u.aG=pt,u.aH=class extends eh{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},u.aI=kx,u.aJ=class extends eh{constructor(o,n){super(o,n),this.current=exe}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},u.aK=Gz,u.aL=Kz,u.aM=fr,u.aN=class extends eh{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},u.aO=class extends eh{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},u.aP=function(o,n,l,h,p,y,_){var b=1/(n-l),A=1/(h-p),P=1/(y-_);return o[0]=-2*b,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*A,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*P,o[11]=0,o[12]=(n+l)*b,o[13]=(p+h)*A,o[14]=(_+y)*P,o[15]=1,o},u.aQ=sxe,u.aR=class extends fe{},u.aS=Yxe,u.aT=class extends we{},u.aU=uE,u.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},u.aW=uN,u.aX=Ui,u.aY=ja,u.aZ=class extends ut{},u.a_=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},u.aa=function(o){let n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,p,y)=>{let _=p||y;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){let l=parseInt(n["max-age"],10);isNaN(l)?delete n["max-age"]:n["max-age"]=l}return n},u.ab=function(o,n){let l=[];for(let h in o)h in n||l.push(h);return l},u.ac=ve,u.ad=function(o,n,l){var h=Math.sin(l),p=Math.cos(l),y=n[0],_=n[1],b=n[2],A=n[3],P=n[4],M=n[5],k=n[6],F=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=y*p+P*h,o[1]=_*p+M*h,o[2]=b*p+k*h,o[3]=A*p+F*h,o[4]=P*p-y*h,o[5]=M*p-_*h,o[6]=k*p-b*h,o[7]=F*p-A*h,o},u.ae=function(o){var n=new Jf(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},u.af=Fx,u.ag=function(o,n){let l=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){let{interpolationType:p,minZoom:y,maxZoom:_}=o,b=p?ve(_n.interpolationFactor(p,n,y,_),0,1):0;o.kind==="camera"?h=yn.number(o.minSize,o.maxSize,b):l=b}return{uSizeT:l,uSize:h}},u.ai=function(o,{uSize:n,uSizeT:l},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/ys:o.kind==="composite"?yn.number(h/ys,p/ys,l):n},u.aj=qE,u.ak=function(o,n,l,h){let p=n.y-o.y,y=n.x-o.x,_=h.y-l.y,b=h.x-l.x,A=_*y-b*p;if(A===0)return null;let P=(b*(o.y-l.y)-_*(o.x-l.x))/A;return new T(o.x+P*y,o.y+P*p)},u.al=lB,u.am=Jz,u.an=aE,u.ao=function(o){let n=1/0,l=1/0,h=-1/0,p=-1/0;for(let y of o)n=Math.min(n,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),p=Math.max(p,y.y);return[n,l,h,p]},u.ap=gi,u.ar=SE,u.as=function(o,n){var l=n[0],h=n[1],p=n[2],y=n[3],_=n[4],b=n[5],A=n[6],P=n[7],M=n[8],k=n[9],F=n[10],U=n[11],V=n[12],W=n[13],ee=n[14],ne=n[15],xe=l*b-h*_,ce=l*A-p*_,ye=l*P-y*_,Ee=h*A-p*b,De=h*P-y*b,Ye=p*P-y*A,bt=M*W-k*V,He=M*ee-F*V,We=M*ne-U*V,ht=k*ee-F*W,ot=k*ne-U*W,it=F*ne-U*ee,Ie=xe*it-ce*ot+ye*ht+Ee*We-De*He+Ye*bt;return Ie?(o[0]=(b*it-A*ot+P*ht)*(Ie=1/Ie),o[1]=(p*ot-h*it-y*ht)*Ie,o[2]=(W*Ye-ee*De+ne*Ee)*Ie,o[3]=(F*De-k*Ye-U*Ee)*Ie,o[4]=(A*We-_*it-P*He)*Ie,o[5]=(l*it-p*We+y*He)*Ie,o[6]=(ee*ye-V*Ye-ne*ce)*Ie,o[7]=(M*Ye-F*ye+U*ce)*Ie,o[8]=(_*ot-b*We+P*bt)*Ie,o[9]=(h*We-l*ot-y*bt)*Ie,o[10]=(V*De-W*ye+ne*xe)*Ie,o[11]=(k*ye-M*De-U*xe)*Ie,o[12]=(b*He-_*ht-A*bt)*Ie,o[13]=(l*ht-h*He+p*bt)*Ie,o[14]=(W*ce-V*Ee-ee*xe)*Ie,o[15]=(M*Ee-k*ce+F*xe)*Ie,o):null},u.at=OE,u.au=wE,u.av=kE,u.aw=function(){let o={},n=Ae.$version;for(let l in Ae.$root){let h=Ae.$root[l];if(h.required){let p=null;p=l==="version"?n:h.type==="array"?[]:{},p!=null&&(o[l]=p)}}return o},u.ax=Qm,u.ay=Yi,u.az=function(o){o=o.slice();let n=Object.create(null);for(let l=0;l<o.length;l++)n[o[l].id]=o[l];for(let l=0;l<o.length;l++)"ref"in o[l]&&(o[l]=Yu(o[l],n[o[l].ref]));return o},u.b=_r,u.b0=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},u.b1=function(o,n,l){return o[0]=n[0]*l[0],o[1]=n[1]*l[1],o[2]=n[2]*l[2],o[3]=n[3]*l[3],o},u.b2=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},u.b3=be,u.b4=rB,u.b5=eB,u.b6=function(o,n,l,h,p){var y,_=1/Math.tan(n/2);return o[0]=_/l,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(y=1/(h-p)),o[14]=2*p*h*y):(o[10]=-1,o[14]=-2*h),o},u.b7=function(o,n,l){var h=Math.sin(l),p=Math.cos(l),y=n[4],_=n[5],b=n[6],A=n[7],P=n[8],M=n[9],k=n[10],F=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=y*p+P*h,o[5]=_*p+M*h,o[6]=b*p+k*h,o[7]=A*p+F*h,o[8]=P*p-y*h,o[9]=M*p-_*h,o[10]=k*p-b*h,o[11]=F*p-A*h,o},u.b8=H,u.b9=J,u.bA=IN,u.bB=function(o){return o.message===Mi},u.bC=cl,u.bD=Vn,u.ba=function(o){return o*Math.PI/180},u.bb=function(o,n){let{x:l,y:h}=_v.fromLngLat(n);return!(o<0||o>25||h<0||h>=1||l<0||l>=1)},u.bc=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},u.bd=class extends O{},u.be=IE,u.bf=R0e,u.bh=Ji,u.bi=function(o,n){Oa.REGISTERED_PROTOCOLS[o]=n},u.bj=function(o){delete Oa.REGISTERED_PROTOCOLS[o]},u.bk=function(o,n){let l={};for(let p=0;p<o.length;p++){let y=n&&n[o[p].id]||bx(o[p]);n&&(n[o[p].id]=y);let _=l[y];_||(_=l[y]=[]),_.push(o[p])}let h=[];for(let p in l)h.push(l[p]);return h},u.bl=nt,u.bm=nB,u.bn=oB,u.bo=FN,u.bp=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=ci/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;let n=o.bucket.layers[0],l=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new Er(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Er(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Er(18))};if(o.bucket.textSizeData.kind==="composite"){let{minZoom:P,maxZoom:M}=o.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Er(P),o.canonical),h["text-size"].possiblyEvaluate(new Er(M),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){let{minZoom:P,maxZoom:M}=o.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Er(P),o.canonical),h["icon-size"].possiblyEvaluate(new Er(M),o.canonical)]}let y=l.get("text-line-height")*gi,_=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",b=l.get("text-keep-upright"),A=l.get("text-size");for(let P of o.bucket.features){let M=l.get("text-font").evaluate(P,{},o.canonical).join(","),k=A.evaluate(P,{},o.canonical),F=p.layoutTextSize.evaluate(P,{},o.canonical),U=p.layoutIconSize.evaluate(P,{},o.canonical),V={horizontal:{},vertical:void 0},W=P.text,ee,ne=[0,0];if(W){let ye=W.toString(),Ee=l.get("text-letter-spacing").evaluate(P,{},o.canonical)*gi,De=ZA(ye)?Ee:0,Ye=l.get("text-anchor").evaluate(P,{},o.canonical),bt=yB(n,P,o.canonical);if(!bt){let ot=l.get("text-radial-offset").evaluate(P,{},o.canonical);ne=ot?gB(Ye,[ot*gi,ME]):l.get("text-offset").evaluate(P,{},o.canonical).map(it=>it*gi)}let He=_?"center":l.get("text-justify").evaluate(P,{},o.canonical),We=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(P,{},o.canonical)*gi:1/0,ht=()=>{o.bucket.allowVerticalPlacement&&ev(ye)&&(V.vertical=Vx(W,o.glyphMap,o.glyphPositions,o.imagePositions,M,We,y,Ye,"left",De,ne,u.ah.vertical,!0,F,k))};if(!_&&bt){let ot=new Set;if(He==="auto")for(let Ie=0;Ie<bt.values.length;Ie+=2)ot.add(OE(bt.values[Ie]));else ot.add(He);let it=!1;for(let Ie of ot)if(!V.horizontal[Ie])if(it)V.horizontal[Ie]=V.horizontal[0];else{let ft=Vx(W,o.glyphMap,o.glyphPositions,o.imagePositions,M,We,y,"center",Ie,De,ne,u.ah.horizontal,!1,F,k);ft&&(V.horizontal[Ie]=ft,it=ft.positionedLines.length===1)}ht()}else{He==="auto"&&(He=OE(Ye));let ot=Vx(W,o.glyphMap,o.glyphPositions,o.imagePositions,M,We,y,Ye,He,De,ne,u.ah.horizontal,!1,F,k);ot&&(V.horizontal[He]=ot),ht(),ev(ye)&&_&&b&&(V.vertical=Vx(W,o.glyphMap,o.glyphPositions,o.imagePositions,M,We,y,Ye,He,De,ne,u.ah.vertical,!1,F,k))}}let xe=!1;if(P.icon&&P.icon.name){let ye=o.imageMap[P.icon.name];ye&&(ee=v0e(o.imagePositions[P.icon.name],l.get("icon-offset").evaluate(P,{},o.canonical),l.get("icon-anchor").evaluate(P,{},o.canonical)),xe=!!ye.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=xe:o.bucket.sdfIcons!==xe&&cr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ye.pixelRatio!==o.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}let ce=xB(V.horizontal)||V.vertical;o.bucket.iconsInText=!!ce&&ce.iconsInText,(ce||ee)&&O0e(o.bucket,P,V,ee,o.imageMap,p,F,U,ne,xe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},u.bq=vE,u.br=dE,u.bs=mE,u.bt=Tl,u.bu=yE,u.bv=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},u.bw=function(o,n,l,h,p){return s(this,void 0,void 0,function*(){if(Z())try{return yield Dr(o,n,l,h,p)}catch(y){}return function(y,_,b,A,P){let M=y.width,k=y.height;Pi&&si||(Pi=new OffscreenCanvas(M,k),si=Pi.getContext("2d",{willReadFrequently:!0})),Pi.width=M,Pi.height=k,si.drawImage(y,0,0,M,k);let F=si.getImageData(_,b,A,P);return si.clearRect(0,0,M,k),F.data}(o,n,l,h,p)})},u.bx=iB,u.by=m,u.bz=x,u.c=jo,u.d=o=>s(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));let n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),u.e=Le,u.f=o=>new Promise((n,l)=>{let h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Ur})},h.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let p=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(p):Ur}),u.g=ia,u.h=(o,n)=>ro(Le(o,{type:"json"}),n),u.i=Ct,u.j=Ra,u.k=io,u.l=(o,n)=>ro(Le(o,{type:"arrayBuffer"}),n),u.m=ro,u.n=function(o){return new yE(o).readFields(l0e,[])},u.o=lv,u.p=LN,u.q=g,u.r=GA,u.s=ka,u.t=Jm,u.u=cu,u.v=Ae,u.w=cr,u.x=function([o,n,l]){return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(l),y:o*Math.sin(n)*Math.sin(l),z:o*Math.cos(l)}},u.y=yn,u.z=Er}),r("worker",["./shared"],function(u){"use strict";class s{constructor(B){this.keyCache={},B&&this.replace(B)}replace(B){this._layerConfigs={},this._layers={},this.update(B,[])}update(B,N){for(let te of B){this._layerConfigs[te.id]=te;let he=this._layers[te.id]=u.aA(te);he._featureFilter=u.a7(he.filter),this.keyCache[te.id]&&delete this.keyCache[te.id]}for(let te of N)delete this.keyCache[te],delete this._layerConfigs[te],delete this._layers[te];this.familiesBySource={};let K=u.bk(Object.values(this._layerConfigs),this.keyCache);for(let te of K){let he=te.map(qe=>this._layers[qe.id]),me=he[0];if(me.visibility==="none")continue;let _e=me.source||"",se=this.familiesBySource[_e];se||(se=this.familiesBySource[_e]={});let Te=me.sourceLayer||"_geojsonTileLayer",Me=se[Te];Me||(Me=se[Te]=[]),Me.push(he)}}}class m{constructor(B){let N={},K=[];for(let _e in B){let se=B[_e],Te=N[_e]={};for(let Me in se){let qe=se[+Me];if(!qe||qe.bitmap.width===0||qe.bitmap.height===0)continue;let Be={x:0,y:0,w:qe.bitmap.width+2,h:qe.bitmap.height+2};K.push(Be),Te[Me]={rect:Be,metrics:qe.metrics}}}let{w:te,h:he}=u.p(K),me=new u.o({width:te||1,height:he||1});for(let _e in B){let se=B[_e];for(let Te in se){let Me=se[+Te];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;let qe=N[_e][Te].rect;u.o.copy(Me.bitmap,me,{x:0,y:0},{x:qe.x+1,y:qe.y+1},Me.bitmap)}}this.image=me,this.positions=N}}u.bl("GlyphAtlas",m);class x{constructor(B){this.tileID=new u.S(B.tileID.overscaledZ,B.tileID.wrap,B.tileID.canonical.z,B.tileID.canonical.x,B.tileID.canonical.y),this.uid=B.uid,this.zoom=B.zoom,this.pixelRatio=B.pixelRatio,this.tileSize=B.tileSize,this.source=B.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=B.showCollisionBoxes,this.collectResourceTiming=!!B.collectResourceTiming,this.returnDependencies=!!B.returnDependencies,this.promoteId=B.promoteId,this.inFlightDependencies=[]}parse(B,N,K,te){return u._(this,void 0,void 0,function*(){this.status="parsing",this.data=B,this.collisionBoxArray=new u.a5;let he=new u.bm(Object.keys(B.layers).sort()),me=new u.bn(this.tileID,this.promoteId);me.bucketLayerIDs=[];let _e={},se={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Te=N.familiesBySource[this.source];for(let jt in Te){let hr=B.layers[jt];if(!hr)continue;hr.version===1&&u.w(`Vector tile source "${this.source}" layer "${jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Rr=he.encode(jt),qi=[];for(let Oi=0;Oi<hr.length;Oi++){let en=hr.feature(Oi),Qu=me.getId(en,jt);qi.push({feature:en,id:Qu,index:Oi,sourceLayerIndex:Rr})}for(let Oi of Te[jt]){let en=Oi[0];en.source!==this.source&&u.w(`layer.source = ${en.source} does not equal this.source = ${this.source}`),en.minzoom&&this.zoom<Math.floor(en.minzoom)||en.maxzoom&&this.zoom>=en.maxzoom||en.visibility!=="none"&&(q(Oi,this.zoom,K),(_e[en.id]=en.createBucket({index:me.bucketLayerIDs.length,layers:Oi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Rr,sourceID:this.source})).populate(qi,se,this.tileID.canonical),me.bucketLayerIDs.push(Oi.map(Qu=>Qu.id)))}}let Me=u.aF(se.glyphDependencies,jt=>Object.keys(jt).map(Number));this.inFlightDependencies.forEach(jt=>jt==null?void 0:jt.abort()),this.inFlightDependencies=[];let qe=Promise.resolve({});if(Object.keys(Me).length){let jt=new AbortController;this.inFlightDependencies.push(jt),qe=te.sendAsync({type:"GG",data:{stacks:Me,source:this.source,tileID:this.tileID,type:"glyphs"}},jt)}let Be=Object.keys(se.iconDependencies),dt=Promise.resolve({});if(Be.length){let jt=new AbortController;this.inFlightDependencies.push(jt),dt=te.sendAsync({type:"GI",data:{icons:Be,source:this.source,tileID:this.tileID,type:"icons"}},jt)}let xt=Object.keys(se.patternDependencies),er=Promise.resolve({});if(xt.length){let jt=new AbortController;this.inFlightDependencies.push(jt),er=te.sendAsync({type:"GI",data:{icons:xt,source:this.source,tileID:this.tileID,type:"patterns"}},jt)}let[Dt,tr,Gt]=yield Promise.all([qe,dt,er]),ui=new m(Dt),jr=new u.bo(tr,Gt);for(let jt in _e){let hr=_e[jt];hr instanceof u.a6?(q(hr.layers,this.zoom,K),u.bp({bucket:hr,glyphMap:Dt,glyphPositions:ui.positions,imageMap:tr,imagePositions:jr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):hr.hasPattern&&(hr instanceof u.bq||hr instanceof u.br||hr instanceof u.bs)&&(q(hr.layers,this.zoom,K),hr.addFeatures(se,this.tileID.canonical,jr.patternPositions))}return this.status="done",{buckets:Object.values(_e).filter(jt=>!jt.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ui.image,imageAtlas:jr,glyphMap:this.returnDependencies?Dt:null,iconMap:this.returnDependencies?tr:null,glyphPositions:this.returnDependencies?ui.positions:null}})}}function q(ie,B,N){let K=new u.z(B);for(let te of ie)te.recalculate(K,N)}class T{constructor(B,N,K){this.actor=B,this.layerIndex=N,this.availableImages=K,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(B,N){return u._(this,void 0,void 0,function*(){let K=yield u.l(B.request,N);try{return{vectorTile:new u.bt.VectorTile(new u.bu(K.data)),rawData:K.data,cacheControl:K.cacheControl,expires:K.expires}}catch(te){let he=new Uint8Array(K.data),me=`Unable to parse the tile at ${B.request.url}, `;throw me+=he[0]===31&&he[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${te.message}`,new Error(me)}})}loadTile(B){return u._(this,void 0,void 0,function*(){let N=B.uid,K=!!(B&&B.request&&B.request.collectResourceTiming)&&new u.bv(B.request),te=new x(B);this.loading[N]=te;let he=new AbortController;te.abort=he;try{let me=yield this.loadVectorTile(B,he);if(delete this.loading[N],!me)return null;let _e=me.rawData,se={};me.expires&&(se.expires=me.expires),me.cacheControl&&(se.cacheControl=me.cacheControl);let Te={};if(K){let qe=K.finish();qe&&(Te.resourceTiming=JSON.parse(JSON.stringify(qe)))}te.vectorTile=me.vectorTile;let Me=te.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[N]=te,this.fetching[N]={rawTileData:_e,cacheControl:se,resourceTiming:Te};try{let qe=yield Me;return u.e({rawTileData:_e.slice(0)},qe,se,Te)}finally{delete this.fetching[N]}}catch(me){throw delete this.loading[N],te.status="done",this.loaded[N]=te,me}})}reloadTile(B){return u._(this,void 0,void 0,function*(){let N=B.uid;if(!this.loaded||!this.loaded[N])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let K=this.loaded[N];if(K.showCollisionBoxes=B.showCollisionBoxes,K.status==="parsing"){let te=yield K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor),he;if(this.fetching[N]){let{rawTileData:me,cacheControl:_e,resourceTiming:se}=this.fetching[N];delete this.fetching[N],he=u.e({rawTileData:me.slice(0)},te,_e,se)}else he=te;return he}if(K.status==="done"&&K.vectorTile)return K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(B){return u._(this,void 0,void 0,function*(){let N=this.loading,K=B.uid;N&&N[K]&&N[K].abort&&(N[K].abort.abort(),delete N[K])})}removeTile(B){return u._(this,void 0,void 0,function*(){this.loaded&&this.loaded[B.uid]&&delete this.loaded[B.uid]})}}class I{constructor(){this.loaded={}}loadTile(B){return u._(this,void 0,void 0,function*(){let{uid:N,encoding:K,rawImageData:te,redFactor:he,greenFactor:me,blueFactor:_e,baseShift:se}=B,Te=te.width+2,Me=te.height+2,qe=u.b(te)?new u.R({width:Te,height:Me},(yield u.bw(te,-1,-1,Te,Me))):te,Be=new u.bx(N,qe,K,he,me,_e,se);return this.loaded=this.loaded||{},this.loaded[N]=Be,Be})}removeTile(B){let N=this.loaded,K=B.uid;N&&N[K]&&delete N[K]}}function L(ie,B){if(ie.length!==0){z(ie[0],B);for(var N=1;N<ie.length;N++)z(ie[N],!B)}}function z(ie,B){for(var N=0,K=0,te=0,he=ie.length,me=he-1;te<he;me=te++){var _e=(ie[te][0]-ie[me][0])*(ie[me][1]+ie[te][1]),se=N+_e;K+=Math.abs(N)>=Math.abs(_e)?N-se+_e:_e-se+N,N=se}N+K>=0!=!!B&&ie.reverse()}var Y=u.by(function ie(B,N){var K,te=B&&B.type;if(te==="FeatureCollection")for(K=0;K<B.features.length;K++)ie(B.features[K],N);else if(te==="GeometryCollection")for(K=0;K<B.geometries.length;K++)ie(B.geometries[K],N);else if(te==="Feature")ie(B.geometry,N);else if(te==="Polygon")L(B.coordinates,N);else if(te==="MultiPolygon")for(K=0;K<B.coordinates.length;K++)L(B.coordinates[K],N);return B});let pe=u.bt.VectorTileFeature.prototype.toGeoJSON;var de={exports:{}},Z=u.bz,H=u.bt.VectorTileFeature,J=ve;function ve(ie,B){this.options=B||{},this.features=ie,this.length=ie.length}function be(ie,B){this.id=typeof ie.id=="number"?ie.id:void 0,this.type=ie.type,this.rawGeometry=ie.type===1?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=B||4096}ve.prototype.feature=function(ie){return new be(this.features[ie],this.options.extent)},be.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var B=0;B<ie.length;B++){for(var N=ie[B],K=[],te=0;te<N.length;te++)K.push(new Z(N[te][0],N[te][1]));this.geometry.push(K)}return this.geometry},be.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,B=1/0,N=-1/0,K=1/0,te=-1/0,he=0;he<ie.length;he++)for(var me=ie[he],_e=0;_e<me.length;_e++){var se=me[_e];B=Math.min(B,se.x),N=Math.max(N,se.x),K=Math.min(K,se.y),te=Math.max(te,se.y)}return[B,K,N,te]},be.prototype.toGeoJSON=H.prototype.toGeoJSON;var Le=u.bA,Pe=J;function Ge(ie){var B=new Le;return function(N,K){for(var te in N.layers)K.writeMessage(3,pt,N.layers[te])}(ie,B),B.finish()}function pt(ie,B){var N;B.writeVarintField(15,ie.version||1),B.writeStringField(1,ie.name||""),B.writeVarintField(5,ie.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(N=0;N<ie.length;N++)K.feature=ie.feature(N),B.writeMessage(2,Ve,K);var te=K.keys;for(N=0;N<te.length;N++)B.writeStringField(3,te[N]);var he=K.values;for(N=0;N<he.length;N++)B.writeMessage(4,pr,he[N])}function Ve(ie,B){var N=ie.feature;N.id!==void 0&&B.writeVarintField(1,N.id),B.writeMessage(2,Br,ie),B.writeVarintField(3,N.type),B.writeMessage(4,Ct,N)}function Br(ie,B){var N=ie.feature,K=ie.keys,te=ie.values,he=ie.keycache,me=ie.valuecache;for(var _e in N.properties){var se=N.properties[_e],Te=he[_e];if(se!==null){Te===void 0&&(K.push(_e),he[_e]=Te=K.length-1),B.writeVarint(Te);var Me=typeof se;Me!=="string"&&Me!=="boolean"&&Me!=="number"&&(se=JSON.stringify(se));var qe=Me+":"+se,Be=me[qe];Be===void 0&&(te.push(se),me[qe]=Be=te.length-1),B.writeVarint(Be)}}}function cr(ie,B){return(B<<3)+(7&ie)}function yt(ie){return ie<<1^ie>>31}function Ct(ie,B){for(var N=ie.loadGeometry(),K=ie.type,te=0,he=0,me=N.length,_e=0;_e<me;_e++){var se=N[_e],Te=1;K===1&&(Te=se.length),B.writeVarint(cr(1,Te));for(var Me=K===3?se.length-1:se.length,qe=0;qe<Me;qe++){qe===1&&K!==1&&B.writeVarint(cr(2,Me-1));var Be=se[qe].x-te,dt=se[qe].y-he;B.writeVarint(yt(Be)),B.writeVarint(yt(dt)),te+=Be,he+=dt}K===3&&B.writeVarint(cr(7,1))}}function pr(ie,B){var N=typeof ie;N==="string"?B.writeStringField(1,ie):N==="boolean"?B.writeBooleanField(7,ie):N==="number"&&(ie%1!=0?B.writeDoubleField(3,ie):ie<0?B.writeSVarintField(6,ie):B.writeVarintField(5,ie))}de.exports=Ge,de.exports.fromVectorTileJs=Ge,de.exports.fromGeojsonVt=function(ie,B){B=B||{};var N={};for(var K in ie)N[K]=new Pe(ie[K].features,B),N[K].name=K,N[K].version=B.version,N[K].extent=B.extent;return Ge({layers:N})},de.exports.GeoJSONWrapper=Pe;var _r=u.by(de.exports);let Ur={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},Dr=Math.fround||(Pi=new Float32Array(1),ie=>(Pi[0]=+ie,Pi[0]));var Pi;let si=3,Mi=5,jo=6;class Oa{constructor(B){this.options=Object.assign(Object.create(Ur),B),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(B){let{log:N,minZoom:K,maxZoom:te}=this.options;N&&console.time("total time");let he=`prepare ${B.length} points`;N&&console.time(he),this.points=B;let me=[];for(let se=0;se<B.length;se++){let Te=B[se];if(!Te.geometry)continue;let[Me,qe]=Te.geometry.coordinates,Be=Dr(Ji(Me)),dt=Dr(Yi(qe));me.push(Be,dt,1/0,se,-1,1),this.options.reduce&&me.push(0)}let _e=this.trees[te+1]=this._createTree(me);N&&console.timeEnd(he);for(let se=te;se>=K;se--){let Te=+Date.now();_e=this.trees[se]=this._createTree(this._cluster(_e,se)),N&&console.log("z%d: %d clusters in %dms",se,_e.numItems,+Date.now()-Te)}return N&&console.timeEnd("total time"),this}getClusters(B,N){let K=((B[0]+180)%360+360)%360-180,te=Math.max(-90,Math.min(90,B[1])),he=B[2]===180?180:((B[2]+180)%360+360)%360-180,me=Math.max(-90,Math.min(90,B[3]));if(B[2]-B[0]>=360)K=-180,he=180;else if(K>he){let qe=this.getClusters([K,te,180,me],N),Be=this.getClusters([-180,te,he,me],N);return qe.concat(Be)}let _e=this.trees[this._limitZoom(N)],se=_e.range(Ji(K),Yi(me),Ji(he),Yi(te)),Te=_e.data,Me=[];for(let qe of se){let Be=this.stride*qe;Me.push(Te[Be+Mi]>1?ia(Te,Be,this.clusterProps):this.points[Te[Be+si]])}return Me}getChildren(B){let N=this._getOriginId(B),K=this._getOriginZoom(B),te="No cluster with the specified id.",he=this.trees[K];if(!he)throw new Error(te);let me=he.data;if(N*this.stride>=me.length)throw new Error(te);let _e=this.options.radius/(this.options.extent*Math.pow(2,K-1)),se=he.within(me[N*this.stride],me[N*this.stride+1],_e),Te=[];for(let Me of se){let qe=Me*this.stride;me[qe+4]===B&&Te.push(me[qe+Mi]>1?ia(me,qe,this.clusterProps):this.points[me[qe+si]])}if(Te.length===0)throw new Error(te);return Te}getLeaves(B,N,K){let te=[];return this._appendLeaves(te,B,N=N||10,K=K||0,0),te}getTile(B,N,K){let te=this.trees[this._limitZoom(B)],he=Math.pow(2,B),{extent:me,radius:_e}=this.options,se=_e/me,Te=(K-se)/he,Me=(K+1+se)/he,qe={features:[]};return this._addTileFeatures(te.range((N-se)/he,Te,(N+1+se)/he,Me),te.data,N,K,he,qe),N===0&&this._addTileFeatures(te.range(1-se/he,Te,1,Me),te.data,he,K,he,qe),N===he-1&&this._addTileFeatures(te.range(0,Te,se/he,Me),te.data,-1,K,he,qe),qe.features.length?qe:null}getClusterExpansionZoom(B){let N=this._getOriginZoom(B)-1;for(;N<=this.options.maxZoom;){let K=this.getChildren(B);if(N++,K.length!==1)break;B=K[0].properties.cluster_id}return N}_appendLeaves(B,N,K,te,he){let me=this.getChildren(N);for(let _e of me){let se=_e.properties;if(se&&se.cluster?he+se.point_count<=te?he+=se.point_count:he=this._appendLeaves(B,se.cluster_id,K,te,he):he<te?he++:B.push(_e),B.length===K)break}return he}_createTree(B){let N=new u.av(B.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<B.length;K+=this.stride)N.add(B[K],B[K+1]);return N.finish(),N.data=B,N}_addTileFeatures(B,N,K,te,he,me){for(let _e of B){let se=_e*this.stride,Te=N[se+Mi]>1,Me,qe,Be;if(Te)Me=Vo(N,se,this.clusterProps),qe=N[se],Be=N[se+1];else{let er=this.points[N[se+si]];Me=er.properties;let[Dt,tr]=er.geometry.coordinates;qe=Ji(Dt),Be=Yi(tr)}let dt={type:1,geometry:[[Math.round(this.options.extent*(qe*he-K)),Math.round(this.options.extent*(Be*he-te))]],tags:Me},xt;xt=Te||this.options.generateId?N[se+si]:this.points[N[se+si]].id,xt!==void 0&&(dt.id=xt),me.features.push(dt)}}_limitZoom(B){return Math.max(this.options.minZoom,Math.min(Math.floor(+B),this.options.maxZoom+1))}_cluster(B,N){let{radius:K,extent:te,reduce:he,minPoints:me}=this.options,_e=K/(te*Math.pow(2,N)),se=B.data,Te=[],Me=this.stride;for(let qe=0;qe<se.length;qe+=Me){if(se[qe+2]<=N)continue;se[qe+2]=N;let Be=se[qe],dt=se[qe+1],xt=B.within(se[qe],se[qe+1],_e),er=se[qe+Mi],Dt=er;for(let tr of xt){let Gt=tr*Me;se[Gt+2]>N&&(Dt+=se[Gt+Mi])}if(Dt>er&&Dt>=me){let tr,Gt=Be*er,ui=dt*er,jr=-1,jt=((qe/Me|0)<<5)+(N+1)+this.points.length;for(let hr of xt){let Rr=hr*Me;if(se[Rr+2]<=N)continue;se[Rr+2]=N;let qi=se[Rr+Mi];Gt+=se[Rr]*qi,ui+=se[Rr+1]*qi,se[Rr+4]=jt,he&&(tr||(tr=this._map(se,qe,!0),jr=this.clusterProps.length,this.clusterProps.push(tr)),he(tr,this._map(se,Rr)))}se[qe+4]=jt,Te.push(Gt/Dt,ui/Dt,1/0,jt,-1,Dt),he&&Te.push(jr)}else{for(let tr=0;tr<Me;tr++)Te.push(se[qe+tr]);if(Dt>1)for(let tr of xt){let Gt=tr*Me;if(!(se[Gt+2]<=N)){se[Gt+2]=N;for(let ui=0;ui<Me;ui++)Te.push(se[Gt+ui])}}}}return Te}_getOriginId(B){return B-this.points.length>>5}_getOriginZoom(B){return(B-this.points.length)%32}_map(B,N,K){if(B[N+Mi]>1){let me=this.clusterProps[B[N+jo]];return K?Object.assign({},me):me}let te=this.points[B[N+si]].properties,he=this.options.map(te);return K&&he===te?Object.assign({},he):he}}function ia(ie,B,N){return{type:"Feature",id:ie[B+si],properties:Vo(ie,B,N),geometry:{type:"Point",coordinates:[(K=ie[B],360*(K-.5)),ro(ie[B+1])]}};var K}function Vo(ie,B,N){let K=ie[B+Mi],te=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,he=ie[B+jo],me=he===-1?{}:Object.assign({},N[he]);return Object.assign(me,{cluster:!0,cluster_id:ie[B+si],point_count:K,point_count_abbreviated:te})}function Ji(ie){return ie/360+.5}function Yi(ie){let B=Math.sin(ie*Math.PI/180),N=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return N<0?0:N>1?1:N}function ro(ie){let B=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp(B))/Math.PI-90}function ka(ie,B,N,K){let te=K,he=B+(N-B>>1),me,_e=N-B,se=ie[B],Te=ie[B+1],Me=ie[N],qe=ie[N+1];for(let Be=B+3;Be<N;Be+=3){let dt=hs(ie[Be],ie[Be+1],se,Te,Me,qe);if(dt>te)me=Be,te=dt;else if(dt===te){let xt=Math.abs(Be-he);xt<_e&&(me=Be,_e=xt)}}te>K&&(me-B>3&&ka(ie,B,me,K),ie[me+2]=te,N-me>3&&ka(ie,me,N,K))}function hs(ie,B,N,K,te,he){let me=te-N,_e=he-K;if(me!==0||_e!==0){let se=((ie-N)*me+(B-K)*_e)/(me*me+_e*_e);se>1?(N=te,K=he):se>0&&(N+=me*se,K+=_e*se)}return me=ie-N,_e=B-K,me*me+_e*_e}function na(ie,B,N,K){let te={id:ie==null?null:ie,type:B,geometry:N,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(B==="Point"||B==="MultiPoint"||B==="LineString")io(te,N);else if(B==="Polygon")io(te,N[0]);else if(B==="MultiLineString")for(let he of N)io(te,he);else if(B==="MultiPolygon")for(let he of N)io(te,he[0]);return te}function io(ie,B){for(let N=0;N<B.length;N+=3)ie.minX=Math.min(ie.minX,B[N]),ie.minY=Math.min(ie.minY,B[N+1]),ie.maxX=Math.max(ie.maxX,B[N]),ie.maxY=Math.max(ie.maxY,B[N+1])}function Ra(ie,B,N,K){if(!B.geometry)return;let te=B.geometry.coordinates;if(te&&te.length===0)return;let he=B.geometry.type,me=Math.pow(N.tolerance/((1<<N.maxZoom)*N.extent),2),_e=[],se=B.id;if(N.promoteId?se=B.properties[N.promoteId]:N.generateId&&(se=K||0),he==="Point")$o(te,_e);else if(he==="MultiPoint")for(let Te of te)$o(Te,_e);else if(he==="LineString")Ae(te,_e,me,!1);else if(he==="MultiLineString"){if(N.lineMetrics){for(let Te of te)_e=[],Ae(Te,_e,me,!1),ie.push(na(se,"LineString",_e,B.properties));return}fs(te,_e,me,!1)}else if(he==="Polygon")fs(te,_e,me,!0);else{if(he!=="MultiPolygon"){if(he==="GeometryCollection"){for(let Te of B.geometry.geometries)Ra(ie,{id:se,geometry:Te,properties:B.properties},N,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Te of te){let Me=[];fs(Te,Me,me,!0),_e.push(Me)}}ie.push(na(se,he,_e,B.properties))}function $o(ie,B){B.push(Yu(ie[0]),ue(ie[1]),0)}function Ae(ie,B,N,K){let te,he,me=0;for(let se=0;se<ie.length;se++){let Te=Yu(ie[se][0]),Me=ue(ie[se][1]);B.push(Te,Me,0),se>0&&(me+=K?(te*Me-Te*he)/2:Math.sqrt(Math.pow(Te-te,2)+Math.pow(Me-he,2))),te=Te,he=Me}let _e=B.length-3;B[2]=1,ka(B,0,_e,N),B[_e+2]=1,B.size=Math.abs(me),B.start=0,B.end=B.size}function fs(ie,B,N,K){for(let te=0;te<ie.length;te++){let he=[];Ae(ie[te],he,N,K),B.push(he)}}function Yu(ie){return ie/360+.5}function ue(ie){let B=Math.sin(ie*Math.PI/180),N=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return N<0?0:N>1?1:N}function Se(ie,B,N,K,te,he,me,_e){if(K/=B,he>=(N/=B)&&me<K)return ie;if(me<N||he>=K)return null;let se=[];for(let Te of ie){let Me=Te.geometry,qe=Te.type,Be=te===0?Te.minX:Te.minY,dt=te===0?Te.maxX:Te.maxY;if(Be>=N&&dt<K){se.push(Te);continue}if(dt<N||Be>=K)continue;let xt=[];if(qe==="Point"||qe==="MultiPoint")Oe(Me,xt,N,K,te);else if(qe==="LineString")_t(Me,xt,N,K,te,!1,_e.lineMetrics);else if(qe==="MultiLineString")Je(Me,xt,N,K,te,!1);else if(qe==="Polygon")Je(Me,xt,N,K,te,!0);else if(qe==="MultiPolygon")for(let er of Me){let Dt=[];Je(er,Dt,N,K,te,!0),Dt.length&&xt.push(Dt)}if(xt.length){if(_e.lineMetrics&&qe==="LineString"){for(let er of xt)se.push(na(Te.id,qe,er,Te.tags));continue}qe!=="LineString"&&qe!=="MultiLineString"||(xt.length===1?(qe="LineString",xt=xt[0]):qe="MultiLineString"),qe!=="Point"&&qe!=="MultiPoint"||(qe=xt.length===3?"Point":"MultiPoint"),se.push(na(Te.id,qe,xt,Te.tags))}}return se.length?se:null}function Oe(ie,B,N,K,te){for(let he=0;he<ie.length;he+=3){let me=ie[he+te];me>=N&&me<=K&&mt(B,ie[he],ie[he+1],ie[he+2])}}function _t(ie,B,N,K,te,he,me){let _e=et(ie),se=te===0?Qt:ar,Te,Me,qe=ie.start;for(let Dt=0;Dt<ie.length-3;Dt+=3){let tr=ie[Dt],Gt=ie[Dt+1],ui=ie[Dt+2],jr=ie[Dt+3],jt=ie[Dt+4],hr=te===0?tr:Gt,Rr=te===0?jr:jt,qi=!1;me&&(Te=Math.sqrt(Math.pow(tr-jr,2)+Math.pow(Gt-jt,2))),hr<N?Rr>N&&(Me=se(_e,tr,Gt,jr,jt,N),me&&(_e.start=qe+Te*Me)):hr>K?Rr<K&&(Me=se(_e,tr,Gt,jr,jt,K),me&&(_e.start=qe+Te*Me)):mt(_e,tr,Gt,ui),Rr<N&&hr>=N&&(Me=se(_e,tr,Gt,jr,jt,N),qi=!0),Rr>K&&hr<=K&&(Me=se(_e,tr,Gt,jr,jt,K),qi=!0),!he&&qi&&(me&&(_e.end=qe+Te*Me),B.push(_e),_e=et(ie)),me&&(qe+=Te)}let Be=ie.length-3,dt=ie[Be],xt=ie[Be+1],er=te===0?dt:xt;er>=N&&er<=K&&mt(_e,dt,xt,ie[Be+2]),Be=_e.length-3,he&&Be>=3&&(_e[Be]!==_e[0]||_e[Be+1]!==_e[1])&&mt(_e,_e[0],_e[1],_e[2]),_e.length&&B.push(_e)}function et(ie){let B=[];return B.size=ie.size,B.start=ie.start,B.end=ie.end,B}function Je(ie,B,N,K,te,he){for(let me of ie)_t(me,B,N,K,te,he,!1)}function mt(ie,B,N,K){ie.push(B,N,K)}function Qt(ie,B,N,K,te,he){let me=(he-B)/(K-B);return mt(ie,he,N+(te-N)*me,1),me}function ar(ie,B,N,K,te,he){let me=(he-N)/(te-N);return mt(ie,B+(K-B)*me,he,1),me}function Re(ie,B){let N=[];for(let K=0;K<ie.length;K++){let te=ie[K],he=te.type,me;if(he==="Point"||he==="MultiPoint"||he==="LineString")me=Qi(te.geometry,B);else if(he==="MultiLineString"||he==="Polygon"){me=[];for(let _e of te.geometry)me.push(Qi(_e,B))}else if(he==="MultiPolygon"){me=[];for(let _e of te.geometry){let se=[];for(let Te of _e)se.push(Qi(Te,B));me.push(se)}}N.push(na(te.id,he,me,te.tags))}return N}function Qi(ie,B){let N=[];N.size=ie.size,ie.start!==void 0&&(N.start=ie.start,N.end=ie.end);for(let K=0;K<ie.length;K+=3)N.push(ie[K]+B,ie[K+1],ie[K+2]);return N}function Zr(ie,B){if(ie.transformed)return ie;let N=1<<ie.z,K=ie.x,te=ie.y;for(let he of ie.features){let me=he.geometry,_e=he.type;if(he.geometry=[],_e===1)for(let se=0;se<me.length;se+=2)he.geometry.push(vi(me[se],me[se+1],B,N,K,te));else for(let se=0;se<me.length;se++){let Te=[];for(let Me=0;Me<me[se].length;Me+=2)Te.push(vi(me[se][Me],me[se][Me+1],B,N,K,te));he.geometry.push(Te)}}return ie.transformed=!0,ie}function vi(ie,B,N,K,te,he){return[Math.round(N*(ie*K-te)),Math.round(N*(B*K-he))]}function no(ie,B,N,K,te){let he=B===te.maxZoom?0:te.tolerance/((1<<B)*te.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:ie.length,source:null,x:N,y:K,z:B,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let _e of ie)Ne(me,_e,he,te);return me}function Ne(ie,B,N,K){let te=B.geometry,he=B.type,me=[];if(ie.minX=Math.min(ie.minX,B.minX),ie.minY=Math.min(ie.minY,B.minY),ie.maxX=Math.max(ie.maxX,B.maxX),ie.maxY=Math.max(ie.maxY,B.maxY),he==="Point"||he==="MultiPoint")for(let _e=0;_e<te.length;_e+=3)me.push(te[_e],te[_e+1]),ie.numPoints++,ie.numSimplified++;else if(he==="LineString")Ft(me,te,ie,N,!1,!1);else if(he==="MultiLineString"||he==="Polygon")for(let _e=0;_e<te.length;_e++)Ft(me,te[_e],ie,N,he==="Polygon",_e===0);else if(he==="MultiPolygon")for(let _e=0;_e<te.length;_e++){let se=te[_e];for(let Te=0;Te<se.length;Te++)Ft(me,se[Te],ie,N,!0,Te===0)}if(me.length){let _e=B.tags||null;if(he==="LineString"&&K.lineMetrics){_e={};for(let Te in B.tags)_e[Te]=B.tags[Te];_e.mapbox_clip_start=te.start/te.size,_e.mapbox_clip_end=te.end/te.size}let se={geometry:me,type:he==="Polygon"||he==="MultiPolygon"?3:he==="LineString"||he==="MultiLineString"?2:1,tags:_e};B.id!==null&&(se.id=B.id),ie.features.push(se)}}function Ft(ie,B,N,K,te,he){let me=K*K;if(K>0&&B.size<(te?me:K))return void(N.numPoints+=B.length/3);let _e=[];for(let se=0;se<B.length;se+=3)(K===0||B[se+2]>me)&&(N.numSimplified++,_e.push(B[se],B[se+1])),N.numPoints++;te&&function(se,Te){let Me=0;for(let qe=0,Be=se.length,dt=Be-2;qe<Be;dt=qe,qe+=2)Me+=(se[qe]-se[dt])*(se[qe+1]+se[dt+1]);if(Me>0===Te)for(let qe=0,Be=se.length;qe<Be/2;qe+=2){let dt=se[qe],xt=se[qe+1];se[qe]=se[Be-2-qe],se[qe+1]=se[Be-1-qe],se[Be-2-qe]=dt,se[Be-1-qe]=xt}}(_e,he),ie.push(_e)}let qt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class gn{constructor(B,N){let K=(N=this.options=function(he,me){for(let _e in me)he[_e]=me[_e];return he}(Object.create(qt),N)).debug;if(K&&console.time("preprocess data"),N.maxZoom<0||N.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(N.promoteId&&N.generateId)throw new Error("promoteId and generateId cannot be used together.");let te=function(he,me){let _e=[];if(he.type==="FeatureCollection")for(let se=0;se<he.features.length;se++)Ra(_e,he.features[se],me,se);else Ra(_e,he.type==="Feature"?he:{geometry:he},me);return _e}(B,N);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",N.indexMaxZoom,N.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(he,me){let _e=me.buffer/me.extent,se=he,Te=Se(he,1,-1-_e,_e,0,-1,2,me),Me=Se(he,1,1-_e,2+_e,0,-1,2,me);return(Te||Me)&&(se=Se(he,1,-_e,1+_e,0,-1,2,me)||[],Te&&(se=Re(Te,1).concat(se)),Me&&(se=se.concat(Re(Me,-1)))),se}(te,N),te.length&&this.splitTile(te,0,0,0),K&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(B,N,K,te,he,me,_e){let se=[B,N,K,te],Te=this.options,Me=Te.debug;for(;se.length;){te=se.pop(),K=se.pop(),N=se.pop(),B=se.pop();let qe=1<<N,Be=Da(N,K,te),dt=this.tiles[Be];if(!dt&&(Me>1&&console.time("creation"),dt=this.tiles[Be]=no(B,N,K,te,Te),this.tileCoords.push({z:N,x:K,y:te}),Me)){Me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",N,K,te,dt.numFeatures,dt.numPoints,dt.numSimplified),console.timeEnd("creation"));let qi=`z${N}`;this.stats[qi]=(this.stats[qi]||0)+1,this.total++}if(dt.source=B,he==null){if(N===Te.indexMaxZoom||dt.numPoints<=Te.indexMaxPoints)continue}else{if(N===Te.maxZoom||N===he)continue;if(he!=null){let qi=he-N;if(K!==me>>qi||te!==_e>>qi)continue}}if(dt.source=null,B.length===0)continue;Me>1&&console.time("clipping");let xt=.5*Te.buffer/Te.extent,er=.5-xt,Dt=.5+xt,tr=1+xt,Gt=null,ui=null,jr=null,jt=null,hr=Se(B,qe,K-xt,K+Dt,0,dt.minX,dt.maxX,Te),Rr=Se(B,qe,K+er,K+tr,0,dt.minX,dt.maxX,Te);B=null,hr&&(Gt=Se(hr,qe,te-xt,te+Dt,1,dt.minY,dt.maxY,Te),ui=Se(hr,qe,te+er,te+tr,1,dt.minY,dt.maxY,Te),hr=null),Rr&&(jr=Se(Rr,qe,te-xt,te+Dt,1,dt.minY,dt.maxY,Te),jt=Se(Rr,qe,te+er,te+tr,1,dt.minY,dt.maxY,Te),Rr=null),Me>1&&console.timeEnd("clipping"),se.push(Gt||[],N+1,2*K,2*te),se.push(ui||[],N+1,2*K,2*te+1),se.push(jr||[],N+1,2*K+1,2*te),se.push(jt||[],N+1,2*K+1,2*te+1)}}getTile(B,N,K){B=+B,N=+N,K=+K;let te=this.options,{extent:he,debug:me}=te;if(B<0||B>24)return null;let _e=1<<B,se=Da(B,N=N+_e&_e-1,K);if(this.tiles[se])return Zr(this.tiles[se],he);me>1&&console.log("drilling down to z%d-%d-%d",B,N,K);let Te,Me=B,qe=N,Be=K;for(;!Te&&Me>0;)Me--,qe>>=1,Be>>=1,Te=this.tiles[Da(Me,qe,Be)];return Te&&Te.source?(me>1&&(console.log("found parent tile z%d-%d-%d",Me,qe,Be),console.time("drilling down")),this.splitTile(Te.source,Me,qe,Be,B,N,K),me>1&&console.timeEnd("drilling down"),this.tiles[se]?Zr(this.tiles[se],he):null):null}}function Da(ie,B,N){return 32*((1<<ie)*N+B)+ie}function Ot(ie,B){return B?ie.properties[B]:ie.id}function ao(ie,B){if(ie==null)return!0;if(ie.type==="Feature")return Ot(ie,B)!=null;if(ie.type==="FeatureCollection"){let N=new Set;for(let K of ie.features){let te=Ot(K,B);if(te==null||N.has(te))return!1;N.add(te)}return!0}return!1}function Wo(ie,B){let N=new Map;if(ie!=null)if(ie.type==="Feature")N.set(Ot(ie,B),ie);else for(let K of ie.features)N.set(Ot(K,B),K);return N}class ds extends T{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(B,N){return u._(this,void 0,void 0,function*(){let K=B.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let te=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!te)return null;let he=new class{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.X,this.length=_e.length,this._features=_e}feature(_e){return new class{constructor(se){this._feature=se,this.extent=u.X,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){let se=[];for(let Te of this._feature.geometry)se.push([new u.P(Te[0],Te[1])]);return se}{let se=[];for(let Te of this._feature.geometry){let Me=[];for(let qe of Te)Me.push(new u.P(qe[0],qe[1]));se.push(Me)}return se}}toGeoJSON(se,Te,Me){return pe.call(this,se,Te,Me)}}(this._features[_e])}}(te.features),me=_r(he);return me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),{vectorTile:he,rawData:me.buffer}})}loadData(B){return u._(this,void 0,void 0,function*(){var N;(N=this._pendingRequest)===null||N===void 0||N.abort();let K=!!(B&&B.request&&B.request.collectResourceTiming)&&new u.bv(B.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(B,this._pendingRequest),this._geoJSONIndex=B.cluster?new Oa(function({superclusterOptions:me,clusterProperties:_e}){if(!_e||!me)return me;let se={},Te={},Me={accumulated:null,zoom:0},qe={properties:null},Be=Object.keys(_e);for(let dt of Be){let[xt,er]=_e[dt],Dt=u.bC(er),tr=u.bC(typeof xt=="string"?[xt,["accumulated"],["get",dt]]:xt);se[dt]=Dt.value,Te[dt]=tr.value}return me.map=dt=>{qe.properties=dt;let xt={};for(let er of Be)xt[er]=se[er].evaluate(Me,qe);return xt},me.reduce=(dt,xt)=>{qe.properties=xt;for(let er of Be)Me.accumulated=dt[er],dt[er]=Te[er].evaluate(Me,qe)},me}(B)).load((yield this._pendingData).features):(te=yield this._pendingData,new gn(te,B.geojsonVtOptions)),this.loaded={};let he={};if(K){let me=K.finish();me&&(he.resourceTiming={},he.resourceTiming[B.source]=JSON.parse(JSON.stringify(me)))}return he}catch(he){if(delete this._pendingRequest,u.bB(he))return{abandoned:!0};throw he}var te})}getData(){return u._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(B){let N=this.loaded;return N&&N[B.uid]?super.reloadTile(B):this.loadTile(B)}loadAndProcessGeoJSON(B,N){return u._(this,void 0,void 0,function*(){let K=yield this.loadGeoJSON(B,N);if(delete this._pendingRequest,typeof K!="object")throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(Y(K,!0),B.filter){let te=u.bC(B.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(te.result==="error")throw new Error(te.value.map(me=>`${me.key}: ${me.message}`).join(", "));K={type:"FeatureCollection",features:K.features.filter(me=>te.value.evaluate({zoom:0},me))}}return K})}loadGeoJSON(B,N){return u._(this,void 0,void 0,function*(){let{promoteId:K}=B;if(B.request){let te=yield u.h(B.request,N);return this._dataUpdateable=ao(te.data,K)?Wo(te.data,K):void 0,te.data}if(typeof B.data=="string")try{let te=JSON.parse(B.data);return this._dataUpdateable=ao(te,K)?Wo(te,K):void 0,te}catch(te){throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`)}if(!B.dataDiff)throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${B.source}`);return function(te,he,me){var _e,se,Te,Me;if(he.removeAll&&te.clear(),he.remove)for(let qe of he.remove)te.delete(qe);if(he.add)for(let qe of he.add){let Be=Ot(qe,me);Be!=null&&te.set(Be,qe)}if(he.update)for(let qe of he.update){let Be=te.get(qe.id);if(Be==null)continue;let dt=!qe.removeAllProperties&&(((_e=qe.removeProperties)===null||_e===void 0?void 0:_e.length)>0||((se=qe.addOrUpdateProperties)===null||se===void 0?void 0:se.length)>0);if((qe.newGeometry||qe.removeAllProperties||dt)&&(Be=Object.assign({},Be),te.set(qe.id,Be),dt&&(Be.properties=Object.assign({},Be.properties))),qe.newGeometry&&(Be.geometry=qe.newGeometry),qe.removeAllProperties)Be.properties={};else if(((Te=qe.removeProperties)===null||Te===void 0?void 0:Te.length)>0)for(let xt of qe.removeProperties)Object.prototype.hasOwnProperty.call(Be.properties,xt)&&delete Be.properties[xt];if(((Me=qe.addOrUpdateProperties)===null||Me===void 0?void 0:Me.length)>0)for(let{key:xt,value:er}of qe.addOrUpdateProperties)Be.properties[xt]=er}}(this._dataUpdateable,B.dataDiff,K),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(B){return u._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(B){return this._geoJSONIndex.getClusterExpansionZoom(B.clusterId)}getClusterChildren(B){return this._geoJSONIndex.getChildren(B.clusterId)}getClusterLeaves(B){return this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset)}}class oo{constructor(B){this.self=B,this.actor=new u.F(B),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(N,K)=>{if(this.externalWorkerSourceTypes[N])throw new Error(`Worker source with name "${N}" already registered.`);this.externalWorkerSourceTypes[N]=K},this.self.addProtocol=u.bi,this.self.removeProtocol=u.bj,this.self.registerRTLTextPlugin=N=>{if(u.bD.isParsed())throw new Error("RTL text plugin already registered.");u.bD.setMethods(N)},this.actor.registerMessageHandler("LDT",(N,K)=>this._getDEMWorkerSource(N,K.source).loadTile(K)),this.actor.registerMessageHandler("RDT",(N,K)=>u._(this,void 0,void 0,function*(){this._getDEMWorkerSource(N,K.source).removeTile(K)})),this.actor.registerMessageHandler("GCEZ",(N,K)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(N,K.type,K.source).getClusterExpansionZoom(K)})),this.actor.registerMessageHandler("GCC",(N,K)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(N,K.type,K.source).getClusterChildren(K)})),this.actor.registerMessageHandler("GCL",(N,K)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(N,K.type,K.source).getClusterLeaves(K)})),this.actor.registerMessageHandler("LD",(N,K)=>this._getWorkerSource(N,K.type,K.source).loadData(K)),this.actor.registerMessageHandler("GD",(N,K)=>this._getWorkerSource(N,K.type,K.source).getData()),this.actor.registerMessageHandler("LT",(N,K)=>this._getWorkerSource(N,K.type,K.source).loadTile(K)),this.actor.registerMessageHandler("RT",(N,K)=>this._getWorkerSource(N,K.type,K.source).reloadTile(K)),this.actor.registerMessageHandler("AT",(N,K)=>this._getWorkerSource(N,K.type,K.source).abortTile(K)),this.actor.registerMessageHandler("RMT",(N,K)=>this._getWorkerSource(N,K.type,K.source).removeTile(K)),this.actor.registerMessageHandler("RS",(N,K)=>u._(this,void 0,void 0,function*(){if(!this.workerSources[N]||!this.workerSources[N][K.type]||!this.workerSources[N][K.type][K.source])return;let te=this.workerSources[N][K.type][K.source];delete this.workerSources[N][K.type][K.source],te.removeSource!==void 0&&te.removeSource(K)})),this.actor.registerMessageHandler("RM",N=>u._(this,void 0,void 0,function*(){delete this.layerIndexes[N],delete this.availableImages[N],delete this.workerSources[N],delete this.demWorkerSources[N]})),this.actor.registerMessageHandler("SR",(N,K)=>u._(this,void 0,void 0,function*(){this.referrer=K})),this.actor.registerMessageHandler("SRPS",(N,K)=>this._syncRTLPluginState(N,K)),this.actor.registerMessageHandler("IS",(N,K)=>u._(this,void 0,void 0,function*(){this.self.importScripts(K)})),this.actor.registerMessageHandler("SI",(N,K)=>this._setImages(N,K)),this.actor.registerMessageHandler("UL",(N,K)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(N).update(K.layers,K.removedIds)})),this.actor.registerMessageHandler("SL",(N,K)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(N).replace(K)}))}_setImages(B,N){return u._(this,void 0,void 0,function*(){this.availableImages[B]=N;for(let K in this.workerSources[B]){let te=this.workerSources[B][K];for(let he in te)te[he].availableImages=N}})}_syncRTLPluginState(B,N){return u._(this,void 0,void 0,function*(){if(u.bD.isParsed())return u.bD.getState();if(N.pluginStatus!=="loading")return u.bD.setState(N),N;let K=N.pluginURL;if(this.self.importScripts(K),u.bD.isParsed()){let te={pluginStatus:"loaded",pluginURL:K};return u.bD.setState(te),te}throw u.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${K}`)})}_getAvailableImages(B){let N=this.availableImages[B];return N||(N=[]),N}_getLayerIndex(B){let N=this.layerIndexes[B];return N||(N=this.layerIndexes[B]=new s),N}_getWorkerSource(B,N,K){if(this.workerSources[B]||(this.workerSources[B]={}),this.workerSources[B][N]||(this.workerSources[B][N]={}),!this.workerSources[B][N][K]){let te={sendAsync:(he,me)=>(he.targetMapId=B,this.actor.sendAsync(he,me))};switch(N){case"vector":this.workerSources[B][N][K]=new T(te,this._getLayerIndex(B),this._getAvailableImages(B));break;case"geojson":this.workerSources[B][N][K]=new ds(te,this._getLayerIndex(B),this._getAvailableImages(B));break;default:this.workerSources[B][N][K]=new this.externalWorkerSourceTypes[N](te,this._getLayerIndex(B),this._getAvailableImages(B));}}return this.workerSources[B][N][K]}_getDEMWorkerSource(B,N){return this.demWorkerSources[B]||(this.demWorkerSources[B]={}),this.demWorkerSources[B][N]||(this.demWorkerSources[B][N]=new I),this.demWorkerSources[B][N]}}return u.i(self)&&(self.worker=new oo(self)),oo}),r("index",["exports","./shared"],function(u,s){"use strict";var m="4.7.0";let x,q,T={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:g=>new Promise((i,c)=>{let f=requestAnimationFrame(i);g.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),c(s.c())})}),getImageData(g,i=0){return this.getImageCanvasContext(g).getImageData(-i,-i,g.width+2*i,g.height+2*i)},getImageCanvasContext(g){let i=window.document.createElement("canvas"),c=i.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return i.width=g.width,i.height=g.height,c.drawImage(g,0,0,g.width,g.height),c},resolveURL:g=>(x||(x=document.createElement("a")),x.href=g,x.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(q==null&&(q=matchMedia("(prefers-reduced-motion: reduce)")),q.matches)}};class I{static testProp(i){if(!I.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in I.docStyle)return i[c];return i[0]}static create(i,c,f){let d=window.document.createElement(i);return c!==void 0&&(d.className=c),f&&f.appendChild(d),d}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(i,c){i.style[I.transformProp]=c}static addEventListener(i,c,f,d={}){i.addEventListener(c,f,"passive"in d?d:d.capture)}static removeEventListener(i,c,f,d={}){i.removeEventListener(c,f,"passive"in d?d:d.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static getScale(i){let c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}static getPoint(i,c,f){let d=c.boundingClientRect;return new s.P((f.clientX-d.left)/c.x-i.clientLeft,(f.clientY-d.top)/c.y-i.clientTop)}static mousePos(i,c){let f=I.getScale(i);return I.getPoint(i,f,c)}static touchPos(i,c){let f=[],d=I.getScale(i);for(let v=0;v<c.length;v++)f.push(I.getPoint(i,d,c[v]));return f}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}I.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);let L={supported:!1,testSupport:function(g){!pe&&Y&&(de?Z(g):z=g)}},z,Y,pe=!1,de=!1;function Z(g){let i=g.createTexture();g.bindTexture(g.TEXTURE_2D,i);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,Y),g.isContextLost())return;L.supported=!0}catch(c){}g.deleteTexture(i),pe=!0}var H;typeof document!="undefined"&&(Y=document.createElement("img"),Y.onload=()=>{z&&Z(z),z=null,de=!0},Y.onerror=()=>{pe=!0,z=null},Y.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let i,c,f,d;g.resetRequestQueue=()=>{i=[],c=0,f=0,d={}},g.addThrottleControl=C=>{let O=f++;return d[O]=C,O},g.removeThrottleControl=C=>{delete d[C],S()},g.getImage=(C,O,R=!0)=>new Promise((D,j)=>{L.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),s.e(C,{type:"image"}),i.push({abortController:O,requestParameters:C,supportImageRefresh:R,state:"queued",onError:G=>{j(G)},onSuccess:G=>{D(G)}}),S()});let v=C=>s._(this,void 0,void 0,function*(){C.state="running";let{requestParameters:O,supportImageRefresh:R,onError:D,onSuccess:j,abortController:G}=C,X=R===!1&&!s.i(self)&&!s.g(O.url)&&(!O.headers||Object.keys(O.headers).reduce((oe,le)=>oe&&le==="accept",!0));c++;let re=X?E(O,G):s.m(O,G);try{let oe=yield re;delete C.abortController,C.state="completed",oe.data instanceof HTMLImageElement||s.b(oe.data)?j(oe):oe.data&&j({data:yield(ae=oe.data,typeof createImageBitmap=="function"?s.d(ae):s.f(ae)),cacheControl:oe.cacheControl,expires:oe.expires})}catch(oe){delete C.abortController,D(oe)}finally{c--,S()}var ae}),S=()=>{let C=(()=>{for(let O of Object.keys(d))if(d[O]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let O=c;O<C&&i.length>0;O++){let R=i.shift();R.abortController.signal.aborted?O--:v(R)}},E=(C,O)=>new Promise((R,D)=>{let j=new Image,G=C.url,X=C.credentials;X&&X==="include"?j.crossOrigin="use-credentials":(X&&X==="same-origin"||!s.s(G))&&(j.crossOrigin="anonymous"),O.signal.addEventListener("abort",()=>{j.src="",D(s.c())}),j.fetchPriority="high",j.onload=()=>{j.onerror=j.onload=null,R({data:j})},j.onerror=()=>{j.onerror=j.onload=null,O.signal.aborted||D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j.src=G})}(H||(H={})),H.resetRequestQueue();class J{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function ve(g){var i=new s.A(3);return i[0]=g[0],i[1]=g[1],i[2]=g[2],i}var be,Le=function(g,i,c){return g[0]=i[0]-c[0],g[1]=i[1]-c[1],g[2]=i[2]-c[2],g};be=new s.A(3),s.A!=Float32Array&&(be[0]=0,be[1]=0,be[2]=0);var Pe=function(g){var i=g[0],c=g[1];return i*i+c*c};function Ge(g){let i=[];if(typeof g=="string")i.push({id:"default",url:g});else if(g&&g.length>0){let c=[];for(let{id:f,url:d}of g){let v=`${f}${d}`;c.indexOf(v)===-1&&(c.push(v),i.push({id:f,url:d}))}}return i}function pt(g,i,c){let f=g.split("?");return f[0]+=`${i}${c}`,f.join("?")}(function(){var g=new s.A(2);s.A!=Float32Array&&(g[0]=0,g[1]=0)})();class Ve{constructor(i,c,f,d){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(c,d)}update(i,c,f){let{width:d,height:v}=i,S=!(this.size&&this.size[0]===d&&this.size[1]===v||f),{context:E}=this,{gl:C}=E;if(this.useMipmap=!!(c&&c.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!c||c.premultiply!==!1)),S)this.size=[d,v],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,i):C.texImage2D(C.TEXTURE_2D,0,this.format,d,v,0,this.format,C.UNSIGNED_BYTE,i.data);else{let{x:O,y:R}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?C.texSubImage2D(C.TEXTURE_2D,0,O,R,C.RGBA,C.UNSIGNED_BYTE,i):C.texSubImage2D(C.TEXTURE_2D,0,O,R,d,v,C.RGBA,C.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D)}bind(i,c,f){let{context:d}=this,{gl:v}=d;v.bindTexture(v.TEXTURE_2D,this.texture),f!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=v.LINEAR),i!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,f||i),this.filter=i),c!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,c),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Br(g){let{userImage:i}=g;return!!(i&&i.render&&i.render())&&(g.data.replace(new Uint8Array(i.data.buffer)),!0)}class cr extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(let{ids:c,promiseResolve:f}of this.requestors)f(this._getImagesForIds(c));this.requestors=[]}}getImage(i){let c=this.images[i];if(c&&!c.data&&c.spriteData){let f=c.spriteData;c.data=new s.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let f=!0,d=c.data||c.spriteData;return this._validateStretch(c.stretchX,d&&d.width)||(this.fire(new s.j(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,d&&d.height)||(this.fire(new s.j(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new s.j(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,c){if(!i)return!0;let f=0;for(let d of i){if(d[0]<f||d[1]<d[0]||c<d[1])return!1;f=d[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;let f=c.spriteData,d=f&&f.width||c.data.width,v=f&&f.height||c.data.height;return!(i[0]<0||d<i[0]||i[1]<0||v<i[1]||i[2]<0||d<i[2]||i[3]<0||v<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,f=!0){let d=this.getImage(i);if(f&&(d.data.width!==c.data.width||d.data.height!==c.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=d.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){let c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((c,f)=>{let d=!0;if(!this.isLoaded())for(let v of i)this.images[v]||(d=!1);this.isLoaded()||d?c(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:c})})}_getImagesForIds(i){let c={};for(let f of i){let d=this.getImage(f);d||(this.fire(new s.k("styleimagemissing",{id:f})),d=this.getImage(f)),d?c[f]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:s.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){let{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){let c=this.patterns[i],f=this.getImage(i);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{let d={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new s.I(d,f);this.patterns[i]={bin:d,position:v}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){let c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ve(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){let i=[];for(let v in this.patterns)i.push(this.patterns[v].bin);let{w:c,h:f}=s.p(i),d=this.atlasImage;d.resize({width:c||1,height:f||1});for(let v in this.patterns){let{bin:S}=this.patterns[v],E=S.x+1,C=S.y+1,O=this.getImage(v).data,R=O.width,D=O.height;s.R.copy(O,d,{x:0,y:0},{x:E,y:C},{width:R,height:D}),s.R.copy(O,d,{x:0,y:D-1},{x:E,y:C-1},{width:R,height:1}),s.R.copy(O,d,{x:0,y:0},{x:E,y:C+D},{width:R,height:1}),s.R.copy(O,d,{x:R-1,y:0},{x:E-1,y:C},{width:1,height:D}),s.R.copy(O,d,{x:0,y:0},{x:E+R,y:C},{width:1,height:D})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(let c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;let f=this.getImage(c);f||s.w(`Image with ID: "${c}" was not found`),Br(f)&&this.updateImage(c,f)}}}let yt=1e20;function Ct(g,i,c,f,d,v,S,E,C){for(let O=i;O<i+f;O++)pr(g,c*v+O,v,d,S,E,C);for(let O=c;O<c+d;O++)pr(g,O*v+i,1,f,S,E,C)}function pr(g,i,c,f,d,v,S){v[0]=0,S[0]=-yt,S[1]=yt,d[0]=g[i];for(let E=1,C=0,O=0;E<f;E++){d[E]=g[i+E*c];let R=E*E;do{let D=v[C];O=(d[E]-d[D]+R-D*D)/(E-D)/2}while(O<=S[C]&&--C>-1);C++,v[C]=E,S[C]=O,S[C+1]=yt}for(let E=0,C=0;E<f;E++){for(;S[C+1]<E;)C++;let O=v[C],R=E-O;g[i+E*c]=d[O]+R*R}}class _r{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return s._(this,void 0,void 0,function*(){let c=[];for(let v in i)for(let S of i[v])c.push(this._getAndCacheGlyphsPromise(v,S));let f=yield Promise.all(c),d={};for(let{stack:v,id:S,glyph:E}of f)d[v]||(d[v]={}),d[v][S]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return d})}_getAndCacheGlyphsPromise(i,c){return s._(this,void 0,void 0,function*(){let f=this.entries[i];f||(f=this.entries[i]={glyphs:{},requests:{},ranges:{}});let d=f.glyphs[c];if(d!==void 0)return{stack:i,id:c,glyph:d};if(d=this._tinySDF(f,i,c),d)return f.glyphs[c]=d,{stack:i,id:c,glyph:d};let v=Math.floor(c/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[v])return{stack:i,id:c,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[v]){let E=_r.loadGlyphRange(i,v,this.url,this.requestManager);f.requests[v]=E}let S=yield f.requests[v];for(let E in S)this._doesCharSupportLocalGlyph(+E)||(f.glyphs[+E]=S[+E]);return f.ranges[v]=!0,{stack:i,id:c,glyph:S[c]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))}_tinySDF(i,c,f){let d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(f))return;let v=i.tinySDF;if(!v){let E="400";/bold/i.test(c)?E="900":/medium/i.test(c)?E="500":/light/i.test(c)&&(E="200"),v=i.tinySDF=new _r.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:E})}let S=v.draw(String.fromCharCode(f));return{id:f,bitmap:new s.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}_r.loadGlyphRange=function(g,i,c,f){return s._(this,void 0,void 0,function*(){let d=256*i,v=d+255,S=f.transformRequest(c.replace("{fontstack}",g).replace("{range}",`${d}-${v}`),"Glyphs"),E=yield s.l(S,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${i}, ${d}-${v}`);let C={};for(let O of s.n(E.data))C[O.id]=O;return C})},_r.TinySDF=class{constructor({fontSize:g=24,buffer:i=3,radius:c=8,cutoff:f=.25,fontFamily:d="sans-serif",fontWeight:v="normal",fontStyle:S="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=c;let E=this.size=g+4*i,C=this._createCanvas(E),O=this.ctx=C.getContext("2d",{willReadFrequently:!0});O.font=`${S} ${v} ${g}px ${d}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(g){let i=document.createElement("canvas");return i.width=i.height=g,i}draw(g){let{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:d,actualBoundingBoxRight:v}=this.ctx.measureText(g),S=Math.ceil(c),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-d))),C=Math.min(this.size-this.buffer,S+Math.ceil(f)),O=E+2*this.buffer,R=C+2*this.buffer,D=Math.max(O*R,0),j=new Uint8ClampedArray(D),G={data:j,width:O,height:R,glyphWidth:E,glyphHeight:C,glyphTop:S,glyphLeft:0,glyphAdvance:i};if(E===0||C===0)return G;let{ctx:X,buffer:re,gridInner:ae,gridOuter:oe}=this;X.clearRect(re,re,E,C),X.fillText(g,re,re+S);let le=X.getImageData(re,re,E,C);oe.fill(yt,0,D),ae.fill(0,0,D);for(let Q=0;Q<C;Q++)for(let fe=0;fe<E;fe++){let ge=le.data[4*(Q*E+fe)+3]/255;if(ge===0)continue;let we=(Q+re)*O+fe+re;if(ge===1)oe[we]=0,ae[we]=yt;else{let Ce=.5-ge;oe[we]=Ce>0?Ce*Ce:0,ae[we]=Ce<0?Ce*Ce:0}}Ct(oe,0,0,O,R,O,this.f,this.v,this.z),Ct(ae,re,re,E,C,O,this.f,this.v,this.z);for(let Q=0;Q<D;Q++){let fe=Math.sqrt(oe[Q])-Math.sqrt(ae[Q]);j[Q]=Math.round(255-255*(fe/this.radius+this.cutoff))}return G}};class Ur{constructor(){this.specification=s.v.light.position}possiblyEvaluate(i,c){return s.x(i.expression.evaluate(c))}interpolate(i,c,f){return{x:s.y.number(i.x,c.x,f),y:s.y.number(i.y,c.y,f),z:s.y.number(i.z,c.z,f)}}}let Dr;class Pi extends s.E{constructor(i){super(),Dr=Dr||new s.q({anchor:new s.D(s.v.light.anchor),position:new Ur,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Dr),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(s.r,i,c))for(let f in i){let d=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,f){return(!f||f.validate!==!1)&&s.t(this,i.call(s.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}let si=new s.q({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Mi extends s.E{constructor(i){super(),this._transitionable=new s.T(si),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.z(0))}setSky(i,c={}){if(!this._validate(s.B,i,c)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let f in i){let d=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,f={}){return(f==null?void 0:f.validate)!==!1&&s.t(this,i.call(s.u,s.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class jo{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){let f=i.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,c)),this.dashEntry[f]}getDashRanges(i,c,f){let d=[],v=i.length%2==1?-i[i.length-1]*f:0,S=i[0]*f,E=!0;d.push({left:v,right:S,isDash:E,zeroLength:i[0]===0});let C=i[0];for(let O=1;O<i.length;O++){E=!E;let R=i[O];v=C*f,C+=R,S=C*f,d.push({left:v,right:S,isDash:E,zeroLength:R===0})}return d}addRoundDash(i,c,f){let d=c/2;for(let v=-f;v<=f;v++){let S=this.width*(this.nextRow+f+v),E=0,C=i[E];for(let O=0;O<this.width;O++){O/C.right>1&&(C=i[++E]);let R=Math.abs(O-C.left),D=Math.abs(O-C.right),j=Math.min(R,D),G,X=v/f*(d+1);if(C.isDash){let re=d-Math.abs(X);G=Math.sqrt(j*j+re*re)}else G=d-Math.sqrt(j*j+X*X);this.data[S+O]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(i){for(let E=i.length-1;E>=0;--E){let C=i[E],O=i[E+1];C.zeroLength?i.splice(E,1):O&&O.isDash===C.isDash&&(O.left=C.left,i.splice(E,1))}let c=i[0],f=i[i.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);let d=this.width*this.nextRow,v=0,S=i[v];for(let E=0;E<this.width;E++){E/S.right>1&&(S=i[++v]);let C=Math.abs(E-S.left),O=Math.abs(E-S.right),R=Math.min(C,O);this.data[d+E]=Math.max(0,Math.min(255,(S.isDash?R:-R)+128))}}addDash(i,c){let f=c?7:0,d=2*f+1;if(this.nextRow+d>this.height)return s.w("LineAtlas out of space"),null;let v=0;for(let E=0;E<i.length;E++)v+=i[E];if(v!==0){let E=this.width/v,C=this.getDashRanges(i,this.width,E);c?this.addRoundDash(C,E,f):this.addRegularDash(C)}let S={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:v};return this.nextRow+=d,this.dirty=!0,S}bind(i){let c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}let Oa="maplibre_preloaded_worker_pool";class ia{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<ia.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Oa]}numActive(){return Object.keys(this.active).length}}let Vo=Math.floor(T.hardwareConcurrency/2),Ji,Yi;function ro(){return Ji||(Ji=new ia),Ji}ia.workerCount=s.C(globalThis)?Math.max(Math.min(Vo,3),1):1;class ka{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=c;let f=this.workerPool.acquire(c);for(let d=0;d<f.length;d++){let v=new s.F(f[d],c);v.name=`Worker ${d}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c){let f=[];for(let d of this.actors)f.push(d.sendAsync({type:i,data:c}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,c){for(let f of this.actors)f.registerMessageHandler(i,c)}}function hs(){return Yi||(Yi=new ka(ro(),s.G),Yi.registerMessageHandler("GR",(g,i,c)=>s.m(i,c))),Yi}function na(g,i){let c=s.H();return s.J(c,c,[1,1,0]),s.K(c,c,[.5*g.width,.5*g.height,1]),s.L(c,c,g.calculatePosMatrix(i.toUnwrapped()))}function io(g,i,c,f,d,v){let S=function(D,j,G){if(D)for(let X of D){let re=j[X];if(re&&re.source===G&&re.type==="fill-extrusion")return!0}else for(let X in j){let re=j[X];if(re.source===G&&re.type==="fill-extrusion")return!0}return!1}(d&&d.layers,i,g.id),E=v.maxPitchScaleFactor(),C=g.tilesIn(f,E,S);C.sort(Ra);let O=[];for(let D of C)O.push({wrappedTileID:D.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(i,c,g._state,D.queryGeometry,D.cameraQueryGeometry,D.scale,d,v,E,na(g.transform,D.tileID))});let R=function(D){let j={},G={};for(let X of D){let re=X.queryResults,ae=X.wrappedTileID,oe=G[ae]=G[ae]||{};for(let le in re){let Q=re[le],fe=oe[le]=oe[le]||{},ge=j[le]=j[le]||[];for(let we of Q)fe[we.featureIndex]||(fe[we.featureIndex]=!0,ge.push(we))}}return j}(O);for(let D in R)R[D].forEach(j=>{let G=j.feature,X=g.getFeatureState(G.layer["source-layer"],G.id);G.source=G.layer.source,G.layer["source-layer"]&&(G.sourceLayer=G.layer["source-layer"]),G.state=X});return R}function Ra(g,i){let c=g.tileID,f=i.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}function $o(g,i,c){return s._(this,void 0,void 0,function*(){let f=g;if(g.url?f=(yield s.h(i.transformRequest(g.url,"Source"),c)).data:yield T.frameAsync(c),!f)return null;let d=s.M(s.e(f,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(d.vectorLayerIds=f.vector_layers.map(v=>v.id)),d})}class Ae{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof s.N?new s.N(i.lng,i.lat):s.N.convert(i),this}setSouthWest(i){return this._sw=i instanceof s.N?new s.N(i.lng,i.lat):s.N.convert(i),this}extend(i){let c=this._sw,f=this._ne,d,v;if(i instanceof s.N)d=i,v=i;else{if(!(i instanceof Ae))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Ae.convert(i)):this.extend(s.N.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(s.N.convert(i)):this;if(d=i._sw,v=i._ne,!d||!v)return this}return c||f?(c.lng=Math.min(d.lng,c.lng),c.lat=Math.min(d.lat,c.lat),f.lng=Math.max(v.lng,f.lng),f.lat=Math.max(v.lat,f.lat)):(this._sw=new s.N(d.lng,d.lat),this._ne=new s.N(v.lng,v.lat)),this}getCenter(){return new s.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.N(this.getWest(),this.getNorth())}getSouthEast(){return new s.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){let{lng:c,lat:f}=s.N.convert(i),d=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&d}static convert(i){return i instanceof Ae?i:i&&new Ae(i)}static fromLngLat(i,c=0){let f=360*c/40075017,d=f/Math.cos(Math.PI/180*i.lat);return new Ae(new s.N(i.lng-d,i.lat-f),new s.N(i.lng+d,i.lat+f))}adjustAntiMeridian(){let i=new s.N(this._sw.lng,this._sw.lat),c=new s.N(this._ne.lng,this._ne.lat);return new Ae(i,i.lng>c.lng?new s.N(c.lng+360,c.lat):c)}}class fs{constructor(i,c,f){this.bounds=Ae.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){let c=Math.pow(2,i.z),f=Math.floor(s.O(this.bounds.getWest())*c),d=Math.floor(s.Q(this.bounds.getNorth())*c),v=Math.ceil(s.O(this.bounds.getEast())*c),S=Math.ceil(s.Q(this.bounds.getSouth())*c);return i.x>=f&&i.x<v&&i.y>=d&&i.y<S}}class Yu extends s.E{constructor(i,c,f,d){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.M(c,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let i=yield $o(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(s.e(this,i),i.bounds&&(this.tileBounds=new fs(i.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new s.j(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(i){return s._(this,void 0,void 0,function*(){let c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(c,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((v,S)=>{i.reloadPromise={resolve:v,reject:S}})}else i.actor=this.dispatcher.getActor(),d="LT";i.abortController=new AbortController;try{let v=yield i.actor.sendAsync({type:d,data:f},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,v)}catch(v){if(delete i.abortController,i.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,c){if(c&&c.resourceTiming&&(i.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&i.setExpiryData(c),i.loadVectorData(c,this.map.painter),i.reloadPromise){let f=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(f.resolve).catch(f.reject)}}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ue extends s.E{constructor(i,c,f,d){super(),this.id=i,this.dispatcher=f,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},c),s.e(this,s.M(c,["url","scheme","tileSize"]))}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let i=yield $o(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(s.e(this,i),i.bounds&&(this.tileBounds=new fs(i.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new s.j(i))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return s.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return s._(this,void 0,void 0,function*(){let c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{let f=yield H.getImage(this.map._requestManager.transformRequest(c,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&i.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});let d=this.map.painter.context,v=d.gl,S=f.data;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new Ve(d,S,v.RGBA,{useMipmap:!0}),i.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(f){if(delete i.abortController,i.aborted)i.state="unloaded";else if(f)throw i.state="errored",f}})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class Se extends ue{constructor(i,c,f,d){super(i,c,f,d),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i){return s._(this,void 0,void 0,function*(){let c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(c,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{let d=yield H.getImage(f,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(d&&d.data){let v=d.data;this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&i.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let S=s.b(v)&&s.U()?v:yield this.readImageNow(v),E={type:this.type,uid:i.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();let C=yield i.actor.sendAsync({type:"LDT",data:E});i.dem=C,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(d){if(delete i.abortController,i.aborted)i.state="unloaded";else if(d)throw i.state="errored",d}})}readImageNow(i){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&s.V()){let c=i.width+2,f=i.height+2;try{return new s.R({width:c,height:f},(yield s.W(i,-1,-1,c,f)))}catch(d){}}return T.getImageData(i,1)})}_getNeighboringTiles(i){let c=i.canonical,f=Math.pow(2,c.z),d=(c.x-1+f)%f,v=c.x===0?i.wrap-1:i.wrap,S=(c.x+1+f)%f,E=c.x+1===f?i.wrap+1:i.wrap,C={};return C[new s.S(i.overscaledZ,v,c.z,d,c.y).key]={backfilled:!1},C[new s.S(i.overscaledZ,E,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(C[new s.S(i.overscaledZ,v,c.z,d,c.y-1).key]={backfilled:!1},C[new s.S(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},C[new s.S(i.overscaledZ,E,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<f&&(C[new s.S(i.overscaledZ,v,c.z,d,c.y+1).key]={backfilled:!1},C[new s.S(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},C[new s.S(i.overscaledZ,E,c.z,S,c.y+1).key]={backfilled:!1}),C}unloadTile(i){return s._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class Oe extends s.E{constructor(i,c,f,d){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(d),this._data=c.data,this._options=s.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;let v=s.X/this.tileSize;c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*v,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*v,extent:s.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:s.X,radius:(c.clusterRadius||50)*v,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return s._(this,void 0,void 0,function*(){let i=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,c,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:c,offset:f}})}_updateWorkerData(i){return s._(this,void 0,void 0,function*(){let c=s.e({type:this.type},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(T.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{let f=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let d=null;f.resourceTiming&&f.resourceTiming[this.id]&&(d=f.resourceTiming[this.id].slice(0));let v={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&s.e(v,{resourceTiming:d}),this.fire(new s.k("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(i){return s._(this,void 0,void 0,function*(){let c=i.actor?"RT":"LT";i.actor=this.actor;let f={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;let d=yield this.actor.sendAsync({type:c,data:f},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(d,this.map.painter,c==="RT")})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _t=s.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class et extends s.E{constructor(i,c,f,d){super(),this.id=i,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=c}load(i){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let c=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,i&&(this.coordinates=i),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new s.j(c))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;let c=i.map(s.Z.fromLngLat);this.tileID=function(d){let v=1/0,S=1/0,E=-1/0,C=-1/0;for(let j of d)v=Math.min(v,j.x),S=Math.min(S,j.y),E=Math.max(E,j.x),C=Math.max(C,j.y);let O=Math.max(E-v,C-S),R=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),D=Math.pow(2,R);return new s.a1(R,Math.floor((v+E)/2*D),Math.floor((S+C)/2*D))}(c),this.minzoom=this.maxzoom=this.tileID.z;let f=c.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new s.$,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,s.X,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,s.X),this._boundsArray.emplaceBack(f[2].x,f[2].y,s.X,s.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ve(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Je extends et{constructor(i,c,f,d){super(i,c,f,d),this.roundZoom=!0,this.type="video",this.options=c}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;let i=this.options;this.urls=[];for(let c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{let c=yield s.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new s.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){let c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new s.j(new s.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Ve(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class mt extends et{constructor(i,c,f,d){super(i,c,f,d),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(S=>typeof S!="number"))||this.fire(new s.j(new s.a2(`sources.${i}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new s.j(new s.a2(`sources.${i}`,null,"missing required property \"coordinates\""))),c.animate&&typeof c.animate!="boolean"&&this.fire(new s.j(new s.a2(`sources.${i}`,null,"optional \"animate\" property must be a boolean value"))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.a2(`sources.${i}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new s.j(new s.a2(`sources.${i}`,null,"missing required property \"canvas\""))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let c=this.map.painter.context,f=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ve(c,this.canvas,f.RGBA,{premultiply:!0});let d=!1;for(let v in this.tiles){let S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,d=!0)}d&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}let Qt={},ar=g=>{switch(g){case"geojson":return Oe;case"image":return et;case"raster":return ue;case"raster-dem":return Se;case"vector":return Yu;case"video":return Je;case"canvas":return mt;}return Qt[g]},Re="RTLPluginLoaded";class Qi extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=hs()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return s._(this,arguments,void 0,function*(c,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=T.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.k(Re))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Zr=null;function vi(){return Zr||(Zr=new Qi),Zr}class no{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=s.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){let c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(d,v){let S={};if(!v)return S;for(let E of d){let C=E.layerIds.map(O=>v.getLayer(O)).filter(Boolean);if(C.length!==0){E.layers=C,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(O=>C.filter(R=>R.id===O)[0]));for(let O of C)S[O.id]=E}}return S}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(let d in this.buckets){let v=this.buckets[d];if(v instanceof s.a6){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let d in this.buckets){let v=this.buckets[d];if(v instanceof s.a6&&v.hasRTLText){this.hasRTLText=!0,vi().lazyLoad();break}}this.queryPadding=0;for(let d in this.buckets){let v=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(d).queryRadius(v))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(let i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(let f in this.buckets){let d=this.buckets[f];d.uploadPending()&&d.upload(i)}let c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ve(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ve(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,f,d,v,S,E,C,O,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:v,scale:S,tileSize:this.tileSize,pixelPosMatrix:R,transform:C,params:E,queryPadding:this.queryPadding*O},i,c,f):{}}querySourceFeatures(i,c){let f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;let d=f.loadVTLayers(),v=c&&c.sourceLayer?c.sourceLayer:"",S=d._geojsonTileLayer||d[v];if(!S)return;let E=s.a7(c&&c.filter),{z:C,x:O,y:R}=this.tileID.canonical,D={z:C,x:O,y:R};for(let j=0;j<S.length;j++){let G=S.feature(j);if(E.needGeometry){let ae=s.a8(G,!0);if(!E.filter(new s.z(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!E.filter(new s.z(this.tileID.overscaledZ),G))continue;let X=f.getId(G,v),re=new s.a9(G,C,O,R,X);re.tile=D,i.push(re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){let c=this.expirationTime;if(i.cacheControl){let f=s.aa(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){let f=Date.now(),d=!1;if(this.expirationTime>f)d=!1;else if(c){if(this.expirationTime<c)d=!0;else{let v=this.expirationTime-c;v?this.expirationTime=f+Math.max(v,3e4):d=!0}}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;let f=this.latestFeatureIndex.loadVTLayers();for(let d in this.buckets){if(!c.style.hasLayer(d))continue;let v=this.buckets[d],S=v.layers[0].sourceLayer||"_geojsonTileLayer",E=f[S],C=i[S];if(!E||!C||Object.keys(C).length===0)continue;v.update(C,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});let O=c&&c.style&&c.style.getLayer(d);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<T.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=T.now()+i}setDependencies(i,c){let f={};for(let d of c)f[d]=!0;this.dependencies[i]=f}hasDependency(i,c){for(let f of i){let d=this.dependencies[f];if(d){for(let v of c)if(d[v])return!0}}return!1}}class Ne{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(let i in this.data)for(let c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,f){let d=i.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);let v={value:c,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout(()=>{this.remove(i,v)},f)),this.data[d].push(v),this.order.push(d),this.order.length>this.max){let S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){let c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){let c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;let f=i.wrapped().key,d=c===void 0?0:this.data[f].indexOf(c),v=this.data[f][d];return this.data[f].splice(d,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){let c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){let c=[];for(let f in this.data)for(let d of this.data[f])i(d.value)||c.push(d);for(let f of c)this.remove(f.value.tileID,f)}}class Ft{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,f){let d=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][d]=this.stateChanges[i][d]||{},s.e(this.stateChanges[i][d],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(let v in this.state[i])v!==d&&(this.deletedStates[i][v]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][d]===null){this.deletedStates[i][d]={};for(let v in this.state[i][d])f[v]||(this.deletedStates[i][d][v]=null)}else for(let v in f)this.deletedStates[i]&&this.deletedStates[i][d]&&this.deletedStates[i][d][v]===null&&delete this.deletedStates[i][d][v]}removeFeatureState(i,c,f){if(this.deletedStates[i]===null)return;let d=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&c!==void 0)this.deletedStates[i][d]!==null&&(this.deletedStates[i][d]=this.deletedStates[i][d]||{},this.deletedStates[i][d][f]=null);else if(c!==void 0){if(this.stateChanges[i]&&this.stateChanges[i][d])for(f in this.deletedStates[i][d]={},this.stateChanges[i][d])this.deletedStates[i][d][f]=null;else this.deletedStates[i][d]=null;}else this.deletedStates[i]=null}getState(i,c){let f=String(c),d=s.e({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){let v=this.deletedStates[i][c];if(v===null)return{};for(let S in v)delete d[S]}return d}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){let f={};for(let d in this.stateChanges){this.state[d]=this.state[d]||{};let v={};for(let S in this.stateChanges[d])this.state[d][S]||(this.state[d][S]={}),s.e(this.state[d][S],this.stateChanges[d][S]),v[S]=this.state[d][S];f[d]=v}for(let d in this.deletedStates){this.state[d]=this.state[d]||{};let v={};if(this.deletedStates[d]===null)for(let S in this.state[d])v[S]={},this.state[d][S]={};else for(let S in this.deletedStates[d]){if(this.deletedStates[d][S]===null)this.state[d][S]={};else for(let E of Object.keys(this.deletedStates[d][S]))delete this.state[d][S][E];v[S]=this.state[d][S]}f[d]=f[d]||{},s.e(f[d],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(let d in i)i[d].setFeatureState(f,c)}}class qt extends s.E{constructor(i,c,f){super(),this.id=i,this.dispatcher=f,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,v,S,E)=>{let C=new(ar(v.type))(d,v,S,E);if(C.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${C.id}`);return C})(i,c,f,this),this._tiles={},this._cache=new Ne(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ft,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let i in this._tiles){let c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c,f){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,c,f)}catch(d){i.state="errored",d.status!==404?this._source.fire(new s.j(d,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new s.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let c in this._tiles){let f=this._tiles[c];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(gn).map(i=>i.key)}getRenderableIds(i){let c=[];for(let f in this._tiles)this._isIdRenderable(f,i)&&c.push(this._tiles[f]);return i?c.sort((f,d)=>{let v=f.tileID,S=d.tileID,E=new s.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),C=new s.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-S.overscaledZ||C.y-E.y||C.x-E.x}).map(f=>f.tileID.key):c.map(f=>f.tileID).sort(gn).map(f=>f.key)}hasRenderableParent(i){let c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){return s._(this,void 0,void 0,function*(){let f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=c),yield this._loadTile(f,i,c))})}_tileLoaded(i,c,f){i.timeAdded=T.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){let c=this.getRenderableIds();for(let d=0;d<c.length;d++){let v=c[d];if(i.neighboringTiles&&i.neighboringTiles[v]){let S=this.getTileByID(v);f(i,S),f(S,i)}}function f(d,v){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let S=v.tileID.canonical.x-d.tileID.canonical.x,E=v.tileID.canonical.y-d.tileID.canonical.y,C=Math.pow(2,d.tileID.canonical.z),O=v.tileID.key;S===0&&E===0||Math.abs(E)>1||(Math.abs(S)>1&&(Math.abs(S+C)===1?S+=C:Math.abs(S-C)===1&&(S-=C)),v.dem&&d.dem&&(d.dem.backfillBorder(v.dem,S,E),d.neighboringTiles&&d.neighboringTiles[O]&&(d.neighboringTiles[O].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,f,d){for(let v in this._tiles){let S=this._tiles[v];if(d[v]||!S.hasData()||S.tileID.overscaledZ<=c||S.tileID.overscaledZ>f)continue;let E=S.tileID;for(;S&&S.tileID.overscaledZ>c+1;){let O=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[O.key],S&&S.hasData()&&(E=O)}let C=E;for(;C.overscaledZ>c;)if(C=C.scaledTo(C.overscaledZ-1),i[C.key]){d[E.key]=E;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){let f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=c?f:null}for(let f=i.overscaledZ-1;f>=c;f--){let d=i.scaledTo(f),v=this._getLoadedTile(d);if(v)return v}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){let c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){let c=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,d=Math.floor(c*f*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(v)}handleWrapJump(i){let c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){let f={};for(let d in this._tiles){let v=this._tiles[d];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+c),f[v.tileID.key]=v}this._tiles=f;for(let d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(let d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(i,c,f,d,v,S){let E={},C={},O=Object.keys(i),R=T.now();for(let D of O){let j=i[D],G=this._tiles[D];if(!G||G.fadeEndTime!==0&&G.fadeEndTime<=R)continue;let X=this.findLoadedParent(j,c),re=this.findLoadedSibling(j),ae=X||re||null;ae&&(this._addTile(ae.tileID),E[ae.tileID.key]=ae.tileID),C[D]=j}this._retainLoadedChildren(C,d,f,i);for(let D in E)i[D]||(this._coveredTiles[D]=!0,i[D]=E[D]);if(S){let D={},j={};for(let G of v)this._tiles[G.key].hasData()?D[G.key]=G:j[G.key]=G;for(let G in j){let X=j[G].children(this._source.maxzoom);this._tiles[X[0].key]&&this._tiles[X[1].key]&&this._tiles[X[2].key]&&this._tiles[X[3].key]&&(D[X[0].key]=i[X[0].key]=X[0],D[X[1].key]=i[X[1].key]=X[1],D[X[2].key]=i[X[2].key]=X[2],D[X[3].key]=i[X[3].key]=X[3],delete j[G])}for(let G in j){let X=j[G],re=this.findLoadedParent(X,this._source.minzoom),ae=this.findLoadedSibling(X),oe=re||ae||null;if(oe){D[oe.tileID.key]=i[oe.tileID.key]=oe.tileID;for(let le in D)D[le].isChildOf(oe.tileID)&&delete D[le]}}for(let G in this._tiles)D[G]||(this._coveredTiles[G]=!0)}}update(i,c){if(!this._sourceLoaded||this._paused)return;let f;this.transform=i,this.terrain=c,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new s.S(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(f=f.filter(R=>this._source.hasTile(R)))):f=[];let d=i.coveringZoomLevel(this._source),v=Math.max(d-qt.maxOverzooming,this._source.minzoom),S=Math.max(d+qt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let R={};for(let D of f)if(D.canonical.z>this._source.minzoom){let j=D.scaledTo(D.canonical.z-1);R[j.key]=j;let G=D.scaledTo(Math.max(this._source.minzoom,Math.min(D.canonical.z,5)));R[G.key]=G}f=f.concat(Object.values(R))}let E=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let C=this._updateRetainedTiles(f,d);Da(this._source.type)&&this._updateCoveredAndRetainedTiles(C,v,S,d,f,c);for(let R in C)this._tiles[R].clearFadeHold();let O=s.ab(this._tiles,C);for(let R of O){let D=this._tiles[R];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){var f;let d={},v={},S=Math.max(c-qt.maxOverzooming,this._source.minzoom),E=Math.max(c+qt.maxUnderzooming,this._source.minzoom),C={};for(let O of i){let R=this._addTile(O);d[O.key]=O,R.hasData()||c<this._source.maxzoom&&(C[O.key]=O)}this._retainLoadedChildren(C,c,E,d);for(let O of i){let R=this._tiles[O.key];if(R.hasData())continue;if(c+1>this._source.maxzoom){let j=O.children(this._source.maxzoom)[0],G=this.getTile(j);if(G&&G.hasData()){d[j.key]=j;continue}}else{let j=O.children(this._source.maxzoom);if(d[j[0].key]&&d[j[1].key]&&d[j[2].key]&&d[j[3].key])continue}let D=R.wasRequested();for(let j=O.overscaledZ-1;j>=S;--j){let G=O.scaledTo(j);if(v[G.key])break;if(v[G.key]=!0,R=this.getTile(G),!R&&D&&(R=this._addTile(G)),R){let X=R.hasData();if((X||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||D)&&(d[G.key]=G),D=R.wasRequested(),X)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let i in this._tiles){let c=[],f,d=this._tiles[i].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){f=this._loadedParentTiles[d.key];break}c.push(d.key);let v=d.scaledTo(d.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;d=v}for(let v of c)this._loadedParentTiles[v]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let i in this._tiles){let c=this._tiles[i].tileID,f=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=f}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));let f=c;return c||(c=new no(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,i.key,c.state)),c.uses++,this._tiles[i.key]=c,f||this._source.fire(new s.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);let f=c.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){let c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(i){let c=i.sourceDataType;i.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,f){let d=[],v=this.transform;if(!v)return d;let S=f?v.getCameraQueryGeometry(i):i,E=i.map(X=>v.pointCoordinate(X,this.terrain)),C=S.map(X=>v.pointCoordinate(X,this.terrain)),O=this.getIds(),R=1/0,D=1/0,j=-1/0,G=-1/0;for(let X of C)R=Math.min(R,X.x),D=Math.min(D,X.y),j=Math.max(j,X.x),G=Math.max(G,X.y);for(let X=0;X<O.length;X++){let re=this._tiles[O[X]];if(re.holdingForFade())continue;let ae=re.tileID,oe=Math.pow(2,v.zoom-re.tileID.overscaledZ),le=c*re.queryPadding*s.X/re.tileSize/oe,Q=[ae.getTilePoint(new s.Z(R,D)),ae.getTilePoint(new s.Z(j,G))];if(Q[0].x-le<s.X&&Q[0].y-le<s.X&&Q[1].x+le>=0&&Q[1].y+le>=0){let fe=E.map(we=>ae.getTilePoint(we)),ge=C.map(we=>ae.getTilePoint(we));d.push({tile:re,tileID:ae,queryGeometry:fe,cameraQueryGeometry:ge,scale:oe})}}return d}getVisibleCoordinates(i){let c=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(let f of c)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Da(this._source.type)){let i=T.now();for(let c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,f){this._state.updateState(i=i||"_geojsonTileLayer",c,f)}removeFeatureState(i,c,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,f)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,f){let d=this._tiles[i];d&&d.setDependencies(c,f)}reloadTilesForDependencies(i,c){for(let f in this._tiles)this._tiles[f].hasDependency(i,c)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,c))}}function gn(g,i){let c=Math.abs(2*g.wrap)-+(g.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return g.overscaledZ-i.overscaledZ||f-c||i.canonical.y-g.canonical.y||i.canonical.x-g.canonical.x}function Da(g){return g==="raster"||g==="image"||g==="video"}qt.maxOverzooming=10,qt.maxUnderzooming=3;class Ot{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.ac(i,0,1);let c=1,f=this._distances[c],d=i*this.paddedLength+this.padding;for(;f<d&&c<this._distances.length;)f=this._distances[++c];let v=c-1,S=this._distances[v],E=f-S,C=E>0?(d-S)/E:0;return this.points[v].mult(1-C).add(this.points[c].mult(C))}}function ao(g,i){let c=!0;return g==="always"||g!=="never"&&i!=="never"||(c=!1),c}class Wo{constructor(i,c,f){let d=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(c/f);for(let S=0;S<this.xCellCount*this.yCellCount;S++)d.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,f,d,v){this._forEachCell(c,f,d,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(d),this.bboxes.push(v)}insertCircle(i,c,f,d){this._forEachCell(c-d,f-d,c+d,f+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(f),this.circles.push(d)}_insertBoxCell(i,c,f,d,v,S){this.boxCells[v].push(S)}_insertCircleCell(i,c,f,d,v,S){this.circleCells[v].push(S)}_query(i,c,f,d,v,S,E){if(f<0||i>this.width||d<0||c>this.height)return[];let C=[];if(i<=0&&c<=0&&this.width<=f&&this.height<=d){if(v)return[{key:null,x1:i,y1:c,x2:f,y2:d}];for(let O=0;O<this.boxKeys.length;O++)C.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){let R=this.circles[3*O],D=this.circles[3*O+1],j=this.circles[3*O+2];C.push({key:this.circleKeys[O],x1:R-j,y1:D-j,x2:R+j,y2:D+j})}}else this._forEachCell(i,c,f,d,this._queryCell,C,{hitTest:v,overlapMode:S,seenUids:{box:{},circle:{}}},E);return C}query(i,c,f,d){return this._query(i,c,f,d,!1,null)}hitTest(i,c,f,d,v,S){return this._query(i,c,f,d,!0,v,S).length>0}hitTestCircle(i,c,f,d,v){let S=i-f,E=i+f,C=c-f,O=c+f;if(E<0||S>this.width||O<0||C>this.height)return!1;let R=[];return this._forEachCell(S,C,E,O,this._queryCellCircle,R,{hitTest:!0,overlapMode:d,circle:{x:i,y:c,radius:f},seenUids:{box:{},circle:{}}},v),R.length>0}_queryCell(i,c,f,d,v,S,E,C){let{seenUids:O,hitTest:R,overlapMode:D}=E,j=this.boxCells[v];if(j!==null){let X=this.bboxes;for(let re of j)if(!O.box[re]){O.box[re]=!0;let ae=4*re,oe=this.boxKeys[re];if(i<=X[ae+2]&&c<=X[ae+3]&&f>=X[ae+0]&&d>=X[ae+1]&&(!C||C(oe))&&(!R||!ao(D,oe.overlapMode))&&(S.push({key:oe,x1:X[ae],y1:X[ae+1],x2:X[ae+2],y2:X[ae+3]}),R))return!0}}let G=this.circleCells[v];if(G!==null){let X=this.circles;for(let re of G)if(!O.circle[re]){O.circle[re]=!0;let ae=3*re,oe=this.circleKeys[re];if(this._circleAndRectCollide(X[ae],X[ae+1],X[ae+2],i,c,f,d)&&(!C||C(oe))&&(!R||!ao(D,oe.overlapMode))){let le=X[ae],Q=X[ae+1],fe=X[ae+2];if(S.push({key:oe,x1:le-fe,y1:Q-fe,x2:le+fe,y2:Q+fe}),R)return!0}}}return!1}_queryCellCircle(i,c,f,d,v,S,E,C){let{circle:O,seenUids:R,overlapMode:D}=E,j=this.boxCells[v];if(j!==null){let X=this.bboxes;for(let re of j)if(!R.box[re]){R.box[re]=!0;let ae=4*re,oe=this.boxKeys[re];if(this._circleAndRectCollide(O.x,O.y,O.radius,X[ae+0],X[ae+1],X[ae+2],X[ae+3])&&(!C||C(oe))&&!ao(D,oe.overlapMode))return S.push(!0),!0}}let G=this.circleCells[v];if(G!==null){let X=this.circles;for(let re of G)if(!R.circle[re]){R.circle[re]=!0;let ae=3*re,oe=this.circleKeys[re];if(this._circlesCollide(X[ae],X[ae+1],X[ae+2],O.x,O.y,O.radius)&&(!C||C(oe))&&!ao(D,oe.overlapMode))return S.push(!0),!0}}}_forEachCell(i,c,f,d,v,S,E,C){let O=this._convertToXCellCoord(i),R=this._convertToYCellCoord(c),D=this._convertToXCellCoord(f),j=this._convertToYCellCoord(d);for(let G=O;G<=D;G++)for(let X=R;X<=j;X++)if(v.call(this,i,c,f,d,this.xCellCount*X+G,S,E,C))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,f,d,v,S){let E=d-i,C=v-c,O=f+S;return O*O>E*E+C*C}_circleAndRectCollide(i,c,f,d,v,S,E){let C=(S-d)/2,O=Math.abs(i-(d+C));if(O>C+f)return!1;let R=(E-v)/2,D=Math.abs(c-(v+R));if(D>R+f)return!1;if(O<=C||D<=R)return!0;let j=O-C,G=D-R;return j*j+G*G<=f*f}}function ds(g,i,c,f,d){let v=s.H();return i?(s.K(v,v,[1/d,1/d,1]),c||s.ad(v,v,f.angle)):s.L(v,f.labelPlaneMatrix,g),v}function oo(g,i,c,f,d){if(i){let v=s.ae(g);return s.K(v,v,[d,d,1]),c||s.ad(v,v,-f.angle),v}return f.glCoordMatrix}function ie(g,i,c,f){let d;f?(d=[g,i,f(g,i),1],s.af(d,d,c)):(d=[g,i,0,1],er(d,d,c));let v=d[3];return{point:new s.P(d[0]/v,d[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function B(g,i){return .5+g/i*.5}function N(g,i){return g.x>=-i[0]&&g.x<=i[0]&&g.y>=-i[1]&&g.y<=i[1]}function K(g,i,c,f,d,v,S,E,C,O,R,D,j,G,X){let re=f?g.textSizeData:g.iconSizeData,ae=s.ag(re,c.transform.zoom),oe=[256/c.width*2+1,256/c.height*2+1],le=f?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;le.clear();let Q=g.lineVertexArray,fe=f?g.text.placedSymbolArray:g.icon.placedSymbolArray,ge=c.transform.width/c.transform.height,we=!1;for(let Ce=0;Ce<fe.length;Ce++){let Fe=fe.get(Ce);if(Fe.hidden||Fe.writingMode===s.ah.vertical&&!we){xt(Fe.numGlyphs,le);continue}we=!1;let Ke=ie(Fe.anchorX,Fe.anchorY,i,X);if(!N(Ke.point,oe)){xt(Fe.numGlyphs,le);continue}let tt=B(c.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),je=s.ai(re,ae,Fe),Ue=S?je/tt:je*tt,ut={getElevation:X,labelPlaneMatrix:d,lineVertexArray:Q,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:O,tileAnchorPoint:new s.P(Fe.anchorX,Fe.anchorY),unwrappedTileID:R,width:D,height:j,translation:G},Pt=me(ut,Fe,Ue,!1,E,i,v,g.glyphOffsetArray,le,ge,C);we=Pt.useVertical,(Pt.notEnoughRoom||we||Pt.needsFlipping&&me(ut,Fe,Ue,!0,E,i,v,g.glyphOffsetArray,le,ge,C).notEnoughRoom)&&xt(Fe.numGlyphs,le)}f?g.text.dynamicLayoutVertexBuffer.updateData(le):g.icon.dynamicLayoutVertexBuffer.updateData(le)}function te(g,i,c,f,d,v,S,E){let C=v.glyphStartIndex+v.numGlyphs,O=v.lineStartIndex,R=v.lineStartIndex+v.lineLength,D=i.getoffsetX(v.glyphStartIndex),j=i.getoffsetX(C-1),G=Be(g*D,c,f,d,v.segment,O,R,E,S);if(!G)return null;let X=Be(g*j,c,f,d,v.segment,O,R,E,S);return X?E.projectionCache.anyProjectionOccluded?null:{first:G,last:X}:null}function he(g,i,c,f){return g===s.ah.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*f?{useVertical:!0}:(g===s.ah.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function me(g,i,c,f,d,v,S,E,C,O,R){let D=c/24,j=i.lineOffsetX*D,G=i.lineOffsetY*D,X;if(i.numGlyphs>1){let re=i.glyphStartIndex+i.numGlyphs,ae=i.lineStartIndex,oe=i.lineStartIndex+i.lineLength,le=te(D,E,j,G,f,i,R,g);if(!le)return{notEnoughRoom:!0};let Q=ie(le.first.point.x,le.first.point.y,S,g.getElevation).point,fe=ie(le.last.point.x,le.last.point.y,S,g.getElevation).point;if(d&&!f){let ge=he(i.writingMode,Q,fe,O);if(ge)return ge}X=[le.first];for(let ge=i.glyphStartIndex+1;ge<re-1;ge++)X.push(Be(D*E.getoffsetX(ge),j,G,f,i.segment,ae,oe,g,R));X.push(le.last)}else{if(d&&!f){let ae=ie(g.tileAnchorPoint.x,g.tileAnchorPoint.y,v,g.getElevation).point,oe=i.lineStartIndex+i.segment+1,le=new s.P(g.lineVertexArray.getx(oe),g.lineVertexArray.gety(oe)),Q=ie(le.x,le.y,v,g.getElevation),fe=Q.signedDistanceFromCamera>0?Q.point:function(we,Ce,Fe,Ke,tt,je){return _e(we,Ce,Fe,1,tt,je)}(g.tileAnchorPoint,le,ae,0,v,g),ge=he(i.writingMode,ae,fe,O);if(ge)return ge}let re=Be(D*E.getoffsetX(i.glyphStartIndex),j,G,f,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,g,R);if(!re||g.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};X=[re]}for(let re of X)s.aj(C,re.point,re.angle);return{}}function _e(g,i,c,f,d,v){let S=g.add(g.sub(i)._unit()),E=d!==void 0?ie(S.x,S.y,d,v.getElevation).point:Te(S.x,S.y,v).point,C=c.sub(E);return c.add(C._mult(f/C.mag()))}function se(g,i,c){let f=i.projectionCache;if(f.projections[g])return f.projections[g];let d=new s.P(i.lineVertexArray.getx(g),i.lineVertexArray.gety(g)),v=Te(d.x,d.y,i);if(v.signedDistanceFromCamera>0)return f.projections[g]=v.point,f.anyProjectionOccluded=f.anyProjectionOccluded||v.isOccluded,v.point;let S=g-c.direction;return function(E,C,O,R,D){return _e(E,C,O,R,void 0,D)}(c.distanceFromAnchor===0?i.tileAnchorPoint:new s.P(i.lineVertexArray.getx(S),i.lineVertexArray.gety(S)),d,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,i)}function Te(g,i,c){let f=g+c.translation[0],d=i+c.translation[1],v;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(v=c.projection.projectTileCoordinates(f,d,c.unwrappedTileID,c.getElevation),v.point.x=(.5*v.point.x+.5)*c.width,v.point.y=(.5*-v.point.y+.5)*c.height):(v=ie(f,d,c.labelPlaneMatrix,c.getElevation),v.isOccluded=!1),v}function Me(g,i,c){return g._unit()._perp()._mult(i*c)}function qe(g,i,c,f,d,v,S,E,C){if(E.projectionCache.offsets[g])return E.projectionCache.offsets[g];let O=c.add(i);if(g+C.direction<f||g+C.direction>=d)return E.projectionCache.offsets[g]=O,O;let R=se(g+C.direction,E,C),D=Me(R.sub(c),S,C.direction),j=c.add(D),G=R.add(D);return E.projectionCache.offsets[g]=s.ak(v,O,j,G)||O,E.projectionCache.offsets[g]}function Be(g,i,c,f,d,v,S,E,C){let O=f?g-i:g+i,R=O>0?1:-1,D=0;f&&(R*=-1,D=Math.PI),R<0&&(D+=Math.PI);let j,G=R>0?v+d:v+d+1;E.projectionCache.cachedAnchorPoint?j=E.projectionCache.cachedAnchorPoint:(j=Te(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=j);let X,re,ae=j,oe=j,le=0,Q=0,fe=Math.abs(O),ge=[],we;for(;le+Q<=fe;){if(G+=R,G<v||G>=S)return null;le+=Q,oe=ae,re=X;let Ke={absOffsetX:fe,direction:R,distanceFromAnchor:le,previousVertex:oe};if(ae=se(G,E,Ke),c===0)ge.push(oe),we=ae.sub(oe);else{let tt,je=ae.sub(oe);tt=je.mag()===0?Me(se(G+R,E,Ke).sub(ae),c,R):Me(je,c,R),re||(re=oe.add(tt)),X=qe(G,tt,ae,v,S,re,c,E,Ke),ge.push(re),we=X.sub(re)}Q=we.mag()}let Ce=we._mult((fe-le)/Q)._add(re||oe),Fe=D+Math.atan2(ae.y-oe.y,ae.x-oe.x);return ge.push(Ce),{point:Ce,angle:C?Fe:0,path:ge}}let dt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xt(g,i){for(let c=0;c<g;c++){let f=i.length;i.resize(f+4),i.float32.set(dt,3*f)}}function er(g,i,c){let f=i[0],d=i[1];return g[0]=c[0]*f+c[4]*d+c[12],g[1]=c[1]*f+c[5]*d+c[13],g[3]=c[3]*f+c[7]*d+c[15],g}let Dt=100;class tr{constructor(i,c,f=new Wo(i.width+200,i.height+200,25),d=new Wo(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=c,this.grid=f,this.ignoredGrid=d,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Dt,this.screenBottomBoundary=i.height+Dt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,f,d,v,S,E,C,O,R,D){let j=i.anchorPointX+C[0],G=i.anchorPointY+C[1],X=this.projectAndGetPerspectiveRatio(d,j,G,v,R),re=f*X.perspectiveRatio,ae;if(S||E)ae=this._projectCollisionBox(i,re,d,v,S,E,C,X,R,D);else{let ge=X.point.x+(D?D.x*re:0),we=X.point.y+(D?D.y*re:0);ae={allPointsOccluded:!1,box:[ge+i.x1*re,we+i.y1*re,ge+i.x2*re,we+i.y2*re]}}let[oe,le,Q,fe]=ae.box;return this.mapProjection.useSpecialProjectionForSymbols&&(S?ae.allPointsOccluded:this.mapProjection.isOccluded(j,G,v))||X.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(oe,le,Q,fe)||c!=="always"&&this.grid.hitTest(oe,le,Q,fe,c,O)?{box:[oe,le,Q,fe],placeable:!1,offscreen:!1}:{box:[oe,le,Q,fe],placeable:!0,offscreen:this.isOffscreen(oe,le,Q,fe)}}placeCollisionCircles(i,c,f,d,v,S,E,C,O,R,D,j,G,X,re,ae){let oe=[],le=new s.P(c.anchorX,c.anchorY),Q=this.getPerspectiveRatio(S,le.x,le.y,E,ae),fe=(D?v/Q:v*Q)/s.ap,ge={getElevation:ae,labelPlaneMatrix:C,lineVertexArray:f,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:le,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:re},we=te(fe,d,c.lineOffsetX*fe,c.lineOffsetY*fe,!1,c,!1,ge),Ce=!1,Fe=!1,Ke=!0;if(we){let tt=.5*G*Q+X,je=new s.P(-100,-100),Ue=new s.P(this.screenRightBoundary,this.screenBottomBoundary),ut=new Ot,Pt=we.first,$e=we.last,Xe=[];for(let Bt=Pt.path.length-1;Bt>=1;Bt--)Xe.push(Pt.path[Bt]);for(let Bt=1;Bt<$e.path.length;Bt++)Xe.push($e.path[Bt]);let Tt=2.5*tt;if(O){let Bt=this.projectPathToScreenSpace(Xe,ge,O);Xe=Bt.some(Kt=>Kt.signedDistanceFromCamera<=0)?[]:Bt.map(Kt=>Kt.point)}let Tr=[];if(Xe.length>0){let Bt=Xe[0].clone(),Kt=Xe[0].clone();for(let Ir=1;Ir<Xe.length;Ir++)Bt.x=Math.min(Bt.x,Xe[Ir].x),Bt.y=Math.min(Bt.y,Xe[Ir].y),Kt.x=Math.max(Kt.x,Xe[Ir].x),Kt.y=Math.max(Kt.y,Xe[Ir].y);Tr=Bt.x>=je.x&&Kt.x<=Ue.x&&Bt.y>=je.y&&Kt.y<=Ue.y?[Xe]:Kt.x<je.x||Bt.x>Ue.x||Kt.y<je.y||Bt.y>Ue.y?[]:s.al([Xe],je.x,je.y,Ue.x,Ue.y)}for(let Bt of Tr){ut.reset(Bt,.25*tt);let Kt=0;Kt=ut.length<=.5*tt?1:Math.ceil(ut.paddedLength/Tt)+1;for(let Ir=0;Ir<Kt;Ir++){let Bi=Ir/Math.max(Kt-1,1),Ua=ut.lerp(Bi),Cr=Ua.x+Dt,xn=Ua.y+Dt;oe.push(Cr,xn,tt,0);let tn=Cr-tt,Ui=xn-tt,rn=Cr+tt,co=xn+tt;if(Ke=Ke&&this.isOffscreen(tn,Ui,rn,co),Fe=Fe||this.isInsideGrid(tn,Ui,rn,co),i!=="always"&&this.grid.hitTestCircle(Cr,xn,tt,i,j)&&(Ce=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!R&&Ce||!Fe||Q<this.perspectiveRatioCutoff?[]:oe,offscreen:Ke,collisionDetected:Ce}}projectPathToScreenSpace(i,c,f){return i.map(d=>ie(d.x,d.y,f,c.getElevation))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let c=[],f=1/0,d=1/0,v=-1/0,S=-1/0;for(let R of i){let D=new s.P(R.x+Dt,R.y+Dt);f=Math.min(f,D.x),d=Math.min(d,D.y),v=Math.max(v,D.x),S=Math.max(S,D.y),c.push(D)}let E=this.grid.query(f,d,v,S).concat(this.ignoredGrid.query(f,d,v,S)),C={},O={};for(let R of E){let D=R.key;if(C[D.bucketInstanceId]===void 0&&(C[D.bucketInstanceId]={}),C[D.bucketInstanceId][D.featureIndex])continue;let j=[new s.P(R.x1,R.y1),new s.P(R.x2,R.y1),new s.P(R.x2,R.y2),new s.P(R.x1,R.y2)];s.am(c,j)&&(C[D.bucketInstanceId][D.featureIndex]=!0,O[D.bucketInstanceId]===void 0&&(O[D.bucketInstanceId]=[]),O[D.bucketInstanceId].push(D.featureIndex))}return O}insertCollisionBox(i,c,f,d,v,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:v,collisionGroupID:S,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,f,d,v,S){let E=f?this.ignoredGrid:this.grid,C={bucketInstanceId:d,featureIndex:v,collisionGroupID:S,overlapMode:c};for(let O=0;O<i.length;O+=4)E.insertCircle(C,i[O],i[O+1],i[O+2])}projectAndGetPerspectiveRatio(i,c,f,d,v){let S;v?(S=[c,f,v(c,f),1],s.af(S,S,i)):(S=[c,f,0,1],er(S,S,i));let E=S[3];return{point:new s.P((S[0]/E+1)/2*this.transform.width+Dt,(-S[1]/E+1)/2*this.transform.height+Dt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}getPerspectiveRatio(i,c,f,d,v){let S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,f,d,v):ie(c,f,i,v);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(i,c,f,d){return f<Dt||i>=this.screenRightBoundary||d<Dt||c>this.screenBottomBoundary}isInsideGrid(i,c,f,d){return f>=0&&i<this.gridRightBoundary&&d>=0&&c<this.gridBottomBoundary}getViewportMatrix(){let i=s.an([]);return s.J(i,i,[-100,-100,0]),i}_projectCollisionBox(i,c,f,d,v,S,E,C,O,R){let D=new s.P(1,0),j=new s.P(0,1),G=new s.P(i.anchorPointX+E[0],i.anchorPointY+E[1]);if(S&&!v){let Ke=this.projectAndGetPerspectiveRatio(f,G.x+1,G.y,d,O).point.sub(C.point).unit(),tt=Math.atan(Ke.y/Ke.x)+(Ke.x<0?Math.PI:0),je=Math.sin(tt),Ue=Math.cos(tt);D=new s.P(Ue,je),j=new s.P(-je,Ue)}else if(!S&&v){let Ke=-this.transform.angle,tt=Math.sin(Ke),je=Math.cos(Ke);D=new s.P(je,tt),j=new s.P(-tt,je)}let X=C.point,re=c;if(v){X=G;let Ke=this.transform.zoom-Math.floor(this.transform.zoom);re=Math.pow(2,-Ke),re*=this.mapProjection.getPitchedTextCorrection(this.transform,G,d),R||(re*=s.ac(.5+C.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}R&&(X=X.add(D.mult(R.x*re)).add(j.mult(R.y*re)));let ae=i.x1*re,oe=i.x2*re,le=(ae+oe)/2,Q=i.y1*re,fe=i.y2*re,ge=(Q+fe)/2,we=[{offsetX:ae,offsetY:Q},{offsetX:le,offsetY:Q},{offsetX:oe,offsetY:Q},{offsetX:oe,offsetY:ge},{offsetX:oe,offsetY:fe},{offsetX:le,offsetY:fe},{offsetX:ae,offsetY:fe},{offsetX:ae,offsetY:ge}],Ce=[];for(let{offsetX:Ke,offsetY:tt}of we)Ce.push(new s.P(X.x+D.x*Ke+j.x*tt,X.y+D.y*Ke+j.y*tt));let Fe=!1;if(v){let Ke=Ce.map(tt=>this.projectAndGetPerspectiveRatio(f,tt.x,tt.y,d,O));Fe=Ke.some(tt=>!tt.isOccluded),Ce=Ke.map(tt=>tt.point)}else Fe=!0;return{box:s.ao(Ce),allPointsOccluded:!Fe}}}function Gt(g,i,c){return i*(s.X/(g.tileSize*Math.pow(2,c-g.tileID.overscaledZ)))}class ui{constructor(i,c,f,d){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):d&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class jr{constructor(i,c,f,d,v){this.text=new ui(i?i.text:null,c,f,v),this.icon=new ui(i?i.icon:null,c,d,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class jt{constructor(i,c,f){this.text=i,this.icon=c,this.skipFade=f}}class hr{constructor(){this.invProjMatrix=s.H(),this.viewportMatrix=s.H(),this.circles=[]}}class Rr{constructor(i,c,f,d,v){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=d,this.tileID=v}}class qi{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){let c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[i]}}function Oi(g,i,c,f,d){let{horizontalAlign:v,verticalAlign:S}=s.au(g);return new s.P(-(v-.5)*i+f[0]*d,-(S-.5)*c+f[1]*d)}class en{constructor(i,c,f,d,v,S){this.transform=i.clone(),this.terrain=f,this.collisionIndex=new tr(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new qi(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){let c=this.terrain;return c?(f,d)=>c.getElevation(i,f,d):null}getBucketParts(i,c,f,d){let v=f.getBucket(c),S=f.latestFeatureIndex;if(!v||!S||c.id!==v.layerIds[0])return;let E=f.collisionBoxArray,C=v.layers[0].layout,O=v.layers[0].paint,R=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),D=f.tileSize/s.X,j=f.tileID.toUnwrapped(),G=this.transform.calculatePosMatrix(j),X=C.get("text-pitch-alignment")==="map",re=C.get("text-rotation-alignment")==="map",ae=Gt(f,1,this.transform.zoom),oe=this.collisionIndex.mapProjection.translatePosition(this.transform,f,O.get("text-translate"),O.get("text-translate-anchor")),le=this.collisionIndex.mapProjection.translatePosition(this.transform,f,O.get("icon-translate"),O.get("icon-translate-anchor")),Q=ds(G,X,re,this.transform,ae),fe=null;if(X){let we=oo(G,X,re,this.transform,ae);fe=s.L([],this.transform.labelPlaneMatrix,we)}this.retainedQueryData[v.bucketInstanceId]=new Rr(v.bucketInstanceId,S,v.sourceLayerIndex,v.index,f.tileID);let ge={bucket:v,layout:C,translationText:oe,translationIcon:le,posMatrix:G,unwrappedTileID:j,textLabelPlaneMatrix:Q,labelToScreenMatrix:fe,scale:R,textPixelRatio:D,holdingForFade:f.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:s.ag(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(d)for(let we of v.sortKeyRanges){let{sortKey:Ce,symbolInstanceStart:Fe,symbolInstanceEnd:Ke}=we;i.push({sortKey:Ce,symbolInstanceStart:Fe,symbolInstanceEnd:Ke,parameters:ge})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:ge})}attemptAnchorPlacement(i,c,f,d,v,S,E,C,O,R,D,j,G,X,re,ae,oe,le,Q){let fe=s.aq[i.textAnchor],ge=[i.textOffset0,i.textOffset1],we=Oi(fe,f,d,ge,v),Ce=this.collisionIndex.placeCollisionBox(c,j,C,O,R,E,S,ae,D.predicate,Q,we);if((!le||this.collisionIndex.placeCollisionBox(le,j,C,O,R,E,S,oe,D.predicate,Q,we).placeable)&&Ce.placeable){let Fe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Fe=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:ge,width:f,height:d,anchor:fe,textBoxScale:v,prevAnchor:Fe},this.markUsedJustification(X,fe,G,re),X.allowVerticalPlacement&&(this.markUsedOrientation(X,re,G),this.placedOrientations[G.crossTileID]=re),{shift:we,placedGlyphBoxes:Ce}}}placeLayerBucketPart(i,c,f){let{bucket:d,layout:v,translationText:S,translationIcon:E,posMatrix:C,unwrappedTileID:O,textLabelPlaneMatrix:R,labelToScreenMatrix:D,textPixelRatio:j,holdingForFade:G,collisionBoxArray:X,partiallyEvaluatedTextSize:re,collisionGroup:ae}=i.parameters,oe=v.get("text-optional"),le=v.get("icon-optional"),Q=s.ar(v,"text-overlap","text-allow-overlap"),fe=Q==="always",ge=s.ar(v,"icon-overlap","icon-allow-overlap"),we=ge==="always",Ce=v.get("text-rotation-alignment")==="map",Fe=v.get("text-pitch-alignment")==="map",Ke=v.get("icon-text-fit")!=="none",tt=v.get("symbol-z-order")==="viewport-y",je=fe&&(we||!d.hasIconData()||le),Ue=we&&(fe||!d.hasTextData()||oe);!d.collisionArrays&&X&&d.deserializeCollisionBoxes(X);let ut=this._getTerrainElevationFunc(this.retainedQueryData[d.bucketInstanceId].tileID),Pt=($e,Xe,Tt)=>{var Tr,Bt;if(c[$e.crossTileID])return;if(G)return void(this.placements[$e.crossTileID]=new jt(!1,!1,!1));let Kt=!1,Ir=!1,Bi=!0,Ua=null,Cr={box:null,placeable:!1,offscreen:null},xn={box:null,placeable:!1,offscreen:null},tn=null,Ui=null,rn=null,co=0,bl=0,$f=0;Xe.textFeatureIndex?co=Xe.textFeatureIndex:$e.useRuntimeCollisionCircles&&(co=$e.featureIndex),Xe.verticalTextFeatureIndex&&(bl=Xe.verticalTextFeatureIndex);let wl=Xe.textBox;if(wl){let ca=ki=>{let ji=s.ah.horizontal;if(d.allowVerticalPlacement&&!ki&&this.prevPlacement){let $n=this.prevPlacement.placedOrientations[$e.crossTileID];$n&&(this.placedOrientations[$e.crossTileID]=$n,ji=$n,this.markUsedOrientation(d,ji,$e))}return ji},ha=(ki,ji)=>{if(d.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&Xe.verticalTextBox){for(let $n of d.writingModes)if($n===s.ah.vertical?(Cr=ji(),xn=Cr):Cr=ki(),Cr&&Cr.placeable)break}else Cr=ki()},vs=$e.textAnchorOffsetStartIndex,ja=$e.textAnchorOffsetEndIndex;if(ja===vs){let ki=(ji,$n)=>{let Jt=this.collisionIndex.placeCollisionBox(ji,Q,j,C,O,Fe,Ce,S,ae.predicate,ut);return Jt&&Jt.placeable&&(this.markUsedOrientation(d,$n,$e),this.placedOrientations[$e.crossTileID]=$n),Jt};ha(()=>ki(wl,s.ah.horizontal),()=>{let ji=Xe.verticalTextBox;return d.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&ji?ki(ji,s.ah.vertical):{box:null,offscreen:null}}),ca(Cr&&Cr.placeable)}else{let ki=s.aq[(Bt=(Tr=this.prevPlacement)===null||Tr===void 0?void 0:Tr.variableOffsets[$e.crossTileID])===null||Bt===void 0?void 0:Bt.anchor],ji=(Jt,hu,Sl)=>{let ql=Jt.x2-Jt.x1,Px=Jt.y2-Jt.y1,QA=$e.textBoxScale,Mx=Ke&&ge==="never"?hu:null,gs=null,Ox=Q==="never"?1:2,Gf="never";ki&&Ox++;for(let Qc=0;Qc<Ox;Qc++){for(let Kf=vs;Kf<ja;Kf++){let Zf=d.textAnchorOffsets.get(Kf);if(ki&&Zf.textAnchor!==ki)continue;let Al=this.attemptAnchorPlacement(Zf,Jt,ql,Px,QA,Ce,Fe,j,C,O,ae,Gf,$e,d,Sl,S,E,Mx,ut);if(Al&&(gs=Al.placedGlyphBoxes,gs&&gs.placeable))return Kt=!0,Ua=Al.shift,gs}ki?ki=null:Gf=Q}return f&&!gs&&(gs={box:this.collisionIndex.placeCollisionBox(wl,"always",j,C,O,Fe,Ce,S,ae.predicate,ut,new s.P(0,0)).box,offscreen:!1,placeable:!1}),gs};ha(()=>ji(wl,Xe.iconBox,s.ah.horizontal),()=>{let Jt=Xe.verticalTextBox;return d.allowVerticalPlacement&&(!Cr||!Cr.placeable)&&$e.numVerticalGlyphVertices>0&&Jt?ji(Jt,Xe.verticalIconBox,s.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Cr&&(Kt=Cr.placeable,Bi=Cr.offscreen);let $n=ca(Cr&&Cr.placeable);if(!Kt&&this.prevPlacement){let Jt=this.prevPlacement.variableOffsets[$e.crossTileID];Jt&&(this.variableOffsets[$e.crossTileID]=Jt,this.markUsedJustification(d,Jt.anchor,$e,$n))}}}if(tn=Cr,Kt=tn&&tn.placeable,Bi=tn&&tn.offscreen,$e.useRuntimeCollisionCircles){let ca=d.text.placedSymbolArray.get($e.centerJustifiedTextSymbolIndex),ha=s.ai(d.textSizeData,re,ca),vs=v.get("text-padding");Ui=this.collisionIndex.placeCollisionCircles(Q,ca,d.lineVertexArray,d.glyphOffsetArray,ha,C,O,R,D,f,Fe,ae.predicate,$e.collisionCircleDiameter,vs,S,ut),Ui.circles.length&&Ui.collisionDetected&&!f&&s.w("Collisions detected, but collision boxes are not shown"),Kt=fe||Ui.circles.length>0&&!Ui.collisionDetected,Bi=Bi&&Ui.offscreen}if(Xe.iconFeatureIndex&&($f=Xe.iconFeatureIndex),Xe.iconBox){let ca=ha=>this.collisionIndex.placeCollisionBox(ha,ge,j,C,O,Fe,Ce,E,ae.predicate,ut,Ke&&Ua?Ua:void 0);xn&&xn.placeable&&Xe.verticalIconBox?(rn=ca(Xe.verticalIconBox),Ir=rn.placeable):(rn=ca(Xe.iconBox),Ir=rn.placeable),Bi=Bi&&rn.offscreen}let la=oe||$e.numHorizontalGlyphVertices===0&&$e.numVerticalGlyphVertices===0,Wf=le||$e.numIconVertices===0;la||Wf?Wf?la||(Ir=Ir&&Kt):Kt=Ir&&Kt:Ir=Kt=Ir&&Kt;let av=Ir&&rn.placeable;if(Kt&&tn.placeable&&this.collisionIndex.insertCollisionBox(tn.box,Q,v.get("text-ignore-placement"),d.bucketInstanceId,xn&&xn.placeable&&bl?bl:co,ae.ID),av&&this.collisionIndex.insertCollisionBox(rn.box,ge,v.get("icon-ignore-placement"),d.bucketInstanceId,$f,ae.ID),Ui&&Kt&&this.collisionIndex.insertCollisionCircles(Ui.circles,Q,v.get("text-ignore-placement"),d.bucketInstanceId,co,ae.ID),f&&this.storeCollisionData(d.bucketInstanceId,Tt,Xe,tn,rn,Ui),$e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$e.crossTileID]=new jt(Kt||je,Ir||Ue,Bi||d.justReloaded),c[$e.crossTileID]=!0};if(tt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let $e=d.getSortedSymbolIndexes(this.transform.angle);for(let Xe=$e.length-1;Xe>=0;--Xe){let Tt=$e[Xe];Pt(d.symbolInstances.get(Tt),d.collisionArrays[Tt],Tt)}}else for(let $e=i.symbolInstanceStart;$e<i.symbolInstanceEnd;$e++)Pt(d.symbolInstances.get($e),d.collisionArrays[$e],$e);if(f&&d.bucketInstanceId in this.collisionCircleArrays){let $e=this.collisionCircleArrays[d.bucketInstanceId];s.as($e.invProjMatrix,C),$e.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}storeCollisionData(i,c,f,d,v,S){if(f.textBox||f.iconBox){let E,C;this.collisionBoxArrays.has(i)?E=this.collisionBoxArrays.get(i):(E=new Map,this.collisionBoxArrays.set(i,E)),E.has(c)?C=E.get(c):(C={text:null,icon:null},E.set(c,C)),f.textBox&&(C.text=d.box),f.iconBox&&(C.icon=v.box)}if(S){let E=this.collisionCircleArrays[i];E===void 0&&(E=this.collisionCircleArrays[i]=new hr);for(let C=0;C<S.circles.length;C+=4)E.circles.push(S.circles[C+0]),E.circles.push(S.circles[C+1]),E.circles.push(S.circles[C+2]),E.circles.push(S.collisionDetected?1:0)}}markUsedJustification(i,c,f,d){let v;v=d===s.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[s.at(c)];let S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(let E of S)E>=0&&(i.text.placedSymbolArray.get(E).crossTileID=v>=0&&E!==v?0:f.crossTileID)}markUsedOrientation(i,c,f){let d=c===s.ah.horizontal||c===s.ah.horizontalOnly?c:0,v=c===s.ah.vertical?c:0,S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(let E of S)i.text.placedSymbolArray.get(E).placedOrientation=d;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;let c=this.prevPlacement,f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;let d=c?c.symbolFadeChange(i):1,v=c?c.opacities:{},S=c?c.variableOffsets:{},E=c?c.placedOrientations:{};for(let C in this.placements){let O=this.placements[C],R=v[C];R?(this.opacities[C]=new jr(R,d,O.text,O.icon),f=f||O.text!==R.text.placed||O.icon!==R.icon.placed):(this.opacities[C]=new jr(null,d,O.text,O.icon,O.skipFade),f=f||O.text||O.icon)}for(let C in v){let O=v[C];if(!this.opacities[C]){let R=new jr(O,d,!1,!1);R.isHidden()||(this.opacities[C]=R,f=f||O.text.placed||O.icon.placed)}}for(let C in S)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=S[C]);for(let C in E)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=E[C]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){let f={};for(let d of c){let v=d.getBucket(i);v&&d.latestFeatureIndex&&i.id===v.layerIds[0]&&this.updateBucketOpacities(v,d.tileID,f,d.collisionBoxArray)}}updateBucketOpacities(i,c,f,d){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();let v=i.layers[0],S=v.layout,E=new jr(null,0,!1,!1,!0),C=S.get("text-allow-overlap"),O=S.get("icon-allow-overlap"),R=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),D=S.get("text-rotation-alignment")==="map",j=S.get("text-pitch-alignment")==="map",G=S.get("icon-text-fit")!=="none",X=new jr(null,0,C&&(O||!i.hasIconData()||S.get("icon-optional")),O&&(C||!i.hasTextData()||S.get("text-optional")),!0);!i.collisionArrays&&d&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(d);let re=(oe,le,Q)=>{for(let fe=0;fe<le/4;fe++)oe.opacityVertexArray.emplaceBack(Q);oe.hasVisibleVertices=oe.hasVisibleVertices||Q!==el},ae=this.collisionBoxArrays.get(i.bucketInstanceId);for(let oe=0;oe<i.symbolInstances.length;oe++){let le=i.symbolInstances.get(oe),{numHorizontalGlyphVertices:Q,numVerticalGlyphVertices:fe,crossTileID:ge}=le,we=this.opacities[ge];f[ge]?we=E:we||(we=X,this.opacities[ge]=we),f[ge]=!0;let Ce=le.numIconVertices>0,Fe=this.placedOrientations[le.crossTileID],Ke=Fe===s.ah.vertical,tt=Fe===s.ah.horizontal||Fe===s.ah.horizontalOnly;if(Q>0||fe>0){let Ue=Un(we.text);re(i.text,Q,Ke?el:Ue),re(i.text,fe,tt?el:Ue);let ut=we.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(Xe=>{Xe>=0&&(i.text.placedSymbolArray.get(Xe).hidden=ut||Ke?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=ut||tt?1:0);let Pt=this.variableOffsets[le.crossTileID];Pt&&this.markUsedJustification(i,Pt.anchor,le,Fe);let $e=this.placedOrientations[le.crossTileID];$e&&(this.markUsedJustification(i,"left",le,$e),this.markUsedOrientation(i,$e,le))}if(Ce){let Ue=Un(we.icon),ut=!(G&&le.verticalPlacedIconSymbolIndex&&Ke);le.placedIconSymbolIndex>=0&&(re(i.icon,le.numIconVertices,ut?Ue:el),i.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=we.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(re(i.icon,le.numVerticalIconVertices,ut?el:Ue),i.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=we.icon.isHidden())}let je=ae&&ae.has(oe)?ae.get(oe):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){let Ue=i.collisionArrays[oe];if(Ue){let ut=new s.P(0,0);if(Ue.textBox||Ue.verticalTextBox){let Pt=!0;if(R){let $e=this.variableOffsets[ge];$e?(ut=Oi($e.anchor,$e.width,$e.height,$e.textOffset,$e.textBoxScale),D&&ut._rotate(j?this.transform.angle:-this.transform.angle)):Pt=!1}if(Ue.textBox||Ue.verticalTextBox){let $e;Ue.textBox&&($e=Ke),Ue.verticalTextBox&&($e=tt),Qu(i.textCollisionBox.collisionVertexArray,we.text.placed,!Pt||$e,je.text,ut.x,ut.y)}}if(Ue.iconBox||Ue.verticalIconBox){let Pt=!!(!tt&&Ue.verticalIconBox),$e;Ue.iconBox&&($e=Pt),Ue.verticalIconBox&&($e=!Pt),Qu(i.iconCollisionBox.collisionVertexArray,we.icon.placed,$e,je.icon,G?ut.x:0,G?ut.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){let oe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=oe.invProjMatrix,i.placementViewportMatrix=oe.viewportMatrix,i.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){let f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function Qu(g,i,c,f,d,v){f&&f.length!==0||(f=[0,0,0,0]);let S=f[0]-Dt,E=f[1]-Dt,C=f[2]-Dt,O=f[3]-Dt;g.emplaceBack(i?1:0,c?1:0,d||0,v||0,S,E),g.emplaceBack(i?1:0,c?1:0,d||0,v||0,C,E),g.emplaceBack(i?1:0,c?1:0,d||0,v||0,C,O),g.emplaceBack(i?1:0,c?1:0,d||0,v||0,S,O)}let fr=Math.pow(2,25),vm=Math.pow(2,24),gm=Math.pow(2,17),Nn=Math.pow(2,16),Bn=Math.pow(2,9),TA=Math.pow(2,8),aa=Math.pow(2,1);function Un(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;let i=g.placed?1:0,c=Math.floor(127*g.opacity);return c*fr+i*vm+c*gm+i*Nn+c*Bn+i*TA+c*aa+i}let el=0;function Qs(){return{isOccluded:(g,i,c)=>!1,getPitchedTextCorrection:(g,i,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(g,i,c,f){throw new Error("Not implemented.")},translatePosition:(g,i,c,f)=>function(d,v,S,E,C=!1){if(!S[0]&&!S[1])return[0,0];let O=C?E==="map"?d.angle:0:E==="viewport"?-d.angle:0;if(O){let R=Math.sin(O),D=Math.cos(O);S=[S[0]*D-S[1]*R,S[0]*R+S[1]*D]}return[C?S[0]:Gt(v,S[0],d.zoom),C?S[1]:Gt(v,S[1],d.zoom)]}(g,i,c,f),getCircleRadiusCorrection:g=>1}}class li{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,f,d,v){let S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(S,d,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((E,C)=>E.sortKey-C.sortKey));this._currentPartIndex<S.length;)if(c.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,v())return!0;return!1}}class Dc{constructor(i,c,f,d,v,S,E,C){this.placement=new en(i,Qs(),c,S,E,C),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,c,f){let d=T.now(),v=()=>!this._forceFullPlacement&&T.now()-d>2;for(;this._currentPlacementIndex>=0;){let S=c[i[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=E)&&(!S.maxzoom||S.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new li(S)),this._inProgressLayer.continuePlacement(f[S.source],this.placement,this._showCollisionBoxes,S,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}let La=512/s.X/2;class ri{constructor(i,c,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};let d=new Map;for(let v=0;v<c.length;v++){let S=c.get(v),E=S.key,C=d.get(E);C?C.push(S):d.set(E,[S])}for(let[v,S]of d){let E={positions:S.map(C=>({x:Math.floor(C.anchorX*La),y:Math.floor(C.anchorY*La)})),crossTileIDs:S.map(C=>C.crossTileID)};if(E.positions.length>128){let C=new s.av(E.positions.length,16,Uint16Array);for(let{x:O,y:R}of E.positions)C.add(O,R);C.finish(),delete E.positions,E.index=C}this._symbolsByKey[v]=E}}getScaledCoordinates(i,c){let{x:f,y:d,z:v}=this.tileID.canonical,{x:S,y:E,z:C}=c.canonical,O=La/Math.pow(2,C-v),R=(E*s.X+i.anchorY)*O,D=d*s.X*La;return{x:Math.floor((S*s.X+i.anchorX)*O-f*s.X*La),y:Math.floor(R-D)}}findMatches(i,c,f){let d=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let v=0;v<i.length;v++){let S=i.get(v);if(S.crossTileID)continue;let E=this._symbolsByKey[S.key];if(!E)continue;let C=this.getScaledCoordinates(S,c);if(E.index){let O=E.index.range(C.x-d,C.y-d,C.x+d,C.y+d).sort();for(let R of O){let D=E.crossTileIDs[R];if(!f[D]){f[D]=!0,S.crossTileID=D;break}}}else if(E.positions)for(let O=0;O<E.positions.length;O++){let R=E.positions[O],D=E.crossTileIDs[O];if(Math.abs(R.x-C.x)<=d&&Math.abs(R.y-C.y)<=d&&!f[D]){f[D]=!0,S.crossTileID=D;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class df{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Fa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){let c=Math.round((i-this.lng)/360);if(c!==0)for(let f in this.indexes){let d=this.indexes[f],v={};for(let S in d){let E=d[S];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),v[E.tileID.key]=E}this.indexes[f]=v}this.lng=i}addBucket(i,c,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let v=0;v<c.symbolInstances.length;v++)c.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});let d=this.usedCrossTileIDs[i.overscaledZ];for(let v in this.indexes){let S=this.indexes[v];if(Number(v)>i.overscaledZ)for(let E in S){let C=S[E];C.tileID.isChildOf(i)&&C.findMatches(c.symbolInstances,i,d)}else{let E=S[i.scaledTo(Number(v)).key];E&&E.findMatches(c.symbolInstances,i,d)}}for(let v=0;v<c.symbolInstances.length;v++){let S=c.symbolInstances.get(v);S.crossTileID||(S.crossTileID=f.generate(),d[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new ri(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(let f of c.getCrossTileIDsLists())for(let d of f)delete this.usedCrossTileIDs[i][d]}removeStaleBuckets(i){let c=!1;for(let f in this.indexes){let d=this.indexes[f];for(let v in d)i[d[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,d[v]),delete d[v],c=!0)}return c}}class ym{constructor(){this.layerIndexes={},this.crossTileIDs=new df,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,f){let d=this.layerIndexes[i.id];d===void 0&&(d=this.layerIndexes[i.id]=new Fa);let v=!1,S={};d.handleWrapJump(f);for(let E of c){let C=E.getBucket(i);C&&i.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(E.tileID,C,this.crossTileIDs)&&(v=!0),S[C.bucketInstanceId]=!0)}return d.removeStaleBuckets(S)&&(v=!0),v}pruneUnusedLayers(i){let c={};i.forEach(f=>{c[f]=!0});for(let f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}let za=(g,i)=>s.t(g,i&&i.filter(c=>c.identifier!=="source.canvas")),IA=s.aw();class pf extends s.E{constructor(i,c={}){super(),this._rtlPluginLoaded=()=>{for(let f in this.sourceCaches){let d=this.sourceCaches[f].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[f].reload()}},this.map=i,this.dispatcher=new ka(ro(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,d)=>this.getGlyphs(f,d)),this.dispatcher.registerMessageHandler("GI",(f,d)=>this.getImages(f,d)),this.imageManager=new cr,this.imageManager.setEventedParent(this),this.glyphManager=new _r(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new jo(256,512),this.crossTileSymbolIndex=new ym,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.ay()),vi().on(Re,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;let d=this.sourceCaches[f.sourceId];if(!d)return;let v=d.getSource();if(v&&v.vectorLayerIds)for(let S in this._layers){let E=this._layers[S];E.source===v.id&&this._validateLayer(E)}})}loadURL(i,c={},f){this.fire(new s.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;let d=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;let v=this._loadStyleRequest;s.h(d,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,c,f)}).catch(S=>{this._loadStyleRequest=null,S&&!v.signal.aborted&&this.fire(new s.j(S))})}loadJSON(i,c={},f){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(i,c,f)}).catch(()=>{})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(IA,{validate:!1})}_load(i,c,f){var d;let v=c.transformStyle?c.transformStyle(f,i):i;if(!c.validate||!za(this,s.u(v))){this._loaded=!0,this.stylesheet=v;for(let S in v.sources)this.addSource(S,v.sources[S],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new Pi(this.stylesheet.light),this.sky=new Mi(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){let i=s.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(let c of i){let f=s.aA(c);f.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=f}}_loadSprite(i,c=!1,f=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,S,E,C){return s._(this,void 0,void 0,function*(){let O=Ge(v),R=E>1?"@2x":"",D={},j={};for(let{id:G,url:X}of O){let re=S.transformRequest(pt(X,R,".json"),"SpriteJSON");D[G]=s.h(re,C);let ae=S.transformRequest(pt(X,R,".png"),"SpriteImage");j[G]=H.getImage(ae,C)}return yield Promise.all([...Object.values(D),...Object.values(j)]),function(G,X){return s._(this,void 0,void 0,function*(){let re={};for(let ae in G){re[ae]={};let oe=T.getImageCanvasContext((yield X[ae]).data),le=(yield G[ae]).data;for(let Q in le){let{width:fe,height:ge,x:we,y:Ce,sdf:Fe,pixelRatio:Ke,stretchX:tt,stretchY:je,content:Ue,textFitWidth:ut,textFitHeight:Pt}=le[Q];re[ae][Q]={data:null,pixelRatio:Ke,sdf:Fe,stretchX:tt,stretchY:je,content:Ue,textFitWidth:ut,textFitHeight:Pt,spriteData:{width:fe,height:ge,x:we,y:Ce,context:oe}}}}return re})}(D,j)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(let S in v){this._spritesImagesIds[S]=[];let E=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(C=>!(C in v)):[];for(let C of E)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(let C in v[S]){let O=S==="default"?C:`${S}:${C}`;this._spritesImagesIds[S].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,v[S][C],!1):this.imageManager.addImage(O,v[S][C]),c&&(this._changedImages[O]=!0)}}}).catch(v=>{this._spriteRequest=null,d=v,this.fire(new s.j(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),f&&f(d)})}_unloadSprite(){for(let i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(i){let c=this.sourceCaches[i.source];if(!c)return;let f=i.sourceLayer;if(!f)return;let d=c.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(f)===-1)&&this.fire(new s.j(new Error(`Source layer "${f}" does not exist on source "${d.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,c=!1){let f=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c?s.aB(f):f);let d=[];for(let v of i)if(f[v]){let S=c?s.aB(f[v]):f[v];d.push(S)}return d}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};let c=Object.keys(this._layers);for(let f of c){let d=this._layers[f];d.type!=="custom"&&(i[f]=d.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(let i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;let c=this._changed;if(c){let d=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(d.length||v.length)&&this._updateWorkerLayers(d,v);for(let S in this._updatedSources){let E=this._updatedSources[S];if(E==="reload")this._reloadSource(S);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}let f={};for(let d in this.sourceCaches){let v=this.sourceCaches[d];f[d]=v.used,v.used=!1}for(let d of this._order){let v=this._layers[d];v.recalculate(i,this._availableImages),!v.isHidden(i.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(let d in f){let v=this.sourceCaches[d];!!f[d]!=!!v.used&&v.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(i),this.sky.recalculate(i),this.z=i.zoom,c&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let i=Object.keys(this._changedImages);if(i.length){for(let c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){var f;this._checkLoaded();let d=this.serialize();if(i=c.transformStyle?c.transformStyle(d,i):i,((f=c.validate)===null||f===void 0||f)&&za(this,s.u(i)))return!1;(i=s.aB(i)).layers=s.az(i.layers);let v=s.aC(d,i),S=this._getOperationsToPerform(v);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(let E of S.operations)E();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){let c=[],f=[];for(let d of i)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":c.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":c.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,d.args));break;case"setSky":c.push(()=>this.setSky.apply(this,d.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setTransition":c.push(()=>{});break;default:f.push(d.command);}return{operations:c,unimplemented:f}}addImage(i,c){if(this.getImage(i))return this.fire(new s.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new s.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(s.u.source,`sources.${i}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);let d=this.sourceCaches[i]=new qt(i,c,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:i})),d.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(let f in this._layers)if(this._layers[f].source===i)return this.fire(new s.j(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));let c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);let f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,f={}){this._checkLoaded();let d=i.id;if(this.getLayer(d))return void this.fire(new s.j(new Error(`Layer "${d}" already exists on this map.`)));let v;if(i.type==="custom"){if(za(this,s.aD(i)))return;v=s.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(d,i.source),i=s.aB(i),i=s.e(i,{source:d})),this._validate(s.u.layer,`layers.${d}`,i,{arrayIndex:-1},f))return;v=s.aA(i),this._validateLayer(v),v.setEventedParent(this,{layer:{id:d}})}let S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new s.j(new Error(`Cannot add layer "${d}" before non-existing layer "${c}".`)));else{if(this._order.splice(S,0,d),this._layerOrderChanged=!0,this._layers[d]=v,this._removedLayers[d]&&v.source&&v.type!=="custom"){let E=this._removedLayers[d];delete this._removedLayers[d],E.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;let f=this._order.indexOf(i);this._order.splice(f,1);let d=c?this._order.indexOf(c):this._order.length;c&&d===-1?this.fire(new s.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(d,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();let c=this._layers[i];if(!c)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);let f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,f){this._checkLoaded();let d=this.getLayer(i);d?d.minzoom===c&&d.maxzoom===f||(c!=null&&(d.minzoom=c),f!=null&&(d.maxzoom=f),this._updateLayer(d)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,f={}){this._checkLoaded();let d=this.getLayer(i);if(d){if(!s.aE(d.filter,c))return c==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(s.u.filter,`layers.${d.id}.filter`,c,null,f)||(d.filter=s.aB(c),this._updateLayer(d)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return s.aB(this.getLayer(i).filter)}setLayoutProperty(i,c,f,d={}){this._checkLoaded();let v=this.getLayer(i);v?s.aE(v.getLayoutProperty(c),f)||(v.setLayoutProperty(c,f,d),this._updateLayer(v)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){let f=this.getLayer(i);if(f)return f.getLayoutProperty(c);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,f,d={}){this._checkLoaded();let v=this.getLayer(i);v?s.aE(v.getPaintProperty(c),f)||(v.setPaintProperty(c,f,d)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new s.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();let f=i.source,d=i.sourceLayer,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new s.j(new Error(`The source '${f}' does not exist in the map's style.`)));let S=v.getSource().type;S==="geojson"&&d?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||d?(i.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),v.setFeatureState(d,i.id,c)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();let f=i.source,d=this.sourceCaches[f];if(d===void 0)return void this.fire(new s.j(new Error(`The source '${f}' does not exist in the map's style.`)));let v=d.getSource().type,S=v==="vector"?i.sourceLayer:void 0;v!=="vector"||S?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(S,i.id,c):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();let c=i.source,f=i.sourceLayer,d=this.sourceCaches[c];if(d!==void 0)return d.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),d.getFeatureState(f,i.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let i=s.aF(this.sourceCaches,v=>v.serialize()),c=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,d=this.stylesheet;return s.aG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:i,layers:c,terrain:f},v=>v!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){let c=S=>this._layers[S].type==="fill-extrusion",f={},d=[];for(let S=this._order.length-1;S>=0;S--){let E=this._order[S];if(c(E)){f[E]=S;for(let C of i){let O=C[E];if(O)for(let R of O)d.push(R)}}}d.sort((S,E)=>E.intersectionZ-S.intersectionZ);let v=[];for(let S=this._order.length-1;S>=0;S--){let E=this._order[S];if(c(E))for(let C=d.length-1;C>=0;C--){let O=d[C].feature;if(f[O.layer.id]<S)break;v.push(O),d.pop()}else for(let C of i){let O=C[E];if(O)for(let R of O)v.push(R.feature)}}return v}queryRenderedFeatures(i,c,f){c&&c.filter&&this._validate(s.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);let d={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(let E of c.layers){let C=this._layers[E];if(!C)return this.fire(new s.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];d[C.source]=!0}}let v=[];c.availableImages=this._availableImages;let S=this._serializedAllLayers();for(let E in this.sourceCaches)c.layers&&!d[E]||v.push(io(this.sourceCaches[E],this._layers,S,i,c,f));return this.placement&&v.push(function(E,C,O,R,D,j,G){let X={},re=j.queryRenderedSymbols(R),ae=[];for(let oe of Object.keys(re).map(Number))ae.push(G[oe]);ae.sort(Ra);for(let oe of ae){let le=oe.featureIndex.lookupSymbolFeatures(re[oe.bucketInstanceId],C,oe.bucketIndex,oe.sourceLayerIndex,D.filter,D.layers,D.availableImages,E);for(let Q in le){let fe=X[Q]=X[Q]||[],ge=le[Q];ge.sort((we,Ce)=>{let Fe=oe.featureSortOrder;if(Fe){let Ke=Fe.indexOf(we.featureIndex);return Fe.indexOf(Ce.featureIndex)-Ke}return Ce.featureIndex-we.featureIndex});for(let we of ge)fe.push(we)}}for(let oe in X)X[oe].forEach(le=>{let Q=le.feature,fe=O[E[oe].source].getFeatureState(Q.layer["source-layer"],Q.id);Q.source=Q.layer.source,Q.layer["source-layer"]&&(Q.sourceLayer=Q.layer["source-layer"]),Q.state=fe});return X}(this._layers,S,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(i,c){c&&c.filter&&this._validate(s.u.filter,"querySourceFeatures.filter",c.filter,null,c);let f=this.sourceCaches[i];return f?function(d,v){let S=d.getRenderableIds().map(O=>d.getTileByID(O)),E=[],C={};for(let O=0;O<S.length;O++){let R=S[O],D=R.tileID.canonical.key;C[D]||(C[D]=!0,R.querySourceFeatures(E,v))}return E}(f,c):[]}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();let f=this.light.getLight(),d=!1;for(let S in i)if(!s.aE(i[S],f[S])){d=!0;break}if(!d)return;let v={now:T.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(v)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,c={}){let f=this.getSky(),d=!1;if(!i&&!f)return;if(i&&!f)d=!0;else if(!i&&f)d=!0;else for(let S in i)if(!s.aE(i[S],f[S])){d=!0;break}if(!d)return;let v={now:T.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,c),this.sky.updateTransitions(v)}_validate(i,c,f,d,v={}){return(!v||v.validate!==!1)&&za(this,i.call(s.u,s.e({key:c,style:this.serialize(),value:f,styleSpec:s.v},d)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),vi().off(Re,this._rtlPluginLoaded);for(let c in this._layers)this._layers[c].setEventedParent(null);for(let c in this.sourceCaches){let f=this.sourceCaches[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(let c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(let i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,f,d,v=!1){let S=!1,E=!1,C={};for(let O of this._order){let R=this._layers[O];if(R.type!=="symbol")continue;if(!C[R.source]){let j=this.sourceCaches[R.source];C[R.source]=j.getRenderableIds(!0).map(G=>j.getTileByID(G)).sort((G,X)=>X.tileID.overscaledZ-G.tileID.overscaledZ||(G.tileID.isLessThan(X.tileID)?-1:1))}let D=this.crossTileSymbolIndex.addLayer(R,C[R.source],i.center.lng);S=S||D}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(T.now(),i.zoom))&&(this.pauseablePlacement=new Dc(i,this.map.terrain,this._order,v,c,f,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(T.now()),E=!0),S&&this.pauseablePlacement.placement.setStale()),E||S)for(let O of this._order){let R=this._layers[O];R.type==="symbol"&&this.placement.updateLayerOpacities(R,C[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(T.now())}_releaseSymbolFadeTiles(){for(let i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c){return s._(this,void 0,void 0,function*(){let f=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();let d=this.sourceCaches[c.source];return d&&d.setDependencies(c.tileID.key,c.type,c.icons),f})}getGlyphs(i,c){return s._(this,void 0,void 0,function*(){let f=yield this.glyphManager.getGlyphs(c.stacks),d=this.sourceCaches[c.source];return d&&d.setDependencies(c.tileID.key,c.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(s.u.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,f={},d){this._checkLoaded();let v=[{id:i,url:c}],S=[...Ge(this.stylesheet.sprite),...v];this._validate(s.u.sprite,"sprite",S,null,f)||(this.stylesheet.sprite=S,this._loadSprite(v,!0,d))}removeSprite(i){this._checkLoaded();let c=Ge(this.stylesheet.sprite);if(c.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(let f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex(f=>f.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Ge(this.stylesheet.sprite)}setSprite(i,c={},f){this._checkLoaded(),i&&this._validate(s.u.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}var eu=s.Y([{name:"a_pos",type:"Int16",components:2}]);let ps={prelude:or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:or(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:or(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:or("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:or(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:or("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:or("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:or("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:or(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:or(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:or(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:or(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:or(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:or("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:or("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:or("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:or("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function or(g,i){let c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),d=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=v?v.concat(d):d,E={};return{fragmentSource:g=g.replace(c,(C,O,R,D,j)=>(E[j]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${j}
varying ${R} ${D} ${j};
#else
uniform ${R} ${D} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${R} ${D} ${j} = u_${j};
#endif
`)),vertexSource:i=i.replace(c,(C,O,R,D,j)=>{let G=D==="float"?"vec2":"vec4",X=j.match(/color/)?"color":G;return E[j]?O==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${R} ${G} a_${j};
varying ${R} ${D} ${j};
#else
uniform ${R} ${D} u_${j};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${R} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${X}(a_${j}, u_${j}_t);
#else
    ${R} ${D} ${j} = u_${j};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${R} ${G} a_${j};
#else
uniform ${R} ${D} u_${j};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${R} ${D} ${j} = a_${j};
#else
    ${R} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${R} ${D} ${j} = unpack_mix_${X}(a_${j}, u_${j}_t);
#else
    ${R} ${D} ${j} = u_${j};
#endif
`}),staticAttributes:f,staticUniforms:S}}class _m{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,f,d,v,S,E,C,O){this.context=i;let R=this.boundPaintVertexBuffers.length!==d.length;for(let D=0;!R&&D<d.length;D++)this.boundPaintVertexBuffers[D]!==d[D]&&(R=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||R||this.boundIndexBuffer!==v||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==O?this.freshBind(c,f,d,v,S,E,C,O):(i.bindVertexArray.set(this.vao),E&&E.bind(),v&&v.dynamicDraw&&v.bind(),C&&C.bind(),O&&O.bind())}freshBind(i,c,f,d,v,S,E,C){let O=i.numAttributes,R=this.context,D=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=d,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=C,c.enableAttributes(D,i);for(let j of f)j.enableAttributes(D,i);S&&S.enableAttributes(D,i),E&&E.enableAttributes(D,i),C&&C.enableAttributes(D,i),c.bind(),c.setVertexAttribPointers(D,i,v);for(let j of f)j.bind(),j.setVertexAttribPointers(D,i,v);S&&(S.bind(),S.setVertexAttribPointers(D,i,v)),d&&d.bind(),E&&(E.bind(),E.setVertexAttribPointers(D,i,v)),C&&(C.bind(),C.setVertexAttribPointers(D,i,v)),R.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let xm=(g,i,c,f,d)=>({u_matrix:g,u_texture:0,u_ele_delta:i,u_fog_matrix:c,u_fog_color:f?f.properties.get("fog-color"):s.aM.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?f.calculateFogBlendOpacity(d):0,u_horizon_color:f?f.properties.get("horizon-color"):s.aM.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1});function tl(g){let i=[];for(let c=0;c<g.length;c++){if(g[c]===null)continue;let f=g[c].split(" ");i.push(f.pop())}return i}class bm{constructor(i,c,f,d,v,S){let E=i.gl;this.program=E.createProgram();let C=tl(c.staticAttributes),O=f?f.getBinderAttributes():[],R=C.concat(O),D=ps.prelude.staticUniforms?tl(ps.prelude.staticUniforms):[],j=c.staticUniforms?tl(c.staticUniforms):[],G=f?f.getBinderUniforms():[],X=D.concat(j).concat(G),re=[];for(let we of X)re.indexOf(we)<0&&re.push(we);let ae=f?f.defines():[];v&&ae.push("#define OVERDRAW_INSPECTOR;"),S&&ae.push("#define TERRAIN3D;");let oe=ae.concat(ps.prelude.fragmentSource,c.fragmentSource).join(`
`),le=ae.concat(ps.prelude.vertexSource,c.vertexSource).join(`
`),Q=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(Q,oe),E.compileShader(Q),!E.getShaderParameter(Q,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(Q)}`);E.attachShader(this.program,Q);let fe=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(fe,le),E.compileShader(fe),!E.getShaderParameter(fe,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(fe)}`);E.attachShader(this.program,fe),this.attributes={};let ge={};this.numAttributes=R.length;for(let we=0;we<this.numAttributes;we++)R[we]&&(E.bindAttribLocation(this.program,we,R[we]),this.attributes[R[we]]=we);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(fe),E.deleteShader(Q);for(let we=0;we<re.length;we++){let Ce=re[we];if(Ce&&!ge[Ce]){let Fe=E.getUniformLocation(this.program,Ce);Fe&&(ge[Ce]=Fe)}}this.fixedUniforms=d(i,ge),this.terrainUniforms=((we,Ce)=>({u_depth:new s.aH(we,Ce.u_depth),u_terrain:new s.aH(we,Ce.u_terrain),u_terrain_dim:new s.aI(we,Ce.u_terrain_dim),u_terrain_matrix:new s.aJ(we,Ce.u_terrain_matrix),u_terrain_unpack:new s.aK(we,Ce.u_terrain_unpack),u_terrain_exaggeration:new s.aI(we,Ce.u_terrain_exaggeration)}))(i,ge),this.binderUniforms=f?f.getUniforms(i,ge):[]}draw(i,c,f,d,v,S,E,C,O,R,D,j,G,X,re,ae,oe,le){let Q=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(d),i.setColorMode(v),i.setCullFace(S),C){i.activeTexture.set(Q.TEXTURE2),Q.bindTexture(Q.TEXTURE_2D,C.depthTexture),i.activeTexture.set(Q.TEXTURE3),Q.bindTexture(Q.TEXTURE_2D,C.texture);for(let ge in this.terrainUniforms)this.terrainUniforms[ge].set(C[ge])}for(let ge in this.fixedUniforms)this.fixedUniforms[ge].set(E[ge]);re&&re.setUniforms(i,this.binderUniforms,G,{zoom:X});let fe=0;switch(c){case Q.LINES:fe=2;break;case Q.TRIANGLES:fe=3;break;case Q.LINE_STRIP:fe=1;}for(let ge of j.get()){let we=ge.vaos||(ge.vaos={});(we[O]||(we[O]=new _m)).bind(i,this,R,re?re.getPaintVertexBuffers():[],D,ge.vertexOffset,ae,oe,le),Q.drawElements(c,ge.primitiveLength*fe,Q.UNSIGNED_SHORT,ge.primitiveOffset*fe*2)}}}function mf(g,i,c){let f=1/Gt(c,1,i.transform.tileZoom),d=Math.pow(2,c.tileID.overscaledZ),v=c.tileSize*Math.pow(2,i.transform.tileZoom)/d,S=v*(c.tileID.canonical.x+c.tileID.wrap*d),E=v*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[S>>16,E>>16],u_pixel_coord_lower:[65535&S,65535&E]}}let Lc=(g,i,c,f)=>{let d=i.style.light,v=d.properties.get("position"),S=[v.x,v.y,v.z],E=function(){var O=new s.A(9);return s.A!=Float32Array&&(O[1]=0,O[2]=0,O[3]=0,O[5]=0,O[6]=0,O[7]=0),O[0]=1,O[4]=1,O[8]=1,O}();d.properties.get("anchor")==="viewport"&&function(O,R){var D=Math.sin(R),j=Math.cos(R);O[0]=j,O[1]=D,O[2]=0,O[3]=-D,O[4]=j,O[5]=0,O[6]=0,O[7]=0,O[8]=1}(E,-i.transform.angle),function(O,R,D){var j=R[0],G=R[1],X=R[2];O[0]=j*D[0]+G*D[3]+X*D[6],O[1]=j*D[1]+G*D[4]+X*D[7],O[2]=j*D[2]+G*D[5]+X*D[8]}(S,S,E);let C=d.properties.get("color");return{u_matrix:g,u_lightpos:S,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+c,u_opacity:f}},vf=(g,i,c,f,d,v,S)=>s.e(Lc(g,i,c,f),mf(v,i,S),{u_height_factor:-Math.pow(2,d.overscaledZ)/S.tileSize/8}),rl=g=>({u_matrix:g}),J_=(g,i,c,f)=>s.e(rl(g),mf(c,i,f)),CA=(g,i)=>({u_matrix:g,u_world:i}),Y_=(g,i,c,f,d)=>s.e(J_(g,i,c,f),{u_world:d}),PA=(g,i,c,f)=>{let d=g.transform,v,S;if(f.paint.get("circle-pitch-alignment")==="map"){let E=Gt(c,1,d.zoom);v=!0,S=[E,E]}else v=!1,S=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(i.posMatrix,c,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:S}},tu=(g,i,c)=>({u_matrix:g,u_inv_matrix:i,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),Fc=(g,i,c=1)=>({u_matrix:g,u_color:i,u_overlay:0,u_overlay_scale:c}),yn=g=>({u_matrix:g}),_n=(g,i,c,f)=>({u_matrix:g,u_extrude_scale:Gt(i,1,c),u_intensity:f}),gf=(g,i,c,f)=>{let d=s.H();s.aP(d,0,g.width,g.height,0,0,1);let v=g.context.gl;return{u_matrix:d,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:c,u_color_ramp:f,u_opacity:i.paint.get("heatmap-opacity")}};function yf(g,i){let c=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new s.Z(0,f/c).toLngLat().lat,new s.Z(0,(f+1)/c).toLngLat().lat]}let _f=(g,i,c,f)=>{let d=g.transform;return{u_matrix:tx(g,i,c,f),u_ratio:1/Gt(i,1,d.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Q_=(g,i,c,f,d)=>s.e(_f(g,i,c,d),{u_image:0,u_image_height:f}),il=(g,i,c,f,d)=>{let v=g.transform,S=ex(i,v);return{u_matrix:tx(g,i,c,d),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Gt(i,1,v.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[S,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},MA=(g,i,c,f,d,v)=>{let S=g.lineAtlas,E=ex(i,g.transform),C=c.layout.get("line-cap")==="round",O=S.getDash(f.from,C),R=S.getDash(f.to,C),D=O.width*d.fromScale,j=R.width*d.toScale;return s.e(_f(g,i,c,v),{u_patternscale_a:[E/D,-O.height/2],u_patternscale_b:[E/j,-R.height/2],u_sdfgamma:S.width/(256*Math.min(D,j)*g.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:R.y,u_mix:d.t})};function ex(g,i){return 1/Gt(g,1,i.tileZoom)}function tx(g,i,c,f){return g.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}let OA=(g,i,c,f,d)=>{return{u_matrix:g,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(S=d.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(v=d.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:kA(d.paint.get("raster-hue-rotate"))};var v,S};function kA(g){g*=Math.PI/180;let i=Math.sin(g),c=Math.cos(g);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}let rx=(g,i,c,f,d,v,S,E,C,O,R,D,j,G)=>{let X=S.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:X.width/X.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:C,u_coord_matrix:O,u_is_text:+D,u_pitch_with_map:+f,u_is_along_line:d,u_is_variable_anchor:v,u_texsize:j,u_texture:0,u_translation:R,u_pitched_scale:G}},zc=(g,i,c,f,d,v,S,E,C,O,R,D,j,G,X)=>{let re=S.transform;return s.e(rx(g,i,c,f,d,v,S,E,C,O,R,D,j,X),{u_gamma_scale:f?Math.cos(re._pitch)*re.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+G})},wm=(g,i,c,f,d,v,S,E,C,O,R,D,j,G)=>s.e(zc(g,i,c,f,d,v,S,E,C,O,R,!0,D,!0,G),{u_texsize_icon:j,u_texture_icon:1}),xf=(g,i,c)=>({u_matrix:g,u_opacity:i,u_color:c}),Sm=(g,i,c,f,d,v)=>s.e(function(S,E,C,O){let R=C.imageManager.getPattern(S.from.toString()),D=C.imageManager.getPattern(S.to.toString()),{width:j,height:G}=C.imageManager.getPixelSize(),X=Math.pow(2,O.tileID.overscaledZ),re=O.tileSize*Math.pow(2,C.transform.tileZoom)/X,ae=re*(O.tileID.canonical.x+O.tileID.wrap*X),oe=re*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[j,G],u_mix:E.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Gt(O,1,C.transform.tileZoom),u_pixel_coord_upper:[ae>>16,oe>>16],u_pixel_coord_lower:[65535&ae,65535&oe]}}(f,v,c,d),{u_matrix:g,u_opacity:i}),qm={fillExtrusion:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_lightpos:new s.aN(g,i.u_lightpos),u_lightintensity:new s.aI(g,i.u_lightintensity),u_lightcolor:new s.aN(g,i.u_lightcolor),u_vertical_gradient:new s.aI(g,i.u_vertical_gradient),u_opacity:new s.aI(g,i.u_opacity)}),fillExtrusionPattern:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_lightpos:new s.aN(g,i.u_lightpos),u_lightintensity:new s.aI(g,i.u_lightintensity),u_lightcolor:new s.aN(g,i.u_lightcolor),u_vertical_gradient:new s.aI(g,i.u_vertical_gradient),u_height_factor:new s.aI(g,i.u_height_factor),u_image:new s.aH(g,i.u_image),u_texsize:new s.aO(g,i.u_texsize),u_pixel_coord_upper:new s.aO(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(g,i.u_pixel_coord_lower),u_scale:new s.aN(g,i.u_scale),u_fade:new s.aI(g,i.u_fade),u_opacity:new s.aI(g,i.u_opacity)}),fill:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix)}),fillPattern:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_image:new s.aH(g,i.u_image),u_texsize:new s.aO(g,i.u_texsize),u_pixel_coord_upper:new s.aO(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(g,i.u_pixel_coord_lower),u_scale:new s.aN(g,i.u_scale),u_fade:new s.aI(g,i.u_fade)}),fillOutline:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_world:new s.aO(g,i.u_world)}),fillOutlinePattern:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_world:new s.aO(g,i.u_world),u_image:new s.aH(g,i.u_image),u_texsize:new s.aO(g,i.u_texsize),u_pixel_coord_upper:new s.aO(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(g,i.u_pixel_coord_lower),u_scale:new s.aN(g,i.u_scale),u_fade:new s.aI(g,i.u_fade)}),circle:(g,i)=>({u_camera_to_center_distance:new s.aI(g,i.u_camera_to_center_distance),u_scale_with_map:new s.aH(g,i.u_scale_with_map),u_pitch_with_map:new s.aH(g,i.u_pitch_with_map),u_extrude_scale:new s.aO(g,i.u_extrude_scale),u_device_pixel_ratio:new s.aI(g,i.u_device_pixel_ratio),u_matrix:new s.aJ(g,i.u_matrix)}),collisionBox:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_pixel_extrude_scale:new s.aO(g,i.u_pixel_extrude_scale)}),collisionCircle:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_inv_matrix:new s.aJ(g,i.u_inv_matrix),u_camera_to_center_distance:new s.aI(g,i.u_camera_to_center_distance),u_viewport_size:new s.aO(g,i.u_viewport_size)}),debug:(g,i)=>({u_color:new s.aL(g,i.u_color),u_matrix:new s.aJ(g,i.u_matrix),u_overlay:new s.aH(g,i.u_overlay),u_overlay_scale:new s.aI(g,i.u_overlay_scale)}),clippingMask:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix)}),heatmap:(g,i)=>({u_extrude_scale:new s.aI(g,i.u_extrude_scale),u_intensity:new s.aI(g,i.u_intensity),u_matrix:new s.aJ(g,i.u_matrix)}),heatmapTexture:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_world:new s.aO(g,i.u_world),u_image:new s.aH(g,i.u_image),u_color_ramp:new s.aH(g,i.u_color_ramp),u_opacity:new s.aI(g,i.u_opacity)}),hillshade:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_image:new s.aH(g,i.u_image),u_latrange:new s.aO(g,i.u_latrange),u_light:new s.aO(g,i.u_light),u_shadow:new s.aL(g,i.u_shadow),u_highlight:new s.aL(g,i.u_highlight),u_accent:new s.aL(g,i.u_accent)}),hillshadePrepare:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_image:new s.aH(g,i.u_image),u_dimension:new s.aO(g,i.u_dimension),u_zoom:new s.aI(g,i.u_zoom),u_unpack:new s.aK(g,i.u_unpack)}),line:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_ratio:new s.aI(g,i.u_ratio),u_device_pixel_ratio:new s.aI(g,i.u_device_pixel_ratio),u_units_to_pixels:new s.aO(g,i.u_units_to_pixels)}),lineGradient:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_ratio:new s.aI(g,i.u_ratio),u_device_pixel_ratio:new s.aI(g,i.u_device_pixel_ratio),u_units_to_pixels:new s.aO(g,i.u_units_to_pixels),u_image:new s.aH(g,i.u_image),u_image_height:new s.aI(g,i.u_image_height)}),linePattern:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_texsize:new s.aO(g,i.u_texsize),u_ratio:new s.aI(g,i.u_ratio),u_device_pixel_ratio:new s.aI(g,i.u_device_pixel_ratio),u_image:new s.aH(g,i.u_image),u_units_to_pixels:new s.aO(g,i.u_units_to_pixels),u_scale:new s.aN(g,i.u_scale),u_fade:new s.aI(g,i.u_fade)}),lineSDF:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_ratio:new s.aI(g,i.u_ratio),u_device_pixel_ratio:new s.aI(g,i.u_device_pixel_ratio),u_units_to_pixels:new s.aO(g,i.u_units_to_pixels),u_patternscale_a:new s.aO(g,i.u_patternscale_a),u_patternscale_b:new s.aO(g,i.u_patternscale_b),u_sdfgamma:new s.aI(g,i.u_sdfgamma),u_image:new s.aH(g,i.u_image),u_tex_y_a:new s.aI(g,i.u_tex_y_a),u_tex_y_b:new s.aI(g,i.u_tex_y_b),u_mix:new s.aI(g,i.u_mix)}),raster:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_tl_parent:new s.aO(g,i.u_tl_parent),u_scale_parent:new s.aI(g,i.u_scale_parent),u_buffer_scale:new s.aI(g,i.u_buffer_scale),u_fade_t:new s.aI(g,i.u_fade_t),u_opacity:new s.aI(g,i.u_opacity),u_image0:new s.aH(g,i.u_image0),u_image1:new s.aH(g,i.u_image1),u_brightness_low:new s.aI(g,i.u_brightness_low),u_brightness_high:new s.aI(g,i.u_brightness_high),u_saturation_factor:new s.aI(g,i.u_saturation_factor),u_contrast_factor:new s.aI(g,i.u_contrast_factor),u_spin_weights:new s.aN(g,i.u_spin_weights)}),symbolIcon:(g,i)=>({u_is_size_zoom_constant:new s.aH(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(g,i.u_is_size_feature_constant),u_size_t:new s.aI(g,i.u_size_t),u_size:new s.aI(g,i.u_size),u_camera_to_center_distance:new s.aI(g,i.u_camera_to_center_distance),u_pitch:new s.aI(g,i.u_pitch),u_rotate_symbol:new s.aH(g,i.u_rotate_symbol),u_aspect_ratio:new s.aI(g,i.u_aspect_ratio),u_fade_change:new s.aI(g,i.u_fade_change),u_matrix:new s.aJ(g,i.u_matrix),u_label_plane_matrix:new s.aJ(g,i.u_label_plane_matrix),u_coord_matrix:new s.aJ(g,i.u_coord_matrix),u_is_text:new s.aH(g,i.u_is_text),u_pitch_with_map:new s.aH(g,i.u_pitch_with_map),u_is_along_line:new s.aH(g,i.u_is_along_line),u_is_variable_anchor:new s.aH(g,i.u_is_variable_anchor),u_texsize:new s.aO(g,i.u_texsize),u_texture:new s.aH(g,i.u_texture),u_translation:new s.aO(g,i.u_translation),u_pitched_scale:new s.aI(g,i.u_pitched_scale)}),symbolSDF:(g,i)=>({u_is_size_zoom_constant:new s.aH(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(g,i.u_is_size_feature_constant),u_size_t:new s.aI(g,i.u_size_t),u_size:new s.aI(g,i.u_size),u_camera_to_center_distance:new s.aI(g,i.u_camera_to_center_distance),u_pitch:new s.aI(g,i.u_pitch),u_rotate_symbol:new s.aH(g,i.u_rotate_symbol),u_aspect_ratio:new s.aI(g,i.u_aspect_ratio),u_fade_change:new s.aI(g,i.u_fade_change),u_matrix:new s.aJ(g,i.u_matrix),u_label_plane_matrix:new s.aJ(g,i.u_label_plane_matrix),u_coord_matrix:new s.aJ(g,i.u_coord_matrix),u_is_text:new s.aH(g,i.u_is_text),u_pitch_with_map:new s.aH(g,i.u_pitch_with_map),u_is_along_line:new s.aH(g,i.u_is_along_line),u_is_variable_anchor:new s.aH(g,i.u_is_variable_anchor),u_texsize:new s.aO(g,i.u_texsize),u_texture:new s.aH(g,i.u_texture),u_gamma_scale:new s.aI(g,i.u_gamma_scale),u_device_pixel_ratio:new s.aI(g,i.u_device_pixel_ratio),u_is_halo:new s.aH(g,i.u_is_halo),u_translation:new s.aO(g,i.u_translation),u_pitched_scale:new s.aI(g,i.u_pitched_scale)}),symbolTextAndIcon:(g,i)=>({u_is_size_zoom_constant:new s.aH(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(g,i.u_is_size_feature_constant),u_size_t:new s.aI(g,i.u_size_t),u_size:new s.aI(g,i.u_size),u_camera_to_center_distance:new s.aI(g,i.u_camera_to_center_distance),u_pitch:new s.aI(g,i.u_pitch),u_rotate_symbol:new s.aH(g,i.u_rotate_symbol),u_aspect_ratio:new s.aI(g,i.u_aspect_ratio),u_fade_change:new s.aI(g,i.u_fade_change),u_matrix:new s.aJ(g,i.u_matrix),u_label_plane_matrix:new s.aJ(g,i.u_label_plane_matrix),u_coord_matrix:new s.aJ(g,i.u_coord_matrix),u_is_text:new s.aH(g,i.u_is_text),u_pitch_with_map:new s.aH(g,i.u_pitch_with_map),u_is_along_line:new s.aH(g,i.u_is_along_line),u_is_variable_anchor:new s.aH(g,i.u_is_variable_anchor),u_texsize:new s.aO(g,i.u_texsize),u_texsize_icon:new s.aO(g,i.u_texsize_icon),u_texture:new s.aH(g,i.u_texture),u_texture_icon:new s.aH(g,i.u_texture_icon),u_gamma_scale:new s.aI(g,i.u_gamma_scale),u_device_pixel_ratio:new s.aI(g,i.u_device_pixel_ratio),u_is_halo:new s.aH(g,i.u_is_halo),u_translation:new s.aO(g,i.u_translation),u_pitched_scale:new s.aI(g,i.u_pitched_scale)}),background:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_opacity:new s.aI(g,i.u_opacity),u_color:new s.aL(g,i.u_color)}),backgroundPattern:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_opacity:new s.aI(g,i.u_opacity),u_image:new s.aH(g,i.u_image),u_pattern_tl_a:new s.aO(g,i.u_pattern_tl_a),u_pattern_br_a:new s.aO(g,i.u_pattern_br_a),u_pattern_tl_b:new s.aO(g,i.u_pattern_tl_b),u_pattern_br_b:new s.aO(g,i.u_pattern_br_b),u_texsize:new s.aO(g,i.u_texsize),u_mix:new s.aI(g,i.u_mix),u_pattern_size_a:new s.aO(g,i.u_pattern_size_a),u_pattern_size_b:new s.aO(g,i.u_pattern_size_b),u_scale_a:new s.aI(g,i.u_scale_a),u_scale_b:new s.aI(g,i.u_scale_b),u_pixel_coord_upper:new s.aO(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(g,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aI(g,i.u_tile_units_to_pixels)}),terrain:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_texture:new s.aH(g,i.u_texture),u_ele_delta:new s.aI(g,i.u_ele_delta),u_fog_matrix:new s.aJ(g,i.u_fog_matrix),u_fog_color:new s.aL(g,i.u_fog_color),u_fog_ground_blend:new s.aI(g,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.aI(g,i.u_fog_ground_blend_opacity),u_horizon_color:new s.aL(g,i.u_horizon_color),u_horizon_fog_blend:new s.aI(g,i.u_horizon_fog_blend)}),terrainDepth:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_ele_delta:new s.aI(g,i.u_ele_delta)}),terrainCoords:(g,i)=>({u_matrix:new s.aJ(g,i.u_matrix),u_texture:new s.aH(g,i.u_texture),u_terrain_coords_id:new s.aI(g,i.u_terrain_coords_id),u_ele_delta:new s.aI(g,i.u_ele_delta)}),sky:(g,i)=>({u_sky_color:new s.aL(g,i.u_sky_color),u_horizon_color:new s.aL(g,i.u_horizon_color),u_horizon:new s.aI(g,i.u_horizon),u_sky_horizon_blend:new s.aI(g,i.u_sky_horizon_blend)})};class so{constructor(i,c,f){this.context=i;let d=i.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){let c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let RA={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Am{constructor(i,c,f,d){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=d,this.context=i;let v=i.gl;this.buffer=v.createBuffer(),i.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);let c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let f=0;f<this.attributes.length;f++){let d=c.attributes[this.attributes[f].name];d!==void 0&&i.enableVertexAttribArray(d)}}setVertexAttribPointers(i,c,f){for(let d=0;d<this.attributes.length;d++){let v=this.attributes[d],S=c.attributes[v.name];S!==void 0&&i.vertexAttribPointer(S,v.components,i[RA[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let ru=new WeakMap;function ms(g){var i;if(ru.has(g))return ru.get(g);{let c=(i=g.getParameter(g.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return ru.set(g,c),c}}class ur{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class bf extends ur{getDefault(){return s.aM.transparent}set(i){let c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class DA extends ur{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class nl extends ur{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class LA extends ur{getDefault(){return[!0,!0,!0,!0]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ix extends ur{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class FA extends ur{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class nx extends ur{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){let c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Em extends ur{getDefault(){let i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class ax extends ur{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class ox extends ur{getDefault(){return[0,1]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class sx extends ur{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class ux extends ur{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class iu extends ur{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class lx extends ur{getDefault(){let i=this.gl;return[i.ONE,i.ZERO]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class zA extends ur{getDefault(){return s.aM.transparent}set(i){let c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class cx extends ur{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Nc extends ur{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class NA extends ur{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class wf extends ur{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class BA extends ur{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class UA extends ur{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class hx extends ur{getDefault(){let i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class fx extends ur{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class dx extends ur{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Tm extends ur{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class px extends ur{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Sf extends ur{getDefault(){return null}set(i){let c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Go extends ur{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;let f=this.gl;ms(f)?f.bindVertexArray(i):(c=f.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Im extends ur{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Cm extends ur{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Pm extends ur{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class qf extends ur{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Mm extends qf{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class nu extends qf{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Om extends qf{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class jA{constructor(i,c,f,d,v){this.context=i,this.width=c,this.height=f;let S=i.gl,E=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Mm(i,E),d)this.depthAttachment=v?new Om(i,E):new nu(i,E);else if(v)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){let f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Hr{constructor(i,c,f){this.blendFunction=i,this.blendColor=c,this.mask=f}}Hr.Replace=[1,0],Hr.disabled=new Hr(Hr.Replace,s.aM.transparent,[!1,!1,!1,!1]),Hr.unblended=new Hr(Hr.Replace,s.aM.transparent,[!0,!0,!0,!0]),Hr.alphaBlended=new Hr([1,771],s.aM.transparent,[!0,!0,!0,!0]);class VA{constructor(i){var c,f;if(this.gl=i,this.clearColor=new bf(this),this.clearDepth=new DA(this),this.clearStencil=new nl(this),this.colorMask=new LA(this),this.depthMask=new ix(this),this.stencilMask=new FA(this),this.stencilFunc=new nx(this),this.stencilOp=new Em(this),this.stencilTest=new ax(this),this.depthRange=new ox(this),this.depthTest=new sx(this),this.depthFunc=new ux(this),this.blend=new iu(this),this.blendFunc=new lx(this),this.blendColor=new zA(this),this.blendEquation=new cx(this),this.cullFace=new Nc(this),this.cullFaceSide=new NA(this),this.frontFace=new wf(this),this.program=new BA(this),this.activeTexture=new UA(this),this.viewport=new hx(this),this.bindFramebuffer=new fx(this),this.bindRenderbuffer=new dx(this),this.bindTexture=new Tm(this),this.bindVertexBuffer=new px(this),this.bindElementBuffer=new Sf(this),this.bindVertexArray=new Go(this),this.pixelStoreUnpack=new Im(this),this.pixelStoreUnpackPremultiplyAlpha=new Cm(this),this.pixelStoreUnpackFlipY=new Pm(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),ms(i)){this.HALF_FLOAT=i.HALF_FLOAT;let d=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:d==null?void 0:d.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");let d=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new so(this,i,c)}createVertexBuffer(i,c,f){return new Am(this,i,c,f)}createRenderbuffer(i,c,f){let d=this.gl,v=d.createRenderbuffer();return this.bindRenderbuffer.set(v),d.renderbufferStorage(d.RENDERBUFFER,i,c,f),this.bindRenderbuffer.set(null),v}createFramebuffer(i,c,f,d){return new jA(this,i,c,f,d)}clear({color:i,depth:c,stencil:f}){let d=this.gl,v=0;i&&(v|=d.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(v|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(v|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),d.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){s.aE(i.blendFunction,Hr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return ms(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return ms(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Vt{constructor(i,c,f){this.func=i,this.mask=c,this.range=f}}Vt.ReadOnly=!1,Vt.ReadWrite=!0,Vt.disabled=new Vt(519,Vt.ReadOnly,[0,1]);let Af=7680;class wr{constructor(i,c,f,d,v,S){this.test=i,this.ref=c,this.mask=f,this.fail=d,this.depthFail=v,this.pass=S}}wr.disabled=new wr({func:519,mask:0},0,0,Af,Af,Af);class mr{constructor(i,c,f){this.enable=i,this.mode=c,this.frontFace=f}}let au;function Bc(g,i,c,f,d){let v=g.context,S=v.gl,E=g.useProgram("collisionBox"),C=[],O=0,R=0;for(let oe=0;oe<f.length;oe++){let le=f[oe],Q=i.getTile(le).getBucket(c);if(!Q)continue;let fe=d?Q.textCollisionBox:Q.iconCollisionBox,ge=Q.collisionCircleArray;if(ge.length>0){let we=s.H();s.aQ(we,Q.placementInvProjMatrix,g.transform.glCoordMatrix),s.aQ(we,we,Q.placementViewportMatrix),C.push({circleArray:ge,circleOffset:R,transform:le.posMatrix,invTransform:we,coord:le}),O+=ge.length/4,R=O}fe&&E.draw(v,S.LINES,Vt.disabled,wr.disabled,g.colorModeForRenderPass(),mr.disabled,{u_matrix:le.posMatrix,u_pixel_extrude_scale:[1/(D=g.transform).width,1/D.height]},g.style.map.terrain&&g.style.map.terrain.getTerrainData(le),c.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,null,g.transform.zoom,null,null,fe.collisionVertexBuffer)}var D;if(!d||!C.length)return;let j=g.useProgram("collisionCircle"),G=new s.aR;G.resize(4*O),G._trim();let X=0;for(let oe of C)for(let le=0;le<oe.circleArray.length/4;le++){let Q=4*le,fe=oe.circleArray[Q+0],ge=oe.circleArray[Q+1],we=oe.circleArray[Q+2],Ce=oe.circleArray[Q+3];G.emplace(X++,fe,ge,we,Ce,0),G.emplace(X++,fe,ge,we,Ce,1),G.emplace(X++,fe,ge,we,Ce,2),G.emplace(X++,fe,ge,we,Ce,3)}(!au||au.length<2*O)&&(au=function(oe){let le=2*oe,Q=new s.aT;Q.resize(le),Q._trim();for(let fe=0;fe<le;fe++){let ge=6*fe;Q.uint16[ge+0]=4*fe+0,Q.uint16[ge+1]=4*fe+1,Q.uint16[ge+2]=4*fe+2,Q.uint16[ge+3]=4*fe+2,Q.uint16[ge+4]=4*fe+3,Q.uint16[ge+5]=4*fe+0}return Q}(O));let re=v.createIndexBuffer(au,!0),ae=v.createVertexBuffer(G,s.aS.members,!0);for(let oe of C){let le=tu(oe.transform,oe.invTransform,g.transform);j.draw(v,S.TRIANGLES,Vt.disabled,wr.disabled,g.colorModeForRenderPass(),mr.disabled,le,g.style.map.terrain&&g.style.map.terrain.getTerrainData(oe.coord),c.id,ae,re,s.a0.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,g.transform.zoom,null,null,null)}ae.destroy(),re.destroy()}mr.disabled=new mr(!1,1029,2305),mr.backCCW=new mr(!0,1029,2305);let Uc=s.an(new Float32Array(16));function km(g,i,c,f,d,v){let{horizontalAlign:S,verticalAlign:E}=s.au(g);return new s.P((-(S-.5)*i/d+f[0])*v,(-(E-.5)*c/d+f[1])*v)}function ou(g,i,c,f,d,v){let S=i.tileAnchorPoint.add(new s.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let E=f.mult(v);c||(E=E.rotate(-d));let C=S.add(E);return ie(C.x,C.y,i.labelPlaneMatrix,i.getElevation).point}if(c){let E=Te(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(g),C=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return g.add(f.rotate(C))}return g.add(f)}function al(g,i,c,f,d,v,S,E,C,O,R,D,j,G){let X=g.text.placedSymbolArray,re=g.text.dynamicLayoutVertexArray,ae=g.icon.dynamicLayoutVertexArray,oe={};re.clear();for(let le=0;le<X.length;le++){let Q=X.get(le),fe=Q.hidden||!Q.crossTileID||g.allowVerticalPlacement&&!Q.placedOrientation?null:f[Q.crossTileID];if(fe){let ge=new s.P(Q.anchorX,Q.anchorY),we={getElevation:G,width:d.width,height:d.height,labelPlaneMatrix:v,lineVertexArray:null,pitchWithMap:c,projection:R,projectionCache:null,tileAnchorPoint:ge,translation:D,unwrappedTileID:j},Ce=c?ie(ge.x,ge.y,S,G):Te(ge.x,ge.y,we),Fe=B(d.cameraToCenterDistance,Ce.signedDistanceFromCamera),Ke=s.ai(g.textSizeData,C,Q)*Fe/s.ap;c&&(Ke*=g.tilePixelRatio/E);let{width:tt,height:je,anchor:Ue,textOffset:ut,textBoxScale:Pt}=fe,$e=km(Ue,tt,je,ut,Pt,Ke),Xe=R.getPitchedTextCorrection(d,ge.add(new s.P(D[0],D[1])),j),Tt=ou(Ce.point,we,i,$e,d.angle,Xe),Tr=g.allowVerticalPlacement&&Q.placedOrientation===s.ah.vertical?Math.PI/2:0;for(let Bt=0;Bt<Q.numGlyphs;Bt++)s.aj(re,Tt,Tr);O&&Q.associatedIconIndex>=0&&(oe[Q.associatedIconIndex]={shiftedAnchor:Tt,angle:Tr})}else xt(Q.numGlyphs,re)}if(O){ae.clear();let le=g.icon.placedSymbolArray;for(let Q=0;Q<le.length;Q++){let fe=le.get(Q);if(fe.hidden)xt(fe.numGlyphs,ae);else{let ge=oe[Q];if(ge)for(let we=0;we<fe.numGlyphs;we++)s.aj(ae,ge.shiftedAnchor,ge.angle);else xt(fe.numGlyphs,ae)}}g.icon.dynamicLayoutVertexBuffer.updateData(ae)}g.text.dynamicLayoutVertexBuffer.updateData(re)}function oa(g,i,c){return c.iconsInText&&i?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Rm(g,i,c,f,d,v,S,E,C,O,R,D){let j=g.context,G=j.gl,X=g.transform,re=Qs(),ae=E==="map",oe=C==="map",le=E!=="viewport"&&c.layout.get("symbol-placement")!=="point",Q=ae&&!oe&&!le,fe=!oe&&le,ge=!c.layout.get("symbol-sort-key").isConstant(),we=!1,Ce=g.depthModeForSublayer(0,Vt.ReadOnly),Fe=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ke=[],tt=re.getCircleRadiusCorrection(X);for(let je of f){let Ue=i.getTile(je),ut=Ue.getBucket(c);if(!ut)continue;let Pt=d?ut.text:ut.icon;if(!Pt||!Pt.segments.get().length||!Pt.hasVisibleVertices)continue;let $e=Pt.programConfigurations.get(c.id),Xe=d||ut.sdfIcons,Tt=d?ut.textSizeData:ut.iconSizeData,Tr=oe||X.pitch!==0,Bt=g.useProgram(oa(Xe,d,ut),$e),Kt=s.ag(Tt,X.zoom),Ir=g.style.map.terrain&&g.style.map.terrain.getTerrainData(je),Bi,Ua,Cr,xn,tn=[0,0],Ui=null;if(d)Ua=Ue.glyphAtlasTexture,Cr=G.LINEAR,Bi=Ue.glyphAtlasTexture.size,ut.iconsInText&&(tn=Ue.imageAtlasTexture.size,Ui=Ue.imageAtlasTexture,xn=Tr||g.options.rotating||g.options.zooming||Tt.kind==="composite"||Tt.kind==="camera"?G.LINEAR:G.NEAREST);else{let Jt=c.layout.get("icon-size").constantOr(0)!==1||ut.iconsNeedLinear;Ua=Ue.imageAtlasTexture,Cr=Xe||g.options.rotating||g.options.zooming||Jt||Tr?G.LINEAR:G.NEAREST,Bi=Ue.imageAtlasTexture.size}let rn=Gt(Ue,1,g.transform.zoom),co=fe?je.posMatrix:Uc,bl=ds(co,oe,ae,g.transform,rn),$f=oo(co,oe,ae,g.transform,rn),wl=oo(je.posMatrix,oe,ae,g.transform,rn),la=re.translatePosition(g.transform,Ue,v,S),Wf=Fe&&ut.hasTextData(),av=c.layout.get("icon-text-fit")!=="none"&&Wf&&ut.hasIconData();if(le){let Jt=g.style.map.terrain?(Sl,ql)=>g.style.map.terrain.getElevation(je,Sl,ql):null,hu=c.layout.get("text-rotation-alignment")==="map";K(ut,je.posMatrix,g,d,bl,wl,oe,O,hu,re,je.toUnwrapped(),X.width,X.height,la,Jt)}let ca=je.posMatrix,ha=d&&Fe||av,vs=le||ha?Uc:bl,ja=$f,ki=Xe&&c.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ji;ji=Xe?ut.iconsInText?wm(Tt.kind,Kt,Q,oe,le,ha,g,ca,vs,ja,la,Bi,tn,tt):zc(Tt.kind,Kt,Q,oe,le,ha,g,ca,vs,ja,la,d,Bi,!0,tt):rx(Tt.kind,Kt,Q,oe,le,ha,g,ca,vs,ja,la,d,Bi,tt);let $n={program:Bt,buffers:Pt,uniformValues:ji,atlasTexture:Ua,atlasTextureIcon:Ui,atlasInterpolation:Cr,atlasInterpolationIcon:xn,isSDF:Xe,hasHalo:ki};if(ge&&ut.canOverlap){we=!0;let Jt=Pt.segments.get();for(let hu of Jt)Ke.push({segments:new s.a0([hu]),sortKey:hu.sortKey,state:$n,terrainData:Ir})}else Ke.push({segments:Pt.segments,sortKey:0,state:$n,terrainData:Ir})}we&&Ke.sort((je,Ue)=>je.sortKey-Ue.sortKey);for(let je of Ke){let Ue=je.state;if(j.activeTexture.set(G.TEXTURE0),Ue.atlasTexture.bind(Ue.atlasInterpolation,G.CLAMP_TO_EDGE),Ue.atlasTextureIcon&&(j.activeTexture.set(G.TEXTURE1),Ue.atlasTextureIcon&&Ue.atlasTextureIcon.bind(Ue.atlasInterpolationIcon,G.CLAMP_TO_EDGE)),Ue.isSDF){let ut=Ue.uniformValues;Ue.hasHalo&&(ut.u_is_halo=1,Dm(Ue.buffers,je.segments,c,g,Ue.program,Ce,R,D,ut,je.terrainData)),ut.u_is_halo=0}Dm(Ue.buffers,je.segments,c,g,Ue.program,Ce,R,D,Ue.uniformValues,je.terrainData)}}function Dm(g,i,c,f,d,v,S,E,C,O){let R=f.context;d.draw(R,R.gl.TRIANGLES,v,S,E,mr.disabled,C,O,c.id,g.layoutVertexBuffer,g.indexBuffer,i,c.paint,f.transform.zoom,g.programConfigurations.get(c.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function Lm(g,i,c,f){let d=g.context,v=d.gl,S=wr.disabled,E=new Hr([v.ONE,v.ONE],s.aM.transparent,[!0,!0,!0,!0]),C=i.getBucket(c);if(!C)return;let O=f.key,R=c.heatmapFbos.get(O);R||(R=jc(d,i.tileSize,i.tileSize),c.heatmapFbos.set(O,R)),d.bindFramebuffer.set(R.framebuffer),d.viewport.set([0,0,i.tileSize,i.tileSize]),d.clear({color:s.aM.transparent});let D=C.programConfigurations.get(c.id),j=g.useProgram("heatmap",D),G=g.style.map.terrain.getTerrainData(f);j.draw(d,v.TRIANGLES,Vt.disabled,S,E,mr.disabled,_n(f.posMatrix,i,g.transform.zoom,c.paint.get("heatmap-intensity")),G,c.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,c.paint,g.transform.zoom,D)}function su(g,i,c){let f=g.context,d=f.gl;f.setColorMode(g.colorModeForRenderPass());let v=Vc(f,i),S=c.key,E=i.heatmapFbos.get(S);E&&(f.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,E.colorAttachment.get()),f.activeTexture.set(d.TEXTURE1),v.bind(d.LINEAR,d.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(f,d.TRIANGLES,Vt.disabled,wr.disabled,g.colorModeForRenderPass(),mr.disabled,gf(g,i,0,1),null,i.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,i.paint,g.transform.zoom),E.destroy(),i.heatmapFbos.delete(S))}function jc(g,i,c){var f,d;let v=g.gl,S=v.createTexture();v.bindTexture(v.TEXTURE_2D,S),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);let E=(f=g.HALF_FLOAT)!==null&&f!==void 0?f:v.UNSIGNED_BYTE,C=(d=g.RGBA16F)!==null&&d!==void 0?d:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,C,i,c,0,v.RGBA,E,null);let O=g.createFramebuffer(i,c,!1,!1);return O.colorAttachment.set(S),O}function Vc(g,i){return i.colorRampTexture||(i.colorRampTexture=new Ve(g,i.colorRamp,g.gl.RGBA)),i.colorRampTexture}function ol(g,i,c,f,d){if(!c||!f||!f.imageAtlas)return;let v=f.imageAtlas.patternPositions,S=v[c.to.toString()],E=v[c.from.toString()];if(!S&&E&&(S=E),!E&&S&&(E=S),!S||!E){let C=d.getPaintProperty(i);S=v[C],E=v[C]}S&&E&&g.setConstantPatternPositions(S,E)}function $c(g,i,c,f,d,v,S){let E=g.context.gl,C="fill-pattern",O=c.paint.get(C),R=O&&O.constantOr(1),D=c.getCrossfadeParameters(),j,G,X,re,ae;S?(G=R&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=E.LINES):(G=R?"fillPattern":"fill",j=E.TRIANGLES);let oe=O.constantOr(null);for(let le of f){let Q=i.getTile(le);if(R&&!Q.patternsLoaded())continue;let fe=Q.getBucket(c);if(!fe)continue;let ge=fe.programConfigurations.get(c.id),we=g.useProgram(G,ge),Ce=g.style.map.terrain&&g.style.map.terrain.getTerrainData(le);R&&(g.context.activeTexture.set(E.TEXTURE0),Q.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),ge.updatePaintBuffers(D)),ol(ge,C,oe,Q,c);let Fe=Ce?le:null,Ke=g.translatePosMatrix(Fe?Fe.posMatrix:le.posMatrix,Q,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(S){re=fe.indexBuffer2,ae=fe.segments2;let tt=[E.drawingBufferWidth,E.drawingBufferHeight];X=G==="fillOutlinePattern"&&R?Y_(Ke,g,D,Q,tt):CA(Ke,tt)}else re=fe.indexBuffer,ae=fe.segments,X=R?J_(Ke,g,D,Q):rl(Ke);we.draw(g.context,j,d,g.stencilModeForClipping(le),v,mr.disabled,X,Ce,c.id,fe.layoutVertexBuffer,re,ae,c.paint,g.transform.zoom,ge)}}function Ef(g,i,c,f,d,v,S){let E=g.context,C=E.gl,O="fill-extrusion-pattern",R=c.paint.get(O),D=R.constantOr(1),j=c.getCrossfadeParameters(),G=c.paint.get("fill-extrusion-opacity"),X=R.constantOr(null);for(let re of f){let ae=i.getTile(re),oe=ae.getBucket(c);if(!oe)continue;let le=g.style.map.terrain&&g.style.map.terrain.getTerrainData(re),Q=oe.programConfigurations.get(c.id),fe=g.useProgram(D?"fillExtrusionPattern":"fillExtrusion",Q);D&&(g.context.activeTexture.set(C.TEXTURE0),ae.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Q.updatePaintBuffers(j)),ol(Q,O,X,ae,c);let ge=g.translatePosMatrix(re.posMatrix,ae,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),we=c.paint.get("fill-extrusion-vertical-gradient"),Ce=D?vf(ge,g,we,G,re,j,ae):Lc(ge,g,we,G);fe.draw(E,E.gl.TRIANGLES,d,v,S,mr.backCCW,Ce,le,c.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,c.paint,g.transform.zoom,Q,g.style.map.terrain&&oe.centroidVertexBuffer)}}function sl(g,i,c,f,d,v,S){let E=g.context,C=E.gl,O=c.fbo;if(!O)return;let R=g.useProgram("hillshade"),D=g.style.map.terrain&&g.style.map.terrain.getTerrainData(i);E.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,O.colorAttachment.get()),R.draw(E,C.TRIANGLES,d,v,S,mr.disabled,((j,G,X,re)=>{let ae=X.paint.get("hillshade-shadow-color"),oe=X.paint.get("hillshade-highlight-color"),le=X.paint.get("hillshade-accent-color"),Q=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);X.paint.get("hillshade-illumination-anchor")==="viewport"&&(Q-=j.transform.angle);let fe=!j.options.moving;return{u_matrix:re?re.posMatrix:j.transform.calculatePosMatrix(G.tileID.toUnwrapped(),fe),u_image:0,u_latrange:yf(0,G.tileID),u_light:[X.paint.get("hillshade-exaggeration"),Q],u_shadow:ae,u_highlight:oe,u_accent:le}})(g,c,f,D?i:null),D,f.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function ul(g,i,c,f,d,v){let S=g.context,E=S.gl,C=i.dem;if(C&&C.data){let O=C.dim,R=C.stride,D=C.getPixels();if(S.activeTexture.set(E.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||g.getTileTexture(R),i.demTexture){let G=i.demTexture;G.update(D,{premultiply:!1}),G.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else i.demTexture=new Ve(S,D,E.RGBA,{premultiply:!1}),i.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);S.activeTexture.set(E.TEXTURE0);let j=i.fbo;if(!j){let G=new Ve(S,{width:O,height:O,data:null},E.RGBA);G.bind(E.LINEAR,E.CLAMP_TO_EDGE),j=i.fbo=S.createFramebuffer(O,O,!0,!1),j.colorAttachment.set(G.texture)}S.bindFramebuffer.set(j.framebuffer),S.viewport.set([0,0,O,O]),g.useProgram("hillshadePrepare").draw(S,E.TRIANGLES,f,d,v,mr.disabled,((G,X)=>{let re=X.stride,ae=s.H();return s.aP(ae,0,s.X,-s.X,0,0,1),s.J(ae,ae,[0,-s.X,0]),{u_matrix:ae,u_image:1,u_dimension:[re,re],u_zoom:G.overscaledZ,u_unpack:X.getUnpackVector()}})(i.tileID,C),null,c.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function mx(g,i,c,f,d,v){let S=f.paint.get("raster-fade-duration");if(!v&&S>0){let E=T.now(),C=(E-g.timeAdded)/S,O=i?(E-i.timeAdded)/S:-1,R=c.getSource(),D=d.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),j=!i||Math.abs(i.tileID.overscaledZ-D)>Math.abs(g.tileID.overscaledZ-D),G=j&&g.refreshedUponExpiration?1:s.ac(j?C:1-O,0,1);return g.refreshedUponExpiration&&C>=1&&(g.refreshedUponExpiration=!1),i?{opacity:1,mix:1-G}:{opacity:G,mix:0}}return{opacity:1,mix:0}}let Fm=new s.aM(1,0,0,1),ir=new s.aM(0,1,0,1),Tf=new s.aM(0,0,1,1),$A=new s.aM(1,0,1,1),vx=new s.aM(0,1,1,1);function ll(g,i,c,f){If(g,0,i+c/2,g.transform.width,c,f)}function gx(g,i,c,f){If(g,i-c/2,0,c,g.transform.height,f)}function If(g,i,c,f,d,v){let S=g.context,E=S.gl;E.enable(E.SCISSOR_TEST),E.scissor(i*g.pixelRatio,c*g.pixelRatio,f*g.pixelRatio,d*g.pixelRatio),S.clear({color:v}),E.disable(E.SCISSOR_TEST)}function yx(g,i,c){let f=g.context,d=f.gl,v=c.posMatrix,S=g.useProgram("debug"),E=Vt.disabled,C=wr.disabled,O=g.colorModeForRenderPass(),R="$debug",D=g.style.map.terrain&&g.style.map.terrain.getTerrainData(c);f.activeTexture.set(d.TEXTURE0);let j=i.getTileByID(c.key).latestRawTileData,G=Math.floor((j&&j.byteLength||0)/1024),X=i.getTile(c).tileSize,re=512/Math.min(X,512)*(c.overscaledZ/g.transform.zoom)*.5,ae=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ae+=` => ${c.overscaledZ}`),function(oe,le){oe.initDebugOverlayCanvas();let Q=oe.debugOverlayCanvas,fe=oe.context.gl,ge=oe.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,Q.width,Q.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(le,5,5),ge.strokeText(le,5,5),oe.debugOverlayTexture.update(Q),oe.debugOverlayTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE)}(g,`${ae} ${G}kB`),S.draw(f,d.TRIANGLES,E,C,Hr.alphaBlended,mr.disabled,Fc(v,s.aM.transparent,re),null,R,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),S.draw(f,d.LINE_STRIP,E,C,O,mr.disabled,Fc(v,s.aM.red),D,R,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function _x(g,i,c){let f=g.context,d=f.gl,v=g.colorModeForRenderPass(),S=new Vt(d.LEQUAL,Vt.ReadWrite,g.depthRangeFor3D),E=g.useProgram("terrain"),C=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,g.width,g.height]);for(let O of c){let R=g.renderToTexture.getTexture(O),D=i.getTerrainData(O.tileID);f.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,R.texture);let j=g.transform.calculatePosMatrix(O.tileID.toUnwrapped()),G=i.getMeshFrameDelta(g.transform.zoom),X=g.transform.calculateFogMatrix(O.tileID.toUnwrapped()),re=xm(j,G,X,g.style.sky,g.transform.pitch);E.draw(f,d.TRIANGLES,S,wr.disabled,v,mr.backCCW,re,D,"terrain",C.vertexBuffer,C.indexBuffer,C.segments)}}class Cf{constructor(i,c,f){this.vertexBuffer=i,this.indexBuffer=c,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Pf{constructor(i,c){this.context=new VA(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=qt.maxUnderzooming+qt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ym}resize(i,c,f){if(this.width=Math.floor(i*f),this.height=Math.floor(c*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let d of this.style._order)this.style._layers[d].resize()}setup(){let i=this.context,c=new s.aX;c.emplaceBack(0,0),c.emplaceBack(s.X,0),c.emplaceBack(0,s.X),c.emplaceBack(s.X,s.X),this.tileExtentBuffer=i.createVertexBuffer(c,eu.members),this.tileExtentSegments=s.a0.simpleSegment(0,0,4,2);let f=new s.aX;f.emplaceBack(0,0),f.emplaceBack(s.X,0),f.emplaceBack(0,s.X),f.emplaceBack(s.X,s.X),this.debugBuffer=i.createVertexBuffer(f,eu.members),this.debugSegments=s.a0.simpleSegment(0,0,4,5);let d=new s.$;d.emplaceBack(0,0,0,0),d.emplaceBack(s.X,0,s.X,0),d.emplaceBack(0,s.X,0,s.X),d.emplaceBack(s.X,s.X,s.X,s.X),this.rasterBoundsBuffer=i.createVertexBuffer(d,_t.members),this.rasterBoundsSegments=s.a0.simpleSegment(0,0,4,2);let v=new s.aX;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,eu.members),this.viewportSegments=s.a0.simpleSegment(0,0,4,2);let S=new s.aZ;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(S);let E=new s.aY;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(E);let C=this.context.gl;this.stencilClearMode=new wr({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)}clearStencil(){let i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let f=s.H();s.aP(f,0,this.width,this.height,0,0,1),s.K(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,Vt.disabled,this.stencilClearMode,Hr.disabled,mr.disabled,yn(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;let f=this.context,d=f.gl;this.nextStencilID+c.length>256&&this.clearStencil(),f.setColorMode(Hr.disabled),f.setDepthMode(Vt.disabled);let v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let S of c){let E=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,C=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);v.draw(f,d.TRIANGLES,Vt.disabled,new wr({func:d.ALWAYS,mask:0},E,255,d.KEEP,d.KEEP,d.REPLACE),Hr.disabled,mr.disabled,yn(S.posMatrix),C,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let i=this.nextStencilID++,c=this.context.gl;return new wr({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){let c=this.context.gl;return new wr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){let c=this.context.gl,f=i.sort((S,E)=>E.overscaledZ-S.overscaledZ),d=f[f.length-1].overscaledZ,v=f[0].overscaledZ-d+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();let S={};for(let E=0;E<v;E++)S[E+d]=new wr({func:c.GEQUAL,mask:255},E+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=v,[S,f]}return[{[d]:wr.disabled},f]}colorModeForRenderPass(){let i=this.context.gl;return this._showOverdrawInspector?new Hr([i.CONSTANT_COLOR,i.ONE],new s.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Hr.unblended:Hr.alphaBlended}depthModeForSublayer(i,c,f){if(!this.opaquePassEnabledForLayer())return Vt.disabled;let d=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Vt(f||this.context.gl.LEQUAL,c,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(T.now()),this.imageManager.beginFrame();let f=this.style._order,d=this.style.sourceCaches,v={},S={},E={};for(let C in d){let O=d[C];O.used&&O.prepare(this.context),v[C]=O.getVisibleCoordinates(),S[C]=v[C].slice().reverse(),E[C]=O.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let C=0;C<f.length;C++)if(this.style._layers[f[C]].is3D()){this.opaquePassCutoff=C;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let C of f){let O=this.style._layers[C];if(!O.hasOffscreenPass()||O.isHidden(this.transform.zoom))continue;let R=S[O.source];(O.type==="custom"||R.length)&&this.renderLayer(this,d[O.source],O,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?s.aM.black:s.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(C,O){let R=C.context,D=R.gl,j=((oe,le,Q)=>({u_sky_color:oe.properties.get("sky-color"),u_horizon_color:oe.properties.get("horizon-color"),u_horizon:(le.height/2+le.getHorizon())*Q,u_sky_horizon_blend:oe.properties.get("sky-horizon-blend")*le.height/2*Q}))(O,C.style.map.transform,C.pixelRatio),G=new Vt(D.LEQUAL,Vt.ReadWrite,[0,1]),X=wr.disabled,re=C.colorModeForRenderPass(),ae=C.useProgram("sky");if(!O.mesh){let oe=new s.aX;oe.emplaceBack(-1,-1),oe.emplaceBack(1,-1),oe.emplaceBack(1,1),oe.emplaceBack(-1,1);let le=new s.aY;le.emplaceBack(0,1,2),le.emplaceBack(0,2,3),O.mesh=new Cf(R.createVertexBuffer(oe,eu.members),R.createIndexBuffer(le),s.a0.simpleSegment(0,0,oe.length,le.length))}ae.draw(R,D.TRIANGLES,G,X,re,mr.disabled,j,void 0,"sky",O.mesh.vertexBuffer,O.mesh.indexBuffer,O.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){let C=this.style._layers[f[this.currentLayer]],O=d[C.source],R=v[C.source];this._renderTileClippingMasks(C,R),this.renderLayer(this,O,C,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){let C=this.style._layers[f[this.currentLayer]],O=d[C.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(C))continue;let R=(C.type==="symbol"?E:S)[C.source];this._renderTileClippingMasks(C,v[C.source]),this.renderLayer(this,O,C,R)}if(this.options.showTileBoundaries){let C=function(O,R){let D=null,j=Object.values(O._layers).flatMap(ae=>ae.source&&!ae.isHidden(R)?[O.sourceCaches[ae.source]]:[]),G=j.filter(ae=>ae.getSource().type==="vector"),X=j.filter(ae=>ae.getSource().type!=="vector"),re=ae=>{(!D||D.getSource().maxzoom<ae.getSource().maxzoom)&&(D=ae)};return G.forEach(ae=>re(ae)),D||X.forEach(ae=>re(ae)),D}(this.style,this.transform.zoom);C&&function(O,R,D){for(let j=0;j<D.length;j++)yx(O,R,D[j])}(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(C){let O=C.transform.padding;ll(C,C.transform.height-(O.top||0),3,Fm),ll(C,O.bottom||0,3,ir),gx(C,O.left||0,3,Tf),gx(C,C.transform.width-(O.right||0),3,$A);let R=C.transform.centerPoint;(function(D,j,G,X){If(D,j-1,G-10,2,20,X),If(D,j-10,G-1,20,2,X)})(C,R.x,C.transform.height-R.y,vx)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;let c=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix,d=this.terrainFacilitator.dirty;d||(d=i?!s.a_(c,f):!s.a$(c,f)),d||(d=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),d&&(s.b0(c,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,S){let E=v.context,C=E.gl,O=Hr.unblended,R=new Vt(C.LEQUAL,Vt.ReadWrite,[0,1]),D=S.getTerrainMesh(),j=S.sourceCache.getRenderableTiles(),G=v.useProgram("terrainDepth");E.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:s.aM.transparent,depth:1});for(let X of j){let re=S.getTerrainData(X.tileID),ae={u_matrix:v.transform.calculatePosMatrix(X.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(v.transform.zoom)};G.draw(E,C.TRIANGLES,R,wr.disabled,O,mr.backCCW,ae,re,"terrain",D.vertexBuffer,D.indexBuffer,D.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,S){let E=v.context,C=E.gl,O=Hr.unblended,R=new Vt(C.LEQUAL,Vt.ReadWrite,[0,1]),D=S.getTerrainMesh(),j=S.getCoordsTexture(),G=S.sourceCache.getRenderableTiles(),X=v.useProgram("terrainCoords");E.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:s.aM.transparent,depth:1}),S.coordsIndex=[];for(let re of G){let ae=S.getTerrainData(re.tileID);E.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,j.texture);let oe={u_matrix:v.transform.calculatePosMatrix(re.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(v.transform.zoom)};X.draw(E,C.TRIANGLES,R,wr.disabled,O,mr.backCCW,oe,ae,"terrain",D.vertexBuffer,D.indexBuffer,D.segments),S.coordsIndex.push(re.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(i,c,f,d){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(d||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(v,S,E,C,O){if(v.renderPass!=="translucent")return;let R=wr.disabled,D=v.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(j,G,X,re,ae,oe,le,Q,fe){let ge=G.transform,we=Qs(),Ce=ae==="map",Fe=oe==="map";for(let Ke of j){let tt=re.getTile(Ke),je=tt.getBucket(X);if(!je||!je.text||!je.text.segments.get().length)continue;let Ue=s.ag(je.textSizeData,ge.zoom),ut=Gt(tt,1,G.transform.zoom),Pt=ds(Ke.posMatrix,Fe,Ce,G.transform,ut),$e=X.layout.get("icon-text-fit")!=="none"&&je.hasIconData();if(Ue){let Xe=Math.pow(2,ge.zoom-tt.tileID.overscaledZ),Tt=G.style.map.terrain?(Bt,Kt)=>G.style.map.terrain.getElevation(Ke,Bt,Kt):null,Tr=we.translatePosition(ge,tt,le,Q);al(je,Ce,Fe,fe,ge,Pt,Ke.posMatrix,Xe,Ue,$e,we,Tr,Ke.toUnwrapped(),Tt)}}}(C,v,E,S,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),O),E.paint.get("icon-opacity").constantOr(1)!==0&&Rm(v,S,E,C,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),R,D),E.paint.get("text-opacity").constantOr(1)!==0&&Rm(v,S,E,C,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),R,D),S.map.showCollisionBoxes&&(Bc(v,S,E,C,!0),Bc(v,S,E,C,!1))})(i,c,f,d,this.style.placement.variableOffsets);break;case"circle":(function(v,S,E,C){if(v.renderPass!=="translucent")return;let O=E.paint.get("circle-opacity"),R=E.paint.get("circle-stroke-width"),D=E.paint.get("circle-stroke-opacity"),j=!E.layout.get("circle-sort-key").isConstant();if(O.constantOr(1)===0&&(R.constantOr(1)===0||D.constantOr(1)===0))return;let G=v.context,X=G.gl,re=v.depthModeForSublayer(0,Vt.ReadOnly),ae=wr.disabled,oe=v.colorModeForRenderPass(),le=[];for(let Q=0;Q<C.length;Q++){let fe=C[Q],ge=S.getTile(fe),we=ge.getBucket(E);if(!we)continue;let Ce=we.programConfigurations.get(E.id),Fe=v.useProgram("circle",Ce),Ke=we.layoutVertexBuffer,tt=we.indexBuffer,je=v.style.map.terrain&&v.style.map.terrain.getTerrainData(fe),Ue={programConfiguration:Ce,program:Fe,layoutVertexBuffer:Ke,indexBuffer:tt,uniformValues:PA(v,fe,ge,E),terrainData:je};if(j){let ut=we.segments.get();for(let Pt of ut)le.push({segments:new s.a0([Pt]),sortKey:Pt.sortKey,state:Ue})}else le.push({segments:we.segments,sortKey:0,state:Ue})}j&&le.sort((Q,fe)=>Q.sortKey-fe.sortKey);for(let Q of le){let{programConfiguration:fe,program:ge,layoutVertexBuffer:we,indexBuffer:Ce,uniformValues:Fe,terrainData:Ke}=Q.state;ge.draw(G,X.TRIANGLES,re,ae,oe,mr.disabled,Fe,Ke,E.id,we,Ce,Q.segments,E.paint,v.transform.zoom,fe)}})(i,c,f,d);break;case"heatmap":(function(v,S,E,C){if(E.paint.get("heatmap-opacity")===0)return;let O=v.context;if(v.style.map.terrain){for(let R of C){let D=S.getTile(R);S.hasRenderableParent(R)||(v.renderPass==="offscreen"?Lm(v,D,E,R):v.renderPass==="translucent"&&su(v,E,R))}O.viewport.set([0,0,v.width,v.height])}else v.renderPass==="offscreen"?function(R,D,j,G){let X=R.context,re=X.gl,ae=wr.disabled,oe=new Hr([re.ONE,re.ONE],s.aM.transparent,[!0,!0,!0,!0]);(function(le,Q,fe){let ge=le.gl;le.activeTexture.set(ge.TEXTURE1),le.viewport.set([0,0,Q.width/4,Q.height/4]);let we=fe.heatmapFbos.get(s.aU);we?(ge.bindTexture(ge.TEXTURE_2D,we.colorAttachment.get()),le.bindFramebuffer.set(we.framebuffer)):(we=jc(le,Q.width/4,Q.height/4),fe.heatmapFbos.set(s.aU,we))})(X,R,j),X.clear({color:s.aM.transparent});for(let le=0;le<G.length;le++){let Q=G[le];if(D.hasRenderableParent(Q))continue;let fe=D.getTile(Q),ge=fe.getBucket(j);if(!ge)continue;let we=ge.programConfigurations.get(j.id),Ce=R.useProgram("heatmap",we),{zoom:Fe}=R.transform;Ce.draw(X,re.TRIANGLES,Vt.disabled,ae,oe,mr.disabled,_n(Q.posMatrix,fe,Fe,j.paint.get("heatmap-intensity")),null,j.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,j.paint,R.transform.zoom,we)}X.viewport.set([0,0,R.width,R.height])}(v,S,E,C):v.renderPass==="translucent"&&function(R,D){let j=R.context,G=j.gl;j.setColorMode(R.colorModeForRenderPass());let X=D.heatmapFbos.get(s.aU);X&&(j.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,X.colorAttachment.get()),j.activeTexture.set(G.TEXTURE1),Vc(j,D).bind(G.LINEAR,G.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(j,G.TRIANGLES,Vt.disabled,wr.disabled,R.colorModeForRenderPass(),mr.disabled,gf(R,D,0,1),null,D.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,D.paint,R.transform.zoom))}(v,E)})(i,c,f,d);break;case"line":(function(v,S,E,C){if(v.renderPass!=="translucent")return;let O=E.paint.get("line-opacity"),R=E.paint.get("line-width");if(O.constantOr(1)===0||R.constantOr(1)===0)return;let D=v.depthModeForSublayer(0,Vt.ReadOnly),j=v.colorModeForRenderPass(),G=E.paint.get("line-dasharray"),X=E.paint.get("line-pattern"),re=X.constantOr(1),ae=E.paint.get("line-gradient"),oe=E.getCrossfadeParameters(),le=re?"linePattern":G?"lineSDF":ae?"lineGradient":"line",Q=v.context,fe=Q.gl,ge=!0;for(let we of C){let Ce=S.getTile(we);if(re&&!Ce.patternsLoaded())continue;let Fe=Ce.getBucket(E);if(!Fe)continue;let Ke=Fe.programConfigurations.get(E.id),tt=v.context.program.get(),je=v.useProgram(le,Ke),Ue=ge||je.program!==tt,ut=v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),Pt=X.constantOr(null);if(Pt&&Ce.imageAtlas){let Tt=Ce.imageAtlas,Tr=Tt.patternPositions[Pt.to.toString()],Bt=Tt.patternPositions[Pt.from.toString()];Tr&&Bt&&Ke.setConstantPatternPositions(Tr,Bt)}let $e=ut?we:null,Xe=re?il(v,Ce,E,oe,$e):G?MA(v,Ce,E,G,oe,$e):ae?Q_(v,Ce,E,Fe.lineClipsArray.length,$e):_f(v,Ce,E,$e);if(re)Q.activeTexture.set(fe.TEXTURE0),Ce.imageAtlasTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),Ke.updatePaintBuffers(oe);else if(G&&(Ue||v.lineAtlas.dirty))Q.activeTexture.set(fe.TEXTURE0),v.lineAtlas.bind(Q);else if(ae){let Tt=Fe.gradients[E.id],Tr=Tt.texture;if(E.gradientVersion!==Tt.version){let Bt=256;if(E.stepInterpolant){let Kt=S.getSource().maxzoom,Ir=we.canonical.z===Kt?Math.ceil(1<<v.transform.maxZoom-we.canonical.z):1;Bt=s.ac(s.aV(Fe.maxLineLength/s.X*1024*Ir),256,Q.maxTextureSize)}Tt.gradient=s.aW({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:Bt,image:Tt.gradient||void 0,clips:Fe.lineClipsArray}),Tt.texture?Tt.texture.update(Tt.gradient):Tt.texture=new Ve(Q,Tt.gradient,fe.RGBA),Tt.version=E.gradientVersion,Tr=Tt.texture}Q.activeTexture.set(fe.TEXTURE0),Tr.bind(E.stepInterpolant?fe.NEAREST:fe.LINEAR,fe.CLAMP_TO_EDGE)}je.draw(Q,fe.TRIANGLES,D,v.stencilModeForClipping(we),j,mr.disabled,Xe,ut,E.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,E.paint,v.transform.zoom,Ke,Fe.layoutVertexBuffer2),ge=!1}})(i,c,f,d);break;case"fill":(function(v,S,E,C){let O=E.paint.get("fill-color"),R=E.paint.get("fill-opacity");if(R.constantOr(1)===0)return;let D=v.colorModeForRenderPass(),j=E.paint.get("fill-pattern"),G=v.opaquePassEnabledForLayer()&&!j.constantOr(1)&&O.constantOr(s.aM.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===G){let X=v.depthModeForSublayer(1,v.renderPass==="opaque"?Vt.ReadWrite:Vt.ReadOnly);$c(v,S,E,C,X,D,!1)}if(v.renderPass==="translucent"&&E.paint.get("fill-antialias")){let X=v.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Vt.ReadOnly);$c(v,S,E,C,X,D,!0)}})(i,c,f,d);break;case"fill-extrusion":(function(v,S,E,C){let O=E.paint.get("fill-extrusion-opacity");if(O!==0&&v.renderPass==="translucent"){let R=new Vt(v.context.gl.LEQUAL,Vt.ReadWrite,v.depthRangeFor3D);if(O!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))Ef(v,S,E,C,R,wr.disabled,Hr.disabled),Ef(v,S,E,C,R,v.stencilModeFor3D(),v.colorModeForRenderPass());else{let D=v.colorModeForRenderPass();Ef(v,S,E,C,R,wr.disabled,D)}}})(i,c,f,d);break;case"hillshade":(function(v,S,E,C){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;let O=v.context,R=v.depthModeForSublayer(0,Vt.ReadOnly),D=v.colorModeForRenderPass(),[j,G]=v.renderPass==="translucent"?v.stencilConfigForOverlap(C):[{},C];for(let X of G){let re=S.getTile(X);re.needsHillshadePrepare!==void 0&&re.needsHillshadePrepare&&v.renderPass==="offscreen"?ul(v,re,E,R,wr.disabled,D):v.renderPass==="translucent"&&sl(v,X,re,E,R,j[X.overscaledZ],D)}O.viewport.set([0,0,v.width,v.height])})(i,c,f,d);break;case"raster":(function(v,S,E,C){if(v.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!C.length)return;let O=v.context,R=O.gl,D=S.getSource(),j=v.useProgram("raster"),G=v.colorModeForRenderPass(),[X,re]=D instanceof et?[{},C]:v.stencilConfigForOverlap(C),ae=re[re.length-1].overscaledZ,oe=!v.options.moving;for(let le of re){let Q=v.depthModeForSublayer(le.overscaledZ-ae,E.paint.get("raster-opacity")===1?Vt.ReadWrite:Vt.ReadOnly,R.LESS),fe=S.getTile(le);fe.registerFadeDuration(E.paint.get("raster-fade-duration"));let ge=S.findLoadedParent(le,0),we=S.findLoadedSibling(le),Ce=mx(fe,ge||we||null,S,E,v.transform,v.style.map.terrain),Fe,Ke,tt=E.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;O.activeTexture.set(R.TEXTURE0),fe.texture.bind(tt,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),O.activeTexture.set(R.TEXTURE1),ge?(ge.texture.bind(tt,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Fe=Math.pow(2,ge.tileID.overscaledZ-fe.tileID.overscaledZ),Ke=[fe.tileID.canonical.x*Fe%1,fe.tileID.canonical.y*Fe%1]):fe.texture.bind(tt,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),fe.texture.useMipmap&&O.extTextureFilterAnisotropic&&v.transform.pitch>20&&R.texParameterf(R.TEXTURE_2D,O.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,O.extTextureFilterAnisotropicMax);let je=v.style.map.terrain&&v.style.map.terrain.getTerrainData(le),Ue=je?le:null,ut=Ue?Ue.posMatrix:v.transform.calculatePosMatrix(le.toUnwrapped(),oe),Pt=OA(ut,Ke||[0,0],Fe||1,Ce,E);D instanceof et?j.draw(O,R.TRIANGLES,Q,wr.disabled,G,mr.disabled,Pt,je,E.id,D.boundsBuffer,v.quadTriangleIndexBuffer,D.boundsSegments):j.draw(O,R.TRIANGLES,Q,X[le.overscaledZ],G,mr.disabled,Pt,je,E.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(i,c,f,d);break;case"background":(function(v,S,E,C){let O=E.paint.get("background-color"),R=E.paint.get("background-opacity");if(R===0)return;let D=v.context,j=D.gl,G=v.transform,X=G.tileSize,re=E.paint.get("background-pattern");if(v.isPatternMissing(re))return;let ae=!re&&O.a===1&&R===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==ae)return;let oe=wr.disabled,le=v.depthModeForSublayer(0,ae==="opaque"?Vt.ReadWrite:Vt.ReadOnly),Q=v.colorModeForRenderPass(),fe=v.useProgram(re?"backgroundPattern":"background"),ge=C||G.coveringTiles({tileSize:X,terrain:v.style.map.terrain});re&&(D.activeTexture.set(j.TEXTURE0),v.imageManager.bind(v.context));let we=E.getCrossfadeParameters();for(let Ce of ge){let Fe=C?Ce.posMatrix:v.transform.calculatePosMatrix(Ce.toUnwrapped()),Ke=re?Sm(Fe,R,v,re,{tileID:Ce,tileSize:X},we):xf(Fe,R,O),tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ce);fe.draw(D,j.TRIANGLES,le,oe,Q,mr.disabled,Ke,tt,E.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(i,0,f,d);break;case"custom":(function(v,S,E){let C=v.context,O=E.implementation;if(v.renderPass==="offscreen"){let R=O.prerender;R&&(v.setCustomLayerDefaults(),C.setColorMode(v.colorModeForRenderPass()),R.call(O,C.gl,v.transform.customLayerMatrix()),C.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),C.setColorMode(v.colorModeForRenderPass()),C.setStencilMode(wr.disabled);let R=O.renderingMode==="3d"?new Vt(v.context.gl.LEQUAL,Vt.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,Vt.ReadOnly);C.setDepthMode(R),O.render(C.gl,v.transform.customLayerMatrix(),{farZ:v.transform.farZ,nearZ:v.transform.nearZ,fov:v.transform._fov,modelViewProjectionMatrix:v.transform.modelViewProjectionMatrix,projectionMatrix:v.transform.projectionMatrix}),C.setDirty(),v.setBaseState(),C.bindFramebuffer.set(null)}})(i,0,f);}}translatePosMatrix(i,c,f,d,v){if(!f[0]&&!f[1])return i;let S=v?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(S){let O=Math.sin(S),R=Math.cos(S);f=[f[0]*R-f[1]*O,f[0]*O+f[1]*R]}let E=[v?f[0]:Gt(c,f[0],this.transform.zoom),v?f[1]:Gt(c,f[1],this.transform.zoom),0],C=new Float32Array(16);return s.J(C,i,E),C}saveTileTexture(i){let c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){let c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;let c=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!c||!f}useProgram(i,c){this.cache=this.cache||{};let f=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new bm(this.context,ps[i],c,qm[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ve(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class cl{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,f){let d=Math.pow(2,f),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{let C=1/(E=s.af([],E,i))[3]/c*d;return s.b1(E,E,[C,C,1/E[3],C])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{let C=function(j,G){var X=G[0],re=G[1],ae=G[2],oe=X*X+re*re+ae*ae;return oe>0&&(oe=1/Math.sqrt(oe)),j[0]=G[0]*oe,j[1]=G[1]*oe,j[2]=G[2]*oe,j}([],function(j,G,X){var re=G[0],ae=G[1],oe=G[2],le=X[0],Q=X[1],fe=X[2];return j[0]=ae*fe-oe*Q,j[1]=oe*le-re*fe,j[2]=re*Q-ae*le,j}([],Le([],v[E[0]],v[E[1]]),Le([],v[E[2]],v[E[1]]))),O=-((R=C)[0]*(D=v[E[1]])[0]+R[1]*D[1]+R[2]*D[2]);var R,D;return C.concat(O)});return new cl(v,S)}}class hl{constructor(i,c){this.min=i,this.max=c,this.center=function(f,d,v){return f[0]=.5*d[0],f[1]=.5*d[1],f[2]=.5*d[2],f}([],function(f,d,v){return f[0]=d[0]+v[0],f[1]=d[1]+v[1],f[2]=d[2]+v[2],f}([],this.min,this.max))}quadrant(i){let c=[i%2==0,i<2],f=ve(this.min),d=ve(this.max);for(let v=0;v<c.length;v++)f[v]=c[v]?this.min[v]:this.center[v],d[v]=c[v]?this.center[v]:this.max[v];return d[2]=this.max[2],new hl(f,d)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){let c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],f=!0;for(let d=0;d<i.planes.length;d++){let v=i.planes[d],S=0;for(let E=0;E<c.length;E++)s.b2(v,c[E])>=0&&S++;if(S===0)return 0;S!==c.length&&(f=!1)}if(f)return 2;for(let d=0;d<3;d++){let v=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let E=0;E<i.points.length;E++){let C=i.points[E][d]-this.min[d];v=Math.min(v,C),S=Math.max(S,C)}if(S<0||v>this.max[d]-this.min[d])return 0}return 1}}class fl{constructor(i=0,c=0,f=0,d=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=f,this.right=d}interpolate(i,c,f){return c.top!=null&&i.top!=null&&(this.top=s.y.number(i.top,c.top,f)),c.bottom!=null&&i.bottom!=null&&(this.bottom=s.y.number(i.bottom,c.bottom,f)),c.left!=null&&i.left!=null&&(this.left=s.y.number(i.left,c.left,f)),c.right!=null&&i.right!=null&&(this.right=s.y.number(i.right,c.right,f)),this}getCenter(i,c){let f=s.ac((this.left+i-this.right)/2,0,i),d=s.ac((this.top+c-this.bottom)/2,0,c);return new s.P(f,d)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new fl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let zm=85.051129;class dl{constructor(i,c,f,d,v){this.tileSize=512,this._renderWorldCopies=v===void 0||!!v,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=f==null?0:f,this._maxPitch=d==null?60:d,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let i=new dl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.lngRange=i.lngRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){let c=-s.b3(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var f=new s.A(4);return s.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,d,v){var S=d[0],E=d[1],C=d[2],O=d[3],R=Math.sin(v),D=Math.cos(v);f[0]=S*D+C*R,f[1]=E*D+O*R,f[2]=S*-R+C*D,f[3]=E*-R+O*D}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){let c=s.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){let c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,f){this._unmodified=!1,this._edgeInsets.interpolate(i,c,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){let c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){let c=[new s.b4(0,i)];if(this._renderWorldCopies){let f=this.pointCoordinate(new s.P(0,0)),d=this.pointCoordinate(new s.P(this.width,0)),v=this.pointCoordinate(new s.P(this.width,this.height)),S=this.pointCoordinate(new s.P(0,this.height)),E=Math.floor(Math.min(f.x,d.x,v.x,S.x)),C=Math.floor(Math.max(f.x,d.x,v.x,S.x)),O=1;for(let R=E-O;R<=C+O;R++)R!==0&&c.push(new s.b4(R,i))}return c}coveringTiles(i){var c,f;let d=this.coveringZoomLevel(i),v=d;if(i.minzoom!==void 0&&d<i.minzoom)return[];i.maxzoom!==void 0&&d>i.maxzoom&&(d=i.maxzoom);let S=this.pointCoordinate(this.getCameraPoint()),E=s.Z.fromLngLat(this.center),C=Math.pow(2,d),O=[C*S.x,C*S.y,0],R=[C*E.x,C*E.y,0],D=cl.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,d),j=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(j=d);let G=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,X=Q=>({aabb:new hl([Q*C,0,0],[(Q+1)*C,C,0]),zoom:0,x:0,y:0,wrap:Q,fullyVisible:!1}),re=[],ae=[],oe=d,le=i.reparseOverscaled?v:d;if(this._renderWorldCopies)for(let Q=1;Q<=3;Q++)re.push(X(-Q)),re.push(X(Q));for(re.push(X(0));re.length>0;){let Q=re.pop(),fe=Q.x,ge=Q.y,we=Q.fullyVisible;if(!we){let je=Q.aabb.intersects(D);if(je===0)continue;we=je===2}let Ce=i.terrain?O:R,Fe=Q.aabb.distanceX(Ce),Ke=Q.aabb.distanceY(Ce),tt=Math.max(Math.abs(Fe),Math.abs(Ke));if(Q.zoom===oe||tt>G+(1<<oe-Q.zoom)-2&&Q.zoom>=j){let je=oe-Q.zoom,Ue=O[0]-.5-(fe<<je),ut=O[1]-.5-(ge<<je);ae.push({tileID:new s.S(Q.zoom===oe?le:Q.zoom,Q.wrap,Q.zoom,fe,ge),distanceSq:Pe([R[0]-.5-fe,R[1]-.5-ge]),tileDistanceToCamera:Math.sqrt(Ue*Ue+ut*ut)})}else for(let je=0;je<4;je++){let Ue=(fe<<1)+je%2,ut=(ge<<1)+(je>>1),Pt=Q.zoom+1,$e=Q.aabb.quadrant(je);if(i.terrain){let Xe=new s.S(Pt,Q.wrap,Pt,Ue,ut),Tt=i.terrain.getMinMaxElevation(Xe),Tr=(c=Tt.minElevation)!==null&&c!==void 0?c:this.elevation,Bt=(f=Tt.maxElevation)!==null&&f!==void 0?f:this.elevation;$e=new hl([$e.min[0],$e.min[1],Tr],[$e.max[0],$e.max[1],Bt])}re.push({aabb:$e,zoom:Pt,x:Ue,y:ut,wrap:Q.wrap,fullyVisible:we})}}return ae.sort((Q,fe)=>Q.distanceSq-fe.distanceSq).map(Q=>Q.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){let c=s.ac(i.lat,-85.051129,zm);return new s.P(s.O(i.lng)*this.worldSize,s.Q(c)*this.worldSize)}unproject(i){return new s.Z(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){let c=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,d=this.pointLocation(this.centerPoint,i),v=i.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-v))return;let S=f+c-v,E=Math.cos(this._pitch)*this.cameraToCenterDistance/S/s.b5(1,d.lat),C=this.scaleZoom(E/this.tileSize);this._elevation=v,this._center=d,this.zoom=C}setLocationAtPoint(i,c){let f=this.pointCoordinate(c),d=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(i),S=new s.Z(v.x-(f.x-d.x),v.y-(f.y-d.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return s.Z.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){let j=c.pointCoordinate(i);if(j!=null)return j}let f=[i.x,i.y,0,1],d=[i.x,i.y,1,1];s.af(f,f,this.pixelMatrixInverse),s.af(d,d,this.pixelMatrixInverse);let v=f[3],S=d[3],E=f[1]/v,C=d[1]/S,O=f[2]/v,R=d[2]/S,D=O===R?0:(0-O)/(R-O);return new s.Z(s.y.number(f[0]/v,d[0]/S,D)/this.worldSize,s.y.number(E,C,D)/this.worldSize)}coordinatePoint(i,c=0,f=this.pixelMatrix){let d=[i.x*this.worldSize,i.y*this.worldSize,c,1];return s.af(d,d,f),new s.P(d[0]/d[3],d[1]/d[3])}getBounds(){let i=Math.max(0,this.height/2-this.getHorizon());return new Ae().extend(this.pointLocation(new s.P(0,i))).extend(this.pointLocation(new s.P(this.width,i))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ae([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,zm])}calculateTileMatrix(i){let c=i.canonical,f=this.worldSize/this.zoomScale(c.z),d=c.x+Math.pow(2,c.z)*i.wrap,v=s.an(new Float64Array(16));return s.J(v,v,[d*f,c.y*f,0]),s.K(v,v,[f/s.X,f/s.X,1]),v}calculatePosMatrix(i,c=!1){let f=i.key,d=c?this._alignedPosMatrixCache:this._posMatrixCache;if(d[f])return d[f];let v=this.calculateTileMatrix(i);return s.L(v,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,v),d[f]=new Float32Array(v),d[f]}calculateFogMatrix(i){let c=i.key,f=this._fogMatrixCache;if(f[c])return f[c];let d=this.calculateTileMatrix(i);return s.L(d,this.fogMatrix,d),f[c]=new Float32Array(d),f[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,c){c=s.ac(+c,this.minZoom,this.maxZoom);let f={center:new s.N(i.lng,i.lat),zoom:c},d=this.lngRange;if(!this._renderWorldCopies&&d===null){let Q=179.9999999999;d=[-Q,Q]}let v=this.tileSize*this.zoomScale(f.zoom),S=0,E=v,C=0,O=v,R=0,D=0,{x:j,y:G}=this.size;if(this.latRange){let Q=this.latRange;S=s.Q(Q[1])*v,E=s.Q(Q[0])*v,E-S<G&&(R=G/(E-S))}d&&(C=s.b3(s.O(d[0])*v,0,v),O=s.b3(s.O(d[1])*v,0,v),O<C&&(O+=v),O-C<j&&(D=j/(O-C)));let{x:X,y:re}=this.project.call({worldSize:v},i),ae,oe,le=Math.max(D||0,R||0);if(le){let Q=new s.P(D?(O+C)/2:X,R?(E+S)/2:re);return f.center=this.unproject.call({worldSize:v},Q).wrap(),f.zoom+=this.scaleZoom(le),f}if(this.latRange){let Q=G/2;re-Q<S&&(oe=S+Q),re+Q>E&&(oe=E-Q)}if(d){let Q=(C+O)/2,fe=X;this._renderWorldCopies&&(fe=s.b3(X,Q-v/2,Q+v/2));let ge=j/2;fe-ge<C&&(ae=C+ge),fe+ge>O&&(ae=O-ge)}if(ae!==void 0||oe!==void 0){let Q=new s.P(ae!=null?ae:X,oe!=null?oe:re);f.center=this.unproject.call({worldSize:v},Q).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i=this._unmodified,{center:c,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=f,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;let i=this.centerOffset,c=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b5(1,this.center.lat)*this.worldSize;let d=s.an(new Float64Array(16));s.K(d,d,[this.width/2,-this.height/2,1]),s.J(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=s.an(new Float64Array(16)),s.K(d,d,[1,-1,1]),s.J(d,d,[-1,-1,0]),s.K(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d;let v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),E=v-S*this._pixelPerMeter/Math.cos(this._pitch),C=S<0?E:v,O=Math.PI/2+this._pitch,R=this._fov*(.5+i.y/this.height),D=Math.sin(R)*C/Math.sin(s.ac(Math.PI-O-R,.01,Math.PI-.01)),j=this.getHorizon(),G=2*Math.atan(j/this.cameraToCenterDistance)*(.5+i.y/(2*j)),X=Math.sin(G)*C/Math.sin(s.ac(Math.PI-O-G,.01,Math.PI-.01)),re=Math.min(D,X);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*re+C),this.nearZ=this.height/50,d=new Float64Array(16),s.b6(d,this._fov,this.width/this.height,this.nearZ,this.farZ),d[8]=2*-i.x/this.width,d[9]=2*i.y/this.height,this.projectionMatrix=s.ae(d),s.K(d,d,[1,-1,1]),s.J(d,d,[0,0,-this.cameraToCenterDistance]),s.b7(d,d,this._pitch),s.ad(d,d,this.angle),s.J(d,d,[-c,-f,0]),this.mercatorMatrix=s.K([],d,[this.worldSize,this.worldSize,this.worldSize]),s.K(d,d,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.L(new Float64Array(16),this.labelPlaneMatrix,d),s.J(d,d,[0,0,-this.elevation]),this.modelViewProjectionMatrix=d,this.invModelViewProjectionMatrix=s.as([],d),this.fogMatrix=new Float64Array(16),s.b6(this.fogMatrix,this._fov,this.width/this.height,v,this.farZ),this.fogMatrix[8]=2*-i.x/this.width,this.fogMatrix[9]=2*i.y/this.height,s.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b7(this.fogMatrix,this.fogMatrix,this._pitch),s.ad(this.fogMatrix,this.fogMatrix,this.angle),s.J(this.fogMatrix,this.fogMatrix,[-c,-f,0]),s.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=s.L(new Float64Array(16),this.labelPlaneMatrix,d);let ae=this.width%2/2,oe=this.height%2/2,le=Math.cos(this.angle),Q=Math.sin(this.angle),fe=c-Math.round(c)+le*ae+Q*oe,ge=f-Math.round(f)+le*oe+Q*ae,we=new Float64Array(d);if(s.J(we,we,[fe>.5?fe-1:fe,ge>.5?ge-1:ge,0]),this.alignedModelViewProjectionMatrix=we,d=s.as(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let i=this.pointCoordinate(new s.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return s.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,i))}getCameraQueryGeometry(i){let c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let f=c.x,d=c.y,v=c.x,S=c.y;for(let E of i)f=Math.min(f,E.x),d=Math.min(d,E.y),v=Math.max(v,E.x),S=Math.max(S,E.y);return[new s.P(f,d),new s.P(v,d),new s.P(v,S),new s.P(f,S),new s.P(f,d)]}}lngLatToCameraDepth(i,c){let f=this.locationCoordinate(i),d=[f.x*this.worldSize,f.y*this.worldSize,c,1];return s.af(d,d,this.modelViewProjectionMatrix),d[2]/d[3]}}function Wc(g,i){let c,f=!1,d=null,v=null,S=()=>{d=null,f&&(g.apply(v,c),d=setTimeout(S,i),f=!1)};return(...E)=>(f=!0,v=this,c=E,d||S(),d)}class Mf{constructor(i){this._getCurrentHash=()=>{let c=window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(f=d)}),(f&&f[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{let c=this._getCurrentHash();if(c.length>=3&&!c.some(f=>isNaN(f))){let f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:f,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let c=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{let c=this._getCurrentHash();if(c.length===0)return;let f=c.join("/"),d=f;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${f}`);let v=window.location.hash.replace(d,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let S=window.location.href.replace(/(#.+)?$/,v);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Wc(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){let c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,d=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,d),S=Math.round(c.lng*v)/v,E=Math.round(c.lat*v)/v,C=this._map.getBearing(),O=this._map.getPitch(),R="";if(R+=i?`/${S}/${E}/${f}`:`${f}/${E}/${S}`,(C||O)&&(R+="/"+Math.round(10*C)/10),O&&(R+=`/${Math.round(O)}`),this._hashName){let D=this._hashName,j=!1,G=window.location.hash.slice(1).split("&").map(X=>{let re=X.split("=")[0];return re===D?(j=!0,`${re}=${R}`):X}).filter(X=>X);return j||G.push(`${D}=${R}`),`#${G.join("&")}`}return`#${R}`}}let Of={linearity:.3,easing:s.b8(0,0,.3,1)},Nm=s.e({deceleration:2500,maxSpeed:1400},Of),WA=s.e({deceleration:20,maxSpeed:1400},Of),xx=s.e({deceleration:1e3,maxSpeed:360},Of),kf=s.e({deceleration:1e3,maxSpeed:90},Of);class Bm{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:T.now(),settings:i})}_drainInertiaBuffer(){let i=this._inertiaBuffer,c=T.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let c={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:v}of this._inertiaBuffer)c.zoom+=v.zoomDelta||0,c.bearing+=v.bearingDelta||0,c.pitch+=v.pitchDelta||0,v.panDelta&&c.pan._add(v.panDelta),v.around&&(c.around=v.around),v.pinchAround&&(c.pinchAround=v.pinchAround);let f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(c.pan.mag()){let v=Kc(c.pan.mag(),f,s.e({},Nm,i||{}));d.offset=c.pan.mult(v.amount/c.pan.mag()),d.center=this._map.transform.center,Gc(d,v)}if(c.zoom){let v=Kc(c.zoom,f,WA);d.zoom=this._map.transform.zoom+v.amount,Gc(d,v)}if(c.bearing){let v=Kc(c.bearing,f,xx);d.bearing=this._map.transform.bearing+s.ac(v.amount,-179,179),Gc(d,v)}if(c.pitch){let v=Kc(c.pitch,f,kf);d.pitch=this._map.transform.pitch+v.amount,Gc(d,v)}if(d.zoom||d.bearing){let v=c.pinchAround===void 0?c.around:c.pinchAround;d.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),s.e(d,{noMoveStart:!0})}}function Gc(g,i){(!g.duration||g.duration<i.duration)&&(g.duration=i.duration,g.easing=i.easing)}function Kc(g,i,c){let{maxSpeed:f,linearity:d,deceleration:v}=c,S=s.ac(g*d/(i/1e3),-f,f),E=Math.abs(S)/(v*d);return{easing:c.easing,duration:1e3*E,amount:S*(E/2)}}class Ni extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f,d={}){let v=I.mousePos(c.getCanvas(),f),S=c.unproject(v);super(i,s.e({point:v,lngLat:S,originalEvent:f},d)),this._defaultPrevented=!1,this.target=c}}class uu extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){let d=i==="touchend"?f.changedTouches:f.touches,v=I.touchPos(c.getCanvasContainer(),d),S=v.map(C=>c.unproject(C)),E=v.reduce((C,O,R,D)=>C.add(O.div(D.length)),new s.P(0,0));super(i,{points:v,point:E,lngLats:S,lngLat:c.unproject(E),originalEvent:f}),this._defaultPrevented=!1}}class bx extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class wx{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new bx(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new Ni(i.type,this._map,i))}mouseup(i){this._map.fire(new Ni(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ni(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Ni(i.type,this._map,i))}mouseover(i){this._map.fire(new Ni(i.type,this._map,i))}mouseout(i){this._map.fire(new Ni(i.type,this._map,i))}touchstart(i){return this._firePreventable(new uu(i.type,this._map,i))}touchmove(i){this._map.fire(new uu(i.type,this._map,i))}touchend(i){this._map.fire(new uu(i.type,this._map,i))}touchcancel(i){this._map.fire(new uu(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xr{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Ni(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ni("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Ni(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Na{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(s.P.convert(i),this._map.terrain)}}class jn{constructor(i,c){this._map=i,this._tr=new Na(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(I.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;let f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;let d=this._startPos;this._lastPos=f,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));let v=Math.min(d.x,f.x),S=Math.max(d.x,f.x),E=Math.min(d.y,f.y),C=Math.max(d.y,f.y);I.setTransform(this._box,`translate(${v}px,${E}px)`),this._box.style.width=S-v+"px",this._box.style.height=C-E+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;let f=this._startPos,d=c;if(this.reset(),I.suppressClick(),f.x!==d.x||f.y!==d.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:i})),{cameraAnimation:v=>v.fitScreenCoordinates(f,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new s.k(i,{originalEvent:c}))}}function Zc(g,i){if(g.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${i.length}`);let c={};for(let f=0;f<g.length;f++)c[g[f].identifier]=i[f];return c}class Um{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(d){let v=new s.P(0,0);for(let S of d)v._add(S);return v.div(d.length)}(c),this.touches=Zc(f,c)))}touchmove(i,c,f){if(this.aborted||!this.centroid)return;let d=Zc(f,c);for(let v in this.touches){let S=d[v];(!S||S.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(i,c,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){let d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class Rf{constructor(i){this.singleTap=new Um(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,f){this.singleTap.touchstart(i,c,f)}touchmove(i,c,f){this.singleTap.touchmove(i,c,f)}touchend(i,c,f){let d=this.singleTap.touchend(i,c,f);if(d){let v=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(d)<30;if(v&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class pl{constructor(i){this._tr=new Na(i),this._zoomIn=new Rf({numTouches:1,numTaps:2}),this._zoomOut=new Rf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,f){this._zoomIn.touchstart(i,c,f),this._zoomOut.touchstart(i,c,f)}touchmove(i,c,f){this._zoomIn.touchmove(i,c,f),this._zoomOut.touchmove(i,c,f)}touchend(i,c,f){let d=this._zoomIn.touchend(i,c,f),v=this._zoomOut.touchend(i,c,f),S=this._tr;return d?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(d)},{originalEvent:i})}):v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(v)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ko{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){let c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;let f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);let d=c.length?c[0]:c;return!this._moved&&d.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(f,d))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&I.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let jm={0:1,2:2};class Df{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){let c=I.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,f){let d=jm[f];return c.buttons===void 0||(c.buttons&d)!==d}(i,this._eventButton)}isValidEndEvent(i){return I.mouseButton(i)===this._eventButton}}class Vm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}let Lf=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=i=>{i.preventDefault()}},$m=({enable:g,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{let f=new Df({checkCorrectEvent:d=>I.mouseButton(d)===0&&d.ctrlKey||I.mouseButton(d)===2});return new Ko({clickTolerance:i,move:(d,v)=>({bearingDelta:(v.x-d.x)*c}),moveStateManager:f,enable:g,assignEvents:Lf})},Wm=({enable:g,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{let f=new Df({checkCorrectEvent:d=>I.mouseButton(d)===0&&d.ctrlKey||I.mouseButton(d)===2});return new Ko({clickTolerance:i,move:(d,v)=>({pitchDelta:(v.y-d.y)*c}),moveStateManager:f,enable:g,assignEvents:Lf})};class lu{constructor(i,c){this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,c,f){return this._calculateTransform(i,c,f)}touchmove(i,c,f){if(this._active){if(!this._shouldBePrevented(f.length))return i.preventDefault(),this._calculateTransform(i,c,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,c,f){this._calculateTransform(i,c,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,f){f.length>0&&(this._active=!0);let d=Zc(f,c),v=new s.P(0,0),S=new s.P(0,0),E=0;for(let O in d){let R=d[O],D=this._touches[O];D&&(v._add(R),S._add(R.sub(D)),E++,d[O]=R)}if(this._touches=d,this._shouldBePrevented(E)||!S.mag())return;let C=S.div(E);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(E),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ff{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,f){if(!this._firstTwoTouches)return;i.preventDefault();let[d,v]=this._firstTwoTouches,S=Hc(f,c,d),E=Hc(f,c,v);if(!S||!E)return;let C=this._aroundCenter?null:S.add(E).div(2);return this._move([S,E],C,i)}touchend(i,c,f){if(!this._firstTwoTouches)return;let[d,v]=this._firstTwoTouches,S=Hc(f,c,d),E=Hc(f,c,v);S&&E||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Hc(g,i,c){for(let f=0;f<g.length;f++)if(g[f].identifier===c)return i[f]}function Gm(g,i){return Math.log(g/i)/Math.LN2}class Km extends Ff{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){let f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Gm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gm(this._distance,f),pinchAround:c}}}function Zm(g,i){return 180*g.angleWith(i)/Math.PI}class Hm extends Ff{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c,f){let d=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Zm(this._vector,d),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());let c=25/(Math.PI*this._minDiameter)*360,f=Zm(i,this._startVector);return Math.abs(f)<c}}function zf(g){return Math.abs(g.y)>Math.abs(g.x)}class ml extends Ff{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,f){super.touchstart(i,c,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,zf(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let d=i[0].sub(this._lastPoints[0]),v=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,v,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(d.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,f){if(this._valid!==void 0)return this._valid;let d=i.mag()>=2,v=c.mag()>=2;if(!d&&!v)return;if(!d||!v)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;let S=i.y>0==c.y>0;return zf(i)&&zf(c)&&S}}let Sx={panStep:100,bearingStep:15,pitchStep:10};class sa{constructor(i){this._tr=new Na(i);let c=Sx;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,f=0,d=0,v=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?d=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?d=-1:(i.preventDefault(),S=1);break;default:return;}return this._rotationDisabled&&(f=0,d=0),{cameraAnimation:E=>{let C=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:uo,zoom:c?Math.round(C.zoom)+c*(i.shiftKey?2:1):C.zoom,bearing:C.bearing+f*this._bearingStep,pitch:C.pitch+d*this._pitchStep,offset:[-v*this._panStep,-S*this._panStep],center:C.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function uo(g){return g*(2-g)}let Xm=4.000244140625;class Ba{constructor(i,c){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new Na(i),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY,f=T.now(),d=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%Xm==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(d*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let c=I.mousePos(this._map.getCanvas(),i),f=this._tr;this._around=c.y>f.transform.height/2-f.transform.getHorizon()?s.N.convert(this._aroundCenter?f.center:f.unproject(c)):s.N.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let i=this._tr.transform;if(this._delta!==0){let C=this._type==="wheel"&&Math.abs(this._delta)>Xm?this._wheelZoomRate:this._defaultZoomRate,O=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&O!==0&&(O=1/O);let R=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(R*O))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,d=this._easing,v,S=!1,E=T.now()-this._lastWheelEventTime;if(this._type==="wheel"&&f&&d&&E){let C=Math.min(E/200,1),O=d(C);v=s.y.number(f,c,O),C<1?this._frameId||(this._frameId=!0):S=!0}else v=c,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:v-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=s.b9;if(this._prevEase){let f=this._prevEase,d=(T.now()-f.start)/f.duration,v=f.easing(d+.01)-f.easing(d),S=.27/Math.sqrt(v*v+1e-4)*.01,E=Math.sqrt(.0729-S*S);c=s.b8(S,E,.25,1)}return this._prevEase={start:T.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class cu{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class GA{constructor(i){this._tr=new Na(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class KA{constructor(){this._tap=new Rf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,f){if(!this._swipePoint)if(this._tapTime){let d=c[0],v=i.timeStamp-this._tapTime<500,S=this._tapPoint.dist(d)<30;v&&S?f.length>0&&(this._swipePoint=d,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,c,f)}touchmove(i,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;let d=c[0],v=d.y-this._swipePoint.y;return this._swipePoint=d,i.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(i,c,f)}touchend(i,c,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{let d=this._tap.touchend(i,c,f);d&&(this._tapTime=i.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qx{constructor(i,c,f){this._el=i,this._mousePan=c,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ax{constructor(i,c,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Jm{constructor(i,c,f,d){this._el=i,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class vl{constructor(i,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",i);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=c,this._container.appendChild(d);let v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=f,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,c){this._enabled&&(this._map.fire(new s.k("cooperativegestureprevented",{gestureType:i,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let ua=g=>g.zoom||g.drag||g.pitch||g.rotate;class nt extends s.k{}function Nf(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Ym{constructor(i,c){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,v)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let S=d.type==="renderFrame"?void 0:d,E={needsRenderFrame:!1},C={},O={},R=d.touches,D=R?this._getMapTouches(R):void 0,j=D?I.touchPos(this._map.getCanvas(),D):I.mousePos(this._map.getCanvas(),d);for(let{handlerName:re,handler:ae,allowed:oe}of this._handlers){if(!ae.isEnabled())continue;let le;this._blockedByActive(O,oe,re)?ae.reset():ae[v||d.type]&&(le=ae[v||d.type](d,j,D),this.mergeHandlerResult(E,C,le,re,S),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||ae.isActive())&&(O[re]=ae)}let G={};for(let re in this._previousActiveHandlers)O[re]||(G[re]=S);this._previousActiveHandlers=O,(Object.keys(G).length||Nf(E))&&(this._changes.push([E,C,G]),this._triggerRenderFrame()),(Object.keys(O).length||Nf(E))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:X}=E;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Bm(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);let f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(let[d,v,S]of this._listeners)I.addEventListener(d,v,d===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(let[i,c,f]of this._listeners)I.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){let c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new wx(c,i));let d=c.boxZoom=new jn(c,i);this._add("boxZoom",d),i.interactive&&i.boxZoom&&d.enable();let v=c.cooperativeGestures=new vl(c,i.cooperativeGestures);this._add("cooperativeGestures",v),i.cooperativeGestures&&v.enable();let S=new pl(c),E=new GA(c);c.doubleClickZoom=new cu(E,S),this._add("tapZoom",S),this._add("clickZoom",E),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();let C=new KA;this._add("tapDragZoom",C);let O=c.touchPitch=new ml(c);this._add("touchPitch",O),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);let R=$m(i),D=Wm(i);c.dragRotate=new Ax(i,R,D),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();let j=(({enable:le,clickTolerance:Q})=>{let fe=new Df({checkCorrectEvent:ge=>I.mouseButton(ge)===0&&!ge.ctrlKey});return new Ko({clickTolerance:Q,move:(ge,we)=>({around:we,panDelta:we.sub(ge)}),activateOnStart:!0,moveStateManager:fe,enable:le,assignEvents:Lf})})(i),G=new lu(i,c);c.dragPan=new qx(f,j,G),this._add("mousePan",j),this._add("touchPan",G,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);let X=new Hm,re=new Km;c.touchZoomRotate=new Jm(f,re,X,C),this._add("touchRotate",X,["touchPan","touchZoom"]),this._add("touchZoom",re,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);let ae=c.scrollZoom=new Ba(c,()=>this._triggerRenderFrame());this._add("scrollZoom",ae,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);let oe=c.keyboard=new sa(c);this._add("keyboard",oe),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Xr(c))}_add(i,c,f){this._handlers.push({handlerName:i,handler:c,allowed:f}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(let{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(let{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ua(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,f){for(let d in i)if(d!==f&&(!c||c.indexOf(d)<0))return!0;return!1}_getMapTouches(i){let c=[];for(let f of i)this._el.contains(f.target)&&c.push(f);return c}mergeHandlerResult(i,c,f,d,v){if(!f)return;s.e(i,f);let S={handlerName:d,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(c.zoom=S),f.panDelta!==void 0&&(c.drag=S),f.pitchDelta!==void 0&&(c.pitch=S),f.bearingDelta!==void 0&&(c.rotate=S)}_applyChanges(){let i={},c={},f={};for(let[d,v,S]of this._changes)d.panDelta&&(i.panDelta=(i.panDelta||new s.P(0,0))._add(d.panDelta)),d.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(i.around=d.around),d.pinchAround!==void 0&&(i.pinchAround=d.pinchAround),d.noInertia&&(i.noInertia=d.noInertia),s.e(c,v),s.e(f,S);this._updateMapTransform(i,c,f),this._changes=[]}_updateMapTransform(i,c,f){let d=this._map,v=d._getTransformForUpdate(),S=d.terrain;if(!(Nf(i)||S&&this._terrainMovement))return this._fireEvents(c,f,!0);let{panDelta:E,zoomDelta:C,bearingDelta:O,pitchDelta:R,around:D,pinchAround:j}=i;j!==void 0&&(D=j),d._stop(!0),D=D||d.transform.centerPoint;let G=v.pointLocation(E?D.sub(E):D);O&&(v.bearing+=O),R&&(v.pitch+=R),C&&(v.zoom+=C),S?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(E)):v.setLocationAtPoint(G,D):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(G,D)):v.setLocationAtPoint(G,D),d._applyUpdatedTransform(v),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,f,!0)}_fireEvents(i,c,f){let d=ua(this._eventsInProgress),v=ua(i),S={};for(let D in i){let{originalEvent:j}=i[D];this._eventsInProgress[D]||(S[`${D}start`]=j),this._eventsInProgress[D]=i[D]}!d&&v&&this._fireEvent("movestart",v.originalEvent);for(let D in S)this._fireEvent(D,S[D]);v&&this._fireEvent("move",v.originalEvent);for(let D in i){let{originalEvent:j}=i[D];this._fireEvent(D,j)}let E={},C;for(let D in this._eventsInProgress){let{handlerName:j,originalEvent:G}=this._eventsInProgress[D];this._handlersById[j].isActive()||(delete this._eventsInProgress[D],C=c[j]||G,E[`${D}end`]=C)}for(let D in E)this._fireEvent(D,E[D]);let O=ua(this._eventsInProgress),R=(d||v)&&!O;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let D=this._map._getTransformForUpdate();D.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(D)}if(f&&R){this._updatingCamera=!0;let D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!D||!D.essential&&T.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:C})),j(this._map.getBearing())&&this._map.resetNorth()):(j(D.bearing||this._map.getBearing())&&(D.bearing=0),D.freezeElevation=!0,this._map.easeTo(D,{originalEvent:C})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new s.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new nt("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ex extends s.E{constructor(i,c){super(),this._renderFrameCallback=()=>{let f=Math.min((T.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.N(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,f){return i=s.P.convert(i).mult(-1),this.panTo(this.transform.center,s.e({offset:i},c),f)}panTo(i,c,f){return this.easeTo(s.e({center:i},c),f)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,f){return this.easeTo(s.e({zoom:i},c),f)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,f){return this.easeTo(s.e({bearing:i},c),f)}resetNorth(i,c){return this.rotateTo(0,s.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Ae.convert(i).adjustAntiMeridian();let f=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,c)}_cameraForBoxAndBearing(i,c,f,d){let v={top:0,bottom:0,right:0,left:0};if(typeof(d=s.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){let je=d.padding;d.padding={top:je,bottom:je,right:je,left:je}}d.padding=s.e(v,d.padding);let S=this.transform,E=S.padding,C=new Ae(i,c),O=S.project(C.getNorthWest()),R=S.project(C.getNorthEast()),D=S.project(C.getSouthEast()),j=S.project(C.getSouthWest()),G=s.ba(-f),X=O.rotate(G),re=R.rotate(G),ae=D.rotate(G),oe=j.rotate(G),le=new s.P(Math.max(X.x,re.x,oe.x,ae.x),Math.max(X.y,re.y,oe.y,ae.y)),Q=new s.P(Math.min(X.x,re.x,oe.x,ae.x),Math.min(X.y,re.y,oe.y,ae.y)),fe=le.sub(Q),ge=(S.width-(E.left+E.right+d.padding.left+d.padding.right))/fe.x,we=(S.height-(E.top+E.bottom+d.padding.top+d.padding.bottom))/fe.y;if(we<0||ge<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let Ce=Math.min(S.scaleZoom(S.scale*Math.min(ge,we)),d.maxZoom),Fe=s.P.convert(d.offset),Ke=new s.P((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(s.ba(f)),tt=Fe.add(Ke).mult(S.scale/S.zoomScale(Ce));return{center:S.unproject(O.add(D).div(2).sub(tt)),zoom:Ce,bearing:f}}fitBounds(i,c,f){return this._fitInternal(this.cameraForBounds(i,c),c,f)}fitScreenCoordinates(i,c,f,d,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(i)),this.transform.pointLocation(s.P.convert(c)),f,d),d,v)}_fitInternal(i,c,f){return i?(delete(c=s.e(i,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(i,c){this.stop();let f=this._getTransformForUpdate(),d=!1,v=!1,S=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(d=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=s.N.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(v=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(S=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new s.k("movestart",c)).fire(new s.k("move",c)),d&&this.fire(new s.k("zoomstart",c)).fire(new s.k("zoom",c)).fire(new s.k("zoomend",c)),v&&this.fire(new s.k("rotatestart",c)).fire(new s.k("rotate",c)).fire(new s.k("rotateend",c)),S&&this.fire(new s.k("pitchstart",c)).fire(new s.k("pitch",c)).fire(new s.k("pitchend",c)),this.fire(new s.k("moveend",c))}calculateCameraOptionsFromTo(i,c,f,d=0){let v=s.Z.fromLngLat(i,c),S=s.Z.fromLngLat(f,d),E=S.x-v.x,C=S.y-v.y,O=S.z-v.z,R=Math.hypot(E,C,O);if(R===0)throw new Error("Can't calculate camera options with same From and To");let D=Math.hypot(E,C),j=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),G=180*Math.atan2(E,-C)/Math.PI,X=180*Math.acos(D/R)/Math.PI;return X=O<0?90-X:90+X,{center:S.toLngLat(),zoom:j,pitch:X,bearing:G}}easeTo(i,c){var f;this._stop(!1,i.easeId),((i=s.e({offset:[0,0],duration:500,easing:s.b9},i)).animate===!1||!i.essential&&T.prefersReducedMotion)&&(i.duration=0);let d=this._getTransformForUpdate(),v=d.zoom,S=d.bearing,E=d.pitch,C=d.padding,O="bearing"in i?this._normalizeBearing(i.bearing,S):S,R="pitch"in i?+i.pitch:E,D="padding"in i?i.padding:d.padding,j=s.P.convert(i.offset),G=d.centerPoint.add(j),X=d.pointLocation(G),{center:re,zoom:ae}=d.getConstrained(s.N.convert(i.center||X),(f=i.zoom)!==null&&f!==void 0?f:v);this._normalizeCenter(re,d);let oe=d.project(X),le=d.project(re).sub(oe),Q=d.zoomScale(ae-v),fe,ge;i.around&&(fe=s.N.convert(i.around),ge=d.locationPoint(fe));let we={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ae!==v,this._rotating=this._rotating||S!==O,this._pitching=this._pitching||R!==E,this._padding=!d.isPaddingEqual(D),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,we),this.terrain&&this._prepareElevation(re),this._ease(Ce=>{if(this._zooming&&(d.zoom=s.y.number(v,ae,Ce)),this._rotating&&(d.bearing=s.y.number(S,O,Ce)),this._pitching&&(d.pitch=s.y.number(E,R,Ce)),this._padding&&(d.interpolatePadding(C,D,Ce),G=d.centerPoint.add(j)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ce),fe)d.setLocationAtPoint(fe,ge);else{let Fe=d.zoomScale(d.zoom-v),Ke=ae>v?Math.min(2,Q):Math.max(.5,Q),tt=Math.pow(Ke,1-Ce),je=d.unproject(oe.add(le.mult(Ce*tt)).mult(Fe));d.setLocationAtPoint(d.renderWorldCopies?je.wrap():je,G)}this._applyUpdatedTransform(d),this._fireMoveEvents(c)},Ce=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Ce)},i),this}_prepareEase(i,c,f={}){this._moving=!0,c||f.moving||this.fire(new s.k("movestart",i)),this._zooming&&!f.zooming&&this.fire(new s.k("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new s.k("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new s.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){let f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(c-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=s.y.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){let c=i.getCameraPosition(),f=this.terrain.getElevationForLngLatZoom(c.lngLat,i.zoom);if(c.altitude<f){let d=this.calculateCameraOptionsFromTo(c.lngLat,f,i.center,i.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(i){let c=[];if(this.terrain&&c.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&c.push(d=>this.transformCameraUpdate(d)),!c.length)return;let f=i.clone();for(let d of c){let v=f.clone(),{center:S,zoom:E,pitch:C,bearing:O,elevation:R}=d(v);S&&(v.center=S),E!==void 0&&(v.zoom=E),C!==void 0&&(v.pitch=C),O!==void 0&&(v.bearing=O),R!==void 0&&(v.elevation=R),f.apply(v)}this.transform.apply(f)}_fireMoveEvents(i){this.fire(new s.k("move",i)),this._zooming&&this.fire(new s.k("zoom",i)),this._rotating&&this.fire(new s.k("rotate",i)),this._pitching&&this.fire(new s.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;let f=this._zooming,d=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new s.k("zoomend",i)),d&&this.fire(new s.k("rotateend",i)),v&&this.fire(new s.k("pitchend",i)),this.fire(new s.k("moveend",i))}flyTo(i,c){var f;if(!i.essential&&T.prefersReducedMotion){let Xe=s.M(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Xe,c)}this.stop(),i=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.b9},i);let d=this._getTransformForUpdate(),v=d.zoom,S=d.bearing,E=d.pitch,C=d.padding,O="bearing"in i?this._normalizeBearing(i.bearing,S):S,R="pitch"in i?+i.pitch:E,D="padding"in i?i.padding:d.padding,j=s.P.convert(i.offset),G=d.centerPoint.add(j),X=d.pointLocation(G),{center:re,zoom:ae}=d.getConstrained(s.N.convert(i.center||X),(f=i.zoom)!==null&&f!==void 0?f:v);this._normalizeCenter(re,d);let oe=d.zoomScale(ae-v),le=d.project(X),Q=d.project(re).sub(le),fe=i.curve,ge=Math.max(d.width,d.height),we=ge/oe,Ce=Q.mag();if("minZoom"in i){let Xe=s.ac(Math.min(i.minZoom,v,ae),d.minZoom,d.maxZoom),Tt=ge/d.zoomScale(Xe-v);fe=Math.sqrt(Tt/Ce*2)}let Fe=fe*fe;function Ke(Xe){let Tt=(we*we-ge*ge+(Xe?-1:1)*Fe*Fe*Ce*Ce)/(2*(Xe?we:ge)*Fe*Ce);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function tt(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function je(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}let Ue=Ke(!1),ut=function(Xe){return je(Ue)/je(Ue+fe*Xe)},Pt=function(Xe){return ge*((je(Ue)*(tt(Tt=Ue+fe*Xe)/je(Tt))-tt(Ue))/Fe)/Ce;var Tt},$e=(Ke(!0)-Ue)/fe;if(Math.abs(Ce)<1e-6||!isFinite($e)){if(Math.abs(ge-we)<1e-6)return this.easeTo(i,c);let Xe=we<ge?-1:1;$e=Math.abs(Math.log(we/ge))/fe,Pt=()=>0,ut=Tt=>Math.exp(Xe*fe*Tt)}return i.duration="duration"in i?+i.duration:1e3*$e/("screenSpeed"in i?+i.screenSpeed/fe:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=S!==O,this._pitching=R!==E,this._padding=!d.isPaddingEqual(D),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(re),this._ease(Xe=>{let Tt=Xe*$e,Tr=1/ut(Tt);d.zoom=Xe===1?ae:v+d.scaleZoom(Tr),this._rotating&&(d.bearing=s.y.number(S,O,Xe)),this._pitching&&(d.pitch=s.y.number(E,R,Xe)),this._padding&&(d.interpolatePadding(C,D,Xe),G=d.centerPoint.add(j)),this.terrain&&!i.freezeElevation&&this._updateElevation(Xe);let Bt=Xe===1?re:d.unproject(le.add(Q.mult(Pt(Tt))).mult(Tr));d.setLocationAtPoint(d.renderWorldCopies?Bt.wrap():Bt,G),this._applyUpdatedTransform(d),this._fireMoveEvents(c)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}return i||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(i,c,f){f.animate===!1||f.duration===0?(i(1),c()):(this._easeStart=T.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=s.b3(i,-180,180);let f=Math.abs(i-c);return Math.abs(i-360-c)<f&&(i-=360),Math.abs(i+360-c)<f&&(i+=360),i}_normalizeCenter(i,c){if(!c.renderWorldCopies||c.lngRange)return;let f=i.lng-c.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(s.N.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}let gl={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class yl{constructor(i=gl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){let f=this._map._getUIString(`AttributionControl.${c}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){let d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}let c=this._map.style.sourceCaches;for(let d in c){let v=c[d];if(v.used||v.usedForTerrain){let S=v.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i=i.filter(d=>String(d).trim()),i.sort((d,v)=>d.length-v.length),i=i.filter((d,v)=>{for(let S=v+1;S<i.length;S++)if(i[S].indexOf(d)>=0)return!1;return!0});let f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Qm{constructor(i={}){this._updateCompact=()=>{let c=this._container.children;if(c.length){let f=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");let c=I.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Xt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){let c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){let c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(let d of f)if(d.id===i)return void(d.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let c=this._currentlyRunning=this._queue;this._queue=[];for(let f of c)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ev=s.Y([{name:"a_pos3d",type:"Int16",components:3}]);class ZA extends s.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*e0(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];let f={};for(let d of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))f[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),s.aP(d.posMatrix,0,s.X,0,s.X,0,1),this._tiles[d.key]=new no(d,this.tileSize));for(let d in this._tiles)f[d]||delete this._tiles[d]}freeRtt(i){for(let c in this._tiles){let f=this._tiles[c];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){let c={};for(let f of this._renderableTilesKeys){let d=this._tiles[f].tileID;if(d.canonical.equals(i.canonical)){let v=i.clone();v.posMatrix=new Float64Array(16),s.aP(v.posMatrix,0,s.X,0,s.X,0,1),c[f]=v}else if(d.canonical.isChildOf(i.canonical)){let v=i.clone();v.posMatrix=new Float64Array(16);let S=d.canonical.z-i.canonical.z,E=d.canonical.x-(d.canonical.x>>S<<S),C=d.canonical.y-(d.canonical.y>>S<<S),O=s.X>>S;s.aP(v.posMatrix,0,O,0,O,0,1),s.J(v.posMatrix,v.posMatrix,[-E*O,-C*O,0]),c[f]=v}else if(i.canonical.isChildOf(d.canonical)){let v=i.clone();v.posMatrix=new Float64Array(16);let S=i.canonical.z-d.canonical.z,E=i.canonical.x-(i.canonical.x>>S<<S),C=i.canonical.y-(i.canonical.y>>S<<S),O=s.X>>S;s.aP(v.posMatrix,0,s.X,0,s.X,0,1),s.J(v.posMatrix,v.posMatrix,[E*O,C*O,0]),s.K(v.posMatrix,v.posMatrix,[1/e0(2,S),1/e0(2,S),0]),c[f]=v}}return c}getSourceTile(i,c){let f=this.sourceCache._source,d=i.overscaledZ-this.deltaZoom;if(d>f.maxzoom&&(d=f.maxzoom),d<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(d).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!v||!v.dem)&&c)for(;d>=f.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(i.scaledTo(d--).key);return v}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class tv{constructor(i,c,f){this.painter=i,this.sourceCache=new ZA(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,f,d=s.X){var v;if(!(c>=0&&c<d&&f>=0&&f<d))return 0;let S=this.getTerrainData(i),E=(v=S.tile)===null||v===void 0?void 0:v.dem;if(!E)return 0;let C=function(X,re,ae){var oe=re[0],le=re[1];return X[0]=ae[0]*oe+ae[4]*le+ae[12],X[1]=ae[1]*oe+ae[5]*le+ae[13],X}([],[c/d*s.X,f/d*s.X],S.u_terrain_matrix),O=[C[0]*E.dim,C[1]*E.dim],R=Math.floor(O[0]),D=Math.floor(O[1]),j=O[0]-R,G=O[1]-D;return E.get(R,D)*(1-j)*(1-G)+E.get(R+1,D)*j*(1-G)+E.get(R,D+1)*(1-j)*G+E.get(R+1,D+1)*j*G}getElevationForLngLatZoom(i,c){if(!s.bb(c,i.wrap()))return 0;let{tileID:f,mercatorX:d,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(f,d%s.X,v%s.X,s.X)}getElevation(i,c,f,d=s.X){return this.getDEMElevation(i,c,f,d)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){let d=this.painter.context,v=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ve(d,v,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ve(d,new s.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.an([])}let c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){let d=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Ve(d,c.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),c.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}let f=c&&c+c.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){let d=this.sourceCache.sourceCache._source.maxzoom,v=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=d?v=i.canonical.z-d:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let S=i.canonical.x-(i.canonical.x>>v<<v),E=i.canonical.y-(i.canonical.y>>v<<v),C=s.bc(new Float64Array(16),[1/(s.X<<v),1/(s.X<<v),0]);s.J(C,C,[S*s.X,E*s.X,0]),this._demMatrixCache[i.key]={matrix:C,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){let c=this.painter,f=c.width/devicePixelRatio,d=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ve(c.context,{width:f,height:d,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ve(c.context,{width:f,height:d,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,d,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,d))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,S=0;v<this._coordsTextureSize;v++)for(let E=0;E<this._coordsTextureSize;E++,S+=4)c[S+0]=255&E,c[S+1]=255&v,c[S+2]=E>>8<<4|v>>8,c[S+3]=0;let f=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),d=new Ve(i,f,i.gl.RGBA,{premultiply:!1});return d.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);let c=new Uint8Array(4),f=this.painter.context,d=f.gl,v=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(v,E-S-1,1,1,d.RGBA,d.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);let C=c[0]+(c[2]>>4<<8),O=c[1]+((15&c[2])<<8),R=this.coordsIndex[255-c[3]],D=R&&this.sourceCache.getTileByID(R);if(!D)return null;let j=this._coordsTextureSize,G=(1<<D.tileID.canonical.z)*j;return new s.Z((D.tileID.canonical.x*j+C)/G+D.tileID.wrap,(D.tileID.canonical.y*j+O)/G,this.getElevation(D.tileID,C,O,j))}depthAtPoint(i){let c=new Uint8Array(4),f=this.painter.context,d=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let i=this.painter.context,c=new s.bd,f=new s.aY,d=this.meshSize,v=s.X/d,S=d*d;for(let D=0;D<=d;D++)for(let j=0;j<=d;j++)c.emplaceBack(j*v,D*v,0);for(let D=0;D<S;D+=d+1)for(let j=0;j<d;j++)f.emplaceBack(j+D,d+j+D+1,d+j+D+2),f.emplaceBack(j+D,d+j+D+2,j+D+1);let E=c.length,C=E+2*(d+1);for(let D of[0,1])for(let j=0;j<=d;j++)for(let G of[0,1])c.emplaceBack(j*v,D*s.X,G);for(let D=0;D<2*d;D+=2)f.emplaceBack(C+D,C+D+1,C+D+3),f.emplaceBack(C+D,C+D+3,C+D+2),f.emplaceBack(E+D,E+D+3,E+D+1),f.emplaceBack(E+D,E+D+2,E+D+3);let O=c.length,R=O+2*(d+1);for(let D of[0,1])for(let j=0;j<=d;j++)for(let G of[0,1])c.emplaceBack(D*s.X,j*v,G);for(let D=0;D<2*d;D+=2)f.emplaceBack(O+D,O+D+1,O+D+3),f.emplaceBack(O+D,O+D+3,O+D+2),f.emplaceBack(R+D,R+D+3,R+D+1),f.emplaceBack(R+D,R+D+2,R+D+3);return this._mesh=new Cf(i.createVertexBuffer(c,ev.members),i.createIndexBuffer(f),s.a0.simpleSegment(0,0,c.length,f.length)),this._mesh}getMeshFrameDelta(i){return 2*Math.PI*s.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var f;let{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(f=this.getMinMaxElevation(d).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){let c=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,c){let f=s.Z.fromLngLat(i.wrap()),d=(1<<c)*s.X,v=f.x*d,S=f.y*d,E=Math.floor(v/s.X),C=Math.floor(S/s.X);return{tileID:new s.S(c,0,c,E,C),mercatorX:v,mercatorY:S}}}class HA{constructor(i,c,f){this._context=i,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){let c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Ve(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:i,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(let c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(let i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}let _l={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Tx{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new HA(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(c)),this._coordsDescendingInv={};for(let f in i.sourceCaches){this._coordsDescendingInv[f]={};let d=i.sourceCaches[f].getVisibleCoordinates();for(let v of d){let S=this.terrain.sourceCache.getTerrainCoords(v);for(let E in S)this._coordsDescendingInv[f][E]||(this._coordsDescendingInv[f][E]=[]),this._coordsDescendingInv[f][E].push(S[E])}}this._coordsDescendingInvStr={};for(let f of i._order){let d=i._layers[f],v=d.source;if(_l[d.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(let S in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][S]=this._coordsDescendingInv[v][S].map(E=>E.key).sort().join()}}for(let f of this._renderableTiles)for(let d in this._coordsDescendingInvStr){let v=this._coordsDescendingInvStr[d][f.tileID.key];v&&v!==f.rttCoords[d]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;let c=i.type,f=this.painter,d=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(_l[c]&&(this._prevType&&_l[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!d))return!0;if(_l[this._prevType]||_l[c]&&d){this._prevType=c;let v=this._stacks.length-1,S=this._stacks[v]||[];for(let E of this._renderableTiles){if(this.pool.isFull()&&(_x(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[v]){let O=this.pool.getObjectForId(E.rtt[v].id);if(O.stamp===E.rtt[v].stamp){this.pool.useObject(O);continue}}let C=this.pool.getOrCreateFreeObject();this.pool.useObject(C),this.pool.stampObject(C),E.rtt[v]={id:C.id,stamp:C.stamp},f.context.bindFramebuffer.set(C.fbo.framebuffer),f.context.clear({color:s.aM.transparent,stencil:0}),f.currentStencilSource=void 0;for(let O=0;O<S.length;O++){let R=f.style._layers[S[O]],D=R.source?this._coordsDescendingInv[R.source][E.tileID.key]:[E.tileID];f.context.viewport.set([0,0,C.fbo.width,C.fbo.height]),f._renderTileClippingMasks(R,D),f.renderLayer(f,f.style.sourceCaches[R.source],R,D),R.source&&(E.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][E.tileID.key])}}return _x(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),_l[c]}return!1}}let rv={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ix=m,XA={hash:!1,interactive:!0,bearingSnap:7,attributionControl:gl,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},iv=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},JA={showCompass:!0,showZoom:!0,visualizePitch:!1};class YA{constructor(i,c,f=!1){this.mousedown=S=>{this.startMouse(s.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),I.mousePos(this.element,S)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,I.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let d=i.dragRotate._mouseRotate.getClickTolerance(),v=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=$m({clickTolerance:d,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:E,bearingDegreesPerPixelMoved:C=.8})=>{let O=new Vm;return new Ko({clickTolerance:E,move:(R,D)=>({bearingDelta:(D.x-R.x)*C}),moveStateManager:O,enable:S,assignEvents:iv})})({clickTolerance:d,enable:!0}),this.map=i,f&&(this.mousePitch=Wm({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:E,pitchDegreesPerPixelMoved:C=-.5})=>{let O=new Vm;return new Ko({clickTolerance:E,move:(R,D)=>({pitchDelta:(D.y-R.y)*C}),moveStateManager:O,enable:S,assignEvents:iv})})({clickTolerance:v,enable:!0})),I.addEventListener(c,"mousedown",this.mousedown),I.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),I.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),I.disableDrag()}moveMouse(i,c){let f=this.map,{bearingDelta:d}=this.mouseRotate.dragMove(i,c)||{};if(d&&f.setBearing(f.getBearing()+d),this.mousePitch){let{pitchDelta:v}=this.mousePitch.dragMove(i,c)||{};v&&f.setPitch(f.getPitch()+v)}}moveTouch(i,c){let f=this.map,{bearingDelta:d}=this.touchRotate.dragMove(i,c)||{};if(d&&f.setBearing(f.getBearing()+d),this.touchPitch){let{pitchDelta:v}=this.touchPitch.dragMove(i,c)||{};v&&f.setPitch(f.getPitch()+v)}}off(){let i=this.element;I.removeEventListener(i,"mousedown",this.mousedown),I.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let Vn;function Er(g,i,c){let f=new s.N(g.lng,g.lat);if(g=new s.N(g.lng,g.lat),i){let d=new s.N(g.lng-360,g.lat),v=new s.N(g.lng+360,g.lat),S=c.locationPoint(g).distSqr(i);c.locationPoint(d).distSqr(i)<S?g=d:c.locationPoint(v).distSqr(i)<S&&(g=v)}for(;Math.abs(g.lng-c.center.lng)>180;){let d=c.locationPoint(g);if(d.x>=0&&d.y>=0&&d.x<=c.width&&d.y<=c.height)break;g.lng>c.center.lng?g.lng-=360:g.lng+=360}return g.lng!==f.lng&&c.locationPoint(g).y>c.height/2-c.getHorizon()?g:f}let xl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bf(g,i,c){let f=g.classList;for(let d in xl)f.remove(`maplibregl-${c}-anchor-${d}`);f.add(`maplibregl-${c}-anchor-${i}`)}class Uf extends s.E{constructor(i){if(super(),this._onKeyPress=c=>{let f=c.code,d=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=c=>{let f=c.originalEvent.target,d=this._element;this._popup&&(f===d||d.contains(f))&&this.togglePopup()},this._update=c=>{var f;if(!this._map)return;let d=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Er(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${xl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${v}`),T.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){let f=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=s.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div");let c=I.createNS("http://www.w3.org/2000/svg","svg"),f=41,d=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${f}px`),c.setAttributeNS(null,"width",`${d}px`),c.setAttributeNS(null,"viewBox",`0 0 ${d} ${f}`);let v=I.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");let S=I.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");let E=I.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");let C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let oe of C){let le=I.createNS("http://www.w3.org/2000/svg","ellipse");le.setAttributeNS(null,"opacity","0.04"),le.setAttributeNS(null,"cx","10.5"),le.setAttributeNS(null,"cy","5.80029008"),le.setAttributeNS(null,"rx",oe.rx),le.setAttributeNS(null,"ry",oe.ry),E.appendChild(le)}let O=I.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);let R=I.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(R);let D=I.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"opacity","0.25"),D.setAttributeNS(null,"fill","#000000");let j=I.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),D.appendChild(j);let G=I.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");let X=I.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(8.0, 8.0)");let re=I.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#000000"),re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962");let ae=I.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),X.appendChild(re),X.appendChild(ae),S.appendChild(E),S.appendChild(O),S.appendChild(D),S.appendChild(G),S.appendChild(X),c.appendChild(S),c.setAttributeNS(null,"height",f*this._scale+"px"),c.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(c),this._offset=s.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Bf(this._element,this._anchor,"marker"),i&&i.className)for(let c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.N.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){let d=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){let i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var c,f;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let d=this._map,v=d.terrain.depthAtPoint(this._pos),S=d.terrain.getElevationForLngLatZoom(this._lngLat,d.transform.tileZoom);if(d.transform.lngLatToCameraDepth(this._lngLat,S)-v<.006)return void(this._element.style.opacity=this._opacity);let E=-this._offset.y/d.transform._pixelPerMeter,C=Math.sin(d.getPitch()*Math.PI/180)*E,O=d.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),R=d.transform.lngLatToCameraDepth(this._lngLat,S+C)-O>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=s.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,c){return i===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}let Cx={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Xc=0,Jc=!1,lo={maxWidth:100,unit:"metric"};function Yc(g,i,c){let f=c&&c.maxWidth||100,d=g._container.clientHeight/2,v=g.unproject([0,d]),S=g.unproject([f,d]),E=v.distanceTo(S);if(c&&c.unit==="imperial"){let C=3.2808*E;C>5280?st(i,f,C/5280,g._getUIString("ScaleControl.Miles")):st(i,f,C,g._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?st(i,f,E/1852,g._getUIString("ScaleControl.NauticalMiles")):E>=1e3?st(i,f,E/1e3,g._getUIString("ScaleControl.Kilometers")):st(i,f,E,g._getUIString("ScaleControl.Meters"))}function st(g,i,c,f){let d=function(v){let S=Math.pow(10,`${Math.floor(v)}`.length-1),E=v/S;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(C){let O=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*O)/O}(E),S*E}(c);g.style.width=i*(d/c)+"px",g.innerHTML=`${d}&nbsp;${f}`}let St={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},jf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Vf(g){if(g){if(typeof g=="number"){let i=Math.round(Math.abs(g)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,g),"top-left":new s.P(i,i),"top-right":new s.P(-i,i),bottom:new s.P(0,-g),"bottom-left":new s.P(i,-i),"bottom-right":new s.P(-i,-i),left:new s.P(g,0),right:new s.P(-g,0)}}if(g instanceof s.P||Array.isArray(g)){let i=s.P.convert(g);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:s.P.convert(g.center||[0,0]),top:s.P.convert(g.top||[0,0]),"top-left":s.P.convert(g["top-left"]||[0,0]),"top-right":s.P.convert(g["top-right"]||[0,0]),bottom:s.P.convert(g.bottom||[0,0]),"bottom-left":s.P.convert(g["bottom-left"]||[0,0]),"bottom-right":s.P.convert(g["bottom-right"]||[0,0]),left:s.P.convert(g.left||[0,0]),right:s.P.convert(g.right||[0,0])}}return Vf(new s.P(0,0))}let nv=m;u.AJAXError=s.bh,u.Evented=s.E,u.LngLat=s.N,u.MercatorCoordinate=s.Z,u.Point=s.P,u.addProtocol=s.bi,u.config=s.a,u.removeProtocol=s.bj,u.AttributionControl=yl,u.BoxZoomHandler=jn,u.CanvasSource=mt,u.CooperativeGesturesHandler=vl,u.DoubleClickZoomHandler=cu,u.DragPanHandler=qx,u.DragRotateHandler=Ax,u.EdgeInsets=fl,u.FullscreenControl=class extends s.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var i;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=c==null?void 0:c.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let g=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=Oe,u.GeolocateControl=class extends s.E{constructor(g){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{let c=new s.N(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,d=this._map.getBearing(),v=s.e({bearing:d},this.options.fitBoundsOptions),S=Ae.fromLngLat(c,f);this._map.fitBounds(S,v,{geolocateSource:!0})},this._updateMarker=i=>{if(i){let c=new s.N(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Jc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{let c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Uf({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")),this.fire(new s.k("userlocationlostfocus")))})}},this.options=s.e({},Cx,g)}onAdd(g){return this._map=g,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(i=!1){if(Vn!==void 0&&!i)return Vn;if(window.navigator.permissions===void 0)return Vn=!!window.navigator.geolocation,Vn;try{Vn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(c){Vn=!!window.navigator.geolocation}return Vn})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Xc=0,Jc=!1}_isOutOfMapMaxBounds(g){let i=this._map.getMaxBounds(),c=g.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let g=this._map.getBounds(),i=g.getSouthEast(),c=g.getNorthEast(),f=i.distanceTo(c),d=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Xc--,Jc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart")),this.fire(new s.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Xc++,Xc>1?(g={maximumAge:6e5,timeout:0},Jc=!0):(g=this.options.positionOptions,Jc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.Hash=Mf,u.ImageSource=et,u.KeyboardHandler=sa,u.LngLatBounds=Ae,u.LogoControl=Qm,u.Map=class extends Ex{constructor(g){s.bf.mark(s.bg.create);let i=Object.assign(Object.assign({},XA),g);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new dl(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Xt,this._controls=[],this._mapId=s.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},rv),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=H.addThrottleControl(()=>this.isMoving()),this._requestManager=new J(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let c=!1,f=Wc(d=>{this._trackResize&&!this._removed&&(this.resize(d),this.redraw())},50);this._resizeObserver=new ResizeObserver(d=>{c?f(d):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ym(this,i),this._hash=i.hash&&new Mf(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,s.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new yl(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new Qm,i.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new s.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new s.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new s.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(g,i){if(i===void 0&&(i=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let c=g.onAdd(this);this._controls.push(g);let f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let i=this._controls.indexOf(g);return i>-1&&this._controls.splice(i,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,i,c,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,i,c,f)}resize(g){var i;let c=this._containerDimensions(),f=c[0],d=c[1],v=this._getClampedPixelRatio(f,d);if(this._resizeCanvas(f,d,v),this.painter.resize(f,d,v),this.painter.overLimit()){let E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];let C=this._getClampedPixelRatio(f,d);this._resizeCanvas(f,d,C),this.painter.resize(f,d,C)}this.transform.resize(f,d),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,d);let S=!this._moving;return S&&(this.stop(),this.fire(new s.k("movestart",g)).fire(new s.k("move",g))),this.fire(new s.k("resize",g)),S&&this.fire(new s.k("moveend",g)),this}_getClampedPixelRatio(g,i){let{0:c,1:f}=this._maxCanvasSize,d=this.getPixelRatio(),v=g*d,S=i*d;return Math.min(v>c?c/v:1,S>f?f/S:1)*d}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(Ae.convert(g)),this._update()}setMinZoom(g){if((g=g==null?-2:g)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g==null?22:g)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g==null?0:g)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g==null?60:g)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}project(g){return this.transform.locationPoint(s.N.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(s.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,i,c){if(g==="mouseenter"||g==="mouseover"){let f=!1;return{layers:i,listener:c,delegates:{mousemove:v=>{let S=i.filter(C=>this.getLayer(C)),E=S.length!==0?this.queryRenderedFeatures(v.point,{layers:S}):[];E.length?f||(f=!0,c.call(this,new Ni(g,this,v.originalEvent,{features:E}))):f=!1},mouseout:()=>{f=!1}}}}if(g==="mouseleave"||g==="mouseout"){let f=!1;return{layers:i,listener:c,delegates:{mousemove:S=>{let E=i.filter(C=>this.getLayer(C));(E.length!==0?this.queryRenderedFeatures(S.point,{layers:E}):[]).length?f=!0:f&&(f=!1,c.call(this,new Ni(g,this,S.originalEvent)))},mouseout:S=>{f&&(f=!1,c.call(this,new Ni(g,this,S.originalEvent)))}}}}{let f=d=>{let v=i.filter(E=>this.getLayer(E)),S=v.length!==0?this.queryRenderedFeatures(d.point,{layers:v}):[];S.length&&(d.features=S,c.call(this,d),delete d.features)};return{layers:i,listener:c,delegates:{[g]:f}}}}_saveDelegatedListener(g,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(i)}_removeDelegatedListener(g,i,c){if(!this._delegatedListeners||!this._delegatedListeners[g])return;let f=this._delegatedListeners[g];for(let d=0;d<f.length;d++){let v=f[d];if(v.listener===c&&v.layers.length===i.length&&v.layers.every(S=>i.includes(S))){for(let S in v.delegates)this.off(S,v.delegates[S]);return void f.splice(d,1)}}}on(g,i,c){if(c===void 0)return super.on(g,i);let f=this._createDelegatedListener(g,typeof i=="string"?[i]:i,c);this._saveDelegatedListener(g,f);for(let d in f.delegates)this.on(d,f.delegates[d]);return this}once(g,i,c){if(c===void 0)return super.once(g,i);let f=typeof i=="string"?[i]:i,d=this._createDelegatedListener(g,f,c);for(let v in d.delegates){let S=d.delegates[v];d.delegates[v]=(...E)=>{this._removeDelegatedListener(g,f,c),S(...E)}}this._saveDelegatedListener(g,d);for(let v in d.delegates)this.once(v,d.delegates[v]);return this}off(g,i,c){return c===void 0?super.off(g,i):(this._removeDelegatedListener(g,typeof i=="string"?[i]:i,c),this)}queryRenderedFeatures(g,i){if(!this.style)return[];let c,f=g instanceof s.P||Array.isArray(g),d=f?g:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:g)||{},d instanceof s.P||typeof d[0]=="number")c=[s.P.convert(d)];else{let v=s.P.convert(d[0]),S=s.P.convert(d[1]);c=[v,new s.P(S.x,v.y),S,new s.P(v.x,S.y),v]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(g,i){return this.style.querySourceFeatures(g,i)}setStyle(g,i){return(i=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(g,i))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){let i=this._locale[g];if(i==null)throw new Error(`Missing UI string '${g}'`);return i}_updateStyle(g,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,i));let c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new pf(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,i,c):this.style.loadJSON(g,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new pf(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,i){if(typeof g=="string"){let c=this._requestManager.transformRequest(g,"Style");s.h(c,new AbortController).then(f=>{this._updateDiff(f.data,i)}).catch(f=>{f&&this.fire(new s.j(f))})}else typeof g=="object"&&this._updateDiff(g,i)}_updateDiff(g,i){try{this.style.setState(g,i)&&this._update(!0)}catch(c){s.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(g,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(g,i){return this._lazyInitEmptyStyle(),this.style.addSource(g,i),this._update(!0)}isSourceLoaded(g){let i=this.style&&this.style.sourceCaches[g];if(i!==void 0)return i.loaded();this.fire(new s.j(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){let i=this.style.sourceCaches[g.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&i.reload();for(let c in this.style._layers){let f=this.style._layers[c];f.type==="hillshade"&&f.source===g.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new tv(this.painter,i,g),this.painter.renderToTexture=new Tx(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==g.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:g})),this}getTerrain(){var g,i;return(i=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&i!==void 0?i:null}areTilesLoaded(){let g=this.style&&this.style.sourceCaches;for(let i in g){let c=g[i]._tiles;for(let f in c){let d=c[f];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,i,c={}){let{pixelRatio:f=1,sdf:d=!1,stretchX:v,stretchY:S,content:E,textFitWidth:C,textFitHeight:O}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||s.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:R,height:D,data:j}=i,G=i;return this.style.addImage(g,{data:new s.R({width:R,height:D},new Uint8Array(j)),pixelRatio:f,stretchX:v,stretchY:S,content:E,textFitWidth:C,textFitHeight:O,sdf:d,version:0,userImage:G}),G.onAdd&&G.onAdd(this,g),this}}{let{width:R,height:D,data:j}=T.getImageData(i);this.style.addImage(g,{data:new s.R({width:R,height:D},j),pixelRatio:f,stretchX:v,stretchY:S,content:E,textFitWidth:C,textFitHeight:O,sdf:d,version:0})}}updateImage(g,i){let c=this.style.getImage(g);if(!c)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let f=i instanceof HTMLImageElement||s.b(i)?T.getImageData(i):i,{width:d,height:v,data:S}=f;if(d===void 0||v===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==c.data.width||v!==c.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let E=!(i instanceof HTMLImageElement||s.b(i));return c.data.replace(S,E),this.style.updateImage(g,c),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return H.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,i){return this._lazyInitEmptyStyle(),this.style.addLayer(g,i),this._update(!0)}moveLayer(g,i){return this.style.moveLayer(g,i),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,i,c){return this.style.setLayerZoomRange(g,i,c),this._update(!0)}setFilter(g,i,c={}){return this.style.setFilter(g,i,c),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,i,c,f={}){return this.style.setPaintProperty(g,i,c,f),this._update(!0)}getPaintProperty(g,i){return this.style.getPaintProperty(g,i)}setLayoutProperty(g,i,c,f={}){return this.style.setLayoutProperty(g,i,c,f),this._update(!0)}getLayoutProperty(g,i){return this.style.getLayoutProperty(g,i)}setGlyphs(g,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,i,c,f=>{f||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,i,c=>{c||this._update(!0)}),this}setLight(g,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(g){return this._lazyInitEmptyStyle(),this.style.setSky(g),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,i){return this.style.setFeatureState(g,i),this._update()}removeFeatureState(g,i){return this.style.removeFeatureState(g,i),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,i=0;return this._container&&(g=this._container.clientWidth||400,i=this._container.clientHeight||300),[g,i]}_setupContainer(){let g=this._container;g.classList.add("maplibregl-map");let i=this._canvasContainer=I.create("div","maplibregl-canvas-container",g);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let c=this._containerDimensions(),f=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],f);let d=this._controlContainer=I.create("div","maplibregl-control-container",g),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{v[S]=I.create("div",`maplibregl-ctrl-${S} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,i,c){this._canvas.width=Math.floor(c*g),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${i}px`}_setupPainter(){let g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:g},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});let c=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!c){let f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new Pf(c,this.transform),L.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){let i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let d=this.transform.zoom,v=T.now();this.style.zoomHistory.update(d,v);let S=new s.z(d,{now:v,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=S.crossFadingFactor();E===1&&E===this._crossFadingFactor||(c=!0,this._crossFadingFactor=E),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bf.mark(s.bg.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,s.bf.mark(s.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(let c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();let i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.bf.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(g=>{s.bf.frame(g),this._frameRequest=null,this._render(g)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return Ix}getCameraTargetElevation(){return this.transform.elevation}},u.MapMouseEvent=Ni,u.MapTouchEvent=uu,u.MapWheelEvent=bx,u.Marker=Uf,u.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{let i=this._map.getZoom(),c=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{let i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{let f=this._map._getUIString(`NavigationControl.${c}`);i.title=f,i.setAttribute("aria-label",f)},this.options=s.e({},JA,g),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new YA(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,i){let c=I.create("button",g,this._container);return c.type="button",c.addEventListener("click",i),c}},u.Popup=class extends s.E{constructor(g){super(),this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Er(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!i)return;let f=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let d=this.options.anchor,v=Vf(this.options.offset);if(!d){let E=this._container.offsetWidth,C=this._container.offsetHeight,O;O=f.y+v.bottom.y<C?["top"]:f.y>this._map.transform.height-C?["bottom"]:[],f.x<E/2?O.push("left"):f.x>this._map.transform.width-E/2&&O.push("right"),d=O.length===0?"bottom":O.join("-")}let S=f.add(v[d]);this.options.subpixelPositioning||(S=S.round()),I.setTransform(this._container,`${xl[d]} translate(${S.x}px,${S.y}px)`),Bf(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(St),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=s.N.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){let i=document.createDocumentFragment(),c=document.createElement("body"),f;for(c.innerHTML=g;f=c.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let g=this._container.querySelector(jf);g&&g.focus()}},u.RasterDEMTileSource=Se,u.RasterTileSource=ue,u.ScaleControl=class{constructor(g){this._onMove=()=>{Yc(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Yc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},lo),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=Ba,u.Style=pf,u.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=ml,u.TwoFingersTouchRotateHandler=Hm,u.TwoFingersTouchZoomHandler=Km,u.TwoFingersTouchZoomRotateHandler=Jm,u.VectorTileSource=Yu,u.VideoSource=Je,u.addSourceType=(g,i)=>s._(void 0,void 0,void 0,function*(){if(ar(g))throw new Error(`A source type called "${g}" already exists.`);((c,f)=>{Qt[c]=f})(g,i)}),u.clearPrewarmedResources=function(){let g=Ji;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Oa),Ji=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return vi().getRTLTextPluginStatus()},u.getVersion=function(){return nv},u.getWorkerCount=function(){return ia.workerCount},u.getWorkerUrl=function(){return s.a.WORKER_URL},u.importScriptInWorkers=function(g){return hs().broadcast("IS",g)},u.prewarm=function(){ro().acquire(Oa)},u.setMaxParallelImageRequests=function(g){s.a.MAX_PARALLEL_IMAGE_REQUESTS=g},u.setRTLTextPlugin=function(g,i){return vi().setRTLTextPlugin(g,i)},u.setWorkerCount=function(g){ia.workerCount=g},u.setWorkerUrl=function(g){s.a.WORKER_URL=g}});var a=e;return a})});var aF=w((UVt,Xde)=>{"use strict";Xde.exports=function(t,r){return function(){for(var u=new Array(arguments.length),s=0;s<u.length;s++)u[s]=arguments[s];return t.apply(r,u)}}});var Ca=w((jVt,Qde)=>{"use strict";var v_t=aF(),of=Object.prototype.toString;function uF(e){return of.call(e)==="[object Array]"}function oF(e){return typeof e=="undefined"}function g_t(e){return e!==null&&!oF(e)&&e.constructor!==null&&!oF(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function y_t(e){return of.call(e)==="[object ArrayBuffer]"}function __t(e){return typeof FormData!="undefined"&&e instanceof FormData}function x_t(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function b_t(e){return typeof e=="string"}function w_t(e){return typeof e=="number"}function Jde(e){return e!==null&&typeof e=="object"}function YS(e){if(of.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function S_t(e){return of.call(e)==="[object Date]"}function q_t(e){return of.call(e)==="[object File]"}function A_t(e){return of.call(e)==="[object Blob]"}function Yde(e){return of.call(e)==="[object Function]"}function E_t(e){return Jde(e)&&Yde(e.pipe)}function T_t(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function I_t(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function C_t(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function lF(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),uF(e))for(var r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.call(null,e[u],u,e)}function sF(){var e={};function t(u,s){YS(e[s])&&YS(u)?e[s]=sF(e[s],u):YS(u)?e[s]=sF({},u):uF(u)?e[s]=u.slice():e[s]=u}for(var r=0,a=arguments.length;r<a;r++)lF(arguments[r],t);return e}function P_t(e,t,r){return lF(t,function(u,s){r&&typeof u=="function"?e[s]=v_t(u,r):e[s]=u}),e}function M_t(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}Qde.exports={isArray:uF,isArrayBuffer:y_t,isBuffer:g_t,isFormData:__t,isArrayBufferView:x_t,isString:b_t,isNumber:w_t,isObject:Jde,isPlainObject:YS,isUndefined:oF,isDate:S_t,isFile:q_t,isBlob:A_t,isFunction:Yde,isStream:E_t,isURLSearchParams:T_t,isStandardBrowserEnv:C_t,forEach:lF,merge:sF,extend:P_t,trim:I_t,stripBOM:M_t}});var cF=w((VVt,tpe)=>{"use strict";var em=Ca();function epe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}tpe.exports=function(t,r,a){if(!r)return t;var u;if(a)u=a(r);else if(em.isURLSearchParams(r))u=r.toString();else{var s=[];em.forEach(r,function(q,T){q===null||typeof q=="undefined"||(em.isArray(q)?T=T+"[]":q=[q],em.forEach(q,function(L){em.isDate(L)?L=L.toISOString():em.isObject(L)&&(L=JSON.stringify(L)),s.push(epe(T)+"="+epe(L))}))}),u=s.join("&")}if(u){var m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}});var ipe=w(($Vt,rpe)=>{"use strict";var O_t=Ca();function QS(){this.handlers=[]}QS.prototype.use=function(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};QS.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};QS.prototype.forEach=function(t){O_t.forEach(this.handlers,function(a){a!==null&&t(a)})};rpe.exports=QS});var ape=w((WVt,npe)=>{"use strict";var k_t=Ca();npe.exports=function(t,r){k_t.forEach(t,function(u,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(t[r]=u,delete t[s])})}});var hF=w((GVt,ope)=>{"use strict";ope.exports=function(t,r,a,u,s){return t.config=r,a&&(t.code=a),t.request=u,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var fF=w((KVt,spe)=>{"use strict";var R_t=hF();spe.exports=function(t,r,a,u,s){var m=new Error(t);return R_t(m,r,a,u,s)}});var lpe=w((ZVt,upe)=>{"use strict";var D_t=fF();upe.exports=function(t,r,a){var u=a.config.validateStatus;!a.status||!u||u(a.status)?t(a):r(D_t("Request failed with status code "+a.status,a.config,null,a.request,a))}});var hpe=w((HVt,cpe)=>{"use strict";var eq=Ca();cpe.exports=eq.isStandardBrowserEnv()?function(){return{write:function(r,a,u,s,m,x){var q=[];q.push(r+"="+encodeURIComponent(a)),eq.isNumber(u)&&q.push("expires="+new Date(u).toGMTString()),eq.isString(s)&&q.push("path="+s),eq.isString(m)&&q.push("domain="+m),x===!0&&q.push("secure"),document.cookie=q.join("; ")},read:function(r){var a=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var dpe=w((XVt,fpe)=>{"use strict";fpe.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var mpe=w((JVt,ppe)=>{"use strict";ppe.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var gpe=w((YVt,vpe)=>{"use strict";var L_t=dpe(),F_t=mpe();vpe.exports=function(t,r){return t&&!L_t(r)?F_t(t,r):r}});var _pe=w((QVt,ype)=>{"use strict";var dF=Ca(),z_t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];ype.exports=function(t){var r={},a,u,s;return t&&dF.forEach(t.split(`
`),function(x){if(s=x.indexOf(":"),a=dF.trim(x.substr(0,s)).toLowerCase(),u=dF.trim(x.substr(s+1)),a){if(r[a]&&z_t.indexOf(a)>=0)return;a==="set-cookie"?r[a]=(r[a]?r[a]:[]).concat([u]):r[a]=r[a]?r[a]+", "+u:u}}),r}});var wpe=w((e8t,bpe)=>{"use strict";var xpe=Ca();bpe.exports=xpe.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),a;function u(s){var m=s;return t&&(r.setAttribute("href",m),m=r.href),r.setAttribute("href",m),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return a=u(window.location.href),function(m){var x=xpe.isString(m)?u(m):m;return x.protocol===a.protocol&&x.host===a.host}}():function(){return function(){return!0}}()});var b_=w((t8t,Spe)=>{"use strict";function pF(e){this.message=e}pF.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};pF.prototype.__CANCEL__=!0;Spe.exports=pF});var vF=w((r8t,qpe)=>{"use strict";var tq=Ca(),N_t=lpe(),B_t=hpe(),U_t=cF(),j_t=gpe(),V_t=_pe(),$_t=wpe(),mF=fF(),W_t=w_(),G_t=b_();qpe.exports=function(t){return new Promise(function(a,u){var s=t.data,m=t.headers,x=t.responseType,q;function T(){t.cancelToken&&t.cancelToken.unsubscribe(q),t.signal&&t.signal.removeEventListener("abort",q)}tq.isFormData(s)&&delete m["Content-Type"];var I=new XMLHttpRequest;if(t.auth){var L=t.auth.username||"",z=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";m.Authorization="Basic "+btoa(L+":"+z)}var Y=j_t(t.baseURL,t.url);I.open(t.method.toUpperCase(),U_t(Y,t.params,t.paramsSerializer),!0),I.timeout=t.timeout;function pe(){if(I){var Z="getAllResponseHeaders"in I?V_t(I.getAllResponseHeaders()):null,H=!x||x==="text"||x==="json"?I.responseText:I.response,J={data:H,status:I.status,statusText:I.statusText,headers:Z,config:t,request:I};N_t(function(be){a(be),T()},function(be){u(be),T()},J),I=null}}if("onloadend"in I?I.onloadend=pe:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(pe)},I.onabort=function(){I&&(u(mF("Request aborted",t,"ECONNABORTED",I)),I=null)},I.onerror=function(){u(mF("Network Error",t,null,I)),I=null},I.ontimeout=function(){var H=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",J=t.transitional||W_t.transitional;t.timeoutErrorMessage&&(H=t.timeoutErrorMessage),u(mF(H,t,J.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",I)),I=null},tq.isStandardBrowserEnv()){var de=(t.withCredentials||$_t(Y))&&t.xsrfCookieName?B_t.read(t.xsrfCookieName):void 0;de&&(m[t.xsrfHeaderName]=de)}"setRequestHeader"in I&&tq.forEach(m,function(H,J){typeof s=="undefined"&&J.toLowerCase()==="content-type"?delete m[J]:I.setRequestHeader(J,H)}),tq.isUndefined(t.withCredentials)||(I.withCredentials=!!t.withCredentials),x&&x!=="json"&&(I.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&I.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&I.upload&&I.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(q=function(Z){I&&(u(!Z||Z&&Z.type?new G_t("canceled"):Z),I.abort(),I=null)},t.cancelToken&&t.cancelToken.subscribe(q),t.signal&&(t.signal.aborted?q():t.signal.addEventListener("abort",q))),s||(s=null),I.send(s)})}});var w_=w((i8t,Tpe)=>{"use strict";var pn=Ca(),Ape=ape(),K_t=hF(),Z_t={"Content-Type":"application/x-www-form-urlencoded"};function Epe(e,t){!pn.isUndefined(e)&&pn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function H_t(){var e;return typeof XMLHttpRequest!="undefined"?e=vF():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=vF()),e}function X_t(e,t,r){if(pn.isString(e))try{return(t||JSON.parse)(e),pn.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}var rq={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:H_t(),transformRequest:[function(t,r){return Ape(r,"Accept"),Ape(r,"Content-Type"),pn.isFormData(t)||pn.isArrayBuffer(t)||pn.isBuffer(t)||pn.isStream(t)||pn.isFile(t)||pn.isBlob(t)?t:pn.isArrayBufferView(t)?t.buffer:pn.isURLSearchParams(t)?(Epe(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):pn.isObject(t)||r&&r["Content-Type"]==="application/json"?(Epe(r,"application/json"),X_t(t)):t}],transformResponse:[function(t){var r=this.transitional||rq.transitional,a=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,s=!a&&this.responseType==="json";if(s||u&&pn.isString(t)&&t.length)try{return JSON.parse(t)}catch(m){if(s)throw m.name==="SyntaxError"?K_t(m,this,"E_JSON_PARSE"):m}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};pn.forEach(["delete","get","head"],function(t){rq.headers[t]={}});pn.forEach(["post","put","patch"],function(t){rq.headers[t]=pn.merge(Z_t)});Tpe.exports=rq});var Cpe=w((n8t,Ipe)=>{"use strict";var J_t=Ca(),Y_t=w_();Ipe.exports=function(t,r,a){var u=this||Y_t;return J_t.forEach(a,function(m){t=m.call(u,t,r)}),t}});var gF=w((a8t,Ppe)=>{"use strict";Ppe.exports=function(t){return!!(t&&t.__CANCEL__)}});var kpe=w((o8t,Ope)=>{"use strict";var Mpe=Ca(),yF=Cpe(),Q_t=gF(),ext=w_(),txt=b_();function _F(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new txt("canceled")}Ope.exports=function(t){_F(t),t.headers=t.headers||{},t.data=yF.call(t,t.data,t.headers,t.transformRequest),t.headers=Mpe.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Mpe.forEach(["delete","get","head","post","put","patch","common"],function(u){delete t.headers[u]});var r=t.adapter||ext.adapter;return r(t).then(function(u){return _F(t),u.data=yF.call(t,u.data,u.headers,t.transformResponse),u},function(u){return Q_t(u)||(_F(t),u&&u.response&&(u.response.data=yF.call(t,u.response.data,u.response.headers,t.transformResponse))),Promise.reject(u)})}});var xF=w((s8t,Rpe)=>{"use strict";var Qa=Ca();Rpe.exports=function(t,r){r=r||{};var a={};function u(I,L){return Qa.isPlainObject(I)&&Qa.isPlainObject(L)?Qa.merge(I,L):Qa.isPlainObject(L)?Qa.merge({},L):Qa.isArray(L)?L.slice():L}function s(I){if(Qa.isUndefined(r[I])){if(!Qa.isUndefined(t[I]))return u(void 0,t[I])}else return u(t[I],r[I])}function m(I){if(!Qa.isUndefined(r[I]))return u(void 0,r[I])}function x(I){if(Qa.isUndefined(r[I])){if(!Qa.isUndefined(t[I]))return u(void 0,t[I])}else return u(void 0,r[I])}function q(I){if(I in r)return u(t[I],r[I]);if(I in t)return u(void 0,t[I])}var T={url:m,method:m,data:m,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:q};return Qa.forEach(Object.keys(t).concat(Object.keys(r)),function(L){var z=T[L]||s,Y=z(L);Qa.isUndefined(Y)&&z!==q||(a[L]=Y)}),a}});var bF=w((u8t,Dpe)=>{Dpe.exports={version:"0.24.0"}});var zpe=w((l8t,Fpe)=>{"use strict";var rxt=bF().version,wF={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){wF[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var Lpe={};wF.transitional=function(t,r,a){function u(s,m){return"[Axios v"+rxt+"] Transitional option '"+s+"'"+m+(a?". "+a:"")}return function(s,m,x){if(t===!1)throw new Error(u(m," has been removed"+(r?" in "+r:"")));return r&&!Lpe[m]&&(Lpe[m]=!0,console.warn(u(m," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,m,x):!0}};function ixt(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),u=a.length;u-->0;){var s=a[u],m=t[s];if(m){var x=e[s],q=x===void 0||m(x,s,e);if(q!==!0)throw new TypeError("option "+s+" must be "+q);continue}if(r!==!0)throw Error("Unknown option "+s)}}Fpe.exports={assertOptions:ixt,validators:wF}});var $pe=w((c8t,Vpe)=>{"use strict";var Upe=Ca(),nxt=cF(),Npe=ipe(),Bpe=kpe(),iq=xF(),jpe=zpe(),tm=jpe.validators;function S_(e){this.defaults=e,this.interceptors={request:new Npe,response:new Npe}}S_.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=iq(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&jpe.assertOptions(r,{silentJSONParsing:tm.transitional(tm.boolean),forcedJSONParsing:tm.transitional(tm.boolean),clarifyTimeoutError:tm.transitional(tm.boolean)},!1);var a=[],u=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(t)===!1||(u=u&&z.synchronous,a.unshift(z.fulfilled,z.rejected))});var s=[];this.interceptors.response.forEach(function(z){s.push(z.fulfilled,z.rejected)});var m;if(!u){var x=[Bpe,void 0];for(Array.prototype.unshift.apply(x,a),x=x.concat(s),m=Promise.resolve(t);x.length;)m=m.then(x.shift(),x.shift());return m}for(var q=t;a.length;){var T=a.shift(),I=a.shift();try{q=T(q)}catch(L){I(L);break}}try{m=Bpe(q)}catch(L){return Promise.reject(L)}for(;s.length;)m=m.then(s.shift(),s.shift());return m};S_.prototype.getUri=function(t){return t=iq(this.defaults,t),nxt(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Upe.forEach(["delete","get","head","options"],function(t){S_.prototype[t]=function(r,a){return this.request(iq(a||{},{method:t,url:r,data:(a||{}).data}))}});Upe.forEach(["post","put","patch"],function(t){S_.prototype[t]=function(r,a,u){return this.request(iq(u||{},{method:t,url:r,data:a}))}});Vpe.exports=S_});var Gpe=w((h8t,Wpe)=>{"use strict";var axt=b_();function rm(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(u){t=u});var r=this;this.promise.then(function(a){if(r._listeners){var u,s=r._listeners.length;for(u=0;u<s;u++)r._listeners[u](a);r._listeners=null}}),this.promise.then=function(a){var u,s=new Promise(function(m){r.subscribe(m),u=m}).then(a);return s.cancel=function(){r.unsubscribe(u)},s},e(function(u){r.reason||(r.reason=new axt(u),t(r.reason))})}rm.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};rm.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};rm.prototype.unsubscribe=function(t){if(this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};rm.source=function(){var t,r=new rm(function(u){t=u});return{token:r,cancel:t}};Wpe.exports=rm});var Zpe=w((f8t,Kpe)=>{"use strict";Kpe.exports=function(t){return function(a){return t.apply(null,a)}}});var Xpe=w((d8t,Hpe)=>{"use strict";Hpe.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var Qpe=w((p8t,SF)=>{"use strict";var Jpe=Ca(),oxt=aF(),nq=$pe(),sxt=xF(),uxt=w_();function Ype(e){var t=new nq(e),r=oxt(nq.prototype.request,t);return Jpe.extend(r,nq.prototype,t),Jpe.extend(r,t),r.create=function(u){return Ype(sxt(e,u))},r}var Ws=Ype(uxt);Ws.Axios=nq;Ws.Cancel=b_();Ws.CancelToken=Gpe();Ws.isCancel=gF();Ws.VERSION=bF().version;Ws.all=function(t){return Promise.all(t)};Ws.spread=Zpe();Ws.isAxiosError=Xpe();SF.exports=Ws;SF.exports.default=Ws});var tme=w((m8t,eme)=>{eme.exports=Qpe()});var dme=w((x8t,fme)=>{var AF=1/0,cxt=17976931348623157e292,nme=NaN,hxt="[object Symbol]",fxt=/^\s+|\s+$/g,dxt=/^[-+]0x[0-9a-f]+$/i,pxt=/^0b[01]+$/i,mxt=/^0o[0-7]+$/i,vxt=parseInt,gxt=typeof global=="object"&&global&&global.Object===Object&&global,yxt=typeof self=="object"&&self&&self.Object===Object&&self,_xt=gxt||yxt||Function("return this")(),xxt=Object.prototype,bxt=xxt.toString,ame=_xt.Symbol,wxt=Math.min,ome=ame?ame.prototype:void 0,sme=ome?ome.toString:void 0;function Sxt(e){if(typeof e=="string")return e;if(cme(e))return sme?sme.call(e):"";var t=e+"";return t=="0"&&1/e==-AF?"-0":t}function qxt(e){var t=Math[e];return function(r,a){if(r=hme(r),a=wxt(Txt(a),292),a){var u=(lme(r)+"e").split("e"),s=t(u[0]+"e"+(+u[1]+a));return u=(lme(s)+"e").split("e"),+(u[0]+"e"+(+u[1]-a))}return t(r)}}function ume(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Axt(e){return!!e&&typeof e=="object"}function cme(e){return typeof e=="symbol"||Axt(e)&&bxt.call(e)==hxt}function Ext(e){if(!e)return e===0?e:0;if(e=hme(e),e===AF||e===-AF){var t=e<0?-1:1;return t*cxt}return e===e?e:0}function Txt(e){var t=Ext(e),r=t%1;return t===t?r?t-r:t:0}function hme(e){if(typeof e=="number")return e;if(cme(e))return nme;if(ume(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ume(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(fxt,"");var r=pxt.test(e);return r||mxt.test(e)?vxt(e.slice(2),r?2:8):dxt.test(e)?nme:+e}function lme(e){return e==null?"":Sxt(e)}var Ixt=qxt("round");fme.exports=Ixt});var E_=w((o$t,pme)=>{var Mxt=pme.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=Mxt)});var Ju=w((s$t,mme)=>{var Oxt=mme.exports={version:"2.6.12"};typeof __e=="number"&&(__e=Oxt)});var gme=w((u$t,vme)=>{vme.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var TF=w((l$t,yme)=>{var kxt=gme();yme.exports=function(e,t,r){if(kxt(e),t===void 0)return e;switch(r){case 1:return function(a){return e.call(t,a)};case 2:return function(a,u){return e.call(t,a,u)};case 3:return function(a,u,s){return e.call(t,a,u,s)};}return function(){return e.apply(t,arguments)}}});var T_=w((c$t,_me)=>{_me.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var I_=w((h$t,xme)=>{var Rxt=T_();xme.exports=function(e){if(!Rxt(e))throw TypeError(e+" is not an object!");return e}});var C_=w((f$t,bme)=>{bme.exports=function(e){try{return!!e()}catch(t){return!0}}});var Pc=w((d$t,wme)=>{wme.exports=!C_()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var CF=w((p$t,qme)=>{var Sme=T_(),IF=E_().document,Dxt=Sme(IF)&&Sme(IF.createElement);qme.exports=function(e){return Dxt?IF.createElement(e):{}}});var PF=w((m$t,Ame)=>{Ame.exports=!Pc()&&!C_()(function(){return Object.defineProperty(CF()("div"),"a",{get:function(){return 7}}).a!=7})});var MF=w((v$t,Eme)=>{var lq=T_();Eme.exports=function(e,t){if(!lq(e))return e;var r,a;if(t&&typeof(r=e.toString)=="function"&&!lq(a=r.call(e))||typeof(r=e.valueOf)=="function"&&!lq(a=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!lq(a=r.call(e)))return a;throw TypeError("Can't convert object to primitive value")}});var OF=w(Ime=>{var Tme=I_(),Lxt=PF(),Fxt=MF(),zxt=Object.defineProperty;Ime.f=Pc()?Object.defineProperty:function(t,r,a){if(Tme(t),r=Fxt(r,!0),Tme(a),Lxt)try{return zxt(t,r,a)}catch(u){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(t[r]=a.value),t}});var kF=w((y$t,Cme)=>{Cme.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Mme=w((_$t,Pme)=>{var Nxt=OF(),Bxt=kF();Pme.exports=Pc()?function(e,t,r){return Nxt.f(e,t,Bxt(1,r))}:function(e,t,r){return e[t]=r,e}});var cq=w((x$t,Ome)=>{var Uxt={}.hasOwnProperty;Ome.exports=function(e,t){return Uxt.call(e,t)}});var im=w((b$t,Rme)=>{var hq=E_(),RF=Ju(),kme=TF(),jxt=Mme(),Vxt=cq(),fq="prototype",Fn=function(e,t,r){var a=e&Fn.F,u=e&Fn.G,s=e&Fn.S,m=e&Fn.P,x=e&Fn.B,q=e&Fn.W,T=u?RF:RF[t]||(RF[t]={}),I=T[fq],L=u?hq:s?hq[t]:(hq[t]||{})[fq],z,Y,pe;u&&(r=t);for(z in r)Y=!a&&L&&L[z]!==void 0,!(Y&&Vxt(T,z))&&(pe=Y?L[z]:r[z],T[z]=u&&typeof L[z]!="function"?r[z]:x&&Y?kme(pe,hq):q&&L[z]==pe?function(de){var Z=function(H,J,ve){if(this instanceof de){switch(arguments.length){case 0:return new de;case 1:return new de(H);case 2:return new de(H,J);}return new de(H,J,ve)}return de.apply(this,arguments)};return Z[fq]=de[fq],Z}(pe):m&&typeof pe=="function"?kme(Function.call,pe):pe,m&&((T.virtual||(T.virtual={}))[z]=pe,e&Fn.R&&I&&!I[z]&&jxt(I,z,pe)))};Fn.F=1;Fn.G=2;Fn.S=4;Fn.P=8;Fn.B=16;Fn.W=32;Fn.U=64;Fn.R=128;Rme.exports=Fn});var Lme=w((w$t,Dme)=>{var $xt={}.toString;Dme.exports=function(e){return $xt.call(e).slice(8,-1)}});var DF=w((S$t,Fme)=>{var Wxt=Lme();Fme.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return Wxt(e)=="String"?e.split(""):Object(e)}});var LF=w((q$t,zme)=>{zme.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var P_=w((A$t,Nme)=>{var Gxt=DF(),Kxt=LF();Nme.exports=function(e){return Gxt(Kxt(e))}});var FF=w((E$t,Bme)=>{var Zxt=Math.ceil,Hxt=Math.floor;Bme.exports=function(e){return isNaN(e=+e)?0:(e>0?Hxt:Zxt)(e)}});var jme=w((T$t,Ume)=>{var Xxt=FF(),Jxt=Math.min;Ume.exports=function(e){return e>0?Jxt(Xxt(e),9007199254740991):0}});var $me=w((I$t,Vme)=>{var Yxt=FF(),Qxt=Math.max,e0t=Math.min;Vme.exports=function(e,t){return e=Yxt(e),e<0?Qxt(e+t,0):e0t(e,t)}});var Gme=w((C$t,Wme)=>{var t0t=P_(),r0t=jme(),i0t=$me();Wme.exports=function(e){return function(t,r,a){var u=t0t(t),s=r0t(u.length),m=i0t(a,s),x;if(e&&r!=r){for(;s>m;)if(x=u[m++],x!=x)return!0}else for(;s>m;m++)if((e||m in u)&&u[m]===r)return e||m||0;return!e&&-1}}});var Zme=w((P$t,Kme)=>{Kme.exports=!0});var Qme=w((M$t,Yme)=>{var n0t=Ju(),Hme=E_(),Xme="__core-js_shared__",Jme=Hme[Xme]||(Hme[Xme]={});(Yme.exports=function(e,t){return Jme[e]||(Jme[e]=t!==void 0?t:{})})("versions",[]).push({version:n0t.version,mode:Zme()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var tve=w((O$t,eve)=>{var a0t=0,o0t=Math.random();eve.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++a0t+o0t).toString(36))}});var zF=w((k$t,ive)=>{var rve=Qme()("keys"),s0t=tve();ive.exports=function(e){return rve[e]||(rve[e]=s0t(e))}});var ove=w((R$t,ave)=>{var nve=cq(),u0t=P_(),l0t=Gme()(!1),c0t=zF()("IE_PROTO");ave.exports=function(e,t){var r=u0t(e),a=0,u=[],s;for(s in r)s!=c0t&&nve(r,s)&&u.push(s);for(;t.length>a;)nve(r,s=t[a++])&&(~l0t(u,s)||u.push(s));return u}});var NF=w((D$t,sve)=>{sve.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var M_=w((L$t,uve)=>{var h0t=ove(),f0t=NF();uve.exports=Object.keys||function(t){return h0t(t,f0t)}});var cve=w(lve=>{lve.f=Object.getOwnPropertySymbols});var dq=w(hve=>{hve.f={}.propertyIsEnumerable});var BF=w((N$t,fve)=>{var d0t=LF();fve.exports=function(e){return Object(d0t(e))}});var mve=w((B$t,pve)=>{"use strict";var p0t=Pc(),dve=M_(),m0t=cve(),v0t=dq(),g0t=BF(),y0t=DF(),pq=Object.assign;pve.exports=!pq||C_()(function(){var e={},t={},r=Symbol(),a="abcdefghijklmnopqrst";return e[r]=7,a.split("").forEach(function(u){t[u]=u}),pq({},e)[r]!=7||Object.keys(pq({},t)).join("")!=a})?function(t,r){for(var a=g0t(t),u=arguments.length,s=1,m=m0t.f,x=v0t.f;u>s;)for(var q=y0t(arguments[s++]),T=m?dve(q).concat(m(q)):dve(q),I=T.length,L=0,z;I>L;)z=T[L++],(!p0t||x.call(q,z))&&(a[z]=q[z]);return a}:pq});var vve=w(()=>{var UF=im();UF(UF.S+UF.F,"Object",{assign:mve()})});var yve=w((V$t,gve)=>{vve();gve.exports=Ju().Object.assign});var xve=w((W$t,_ve)=>{var _0t=OF(),x0t=I_(),b0t=M_();_ve.exports=Pc()?Object.defineProperties:function(t,r){x0t(t);for(var a=b0t(r),u=a.length,s=0,m;u>s;)_0t.f(t,m=a[s++],r[m]);return t}});var Sve=w((G$t,wve)=>{var bve=E_().document;wve.exports=bve&&bve.documentElement});var Eve=w((K$t,Ave)=>{var w0t=I_(),S0t=xve(),qve=NF(),q0t=zF()("IE_PROTO"),VF=function(){},$F="prototype",mq=function(){var e=CF()("iframe"),t=qve.length,r="<",a=">",u;for(e.style.display="none",Sve().appendChild(e),e.src="javascript:",u=e.contentWindow.document,u.open(),u.write(r+"script"+a+"document.F=Object"+r+"/script"+a),u.close(),mq=u.F;t--;)delete mq[$F][qve[t]];return mq()};Ave.exports=Object.create||function(t,r){var a;return t!==null?(VF[$F]=w0t(t),a=new VF,VF[$F]=null,a[q0t]=t):a=mq(),r===void 0?a:S0t(a,r)}});var Ive=w(()=>{var Tve=im();Tve(Tve.S,"Object",{create:Eve()})});var Pve=w((X$t,Cve)=>{Ive();var A0t=Ju().Object;Cve.exports=function(t,r){return A0t.create(t,r)}});var kve=w(Ove=>{var E0t=dq(),T0t=kF(),I0t=P_(),C0t=MF(),P0t=cq(),M0t=PF(),Mve=Object.getOwnPropertyDescriptor;Ove.f=Pc()?Mve:function(t,r){if(t=I0t(t),r=C0t(r,!0),M0t)try{return Mve(t,r)}catch(a){}if(P0t(t,r))return T0t(!E0t.f.call(t,r),t[r])}});var Lve=w((Y$t,Dve)=>{var O0t=T_(),k0t=I_(),Rve=function(e,t){if(k0t(e),!O0t(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};Dve.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=TF()(Function.call,kve().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(u,s){return Rve(u,s),t?u.__proto__=s:r(u,s),u}}({},!1):void 0),check:Rve}});var zve=w(()=>{var Fve=im();Fve(Fve.S,"Object",{setPrototypeOf:Lve().set})});var Bve=w((tWt,Nve)=>{zve();Nve.exports=Ju().Object.setPrototypeOf});var Vve=w((aWt,jve)=>{var GF=im(),R0t=Ju(),D0t=C_();jve.exports=function(e,t){var r=(R0t.Object||{})[e]||Object[e],a={};a[e]=t(r),GF(GF.S+GF.F*D0t(function(){r(1)}),"Object",a)}});var $ve=w(()=>{var L0t=BF(),F0t=M_();Vve()("keys",function(){return function(t){return F0t(L0t(t))}})});var Gve=w((uWt,Wve)=>{$ve();Wve.exports=Ju().Object.keys});var Mc=w((cWt,vq)=>{(function(){"use strict";var e={}.hasOwnProperty,t="[native code]";function r(){for(var a=[],u=0;u<arguments.length;u++){var s=arguments[u];if(s){var m=typeof s;if(m==="string"||m==="number")a.push(s);else if(Array.isArray(s)){if(s.length){var x=r.apply(null,s);x&&a.push(x)}}else if(m==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){a.push(s.toString());continue}for(var q in s)e.call(s,q)&&s[q]&&a.push(q)}}}return a.join(" ")}typeof vq!="undefined"&&vq.exports?(r.default=r,vq.exports=r):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return r}):window.classNames=r})()});var Hve=w((hWt,Zve)=>{"use strict";var z0t=function(e,t,r,a,u,s,m,x){if(!e){var q;if(t===void 0)q=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var T=[r,a,u,s,m,x],I=0;q=new Error(t.replace(/%s/g,function(){return T[I++]})),q.name="Invariant Violation"}throw q.framesToPop=1,q}};Zve.exports=z0t});var Qve=w(KF=>{"use strict";Object.defineProperty(KF,"__esModule",{value:!0});function Xve(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function Jve(e){function t(r){var a=this.constructor.getDerivedStateFromProps(e,r);return a!=null?a:null}this.setState(t.bind(this))}function Yve(e,t){try{var r=this.props,a=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,a)}finally{this.props=r,this.state=a}}Xve.__suppressDeprecationWarning=!0;Jve.__suppressDeprecationWarning=!0;Yve.__suppressDeprecationWarning=!0;function N0t(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,a=null,u=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?a="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(a="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?u="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(u="UNSAFE_componentWillUpdate"),r!==null||a!==null||u!==null){var s=e.displayName||e.name,m=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+m+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(a!==null?`
  `+a:"")+(u!==null?`
  `+u:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=Xve,t.componentWillReceiveProps=Jve),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Yve;var x=t.componentDidUpdate;t.componentDidUpdate=function(T,I,L){var z=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:L;x.call(this,T,I,z)}}return e}KF.polyfill=N0t});var tge=w((dWt,ege)=>{var B0t=Pc(),U0t=M_(),j0t=P_(),V0t=dq().f;ege.exports=function(e){return function(t){for(var r=j0t(t),a=U0t(r),u=a.length,s=0,m=[],x;u>s;)x=a[s++],(!B0t||V0t.call(r,x))&&m.push(e?[x,r[x]]:r[x]);return m}}});var ige=w(()=>{var rge=im(),$0t=tge()(!0);rge(rge.S,"Object",{entries:function(t){return $0t(t)}})});var age=w((vWt,nge)=>{ige();nge.exports=Ju().Object.entries});var ZF=w((gWt,oge)=>{oge.exports=age()});var JF=w((_q,lge)=>{"use strict";Object.defineProperty(_q,"__esModule",{value:!0});_q.default=K0t;function K0t(e){function t(a,u,s,m,x,q){var T=m||"<<anonymous>>",I=q||s;if(u[s]==null)return a?new Error("Required "+x+" `"+I+"` was not specified "+("in `"+T+"`.")):null;for(var L=arguments.length,z=Array(L>6?L-6:0),Y=6;Y<L;Y++)z[Y-6]=arguments[Y];return e.apply(void 0,[u,s,T,x,I].concat(z))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}lge.exports=_q.default});var fge=w(Ar=>{"use strict";var Hi=typeof Symbol=="function"&&Symbol.for,ez=Hi?Symbol.for("react.element"):60103,tz=Hi?Symbol.for("react.portal"):60106,xq=Hi?Symbol.for("react.fragment"):60107,bq=Hi?Symbol.for("react.strict_mode"):60108,wq=Hi?Symbol.for("react.profiler"):60114,Sq=Hi?Symbol.for("react.provider"):60109,qq=Hi?Symbol.for("react.context"):60110,rz=Hi?Symbol.for("react.async_mode"):60111,Aq=Hi?Symbol.for("react.concurrent_mode"):60111,Eq=Hi?Symbol.for("react.forward_ref"):60112,Tq=Hi?Symbol.for("react.suspense"):60113,X0t=Hi?Symbol.for("react.suspense_list"):60120,Iq=Hi?Symbol.for("react.memo"):60115,Cq=Hi?Symbol.for("react.lazy"):60116,J0t=Hi?Symbol.for("react.block"):60121,Y0t=Hi?Symbol.for("react.fundamental"):60117,Q0t=Hi?Symbol.for("react.responder"):60118,ebt=Hi?Symbol.for("react.scope"):60119;function eo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ez:switch(e=e.type,e){case rz:case Aq:case xq:case wq:case bq:case Tq:return e;default:switch(e=e&&e.$$typeof,e){case qq:case Eq:case Cq:case Iq:case Sq:return e;default:return t;}}case tz:return t;}}}function hge(e){return eo(e)===Aq}Ar.AsyncMode=rz;Ar.ConcurrentMode=Aq;Ar.ContextConsumer=qq;Ar.ContextProvider=Sq;Ar.Element=ez;Ar.ForwardRef=Eq;Ar.Fragment=xq;Ar.Lazy=Cq;Ar.Memo=Iq;Ar.Portal=tz;Ar.Profiler=wq;Ar.StrictMode=bq;Ar.Suspense=Tq;Ar.isAsyncMode=function(e){return hge(e)||eo(e)===rz};Ar.isConcurrentMode=hge;Ar.isContextConsumer=function(e){return eo(e)===qq};Ar.isContextProvider=function(e){return eo(e)===Sq};Ar.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ez};Ar.isForwardRef=function(e){return eo(e)===Eq};Ar.isFragment=function(e){return eo(e)===xq};Ar.isLazy=function(e){return eo(e)===Cq};Ar.isMemo=function(e){return eo(e)===Iq};Ar.isPortal=function(e){return eo(e)===tz};Ar.isProfiler=function(e){return eo(e)===wq};Ar.isStrictMode=function(e){return eo(e)===bq};Ar.isSuspense=function(e){return eo(e)===Tq};Ar.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===xq||e===Aq||e===wq||e===bq||e===Tq||e===X0t||typeof e=="object"&&e!==null&&(e.$$typeof===Cq||e.$$typeof===Iq||e.$$typeof===Sq||e.$$typeof===qq||e.$$typeof===Eq||e.$$typeof===Y0t||e.$$typeof===Q0t||e.$$typeof===ebt||e.$$typeof===J0t)};Ar.typeOf=eo});var pge=w((TWt,dge)=>{"use strict";dge.exports=fge()});var am=w((Pq,vge)=>{"use strict";Object.defineProperty(Pq,"__esModule",{value:!0});var tbt=Mr(),rbt=mge(tbt),ibt=pge(),nbt=JF(),abt=mge(nbt);function mge(e){return e&&e.__esModule?e:{default:e}}function obt(e,t,r,a,u){var s=e[t];return rbt.default.isValidElement(s)?new Error("Invalid "+a+" `"+u+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,ibt.isValidElementType)(s)?null:new Error("Invalid "+a+" `"+u+"` of value `"+s+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}Pq.default=(0,abt.default)(obt);vge.exports=Pq.default});var yge=w((CWt,gge)=>{"use strict";var ubt=function(){};gge.exports=ubt});var zn=w((PWt,D_)=>{function lbt(e){return e&&e.__esModule?e:{default:e}}D_.exports=lbt,D_.exports.__esModule=!0,D_.exports.default=D_.exports});var xge=w((Mq,_ge)=>{"use strict";Mq.__esModule=!0;Mq.default=hbt;var cbt=/-(.)/g;function hbt(e){return e.replace(cbt,function(t,r){return r.toUpperCase()})}_ge.exports=Mq.default});var iz=w((Oq,bge)=>{"use strict";var fbt=zn();Oq.__esModule=!0;Oq.default=mbt;var dbt=fbt(xge()),pbt=/^-ms-/;function mbt(e){return(0,dbt.default)(e.replace(pbt,"ms-"))}bge.exports=Oq.default});var Sge=w((kq,wge)=>{"use strict";kq.__esModule=!0;kq.default=gbt;var vbt=/([A-Z])/g;function gbt(e){return e.replace(vbt,"-$1").toLowerCase()}wge.exports=kq.default});var Age=w((Rq,qge)=>{"use strict";var ybt=zn();Rq.__esModule=!0;Rq.default=bbt;var _bt=ybt(Sge()),xbt=/^ms-/;function bbt(e){return(0,_bt.default)(e).replace(xbt,"-ms-")}qge.exports=Rq.default});var Tge=w((Dq,Ege)=>{"use strict";var wbt=zn();Dq.__esModule=!0;Dq.default=Ebt;var Sbt=wbt(iz()),qbt=/^(top|right|bottom|left)$/,Abt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function Ebt(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(a){var u=e.style;a=(0,Sbt.default)(a),a=="float"&&(a="styleFloat");var s=e.currentStyle[a]||null;if(s==null&&u&&u[a]&&(s=u[a]),Abt.test(s)&&!qbt.test(a)){var m=u.left,x=e.runtimeStyle,q=x&&x.left;q&&(x.left=e.currentStyle.left),u.left=a==="fontSize"?"1em":s,s=u.pixelLeft+"px",u.left=m,q&&(x.left=q)}return s}}}Ege.exports=Dq.default});var Cge=w((Lq,Ige)=>{"use strict";Lq.__esModule=!0;Lq.default=Tbt;function Tbt(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}Ige.exports=Lq.default});var Xs=w((L_,Pge)=>{"use strict";L_.__esModule=!0;L_.default=void 0;var Ibt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);L_.default=Ibt;Pge.exports=L_.default});var Lge=w(rr=>{"use strict";var Cbt=zn();rr.__esModule=!0;rr.default=rr.animationEnd=rr.animationDelay=rr.animationTiming=rr.animationDuration=rr.animationName=rr.transitionEnd=rr.transitionDuration=rr.transitionDelay=rr.transitionTiming=rr.transitionProperty=rr.transform=void 0;var Pbt=Cbt(Xs()),zq="transform";rr.transform=zq;var Js,nz,Mge;rr.animationEnd=Mge;rr.transitionEnd=nz;var az,oz,sz,uz;rr.transitionDelay=uz;rr.transitionTiming=sz;rr.transitionDuration=oz;rr.transitionProperty=az;var Oge,kge,Rge,Dge;rr.animationDelay=Dge;rr.animationTiming=Rge;rr.animationDuration=kge;rr.animationName=Oge;Pbt.default&&(Fq=Obt(),Js=Fq.prefix,rr.transitionEnd=nz=Fq.transitionEnd,rr.animationEnd=Mge=Fq.animationEnd,rr.transform=zq=Js+"-"+zq,rr.transitionProperty=az=Js+"-transition-property",rr.transitionDuration=oz=Js+"-transition-duration",rr.transitionDelay=uz=Js+"-transition-delay",rr.transitionTiming=sz=Js+"-transition-timing-function",rr.animationName=Oge=Js+"-animation-name",rr.animationDuration=kge=Js+"-animation-duration",rr.animationTiming=Rge=Js+"-animation-delay",rr.animationDelay=Dge=Js+"-animation-timing-function");var Fq,Mbt={transform:zq,end:nz,property:az,timing:sz,delay:uz,duration:oz};rr.default=Mbt;function Obt(){for(var e=document.createElement("div").style,t={O:function(T){return"o"+T.toLowerCase()},Moz:function(T){return T.toLowerCase()},Webkit:function(T){return"webkit"+T},ms:function(T){return"MS"+T}},r=Object.keys(t),a,u,s="",m=0;m<r.length;m++){var x=r[m];if(x+"TransitionProperty"in e){s="-"+x.toLowerCase(),a=t[x]("TransitionEnd"),u=t[x]("AnimationEnd");break}}return!a&&"transitionProperty"in e&&(a="transitionend"),!u&&"animationName"in e&&(u="animationend"),e=null,{animationEnd:u,transitionEnd:a,prefix:s}}});var zge=w((Nq,Fge)=>{"use strict";Nq.__esModule=!0;Nq.default=Rbt;var kbt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Rbt(e){return!!(e&&kbt.test(e))}Fge.exports=Nq.default});var Bge=w((Bq,Nge)=>{"use strict";var F_=zn();Bq.__esModule=!0;Bq.default=Bbt;var Dbt=F_(iz()),lz=F_(Age()),Lbt=F_(Tge()),Fbt=F_(Cge()),zbt=Lge(),Nbt=F_(zge());function Bbt(e,t,r){var a="",u="",s=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,Dbt.default)(t)]||(0,Lbt.default)(e).getPropertyValue((0,lz.default)(t));(s={})[t]=r}Object.keys(s).forEach(function(m){var x=s[m];!x&&x!==0?(0,Fbt.default)(e,(0,lz.default)(m)):(0,Nbt.default)(m)?u+=m+"("+x+") ":a+=(0,lz.default)(m)+": "+x+";"}),u&&(a+=zbt.transform+": "+u+";"),e.style.cssText+=";"+a}Nge.exports=Bq.default});var Uge=w(om=>{"use strict";om.__esModule=!0;om.classNamesShape=om.timeoutsShape=void 0;var OWt=Ubt(Si());function Ubt(e){return e&&e.__esModule?e:{default:e}}var jbt=null;om.timeoutsShape=jbt;var Vbt=null;om.classNamesShape=Vbt});var Vge=w(Ma=>{"use strict";Ma.__esModule=!0;Ma.default=Ma.EXITING=Ma.ENTERED=Ma.ENTERING=Ma.EXITED=Ma.UNMOUNTED=void 0;var $bt=Kbt(Si()),cz=jge(Mr()),Wbt=jge(Su()),Gbt=Qve(),RWt=Uge();function jge(e){return e&&e.__esModule?e:{default:e}}function Kbt(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}}return t.default=e,t}function Zbt(e,t){if(e==null)return{};var r={},a=Object.keys(e),u,s;for(s=0;s<a.length;s++)u=a[s],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}function Hbt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var z_="unmounted";Ma.UNMOUNTED=z_;var sf="exited";Ma.EXITED=sf;var uf="entering";Ma.ENTERING=uf;var um="entered";Ma.ENTERED=um;var hz="exiting";Ma.EXITING=hz;var Ys=function(e){Hbt(t,e);function t(a,u){var s;s=e.call(this,a,u)||this;var m=u.transitionGroup,x=m&&!m.isMounting?a.enter:a.appear,q;return s.appearStatus=null,a.in?x?(q=sf,s.appearStatus=uf):q=um:a.unmountOnExit||a.mountOnEnter?q=z_:q=sf,s.state={status:q},s.nextCallback=null,s}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(u,s){var m=u.in;return m&&s.status===z_?{status:sf}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(u){var s=null;if(u!==this.props){var m=this.state.status;this.props.in?m!==uf&&m!==um&&(s=uf):(m===uf||m===um)&&(s=hz)}this.updateStatus(!1,s)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var u=this.props.timeout,s,m,x;return s=m=x=u,u!=null&&typeof u!="number"&&(s=u.exit,m=u.enter,x=u.appear!==void 0?u.appear:m),{exit:s,enter:m,appear:x}},r.updateStatus=function(u,s){if(u===void 0&&(u=!1),s!==null){this.cancelNextCallback();var m=Wbt.default.findDOMNode(this);s===uf?this.performEnter(m,u):this.performExit(m)}else this.props.unmountOnExit&&this.state.status===sf&&this.setState({status:z_})},r.performEnter=function(u,s){var m=this,x=this.props.enter,q=this.context.transitionGroup?this.context.transitionGroup.isMounting:s,T=this.getTimeouts(),I=q?T.appear:T.enter;if(!s&&!x){this.safeSetState({status:um},function(){m.props.onEntered(u)});return}this.props.onEnter(u,q),this.safeSetState({status:uf},function(){m.props.onEntering(u,q),m.onTransitionEnd(u,I,function(){m.safeSetState({status:um},function(){m.props.onEntered(u,q)})})})},r.performExit=function(u){var s=this,m=this.props.exit,x=this.getTimeouts();if(!m){this.safeSetState({status:sf},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:hz},function(){s.props.onExiting(u),s.onTransitionEnd(u,x.exit,function(){s.safeSetState({status:sf},function(){s.props.onExited(u)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(u,s){s=this.setNextCallback(s),this.setState(u,s)},r.setNextCallback=function(u){var s=this,m=!0;return this.nextCallback=function(x){m&&(m=!1,s.nextCallback=null,u(x))},this.nextCallback.cancel=function(){m=!1},this.nextCallback},r.onTransitionEnd=function(u,s,m){this.setNextCallback(m);var x=s==null&&!this.props.addEndListener;if(!u||x){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(u,this.nextCallback),s!=null&&setTimeout(this.nextCallback,s)},r.render=function(){var u=this.state.status;if(u===z_)return null;var s=this.props,m=s.children,x=Zbt(s,["children"]);if(delete x.in,delete x.mountOnEnter,delete x.unmountOnExit,delete x.appear,delete x.enter,delete x.exit,delete x.timeout,delete x.addEndListener,delete x.onEnter,delete x.onEntering,delete x.onEntered,delete x.onExit,delete x.onExiting,delete x.onExited,typeof m=="function")return m(u,x);var q=cz.default.Children.only(m);return cz.default.cloneElement(q,x)},t}(cz.default.Component);Ys.contextTypes={transitionGroup:$bt.object};Ys.childContextTypes={transitionGroup:function(){}};Ys.propTypes={};function sm(){}Ys.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:sm,onEntering:sm,onEntered:sm,onExit:sm,onExiting:sm,onExited:sm};Ys.UNMOUNTED=0;Ys.EXITED=1;Ys.ENTERING=2;Ys.ENTERED=3;Ys.EXITING=4;var Xbt=(0,Gbt.polyfill)(Ys);Ma.default=Xbt});var N_=w((Uq,$ge)=>{"use strict";Uq.__esModule=!0;Uq.default=Jbt;function Jbt(e){return e&&e.ownerDocument||document}$ge.exports=Uq.default});var Gge=w((jq,Wge)=>{"use strict";var Ybt=zn();jq.__esModule=!0;jq.default=e1t;var Qbt=Ybt(N_());function e1t(e){e===void 0&&(e=(0,Qbt.default)());try{return e.activeElement}catch(t){}}Wge.exports=jq.default});var fz=w((B_,Zge)=>{"use strict";var t1t=zn();B_.__esModule=!0;B_.default=void 0;var r1t=t1t(Xs()),i1t=function(){return r1t.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):Kge(e,t)}:Kge}();B_.default=i1t;function Kge(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}Zge.exports=B_.default});var Wq=w((U_,Yge)=>{"use strict";var s1t=zn();U_.__esModule=!0;U_.default=void 0;var u1t=s1t(Xs()),Jge=function(){};u1t.default&&(Jge=function(){if(document.addEventListener)return function(e,t,r,a){return e.addEventListener(t,r,a||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(a){a=a||window.event,a.target=a.target||a.srcElement,a.currentTarget=e,r.call(e,a)})}}());var l1t=Jge;U_.default=l1t;Yge.exports=U_.default});var Gq=w((j_,eye)=>{"use strict";var c1t=zn();j_.__esModule=!0;j_.default=void 0;var h1t=c1t(Xs()),Qge=function(){};h1t.default&&(Qge=function(){if(document.addEventListener)return function(e,t,r,a){return e.removeEventListener(t,r,a||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var f1t=Qge;j_.default=f1t;eye.exports=j_.default});var rye=w((Kq,tye)=>{"use strict";Kq.__esModule=!0;Kq.default=p1t;var d1t=/^[\w-]*$/,vz=Function.prototype.bind.call(Function.prototype.call,[].slice);function p1t(e,t){var r=t[0]==="#",a=t[0]===".",u=r||a?t.slice(1):t,s=d1t.test(u),m;return s?r?(e=e.getElementById?e:document,(m=e.getElementById(u))?[m]:[]):e.getElementsByClassName&&a?vz(e.getElementsByClassName(u)):vz(e.getElementsByTagName(t)):vz(e.querySelectorAll(t))}tye.exports=Kq.default});var aye=w((Zq,nye)=>{"use strict";var iye=zn();Zq.__esModule=!0;Zq.default=g1t;var m1t=iye(fz()),v1t=iye(rye());function g1t(e,t){return function(a){var u=a.currentTarget,s=a.target,m=(0,v1t.default)(u,e);m.some(function(x){return(0,m1t.default)(x,s)})&&t.call(this,a)}}nye.exports=Zq.default});var uye=w((V_,sye)=>{"use strict";var gz=zn();V_.__esModule=!0;V_.default=void 0;var y1t=gz(Xs()),_1t=gz(Wq()),x1t=gz(Gq()),oye=function(){};y1t.default&&(oye=function(t,r,a,u){return(0,_1t.default)(t,r,a,u),function(){(0,x1t.default)(t,r,a,u)}});var b1t=oye;V_.default=b1t;sye.exports=V_.default});var dye=w(Oc=>{"use strict";var Hq=zn();Oc.__esModule=!0;Oc.default=void 0;var lye=Hq(Wq());Oc.on=lye.default;var cye=Hq(Gq());Oc.off=cye.default;var hye=Hq(aye());Oc.filter=hye.default;var fye=Hq(uye());Oc.listen=fye.default;var w1t={on:lye.default,off:cye.default,filter:hye.default,listen:fye.default};Oc.default=w1t});var yz=w((Jq,pye)=>{"use strict";var S1t=zn();Jq.__esModule=!0;Jq.default=A1t;var q1t=S1t(Xs()),Xq;function A1t(e){if((!Xq&&Xq!==0||e)&&q1t.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Xq=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Xq}pye.exports=Jq.default});var Qq=w((Yq,vye)=>{"use strict";Object.defineProperty(Yq,"__esModule",{value:!0});var E1t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T1t=Mr(),I1t=mye(T1t),C1t=JF(),P1t=mye(C1t);function mye(e){return e&&e.__esModule?e:{default:e}}function M1t(e,t,r,a,u){var s=e[t],m=typeof s=="undefined"?"undefined":E1t(s);return I1t.default.isValidElement(s)?new Error("Invalid "+a+" `"+u+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(m!=="object"||typeof s.render!="function")&&s.nodeType!==1?new Error("Invalid "+a+" `"+u+"` of value `"+s+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}Yq.default=(0,P1t.default)(M1t);vye.exports=Yq.default});var xye=w((jWt,_ye)=>{"use strict";var O1t=!1,yye=function(){};O1t&&(gye=function(t,r){var a=arguments.length;r=new Array(a>1?a-1:0);for(var u=1;u<a;u++)r[u-1]=arguments[u];var s=0,m="Warning: "+t.replace(/%s/g,function(){return r[s++]});typeof console!="undefined"&&console.error(m);try{throw new Error(m)}catch(x){}},yye=function(e,t,r){var a=arguments.length;r=new Array(a>2?a-2:0);for(var u=2;u<a;u++)r[u-2]=arguments[u];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||gye.apply(null,[t].concat(r))});var gye;_ye.exports=yye});var Sye=w((eA,wye)=>{"use strict";Object.defineProperty(eA,"__esModule",{value:!0});eA.default=bye;var k1t=xye(),R1t=D1t(k1t);function D1t(e){return e&&e.__esModule?e:{default:e}}var _z={};function bye(e,t){return function(a,u,s,m,x){var q=s||"<<anonymous>>",T=x||u;if(a[u]!=null){var I=s+"."+u;(0,R1t.default)(_z[I],"The "+m+" `"+T+"` of "+("`"+q+"` is deprecated. "+t+".")),_z[I]=!0}for(var L=arguments.length,z=Array(L>5?L-5:0),Y=5;Y<L;Y++)z[Y-5]=arguments[Y];return e.apply(void 0,[a,u,s,m,x].concat(z))}}function L1t(){_z={}}bye._resetWarned=L1t;wye.exports=eA.default});var xz=w((tA,qye)=>{"use strict";tA.__esModule=!0;tA.default=F1t;function F1t(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}qye.exports=tA.default});var Eye=w((rA,Aye)=>{"use strict";var z1t=zn();rA.__esModule=!0;rA.default=B1t;var N1t=z1t(xz());function B1t(e,t){e.classList?e.classList.add(t):(0,N1t.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}Aye.exports=rA.default});var Cye=w((VWt,Iye)=>{"use strict";function Tye(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}Iye.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=Tye(t.className,r):t.setAttribute("class",Tye(t.className&&t.className.baseVal||"",r))}});var kye=w(lf=>{"use strict";var bz=zn();lf.__esModule=!0;lf.default=void 0;var Pye=bz(Eye());lf.addClass=Pye.default;var Mye=bz(Cye());lf.removeClass=Mye.default;var Oye=bz(xz());lf.hasClass=Oye.default;var U1t={addClass:Pye.default,removeClass:Mye.default,hasClass:Oye.default};lf.default=U1t});var Dye=w((iA,Rye)=>{"use strict";iA.__esModule=!0;iA.default=j1t;function j1t(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}Rye.exports=iA.default});var wz=w((nA,zye)=>{"use strict";nA.__esModule=!0;nA.default=Z1t;var V1t=Dye(),Lye=Fye(V1t),$1t=N_(),W1t=Fye($1t);function Fye(e){return e&&e.__esModule?e:{default:e}}function G1t(e){return e&&e.tagName.toLowerCase()==="body"}function K1t(e){var t=(0,W1t.default)(e),r=(0,Lye.default)(t),a=r.innerWidth;if(!a){var u=t.documentElement.getBoundingClientRect();a=u.right-Math.abs(u.left)}return t.body.clientWidth<a}function Z1t(e){var t=(0,Lye.default)(e);return t||G1t(e)?K1t(e):e.scrollHeight>e.clientHeight}zye.exports=nA.default});var Bye=w($_=>{"use strict";$_.__esModule=!0;$_.ariaHidden=Sz;$_.hideSiblings=J1t;$_.showSiblings=Y1t;var H1t=["template","script","style"],X1t=function(t){var r=t.nodeType,a=t.tagName;return r===1&&H1t.indexOf(a.toLowerCase())===-1},Nye=function(t,r,a){r=[].concat(r),[].forEach.call(t.children,function(u){r.indexOf(u)===-1&&X1t(u)&&a(u)})};function Sz(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function J1t(e,t){Nye(e,t,function(r){return Sz(!0,r)})}function Y1t(e,t){Nye(e,t,function(r){return Sz(!1,r)})}});var $ye=w((oA,Vye)=>{"use strict";oA.__esModule=!0;var Q1t=kye(),Uye=aA(Q1t),ewt=Bge(),jye=aA(ewt),twt=yz(),rwt=aA(twt),iwt=wz(),nwt=aA(iwt),qz=Bye();function aA(e){return e&&e.__esModule?e:{default:e}}function awt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function owt(e,t){var r=-1;return e.some(function(a,u){if(t(a,u))return r=u,!0}),r}function swt(e,t){return owt(e,function(r){return r.modals.indexOf(t)!==-1})}function uwt(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,jye.default)(t,"paddingRight")||0,10)+(0,rwt.default)()+"px"),(0,jye.default)(t,r)}function lwt(e,t){var r=e.style;Object.keys(r).forEach(function(a){return t.style[a]=r[a]})}var cwt=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=r.hideSiblingNodes,u=a===void 0?!0:a,s=r.handleContainerOverflow,m=s===void 0?!0:s;awt(this,e),this.add=function(x,q,T){var I=t.modals.indexOf(x),L=t.containers.indexOf(q);if(I!==-1)return I;if(I=t.modals.length,t.modals.push(x),t.hideSiblingNodes&&(0,qz.hideSiblings)(q,x.modalNode),L!==-1)return t.data[L].modals.push(x),I;var z={modals:[x],classes:T?T.split(/\s+/):[],overflowing:(0,nwt.default)(q)};return t.handleContainerOverflow&&uwt(z,q),z.classes.forEach(Uye.default.addClass.bind(null,q)),t.containers.push(q),t.data.push(z),I},this.remove=function(x){var q=t.modals.indexOf(x);if(q!==-1){var T=swt(t.data,x),I=t.data[T],L=t.containers[T];I.modals.splice(I.modals.indexOf(x),1),t.modals.splice(q,1),I.modals.length===0?(I.classes.forEach(Uye.default.removeClass.bind(null,L)),t.handleContainerOverflow&&lwt(I,L),t.hideSiblingNodes&&(0,qz.showSiblings)(L,x.modalNode),t.containers.splice(T,1),t.data.splice(T,1)):t.hideSiblingNodes&&(0,qz.ariaHidden)(!1,I.modals[I.modals.length-1].modalNode)}},this.isTopModal=function(x){return!!t.modals.length&&t.modals[t.modals.length-1]===x},this.hideSiblingNodes=u,this.handleContainerOverflow=m,this.modals=[],this.containers=[],this.data=[]};oA.default=cwt;Vye.exports=oA.default});var uA=w((sA,Wye)=>{"use strict";sA.__esModule=!0;sA.default=pwt;var hwt=Su(),fwt=dwt(hwt);function dwt(e){return e&&e.__esModule?e:{default:e}}function pwt(e,t){return e=typeof e=="function"?e():e,fwt.default.findDOMNode(e)||t}Wye.exports=sA.default});var cA=w((lA,Kye)=>{"use strict";lA.__esModule=!0;lA.default=function(e){return(0,ywt.default)(vwt.default.findDOMNode(e))};var mwt=Su(),vwt=Gye(mwt),gwt=N_(),ywt=Gye(gwt);function Gye(e){return e&&e.__esModule?e:{default:e}}Kye.exports=lA.default});var e_e=w((hA,Qye)=>{"use strict";hA.__esModule=!0;var _wt=Si(),Az=cm(_wt),xwt=Qq(),bwt=cm(xwt),wwt=Mr(),Zye=cm(wwt),Swt=Su(),Hye=cm(Swt),qwt=uA(),Xye=cm(qwt),Awt=cA(),Jye=cm(Awt);function cm(e){return e&&e.__esModule?e:{default:e}}function Ewt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Twt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ez=function(e){Twt(t,e);function t(){var r,a,u;Ewt(this,t);for(var s=arguments.length,m=Array(s),x=0;x<s;x++)m[x]=arguments[x];return u=(r=(a=Yye(this,e.call.apply(e,[this].concat(m))),a),a._mountOverlayTarget=function(){a._overlayTarget||(a._overlayTarget=document.createElement("div"),a._portalContainerNode=(0,Xye.default)(a.props.container,(0,Jye.default)(a).body),a._portalContainerNode.appendChild(a._overlayTarget))},a._unmountOverlayTarget=function(){a._overlayTarget&&(a._portalContainerNode.removeChild(a._overlayTarget),a._overlayTarget=null),a._portalContainerNode=null},a._renderOverlay=function(){var q=a.props.children?Zye.default.Children.only(a.props.children):null;if(q!==null){a._mountOverlayTarget();var T=!a._overlayInstance;a._overlayInstance=Hye.default.unstable_renderSubtreeIntoContainer(a,q,a._overlayTarget,function(){T&&a.props.onRendered&&a.props.onRendered()})}else a._unrenderOverlay(),a._unmountOverlayTarget()},a._unrenderOverlay=function(){a._overlayTarget&&(Hye.default.unmountComponentAtNode(a._overlayTarget),a._overlayInstance=null)},a.getMountNode=function(){return a._overlayTarget},r),Yye(a,u)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(a){this._overlayTarget&&a.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,Xye.default)(a.container,(0,Jye.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(Zye.default.Component);Ez.displayName="Portal";Ez.propTypes={container:Az.default.oneOfType([bwt.default,Az.default.func]),onRendered:Az.default.func};hA.default=Ez;Qye.exports=hA.default});var i_e=w((fA,r_e)=>{"use strict";fA.__esModule=!0;var Iwt=Xs(),Cwt=kc(Iwt),Pwt=Si(),Tz=kc(Pwt),Mwt=Qq(),Owt=kc(Mwt),kwt=Mr(),Rwt=kc(kwt),Dwt=Su(),Iz=kc(Dwt),Lwt=uA(),Fwt=kc(Lwt),zwt=cA(),Nwt=kc(zwt),Bwt=e_e(),Uwt=kc(Bwt);function kc(e){return e&&e.__esModule?e:{default:e}}function jwt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t_e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Vwt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Cz=function(e){Vwt(t,e);function t(){var r,a,u;jwt(this,t);for(var s=arguments.length,m=Array(s),x=0;x<s;x++)m[x]=arguments[x];return u=(r=(a=t_e(this,e.call.apply(e,[this].concat(m))),a),a.getMountNode=function(){return a._portalContainerNode},r),t_e(a,u)}return t.prototype.UNSAFE_componentWillMount=function(){if(Cwt.default){var a=this.props.container;typeof a=="function"&&(a=a()),!(a&&!Iz.default.findDOMNode(a))&&this.setContainer(a)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(a){a.container!==this.props.container&&this.setContainer(a.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(a){this._portalContainerNode=(0,Fwt.default)(a,(0,Nwt.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?Iz.default.createPortal(this.props.children,this._portalContainerNode):null},t}(Rwt.default.Component);Cz.displayName="Portal";Cz.propTypes={container:Tz.default.oneOfType([Owt.default,Tz.default.func]),onRendered:Tz.default.func};fA.default=Iz.default.createPortal?Cz:Uwt.default;r_e.exports=fA.default});var s_e=w((dA,o_e)=>{"use strict";dA.__esModule=!0;var $wt=Si(),Wwt=n_e($wt),Gwt=Mr(),Kwt=n_e(Gwt);function n_e(e){return e&&e.__esModule?e:{default:e}}function Zwt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hwt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Xwt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Jwt={children:Wwt.default.node},a_e=function(e){Xwt(t,e);function t(){return Zwt(this,t),Hwt(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(Kwt.default.Component);a_e.propTypes=Jwt;dA.default=a_e;o_e.exports=dA.default});var c_e=w((pA,l_e)=>{"use strict";pA.__esModule=!0;pA.default=function(e,t,r,a){return(0,Qwt.default)(e,t,r,a),{remove:function(){(0,tSt.default)(e,t,r,a)}}};var Ywt=Wq(),Qwt=u_e(Ywt),eSt=Gq(),tSt=u_e(eSt);function u_e(e){return e&&e.__esModule?e:{default:e}}l_e.exports=pA.default});var f_e=w((mA,h_e)=>{"use strict";mA.__esModule=!0;mA.default=rSt;function rSt(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}h_e.exports=mA.default});var S_e=w((gA,w_e)=>{"use strict";gA.__esModule=!0;var v_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},iSt=Gge(),Pz=vn(iSt),nSt=fz(),g_e=vn(nSt),aSt=Xs(),oSt=vn(aSt),sSt=Si(),Nr=vn(sSt),uSt=Qq(),lSt=vn(uSt),cSt=Sye(),hSt=vn(cSt),fSt=am(),d_e=vn(fSt),y_e=Mr(),Rc=vn(y_e),dSt=Su(),pSt=vn(dSt),mSt=yge(),vSt=vn(mSt),gSt=$ye(),x_e=vn(gSt),ySt=i_e(),b_e=vn(ySt),_St=s_e(),xSt=vn(_St),bSt=c_e(),p_e=vn(bSt),wSt=f_e(),SSt=vn(wSt),qSt=uA(),ASt=vn(qSt),ESt=cA(),Mz=vn(ESt);function vn(e){return e&&e.__esModule?e:{default:e}}function TSt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m_e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ISt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CSt=new x_e.default,vA=function(e){ISt(t,e);function t(){var r,a,u;TSt(this,t);for(var s=arguments.length,m=Array(s),x=0;x<s;x++)m[x]=arguments[x];return u=(r=(a=m_e(this,e.call.apply(e,[this].concat(m))),a),PSt.call(a),r),m_e(a,u)}return t.prototype.omitProps=function(a,u){var s=Object.keys(a),m={};return s.map(function(x){Object.prototype.hasOwnProperty.call(u,x)||(m[x]=a[x])}),m},t.prototype.render=function(){var a=this.props,u=a.show,s=a.container,m=a.children,x=a.transition,q=a.backdrop,T=a.className,I=a.style,L=a.onExit,z=a.onExiting,Y=a.onEnter,pe=a.onEntering,de=a.onEntered,Z=Rc.default.Children.only(m),H=this.omitProps(this.props,t.propTypes),J=u||x&&!this.state.exited;if(!J)return null;var ve=Z.props,be=ve.role,Le=ve.tabIndex;return(be===void 0||Le===void 0)&&(Z=(0,y_e.cloneElement)(Z,{role:be===void 0?"document":be,tabIndex:Le==null?"-1":Le})),x&&(Z=Rc.default.createElement(x,{appear:!0,unmountOnExit:!0,in:u,onExit:L,onExiting:z,onExited:this.handleHidden,onEnter:Y,onEntering:pe,onEntered:de},Z)),Rc.default.createElement(b_e.default,{ref:this.setMountNode,container:s,onRendered:this.onPortalRendered},Rc.default.createElement("div",v_e({ref:this.setModalNodeRef,role:be||"dialog"},H,{style:I,className:T}),q&&this.renderBackdrop(),Rc.default.createElement(xSt.default,{ref:this.setDialogRef},Z)))},t.prototype.UNSAFE_componentWillReceiveProps=function(a){a.show?this.setState({exited:!1}):a.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(a){!this.props.show&&a.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(a){var u=this.props.transition;a.show&&!this.props.show&&!u?this.onHide():!a.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var a=this.props,u=a.show,s=a.transition;this._isMounted=!1,(u||s&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var a=this.getDialogElement(),u=(0,Pz.default)((0,Mz.default)(this));a&&!(0,g_e.default)(a,u)&&(this.lastFocus=u,a.hasAttribute("tabIndex")||((0,vSt.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),a.setAttribute("tabIndex",-1)),a.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return pSt.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(Rc.default.Component);vA.propTypes=v_e({},b_e.default.propTypes,{show:Nr.default.bool,container:Nr.default.oneOfType([lSt.default,Nr.default.func]),onShow:Nr.default.func,onHide:Nr.default.func,backdrop:Nr.default.oneOfType([Nr.default.bool,Nr.default.oneOf(["static"])]),renderBackdrop:Nr.default.func,onEscapeKeyDown:Nr.default.func,onEscapeKeyUp:(0,hSt.default)(Nr.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Nr.default.func,backdropStyle:Nr.default.object,backdropClassName:Nr.default.string,containerClassName:Nr.default.string,keyboard:Nr.default.bool,transition:d_e.default,backdropTransition:d_e.default,autoFocus:Nr.default.bool,enforceFocus:Nr.default.bool,restoreFocus:Nr.default.bool,onEnter:Nr.default.func,onEntering:Nr.default.func,onEntered:Nr.default.func,onExit:Nr.default.func,onExiting:Nr.default.func,onExited:Nr.default.func,manager:Nr.default.object.isRequired});vA.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:CSt,renderBackdrop:function(t){return Rc.default.createElement("div",t)}};var PSt=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,a=r.backdropStyle,u=r.backdropClassName,s=r.renderBackdrop,m=r.backdropTransition,x=function(I){return t.backdrop=I},q=s({ref:x,style:a,className:u,onClick:t.handleBackdropClick});return m&&(q=Rc.default.createElement(m,{appear:!0,in:t.props.show},q)),q},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,Mz.default)(t),a=(0,ASt.default)(t.props.container,r.body);t.props.manager.add(t,a,t.props.containerClassName),t._onDocumentKeydownListener=(0,p_e.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,p_e.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,SSt.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){oSt.default&&(t.lastFocus=(0,Pz.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),a=(0,Pz.default)((0,Mz.default)(t));r&&!(0,g_e.default)(r,a)&&r.focus()}}};vA.Manager=x_e.default;gA.default=vA;w_e.exports=gA.default});var Z_e=w((hGt,K_e)=>{var KSt="Expected a function",W_e=NaN,ZSt="[object Symbol]",HSt=/^\s+|\s+$/g,XSt=/^[-+]0x[0-9a-f]+$/i,JSt=/^0b[01]+$/i,YSt=/^0o[0-7]+$/i,QSt=parseInt,eqt=typeof global=="object"&&global&&global.Object===Object&&global,tqt=typeof self=="object"&&self&&self.Object===Object&&self,rqt=eqt||tqt||Function("return this")(),iqt=Object.prototype,nqt=iqt.toString,aqt=Math.max,oqt=Math.min,Vz=function(){return rqt.Date.now()};function sqt(e,t,r){var a,u,s,m,x,q,T=0,I=!1,L=!1,z=!0;if(typeof e!="function")throw new TypeError(KSt);t=G_e(t)||0,$z(r)&&(I=!!r.leading,L="maxWait"in r,s=L?aqt(G_e(r.maxWait)||0,t):s,z="trailing"in r?!!r.trailing:z);function Y(Pe){var Ge=a,pt=u;return a=u=void 0,T=Pe,m=e.apply(pt,Ge),m}function pe(Pe){return T=Pe,x=setTimeout(H,t),I?Y(Pe):m}function de(Pe){var Ge=Pe-q,pt=Pe-T,Ve=t-Ge;return L?oqt(Ve,s-pt):Ve}function Z(Pe){var Ge=Pe-q,pt=Pe-T;return q===void 0||Ge>=t||Ge<0||L&&pt>=s}function H(){var Pe=Vz();if(Z(Pe))return J(Pe);x=setTimeout(H,de(Pe))}function J(Pe){return x=void 0,z&&a?Y(Pe):(a=u=void 0,m)}function ve(){x!==void 0&&clearTimeout(x),T=0,a=q=u=x=void 0}function be(){return x===void 0?m:J(Vz())}function Le(){var Pe=Vz(),Ge=Z(Pe);if(a=arguments,u=this,q=Pe,Ge){if(x===void 0)return pe(q);if(L)return x=setTimeout(H,t),Y(q)}return x===void 0&&(x=setTimeout(H,t)),m}return Le.cancel=ve,Le.flush=be,Le}function $z(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function uqt(e){return!!e&&typeof e=="object"}function lqt(e){return typeof e=="symbol"||uqt(e)&&nqt.call(e)==ZSt}function G_e(e){if(typeof e=="number")return e;if(lqt(e))return W_e;if($z(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=$z(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(HSt,"");var r=JSt.test(e);return r||YSt.test(e)?QSt(e.slice(2),r?2:8):XSt.test(e)?W_e:+e}K_e.exports=sqt});var dqt={};Y0e(dqt,{SettingsProvider:()=>hqt,renderApp:()=>fqt});var Y_e=vt(Mr(),1),Q_e=vt(Su(),1),FGt=vt(pde(),1);var ff=vt(Mr(),1);var Kyt={AE:"ae",AK:"ak",CM:"cm",GL:"gl",MB:"mb",MTB:"mtb",TK:"tk",TKX:"tkx"};function Jp(){return{allow_download:!0,default_crs:null,description:"",license:"CC-BY-SA 4.0",link_zoomify:null,link_thumb_small:null,link_thumb_mid:null,map_type:Kyt.AK,map_scale:25e3,measures:null,owner:null,permalink:null,ppn:null,technic:null,time_of_publication:"1899-01-01T00:00:00",title:"",title_serie:null,title_short:"",type:null}}var Mt=vt(Mr(),1);var us=vt(Mr(),1);var __=e=>e.type==="checkbox",Qp=e=>e instanceof Date,ta=e=>e==null,qde=e=>typeof e=="object",zi=e=>!ta(e)&&!Array.isArray(e)&&qde(e)&&!Qp(e),Zyt=e=>zi(e)&&e.target?__(e.target)?e.target.checked:e.target.value:e,Hyt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Xyt=(e,t)=>e.has(Hyt(t)),Jyt=e=>{let t=e.constructor&&e.constructor.prototype;return zi(t)&&t.hasOwnProperty("isPrototypeOf")},QL=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Zu(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(QL&&(e instanceof Blob||e instanceof FileList))&&(r||zi(e))){if(t=r?[]:{},!r&&!Jyt(e))t=e;else for(let a in e)e.hasOwnProperty(a)&&(t[a]=Zu(e[a]));}else return e;return t}var x_=e=>Array.isArray(e)?e.filter(Boolean):[],Ci=e=>e===void 0,wt=(e,t,r)=>{if(!t||!zi(e))return r;let a=x_(t.split(/[,[\].]+?/)).reduce((u,s)=>ta(u)?u:u[s],e);return Ci(a)||a===e?Ci(e[t])?r:e[t]:a},nf=e=>typeof e=="boolean",mde={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ls={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ku={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ade=us.default.createContext(null),Ede=()=>us.default.useContext(Ade),Tde=e=>{let a=e,{children:t}=a,r=Av(a,["children"]);return us.default.createElement(Ade.Provider,{value:r},t)},Yyt=(e,t,r,a=!0)=>{let u={defaultValues:t._defaultValues};for(let s in e)Object.defineProperty(u,s,{get:()=>{let m=s;return t._proxyFormState[m]!==ls.all&&(t._proxyFormState[m]=!a||ls.all),r&&(r[m]=!0),e[m]}});return u},Fo=e=>zi(e)&&!Object.keys(e).length,Qyt=(e,t,r,a)=>{r(e);let m=e,{name:u}=m,s=Av(m,["name"]);return Fo(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(x=>t[x]===(!a||ls.all))},KL=e=>Array.isArray(e)?e:[e];function e_t(e){let t=us.default.useRef(e);t.current=e,us.default.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var $s=e=>typeof e=="string",t_t=(e,t,r,a,u)=>$s(e)?(a&&t.watch.add(e),wt(r,e,u)):Array.isArray(e)?e.map(s=>(a&&t.watch.add(s),wt(r,s))):(a&&(t.watchAll=!0),r);var eF=e=>/^\w*$/.test(e),Ide=e=>x_(e.replace(/["|']|\]/g,"").split(/\.|\[/));function ei(e,t,r){let a=-1,u=eF(t)?[t]:Ide(t),s=u.length,m=s-1;for(;++a<s;){let x=u[a],q=r;if(a!==m){let T=e[x];q=zi(T)||Array.isArray(T)?T:isNaN(+u[a+1])?{}:[]}e[x]=q,e=e[x]}return e}var r_t=(e,t,r,a,u)=>t?da(at({},r[e]),{types:da(at({},r[e]&&r[e].types?r[e].types:{}),{[a]:u||!0})}):{},YL=(e,t,r)=>{for(let u of r||Object.keys(e)){let s=wt(e,u);if(s){let a=s,{_f:m}=a,x=Av(a,["_f"]);if(m&&t(m.name)){if(m.ref.focus){m.ref.focus();break}else if(m.refs&&m.refs[0].focus){m.refs[0].focus();break}}else zi(x)&&YL(x,t)}}};var vde=e=>({isOnSubmit:!e||e===ls.onSubmit,isOnBlur:e===ls.onBlur,isOnChange:e===ls.onChange,isOnAll:e===ls.all,isOnTouch:e===ls.onTouched}),gde=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length)))),i_t=(e,t,r)=>{let a=x_(wt(e,r));return ei(a,"root",t[r]),ei(e,r,a),e},tF=e=>e.type==="file",Cc=e=>typeof e=="function",ZS=e=>{if(!QL)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},KS=e=>$s(e),rF=e=>e.type==="radio",HS=e=>e instanceof RegExp,yde={value:!1,isValid:!1},_de={value:!0,isValid:!0},Cde=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ci(e[0].attributes.value)?Ci(e[0].value)||e[0].value===""?_de:{value:e[0].value,isValid:!0}:_de:yde}return yde},xde={isValid:!1,value:null},Pde=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,xde):xde;function bde(e,t,r="validate"){if(KS(e)||Array.isArray(e)&&e.every(KS)||nf(e)&&!e)return{type:r,message:KS(e)?e:"",ref:t}}var Yp=e=>zi(e)&&!HS(e)?e:{value:e,message:""},wde=(e,t,r,a,u)=>yi(void 0,null,function*(){let{ref:s,refs:m,required:x,maxLength:q,minLength:T,min:I,max:L,pattern:z,validate:Y,name:pe,valueAsNumber:de,mount:Z,disabled:H}=e._f,J=wt(t,pe);if(!Z||H)return{};let ve=m?m[0]:s,be=yt=>{a&&ve.reportValidity&&(ve.setCustomValidity(nf(yt)?"":yt||""),ve.reportValidity())},Le={},Pe=rF(s),Ge=__(s),pt=Pe||Ge,Ve=(de||tF(s))&&Ci(s.value)&&Ci(J)||ZS(s)&&s.value===""||J===""||Array.isArray(J)&&!J.length,Br=r_t.bind(null,pe,r,Le),cr=(yt,Ct,pr,_r=Ku.maxLength,Ur=Ku.minLength)=>{let Dr=yt?Ct:pr;Le[pe]=at({type:yt?_r:Ur,message:Dr,ref:s},Br(yt?_r:Ur,Dr))};if(u?!Array.isArray(J)||!J.length:x&&(!pt&&(Ve||ta(J))||nf(J)&&!J||Ge&&!Cde(m).isValid||Pe&&!Pde(m).isValid)){let{value:yt,message:Ct}=KS(x)?{value:!!x,message:x}:Yp(x);if(yt&&(Le[pe]=at({type:Ku.required,message:Ct,ref:ve},Br(Ku.required,Ct)),!r))return be(Ct),Le}if(!Ve&&(!ta(I)||!ta(L))){let yt,Ct,pr=Yp(L),_r=Yp(I);if(!ta(J)&&!isNaN(J)){let Ur=s.valueAsNumber||J&&+J;ta(pr.value)||(yt=Ur>pr.value),ta(_r.value)||(Ct=Ur<_r.value)}else{let Ur=s.valueAsDate||new Date(J),Dr=Mi=>new Date(new Date().toDateString()+" "+Mi),Pi=s.type=="time",si=s.type=="week";$s(pr.value)&&J&&(yt=Pi?Dr(J)>Dr(pr.value):si?J>pr.value:Ur>new Date(pr.value)),$s(_r.value)&&J&&(Ct=Pi?Dr(J)<Dr(_r.value):si?J<_r.value:Ur<new Date(_r.value))}if((yt||Ct)&&(cr(!!yt,pr.message,_r.message,Ku.max,Ku.min),!r))return be(Le[pe].message),Le}if((q||T)&&!Ve&&($s(J)||u&&Array.isArray(J))){let yt=Yp(q),Ct=Yp(T),pr=!ta(yt.value)&&J.length>+yt.value,_r=!ta(Ct.value)&&J.length<+Ct.value;if((pr||_r)&&(cr(pr,yt.message,Ct.message),!r))return be(Le[pe].message),Le}if(z&&!Ve&&$s(J)){let{value:yt,message:Ct}=Yp(z);if(HS(yt)&&!J.match(yt)&&(Le[pe]=at({type:Ku.pattern,message:Ct,ref:s},Br(Ku.pattern,Ct)),!r))return be(Ct),Le}if(Y){if(Cc(Y)){let yt=yield Y(J,t),Ct=bde(yt,ve);if(Ct&&(Le[pe]=at(at({},Ct),Br(Ku.validate,Ct.message)),!r))return be(Ct.message),Le}else if(zi(Y)){let yt={};for(let Ct in Y){if(!Fo(yt)&&!r)break;let pr=bde((yield Y[Ct](J,t)),ve,Ct);pr&&(yt=at(at({},pr),Br(Ct,pr.message)),be(pr.message),r&&(Le[pe]=yt))}if(!Fo(yt)&&(Le[pe]=at({ref:ve},yt),!r))return Le}}return be(!0),Le});function n_t(e,t){let r=t.slice(0,-1).length,a=0;for(;a<r;)e=Ci(e)?a++:e[t[a++]];return e}function a_t(e){for(let t in e)if(e.hasOwnProperty(t)&&!Ci(e[t]))return!1;return!0}function dn(e,t){let r=Array.isArray(t)?t:eF(t)?[t]:Ide(t),a=r.length===1?e:n_t(e,r),u=r.length-1,s=r[u];return a&&delete a[s],u!==0&&(zi(a)&&Fo(a)||Array.isArray(a)&&a_t(a))&&dn(e,r.slice(0,-1)),e}function ZL(){let e=[];return{get observers(){return e},next:u=>{for(let s of e)s.next&&s.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(s=>s!==u)}}),unsubscribe:()=>{e=[]}}}var XS=e=>ta(e)||!qde(e);function af(e,t){if(XS(e)||XS(t))return e===t;if(Qp(e)&&Qp(t))return e.getTime()===t.getTime();let r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(let u of r){let s=e[u];if(!a.includes(u))return!1;if(u!=="ref"){let m=t[u];if(Qp(s)&&Qp(m)||zi(s)&&zi(m)||Array.isArray(s)&&Array.isArray(m)?!af(s,m):s!==m)return!1}}return!0}var Mde=e=>e.type==="select-multiple",o_t=e=>rF(e)||__(e),HL=e=>ZS(e)&&e.isConnected,Ode=e=>{for(let t in e)if(Cc(e[t]))return!0;return!1};function JS(e,t={}){let r=Array.isArray(e);if(zi(e)||r)for(let a in e)Array.isArray(e[a])||zi(e[a])&&!Ode(e[a])?(t[a]=Array.isArray(e[a])?[]:{},JS(e[a],t[a])):ta(e[a])||(t[a]=!0);return t}function kde(e,t,r){let a=Array.isArray(e);if(zi(e)||a)for(let u in e)Array.isArray(e[u])||zi(e[u])&&!Ode(e[u])?Ci(t)||XS(r[u])?r[u]=Array.isArray(e[u])?JS(e[u],[]):at({},JS(e[u])):kde(e[u],ta(t)?{}:t[u],r[u]):r[u]=!af(e[u],t[u]);return r}var XL=(e,t)=>kde(e,t,JS(t)),Rde=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:a})=>Ci(e)?e:t?e===""?NaN:e&&+e:r&&$s(e)?new Date(e):a?a(e):e;function JL(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return tF(t)?t.files:rF(t)?Pde(e.refs).value:Mde(t)?[...t.selectedOptions].map(({value:r})=>r):__(t)?Cde(e.refs).value:Rde(Ci(t.value)?e.ref.value:t.value,e)}var s_t=(e,t,r,a)=>{let u={};for(let s of e){let m=wt(t,s);m&&ei(u,s,m._f)}return{criteriaMode:r,names:[...e],fields:u,shouldUseNativeValidation:a}},y_=e=>Ci(e)?e:HS(e)?e.source:zi(e)?HS(e.value)?e.value.source:e.value:e,u_t=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Sde(e,t,r){let a=wt(e,r);if(a||eF(r))return{error:a,name:r};let u=r.split(".");for(;u.length;){let s=u.join("."),m=wt(t,s),x=wt(e,s);if(m&&!Array.isArray(m)&&r!==s)return{name:r};if(x&&x.type)return{name:s,error:x};u.pop()}return{name:r}}var l_t=(e,t,r,a,u)=>u.isOnAll?!1:!r&&u.isOnTouch?!(t||e):(r?a.isOnBlur:u.isOnBlur)?!e:(r?a.isOnChange:u.isOnChange)?e:!0,c_t=(e,t)=>!x_(wt(e,t)).length&&dn(e,t),h_t={mode:ls.onSubmit,reValidateMode:ls.onChange,shouldFocusError:!0};function f_t(e={},t){let r=at(at({},h_t),e),a={submitCount:0,isDirty:!1,isLoading:Cc(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},u={},s=zi(r.defaultValues)||zi(r.values)?Zu(r.defaultValues||r.values)||{}:{},m=r.shouldUnregister?{}:Zu(s),x={action:!1,mount:!1,watch:!1},q={mount:new Set,unMount:new Set,array:new Set,watch:new Set},T,I=0,L={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},z={values:ZL(),array:ZL(),state:ZL()},Y=e.resetOptions&&e.resetOptions.keepDirtyValues,pe=vde(r.mode),de=vde(r.reValidateMode),Z=r.criteriaMode===ls.all,H=ue=>Se=>{clearTimeout(I),I=setTimeout(ue,Se)},J=ue=>yi(this,null,function*(){if(L.isValid||ue){let Se=r.resolver?Fo((yield Ve()).errors):yield cr(u,!0);Se!==a.isValid&&z.state.next({isValid:Se})}}),ve=ue=>L.isValidating&&z.state.next({isValidating:ue}),be=(ue,Se=[],Oe,_t,et=!0,Je=!0)=>{if(_t&&Oe){if(x.action=!0,Je&&Array.isArray(wt(u,ue))){let mt=Oe(wt(u,ue),_t.argA,_t.argB);et&&ei(u,ue,mt)}if(Je&&Array.isArray(wt(a.errors,ue))){let mt=Oe(wt(a.errors,ue),_t.argA,_t.argB);et&&ei(a.errors,ue,mt),c_t(a.errors,ue)}if(L.touchedFields&&Je&&Array.isArray(wt(a.touchedFields,ue))){let mt=Oe(wt(a.touchedFields,ue),_t.argA,_t.argB);et&&ei(a.touchedFields,ue,mt)}L.dirtyFields&&(a.dirtyFields=XL(s,m)),z.state.next({name:ue,isDirty:Ct(ue,Se),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else ei(m,ue,Se)},Le=(ue,Se)=>{ei(a.errors,ue,Se),z.state.next({errors:a.errors})},Pe=(ue,Se,Oe,_t)=>{let et=wt(u,ue);if(et){let Je=wt(m,ue,Ci(Oe)?wt(s,ue):Oe);Ci(Je)||_t&&_t.defaultChecked||Se?ei(m,ue,Se?Je:JL(et._f)):Ur(ue,Je),x.mount&&J()}},Ge=(ue,Se,Oe,_t,et)=>{let Je=!1,mt=!1,Qt={name:ue};if(!Oe||_t){L.isDirty&&(mt=a.isDirty,a.isDirty=Qt.isDirty=Ct(),Je=mt!==Qt.isDirty);let ar=af(wt(s,ue),Se);mt=wt(a.dirtyFields,ue),ar?dn(a.dirtyFields,ue):ei(a.dirtyFields,ue,!0),Qt.dirtyFields=a.dirtyFields,Je=Je||L.dirtyFields&&mt!==!ar}if(Oe){let ar=wt(a.touchedFields,ue);ar||(ei(a.touchedFields,ue,Oe),Qt.touchedFields=a.touchedFields,Je=Je||L.touchedFields&&ar!==Oe)}return Je&&et&&z.state.next(Qt),Je?Qt:{}},pt=(ue,Se,Oe,_t)=>{let et=wt(a.errors,ue),Je=L.isValid&&nf(Se)&&a.isValid!==Se;if(e.delayError&&Oe?(T=H(()=>Le(ue,Oe)),T(e.delayError)):(clearTimeout(I),T=null,Oe?ei(a.errors,ue,Oe):dn(a.errors,ue)),(Oe?!af(et,Oe):et)||!Fo(_t)||Je){let mt=da(at(at({},_t),Je&&nf(Se)?{isValid:Se}:{}),{errors:a.errors,name:ue});a=at(at({},a),mt),z.state.next(mt)}ve(!1)},Ve=ue=>yi(this,null,function*(){return r.resolver(m,r.context,s_t(ue||q.mount,u,r.criteriaMode,r.shouldUseNativeValidation))}),Br=ue=>yi(this,null,function*(){let{errors:Se}=yield Ve(ue);if(ue)for(let Oe of ue){let _t=wt(Se,Oe);_t?ei(a.errors,Oe,_t):dn(a.errors,Oe)}else a.errors=Se;return Se}),cr=(_t,et,...Je)=>yi(this,[_t,et,...Je],function*(ue,Se,Oe={valid:!0}){for(let Qt in ue){let ar=ue[Qt];if(ar){let mt=ar,{_f:Re}=mt,Qi=Av(mt,["_f"]);if(Re){let Zr=q.array.has(Re.name),vi=yield wde(ar,m,Z,r.shouldUseNativeValidation&&!Se,Zr);if(vi[Re.name]&&(Oe.valid=!1,Se))break;!Se&&(wt(vi,Re.name)?Zr?i_t(a.errors,vi,Re.name):ei(a.errors,Re.name,vi[Re.name]):dn(a.errors,Re.name))}Qi&&(yield cr(Qi,Se,Oe))}}return Oe.valid}),yt=()=>{for(let ue of q.unMount){let Se=wt(u,ue);Se&&(Se._f.refs?Se._f.refs.every(Oe=>!HL(Oe)):!HL(Se._f.ref))&&Yi(ue)}q.unMount=new Set},Ct=(ue,Se)=>(ue&&Se&&ei(m,ue,Se),!af(jo(),s)),pr=(ue,Se,Oe)=>t_t(ue,q,at({},x.mount?m:Ci(Se)?s:$s(ue)?{[ue]:Se}:Se),Oe,Se),_r=ue=>x_(wt(x.mount?m:s,ue,e.shouldUnregister?wt(s,ue,[]):[])),Ur=(ue,Se,Oe={})=>{let _t=wt(u,ue),et=Se;if(_t){let Je=_t._f;Je&&(!Je.disabled&&ei(m,ue,Rde(Se,Je)),et=ZS(Je.ref)&&ta(Se)?"":Se,Mde(Je.ref)?[...Je.ref.options].forEach(mt=>mt.selected=et.includes(mt.value)):Je.refs?__(Je.ref)?Je.refs.length>1?Je.refs.forEach(mt=>(!mt.defaultChecked||!mt.disabled)&&(mt.checked=Array.isArray(et)?!!et.find(Qt=>Qt===mt.value):et===mt.value)):Je.refs[0]&&(Je.refs[0].checked=!!et):Je.refs.forEach(mt=>mt.checked=mt.value===et):tF(Je.ref)?Je.ref.value="":(Je.ref.value=et,Je.ref.type||z.values.next({name:ue,values:at({},m)})))}(Oe.shouldDirty||Oe.shouldTouch)&&Ge(ue,et,Oe.shouldTouch,Oe.shouldDirty,!0),Oe.shouldValidate&&Mi(ue)},Dr=(ue,Se,Oe)=>{for(let _t in Se){let et=Se[_t],Je=`${ue}.${_t}`,mt=wt(u,Je);(q.array.has(ue)||!XS(et)||mt&&!mt._f)&&!Qp(et)?Dr(Je,et,Oe):Ur(Je,et,Oe)}},Pi=(ue,Se,Oe={})=>{let _t=wt(u,ue),et=q.array.has(ue),Je=Zu(Se);ei(m,ue,Je),et?(z.array.next({name:ue,values:at({},m)}),(L.isDirty||L.dirtyFields)&&Oe.shouldDirty&&z.state.next({name:ue,dirtyFields:XL(s,m),isDirty:Ct(ue,Je)})):_t&&!_t._f&&!ta(Je)?Dr(ue,Je,Oe):Ur(ue,Je,Oe),gde(ue,q)&&z.state.next(at({},a)),z.values.next({name:ue,values:at({},m)}),!x.mount&&t()},si=ue=>yi(this,null,function*(){let Se=ue.target,Oe=Se.name,_t=!0,et=wt(u,Oe),Je=()=>Se.type?JL(et._f):Zyt(ue);if(et){let mt,Qt,ar=Je(),Re=ue.type===mde.BLUR||ue.type===mde.FOCUS_OUT,Qi=!u_t(et._f)&&!r.resolver&&!wt(a.errors,Oe)&&!et._f.deps||l_t(Re,wt(a.touchedFields,Oe),a.isSubmitted,de,pe),Zr=gde(Oe,q,Re);ei(m,Oe,ar),Re?(et._f.onBlur&&et._f.onBlur(ue),T&&T(0)):et._f.onChange&&et._f.onChange(ue);let vi=Ge(Oe,ar,Re,!1),no=!Fo(vi)||Zr;if(!Re&&z.values.next({name:Oe,type:ue.type,values:at({},m)}),Qi)return L.isValid&&J(),no&&z.state.next(at({name:Oe},Zr?{}:vi));if(!Re&&Zr&&z.state.next(at({},a)),ve(!0),r.resolver){let{errors:Ne}=yield Ve([Oe]),Ft=Sde(a.errors,u,Oe),qt=Sde(Ne,u,Ft.name||Oe);mt=qt.error,Oe=qt.name,Qt=Fo(Ne)}else mt=(yield wde(et,m,Z,r.shouldUseNativeValidation))[Oe],_t=Number.isNaN(ar)||ar===wt(m,Oe,ar),_t&&(mt?Qt=!1:L.isValid&&(Qt=yield cr(u,!0)));_t&&(et._f.deps&&Mi(et._f.deps),pt(Oe,Qt,mt,vi))}}),Mi=(Oe,..._t)=>yi(this,[Oe,..._t],function*(ue,Se={}){let et,Je,mt=KL(ue);if(ve(!0),r.resolver){let Qt=yield Br(Ci(ue)?ue:mt);et=Fo(Qt),Je=ue?!mt.some(ar=>wt(Qt,ar)):et}else ue?(Je=(yield Promise.all(mt.map(Qt=>yi(this,null,function*(){let ar=wt(u,Qt);return yield cr(ar&&ar._f?{[Qt]:ar}:ar)})))).every(Boolean),!(!Je&&!a.isValid)&&J()):Je=et=yield cr(u);return z.state.next(da(at(at({},!$s(ue)||L.isValid&&et!==a.isValid?{}:{name:ue}),r.resolver||!ue?{isValid:et}:{}),{errors:a.errors,isValidating:!1})),Se.shouldFocus&&!Je&&YL(u,Qt=>Qt&&wt(a.errors,Qt),ue?mt:q.mount),Je}),jo=ue=>{let Se=at(at({},s),x.mount?m:{});return Ci(ue)?Se:$s(ue)?wt(Se,ue):ue.map(Oe=>wt(Se,Oe))},Oa=(ue,Se)=>({invalid:!!wt((Se||a).errors,ue),isDirty:!!wt((Se||a).dirtyFields,ue),isTouched:!!wt((Se||a).touchedFields,ue),error:wt((Se||a).errors,ue)}),ia=ue=>{ue&&KL(ue).forEach(Se=>dn(a.errors,Se)),z.state.next({errors:ue?a.errors:{}})},Vo=(ue,Se,Oe)=>{let _t=(wt(u,ue,{_f:{}})._f||{}).ref;ei(a.errors,ue,da(at({},Se),{ref:_t})),z.state.next({name:ue,errors:a.errors,isValid:!1}),Oe&&Oe.shouldFocus&&_t&&_t.focus&&_t.focus()},Ji=(ue,Se)=>Cc(ue)?z.values.subscribe({next:Oe=>ue(pr(void 0,Se),Oe)}):pr(ue,Se,!0),Yi=(ue,Se={})=>{for(let Oe of ue?KL(ue):q.mount)q.mount.delete(Oe),q.array.delete(Oe),Se.keepValue||(dn(u,Oe),dn(m,Oe)),!Se.keepError&&dn(a.errors,Oe),!Se.keepDirty&&dn(a.dirtyFields,Oe),!Se.keepTouched&&dn(a.touchedFields,Oe),!r.shouldUnregister&&!Se.keepDefaultValue&&dn(s,Oe);z.values.next({values:at({},m)}),z.state.next(at(at({},a),Se.keepDirty?{isDirty:Ct()}:{})),!Se.keepIsValid&&J()},ro=({disabled:ue,name:Se,field:Oe,fields:_t})=>{if(nf(ue)){let et=ue?void 0:wt(m,Se,JL(Oe?Oe._f:wt(_t,Se)._f));ei(m,Se,et),Ge(Se,et,!1,!1,!0)}},ka=(ue,Se={})=>{let Oe=wt(u,ue),_t=nf(Se.disabled);return ei(u,ue,da(at({},Oe||{}),{_f:at(da(at({},Oe&&Oe._f?Oe._f:{ref:{name:ue}}),{name:ue,mount:!0}),Se)})),q.mount.add(ue),Oe?ro({field:Oe,disabled:Se.disabled,name:ue}):Pe(ue,!0,Se.value),da(at(at({},_t?{disabled:Se.disabled}:{}),r.progressive?{required:!!Se.required,min:y_(Se.min),max:y_(Se.max),minLength:y_(Se.minLength),maxLength:y_(Se.maxLength),pattern:y_(Se.pattern)}:{}),{name:ue,onChange:si,onBlur:si,ref:et=>{if(et){ka(ue,Se),Oe=wt(u,ue);let Je=Ci(et.value)&&et.querySelectorAll&&et.querySelectorAll("input,select,textarea")[0]||et,mt=o_t(Je),Qt=Oe._f.refs||[];if(mt?Qt.find(ar=>ar===Je):Je===Oe._f.ref)return;ei(u,ue,{_f:at(at({},Oe._f),mt?{refs:[...Qt.filter(HL),Je,...(Array.isArray(wt(s,ue))?[{}]:[])],ref:{type:Je.type,name:ue}}:{ref:Je})}),Pe(ue,!1,void 0,Je)}else Oe=wt(u,ue,{}),Oe._f&&(Oe._f.mount=!1),(r.shouldUnregister||Se.shouldUnregister)&&!(Xyt(q.array,ue)&&x.action)&&q.unMount.add(ue)}})},hs=()=>r.shouldFocusError&&YL(u,ue=>ue&&wt(a.errors,ue),q.mount),na=(ue,Se)=>Oe=>yi(this,null,function*(){Oe&&(Oe.preventDefault&&Oe.preventDefault(),Oe.persist&&Oe.persist());let _t=Zu(m);if(z.state.next({isSubmitting:!0}),r.resolver){let{errors:et,values:Je}=yield Ve();a.errors=et,_t=Je}else yield cr(u);dn(a.errors,"root"),Fo(a.errors)?(z.state.next({errors:{}}),yield ue(_t,Oe)):(Se&&(yield Se(at({},a.errors),Oe)),hs(),setTimeout(hs)),z.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Fo(a.errors),submitCount:a.submitCount+1,errors:a.errors})}),io=(ue,Se={})=>{wt(u,ue)&&(Ci(Se.defaultValue)?Pi(ue,wt(s,ue)):(Pi(ue,Se.defaultValue),ei(s,ue,Se.defaultValue)),Se.keepTouched||dn(a.touchedFields,ue),Se.keepDirty||(dn(a.dirtyFields,ue),a.isDirty=Se.defaultValue?Ct(ue,wt(s,ue)):Ct()),Se.keepError||(dn(a.errors,ue),L.isValid&&J()),z.state.next(at({},a)))},Ra=(ue,Se={})=>{let Oe=ue?Zu(ue):s,_t=Zu(Oe),et=ue&&!Fo(ue)?_t:s;if(Se.keepDefaultValues||(s=Oe),!Se.keepValues){if(Se.keepDirtyValues||Y)for(let Je of q.mount)wt(a.dirtyFields,Je)?ei(et,Je,wt(m,Je)):Pi(Je,wt(et,Je));else{if(QL&&Ci(ue))for(let Je of q.mount){let mt=wt(u,Je);if(mt&&mt._f){let Qt=Array.isArray(mt._f.refs)?mt._f.refs[0]:mt._f.ref;if(ZS(Qt)){let ar=Qt.closest("form");if(ar){ar.reset();break}}}}u={}}m=e.shouldUnregister?Se.keepDefaultValues?Zu(s):{}:Zu(et),z.array.next({values:at({},et)}),z.values.next({values:at({},et)})}q={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!x.mount&&t(),x.mount=!L.isValid||!!Se.keepIsValid,x.watch=!!e.shouldUnregister,z.state.next({submitCount:Se.keepSubmitCount?a.submitCount:0,isDirty:Se.keepDirty?a.isDirty:!!(Se.keepDefaultValues&&!af(ue,s)),isSubmitted:Se.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:Se.keepDirtyValues?a.dirtyFields:Se.keepDefaultValues&&ue?XL(s,ue):{},touchedFields:Se.keepTouched?a.touchedFields:{},errors:Se.keepErrors?a.errors:{},isSubmitSuccessful:Se.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1})},$o=(ue,Se)=>Ra(Cc(ue)?ue(m):ue,Se);return{control:{register:ka,unregister:Yi,getFieldState:Oa,handleSubmit:na,setError:Vo,_executeSchema:Ve,_getWatch:pr,_getDirty:Ct,_updateValid:J,_removeUnmounted:yt,_updateFieldArray:be,_updateDisabledField:ro,_getFieldArray:_r,_reset:Ra,_resetDefaultValues:()=>Cc(r.defaultValues)&&r.defaultValues().then(ue=>{$o(ue,r.resetOptions),z.state.next({isLoading:!1})}),_updateFormState:ue=>{a=at(at({},a),ue)},_subjects:z,_proxyFormState:L,get _fields(){return u},get _formValues(){return m},get _state(){return x},set _state(ue){x=ue},get _defaultValues(){return s},get _names(){return q},set _names(ue){q=ue},get _formState(){return a},set _formState(ue){a=ue},get _options(){return r},set _options(ue){r=at(at({},r),ue)}},trigger:Mi,register:ka,handleSubmit:na,watch:Ji,setValue:Pi,getValues:jo,reset:$o,resetField:io,clearErrors:ia,unregister:Yi,setError:Vo,setFocus:(ue,Se={})=>{let Oe=wt(u,ue),_t=Oe&&Oe._f;if(_t){let et=_t.refs?_t.refs[0]:_t.ref;et.focus&&(et.focus(),Se.shouldSelect&&et.select())}},getFieldState:Oa}}function Dde(e={}){let t=us.default.useRef(),r=us.default.useRef(),[a,u]=us.default.useState({isDirty:!1,isValidating:!1,isLoading:Cc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Cc(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=da(at({},f_t(e,()=>u(m=>at({},m)))),{formState:a}));let s=t.current.control;return s._options=e,e_t({subject:s._subjects.state,next:m=>{Qyt(m,s._proxyFormState,s._updateFormState,!0)&&u(at({},s._formState))}}),us.default.useEffect(()=>{e.values&&!af(e.values,r.current)?(s._reset(e.values,s._options.resetOptions),r.current=e.values):s._resetDefaultValues()},[e.values,s]),us.default.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next(at({},s._formState))),s._removeUnmounted()}),t.current.formState=Yyt(a,s),t.current}var pm=vt(Si(),1);var Ia=vt(Mr(),1);var Ta=vt(Si(),1);var Vde=e=>{let t={};return Object.keys(e).forEach(r=>{e[r]!==void 0&&e[r]!==null&&(r==="time_of_publication"?t[r]=`${e[r]}-01-01T00:00:00`:r==="map_scale"?t[r]=Number(e[r]):r==="allow_download"?t[r]=e[r]==="true":t[r]=e[r])}),t},$de=(e,t)=>{let r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!0;for(let u of r)if(e[u]!==t[u])return!0;return!1},Wde=(e,t)=>Object.keys(e).filter(r=>r.includes(t)).reduce((r,a)=>Object.assign(r,{error:e[a]}),{}),Hu={ok:e=>({data:e,error:null,httpErrorStatusCode:null}),error:e=>{let t=999;return e.response&&e.response.status&&(t=e.response.status),{data:null,error:e,httpErrorStatusCode:t}}};var m_t=e=>Object.keys(e).length>0,Gde=({message:e})=>Ia.default.createElement("div",null,Ia.default.createElement("span",{className:"glyphicon glyphicon-exclamation-sign","aria-hidden":"true"}),Ia.default.createElement("span",{className:"sr-only"},"Error:"),e);Gde.propTypes={message:Ta.default.string};var Kde=e=>{let{name:t,label:r,type:a,id:u,validation:s,multiline:m,options:x}=e,{register:q,formState:{errors:T}}=Ede(),I=Wde(T,t),L=m_t(I);return Ia.default.createElement(Ia.default.Fragment,null,Ia.default.createElement("div",{className:`error-label-container ${L?"show-error":""}`},Ia.default.createElement("label",{htmlFor:u,className:"font-semibold capitalize body1"},r,s.required.value&&Ia.default.createElement("span",{className:"required"},"*")),L&&Ia.default.createElement(Gde,{message:I.error.message,key:I.error.message})),m?Ia.default.createElement("textarea",at({className:"body2",name:t,id:u,rows:"6"},q(t,s))):x?Ia.default.createElement("select",at({className:"body2",name:t,id:u},q(t,s)),x.map(z=>Ia.default.createElement("option",{value:z.value,key:z.label},z.label))):Ia.default.createElement("input",at({className:"body2",type:a,id:u},q(t,s))))};Kde.propTypes={name:Ta.default.string.isRequired,label:Ta.default.string.isRequired,type:Ta.default.string,id:Ta.default.string.isRequired,validation:Ta.default.object.isRequired,multiline:Ta.default.bool,options:Ta.default.arrayOf(Ta.default.shape({value:Ta.default.oneOfType([Ta.default.bool,Ta.default.string]),label:Ta.default.string}))};var Dn=Kde;var Gs=vt(Mr(),1),EF=vt(Si(),1);var q_=vt(Hde(),1);var rme=vt(tme(),1);var lxt={EN:"en",DE:"de"},Pa={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:lxt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1},Xu={axiosApiInstance:null,appendSettings(e){Pa=Object.assign({},Pa,e)},getSettings(){return Pa},getBaseMaps(){return Pa.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Pa.MAPVIEW_PARAMS)},getLanguageDict(){return Pa.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Pa.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Pa.TERRAIN_TILES)},getUsername(){return Pa.USERNAME},isUserAuthenticated(){return Pa.USER_ISAUTHENTICATED===!0},updateSettings(e){Pa=e},_initAxiosApiInstance(){let e=Pa.API_GEOREFERENCE_BASEURL,t=ime(e)&&e.length===0;if(!aq(e)||t)throw new Error("The URL for the georeference service is not set.");let r={"Dev-Mode-Secret":"","Dev-Mode-Name":""},a=Object.assign({baseURL:e,withCredentials:!0},r?{headers:{get:r,post:r,put:r,delete:r}}:{});this.axiosApiInstance=rme.default.create(a)},getGeoreferenceApiClient(){return aq(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=Pa.MARKER_URL;if(!aq(e))throw new Error("The marker icon url is not set.");return{id:Pa.MARKER_IMAGE_ID,url:e}}};var Cxt=vt(dme(),1);function aq(e){return e!=null}function ime(e){return typeof e=="string"||e instanceof String}function sr(e){let t=Xu.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}function oq(e){let{onBack:t,mapId:r}=e;return Gs.default.createElement("div",{className:"upload-header"},Gs.default.createElement("div",{className:"back-btn-container"},Gs.default.createElement("span",{className:"glyphicon glyphicon-chevron-left"}),Gs.default.createElement("button",{className:"back-btn body1",onClick:t},"Back")),r==null?Gs.default.createElement("h4",null,sr("uploadmap-title")):Gs.default.createElement(Gs.default.Fragment,null,Gs.default.createElement("h4",null,sr("uploadmap-title-update")),Gs.default.createElement("span",null,"ID: ",r)))}oq.propTypes={onBack:EF.default.func.isRequired,mapId:EF.default.string};var zo=vt(Mr(),1),A_=vt(Si(),1);var sq={name:"file",id:"file-upload",accept:"image/tiff"};function uq(e){let{mapMetadata:t,isPending:r,onFileSelect:a,reloadKey:u}=e,s=x=>{if(x.preventDefault(),x.target.files){let q=x.target.files[0];a(q)}};return zo.default.createElement("div",{className:"upload-file-container"},zo.default.createElement("div",{className:"upload-section",onClick:x=>{x.preventDefault(),x.stopPropagation(),document.getElementById(sq.id).click()}},t.link_thumb_mid!==null&&r===!1&&zo.default.createElement("img",{src:`${t.link_thumb_mid}?${u}`,alt:"Thumbnail",className:"thumbnail-img"}),r===!0&&zo.default.createElement("div",{className:"image-selected"},zo.default.createElement("label",{className:"body1"},sr("uploadfile-label"))),t.link_thumb_mid===null&&r===!1&&zo.default.createElement("div",{className:"select-image"},zo.default.createElement("div",null,zo.default.createElement("span",{className:"glyphicon glyphicon-picture"})),zo.default.createElement("label",{className:"body1",htmlFor:sq.id},sr("uploadmap-upload-file")))),zo.default.createElement("div",{className:"input-file"},zo.default.createElement("input",{type:"file",id:sq.id,accept:sq.accept,onChange:s})))}uq.propTypes={isPending:A_.default.bool,mapMetadata:A_.default.object,onFileSelect:A_.default.func,reloadKey:A_.default.number};var Ln={description:{name:"description",label:"description",multiline:!0,id:"description",validation:{required:{value:!0,message:"required"}}},map_type:{name:"map_type",label:"map_type",id:"map_type",validation:{required:{value:!0,message:"required"}},options:[{label:"\xC4quidistantenkarte",value:"ae"},{label:"Andere Karten",value:"ak"},{label:"Stadtpl\xE4ne",value:"cm"},{label:"Geologische Karten",value:"gl"},{label:"Meilenbl\xE4tter",value:"mb"},{label:"Messtischbl\xE4tter",value:"mtb"},{label:"Topographische Karte des Deutschen Reiches",value:"tk"},{label:"Topographische Karten",value:"tkx"}]},license:{name:"license",label:"license",type:"text",id:"license",validation:{required:{value:!0,message:"required"}}},map_scale:{name:"map_scale",label:"map_scale",type:"number",id:"map_scale",validation:{required:{value:!0,message:"required"}}},measures:{name:"measures",label:"measures",type:"text",id:"measures",validation:{required:{value:!1,message:"required"}}},owner:{name:"owner",label:"owner",type:"text",id:"owner",validation:{required:{value:!1,message:"required"}}},permalink:{name:"permalink",label:"permalink",type:"text",id:"permalink",validation:{required:{value:!1,message:"required"}}},ppn:{name:"ppn",label:"ppn",type:"text",id:"ppn",validation:{required:{value:!1,message:"required"}}},technic:{name:"technic",label:"technic",type:"text",id:"technic",validation:{required:{value:!1,message:"required"}}},time_of_publication:{name:"time_of_publication",label:"time_of_publication",type:"number",id:"time_of_publication",validation:{required:{value:!0,message:"required"},maxLength:{value:4,message:"Please enter a valid year"}}},allow_download:{name:"allow_download",label:"allow_download",id:"allow_download",validation:{required:{value:!1,message:"required"}},options:[{label:"true",value:!0},{label:"false",value:!1}]},title:{name:"title",label:"title",type:"text",id:"title",validation:{required:{value:!0,message:"required"}}},title_serie:{name:"title_serie",label:"title_serie",type:"text",id:"title_serie",validation:{required:{value:!1,message:"required"}}},title_short:{name:"title_short",label:"title_short",type:"text",id:"title_short",validation:{required:{value:!0,message:"required"}}},type:{name:"type",label:"type",type:"text",id:"type",validation:{required:{value:!1,message:"required"}}}};var cf=vt(Mr(),1);var jF=vt(yve(),1);function kr(){return kr=jF.default?jF.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},kr.apply(this,arguments)}var Uve=vt(Pve(),1);var WF=vt(Bve(),1);function O_(e,t){return O_=WF.default?WF.default.bind():function(a,u){return a.__proto__=u,a},O_(e,t)}function mn(e,t){e.prototype=(0,Uve.default)(t.prototype),e.prototype.constructor=e,O_(e,t)}var Kve=vt(Gve(),1);function ra(e,t){if(e==null)return{};var r={},a=(0,Kve.default)(e),u,s;for(s=0;s<a.length;s++)u=a[s],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}var sge=vt(ZF());var uge=vt(Hve()),gq=vt(Si());var nm={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},HF={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};function XF(e){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var u=r[r.length-1];return typeof u=="function"?e.apply(void 0,r):function(s){return e.apply(void 0,r.concat([s]))}}}function Ks(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,uge.default)(!1),r+(t?"-"+t:"")}var No=XF(function(e,t){var r=t.propTypes||(t.propTypes={}),a=t.defaultProps||(t.defaultProps={});return r.bsClass=gq.default.string,a.bsClass=e,t}),bWt=XF(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var a=r.STYLES||[],u=r.propTypes||{};e.forEach(function(x){a.indexOf(x)===-1&&a.push(x)});var s=gq.default.oneOf(a);if(r.STYLES=a,s._values=a,r.propTypes=kr({},u,{bsStyle:s}),t!==void 0){var m=r.defaultProps||(r.defaultProps={});m.bsStyle=t}return r}),yq=XF(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var a=r.SIZES||[],u=r.propTypes||{};e.forEach(function(x){a.indexOf(x)===-1&&a.push(x)});var s=[];a.forEach(function(x){var q=HF[x];q&&q!==x&&s.push(q),s.push(x)});var m=gq.default.oneOf(s);return m._values=s,r.SIZES=a,r.propTypes=kr({},u,{bsSize:m}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function Zs(e){var t,r=(t={},t[Ks(e)]=!0,t);if(e.bsSize){var a=HF[e.bsSize]||e.bsSize;r[Ks(e,a)]=!0}return e.bsStyle&&(r[Ks(e,e.bsStyle)]=!0),r}function W0t(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function G0t(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function Hs(e){var t={};return(0,sge.default)(e).forEach(function(r){var a=r[0],u=r[1];G0t(a)||(t[a]=u)}),[W0t(e),t]}var YF=vt(Si()),k_=vt(Mr()),Z0t={label:YF.default.string.isRequired,onClick:YF.default.func},H0t={label:"Close"},QF=function(e){mn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,s=u.label,m=u.onClick;return k_.default.createElement("button",{type:"button",className:"close",onClick:m},k_.default.createElement("span",{"aria-hidden":"true"},"\xD7"),k_.default.createElement("span",{className:"sr-only"},s))},t}(k_.default.Component);QF.propTypes=Z0t;QF.defaultProps=H0t;var cge=QF;function Bo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sbt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(a){return a!=null}).reduce(function(a,u){if(typeof u!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return a===null?u:function(){for(var m=arguments.length,x=new Array(m),q=0;q<m;q++)x[q]=arguments[q];a.apply(this,x),u.apply(this,x)}},null)}var R_=sbt;var Hge=vt(ZF());function dz(e,t){var r=t.propTypes,a={},u={};return(0,Hge.default)(e).forEach(function(s){var m=s[0],x=s[1];r[m]?a[m]=x:u[m]=x}),[a,u]}var Xge=vt(Mc()),$q=vt(Mr()),Uo=vt(Si()),lm=vt(Vge()),Vq,n1t={in:Uo.default.bool,mountOnEnter:Uo.default.bool,unmountOnExit:Uo.default.bool,appear:Uo.default.bool,timeout:Uo.default.number,onEnter:Uo.default.func,onEntering:Uo.default.func,onEntered:Uo.default.func,onExit:Uo.default.func,onExiting:Uo.default.func,onExited:Uo.default.func},a1t={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},o1t=(Vq={},Vq[lm.ENTERING]="in",Vq[lm.ENTERED]="in",Vq),pz=function(e){mn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,s=u.className,m=u.children,x=ra(u,["className","children"]);return $q.default.createElement(lm.default,x,function(q,T){return $q.default.cloneElement(m,kr({},T,{className:(0,Xge.default)("fade",s,m.props.className,o1t[q])}))})},t}($q.default.Component);pz.propTypes=n1t;pz.defaultProps=a1t;var mz=pz;var Nz=vt(Mc()),Bz=vt(dye()),R_e=vt(N_()),D_e=vt(Xs()),Uz=vt(yz()),fm=vt(Mr()),Xi=vt(Si()),L_e=vt(Su()),dm=vt(S_e()),F_e=vt(wz()),z_e=vt(am());var q_e=vt(Mc()),Oz=vt(Mr()),A_e=vt(am());var MSt={componentClass:A_e.default},OSt={componentClass:"div"},kz=function(e){mn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,s=u.componentClass,m=u.className,x=ra(u,["componentClass","className"]),q=Hs(x),T=q[0],I=q[1],L=Zs(T);return Oz.default.createElement(s,kr({},I,{className:(0,q_e.default)(m,L)}))},t}(Oz.default.Component);kz.propTypes=MSt;kz.defaultProps=OSt;var W_=No("modal-body",kz);var Rz=vt(Mc()),G_=vt(Mr()),E_e=vt(Si());var kSt={dialogClassName:E_e.default.string},T_e=function(e){mn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u,s=this.props,m=s.dialogClassName,x=s.className,q=s.style,T=s.children,I=s.onMouseDownDialog,L=ra(s,["dialogClassName","className","style","children","onMouseDownDialog"]),z=Hs(L),Y=z[0],pe=z[1],de=Ks(Y),Z=kr({display:"block"},q),H=kr({},Zs(Y),(u={},u[de]=!1,u[Ks(Y,"dialog")]=!0,u));return G_.default.createElement("div",kr({},pe,{tabIndex:"-1",role:"dialog",style:Z,className:(0,Rz.default)(x,de)}),G_.default.createElement("div",{className:(0,Rz.default)(m,H),onMouseDown:I},G_.default.createElement("div",{className:Ks(Y,"content"),role:"document"},T)))},t}(G_.default.Component);T_e.propTypes=kSt;var yA=No("modal",yq([nm.LARGE,nm.SMALL],T_e));var I_e=vt(Mc()),Dz=vt(Mr()),C_e=vt(am());var RSt={componentClass:C_e.default},DSt={componentClass:"div"},Lz=function(e){mn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,s=u.componentClass,m=u.className,x=ra(u,["componentClass","className"]),q=Hs(x),T=q[0],I=q[1],L=Zs(T);return Dz.default.createElement(s,kr({},I,{className:(0,I_e.default)(m,L)}))},t}(Dz.default.Component);Lz.propTypes=RSt;Lz.defaultProps=DSt;var K_=No("modal-footer",Lz);var P_e=vt(Mc()),hm=vt(Si()),_A=vt(Mr());var LSt={closeLabel:hm.default.string,closeButton:hm.default.bool,onHide:hm.default.func},FSt={closeLabel:"Close",closeButton:!1},zSt={$bs_modal:hm.default.shape({onHide:hm.default.func})},xA=function(e){mn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,s=u.closeLabel,m=u.closeButton,x=u.onHide,q=u.className,T=u.children,I=ra(u,["closeLabel","closeButton","onHide","className","children"]),L=this.context.$bs_modal,z=Hs(I),Y=z[0],pe=z[1],de=Zs(Y);return _A.default.createElement("div",kr({},pe,{className:(0,P_e.default)(q,de)}),m&&_A.default.createElement(cge,{label:s,onClick:R_(L&&L.onHide,x)}),T)},t}(_A.default.Component);xA.propTypes=LSt;xA.defaultProps=FSt;xA.contextTypes=zSt;var Z_=No("modal-header",xA);var M_e=vt(Mc()),Fz=vt(Mr()),O_e=vt(am());var NSt={componentClass:O_e.default},BSt={componentClass:"h4"},zz=function(e){mn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,s=u.componentClass,m=u.className,x=ra(u,["componentClass","className"]),q=Hs(x),T=q[0],I=q[1],L=Zs(T);return Fz.default.createElement(s,kr({},I,{className:(0,M_e.default)(m,L)}))},t}(Fz.default.Component);zz.propTypes=NSt;zz.defaultProps=BSt;var k_e=No("modal-title",zz);var USt=kr({},dm.default.propTypes,yA.propTypes,{backdrop:Xi.default.oneOf(["static",!0,!1]),backdropClassName:Xi.default.string,keyboard:Xi.default.bool,animation:Xi.default.bool,dialogComponentClass:z_e.default,autoFocus:Xi.default.bool,enforceFocus:Xi.default.bool,restoreFocus:Xi.default.bool,show:Xi.default.bool,onHide:Xi.default.func,onEnter:Xi.default.func,onEntering:Xi.default.func,onEntered:Xi.default.func,onExit:Xi.default.func,onExiting:Xi.default.func,onExited:Xi.default.func,container:dm.default.propTypes.container}),jSt=kr({},dm.default.defaultProps,{animation:!0,dialogComponentClass:yA}),VSt={$bs_modal:Xi.default.shape({onHide:Xi.default.func})};function $St(e){return fm.default.createElement(mz,kr({},e,{timeout:to.TRANSITION_DURATION}))}function WSt(e){return fm.default.createElement(mz,kr({},e,{timeout:to.BACKDROP_TRANSITION_DURATION}))}var to=function(e){mn(t,e);function t(a,u){var s;return s=e.call(this,a,u)||this,s.handleDialogBackdropMouseDown=function(){s._waitingForMouseUp=!0},s.handleMouseUp=function(m){var x=s._modal.getDialogElement();s._waitingForMouseUp&&m.target===x&&(s._ignoreBackdropClick=!0),s._waitingForMouseUp=!1},s.handleEntering=s.handleEntering.bind(Bo(Bo(s))),s.handleExited=s.handleExited.bind(Bo(Bo(s))),s.handleWindowResize=s.handleWindowResize.bind(Bo(Bo(s))),s.handleDialogClick=s.handleDialogClick.bind(Bo(Bo(s))),s.setModalRef=s.setModalRef.bind(Bo(Bo(s))),s.state={style:{}},s}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(u){this._modal=u},r.handleDialogClick=function(u){if(this._ignoreBackdropClick||u.target!==u.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){Bz.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){Bz.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(D_e.default){var u=this._modal.getDialogElement(),s=u.scrollHeight,m=(0,R_e.default)(u),x=(0,F_e.default)(L_e.default.findDOMNode(this.props.container||m.body)),q=s>m.documentElement.clientHeight;this.setState({style:{paddingRight:x&&!q?(0,Uz.default)():void 0,paddingLeft:!x&&q?(0,Uz.default)():void 0}})}},r.render=function(){var u=this.props,s=u.backdrop,m=u.backdropClassName,x=u.animation,q=u.show,T=u.dialogComponentClass,I=u.className,L=u.style,z=u.children,Y=u.onEntering,pe=u.onExited,de=ra(u,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),Z=dz(de,dm.default),H=Z[0],J=Z[1],ve=q&&!x&&"in";return fm.default.createElement(dm.default,kr({},H,{ref:this.setModalRef,show:q,containerClassName:Ks(de,"open"),transition:x?$St:void 0,backdrop:s,backdropTransition:x?WSt:void 0,backdropClassName:(0,Nz.default)(Ks(de,"backdrop"),m,ve),onEntering:R_(Y,this.handleEntering),onExited:R_(pe,this.handleExited),onMouseUp:this.handleMouseUp}),fm.default.createElement(T,kr({},J,{style:kr({},this.state.style,L),className:(0,Nz.default)(I,ve),onClick:s===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),z))},t}(fm.default.Component);to.propTypes=USt;to.defaultProps=jSt;to.childContextTypes=VSt;to.Body=W_;to.Header=Z_;to.Title=k_e;to.Footer=K_;to.Dialog=yA;to.TRANSITION_DURATION=300;to.BACKDROP_TRANSITION_DURATION=150;var jz=No("modal",yq([nm.LARGE,nm.SMALL],to));var H_=vt(Si(),1);var N_e=({show:e,onClose:t,onDelete:r,title:a})=>cf.default.createElement(jz,{show:e,onHide:t,className:"vkf-delete-dialog"},cf.default.createElement(Z_,{closeButton:!0},a),cf.default.createElement(W_,null,sr("deletemodal-body")),cf.default.createElement(K_,null,cf.default.createElement("button",{className:"btn btn-default",type:"button",onClick:t},sr("deletemodal-cancel-btn")),cf.default.createElement("button",{className:"btn btn-primary",type:"button",onClick:r},sr("deletemodal-delete-btn"))));N_e.propTypes={show:H_.default.bool,onClose:H_.default.func,onDelete:H_.default.func,title:H_.default.string};var B_e=N_e;function bA(e){let t=e.response||!1,r=e.response&&e.response.status<=404;return!(t&&r)}function GSt(e){let t={};return Object.keys(Jp()).forEach(r=>{e[r]!==void 0&&(t[r]=e[r])}),t}function U_e(e){let t={};return Object.keys(e).forEach(r=>{e[r]!==null&&(t[r]=e[r])}),t}function j_e(e){return yi(this,null,function*(){try{let t=Xu.getGeoreferenceApiClient(),r=`/maps/${e}`;return yield t.delete(r),Hu.ok(!0)}catch(t){return bA(t)&&console.error(t),Hu.error(t)}})}function wA(e){return yi(this,null,function*(){try{let t=Xu.getGeoreferenceApiClient(),r=`/maps/${e}`,a=yield t.get(r);if(a.data.map_id!==e){let s="The map id from the server does not match the given map id.";throw new Error(s)}let u=GSt(a.data);return Hu.ok(u)}catch(t){return bA(t)&&console.error(t),Hu.error(t)}})}function V_e(e,t){return yi(this,null,function*(){try{let r=Xu.getGeoreferenceApiClient(),a=new FormData;if(e!==void 0&&t!==null)a.append("metadata",JSON.stringify(U_e(e))),a.append("file",t);else{let q="Either the map metadata or the map image file is not set.";throw new Error(q)}let u={headers:{"Content-Type":"multipart/form-data"}},x=""+(yield r.post("/maps/",a,u)).data.map_id;return Hu.ok(x)}catch(r){return bA(r)&&console.error(r),Hu.error(r)}})}function $_e(e,t,r){return yi(this,null,function*(){try{let a=Xu.getGeoreferenceApiClient(),u=new FormData;t!==null&&u.append("metadata",JSON.stringify(U_e(t))),r!==null&&u.append("file",r);let s={headers:{"Content-Type":"multipart/form-data"}},m=`/maps/${e}`,x=yield a.post(m,u,s);return Hu.ok(x.data.map_id)}catch(a){return bA(a)&&console.error(a),Hu.error(a)}})}function SA(e){let{mapId:t,mapMetadata:r,onBack:a,onRefresh:u}=e,[s,m]=(0,Mt.useState)(null),[x,q]=(0,Mt.useState)(!1),[T,I]=(0,Mt.useState)(null),[L,z]=(0,Mt.useState)(!1),[Y,pe]=(0,Mt.useState)(!1),[de,Z]=(0,Mt.useState)(null),[H,J]=(0,Mt.useState)(Date.now()),ve=Dde({defaultValues:da(at({},r),{time_of_publication:r?r.time_of_publication.slice(0,4):""})}),be=(0,Mt.useCallback)(()=>{a()},[a]),Le=yt=>{yt!==null&&(m(yt),q(!1))},Pe=ve.handleSubmit(yt=>yi(this,null,function*(){let Ct=Vde(yt);if(pe(!0),q(!1),s===null&&t===null){q(!0),pe(!1);return}let _r=$de(Ct,r);if(_r&&s!==null&&t===null){let Ur=yield V_e(Ct,s),Dr=Ur.data;Dr!==null?I(Dr):Z(Ur.httpErrorStatusCode),pe(!1);return}else if(t!==null&&_r||s!==null){let Ur=yield $_e(t,Ct,s),Dr=Ur.data;Dr!==null?I(Dr):Z(Ur.httpErrorStatusCode),pe(!1);return}else console.log("Currently there are not action to perform.");ve.reset()})),Ge=(0,Mt.useCallback)(()=>yi(this,null,function*(){let yt=yield wA(T||t),Ct=yt.data;Ct!==null?(u({mapId:T||t,metadata:Ct}),I(null),m(null),Z(null),J(Date.now())):Z(yt.httpErrorStatusCode)}),[T]),pt=(0,Mt.useCallback)(()=>yi(this,null,function*(){let yt=yield j_e(t);yt.data===!0?a():Z(yt.httpErrorStatusCode)}),[t]),Ve=()=>{z(!0)},Br=()=>{z(!1)},cr=()=>{pt().then(()=>{z(!1)})};return Mt.default.createElement("div",{className:"container upload-view"},Mt.default.createElement("div",{className:"upload-header-container"},Mt.default.createElement(oq,{mapId:t||T,onBack:be}),T!==null&&de===null&&Mt.default.createElement("p",{className:"bg-success"},sr("uploadmap-success")),de!==null&&Mt.default.createElement("div",{className:"error-messages"},de===401&&Mt.default.createElement("p",{className:"bg-danger"},sr("common-errors-http-401")),de===403&&Mt.default.createElement("p",{className:"bg-danger"},sr("common-errors-http-403")),de===404&&Mt.default.createElement("p",{className:"bg-danger"},sr("uploadmap-errors-refresh-http-400")),de>404&&Mt.default.createElement("p",{className:"bg-danger"},sr("common-errors-unexpected"))),x&&Mt.default.createElement("p",{className:"bg-danger"},sr("common-errors-upload-file"))),Mt.default.createElement("div",{className:`upload-body-container ${T!==null?"active":""}`},Mt.default.createElement(Tde,at({},ve),Mt.default.createElement("form",{className:"upload-form",id:"upload-form",onSubmit:yt=>yt.preventDefault()},Mt.default.createElement("div",{className:"left-container"},Mt.default.createElement(Dn,at({},Ln.description)),Mt.default.createElement(Dn,at({},Ln.license)),Mt.default.createElement(Dn,at({},Ln.map_type)),Mt.default.createElement(Dn,at({},Ln.map_scale)),Mt.default.createElement(Dn,at({},Ln.measures)),Mt.default.createElement(Dn,at({},Ln.owner)),Mt.default.createElement(Dn,at({},Ln.permalink)),Mt.default.createElement(Dn,at({},Ln.ppn)),Mt.default.createElement(Dn,at({},Ln.technic)),Mt.default.createElement(Dn,at({},Ln.time_of_publication)),Mt.default.createElement(Dn,at({},Ln.allow_download)),Mt.default.createElement(Dn,at({},Ln.title)),Mt.default.createElement(Dn,at({},Ln.title_serie)),Mt.default.createElement(Dn,at({},Ln.title_short)),Mt.default.createElement(Dn,at({},Ln.type))),Mt.default.createElement("div",{className:"right-container"},Mt.default.createElement(uq,{mapMetadata:r,onFileSelect:Le,isPending:s!==null,reloadKey:H}),Mt.default.createElement("div",null,Mt.default.createElement("div",{className:"action-buttons"},Mt.default.createElement("button",{className:"btn btn-default",type:"button",disabled:t===null,onClick:Ve},sr("uploadmap-delete-btn")),Mt.default.createElement("button",{className:"btn btn-primary",type:"button",disabled:T===null&&t===null,onClick:Ge},"Refresh"),Mt.default.createElement("button",{className:"btn btn-primary has-spinner",type:"button",disabled:T!==null&&t===null,title:T!==null&&t===null?sr("uploadmap-save-btn-disabled-title"):void 0,onClick:Pe},Y===!0&&Mt.default.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}),sr("uploadmap-save-btn")))))))),L&&Mt.default.createElement(B_e,{show:L,onClose:Br,onDelete:cr,title:r.title}))}SA.propTypes={onBack:pm.default.func.isRequired,onRefresh:pm.default.func.isRequired,mapId:pm.default.oneOfType([pm.default.string]),mapMetadata:pm.default.object};var ti=vt(Mr(),1),Wz=vt(Si(),1),X_e=vt(Z_e(),1);var cs=vt(Mr(),1),H_e=vt(Si(),1);function qA(e){let{onEnterId:t}=e,[r,a]=(0,cs.useState)(""),u="input-field-search",s=(0,cs.useCallback)(x=>{a(x.target.value)},[a]),m=()=>{let x=r.trim();t(x),a(x)};return cs.default.createElement("div",{className:"search-input-field"},cs.default.createElement("label",{htmlFor:u,className:"body1"},sr("searchmap-subtitle")),cs.default.createElement("div",{className:"input-wrapper"},cs.default.createElement("input",{type:"text",className:"input-field body2",id:u,placeholder:sr("searchmap-placeholder"),value:r,onChange:s,onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),m())}}),cs.default.createElement("button",{type:"button",className:"search-button",onClick:()=>m()},cs.default.createElement("span",{className:"glyphicon glyphicon-search"}))))}qA.propTypes={onEnterId:H_e.default.func.isRequired};var hf=vt(Mr(),1),X_=vt(Si(),1);function AA(e){let{mapId:t,mapMetadata:r,onClick:a}=e;return hf.default.createElement("li",{className:"map-entry-item",onClick:a},hf.default.createElement("div",{className:"image-container"},hf.default.createElement("img",{src:r.link_thumb_small,alt:"Map Image",loading:"lazy"})),hf.default.createElement("div",{className:"metadata-container"},hf.default.createElement("p",{className:"body2"},r.title_short),hf.default.createElement("p",{className:"body1"},t)))}AA.propTypes={mapId:X_.default.oneOfType([X_.default.string]),mapMetadata:X_.default.object,onClick:X_.default.func.isRequired};function EA(e){let{onSelectMap:t,onStartUpload:r}=e,[a,u]=(0,ti.useState)({mapId:null,metadata:null}),[s,m]=(0,ti.useState)(null),x=(0,X_e.default)(q=>yi(this,null,function*(){let T=yield wA(q),I=T.data;I!==null?(u({mapId:q,metadata:I}),m(null)):(u({mapId:null,metadata:null}),m(T.httpErrorStatusCode))}),300);return ti.default.createElement("div",{className:"container search-view"},ti.default.createElement("div",{className:"content-header"},ti.default.createElement("h3",null,sr("searchmap-title")),ti.default.createElement("button",{type:"button",className:"btn btn-primary upload-button",onClick:()=>r()},sr("searchmap-upload-button"))),ti.default.createElement("div",{className:"content-body"},ti.default.createElement(qA,{onEnterId:x}),a.mapId!==null&&ti.default.createElement("ul",{className:"map-list"},ti.default.createElement(AA,{mapId:a.mapId,mapMetadata:a.metadata,onClick:()=>t(a)})),s!==null&&ti.default.createElement("div",{className:"not-found body1"},ti.default.createElement("p",null,sr("uploadmap-p")),ti.default.createElement("ul",{className:"no-results"},s===400&&ti.default.createElement("li",null,sr("searchmap-errors-http-400")),s===401&&ti.default.createElement("li",null,sr("common-errors-http-401")),s===403&&ti.default.createElement("li",null,sr("common-errors-http-403")),s===404&&ti.default.createElement(ti.default.Fragment,null,ti.default.createElement("li",null,sr("uploadmap-li1")),ti.default.createElement("li",null,sr("uploadmap-li2")),ti.default.createElement("li",null,sr("uploadmap-li3"))),s>404&&ti.default.createElement("li",null,sr("common-errors-unexpected"))))))}EA.propTypes={onSelectMap:Wz.default.func.isRequired,onStartUpload:Wz.default.func.isRequired};var mm={SEARCH:"search",UPLOAD:"upload"},cqt=()=>{let[e,t]=(0,ff.useState)(mm.SEARCH),[r,a]=(0,ff.useState)({mapId:null,metadata:Jp()}),u=x=>{a(x),t(mm.UPLOAD)},s=()=>{a({mapId:null,metadata:Jp()}),t(mm.UPLOAD)},m=()=>{t(mm.SEARCH),a({mapId:null,metadata:Jp()})};return ff.default.createElement("div",{className:"vkf-plugin-upload-map"},e===mm.SEARCH&&ff.default.createElement(EA,{onSelectMap:u,onStartUpload:s}),e===mm.UPLOAD&&ff.default.createElement(SA,{mapId:r.mapId,mapMetadata:r.metadata,onBack:m,onRefresh:u}))},J_e=cqt;var hqt=Xu;function fqt(e){Q_e.default.render(Y_e.default.createElement(J_e,{id:e.id}),e)}return Q0e(dqt)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.0/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/